!function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(r,a,function(e){return t[e]}.bind(null,a));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=6)}([function(t,e){},function(t,e,n){var r=n(2);"string"==typeof r&&(r=[[t.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(4)(r,a);r.locals&&(t.exports=r.locals)},function(t,e,n){(e=n(3)(!1)).push([t.i,"/* Icons for bootstrap 4 */\r\n\r\n.mdi::before {\r\n    font-size: 24px;\r\n    line-height: 14px;\r\n}\r\n\r\n.btn .mdi::before {\r\n    position: relative;\r\n    top: 4px;\r\n}\r\n\r\n.btn-xs .mdi::before {\r\n    font-size: 18px;\r\n    top: 3px;\r\n}\r\n\r\n.btn-sm .mdi::before {\r\n    font-size: 18px;\r\n    top: 3px;\r\n}\r\n\r\n.dropdown-menu .mdi {\r\n    width: 18px;\r\n}\r\n\r\n.dropdown-menu .mdi::before {\r\n    position: relative;\r\n    top: 4px;\r\n    left: -8px;\r\n}\r\n\r\n.nav .mdi::before {\r\n    position: relative;\r\n    top: 4px;\r\n}\r\n\r\n.navbar .navbar-toggle .mdi::before {\r\n    position: relative;\r\n    top: 4px;\r\n    color: #FFF;\r\n}\r\n\r\n.breadcrumb .mdi::before {\r\n    position: relative;\r\n    top: 4px;\r\n}\r\n\r\n.breadcrumb a:hover {\r\n    text-decoration: none;\r\n}\r\n\r\n.breadcrumb a:hover span {\r\n    text-decoration: underline;\r\n}\r\n\r\n.alert .mdi::before {\r\n    position: relative;\r\n    top: 4px;\r\n    margin-right: 2px;\r\n}\r\n\r\n.input-group-addon .mdi::before {\r\n    position: relative;\r\n    top: 3px;\r\n}\r\n\r\n.navbar-brand .mdi::before {\r\n    position: relative;\r\n    top: 2px;\r\n    margin-right: 2px;\r\n}\r\n\r\n.list-group-item .mdi::before {\r\n    position: relative;\r\n    top: 3px;\r\n    left: -3px\r\n}\r\n\r\n/* SVG elements and text */\r\n\r\n#main-vis {\r\n    margin-bottom: 10px;\r\n}\r\n\r\n.svg-container {\r\n    display: inline-block;\r\n    position: relative;\r\n    width: 100%;\r\n    /* aspect ratio */\r\n    vertical-align: top;\r\n    overflow: visible;\r\n}\r\n\r\n.svg-content {\r\n    display: inline-block;\r\n    position: absolute;\r\n    border: 1px solid #000;\r\n}\r\n\r\n#main-vis-legend-div {\r\n    display: none;\r\n}\r\n\r\n#hierarchy-legend-div {\r\n    display: none;\r\n}\r\n\r\n#main-vis-legend {\r\n    float: right;\r\n    display: inline-block;\r\n    position: relative;\r\n    overflow: visible;\r\n    top: 10px;\r\n    left: 10px;\r\n}\r\n\r\n#hierarchy-legend {\r\n    float: left;\r\n    display: inline-block;\r\n    position: relative;\r\n    overflow: visible;\r\n    top: 10px;\r\n    left: 10px;\r\n}\r\n\r\n.svg-content-dendrogram {\r\n    display: inline-block;\r\n    border: 1px solid #000;\r\n}\r\n\r\n.svg-line-chart-container {\r\n    display: inline-block;\r\n    position: relative;\r\n    width: 100%;\r\n    height: auto;\r\n    /* depends on svg ratio */\r\n    padding-bottom: 17%;\r\n    /* aspect ratio */\r\n    vertical-align: top;\r\n    overflow: visible;\r\n}\r\n\r\n.svg-dendrogram-container {\r\n    display: inline-block;\r\n    position: relative;\r\n    height: auto;\r\n    vertical-align: top;\r\n    overflow: visible;\r\n}\r\n\r\n.axis path {\r\n    display: none;\r\n}\r\n\r\n.axis line {\r\n    stroke-opacity: 0.3;\r\n    shape-rendering: crispEdges;\r\n}\r\n\r\n.x {\r\n    font-size: 1em;\r\n}\r\n\r\n.y {\r\n    font-size: 1em;\r\n}\r\n\r\n.axis-line-chart path line {\r\n    fill: none;\r\n    stroke: #000;\r\n    shape-rendering: crispEdges;\r\n}\r\n\r\n.line {\r\n    fill: none;\r\n    stroke-width: 5px;\r\n}\r\n\r\n/* Time  */\r\n\r\n.frame-text {\r\n    margin-top: 0;\r\n    margin-bottom: 0;\r\n    font-size: 2em;\r\n    color: inherit;\r\n    font-weight: 500;\r\n    line-height: 1.1;\r\n}\r\n\r\n/* Slider ticks  */\r\n\r\n.ui-slider-tick {\r\n    display: inline-block;\r\n    width: 3px;\r\n    background: #337ab7;\r\n    height: 0.8em;\r\n    position: absolute;\r\n}\r\n\r\n/* Laoding gif   */\r\n\r\n#loading {\r\n    display: block;\r\n    text-align: center;\r\n}\r\n\r\n/* Color legend    */\r\n\r\n.legend {\r\n    font-size: 12px;\r\n    stroke: #000;\r\n}\r\n\r\n.legend-text {\r\n    font-size: 1.2em;\r\n    color: inherit;\r\n    line-height: 1.1;\r\n}\r\n\r\n.line-chart-legend-text {\r\n    font-size: 2em;\r\n    color: inherit;\r\n    line-height: 1.1;\r\n}\r\n\r\n.time-line {\r\n    fill: none;\r\n    stroke-width: 5px;\r\n    stroke: #000;\r\n}\r\n\r\n/*swarm features */\r\n\r\n.centroid {\r\n    fill-opacity: 0;\r\n    stroke: #e7298a;\r\n    stroke-width: 3px;\r\n}\r\n\r\n.medoid {\r\n    fill: #e7298a !important;\r\n    stroke: #e7298a !important;\r\n}\r\n\r\n.hull-path {\r\n    fill: #fff;\r\n    fill-opacity: 0;\r\n    stroke-width: 3;\r\n    stroke: #252525;\r\n    stroke-opacity: 0.5;\r\n}\r\n\r\n.hierarchy-group {\r\n    stroke-width: 10;\r\n    stroke-linejoin: round;\r\n    opacity: 0.2;\r\n}\r\n\r\n.delaunay-triangulation {\r\n    fill-opacity: 0;\r\n    stroke-width: 2;\r\n    stroke: #000;\r\n    stroke-opacity: 0.4;\r\n}\r\n\r\n/* Color brewer picker div */\r\n\r\n.palette {\r\n    cursor: pointer;\r\n    display: table;\r\n    vertical-align: bottom;\r\n    margin: 4px 0 4px 4px;\r\n    background: #fff;\r\n    border: solid 1px #aaa;\r\n}\r\n\r\n.swatch {\r\n    display: inline-block;\r\n    vertical-align: middle;\r\n    width: 22px;\r\n    height: 22px;\r\n}\r\n\r\n.voronoi {\r\n    fill-opacity: 0;\r\n    stroke-width: 3;\r\n    stroke: #000;\r\n    stroke-opacity: 0.2;\r\n}\r\n\r\n/* Tooltip */\r\n\r\ndiv.tooltip {\r\n    pointer-events: none;\r\n    opacity: 0;\r\n    background: rgb(255, 255, 255) !important;\r\n    border-left-color: #1b809e !important;\r\n    border: 1px solid #eee;\r\n    border-left-width: 5px;\r\n    border-radius: 3px;\r\n    position: absolute;\r\n}\r\n\r\ndiv.tooltip table td:nth-child(2) {\r\n    text-align: center;\r\n    font-weight: bold;\r\n}\r\n\r\n.tooltip-span {\r\n    display: block;\r\n    width: 150px;\r\n    word-wrap: break-word;\r\n    font-size: 1.5em;\r\n}\r\n\r\n.upper-outer-area, .lower-outer-area {\r\n    stroke-width: 1;\r\n    fill: #74a9cf;\r\n    stroke: #3690c0;\r\n}\r\n\r\n.upper-inner-area, .lower-inner-area {\r\n    stroke-width: 1;\r\n    fill: #045a8d;\r\n    stroke: #023858;\r\n}\r\n\r\n.median-line {\r\n    fill: none;\r\n    stroke: #525252;\r\n    stroke-width: 5;\r\n}\r\n\r\n.selected {\r\n    background: #999;\r\n    border: 4px solid #4d4d4d;\r\n    -moz-border-radius: 5px;\r\n    -webkit-border-radius: 5px;\r\n    box-shadow: 1px 2px 4px rgba(0, 0, 0, .4);\r\n}\r\n\r\n.zoom {\r\n    fill: none;\r\n    pointer-events: all;\r\n}\r\n\r\n.x.axis-line-chart>g>text {\r\n    font-size: 3em;\r\n    color: inherit;\r\n    line-height: 1.1;\r\n}\r\n\r\n.arrow {\r\n    stroke-width: 1;\r\n}\r\n\r\n#centroid-line {\r\n    stroke-width: 1;\r\n    stroke: #e7298a;\r\n}\r\n\r\n#centroid-arrow {\r\n    fill: #e7298a;\r\n}\r\n\r\n.metadata-swatch {\r\n    width: 30px;\r\n    height: 30px;\r\n    border-radius: 3px;\r\n    border: 2px solid #666;\r\n}\r\n\r\n.metadata-swatch-clickable:hover {\r\n    border: 2px solid #000;\r\n    cursor: pointer;\r\n}\r\n\r\n.dropdown-menu {\r\n    min-width: 40px;\r\n    padding: 5px;\r\n}\r\n\r\n.metadata-legend {\r\n    list-style: none;\r\n    margin-top: 10px;\r\n}\r\n\r\n.metadata-legend li {\r\n    float: left;\r\n    margin-right: 10px;\r\n}\r\n\r\n.metadata-legend span {\r\n    border: 2px solid #666;\r\n    float: left;\r\n    width: 30px;\r\n    height: 30px;\r\n}\r\n\r\n.metadata-legend .bl-avg {\r\n    background-color: #7fc97f;\r\n}\r\n\r\n.metadata-legend .avg {\r\n    background-color: #fdc086;\r\n}\r\n\r\n.metadata-legend .ab-avg {\r\n    background-color: #386cb0;\r\n}\r\n\r\n.network-edges {\r\n    fill-opacity: 0;\r\n    stroke-width: 2;\r\n}\r\n\r\n.network-background-edges {\r\n    fill-opacity: 0;\r\n    stroke-opacity: 0.25;\r\n    stroke: #737373;\r\n}\r\n\r\n.node text {\r\n    font: 12px sans-serif;\r\n}\r\n\r\n.node--internal text {\r\n    text-shadow: 0 1px 0 #fff, 0 -1px 0 #fff, 1px 0 0 #fff, -1px 0 0 #fff;\r\n}\r\n\r\n.link {\r\n    fill: none;\r\n    stroke: #636363;\r\n    stroke-width: 5px;\r\n}\r\n\r\n#active-network-name {\r\n    font-weight: bold;\r\n    color: #296292;\r\n}\r\n\r\n.active-level {\r\n    fill: #386cb0;\r\n}\r\n\r\n#dendrogram-panel {\r\n    position: initial;\r\n}\r\n\r\n#dendrogram-panel {\r\n    display: none\r\n}\r\n\r\n.show-dendrogram {\r\n    float: right;\r\n    border-radius: 3px;\r\n    border: 1px solid #D1D3D4;\r\n    font-weight: normal;\r\n}\r\n\r\n.show-dendrogram:hover {\r\n    background: #D1D3D4;\r\n}\r\n\r\n.dendrogram-text {\r\n    font-size: 10em !important;\r\n}\r\n\r\n.highlight-hierarchy {\r\n    fill: #252525;\r\n    stroke: #252525;\r\n    stroke-width: 10;\r\n    stroke-linejoin: round;\r\n    opacity: 0.3;\r\n}\r\n\r\n.animal-highlight {\r\n    fill: #c51b7d !important;\r\n}\r\n\r\n#dendrogram-buttons-div .btn span.glyphicon {\r\n    opacity: 0;\r\n}\r\n\r\n#dendrogram-buttons-div .btn.active span.glyphicon {\r\n    opacity: 1;\r\n}\r\n\r\n#dendrogram-buttons-div {\r\n    border: 2px solid #D1D3D4;\r\n    border-radius: 5px;\r\n}\r\n\r\n#dendrogram-legend {\r\n    margin-left: 20px;\r\n}\r\n\r\n.intersection {\r\n    fill: url(#striped) !important;\r\n    stroke: #67000d;\r\n}\r\n\r\n.sym-difference {\r\n    fill: url(#striped) !important;\r\n    stroke: #67000d;\r\n}\r\n\r\n.modal-lg {\r\n    max-width: 80%;\r\n}\r\n\r\n.background-image {\r\n    background: #fff;\r\n}",""]),t.exports=e},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var a=(o=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(l," */")),i=r.sources.map((function(t){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(t," */")}));return[n].concat(i).concat([a]).join("\n")}var o,s,l;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var a={};if(r)for(var i=0;i<this.length;i++){var o=this[i][0];null!=o&&(a[o]=!0)}for(var s=0;s<t.length;s++){var l=[].concat(t[s]);r&&a[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),e.push(l))}},e}},function(t,e,n){var r,a,i={},o=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===a&&(a=r.apply(this,arguments)),a}),s=function(t){return document.querySelector(t)},l=function(t){var e={};return function(t){if("function"==typeof t)return t();if(void 0===e[t]){var n=s.call(this,t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),d=null,c=0,h=[],p=n(5);function u(t,e){for(var n=0;n<t.length;n++){var r=t[n],a=i[r.id];if(a){a.refs++;for(var o=0;o<a.parts.length;o++)a.parts[o](r.parts[o]);for(;o<r.parts.length;o++)a.parts.push(b(r.parts[o],e))}else{var s=[];for(o=0;o<r.parts.length;o++)s.push(b(r.parts[o],e));i[r.id]={id:r.id,refs:1,parts:s}}}}function f(t,e){for(var n=[],r={},a=0;a<t.length;a++){var i=t[a],o=e.base?i[0]+e.base:i[0],s={css:i[1],media:i[2],sourceMap:i[3]};r[o]?r[o].parts.push(s):n.push(r[o]={id:o,parts:[s]})}return n}function m(t,e){var n=l(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=h[h.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),h.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var a=l(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,a)}}function g(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=h.indexOf(t);e>=0&&h.splice(e,1)}function v(t){var e=document.createElement("style");return void 0===t.attrs.type&&(t.attrs.type="text/css"),x(e,t.attrs),m(t,e),e}function x(t,e){Object.keys(e).forEach((function(n){t.setAttribute(n,e[n])}))}function b(t,e){var n,r,a,i;if(e.transform&&t.css){if(!(i=e.transform(t.css)))return function(){};t.css=i}if(e.singleton){var o=c++;n=d||(d=v(e)),r=w.bind(null,n,o,!1),a=w.bind(null,n,o,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",x(e,t.attrs),m(t,e),e}(e),r=T.bind(null,n,e),a=function(){g(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(e),r=$.bind(null,n),a=function(){g(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else a()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=o()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=f(t,e);return u(n,e),function(t){for(var r=[],a=0;a<n.length;a++){var o=n[a];(s=i[o.id]).refs--,r.push(s)}t&&u(f(t,e),e);for(a=0;a<r.length;a++){var s;if(0===(s=r[a]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete i[s.id]}}}};var y,k=(y=[],function(t,e){return y[t]=e,y.filter(Boolean).join("\n")});function w(t,e,n,r){var a=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=k(e,a);else{var i=document.createTextNode(a),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(i,o[e]):t.appendChild(i)}}function $(t,e){var n=e.css,r=e.media;if(r&&t.setAttribute("media",r),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function T(t,e,n){var r=n.css,a=n.sourceMap,i=void 0===e.convertToAbsoluteUrls&&a;(e.convertToAbsoluteUrls||i)&&(r=p(r)),a&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");var o=new Blob([r],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(t,e){var a,i=e.trim().replace(/^"(.*)"$/,(function(t,e){return e})).replace(/^'(.*)'$/,(function(t,e){return e}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?t:(a=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(a)+")")}))}},function(t,e,n){"use strict";let r,a;function i(){let t=v,e=j;for(var n=d3.event.selection,r=0;r<ct.length;r++){var a=[t[r].p[0],t[r].p[1]];n[0][0]<=a[0]&&a[0]<=n[1][0]&&n[0][1]<=a[1]&&a[1]<=n[1][1]&&e.push(t[r].a)}D(e),$("#play-button").hasClass("active")||((void 0)(),(void 0)()),$("#brushing-button").removeClass("active"),$(".brush").remove()}n.r(e),n.d(e,"dataset",(function(){return at})),n.d(e,"datasetMetadata",(function(){return it})),n.d(e,"swarmData",(function(){return ot})),n.d(e,"dataSetPercentile",(function(){return st})),n.d(e,"networkData",(function(){return lt})),n.d(e,"networkHierarchy",(function(){return dt})),n.d(e,"animalIds",(function(){return ct})),n.d(e,"addToDataset",(function(){return ht})),n.d(e,"setDataSetPercentile",(function(){return pt})),n.d(e,"setMetaData",(function(){return ut})),n.d(e,"setSwarmData",(function(){return ft})),n.d(e,"setDatasetFeature",(function(){return mt})),n.d(e,"setNetworkData",(function(){return gt})),n.d(e,"setHierarchyData",(function(){return vt})),n.d(e,"setAnimalIds",(function(){return xt}));let o,s={type:"Linear",color:colorbrewer.BuYlBu};function l(){return"Linear"===s.type?d3.scaleLinear().domain(st[A]).range(s.color):"Threshold"===s.type?d3.scaleThreshold().domain(st[A]).range(s.color):void 0}function d(){d3.select(".colors-body").selectAll(".palette").data(d3.entries(colorbrewer)).enter().append("span").attr("class","palette").attr("title",(function(t){return t.key})).on("click",(function(t){$(".palette").removeClass("selected"),$('.palette[title="'+t.key+'"]').addClass("selected"),s.color=colorbrewer[t.key],function(){let t,e;if($("#main-vis-legend-div").show(),"black"!==A){var n=l();t=o.selectAll("rect.legend").data(n.range()),e=o.selectAll("text.legend-text").data(n.domain())}else t=o.selectAll("rect.legend").data([]),e=o.selectAll("text.legend-text").data([]),$("#main-vis-legend-div").hide();t.style("fill",(function(t){return t})),t.enter().append("rect").attr("class","legend").attr("width",50).attr("height",20).attr("y",0).attr("x",(function(t,e){return 50+50*e+"px"})).style("fill",(function(t){return t})),t.exit().remove(),e.text((function(t){return Math.ceil(2*t)/2})),e.enter().append("text").attr("class","legend-text").attr("y",40).attr("x",(function(t,e){return 50+50*e+5+"px"})).text((function(t){return Math.ceil(2*t)/2})),e.exit().remove()}(),$("#play-button").hasClass("active")||((void 0)(),(void 0)())})).selectAll(".swatch").data((function(t){return t.value})).enter().append("span").attr("class","swatch").style("background-color",(function(t){return t})),$('.palette[title="BuYlBu"]').addClass("selected")}let c={};var h=n(0);let p=!0;function u(t){p="boolean"==typeof t&&t}function f(){u(!1),$("#play-button").removeClass("active"),$("#play-button").prop("disabled",!0),$("#play-icons").hide(),$("#play-loading").show()}function m(){u(!0),$("#play-button").addClass("active"),$("#play-button").prop("disabled",!1),$("#play-loading").hide(),$("#play-icons").show()}function g(){$(".draw-details").click((function(){$(this).find("input:checkbox").prop("checked")?new(void 0)(this,ot).disableLineChart():($(".trendChartData").hide(),$("#trendChartLegend").hide(),$("#lineChartLegend").show(),$(".lineChartButton").prop("checked",!0).prop("disabled",!1),$(".line-chart-check-box").attr("disabled",!1),$(".lineChartLine").attr("visibility","visible"))}))}String.prototype.hashCode=function(){var t,e=0;if(0===this.length)return e;for(t=0;t<this.length;t++)e=(e<<5)-e+this.charCodeAt(t),e|=0;return e},d3.selection.prototype.moveToBack=function(){return this.each((function(){var t=this.parentNode.firstChild;t&&this.parentNode.insertBefore(this,t)}))};let v,x,b,y,k,w,T,C,L,A="black",j=[],_={},S=1;class M{constructor(){this.indexTime=0,this.svgContainer=d3.select("#main-vis"),this.zoom=d3.zoom().scaleExtent([1,6]).on("zoom",()=>{d3.event.transform.x=Math.min(0,this.tankWidth*(d3.event.transform.k-1),Math.max(this.tankWidth*(1-d3.event.transform.k),d3.event.transform.x)),d3.event.transform.y=Math.min(0,this.tankHeight*(d3.event.transform.k-1),Math.max(this.tankHeight*(1-d3.event.transform.k),d3.event.transform.y)),this.zoomGroup.attr("transform",d3.event.transform),gXaxis.call(xAxis.scale(d3.event.transform.rescaleX(y))),gYaxis.call(yAxis.scale(d3.event.transform.rescaleY(k)))}),this.zoomGroup=this.svgContainer.append("svg:g"),this.tank=this.zoomGroup.append("svg:g").attr("class","tank").attr("transform",()=>"scale("+(parameters.inverted_x?-1:1)+","+(parameters.inverted_y?-1:1)+")"),this.activeScale="black",this.medoidAnimal=-1,this.activeAnimals=[],this.arrayAnimals=0,this.id=$(".show-dendrogram.btn-primary").attr("data"),this.playBoolean=!0}setIndexTime(t){"number"==typeof t&&this.indexTime<=ot.length?this.indexTime=t:this.indexTime=0}decindexTime(){this.indexTime=this.indexTime-1}updateLineChart(){if(d3.select("#lineChartTimeLine")&&ot[Math.ceil(this.indexTime/S)]){let t=Math.ceil(this.indexTime/S);this.indexTime%25==0&&(d3.select("#convex_hull_areaLineValue").text(ot[t].convex_hull_area+"mm²"),d3.select("#speedLineValue").text(ot[t].speed+"mm/s"),d3.select("#accelerationLineValue").text(ot[t].acceleration+"mm/s²"),d3.select("#distance_centroidLineValue").text(ot[t].distance_centroid+"mm"),d3.select("#directionLineValue").text(ot[t].direction+"°"),d3.select("#polarisationLineValue").text(ot[t].polarisation)),d3.select("#lineChartTimeLine").attr("transform","translate("+w(t)+",0)")}}draw(){let t=$('input[type="radio"].group-playback-rate:checked').val(),e=$('input[type="radio"].group-size:checked').val();v=at.filter(t=>t.t===this.indexTime),setTimeout(()=>{var t;this.drawDendrogram(),this.svgContainer.select(".frame-text").text(Math.floor(this.indexTime/1500)%60+":"+Math.floor(this.indexTime/parameters.fps)%60+"::"+this.indexTime%parameters.fps),this.indexTime%parameters.fps==0&&(t=this.indexTime,r.slider("value",t));let n,i=this.tank.selectAll("g.animal").data(v);if(this.indexTime in lt){let t=lt[this.indexTime];if(G={},t=t.map((function(t){let e=v.filter((function(e){return e.a===t.s}))[0],n=v.filter((function(e){return e.a===t.e}))[0];return{node1:e.a,node2:n.a,start:e.p,end:n.p,val:t.v}})),t.forEach((function(t){$("#mc-"+t.node1+"-"+t.node2).css("fill",Z(t.val)),$("#mc-"+t.node2+"-"+t.node1).css("fill",Z(t.val))})),X){let e=[];for(let n=0;n<t.length;n++)e.push(t[n].val);q(function(t){if(0===t.length)return 0;t.sort((function(t,e){return t-e}));let e=.05*(t.length-1),n=Math.floor(e),r=n+1,a=e%1;return r>=t.length?1-t[n]:1-(t[n]*(1-a)+t[r]*a)}(e))}t=t.filter((function(t){return t.val<=1-F})),n=this.tank.select("#network-group").selectAll("line.network-edges").data(t),n.attr("x1",(function(t){return t.start[0]})).attr("y1",(function(t){return-t.start[1]})).attr("x2",(function(t){return t.end[0]})).attr("y2",(function(t){return-t.end[1]})).attr("stroke",(function(t){return Z(1-t.val)})).attr("stroke-opacity",(function(t){return 1-t.val})),n.enter().append("line").attr("class","network-edges").attr("x1",(function(t){return t.start[0]})).attr("y1",(function(t){return-t.start[1]})).attr("x2",(function(t){return t.end[0]})).attr("y2",(function(t){return-t.end[1]})).attr("stroke",(function(t){return Z(t.val)})).attr("stroke-opacity",(function(t){return t.val}))}else n=this.tank.selectAll("line.network-edges").data([]);var o,s;n.exit().remove(),$("#draw-triangulation").is(":checked")?((o=this.tank.select("#delaunay-triangulation-group").selectAll("path.delaunay-triangulation").data([ot[this.indexTime].triangulation])).attr("d",t=>t),o.enter().append("path").attr("class","delaunay-triangulation").attr("d",t=>t)):o=this.tank.selectAll("path.delaunay-triangulation").data([]),o.exit().remove(),$("#draw-voronoi").is(":checked")?(console.log(ot[this.indexTime].voronoi),(s=this.tank.select("#vornoi-group").selectAll("path.voronoi").data(ot[this.indexTime].voronoi.split(";"))).attr("d",t=>t),s.enter().append("path").attr("class","voronoi").attr("d",t=>t)):s=this.tank.select("#vornoi-group").selectAll("path.voronoi").data([]),s.exit().remove();let d=i.enter().append("g").attr("class","animal").attr("id",t=>"animal-"+t.a);if(d.append("circle").attr("r",1.5*e).attr("cx",t=>t.p[0]).attr("cy",t=>-t.p[1]).on("mouseover",t=>{!function(t){for(let e=0;e<it.length;e++)t.a===it[e].animal_id&&(a.style("left",d3.event.pageX+5+"px").style("top",d3.event.pageY-100+"px").style("opacity",1),a.select("#tooltip-animal-id").html(it[e].animal_id),a.select("#tooltip-species").html(it[e].species),a.select("#tooltip-sex").html(it[e].sex),a.select("#tooltip-size").html(it[e].size),a.select("#tooltip-weight").html(it[e].weight))}(t)}).on("mouseout",()=>{a.transition().duration(500).style("opacity",0)}).on("click",t=>{this.activeAnimals.includes(t.a)?this.activeAnimals=this.activeAnimals.filter(e=>e!==t.a):this.activeAnimals.push(t.a),$("#play-button").hasClass("active")||(this.indexTime--,this.draw())}),i.select("circle").attr("cx",t=>t.p[0]).attr("cy",t=>-t.p[1]).attr("r",e),d.append("svg:defs").append("svg:marker").attr("id",t=>"arrow-marker-"+t.a).attr("refX",2).attr("refY",6).attr("markerWidth",13).attr("markerHeight",13).attr("orient","auto").append("svg:path").attr("d","M2,2 L2,11 L10,6 L2,2"),d.append("line").attr("class","arrow").attr("marker-end",t=>"url(#arrow-marker-"+t.a+")"),$("#draw-direction").is(":checked")?i.select("line").attr("x1",t=>t.p[0]).attr("y1",t=>-t.p[1]).attr("x2",t=>t.p[0]+2*e).attr("y2",t=>-t.p[1]).attr("transform",t=>"rotate("+-t.direction+" "+t.p[0]+" "+-t.p[1]+")"):$(".arrow").hide(),i.exit().remove(),$("#draw-convex-hull").is(":checked")){var p=this.tank.selectAll("path.hull-path").data([ot[this.indexTime].convex_hull]);p.attr("d",t=>t),p.enter().append("path").attr("class","hull-path").attr("d",t=>t)}else p=this.tank.select("path.hull-path").data([]);if(p.exit().remove(),"black"!==this.activeScale){var u=l();i.transition().duration(10).style("fill",(function(t){return u(t[this.activeScale])})).attr("stroke",(function(t){return u(t[this.activeScale])}))}else i.style("fill","#000").attr("stroke","#000"),$.isEmptyObject(c)||Object.keys(c).forEach((function(t){d3.select("#animal-"+t).style("fill",c[t]).attr("stroke",c[t])}));this.activeAnimals.length?(i.style("opacity",(function(t){return this.activeAnimals.includes(t.a)?1:.25})),$("#remove-active-selected-button").is(":disabled")&&($("#remove-active-selected-button").prop("disabled",!1),$("#visual-parameter-button").prop("disabled",!1)),h.trackingBoolean&&Object(h.addTrackedData)(v[0].t,this.activeAnimals)):($("#remove-active-selected-button").is(":disabled")||($("#remove-active-selected-button").prop("disabled",!0),$("#visual-parameter-button").prop("disabled",!0)),i.style("opacity",1)),d3.select(".centroid").attr("cx",()=>"centroid"in ot[0]?ot[this.indexTime].centroid[0]:0).attr("cy",()=>"centroid"in ot[0]?-ot[this.indexTime].centroid[1]:0),$("#draw-direction").is(":checked")&&ot[this.indexTime].centroid&&$("#draw-centroid").is(":checked")?(d3.select("#centroid-line").classed("hidden",!1),d3.select("#centroid-line").attr("x1",()=>ot[this.indexTime].centroid[0]).attr("y1",()=>-ot[this.indexTime].centroid[1]).attr("x2",()=>ot[this.indexTime].centroid[0]+2*e).attr("y2",()=>-ot[this.indexTime].centroid[1]).attr("transform",()=>"rotate("+-ot[this.indexTime].direction+" "+ot[this.indexTime].centroid[0]+" "+-ot[this.indexTime].centroid[1]+")")):d3.select("#centroid-line").attr("class","hidden"),-1!==this.medoidAnimal&&(d3.selectAll("#animal-"+this.medoidAnimal).classed("medoid",!1),this.medoidAnimal=ot[this.indexTime].medoid,d3.selectAll("#animal-"+this.medoidAnimal).classed("medoid",!0)),this.indexTime++,this.updateLineChart(),this.indexTime>=ot.length?(this.indexTime=0,this.draw()):this.playBoolean&&this.draw()},t)}drawDendrogram(){if(!$.isEmptyObject(void 0)&&this.id){let e=(void 0)["h"+this.id][this.indexTime],n=d3.hierarchy(e,(function(t){return t.children}));if(n=n.children[0],n.children.forEach(collapse),n=treemap(n),console.log(n),$(".show-dendrogram.btn-primary").length){$("#dendrogram-panel-level-slider").slider("option","max",n.height-1).slider("value",hierarchyLevels["h"+this.id]);let e=this.zoomGroup.selectAll("path.link").data(n.descendants().slice(1));e.enter().append("path").attr("class","link").attr("d",diagonalLines),e.attr("d",diagonalLines),e.exit().remove();let r=this.zoomGroup.selectAll(".node").data(n.descendants());var t=r.enter().append("g").attr("class",(function(t){return"node"+(t.children?" node--internal":" node--leaf")})).attr("transform",(function(t){return"translate("+t.x+","+t.y+")"}));t.append("circle").attr("r",t=>t.depth===hierarchyLevels["h"+this.id]?40+t.data.name.length:20+t.data.name.length).attr("class",t=>{if(t.depth===hierarchyLevels["h"+this.id])return"active-level"}).attr("id",t=>"h"+t.data.name.toString().hashCode()).on("click",click).on("mouseover",(function(t){tooltipDiv.style("left",d3.event.pageX+5+"px").style("top",d3.event.pageY+5+"px").style("opacity",1),tooltipDiv.select(".tooltip-span").html(t.data.name.toString()),addHighlightSpatialView(t.data.name)})).on("mouseout",(function(){tooltipDiv.transition().duration(500).style("opacity",0),removeHighlightSpatialView()})),t.append("text").attr("class","dendrogram-text").attr("x",150).attr("y",-150).text(t=>t.data.name.length),t.attr("transform",t=>"translate("+t.x+","+t.y+")"),r.attr("transform",t=>"translate("+t.x+","+t.y+")").select("circle").attr("r",t=>t.depth===hierarchyLevels["h"+this.id]?40+t.data.name.length:20+t.data.name.length).attr("class",t=>t.depth===hierarchyLevels["h"+this.id]?"active-level":"").attr("id",t=>"h"+t.data.name.toString().hashCode()),r.select("text").text(t=>t.data.name.length),r.exit().remove(),Object.keys(hierarchyGroupStdev).length?("none"==$("#dendrogram-legend").css("display")&&$("#dendrogram-legend").show(),setTimeout(()=>{r.select("circle").style("fill",(function(t){return"h"+t.data.name.toString().hashCode()in hierarchyGroupStdev?standardDeviationColorScale(standardDeviation(hierarchyGroupStdev["h"+t.data.name.toString().hashCode()])):t.depth!==hierarchyLevels["h"+this.id]?"":"#000"}))},250)):"none"!==$("#dendrogram-legend").css("display")&&$("#dendrogram-legend").hide()}}$.isEmptyObject(void 0)||function(){let t=Object.keys(dt).map((function(t){return t.replace("h","")})),e=[];for(let n=0;n<t.length;n++){let r=dt["h"+t[n]][void 0],a=d3.hierarchy(r,(function(t){return t.children}));a=T(a);let i=a.children[0];Y===t[n]&&(I=H(i,t[n])),e.push(N(H(i,t[n])))}e.length;let n=C.selectAll("g.hierarchy-group").data(e);n.enter().append("g").attr("class",(function(e,n){return"intersection"===W?"hierarchy-group intersection":"sym-difference"===W?"hierarchy-group sym-difference":"hierarchy-group h"+t[n]})).style("fill",(function(e,n){return U["h"+t[n]]})).attr("stroke",(function(e,n){return U["h"+t[n]]})).moveToBack(),n.attr("class",(function(e,n){return"intersection"===W?"hierarchy-group intersection":"sym-difference"===W?"hierarchy-group sym-difference":"hierarchy-group h"+t[n]})),n.exit().remove();let r=n.selectAll("path.hierarchy-hull-path").data((function(t){return t}));r.enter().append("path").attr("class","hierarchy-hull-path").attr("d",(function(t){return"M"+t.join("L")+"Z"})),r.attr("d",(function(t){return"M"+t.join("L")+"Z"})),r.exit().remove()}()}cp_listener(){$("#play-button").click(()=>{!0===$("#play-button").hasClass("active")?(this.playBoolean=!1,$(".mdi-pause").hide(),$(".mdi-play").show()):(this.playBoolean=!0,$(".mdi-play").hide(),$(".mdi-pause").show(),this.setIndexTime(r.slider("value")),$(".brush").remove(),this.draw())}),$("#next-frame-button").click(()=>{!0===$("#play-button").hasClass("active")&&(this.playBoolean=!1),$("#play-button").removeClass("active"),this.draw()}),$("#brushing-button").click(()=>{this.playBoolean=!1,$("#play-button").removeClass("active"),$("#brushing-button").hasClass("active")?$(".brush").remove():(x=d3.brush().extent([[0,0],[this.tankWidth,this.tankHeight]]).on("end",i),d3.select("#main-vis-svg").append("g").attr("class","brush").call(x))}),$("#remove-active-selected-button").click(()=>{$("#remove-active-selected-button").is(":disabled")||($("#remove-active-selected-button").prop("disabled",!0),D([]),resetTrackedData(),$("#visual-parameter-button").prop("disabled",!0).removeClass("active"),$("#play-button").hasClass("active")||(this.decIndexTime(),this.draw()))}),$("#visual-parameter-button").click(()=>{!0===$("#visual-parameter-button").hasClass("active")?setTrackingBoolean(!1):setTrackingBoolean(!0)}),$("#calculate-parameter-button").click(()=>{$("#calculate-parameter-button").hasClass("active")||(setTrackingBoolean(!1),sendTrackedData(),$("#calculate-parameter-button").prop("disabled",!0),$("#calculate-parameter-button").removeClass("active"),$("#visual-parameter-button").removeClass("active"))}),$("#background-color").change(()=>{let t=$('input[type="radio"].group-background:checked').val();$("#main-vis-svg").css("background-color",t)}),$("#draw-axis").on("change",()=>{this.checked?($("#main-vis g.x.axis").show(),$("#main-vis g.y.axis").show()):($("#main-vis g.x.axis").hide(),$("#main-vis g.y.axis").hide())}),$("#draw-time").on("change",()=>{this.checked?$("#main-vis .frame-text").show():$("#main-vis .frame-text").hide()}),$("#network-background").on("change",()=>{this.checked?setNetworkBackground(!0):setNetworkBackground(!1)}),$("#network-background-limit").val(1),$("#network-background-limit").on("change",()=>{let t=$(this).val();$.isNumeric(t)&&t>0?setNetworkBackgroundLimit(t):$(this).val(1)}),$("#color-scale-radio-form input").on("change",()=>{colorScale.type=$("input[name=color-scale-radio]:checked","#color-scale-radio-form").val(),$("#play-button").hasClass("active")||(this.decIndexTime(),this.draw())})}sf_listeners(){$("#draw-direction").click(()=>{$("#draw-direction").is(":checked")?("direction"in at[0]||(f(),nt("direction")),$(".arrow").show()):$(".arrow").hide(),$("#play-button").hasClass("active")}),$("#draw-medoid").click(()=>{$("#draw-medoid").is(":checked")?("medoid"in ot[0]||rt("medoid"),this.setMedoidAnimal(ot[this.indexTime].medoid),d3.selectAll("#animal-"+this.medoidAnimal).classed("medoid",!0)):(d3.selectAll("#animal-"+this.medoidAnimal).classed("medoid",!1),this.setMedoidAnimal(-1))}),$("#draw-centroid").click(()=>{$("#draw-centroid").is(":checked")?("centroid"in ot[0]||rt("centroid"),$("#g-centroid").show()):$("#g-centroid").hide()}),$("#draw-convex-hull").click(()=>{$("#draw-convex-hull").is(":checked")&&("hull"in ot[0]||rt("convex_hull"))}),$("#draw-triangulation").click(()=>{$("#draw-triangulation").is(":checked")&&("triangulation"in ot[0]||rt("triangulation"),$("#play-button").hasClass("active")||(this.decIndexTime(),this.draw()))}),$("#draw-voronoi").click(()=>{$("#draw-voronoi").is(":checked")&&("voronoi"in ot[0]||rt("voronoi"),$("#play-button").hasClass("active")||(this.decIndexTime(),this.draw()))})}}class O extends M{constructor(t){super(t),this.spatialViewInit()}spatialViewInit(){let t=parameters.min.geometry.coordinates,e=parameters.max.geometry.coordinates;this.tankWidth=1.02*(e[0]-t[0]),this.tankHeight=1.02*(e[1]-t[1]);let n=d3.scaleLinear().domain([t[0],e[0]]).range([t[0],e[0]]),i=d3.axisBottom(n).ticks(10).tickSize(10).tickPadding(5),s=d3.scaleLinear().domain([t[1],e[1]]).range([t[1],e[1]]),l=d3.axisRight(s).ticks(7).tickSize(10).tickPadding(5),c=d3.zoom().scaleExtent([1,6]).on("zoom",()=>{d3.event.transform.x=Math.min(0,this.tankWidth*(d3.event.transform.k-1),Math.max(this.tankWidth*(1-d3.event.transform.k),d3.event.transform.x)),d3.event.transform.y=Math.min(0,this.tankHeight*(d3.event.transform.k-1),Math.max(this.tankHeight*(1-d3.event.transform.k),d3.event.transform.y)),this.zoomGroup.attr("transform",d3.event.transform),p.call(i.scale(d3.event.transform.rescaleX(n))),u.call(l.scale(d3.event.transform.rescaleY(s)))});this.svgContainer=d3.select("#main-vis").classed("svg-container",!0).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 "+this.tankWidth+" "+this.tankHeight).classed("svg-content",!0).attr("id","main-vis-svg").call(c);let h=Math.ceil(this.tankHeight/this.tankWidth*100);$("#main-vis").append($("<style>#main-vis::after {padding-top: "+h+'%;display: block;content: "";}</style> ')),this.zoomGroup=this.svgContainer.append("svg:g"),parameters.background_image&&this.zoomGroup.append("image").attr("xlink:href","/"+parameters.background_image).attr("class","background-image").attr("height",this.tankHeight).attr("width",this.tankWidth).attr("x","0").attr("y","0"),this.tank=this.zoomGroup.append("svg:g").attr("class","tank").attr("transform",()=>"scale("+(parameters.inverted_x?-1:1)+","+(parameters.inverted_y?-1:1)+")"),this.tank.append("g").attr("id","g-centroid").append("circle").attr("class","centroid").attr("r",6).attr("cx",0).attr("cy",0),this.tank.select("#g-centroid").append("svg:defs").append("svg:marker").attr("id","centroid-arrow").attr("refX",2).attr("refY",6).attr("markerWidth",13).attr("markerHeight",13).attr("orient","auto").append("svg:path").attr("d","M2,2 L2,11 L10,6 L2,2"),this.tank.select("#g-centroid").append("line").attr("id","centroid-line").attr("marker-end","url(#centroid-arrow)"),this.tank.append("g").attr("id","network-group"),this.tank.append("g").attr("id","delaunay-triangulation-group"),this.tank.append("g").attr("id","vornoi-group"),this.svgContainer.append("text").attr("class","frame-text").attr("x",30).attr("y",30).text("-- : -- : -- ");let p=this.svgContainer.append("g").attr("class","x axis").call(i),u=this.svgContainer.append("g").attr("class","y axis").call(l);a=d3.select("div.tooltip").style("left","0px").style("top","0px").on("mouseover",(function(){a.style("opacity",1)})),function(){r=$("#slider").slider({min:0,max:ot.length,step:25,slide:function(t,e){(void 0)(e.value),$("#play-button").hasClass("active")||(void 0)()}}),$("#network-slider").slider({range:"max",min:0,max:1,step:.01,value:.5,slide:function(t,e){q(e.value),$("#network-limit").val(e.value)}}),$("#network-limit").val(.5);let t=r.slider("option","max"),e=100/t;for(let n=0;n<t;n+=1500)$('<span class="ui-slider-tick"></span>').css("left",e*n+"%").appendTo(r)}(),o=d3.select("#main-vis-legend-div").append("svg").attr("id","main-vis-legend").attr("width",550).attr("height",60),d();var f,m;new z(ot);this.cp_listener(),this.sf_listeners(),f=this.tankHeight,m=this.tankWidth,$((function(){$("#main-vis").draggable({containment:"parent"}).resizable({aspectRatio:!0,maxWidth:$("#main-vis-div").width()}).height(.6*f).width(.6*m)})),$("input[type=checkbox]").prop("checked",!1),$("#color-scale-linear").prop("checked",!0),$("#group-size-m").prop("checked",!0),$("#background-white").prop("checked",!0),$("#settings-div input[type=checkbox]").prop("checked",!0),$("#loading").hide(),$("#play-loading").hide(),$(".mdi-play").hide(),$("#metadata-input").hide(),$("#dendrogram-buttons-div").hide(),$("#g-centroid").hide(),$("#line-chart-feature-checkboxes input[type=checkbox]").prop("checked",!0),this.draw()}setMedoidAnimal(t){this.medoidAnimal=t}}class E extends M{constructor(t){super(),this.swarmData=t,this.swarm_features=Object.keys(this.swarmData[0]),this.lineChartWidth=5e3,this.trendChartsElem=["lower-outer-area","lower-inner-area","median-line","upper-inner-area","upper-outer-area"]}}class z extends E{constructor(t){super(t),this.lineChart()}lineChart(){S=Math.ceil(this.swarmData.length/this.lineChartWidth);let t=100,e=10,n=this.swarm_features,r=n.indexOf("time");n.splice(r,1);let a=[];if(this.swarmData.length>this.lineChartWidth){let t=new Array(n.length).fill(0);for(let e=0;e<this.swarmData.length;e++){for(let r=0;r<n.length;r++)t[r]+=this.swarmData[e][n[r]];if(e%S==0){let r={time:e/S};for(let e=0;e<n.length;e++)t[e]=t[e]/S,r[n[e]]=t[e];a.push(r),t=new Array(n.length).fill(0)}}}else a=this.swarmData;w=d3.scaleLinear().domain([0,a.length]).range([0,this.lineChartWidth]),y=d3.scaleLinear().domain([0,a.length]).range([0,this.lineChartWidth]);let i=d3.scaleLinear().domain([0,a.length]).range([0,this.lineChartWidth]),o=d3.axisBottom(y).ticks(10).tickSize(10).tickPadding(5).tickFormat((function(t){return Math.floor(t*S/1500)%60+":"+Math.floor(t*S/parameters.fps)%60+"::"+t*S%parameters.fps}));k=d3.scaleLinear().domain([0,100]).range([500,0]);let s=d3.axisLeft(k).ticks(0).tickSize(10).tickPadding(5),l=function(){let t=d3.mouse(this);if(t[0]<e||t[0]>this.lineChartWidth||t[1]<0||t[1]>500)return;let n=d3.scaleLinear().domain(w.range()).range(w.domain());this.setIndexTime(Math.floor(n(t[0]-e)*S))},d=d3.zoom().scaleExtent([1,20]).translateExtent([[0,0],[this.lineChartWidth,500]]).extent([[0,0],[this.lineChartWidth,500]]).on("zoom",(function(){let t=d3.event.transform;w=y.domain(t.rescaleX(i).domain());for(let t in u)u.hasOwnProperty(t)&&b.select("#"+t+"Line").attr("d",u[t]);for(let t in _)if(_.hasOwnProperty(t))for(let e=0;e<this.trendChartsElem.length;e++)b.select("#"+t+"TrendChart ."+this.trendChartsElem[e]).attr("d",_[t][this.trendChartsElem[e]]);h.call(o)})),c=d3.select("#swarm-vis").classed("svg-line-chart-container",!0).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 "+this.lineChartWidth+" "+(500+t)).classed("svg-content",!0);b=c.append("svg:g").attr("id","lineChartZoom").attr("transform","translate("+e+",0)");let h=b.append("g").attr("class","x axis-line-chart").attr("transform","translate(0,500)").call(o);b.append("g").attr("class","y axis-line-chart").call(s),b.append("line").attr("class","time-line").attr("id","lineChartTimeLine").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",500);let p=d3.scaleOrdinal(d3.schemeCategory10),u={};for(let t=0;t<n.length;t++){let e=d3.min(a,(function(e){return e[n[t]]})),r=d3.max(a,(function(e){return e[n[t]]})),i=d3.scaleLinear().domain([e,r]).range([0,100]),o=d3.line().x((function(t){return y(t.time)})).y((function(e){return k(i(e[n[t]]))}));u[n[t]]=o,b.append("path").data([a]).attr("id",n[t]+"Line").attr("class","line lineChartLine").style("stroke",p(t)).attr("d",o).attr("name",n[t])}$("#lineChartTimeLine").appendTo("#lineChartZoom"),b.append("rect").attr("class","zoom").attr("width",this.lineChartWidth).attr("height",500).call(d).on("click",l).call(d3.drag().on("drag",l));let f=d3.selectAll(".line");c.append("g").attr("id","lineChartLegend").attr("transform","translate("+t+",550)").selectAll("rect.legend").data(f._groups[0]).enter().each((function(t,e){d3.select(this).append("rect").attr("class","legend").attr("width",100).attr("height",50).attr("x",600*e+"px").style("fill",t.style.stroke),d3.select(this).append("text").attr("id",t.attributes.id.value+"LegendTitle").attr("class","line-chart-legend-text").attr("y",40).attr("x",600*e+100+10+"px").text(t.attributes.name.value+": "),d3.select(this).append("text").attr("id",t.attributes.id.value+"Value").attr("class","line-chart-legend-text").attr("y",40).attr("x",600*e+100+d3.select("#"+t.attributes.id.value+"LegendTitle").node().getComputedTextLength()+10+"px").text("0.0")})),c.append("g").attr("id","trendChartLegend").attr("transform","translate("+t+",550)").selectAll("rect.legend").data(["5% - 95%","25% - 75%","Median"]).enter().each((function(t,e){d3.select(this).append("rect").attr("class","legend").attr("width",100).attr("height",50).attr("x",800*e+"px").style("fill",(function(){return 0===e?"#74a9cf":1===e?"#045a8d":"#525252"})),d3.select(this).append("text").attr("class","line-chart-legend-text").attr("y",40).attr("x",800*e+100+10+"px").text(t)})),$("#trendChartLegend").hide(),this.initLineChartButtons()}initLineChartButtons(){for(let t=0;t<this.swarm_features.length;t++){let e=this.swarm_features[t].split("_").join(" ");e=e.charAt(0).toUpperCase()+e.slice(1),$("#line-chart-feature-checkboxes").append('<tr><th> <div class="pretty p-switch p-fill p-bigger"><input type="checkbox" class="line-chart-check-box" id="draw-'+this.swarm_features[t]+'" data="#'+this.swarm_features[t]+'Line" /><div class="state"><label>'+e+"</label></div></div></th></tr>")}$(".line-chart-check-box").change((function(){let t=$(this);t.prop("checked")?$(t.attr("data")).show():$(t.attr("data")).hide()}))}}function D(t){j=t}let B={},W="union";d3.scaleThreshold().domain([0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]).range(["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"]);let I=[],U={},G={},R=["#7fc97f","#386cb0","#e7298a","#ff9900"];function H(t,e){let n=[],r=B["h"+e],a=t.children;for(let e=1;e<t.height;e++){if(a[0]&&a[0].depth===r){a.forEach((function(t){void 0!==t.data.name&&n.push(t.data.name)}));break}let t=[];a.forEach((function(e){void 0!==e.children&&(t=t.concat(e.children))})),a=t}return n}function N(t){let e=[];return t.forEach((function(t){let n=[];for(let e=0;e<t.length;e++){let r=v.find(n=>n.a===t[e]);r&&n.push([r.p[0],-r.p[1]])}n.length>=3&&e.push(d3.polygonHull(n))})),e}function P(t,e){B["h"+t]=e}function V(){let t,e;0!==Object.keys(U).length||0!==Object.keys(J).length?$("#hierarchy-legend-div").show():$("#hierarchy-legend-div").hide();let n=[],r=[];if($(".show-dendrogram").each((function(t,e){null!=U["h"+$(e).attr("data")]&&null!=$(e).attr("name")&&(n.push(U["h"+$(e).attr("data")]),r.push($(e).attr("name")))})),0!==Object.keys(J).length)for(let t in J)-1===n.indexOf(J[t])&&(n.push(J[t]),r.push("Network"));t=L.selectAll("rect.legend").data(n),e=L.selectAll("text.legend-text").data(r),t.style("fill",(function(t){return t})),t.enter().append("rect").attr("class","legend").attr("width",50).attr("height",20).attr("y",0).attr("x",(function(t,e){return 50+2.5*e*50+"px"})).style("fill",(function(t){return t})),t.exit().remove(),e.text((function(t){return t})),e.enter().append("text").attr("class","legend-text").attr("y",40).attr("x",(function(t,e){return 50+2.5*e*50+"px"})).text((function(t){return t})),e.exit().remove()}let Y,X=!1,F=.5,J={},Z=d3.scaleThreshold().domain([0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]).range(["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"]);function q(t){F=t}let K="application/vnd.api+json";var Q;function tt(){let t=[];$.ajax({url:"/api/percentile/"+parameters.id,dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:K},success:function(e){for(let n=0;n<e.length;n++)t[e[n].feature]=[e[n].min,e[n].p1,e[n].p2,e[n].p3,e[n].p5,e[n].p7,e[n].p8,e[n].p9,e[n].max];pt(t),function(t){for(var e in t)if(t.hasOwnProperty(e)){let t=e.split("_").join(" ");t=t.charAt(0).toUpperCase()+t.slice(1),$("#absolute-feature-checkboxes").append('<tr><th> <div class="pretty p-switch p-fill p-bigger"><input type="checkbox" id="draw-'+e+'"/><div class="state"><label>'+t+'</label></div></div><div class="float-right draw-details" id="draw-'+e+'-details"><div class="pretty p-icon p-toggle p-plain"><input type="checkbox" id="draw-'+e+'-input" /><div class="state p-success-o p-on"><i class="mdi mdi-image-area"></i><label></label></div><div class="state p-off"><i class="mdi mdi-image-off"></i><label></label></div></div></div></th></tr>')}$(".draw-details").hide(),g()}(t)}})}function et(){$.ajax({url:"/api/dataset/networks/"+parameters.id,dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:K},success:function(t){!function(t){if(t.length)for(let e=0;e<t.length;e++)t[e].finished&&$("#networks-hierarchies-table tbody").append("<tr><td>"+t[e].name+'</td> <td> <button type="button" class="btn btn-default" data='+t[e].network_id+" name="+t[e].name+'><span class="mdi mdi-graphql" aria-hidden="true"></span></button></td> <td><div class="pretty p-switch p-fill"><input type="checkbox" class="hiearchy-checkbox" data="'+t[e].network_id+'" name="'+t[e].name+'"><div class="state p-success"><label></label></div></div></td><td>---</td>');else $("#networks-hierarchies-table").append("There is no network data for this dataset")}(t)}})}function nt(t){$.ajax({url:"/api/dataset/"+parameters.id+"/"+t,dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:K},success:function(e){mt(e,t),m()}})}function rt(t){f(),$.ajax({url:"/api/dataset/"+parameters.id+"/"+t,dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:K},success:function(e){ft(e,t),m()}})}n(1);let at=[],it=[],ot=[],st={},lt={},dt={},ct={};function ht(t){at=at.concat(t)}function pt(t){st=t}function ut(t){it=t,function(){let t=["#fff","#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628"];if(it.length)for(let e=0;e<it.length;e++)$("#metadata-table").find("tbody").append($('<tr id="metadata-row-'+it[e].animal_id+'">').append($("<td>").append(it[e].animal_id)).append($("<td>").append(it[e].species)).append($("<td>").append(it[e].sex)).append($("<td>").append(it[e].size)).append($("<td>").append(it[e].weight)).append($("<td>").append('<div class="dropdown">\n                                              <a class="dropdown-toggle btn btn-default btn-color" data-toggle="dropdown" href="#">\n                                              <div id="preview" class="metadata-swatch" style="background-color:#fff"></div>\n                                              <input class="color-field" value="White" style="display:none;">\n                                              </a>\n                                              <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel"> '+function(e){let n="";for(let r=0;r<t.length;r++)n+='<div class="metadata-swatch metadata-swatch-clickable" style="background-color:'+t[r]+'" value="'+e+'"></div>';return n}(it[e].animal_id)+"</ul></div>")));else $("#metadata-table").find("tbody").append("There is no metadata for this dataset")}()}function ft(t,e){for(let n=0;n<t.length;n++)void 0===ot[n]&&ot.push({}),t[n]&&!isNaN(t[n])?ot[n][e]=+t[n]:ot[n][e]=t[n]}function mt(t,e){for(let n=0;n<t.length;n++)void 0===at[n]&&at.push({}),at[n][e]=+t[n]}function gt(t){lt=t}function vt(t,e){0===Object.keys(t).length&&t.constructor===Object?(delete dt["h"+e],delete B["h"+e],function(t){delete U["h"+t]}(e)):(dt["h"+e]=t,P(e,2),function(t){for(let e in J)if(e==="h"+t)return void(U["h"+t]=J[e]);for(let e=0;e<R.length;e++){let n=!0;for(let t in U)U.hasOwnProperty(t)&&U[t]===R[e]&&(n=!1);if(n){if(0===Object.keys(J).length)return void(U["h"+t]=R[e]);for(let n in J)if(J[n]!==R[e])return void(U["h"+t]=R[e])}}}(e)),V()}function xt(t){ct=t}$(document).ready((function(){window.EventSource?((Q=new EventSource("/api/movement_only/"+parameters.id)).onmessage=function(t){"close"===t.data?(Q.close(),window.setTimeout((function t(){$.active>0?window.setTimeout(t,100):new O}),100)):ht(JSON.parse(t.data))},Q.addEventListener("error",(function(t){t.readyState==EventSource.CLOSED&&alert("Streaming error")}),!1)):alert("Webbrowser does not support streaming"),tt(),$.ajax({url:"/api/dataset/"+parameters.id+"/animal_ids",dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:K},success:function(t){xt(t)}}),function(){const t=["swarm_time","swarm_speed","swarm_acceleration","swarm_convex_hull_area","swarm_distance_centroid","swarm_direction","swarm_polarisation"];for(let e=0;e<t.length;e++)$.ajax({url:"/api/dataset/"+parameters.id+"/"+t[e],dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:K},success:function(n){ft(n,t[e].replace("swarm_",""))}})}(),$.ajax({url:"/api/metadata/"+parameters.id,dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:K},success:function(t){ut(t)}}),et()}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vZXhwbG9yZS9leHBsb3JlLmNzcz9lNzJlIiwid2VicGFjazovLy8uL2V4cGxvcmUvZXhwbG9yZS5jc3MiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9saWIvdXJscy5qcyIsIndlYnBhY2s6Ly8vLi9leHBsb3JlL3NwYXRpYWxfdmlldy9pbnRlcmFjdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9leHBsb3JlL3NwYXRpYWxfdmlldy9jb2xvcl9waWNrZXIuanMiLCJ3ZWJwYWNrOi8vLy4vZXhwbG9yZS9zcGF0aWFsX3ZpZXcvbGVnZW5kLmpzIiwid2VicGFjazovLy8uL2V4cGxvcmUvbWV0YWRhdGEuanMiLCJ3ZWJwYWNrOi8vLy4vZXhwbG9yZS9saXN0ZW5lci5qcyIsIndlYnBhY2s6Ly8vLi9leHBsb3JlL2hlbHBlcnMuanMiLCJ3ZWJwYWNrOi8vLy4vZXhwbG9yZS9zcGF0aWFsX3ZpZXcvc3BhdGlhbF92aWV3LmpzIiwid2VicGFjazovLy8uL2V4cGxvcmUvaGllcmFyY2h5LmpzIiwid2VicGFjazovLy8uL2V4cGxvcmUvbmV0d29yay5qcyIsIndlYnBhY2s6Ly8vLi9leHBsb3JlL2FqYXhfcXVlcmllcy5qcyIsIndlYnBhY2s6Ly8vLi9leHBsb3JlL2V4cGxvcmUuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJjb250ZW50Iiwib3B0aW9ucyIsInRyYW5zZm9ybSIsInVuZGVmaW5lZCIsImxvY2FscyIsIl9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyIsInB1c2giLCJ1c2VTb3VyY2VNYXAiLCJsaXN0IiwidG9TdHJpbmciLCJ0aGlzIiwibWFwIiwiaXRlbSIsImNzc01hcHBpbmciLCJidG9hIiwic291cmNlTWFwcGluZyIsInNvdXJjZU1hcCIsImJhc2U2NCIsInVuZXNjYXBlIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiSlNPTiIsInN0cmluZ2lmeSIsImRhdGEiLCJjb25jYXQiLCJzb3VyY2VVUkxzIiwic291cmNlcyIsInNvdXJjZSIsInNvdXJjZVJvb3QiLCJqb2luIiwiY3NzV2l0aE1hcHBpbmdUb1N0cmluZyIsIm1lZGlhUXVlcnkiLCJkZWR1cGUiLCJhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzIiwibGVuZ3RoIiwiaWQiLCJfaSIsImZuIiwibWVtbyIsInN0eWxlc0luRG9tIiwiaXNPbGRJRSIsIndpbmRvdyIsImRvY3VtZW50IiwiYWxsIiwiYXRvYiIsImFwcGx5IiwiYXJndW1lbnRzIiwiZ2V0VGFyZ2V0IiwidGFyZ2V0IiwicXVlcnlTZWxlY3RvciIsImdldEVsZW1lbnQiLCJzdHlsZVRhcmdldCIsIkhUTUxJRnJhbWVFbGVtZW50IiwiY29udGVudERvY3VtZW50IiwiaGVhZCIsImUiLCJzaW5nbGV0b24iLCJzaW5nbGV0b25Db3VudGVyIiwic3R5bGVzSW5zZXJ0ZWRBdFRvcCIsImZpeFVybHMiLCJhZGRTdHlsZXNUb0RvbSIsInN0eWxlcyIsImRvbVN0eWxlIiwicmVmcyIsImoiLCJwYXJ0cyIsImFkZFN0eWxlIiwibGlzdFRvU3R5bGVzIiwibmV3U3R5bGVzIiwiYmFzZSIsInBhcnQiLCJjc3MiLCJtZWRpYSIsImluc2VydFN0eWxlRWxlbWVudCIsInN0eWxlIiwiaW5zZXJ0SW50byIsIkVycm9yIiwibGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AiLCJpbnNlcnRBdCIsIm5leHRTaWJsaW5nIiwiaW5zZXJ0QmVmb3JlIiwiYXBwZW5kQ2hpbGQiLCJmaXJzdENoaWxkIiwiYmVmb3JlIiwicmVtb3ZlU3R5bGVFbGVtZW50IiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwiaWR4IiwiaW5kZXhPZiIsInNwbGljZSIsImNyZWF0ZVN0eWxlRWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJhdHRycyIsInR5cGUiLCJhZGRBdHRycyIsImVsIiwia2V5cyIsImZvckVhY2giLCJzZXRBdHRyaWJ1dGUiLCJvYmoiLCJ1cGRhdGUiLCJyZW1vdmUiLCJyZXN1bHQiLCJzdHlsZUluZGV4IiwiYXBwbHlUb1NpbmdsZXRvblRhZyIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsInJldm9rZU9iamVjdFVSTCIsIkJsb2IiLCJsaW5rIiwicmVsIiwiY3JlYXRlTGlua0VsZW1lbnQiLCJ1cGRhdGVMaW5rIiwiaHJlZiIsImFwcGx5VG9UYWciLCJuZXdPYmoiLCJERUJVRyIsIm5ld0xpc3QiLCJtYXlSZW1vdmUiLCJ0ZXh0U3RvcmUiLCJyZXBsYWNlVGV4dCIsImluZGV4IiwicmVwbGFjZW1lbnQiLCJmaWx0ZXIiLCJCb29sZWFuIiwic3R5bGVTaGVldCIsImNzc1RleHQiLCJjc3NOb2RlIiwiY3JlYXRlVGV4dE5vZGUiLCJjaGlsZE5vZGVzIiwiYXV0b0ZpeFVybHMiLCJjb252ZXJ0VG9BYnNvbHV0ZVVybHMiLCJibG9iIiwib2xkU3JjIiwibG9jYXRpb24iLCJiYXNlVXJsIiwicHJvdG9jb2wiLCJob3N0IiwiY3VycmVudERpciIsInBhdGhuYW1lIiwicmVwbGFjZSIsImZ1bGxNYXRjaCIsIm9yaWdVcmwiLCJuZXdVcmwiLCJ1bnF1b3RlZE9yaWdVcmwiLCJ0cmltIiwiJDEiLCJ0ZXN0Iiwic2xpZGVyIiwidG9vbHRpcCIsImJydXNoZW5kIiwiYXJyYXlBbmltYWxzIiwiYWN0aXZlQW5pbWFscyIsInJlY3QiLCJkMyIsImV2ZW50Iiwic2VsZWN0aW9uIiwicG9pbnQiLCIkIiwiaGFzQ2xhc3MiLCJyZW1vdmVDbGFzcyIsInN2Z0xlZ2VuZCIsImNvbG9yIiwiY29sb3JicmV3ZXIiLCJCdVlsQnUiLCJyZXR1cm5Db2xvclNjYWxlIiwic2NhbGVMaW5lYXIiLCJkb21haW4iLCJyYW5nZSIsInNjYWxlVGhyZXNob2xkIiwiaW5pdENvbG9yUGlja2VyIiwic2VsZWN0Iiwic2VsZWN0QWxsIiwiZW50cmllcyIsImVudGVyIiwiYXBwZW5kIiwiYXR0ciIsIm9uIiwiYWRkQ2xhc3MiLCJsZWdlbmQiLCJsZWdlbmRUZXh0Iiwic2hvdyIsImFjdGl2ZVNjYWxlIiwidG1wU2NhbGUiLCJoaWRlIiwiZXhpdCIsInRleHQiLCJNYXRoIiwiY2VpbCIsIm1ldGFkYXRhQ29sb3IiLCJwbGF5Qm9vbGVhbiIsInNldFBsYXlCb29sZWFuIiwiZGlzYWJsZVBsYXlCdXR0b24iLCJwcm9wIiwiZW5hYmxlUGxheUJ1dHRvbiIsImluaXRUcmVuZENoYXJ0TGlzdGVuZXIiLCJjbGljayIsImZpbmQiLCJzd2FybURhdGEiLCJkaXNhYmxlTGluZUNoYXJ0IiwiU3RyaW5nIiwiaGFzaENvZGUiLCJoYXNoIiwiY2hhckNvZGVBdCIsIm1vdmVUb0JhY2siLCJlYWNoIiwic3BhdGlhbFZpZXciLCJpbmRleFRpbWUiLCJzdmdDb250YWluZXIiLCJ6b29tIiwic2NhbGVFeHRlbnQiLCJ4IiwibWluIiwidGFua1dpZHRoIiwiayIsIm1heCIsInkiLCJ0YW5rSGVpZ2h0Iiwiem9vbUdyb3VwIiwiZ1hheGlzIiwieEF4aXMiLCJzY2FsZSIsInJlc2NhbGVYIiwiZ1lheGlzIiwieUF4aXMiLCJyZXNjYWxlWSIsInRhbmsiLCJwYXJhbWV0ZXJzIiwiaW52ZXJ0ZWRfeCIsImludmVydGVkX3kiLCJtZWRvaWRBbmltYWwiLCJ0bXAiLCJ0aW1lVG9XYWl0IiwidmFsIiwiYW5pbWFsU2NhbGUiLCJkYXRhc2V0Iiwic2V0VGltZW91dCIsImRyYXdEZW5kcm9ncmFtIiwiZmxvb3IiLCJuZXR3b3JrVmlzIiwic3ZnQW5pbWFscyIsIm5ldHdvcmtEYXRhIiwibmV0d29yayIsImFuaW1hbDEiLCJhbmltYWwyIiwibmV0d29ya0NvbG9yU2NhbGUiLCJuZXR3b3JrQXV0byIsInRtcEFycmF5Iiwic2V0TmV0d29yTGltaXQiLCJhcnIiLCJzb3J0IiwiYSIsImIiLCJsb3dlciIsInVwcGVyIiwid2VpZ2h0IiwicGVyY2VudGlsZXMiLCJuZXR3b3JrTGltaXQiLCJ0cmlhbmd1bGF0aW9uIiwidm9yb25vaSIsImlzIiwiY29uc29sZSIsImxvZyIsInNwbGl0IiwiYW5pbWFsR3JvdXBpbmdzIiwiZGF0YXNldE1ldGFkYXRhIiwicGFnZVgiLCJwYWdlWSIsImh0bWwiLCJ0b29sdGlwRnVuY3Rpb24iLCJ0cmFuc2l0aW9uIiwiZHVyYXRpb24iLCJpbmNsdWRlcyIsImRyYXciLCJodWxsUGF0aCIsImlzRW1wdHlPYmplY3QiLCJjZW50cm9pZCIsImNsYXNzZWQiLCJ1cGRhdGVMaW5lQ2hhcnQiLCJ0cmVlRGF0YSIsIm5vZGVzIiwiaGllcmFyY2h5IiwiY2hpbGRyZW4iLCJjb2xsYXBzZSIsInRyZWVtYXAiLCJoaWVyYXJjaHlMZXZlbHMiLCJkZXNjZW5kYW50cyIsInNsaWNlIiwiZGlhZ29uYWxMaW5lcyIsIm5vZGUiLCJub2RlRW50ZXIiLCJ0b29sdGlwRGl2IiwiYWRkSGlnaGxpZ2h0U3BhdGlhbFZpZXciLCJyZW1vdmVIaWdobGlnaHRTcGF0aWFsVmlldyIsImhpZXJhcmNoeUdyb3VwU3RkZXYiLCJzdGFuZGFyZERldmlhdGlvbkNvbG9yU2NhbGUiLCJzdGFuZGFyZERldmlhdGlvbiIsImhpZXJhcmNoeUlkcyIsIm5ldHdvcmtIaWVyYXJjaHkiLCJoaWVyYXJjaHlWZXJ0aWNlcyIsInJvb3QiLCJzaG93TmV0d29ya0hpZXJhcmNoeSIsIm5ldHdvcmtIaWVyYXJjaHlJZHMiLCJnZXRIaWVyYXJjaHlMZXZlbCIsImdldEhpZXJhcmNoeVZlcnRpY2VzIiwiaGllcmFyY2hpZXMiLCJzZXRPcGVyYXRpb24iLCJoaWVyYXJjaHlDb2xvcnMiLCJoaWVyYXJ5SHVsbHMiLCJkcmF3SGllcmFyY2h5Iiwic2V0SW5kZXhUaW1lIiwiYnJ1c2giLCJleHRlbnQiLCJzZXRBY3RpdmVBbmltYWxzIiwicmVzZXRUcmFja2VkRGF0YSIsImRlY0luZGV4VGltZSIsInNldFRyYWNraW5nQm9vbGVhbiIsInNlbmRUcmFja2VkRGF0YSIsImNoYW5nZSIsImNoZWNrZWQiLCJzZXROZXR3b3JrQmFja2dyb3VuZCIsImlzTnVtZXJpYyIsInNldE5ldHdvcmtCYWNrZ3JvdW5kTGltaXQiLCJjb2xvclNjYWxlIiwiZ2V0RGF0YXNldEZlYXR1cmUiLCJnZXRTd2FybURhdGFzZXRGZWF0dXJlIiwic2V0TWVkb2lkQW5pbWFsIiwic3VwZXIiLCJzcGF0aWFsVmlld0luaXQiLCJtaW5Qb2ludCIsIm1heFBvaW50IiwiYXhpc0JvdHRvbSIsInRpY2tzIiwidGlja1NpemUiLCJ0aWNrUGFkZGluZyIsImF4aXNSaWdodCIsInBlcmNlbnRhZ2UiLCJiYWNrZ3JvdW5kX2ltYWdlIiwic3RlcCIsInNsaWRlIiwidWkiLCJzcGFjZSIsImFwcGVuZFRvIiwiaW5pdFNsaWRlcnMiLCJoZWlnaHQiLCJ3aWR0aCIsIkxpbmVDaGFydCIsImNwX2xpc3RlbmVyIiwic2ZfbGlzdGVuZXJzIiwiZHJhZ2dhYmxlIiwiY29udGFpbm1lbnQiLCJyZXNpemFibGUiLCJhc3BlY3RSYXRpbyIsIm1heFdpZHRoIiwiQ2hhcnQiLCJzd2FybV9mZWF0dXJlcyIsImxpbmVDaGFydFdpZHRoIiwidHJlbmRDaGFydHNFbGVtIiwibGluZUNoYXJ0IiwibWFyZ2luIiwibGluZUNoYXJ0RGF0YSIsIkFycmF5IiwiZmlsbCIsInRtcF9vYmplY3QiLCJ4MiIsInRpY2tGb3JtYXQiLCJheGlzTGVmdCIsImRyYWdnZWQiLCJjb29yZHMiLCJtb3VzZSIsInRyYW5zbGF0ZUV4dGVudCIsImxpbmVzIiwic3dhcm1MaW5lQ2hhcnQiLCJsaW5lX2NvbG9ycyIsInNjYWxlT3JkaW5hbCIsInNjaGVtZUNhdGVnb3J5MTAiLCJub3JtYWxpemF0aW9uU2NhbGUiLCJsaW5lIiwiZHJhZyIsImNoYXJ0TGluZXMiLCJfZ3JvdXBzIiwic3Ryb2tlIiwiYXR0cmlidXRlcyIsImdldENvbXB1dGVkVGV4dExlbmd0aCIsImluaXRMaW5lQ2hhcnRCdXR0b25zIiwiY2FwaXRhbGl6ZWRfZmVhdHVyZV9zdHJpbmciLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsImNoZWNrYm94IiwibGV2ZWwiLCJ0bXBfbm9kZXMiLCJjbHVzdGVyIiwidmVydGljZXMiLCJncm91cE1lbWJlciIsInBvbHlnb25IdWxsIiwic2V0SGllcmFyY2h5TGV2ZWwiLCJjaGFuZ2VIaWVyYXJjaHlMZWdlbmQiLCJuZXR3b3JrQ29sb3IiLCJsZWdlbmREYXRhIiwibGVnZW5kVGV4dERhdGEiLCJKU09OQVBJX01JTUVUWVBFIiwiZ2V0UGVyY2VudGlsZSIsImRhdGFTZXRQZXJjZW50aWxlIiwiYWpheCIsInVybCIsImRhdGFUeXBlIiwiY29udGVudFR5cGUiLCJoZWFkZXJzIiwic3VjY2VzcyIsInNldERhdGFTZXRQZXJjZW50aWxlIiwiYWRkQWJzb2x1dGVGZWF0dXJlQnV0dG9ucyIsImdldE5ldHdvcmtEYXRhQnV0dG9uIiwiYWRkTmV0d29ya0J1dHRvbnMiLCJmZWF0dXJlIiwic2V0RGF0YXNldEZlYXR1cmUiLCJzZXRTd2FybURhdGEiLCJhZGRUb0RhdGFzZXQiLCJzZXRNZXRhRGF0YSIsImNvbG9ycyIsInJlc3VsdFN0cmluZyIsImluaXRpYWxpemVNZXRhZGRhdGEiLCJpc05hTiIsInNldE5ldHdvcmtEYXRhIiwic2V0SGllcmFyY2h5RGF0YSIsIm5ldHdvcmtfaWQiLCJjb25zdHJ1Y3RvciIsInJlbW92ZUhpZXJhcmNoeUNvbG9yIiwidG1wX2Jvb2xlYW4iLCJzZXRIaWVyYXJjaHlDb2xvciIsInNldEFuaW1hbElkcyIsInJlYWR5IiwiRXZlbnRTb3VyY2UiLCJvbm1lc3NhZ2UiLCJjbG9zZSIsImNoZWNrUGVuZGluZ1JlcXVlc3QiLCJhY3RpdmUiLCJwYXJzZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZWFkeVN0YXRlIiwiQ0xPU0VEIiwiYWxlcnQiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElBQVVGLEVBQVFyQixFQUFvQnFCLElBQy9CLEVBQVBFLEVBQVUsT0FBT0YsRUFDcEIsR0FBVyxFQUFQRSxHQUE4QixpQkFBVkYsR0FBc0JBLEdBQVNBLEVBQU1HLFdBQVksT0FBT0gsRUFDaEYs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Z0ksRUFBZWxZLEdBQy9Eb2IsU0FBVSxPQUNWeFQsS0FBTSxNQUNOeVQsWUFBYSxrQ0FDYkMsUUFBUyxDQUNMLE9BQVVQLEdBRWRRLFFBQVMsU0FBU2pZLEdBR2R3WSxHQUFheFksRUFGQzRVLEVBQWVsWSxHQUFHMkssUUFBUSxTQUFVLFFDckU5RCxHRGlGQWtCLEVBQUVxUCxLQUFLLENBQ0hDLElBQUssaUJBQW1CakwsV0FBZSxHQUN2Q2tMLFNBQVUsT0FDVnhULEtBQU0sTUFDTnlULFlBQWEsa0NBQ2JDLFFBQVMsQ0FDTCxPQUFVUCxHQUVkUSxRQUFTLFNBQVNqWSxHQUNkMFksR0FBWTFZLE1DcEZwQiIsImZpbGUiOiJleHBsb3JlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDYpO1xuIiwiXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vZXhwbG9yZS5jc3NcIik7XG5cbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXG52YXIgdHJhbnNmb3JtO1xudmFyIGluc2VydEludG87XG5cblxuXG52YXIgb3B0aW9ucyA9IHtcImhtclwiOnRydWV9XG5cbm9wdGlvbnMudHJhbnNmb3JtID0gdHJhbnNmb3JtXG5vcHRpb25zLmluc2VydEludG8gPSB1bmRlZmluZWQ7XG5cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCBvcHRpb25zKTtcblxuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cbmlmKG1vZHVsZS5ob3QpIHtcblx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vZXhwbG9yZS5jc3NcIiwgZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL2V4cGxvcmUuY3NzXCIpO1xuXG5cdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cblx0XHR2YXIgbG9jYWxzID0gKGZ1bmN0aW9uKGEsIGIpIHtcblx0XHRcdHZhciBrZXksIGlkeCA9IDA7XG5cblx0XHRcdGZvcihrZXkgaW4gYSkge1xuXHRcdFx0XHRpZighYiB8fCBhW2tleV0gIT09IGJba2V5XSkgcmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRpZHgrKztcblx0XHRcdH1cblxuXHRcdFx0Zm9yKGtleSBpbiBiKSBpZHgtLTtcblxuXHRcdFx0cmV0dXJuIGlkeCA9PT0gMDtcblx0XHR9KGNvbnRlbnQubG9jYWxzLCBuZXdDb250ZW50LmxvY2FscykpO1xuXG5cdFx0aWYoIWxvY2FscykgdGhyb3cgbmV3IEVycm9yKCdBYm9ydGluZyBDU1MgSE1SIGR1ZSB0byBjaGFuZ2VkIGNzcy1tb2R1bGVzIGxvY2Fscy4nKTtcblxuXHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0fSk7XG5cblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59IiwiLy8gSW1wb3J0c1xudmFyIF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyA9IHJlcXVpcmUoXCIuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCIpO1xuZXhwb3J0cyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhmYWxzZSk7XG4vLyBNb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi8qIEljb25zIGZvciBib290c3RyYXAgNCAqL1xcclxcblxcclxcbi5tZGk6OmJlZm9yZSB7XFxyXFxuICAgIGZvbnQtc2l6ZTogMjRweDtcXHJcXG4gICAgbGluZS1oZWlnaHQ6IDE0cHg7XFxyXFxufVxcclxcblxcclxcbi5idG4gLm1kaTo6YmVmb3JlIHtcXHJcXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xcclxcbiAgICB0b3A6IDRweDtcXHJcXG59XFxyXFxuXFxyXFxuLmJ0bi14cyAubWRpOjpiZWZvcmUge1xcclxcbiAgICBmb250LXNpemU6IDE4cHg7XFxyXFxuICAgIHRvcDogM3B4O1xcclxcbn1cXHJcXG5cXHJcXG4uYnRuLXNtIC5tZGk6OmJlZm9yZSB7XFxyXFxuICAgIGZvbnQtc2l6ZTogMThweDtcXHJcXG4gICAgdG9wOiAzcHg7XFxyXFxufVxcclxcblxcclxcbi5kcm9wZG93bi1tZW51IC5tZGkge1xcclxcbiAgICB3aWR0aDogMThweDtcXHJcXG59XFxyXFxuXFxyXFxuLmRyb3Bkb3duLW1lbnUgLm1kaTo6YmVmb3JlIHtcXHJcXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xcclxcbiAgICB0b3A6IDRweDtcXHJcXG4gICAgbGVmdDogLThweDtcXHJcXG59XFxyXFxuXFxyXFxuLm5hdiAubWRpOjpiZWZvcmUge1xcclxcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XFxyXFxuICAgIHRvcDogNHB4O1xcclxcbn1cXHJcXG5cXHJcXG4ubmF2YmFyIC5uYXZiYXItdG9nZ2xlIC5tZGk6OmJlZm9yZSB7XFxyXFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXHJcXG4gICAgdG9wOiA0cHg7XFxyXFxuICAgIGNvbG9yOiAjRkZGO1xcclxcbn1cXHJcXG5cXHJcXG4uYnJlYWRjcnVtYiAubWRpOjpiZWZvcmUge1xcclxcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XFxyXFxuICAgIHRvcDogNHB4O1xcclxcbn1cXHJcXG5cXHJcXG4uYnJlYWRjcnVtYiBhOmhvdmVyIHtcXHJcXG4gICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xcclxcbn1cXHJcXG5cXHJcXG4uYnJlYWRjcnVtYiBhOmhvdmVyIHNwYW4ge1xcclxcbiAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcXHJcXG59XFxyXFxuXFxyXFxuLmFsZXJ0IC5tZGk6OmJlZm9yZSB7XFxyXFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXHJcXG4gICAgdG9wOiA0cHg7XFxyXFxuICAgIG1hcmdpbi1yaWdodDogMnB4O1xcclxcbn1cXHJcXG5cXHJcXG4uaW5wdXQtZ3JvdXAtYWRkb24gLm1kaTo6YmVmb3JlIHtcXHJcXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xcclxcbiAgICB0b3A6IDNweDtcXHJcXG59XFxyXFxuXFxyXFxuLm5hdmJhci1icmFuZCAubWRpOjpiZWZvcmUge1xcclxcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XFxyXFxuICAgIHRvcDogMnB4O1xcclxcbiAgICBtYXJnaW4tcmlnaHQ6IDJweDtcXHJcXG59XFxyXFxuXFxyXFxuLmxpc3QtZ3JvdXAtaXRlbSAubWRpOjpiZWZvcmUge1xcclxcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XFxyXFxuICAgIHRvcDogM3B4O1xcclxcbiAgICBsZWZ0OiAtM3B4XFxyXFxufVxcclxcblxcclxcbi8qIFNWRyBlbGVtZW50cyBhbmQgdGV4dCAqL1xcclxcblxcclxcbiNtYWluLXZpcyB7XFxyXFxuICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XFxyXFxufVxcclxcblxcclxcbi5zdmctY29udGFpbmVyIHtcXHJcXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcclxcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XFxyXFxuICAgIHdpZHRoOiAxMDAlO1xcclxcbiAgICAvKiBhc3BlY3QgcmF0aW8gKi9cXHJcXG4gICAgdmVydGljYWwtYWxpZ246IHRvcDtcXHJcXG4gICAgb3ZlcmZsb3c6IHZpc2libGU7XFxyXFxufVxcclxcblxcclxcbi5zdmctY29udGVudCB7XFxyXFxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXHJcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcclxcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjMDAwO1xcclxcbn1cXHJcXG5cXHJcXG4jbWFpbi12aXMtbGVnZW5kLWRpdiB7XFxyXFxuICAgIGRpc3BsYXk6IG5vbmU7XFxyXFxufVxcclxcblxcclxcbiNoaWVyYXJjaHktbGVnZW5kLWRpdiB7XFxyXFxuICAgIGRpc3BsYXk6IG5vbmU7XFxyXFxufVxcclxcblxcclxcbiNtYWluLXZpcy1sZWdlbmQge1xcclxcbiAgICBmbG9hdDogcmlnaHQ7XFxyXFxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXHJcXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xcclxcbiAgICBvdmVyZmxvdzogdmlzaWJsZTtcXHJcXG4gICAgdG9wOiAxMHB4O1xcclxcbiAgICBsZWZ0OiAxMHB4O1xcclxcbn1cXHJcXG5cXHJcXG4jaGllcmFyY2h5LWxlZ2VuZCB7XFxyXFxuICAgIGZsb2F0OiBsZWZ0O1xcclxcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxyXFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXHJcXG4gICAgb3ZlcmZsb3c6IHZpc2libGU7XFxyXFxuICAgIHRvcDogMTBweDtcXHJcXG4gICAgbGVmdDogMTBweDtcXHJcXG59XFxyXFxuXFxyXFxuLnN2Zy1jb250ZW50LWRlbmRyb2dyYW0ge1xcclxcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxyXFxuICAgIGJvcmRlcjogMXB4IHNvbGlkICMwMDA7XFxyXFxufVxcclxcblxcclxcbi5zdmctbGluZS1jaGFydC1jb250YWluZXIge1xcclxcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxyXFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXHJcXG4gICAgd2lkdGg6IDEwMCU7XFxyXFxuICAgIGhlaWdodDogYXV0bztcXHJcXG4gICAgLyogZGVwZW5kcyBvbiBzdmcgcmF0aW8gKi9cXHJcXG4gICAgcGFkZGluZy1ib3R0b206IDE3JTtcXHJcXG4gICAgLyogYXNwZWN0IHJhdGlvICovXFxyXFxuICAgIHZlcnRpY2FsLWFsaWduOiB0b3A7XFxyXFxuICAgIG92ZXJmbG93OiB2aXNpYmxlO1xcclxcbn1cXHJcXG5cXHJcXG4uc3ZnLWRlbmRyb2dyYW0tY29udGFpbmVyIHtcXHJcXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcclxcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XFxyXFxuICAgIGhlaWdodDogYXV0bztcXHJcXG4gICAgdmVydGljYWwtYWxpZ246IHRvcDtcXHJcXG4gICAgb3ZlcmZsb3c6IHZpc2libGU7XFxyXFxufVxcclxcblxcclxcbi5heGlzIHBhdGgge1xcclxcbiAgICBkaXNwbGF5OiBub25lO1xcclxcbn1cXHJcXG5cXHJcXG4uYXhpcyBsaW5lIHtcXHJcXG4gICAgc3Ryb2tlLW9wYWNpdHk6IDAuMztcXHJcXG4gICAgc2hhcGUtcmVuZGVyaW5nOiBjcmlzcEVkZ2VzO1xcclxcbn1cXHJcXG5cXHJcXG4ueCB7XFxyXFxuICAgIGZvbnQtc2l6ZTogMWVtO1xcclxcbn1cXHJcXG5cXHJcXG4ueSB7XFxyXFxuICAgIGZvbnQtc2l6ZTogMWVtO1xcclxcbn1cXHJcXG5cXHJcXG4uYXhpcy1saW5lLWNoYXJ0IHBhdGggbGluZSB7XFxyXFxuICAgIGZpbGw6IG5vbmU7XFxyXFxuICAgIHN0cm9rZTogIzAwMDtcXHJcXG4gICAgc2hhcGUtcmVuZGVyaW5nOiBjcmlzcEVkZ2VzO1xcclxcbn1cXHJcXG5cXHJcXG4ubGluZSB7XFxyXFxuICAgIGZpbGw6IG5vbmU7XFxyXFxuICAgIHN0cm9rZS13aWR0aDogNXB4O1xcclxcbn1cXHJcXG5cXHJcXG4vKiBUaW1lICAqL1xcclxcblxcclxcbi5mcmFtZS10ZXh0IHtcXHJcXG4gICAgbWFyZ2luLXRvcDogMDtcXHJcXG4gICAgbWFyZ2luLWJvdHRvbTogMDtcXHJcXG4gICAgZm9udC1zaXplOiAyZW07XFxyXFxuICAgIGNvbG9yOiBpbmhlcml0O1xcclxcbiAgICBmb250LXdlaWdodDogNTAwO1xcclxcbiAgICBsaW5lLWhlaWdodDogMS4xO1xcclxcbn1cXHJcXG5cXHJcXG4vKiBTbGlkZXIgdGlja3MgICovXFxyXFxuXFxyXFxuLnVpLXNsaWRlci10aWNrIHtcXHJcXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcclxcbiAgICB3aWR0aDogM3B4O1xcclxcbiAgICBiYWNrZ3JvdW5kOiAjMzM3YWI3O1xcclxcbiAgICBoZWlnaHQ6IDAuOGVtO1xcclxcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxyXFxufVxcclxcblxcclxcbi8qIExhb2RpbmcgZ2lmICAgKi9cXHJcXG5cXHJcXG4jbG9hZGluZyB7XFxyXFxuICAgIGRpc3BsYXk6IGJsb2NrO1xcclxcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxyXFxufVxcclxcblxcclxcbi8qIENvbG9yIGxlZ2VuZCAgICAqL1xcclxcblxcclxcbi5sZWdlbmQge1xcclxcbiAgICBmb250LXNpemU6IDEycHg7XFxyXFxuICAgIHN0cm9rZTogIzAwMDtcXHJcXG59XFxyXFxuXFxyXFxuLmxlZ2VuZC10ZXh0IHtcXHJcXG4gICAgZm9udC1zaXplOiAxLjJlbTtcXHJcXG4gICAgY29sb3I6IGluaGVyaXQ7XFxyXFxuICAgIGxpbmUtaGVpZ2h0OiAxLjE7XFxyXFxufVxcclxcblxcclxcbi5saW5lLWNoYXJ0LWxlZ2VuZC10ZXh0IHtcXHJcXG4gICAgZm9udC1zaXplOiAyZW07XFxyXFxuICAgIGNvbG9yOiBpbmhlcml0O1xcclxcbiAgICBsaW5lLWhlaWdodDogMS4xO1xcclxcbn1cXHJcXG5cXHJcXG4udGltZS1saW5lIHtcXHJcXG4gICAgZmlsbDogbm9uZTtcXHJcXG4gICAgc3Ryb2tlLXdpZHRoOiA1cHg7XFxyXFxuICAgIHN0cm9rZTogIzAwMDtcXHJcXG59XFxyXFxuXFxyXFxuLypzd2FybSBmZWF0dXJlcyAqL1xcclxcblxcclxcbi5jZW50cm9pZCB7XFxyXFxuICAgIGZpbGwtb3BhY2l0eTogMDtcXHJcXG4gICAgc3Ryb2tlOiAjZTcyOThhO1xcclxcbiAgICBzdHJva2Utd2lkdGg6IDNweDtcXHJcXG59XFxyXFxuXFxyXFxuLm1lZG9pZCB7XFxyXFxuICAgIGZpbGw6ICNlNzI5OGEgIWltcG9ydGFudDtcXHJcXG4gICAgc3Ryb2tlOiAjZTcyOThhICFpbXBvcnRhbnQ7XFxyXFxufVxcclxcblxcclxcbi5odWxsLXBhdGgge1xcclxcbiAgICBmaWxsOiAjZmZmO1xcclxcbiAgICBmaWxsLW9wYWNpdHk6IDA7XFxyXFxuICAgIHN0cm9rZS13aWR0aDogMztcXHJcXG4gICAgc3Ryb2tlOiAjMjUyNTI1O1xcclxcbiAgICBzdHJva2Utb3BhY2l0eTogMC41O1xcclxcbn1cXHJcXG5cXHJcXG4uaGllcmFyY2h5LWdyb3VwIHtcXHJcXG4gICAgc3Ryb2tlLXdpZHRoOiAxMDtcXHJcXG4gICAgc3Ryb2tlLWxpbmVqb2luOiByb3VuZDtcXHJcXG4gICAgb3BhY2l0eTogMC4yO1xcclxcbn1cXHJcXG5cXHJcXG4uZGVsYXVuYXktdHJpYW5ndWxhdGlvbiB7XFxyXFxuICAgIGZpbGwtb3BhY2l0eTogMDtcXHJcXG4gICAgc3Ryb2tlLXdpZHRoOiAyO1xcclxcbiAgICBzdHJva2U6ICMwMDA7XFxyXFxuICAgIHN0cm9rZS1vcGFjaXR5OiAwLjQ7XFxyXFxufVxcclxcblxcclxcbi8qIENvbG9yIGJyZXdlciBwaWNrZXIgZGl2ICovXFxyXFxuXFxyXFxuLnBhbGV0dGUge1xcclxcbiAgICBjdXJzb3I6IHBvaW50ZXI7XFxyXFxuICAgIGRpc3BsYXk6IHRhYmxlO1xcclxcbiAgICB2ZXJ0aWNhbC1hbGlnbjogYm90dG9tO1xcclxcbiAgICBtYXJnaW46IDRweCAwIDRweCA0cHg7XFxyXFxuICAgIGJhY2tncm91bmQ6ICNmZmY7XFxyXFxuICAgIGJvcmRlcjogc29saWQgMXB4ICNhYWE7XFxyXFxufVxcclxcblxcclxcbi5zd2F0Y2gge1xcclxcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxyXFxuICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XFxyXFxuICAgIHdpZHRoOiAyMnB4O1xcclxcbiAgICBoZWlnaHQ6IDIycHg7XFxyXFxufVxcclxcblxcclxcbi52b3Jvbm9pIHtcXHJcXG4gICAgZmlsbC1vcGFjaXR5OiAwO1xcclxcbiAgICBzdHJva2Utd2lkdGg6IDM7XFxyXFxuICAgIHN0cm9rZTogIzAwMDtcXHJcXG4gICAgc3Ryb2tlLW9wYWNpdHk6IDAuMjtcXHJcXG59XFxyXFxuXFxyXFxuLyogVG9vbHRpcCAqL1xcclxcblxcclxcbmRpdi50b29sdGlwIHtcXHJcXG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XFxyXFxuICAgIG9wYWNpdHk6IDA7XFxyXFxuICAgIGJhY2tncm91bmQ6IHJnYigyNTUsIDI1NSwgMjU1KSAhaW1wb3J0YW50O1xcclxcbiAgICBib3JkZXItbGVmdC1jb2xvcjogIzFiODA5ZSAhaW1wb3J0YW50O1xcclxcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjZWVlO1xcclxcbiAgICBib3JkZXItbGVmdC13aWR0aDogNXB4O1xcclxcbiAgICBib3JkZXItcmFkaXVzOiAzcHg7XFxyXFxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXHJcXG59XFxyXFxuXFxyXFxuZGl2LnRvb2x0aXAgdGFibGUgdGQ6bnRoLWNoaWxkKDIpIHtcXHJcXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xcclxcbiAgICBmb250LXdlaWdodDogYm9sZDtcXHJcXG59XFxyXFxuXFxyXFxuLnRvb2x0aXAtc3BhbiB7XFxyXFxuICAgIGRpc3BsYXk6IGJsb2NrO1xcclxcbiAgICB3aWR0aDogMTUwcHg7XFxyXFxuICAgIHdvcmQtd3JhcDogYnJlYWstd29yZDtcXHJcXG4gICAgZm9udC1zaXplOiAxLjVlbTtcXHJcXG59XFxyXFxuXFxyXFxuLnVwcGVyLW91dGVyLWFyZWEsIC5sb3dlci1vdXRlci1hcmVhIHtcXHJcXG4gICAgc3Ryb2tlLXdpZHRoOiAxO1xcclxcbiAgICBmaWxsOiAjNzRhOWNmO1xcclxcbiAgICBzdHJva2U6ICMzNjkwYzA7XFxyXFxufVxcclxcblxcclxcbi51cHBlci1pbm5lci1hcmVhLCAubG93ZXItaW5uZXItYXJlYSB7XFxyXFxuICAgIHN0cm9rZS13aWR0aDogMTtcXHJcXG4gICAgZmlsbDogIzA0NWE4ZDtcXHJcXG4gICAgc3Ryb2tlOiAjMDIzODU4O1xcclxcbn1cXHJcXG5cXHJcXG4ubWVkaWFuLWxpbmUge1xcclxcbiAgICBmaWxsOiBub25lO1xcclxcbiAgICBzdHJva2U6ICM1MjUyNTI7XFxyXFxuICAgIHN0cm9rZS13aWR0aDogNTtcXHJcXG59XFxyXFxuXFxyXFxuLnNlbGVjdGVkIHtcXHJcXG4gICAgYmFja2dyb3VuZDogIzk5OTtcXHJcXG4gICAgYm9yZGVyOiA0cHggc29saWQgIzRkNGQ0ZDtcXHJcXG4gICAgLW1vei1ib3JkZXItcmFkaXVzOiA1cHg7XFxyXFxuICAgIC13ZWJraXQtYm9yZGVyLXJhZGl1czogNXB4O1xcclxcbiAgICBib3gtc2hhZG93OiAxcHggMnB4IDRweCByZ2JhKDAsIDAsIDAsIC40KTtcXHJcXG59XFxyXFxuXFxyXFxuLnpvb20ge1xcclxcbiAgICBmaWxsOiBub25lO1xcclxcbiAgICBwb2ludGVyLWV2ZW50czogYWxsO1xcclxcbn1cXHJcXG5cXHJcXG4ueC5heGlzLWxpbmUtY2hhcnQ+Zz50ZXh0IHtcXHJcXG4gICAgZm9udC1zaXplOiAzZW07XFxyXFxuICAgIGNvbG9yOiBpbmhlcml0O1xcclxcbiAgICBsaW5lLWhlaWdodDogMS4xO1xcclxcbn1cXHJcXG5cXHJcXG4uYXJyb3cge1xcclxcbiAgICBzdHJva2Utd2lkdGg6IDE7XFxyXFxufVxcclxcblxcclxcbiNjZW50cm9pZC1saW5lIHtcXHJcXG4gICAgc3Ryb2tlLXdpZHRoOiAxO1xcclxcbiAgICBzdHJva2U6ICNlNzI5OGE7XFxyXFxufVxcclxcblxcclxcbiNjZW50cm9pZC1hcnJvdyB7XFxyXFxuICAgIGZpbGw6ICNlNzI5OGE7XFxyXFxufVxcclxcblxcclxcbi5tZXRhZGF0YS1zd2F0Y2gge1xcclxcbiAgICB3aWR0aDogMzBweDtcXHJcXG4gICAgaGVpZ2h0OiAzMHB4O1xcclxcbiAgICBib3JkZXItcmFkaXVzOiAzcHg7XFxyXFxuICAgIGJvcmRlcjogMnB4IHNvbGlkICM2NjY7XFxyXFxufVxcclxcblxcclxcbi5tZXRhZGF0YS1zd2F0Y2gtY2xpY2thYmxlOmhvdmVyIHtcXHJcXG4gICAgYm9yZGVyOiAycHggc29saWQgIzAwMDtcXHJcXG4gICAgY3Vyc29yOiBwb2ludGVyO1xcclxcbn1cXHJcXG5cXHJcXG4uZHJvcGRvd24tbWVudSB7XFxyXFxuICAgIG1pbi13aWR0aDogNDBweDtcXHJcXG4gICAgcGFkZGluZzogNXB4O1xcclxcbn1cXHJcXG5cXHJcXG4ubWV0YWRhdGEtbGVnZW5kIHtcXHJcXG4gICAgbGlzdC1zdHlsZTogbm9uZTtcXHJcXG4gICAgbWFyZ2luLXRvcDogMTBweDtcXHJcXG59XFxyXFxuXFxyXFxuLm1ldGFkYXRhLWxlZ2VuZCBsaSB7XFxyXFxuICAgIGZsb2F0OiBsZWZ0O1xcclxcbiAgICBtYXJnaW4tcmlnaHQ6IDEwcHg7XFxyXFxufVxcclxcblxcclxcbi5tZXRhZGF0YS1sZWdlbmQgc3BhbiB7XFxyXFxuICAgIGJvcmRlcjogMnB4IHNvbGlkICM2NjY7XFxyXFxuICAgIGZsb2F0OiBsZWZ0O1xcclxcbiAgICB3aWR0aDogMzBweDtcXHJcXG4gICAgaGVpZ2h0OiAzMHB4O1xcclxcbn1cXHJcXG5cXHJcXG4ubWV0YWRhdGEtbGVnZW5kIC5ibC1hdmcge1xcclxcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjN2ZjOTdmO1xcclxcbn1cXHJcXG5cXHJcXG4ubWV0YWRhdGEtbGVnZW5kIC5hdmcge1xcclxcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmRjMDg2O1xcclxcbn1cXHJcXG5cXHJcXG4ubWV0YWRhdGEtbGVnZW5kIC5hYi1hdmcge1xcclxcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzg2Y2IwO1xcclxcbn1cXHJcXG5cXHJcXG4ubmV0d29yay1lZGdlcyB7XFxyXFxuICAgIGZpbGwtb3BhY2l0eTogMDtcXHJcXG4gICAgc3Ryb2tlLXdpZHRoOiAyO1xcclxcbn1cXHJcXG5cXHJcXG4ubmV0d29yay1iYWNrZ3JvdW5kLWVkZ2VzIHtcXHJcXG4gICAgZmlsbC1vcGFjaXR5OiAwO1xcclxcbiAgICBzdHJva2Utb3BhY2l0eTogMC4yNTtcXHJcXG4gICAgc3Ryb2tlOiAjNzM3MzczO1xcclxcbn1cXHJcXG5cXHJcXG4ubm9kZSB0ZXh0IHtcXHJcXG4gICAgZm9udDogMTJweCBzYW5zLXNlcmlmO1xcclxcbn1cXHJcXG5cXHJcXG4ubm9kZS0taW50ZXJuYWwgdGV4dCB7XFxyXFxuICAgIHRleHQtc2hhZG93OiAwIDFweCAwICNmZmYsIDAgLTFweCAwICNmZmYsIDFweCAwIDAgI2ZmZiwgLTFweCAwIDAgI2ZmZjtcXHJcXG59XFxyXFxuXFxyXFxuLmxpbmsge1xcclxcbiAgICBmaWxsOiBub25lO1xcclxcbiAgICBzdHJva2U6ICM2MzYzNjM7XFxyXFxuICAgIHN0cm9rZS13aWR0aDogNXB4O1xcclxcbn1cXHJcXG5cXHJcXG4jYWN0aXZlLW5ldHdvcmstbmFtZSB7XFxyXFxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xcclxcbiAgICBjb2xvcjogIzI5NjI5MjtcXHJcXG59XFxyXFxuXFxyXFxuLmFjdGl2ZS1sZXZlbCB7XFxyXFxuICAgIGZpbGw6ICMzODZjYjA7XFxyXFxufVxcclxcblxcclxcbiNkZW5kcm9ncmFtLXBhbmVsIHtcXHJcXG4gICAgcG9zaXRpb246IGluaXRpYWw7XFxyXFxufVxcclxcblxcclxcbiNkZW5kcm9ncmFtLXBhbmVsIHtcXHJcXG4gICAgZGlzcGxheTogbm9uZVxcclxcbn1cXHJcXG5cXHJcXG4uc2hvdy1kZW5kcm9ncmFtIHtcXHJcXG4gICAgZmxvYXQ6IHJpZ2h0O1xcclxcbiAgICBib3JkZXItcmFkaXVzOiAzcHg7XFxyXFxuICAgIGJvcmRlcjogMXB4IHNvbGlkICNEMUQzRDQ7XFxyXFxuICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7XFxyXFxufVxcclxcblxcclxcbi5zaG93LWRlbmRyb2dyYW06aG92ZXIge1xcclxcbiAgICBiYWNrZ3JvdW5kOiAjRDFEM0Q0O1xcclxcbn1cXHJcXG5cXHJcXG4uZGVuZHJvZ3JhbS10ZXh0IHtcXHJcXG4gICAgZm9udC1zaXplOiAxMGVtICFpbXBvcnRhbnQ7XFxyXFxufVxcclxcblxcclxcbi5oaWdobGlnaHQtaGllcmFyY2h5IHtcXHJcXG4gICAgZmlsbDogIzI1MjUyNTtcXHJcXG4gICAgc3Ryb2tlOiAjMjUyNTI1O1xcclxcbiAgICBzdHJva2Utd2lkdGg6IDEwO1xcclxcbiAgICBzdHJva2UtbGluZWpvaW46IHJvdW5kO1xcclxcbiAgICBvcGFjaXR5OiAwLjM7XFxyXFxufVxcclxcblxcclxcbi5hbmltYWwtaGlnaGxpZ2h0IHtcXHJcXG4gICAgZmlsbDogI2M1MWI3ZCAhaW1wb3J0YW50O1xcclxcbn1cXHJcXG5cXHJcXG4jZGVuZHJvZ3JhbS1idXR0b25zLWRpdiAuYnRuIHNwYW4uZ2x5cGhpY29uIHtcXHJcXG4gICAgb3BhY2l0eTogMDtcXHJcXG59XFxyXFxuXFxyXFxuI2RlbmRyb2dyYW0tYnV0dG9ucy1kaXYgLmJ0bi5hY3RpdmUgc3Bhbi5nbHlwaGljb24ge1xcclxcbiAgICBvcGFjaXR5OiAxO1xcclxcbn1cXHJcXG5cXHJcXG4jZGVuZHJvZ3JhbS1idXR0b25zLWRpdiB7XFxyXFxuICAgIGJvcmRlcjogMnB4IHNvbGlkICNEMUQzRDQ7XFxyXFxuICAgIGJvcmRlci1yYWRpdXM6IDVweDtcXHJcXG59XFxyXFxuXFxyXFxuI2RlbmRyb2dyYW0tbGVnZW5kIHtcXHJcXG4gICAgbWFyZ2luLWxlZnQ6IDIwcHg7XFxyXFxufVxcclxcblxcclxcbi5pbnRlcnNlY3Rpb24ge1xcclxcbiAgICBmaWxsOiB1cmwoI3N0cmlwZWQpICFpbXBvcnRhbnQ7XFxyXFxuICAgIHN0cm9rZTogIzY3MDAwZDtcXHJcXG59XFxyXFxuXFxyXFxuLnN5bS1kaWZmZXJlbmNlIHtcXHJcXG4gICAgZmlsbDogdXJsKCNzdHJpcGVkKSAhaW1wb3J0YW50O1xcclxcbiAgICBzdHJva2U6ICM2NzAwMGQ7XFxyXFxufVxcclxcblxcclxcbi5tb2RhbC1sZyB7XFxyXFxuICAgIG1heC13aWR0aDogODAlO1xcclxcbn1cXHJcXG5cXHJcXG4uYmFja2dyb3VuZC1pbWFnZSB7XFxyXFxuICAgIGJhY2tncm91bmQ6ICNmZmY7XFxyXFxufVwiLCBcIlwiXSk7XG4vLyBFeHBvcnRzXG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHM7XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuLypcbiAgTUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcbiAgQXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cbi8vIGNzcyBiYXNlIGNvZGUsIGluamVjdGVkIGJ5IHRoZSBjc3MtbG9hZGVyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodXNlU291cmNlTWFwKSB7XG4gIHZhciBsaXN0ID0gW107IC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcblxuICBsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICB2YXIgY29udGVudCA9IGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSwgdXNlU291cmNlTWFwKTtcblxuICAgICAgaWYgKGl0ZW1bMl0pIHtcbiAgICAgICAgcmV0dXJuIFwiQG1lZGlhIFwiLmNvbmNhdChpdGVtWzJdLCBcIiB7XCIpLmNvbmNhdChjb250ZW50LCBcIn1cIik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjb250ZW50O1xuICAgIH0pLmpvaW4oJycpO1xuICB9OyAvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdFxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuXG5cbiAgbGlzdC5pID0gZnVuY3Rpb24gKG1vZHVsZXMsIG1lZGlhUXVlcnksIGRlZHVwZSkge1xuICAgIGlmICh0eXBlb2YgbW9kdWxlcyA9PT0gJ3N0cmluZycpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgbW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgJyddXTtcbiAgICB9XG5cbiAgICB2YXIgYWxyZWFkeUltcG9ydGVkTW9kdWxlcyA9IHt9O1xuXG4gICAgaWYgKGRlZHVwZSkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItZGVzdHJ1Y3R1cmluZ1xuICAgICAgICB2YXIgaWQgPSB0aGlzW2ldWzBdO1xuXG4gICAgICAgIGlmIChpZCAhPSBudWxsKSB7XG4gICAgICAgICAgYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IG1vZHVsZXMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgaXRlbSA9IFtdLmNvbmNhdChtb2R1bGVzW19pXSk7XG5cbiAgICAgIGlmIChkZWR1cGUgJiYgYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpdGVtWzBdXSkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29udGludWVcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChtZWRpYVF1ZXJ5KSB7XG4gICAgICAgIGlmICghaXRlbVsyXSkge1xuICAgICAgICAgIGl0ZW1bMl0gPSBtZWRpYVF1ZXJ5O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW1bMl0gPSBcIlwiLmNvbmNhdChtZWRpYVF1ZXJ5LCBcIiBhbmQgXCIpLmNvbmNhdChpdGVtWzJdKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBsaXN0LnB1c2goaXRlbSk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBsaXN0O1xufTtcblxuZnVuY3Rpb24gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtLCB1c2VTb3VyY2VNYXApIHtcbiAgdmFyIGNvbnRlbnQgPSBpdGVtWzFdIHx8ICcnOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWRlc3RydWN0dXJpbmdcblxuICB2YXIgY3NzTWFwcGluZyA9IGl0ZW1bM107XG5cbiAgaWYgKCFjc3NNYXBwaW5nKSB7XG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH1cblxuICBpZiAodXNlU291cmNlTWFwICYmIHR5cGVvZiBidG9hID09PSAnZnVuY3Rpb24nKSB7XG4gICAgdmFyIHNvdXJjZU1hcHBpbmcgPSB0b0NvbW1lbnQoY3NzTWFwcGluZyk7XG4gICAgdmFyIHNvdXJjZVVSTHMgPSBjc3NNYXBwaW5nLnNvdXJjZXMubWFwKGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICAgIHJldHVybiBcIi8qIyBzb3VyY2VVUkw9XCIuY29uY2F0KGNzc01hcHBpbmcuc291cmNlUm9vdCB8fCAnJykuY29uY2F0KHNvdXJjZSwgXCIgKi9cIik7XG4gICAgfSk7XG4gICAgcmV0dXJuIFtjb250ZW50XS5jb25jYXQoc291cmNlVVJMcykuY29uY2F0KFtzb3VyY2VNYXBwaW5nXSkuam9pbignXFxuJyk7XG4gIH1cblxuICByZXR1cm4gW2NvbnRlbnRdLmpvaW4oJ1xcbicpO1xufSAvLyBBZGFwdGVkIGZyb20gY29udmVydC1zb3VyY2UtbWFwIChNSVQpXG5cblxuZnVuY3Rpb24gdG9Db21tZW50KHNvdXJjZU1hcCkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgdmFyIGJhc2U2NCA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSk7XG4gIHZhciBkYXRhID0gXCJzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxcIi5jb25jYXQoYmFzZTY0KTtcbiAgcmV0dXJuIFwiLyojIFwiLmNvbmNhdChkYXRhLCBcIiAqL1wiKTtcbn0iLCIvKlxuXHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuXHRBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xuXG52YXIgc3R5bGVzSW5Eb20gPSB7fTtcblxudmFyXHRtZW1vaXplID0gZnVuY3Rpb24gKGZuKSB7XG5cdHZhciBtZW1vO1xuXG5cdHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdFx0aWYgKHR5cGVvZiBtZW1vID09PSBcInVuZGVmaW5lZFwiKSBtZW1vID0gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHRyZXR1cm4gbWVtbztcblx0fTtcbn07XG5cbnZhciBpc09sZElFID0gbWVtb2l6ZShmdW5jdGlvbiAoKSB7XG5cdC8vIFRlc3QgZm9yIElFIDw9IDkgYXMgcHJvcG9zZWQgYnkgQnJvd3NlcmhhY2tzXG5cdC8vIEBzZWUgaHR0cDovL2Jyb3dzZXJoYWNrcy5jb20vI2hhY2stZTcxZDg2OTJmNjUzMzQxNzNmZWU3MTVjMjIyY2I4MDVcblx0Ly8gVGVzdHMgZm9yIGV4aXN0ZW5jZSBvZiBzdGFuZGFyZCBnbG9iYWxzIGlzIHRvIGFsbG93IHN0eWxlLWxvYWRlclxuXHQvLyB0byBvcGVyYXRlIGNvcnJlY3RseSBpbnRvIG5vbi1zdGFuZGFyZCBlbnZpcm9ubWVudHNcblx0Ly8gQHNlZSBodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay1jb250cmliL3N0eWxlLWxvYWRlci9pc3N1ZXMvMTc3XG5cdHJldHVybiB3aW5kb3cgJiYgZG9jdW1lbnQgJiYgZG9jdW1lbnQuYWxsICYmICF3aW5kb3cuYXRvYjtcbn0pO1xuXG52YXIgZ2V0VGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpO1xufTtcblxudmFyIGdldEVsZW1lbnQgPSAoZnVuY3Rpb24gKGZuKSB7XG5cdHZhciBtZW1vID0ge307XG5cblx0cmV0dXJuIGZ1bmN0aW9uKHRhcmdldCkge1xuICAgICAgICAgICAgICAgIC8vIElmIHBhc3NpbmcgZnVuY3Rpb24gaW4gb3B0aW9ucywgdGhlbiB1c2UgaXQgZm9yIHJlc29sdmUgXCJoZWFkXCIgZWxlbWVudC5cbiAgICAgICAgICAgICAgICAvLyBVc2VmdWwgZm9yIFNoYWRvdyBSb290IHN0eWxlIGkuZVxuICAgICAgICAgICAgICAgIC8vIHtcbiAgICAgICAgICAgICAgICAvLyAgIGluc2VydEludG86IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZm9vXCIpLnNoYWRvd1Jvb3QgfVxuICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRhcmdldCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lbW9bdGFyZ2V0XSA9PT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0dmFyIHN0eWxlVGFyZ2V0ID0gZ2V0VGFyZ2V0LmNhbGwodGhpcywgdGFyZ2V0KTtcblx0XHRcdC8vIFNwZWNpYWwgY2FzZSB0byByZXR1cm4gaGVhZCBvZiBpZnJhbWUgaW5zdGVhZCBvZiBpZnJhbWUgaXRzZWxmXG5cdFx0XHRpZiAod2luZG93LkhUTUxJRnJhbWVFbGVtZW50ICYmIHN0eWxlVGFyZ2V0IGluc3RhbmNlb2Ygd2luZG93LkhUTUxJRnJhbWVFbGVtZW50KSB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Ly8gVGhpcyB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhY2Nlc3MgdG8gaWZyYW1lIGlzIGJsb2NrZWRcblx0XHRcdFx0XHQvLyBkdWUgdG8gY3Jvc3Mtb3JpZ2luIHJlc3RyaWN0aW9uc1xuXHRcdFx0XHRcdHN0eWxlVGFyZ2V0ID0gc3R5bGVUYXJnZXQuY29udGVudERvY3VtZW50LmhlYWQ7XG5cdFx0XHRcdH0gY2F0Y2goZSkge1xuXHRcdFx0XHRcdHN0eWxlVGFyZ2V0ID0gbnVsbDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0bWVtb1t0YXJnZXRdID0gc3R5bGVUYXJnZXQ7XG5cdFx0fVxuXHRcdHJldHVybiBtZW1vW3RhcmdldF1cblx0fTtcbn0pKCk7XG5cbnZhciBzaW5nbGV0b24gPSBudWxsO1xudmFyXHRzaW5nbGV0b25Db3VudGVyID0gMDtcbnZhclx0c3R5bGVzSW5zZXJ0ZWRBdFRvcCA9IFtdO1xuXG52YXJcdGZpeFVybHMgPSByZXF1aXJlKFwiLi91cmxzXCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGxpc3QsIG9wdGlvbnMpIHtcblx0aWYgKHR5cGVvZiBERUJVRyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBERUJVRykge1xuXHRcdGlmICh0eXBlb2YgZG9jdW1lbnQgIT09IFwib2JqZWN0XCIpIHRocm93IG5ldyBFcnJvcihcIlRoZSBzdHlsZS1sb2FkZXIgY2Fubm90IGJlIHVzZWQgaW4gYSBub24tYnJvd3NlciBlbnZpcm9ubWVudFwiKTtcblx0fVxuXG5cdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG5cdG9wdGlvbnMuYXR0cnMgPSB0eXBlb2Ygb3B0aW9ucy5hdHRycyA9PT0gXCJvYmplY3RcIiA/IG9wdGlvbnMuYXR0cnMgOiB7fTtcblxuXHQvLyBGb3JjZSBzaW5nbGUtdGFnIHNvbHV0aW9uIG9uIElFNi05LCB3aGljaCBoYXMgYSBoYXJkIGxpbWl0IG9uIHRoZSAjIG9mIDxzdHlsZT5cblx0Ly8gdGFncyBpdCB3aWxsIGFsbG93IG9uIGEgcGFnZVxuXHRpZiAoIW9wdGlvbnMuc2luZ2xldG9uICYmIHR5cGVvZiBvcHRpb25zLnNpbmdsZXRvbiAhPT0gXCJib29sZWFuXCIpIG9wdGlvbnMuc2luZ2xldG9uID0gaXNPbGRJRSgpO1xuXG5cdC8vIEJ5IGRlZmF1bHQsIGFkZCA8c3R5bGU+IHRhZ3MgdG8gdGhlIDxoZWFkPiBlbGVtZW50XG4gICAgICAgIGlmICghb3B0aW9ucy5pbnNlcnRJbnRvKSBvcHRpb25zLmluc2VydEludG8gPSBcImhlYWRcIjtcblxuXHQvLyBCeSBkZWZhdWx0LCBhZGQgPHN0eWxlPiB0YWdzIHRvIHRoZSBib3R0b20gb2YgdGhlIHRhcmdldFxuXHRpZiAoIW9wdGlvbnMuaW5zZXJ0QXQpIG9wdGlvbnMuaW5zZXJ0QXQgPSBcImJvdHRvbVwiO1xuXG5cdHZhciBzdHlsZXMgPSBsaXN0VG9TdHlsZXMobGlzdCwgb3B0aW9ucyk7XG5cblx0YWRkU3R5bGVzVG9Eb20oc3R5bGVzLCBvcHRpb25zKTtcblxuXHRyZXR1cm4gZnVuY3Rpb24gdXBkYXRlIChuZXdMaXN0KSB7XG5cdFx0dmFyIG1heVJlbW92ZSA9IFtdO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBpdGVtID0gc3R5bGVzW2ldO1xuXHRcdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG5cblx0XHRcdGRvbVN0eWxlLnJlZnMtLTtcblx0XHRcdG1heVJlbW92ZS5wdXNoKGRvbVN0eWxlKTtcblx0XHR9XG5cblx0XHRpZihuZXdMaXN0KSB7XG5cdFx0XHR2YXIgbmV3U3R5bGVzID0gbGlzdFRvU3R5bGVzKG5ld0xpc3QsIG9wdGlvbnMpO1xuXHRcdFx0YWRkU3R5bGVzVG9Eb20obmV3U3R5bGVzLCBvcHRpb25zKTtcblx0XHR9XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IG1heVJlbW92ZS5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGRvbVN0eWxlID0gbWF5UmVtb3ZlW2ldO1xuXG5cdFx0XHRpZihkb21TdHlsZS5yZWZzID09PSAwKSB7XG5cdFx0XHRcdGZvciAodmFyIGogPSAwOyBqIDwgZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspIGRvbVN0eWxlLnBhcnRzW2pdKCk7XG5cblx0XHRcdFx0ZGVsZXRlIHN0eWxlc0luRG9tW2RvbVN0eWxlLmlkXTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG59O1xuXG5mdW5jdGlvbiBhZGRTdHlsZXNUb0RvbSAoc3R5bGVzLCBvcHRpb25zKSB7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGl0ZW0gPSBzdHlsZXNbaV07XG5cdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG5cblx0XHRpZihkb21TdHlsZSkge1xuXHRcdFx0ZG9tU3R5bGUucmVmcysrO1xuXG5cdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0ZG9tU3R5bGUucGFydHNbal0oaXRlbS5wYXJ0c1tqXSk7XG5cdFx0XHR9XG5cblx0XHRcdGZvcig7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdGRvbVN0eWxlLnBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR2YXIgcGFydHMgPSBbXTtcblxuXHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0cGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XG5cdFx0XHR9XG5cblx0XHRcdHN0eWxlc0luRG9tW2l0ZW0uaWRdID0ge2lkOiBpdGVtLmlkLCByZWZzOiAxLCBwYXJ0czogcGFydHN9O1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBsaXN0VG9TdHlsZXMgKGxpc3QsIG9wdGlvbnMpIHtcblx0dmFyIHN0eWxlcyA9IFtdO1xuXHR2YXIgbmV3U3R5bGVzID0ge307XG5cblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGl0ZW0gPSBsaXN0W2ldO1xuXHRcdHZhciBpZCA9IG9wdGlvbnMuYmFzZSA/IGl0ZW1bMF0gKyBvcHRpb25zLmJhc2UgOiBpdGVtWzBdO1xuXHRcdHZhciBjc3MgPSBpdGVtWzFdO1xuXHRcdHZhciBtZWRpYSA9IGl0ZW1bMl07XG5cdFx0dmFyIHNvdXJjZU1hcCA9IGl0ZW1bM107XG5cdFx0dmFyIHBhcnQgPSB7Y3NzOiBjc3MsIG1lZGlhOiBtZWRpYSwgc291cmNlTWFwOiBzb3VyY2VNYXB9O1xuXG5cdFx0aWYoIW5ld1N0eWxlc1tpZF0pIHN0eWxlcy5wdXNoKG5ld1N0eWxlc1tpZF0gPSB7aWQ6IGlkLCBwYXJ0czogW3BhcnRdfSk7XG5cdFx0ZWxzZSBuZXdTdHlsZXNbaWRdLnBhcnRzLnB1c2gocGFydCk7XG5cdH1cblxuXHRyZXR1cm4gc3R5bGVzO1xufVxuXG5mdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQgKG9wdGlvbnMsIHN0eWxlKSB7XG5cdHZhciB0YXJnZXQgPSBnZXRFbGVtZW50KG9wdGlvbnMuaW5zZXJ0SW50bylcblxuXHRpZiAoIXRhcmdldCkge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIkNvdWxkbid0IGZpbmQgYSBzdHlsZSB0YXJnZXQuIFRoaXMgcHJvYmFibHkgbWVhbnMgdGhhdCB0aGUgdmFsdWUgZm9yIHRoZSAnaW5zZXJ0SW50bycgcGFyYW1ldGVyIGlzIGludmFsaWQuXCIpO1xuXHR9XG5cblx0dmFyIGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wID0gc3R5bGVzSW5zZXJ0ZWRBdFRvcFtzdHlsZXNJbnNlcnRlZEF0VG9wLmxlbmd0aCAtIDFdO1xuXG5cdGlmIChvcHRpb25zLmluc2VydEF0ID09PSBcInRvcFwiKSB7XG5cdFx0aWYgKCFsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCkge1xuXHRcdFx0dGFyZ2V0Lmluc2VydEJlZm9yZShzdHlsZSwgdGFyZ2V0LmZpcnN0Q2hpbGQpO1xuXHRcdH0gZWxzZSBpZiAobGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AubmV4dFNpYmxpbmcpIHtcblx0XHRcdHRhcmdldC5pbnNlcnRCZWZvcmUoc3R5bGUsIGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wLm5leHRTaWJsaW5nKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcblx0XHR9XG5cdFx0c3R5bGVzSW5zZXJ0ZWRBdFRvcC5wdXNoKHN0eWxlKTtcblx0fSBlbHNlIGlmIChvcHRpb25zLmluc2VydEF0ID09PSBcImJvdHRvbVwiKSB7XG5cdFx0dGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcblx0fSBlbHNlIGlmICh0eXBlb2Ygb3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJvYmplY3RcIiAmJiBvcHRpb25zLmluc2VydEF0LmJlZm9yZSkge1xuXHRcdHZhciBuZXh0U2libGluZyA9IGdldEVsZW1lbnQob3B0aW9ucy5pbnNlcnRJbnRvICsgXCIgXCIgKyBvcHRpb25zLmluc2VydEF0LmJlZm9yZSk7XG5cdFx0dGFyZ2V0Lmluc2VydEJlZm9yZShzdHlsZSwgbmV4dFNpYmxpbmcpO1xuXHR9IGVsc2Uge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIltTdHlsZSBMb2FkZXJdXFxuXFxuIEludmFsaWQgdmFsdWUgZm9yIHBhcmFtZXRlciAnaW5zZXJ0QXQnICgnb3B0aW9ucy5pbnNlcnRBdCcpIGZvdW5kLlxcbiBNdXN0IGJlICd0b3AnLCAnYm90dG9tJywgb3IgT2JqZWN0LlxcbiAoaHR0cHM6Ly9naXRodWIuY29tL3dlYnBhY2stY29udHJpYi9zdHlsZS1sb2FkZXIjaW5zZXJ0YXQpXFxuXCIpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudCAoc3R5bGUpIHtcblx0aWYgKHN0eWxlLnBhcmVudE5vZGUgPT09IG51bGwpIHJldHVybiBmYWxzZTtcblx0c3R5bGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZSk7XG5cblx0dmFyIGlkeCA9IHN0eWxlc0luc2VydGVkQXRUb3AuaW5kZXhPZihzdHlsZSk7XG5cdGlmKGlkeCA+PSAwKSB7XG5cdFx0c3R5bGVzSW5zZXJ0ZWRBdFRvcC5zcGxpY2UoaWR4LCAxKTtcblx0fVxufVxuXG5mdW5jdGlvbiBjcmVhdGVTdHlsZUVsZW1lbnQgKG9wdGlvbnMpIHtcblx0dmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuXG5cdGlmKG9wdGlvbnMuYXR0cnMudHlwZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0b3B0aW9ucy5hdHRycy50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xuXHR9XG5cblx0YWRkQXR0cnMoc3R5bGUsIG9wdGlvbnMuYXR0cnMpO1xuXHRpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgc3R5bGUpO1xuXG5cdHJldHVybiBzdHlsZTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlTGlua0VsZW1lbnQgKG9wdGlvbnMpIHtcblx0dmFyIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcblxuXHRpZihvcHRpb25zLmF0dHJzLnR5cGUgPT09IHVuZGVmaW5lZCkge1xuXHRcdG9wdGlvbnMuYXR0cnMudHlwZSA9IFwidGV4dC9jc3NcIjtcblx0fVxuXHRvcHRpb25zLmF0dHJzLnJlbCA9IFwic3R5bGVzaGVldFwiO1xuXG5cdGFkZEF0dHJzKGxpbmssIG9wdGlvbnMuYXR0cnMpO1xuXHRpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgbGluayk7XG5cblx0cmV0dXJuIGxpbms7XG59XG5cbmZ1bmN0aW9uIGFkZEF0dHJzIChlbCwgYXR0cnMpIHtcblx0T2JqZWN0LmtleXMoYXR0cnMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHRcdGVsLnNldEF0dHJpYnV0ZShrZXksIGF0dHJzW2tleV0pO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24gYWRkU3R5bGUgKG9iaiwgb3B0aW9ucykge1xuXHR2YXIgc3R5bGUsIHVwZGF0ZSwgcmVtb3ZlLCByZXN1bHQ7XG5cblx0Ly8gSWYgYSB0cmFuc2Zvcm0gZnVuY3Rpb24gd2FzIGRlZmluZWQsIHJ1biBpdCBvbiB0aGUgY3NzXG5cdGlmIChvcHRpb25zLnRyYW5zZm9ybSAmJiBvYmouY3NzKSB7XG5cdCAgICByZXN1bHQgPSBvcHRpb25zLnRyYW5zZm9ybShvYmouY3NzKTtcblxuXHQgICAgaWYgKHJlc3VsdCkge1xuXHQgICAgXHQvLyBJZiB0cmFuc2Zvcm0gcmV0dXJucyBhIHZhbHVlLCB1c2UgdGhhdCBpbnN0ZWFkIG9mIHRoZSBvcmlnaW5hbCBjc3MuXG5cdCAgICBcdC8vIFRoaXMgYWxsb3dzIHJ1bm5pbmcgcnVudGltZSB0cmFuc2Zvcm1hdGlvbnMgb24gdGhlIGNzcy5cblx0ICAgIFx0b2JqLmNzcyA9IHJlc3VsdDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICBcdC8vIElmIHRoZSB0cmFuc2Zvcm0gZnVuY3Rpb24gcmV0dXJucyBhIGZhbHN5IHZhbHVlLCBkb24ndCBhZGQgdGhpcyBjc3MuXG5cdCAgICBcdC8vIFRoaXMgYWxsb3dzIGNvbmRpdGlvbmFsIGxvYWRpbmcgb2YgY3NzXG5cdCAgICBcdHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgIFx0XHQvLyBub29wXG5cdCAgICBcdH07XG5cdCAgICB9XG5cdH1cblxuXHRpZiAob3B0aW9ucy5zaW5nbGV0b24pIHtcblx0XHR2YXIgc3R5bGVJbmRleCA9IHNpbmdsZXRvbkNvdW50ZXIrKztcblxuXHRcdHN0eWxlID0gc2luZ2xldG9uIHx8IChzaW5nbGV0b24gPSBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucykpO1xuXG5cdFx0dXBkYXRlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCBmYWxzZSk7XG5cdFx0cmVtb3ZlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCB0cnVlKTtcblxuXHR9IGVsc2UgaWYgKFxuXHRcdG9iai5zb3VyY2VNYXAgJiZcblx0XHR0eXBlb2YgVVJMID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgVVJMLmNyZWF0ZU9iamVjdFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIFVSTC5yZXZva2VPYmplY3RVUkwgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBCbG9iID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgYnRvYSA9PT0gXCJmdW5jdGlvblwiXG5cdCkge1xuXHRcdHN0eWxlID0gY3JlYXRlTGlua0VsZW1lbnQob3B0aW9ucyk7XG5cdFx0dXBkYXRlID0gdXBkYXRlTGluay5iaW5kKG51bGwsIHN0eWxlLCBvcHRpb25zKTtcblx0XHRyZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpO1xuXG5cdFx0XHRpZihzdHlsZS5ocmVmKSBVUkwucmV2b2tlT2JqZWN0VVJMKHN0eWxlLmhyZWYpO1xuXHRcdH07XG5cdH0gZWxzZSB7XG5cdFx0c3R5bGUgPSBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucyk7XG5cdFx0dXBkYXRlID0gYXBwbHlUb1RhZy5iaW5kKG51bGwsIHN0eWxlKTtcblx0XHRyZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpO1xuXHRcdH07XG5cdH1cblxuXHR1cGRhdGUob2JqKTtcblxuXHRyZXR1cm4gZnVuY3Rpb24gdXBkYXRlU3R5bGUgKG5ld09iaikge1xuXHRcdGlmIChuZXdPYmopIHtcblx0XHRcdGlmIChcblx0XHRcdFx0bmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJlxuXHRcdFx0XHRuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJlxuXHRcdFx0XHRuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwXG5cdFx0XHQpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHR1cGRhdGUob2JqID0gbmV3T2JqKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmVtb3ZlKCk7XG5cdFx0fVxuXHR9O1xufVxuXG52YXIgcmVwbGFjZVRleHQgPSAoZnVuY3Rpb24gKCkge1xuXHR2YXIgdGV4dFN0b3JlID0gW107XG5cblx0cmV0dXJuIGZ1bmN0aW9uIChpbmRleCwgcmVwbGFjZW1lbnQpIHtcblx0XHR0ZXh0U3RvcmVbaW5kZXhdID0gcmVwbGFjZW1lbnQ7XG5cblx0XHRyZXR1cm4gdGV4dFN0b3JlLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKTtcblx0fTtcbn0pKCk7XG5cbmZ1bmN0aW9uIGFwcGx5VG9TaW5nbGV0b25UYWcgKHN0eWxlLCBpbmRleCwgcmVtb3ZlLCBvYmopIHtcblx0dmFyIGNzcyA9IHJlbW92ZSA/IFwiXCIgOiBvYmouY3NzO1xuXG5cdGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG5cdFx0c3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gcmVwbGFjZVRleHQoaW5kZXgsIGNzcyk7XG5cdH0gZWxzZSB7XG5cdFx0dmFyIGNzc05vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpO1xuXHRcdHZhciBjaGlsZE5vZGVzID0gc3R5bGUuY2hpbGROb2RlcztcblxuXHRcdGlmIChjaGlsZE5vZGVzW2luZGV4XSkgc3R5bGUucmVtb3ZlQ2hpbGQoY2hpbGROb2Rlc1tpbmRleF0pO1xuXG5cdFx0aWYgKGNoaWxkTm9kZXMubGVuZ3RoKSB7XG5cdFx0XHRzdHlsZS5pbnNlcnRCZWZvcmUoY3NzTm9kZSwgY2hpbGROb2Rlc1tpbmRleF0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRzdHlsZS5hcHBlbmRDaGlsZChjc3NOb2RlKTtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gYXBwbHlUb1RhZyAoc3R5bGUsIG9iaikge1xuXHR2YXIgY3NzID0gb2JqLmNzcztcblx0dmFyIG1lZGlhID0gb2JqLm1lZGlhO1xuXG5cdGlmKG1lZGlhKSB7XG5cdFx0c3R5bGUuc2V0QXR0cmlidXRlKFwibWVkaWFcIiwgbWVkaWEpXG5cdH1cblxuXHRpZihzdHlsZS5zdHlsZVNoZWV0KSB7XG5cdFx0c3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuXHR9IGVsc2Uge1xuXHRcdHdoaWxlKHN0eWxlLmZpcnN0Q2hpbGQpIHtcblx0XHRcdHN0eWxlLnJlbW92ZUNoaWxkKHN0eWxlLmZpcnN0Q2hpbGQpO1xuXHRcdH1cblxuXHRcdHN0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUxpbmsgKGxpbmssIG9wdGlvbnMsIG9iaikge1xuXHR2YXIgY3NzID0gb2JqLmNzcztcblx0dmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XG5cblx0Lypcblx0XHRJZiBjb252ZXJ0VG9BYnNvbHV0ZVVybHMgaXNuJ3QgZGVmaW5lZCwgYnV0IHNvdXJjZW1hcHMgYXJlIGVuYWJsZWRcblx0XHRhbmQgdGhlcmUgaXMgbm8gcHVibGljUGF0aCBkZWZpbmVkIHRoZW4gbGV0cyB0dXJuIGNvbnZlcnRUb0Fic29sdXRlVXJsc1xuXHRcdG9uIGJ5IGRlZmF1bHQuICBPdGhlcndpc2UgZGVmYXVsdCB0byB0aGUgY29udmVydFRvQWJzb2x1dGVVcmxzIG9wdGlvblxuXHRcdGRpcmVjdGx5XG5cdCovXG5cdHZhciBhdXRvRml4VXJscyA9IG9wdGlvbnMuY29udmVydFRvQWJzb2x1dGVVcmxzID09PSB1bmRlZmluZWQgJiYgc291cmNlTWFwO1xuXG5cdGlmIChvcHRpb25zLmNvbnZlcnRUb0Fic29sdXRlVXJscyB8fCBhdXRvRml4VXJscykge1xuXHRcdGNzcyA9IGZpeFVybHMoY3NzKTtcblx0fVxuXG5cdGlmIChzb3VyY2VNYXApIHtcblx0XHQvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yNjYwMzg3NVxuXHRcdGNzcyArPSBcIlxcbi8qIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsXCIgKyBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpICsgXCIgKi9cIjtcblx0fVxuXG5cdHZhciBibG9iID0gbmV3IEJsb2IoW2Nzc10sIHsgdHlwZTogXCJ0ZXh0L2Nzc1wiIH0pO1xuXG5cdHZhciBvbGRTcmMgPSBsaW5rLmhyZWY7XG5cblx0bGluay5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcblxuXHRpZihvbGRTcmMpIFVSTC5yZXZva2VPYmplY3RVUkwob2xkU3JjKTtcbn1cbiIsIlxuLyoqXG4gKiBXaGVuIHNvdXJjZSBtYXBzIGFyZSBlbmFibGVkLCBgc3R5bGUtbG9hZGVyYCB1c2VzIGEgbGluayBlbGVtZW50IHdpdGggYSBkYXRhLXVyaSB0b1xuICogZW1iZWQgdGhlIGNzcyBvbiB0aGUgcGFnZS4gVGhpcyBicmVha3MgYWxsIHJlbGF0aXZlIHVybHMgYmVjYXVzZSBub3cgdGhleSBhcmUgcmVsYXRpdmUgdG8gYVxuICogYnVuZGxlIGluc3RlYWQgb2YgdGhlIGN1cnJlbnQgcGFnZS5cbiAqXG4gKiBPbmUgc29sdXRpb24gaXMgdG8gb25seSB1c2UgZnVsbCB1cmxzLCBidXQgdGhhdCBtYXkgYmUgaW1wb3NzaWJsZS5cbiAqXG4gKiBJbnN0ZWFkLCB0aGlzIGZ1bmN0aW9uIFwiZml4ZXNcIiB0aGUgcmVsYXRpdmUgdXJscyB0byBiZSBhYnNvbHV0ZSBhY2NvcmRpbmcgdG8gdGhlIGN1cnJlbnQgcGFnZSBsb2NhdGlvbi5cbiAqXG4gKiBBIHJ1ZGltZW50YXJ5IHRlc3Qgc3VpdGUgaXMgbG9jYXRlZCBhdCBgdGVzdC9maXhVcmxzLmpzYCBhbmQgY2FuIGJlIHJ1biB2aWEgdGhlIGBucG0gdGVzdGAgY29tbWFuZC5cbiAqXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY3NzKSB7XG4gIC8vIGdldCBjdXJyZW50IGxvY2F0aW9uXG4gIHZhciBsb2NhdGlvbiA9IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93LmxvY2F0aW9uO1xuXG4gIGlmICghbG9jYXRpb24pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJmaXhVcmxzIHJlcXVpcmVzIHdpbmRvdy5sb2NhdGlvblwiKTtcbiAgfVxuXG5cdC8vIGJsYW5rIG9yIG51bGw/XG5cdGlmICghY3NzIHx8IHR5cGVvZiBjc3MgIT09IFwic3RyaW5nXCIpIHtcblx0ICByZXR1cm4gY3NzO1xuICB9XG5cbiAgdmFyIGJhc2VVcmwgPSBsb2NhdGlvbi5wcm90b2NvbCArIFwiLy9cIiArIGxvY2F0aW9uLmhvc3Q7XG4gIHZhciBjdXJyZW50RGlyID0gYmFzZVVybCArIGxvY2F0aW9uLnBhdGhuYW1lLnJlcGxhY2UoL1xcL1teXFwvXSokLywgXCIvXCIpO1xuXG5cdC8vIGNvbnZlcnQgZWFjaCB1cmwoLi4uKVxuXHQvKlxuXHRUaGlzIHJlZ3VsYXIgZXhwcmVzc2lvbiBpcyBqdXN0IGEgd2F5IHRvIHJlY3Vyc2l2ZWx5IG1hdGNoIGJyYWNrZXRzIHdpdGhpblxuXHRhIHN0cmluZy5cblxuXHQgL3VybFxccypcXCggID0gTWF0Y2ggb24gdGhlIHdvcmQgXCJ1cmxcIiB3aXRoIGFueSB3aGl0ZXNwYWNlIGFmdGVyIGl0IGFuZCB0aGVuIGEgcGFyZW5zXG5cdCAgICggID0gU3RhcnQgYSBjYXB0dXJpbmcgZ3JvdXBcblx0ICAgICAoPzogID0gU3RhcnQgYSBub24tY2FwdHVyaW5nIGdyb3VwXG5cdCAgICAgICAgIFteKShdICA9IE1hdGNoIGFueXRoaW5nIHRoYXQgaXNuJ3QgYSBwYXJlbnRoZXNlc1xuXHQgICAgICAgICB8ICA9IE9SXG5cdCAgICAgICAgIFxcKCAgPSBNYXRjaCBhIHN0YXJ0IHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICAoPzogID0gU3RhcnQgYW5vdGhlciBub24tY2FwdHVyaW5nIGdyb3Vwc1xuXHQgICAgICAgICAgICAgICAgIFteKShdKyAgPSBNYXRjaCBhbnl0aGluZyB0aGF0IGlzbid0IGEgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICAgICB8ICA9IE9SXG5cdCAgICAgICAgICAgICAgICAgXFwoICA9IE1hdGNoIGEgc3RhcnQgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICAgICAgICAgW14pKF0qICA9IE1hdGNoIGFueXRoaW5nIHRoYXQgaXNuJ3QgYSBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgICAgIFxcKSAgPSBNYXRjaCBhIGVuZCBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgKSAgPSBFbmQgR3JvdXBcbiAgICAgICAgICAgICAgKlxcKSA9IE1hdGNoIGFueXRoaW5nIGFuZCB0aGVuIGEgY2xvc2UgcGFyZW5zXG4gICAgICAgICAgKSAgPSBDbG9zZSBub24tY2FwdHVyaW5nIGdyb3VwXG4gICAgICAgICAgKiAgPSBNYXRjaCBhbnl0aGluZ1xuICAgICAgICkgID0gQ2xvc2UgY2FwdHVyaW5nIGdyb3VwXG5cdCBcXCkgID0gTWF0Y2ggYSBjbG9zZSBwYXJlbnNcblxuXHQgL2dpICA9IEdldCBhbGwgbWF0Y2hlcywgbm90IHRoZSBmaXJzdC4gIEJlIGNhc2UgaW5zZW5zaXRpdmUuXG5cdCAqL1xuXHR2YXIgZml4ZWRDc3MgPSBjc3MucmVwbGFjZSgvdXJsXFxzKlxcKCgoPzpbXikoXXxcXCgoPzpbXikoXSt8XFwoW14pKF0qXFwpKSpcXCkpKilcXCkvZ2ksIGZ1bmN0aW9uKGZ1bGxNYXRjaCwgb3JpZ1VybCkge1xuXHRcdC8vIHN0cmlwIHF1b3RlcyAoaWYgdGhleSBleGlzdClcblx0XHR2YXIgdW5xdW90ZWRPcmlnVXJsID0gb3JpZ1VybFxuXHRcdFx0LnRyaW0oKVxuXHRcdFx0LnJlcGxhY2UoL15cIiguKilcIiQvLCBmdW5jdGlvbihvLCAkMSl7IHJldHVybiAkMTsgfSlcblx0XHRcdC5yZXBsYWNlKC9eJyguKiknJC8sIGZ1bmN0aW9uKG8sICQxKXsgcmV0dXJuICQxOyB9KTtcblxuXHRcdC8vIGFscmVhZHkgYSBmdWxsIHVybD8gbm8gY2hhbmdlXG5cdFx0aWYgKC9eKCN8ZGF0YTp8aHR0cDpcXC9cXC98aHR0cHM6XFwvXFwvfGZpbGU6XFwvXFwvXFwvfFxccyokKS9pLnRlc3QodW5xdW90ZWRPcmlnVXJsKSkge1xuXHRcdCAgcmV0dXJuIGZ1bGxNYXRjaDtcblx0XHR9XG5cblx0XHQvLyBjb252ZXJ0IHRoZSB1cmwgdG8gYSBmdWxsIHVybFxuXHRcdHZhciBuZXdVcmw7XG5cblx0XHRpZiAodW5xdW90ZWRPcmlnVXJsLmluZGV4T2YoXCIvL1wiKSA9PT0gMCkge1xuXHRcdCAgXHQvL1RPRE86IHNob3VsZCB3ZSBhZGQgcHJvdG9jb2w/XG5cdFx0XHRuZXdVcmwgPSB1bnF1b3RlZE9yaWdVcmw7XG5cdFx0fSBlbHNlIGlmICh1bnF1b3RlZE9yaWdVcmwuaW5kZXhPZihcIi9cIikgPT09IDApIHtcblx0XHRcdC8vIHBhdGggc2hvdWxkIGJlIHJlbGF0aXZlIHRvIHRoZSBiYXNlIHVybFxuXHRcdFx0bmV3VXJsID0gYmFzZVVybCArIHVucXVvdGVkT3JpZ1VybDsgLy8gYWxyZWFkeSBzdGFydHMgd2l0aCAnLydcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gcGF0aCBzaG91bGQgYmUgcmVsYXRpdmUgdG8gY3VycmVudCBkaXJlY3Rvcnlcblx0XHRcdG5ld1VybCA9IGN1cnJlbnREaXIgKyB1bnF1b3RlZE9yaWdVcmwucmVwbGFjZSgvXlxcLlxcLy8sIFwiXCIpOyAvLyBTdHJpcCBsZWFkaW5nICcuLydcblx0XHR9XG5cblx0XHQvLyBzZW5kIGJhY2sgdGhlIGZpeGVkIHVybCguLi4pXG5cdFx0cmV0dXJuIFwidXJsKFwiICsgSlNPTi5zdHJpbmdpZnkobmV3VXJsKSArIFwiKVwiO1xuXHR9KTtcblxuXHQvLyBzZW5kIGJhY2sgdGhlIGZpeGVkIGNzc1xuXHRyZXR1cm4gZml4ZWRDc3M7XG59O1xuIiwiLyplc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtbGV0cyovXHJcbi8qZ2xvYmFsIHdpbmRvdywgZDMsICQqL1xyXG5pbXBvcnQge1xyXG4gICAgZGF0YXNldE1ldGFkYXRhLFxyXG4gICAgc3dhcm1EYXRhLFxyXG4gICAgYW5pbWFsSWRzXHJcbn0gZnJvbSAnLi4vZXhwbG9yZS5qcyc7XHJcblxyXG5pbXBvcnQgKiBhcyBTUFYgZnJvbSAnLi9zcGF0aWFsX3ZpZXcuanMnO1xyXG5cclxuaW1wb3J0ICogYXMgTmV0d29yayBmcm9tICcuLi9uZXR3b3JrLmpzJztcclxuXHJcbmV4cG9ydCBsZXQgc2xpZGVyOyAvLyB0aW1lIHNsaWRlciBvZiB0aGUgYXBwXHJcbmV4cG9ydCBsZXQgdG9vbHRpcDsgLy8gdG9vbHRpcCBmdW5jdGlvblxyXG5cclxuLyoqXHJcbiAqIEJydXNoIGVuZCBmdW5jdGlvblxyXG4gKiBhZGQgYWN0aXZlIGFuaW1hbHMgdG8gdGhlIGFycmF5IG9yIHJlbW92ZSB0aGVtXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gYnJ1c2hlbmQoKSB7XHJcbiAgICBsZXQgYXJyYXlBbmltYWxzID0gU1BWLmFycmF5QW5pbWFscztcclxuICAgIGxldCBhY3RpdmVBbmltYWxzID0gU1BWLmFjdGl2ZUFuaW1hbHM7XHJcbiAgICB2YXIgcmVjdCA9IGQzLmV2ZW50LnNlbGVjdGlvbjtcclxuICAgIC8vaXRlcmF0ZSBvdmVyIHRoZSAxNTEgZmlzaCB0byBjaGVjayB3aGljaCBhcmUgaW4gdGhlIGJydXNoXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFuaW1hbElkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHZhciBwb2ludCA9IFthcnJheUFuaW1hbHNbaV1bJ3AnXVswXSwgYXJyYXlBbmltYWxzW2ldWydwJ11bMV1dO1xyXG4gICAgICAgIC8vY2hlY2sgd2hpY2ggZmlzaCBhcmUgaW4gIHRoZSBicnVzaGVkIGFyZWFcclxuICAgICAgICBpZiAoKHJlY3RbMF1bMF0gPD0gcG9pbnRbMF0pICYmIChwb2ludFswXSA8PSByZWN0WzFdWzBdKSAmJlxyXG4gICAgICAgICAgICAocmVjdFswXVsxXSA8PSBwb2ludFsxXSkgJiYgKHBvaW50WzFdIDw9IHJlY3RbMV1bMV0pKSB7XHJcbiAgICAgICAgICAgIC8vIFBvaW50IGlzIGluIHRoZSBicnVzaFxyXG4gICAgICAgICAgICBhY3RpdmVBbmltYWxzLnB1c2goYXJyYXlBbmltYWxzW2ldWydhJ10pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFNQVi5zZXRBY3RpdmVBbmltYWxzKGFjdGl2ZUFuaW1hbHMpO1xyXG4gICAgaWYgKCEkKCcjcGxheS1idXR0b24nKVxyXG4gICAgICAgIC5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuICAgICAgICBTUFYuZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgU1BWLmRyYXcoKTtcclxuICAgIH1cclxuICAgICQoJyNicnVzaGluZy1idXR0b24nKVxyXG4gICAgICAgIC5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAvLyByZW1vdmUgdGhlIGJydXNoXHJcbiAgICAkKCcuYnJ1c2gnKVxyXG4gICAgICAgIC5yZW1vdmUoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEluaXRpYWxpemUgdGhlIHRvb2x0aXBcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpbml0VG9vbHRpcCgpIHtcclxuICAgIHRvb2x0aXAgPSBkMy5zZWxlY3QoJ2Rpdi50b29sdGlwJylcclxuICAgICAgICAuc3R5bGUoJ2xlZnQnLCAwICsgJ3B4JylcclxuICAgICAgICAuc3R5bGUoJ3RvcCcsIDAgKyAncHgnKVxyXG4gICAgICAgIC5vbignbW91c2VvdmVyJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHRvb2x0aXBcclxuICAgICAgICAgICAgICAgIC5zdHlsZSgnb3BhY2l0eScsIDEpO1xyXG4gICAgICAgIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogVG9vbHRpcCBmdW5jdGlvblxyXG4gKiBAcGFyYW0ge09iamVjdH0gZCAtIGQzIGRhdGEgb2JqZWN0IHdpdGggdGhlIG1ldGFkYXRhIGluZm9ybWF0aW9uXHJcbiAqXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gdG9vbHRpcEZ1bmN0aW9uKGQpIHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YXNldE1ldGFkYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGRbJ2EnXSA9PT0gZGF0YXNldE1ldGFkYXRhW2ldWydhbmltYWxfaWQnXSkge1xyXG4gICAgICAgICAgICB0b29sdGlwXHJcbiAgICAgICAgICAgICAgICAuc3R5bGUoJ2xlZnQnLCAoZDMuZXZlbnQucGFnZVggKyA1KSArICdweCcpXHJcbiAgICAgICAgICAgICAgICAuc3R5bGUoJ3RvcCcsIChkMy5ldmVudC5wYWdlWSAtIDEwMCkgKyAncHgnKVxyXG4gICAgICAgICAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgMSk7XHJcbiAgICAgICAgICAgIC8vIHNldCB0aGUgdmFsdWVzXHJcbiAgICAgICAgICAgIC8vIFRPRE8gbWFrZSB0aGlzIG1vZHVsYXJcclxuICAgICAgICAgICAgdG9vbHRpcC5zZWxlY3QoJyN0b29sdGlwLWFuaW1hbC1pZCcpXHJcbiAgICAgICAgICAgICAgICAuaHRtbChkYXRhc2V0TWV0YWRhdGFbaV1bJ2FuaW1hbF9pZCddKTtcclxuICAgICAgICAgICAgdG9vbHRpcC5zZWxlY3QoJyN0b29sdGlwLXNwZWNpZXMnKVxyXG4gICAgICAgICAgICAgICAgLmh0bWwoZGF0YXNldE1ldGFkYXRhW2ldWydzcGVjaWVzJ10pO1xyXG4gICAgICAgICAgICB0b29sdGlwLnNlbGVjdCgnI3Rvb2x0aXAtc2V4JylcclxuICAgICAgICAgICAgICAgIC5odG1sKGRhdGFzZXRNZXRhZGF0YVtpXVsnc2V4J10pO1xyXG4gICAgICAgICAgICB0b29sdGlwLnNlbGVjdCgnI3Rvb2x0aXAtc2l6ZScpXHJcbiAgICAgICAgICAgICAgICAuaHRtbChkYXRhc2V0TWV0YWRhdGFbaV1bJ3NpemUnXSk7XHJcbiAgICAgICAgICAgIHRvb2x0aXAuc2VsZWN0KCcjdG9vbHRpcC13ZWlnaHQnKVxyXG4gICAgICAgICAgICAgICAgLmh0bWwoZGF0YXNldE1ldGFkYXRhW2ldWyd3ZWlnaHQnXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufVxyXG5cclxuLyoqXHJcbiAqIEluaXRpYWxpemUgdGhlIHRpbWUgc2xpZGVyIGFuZCB0aGUgZHluYW1pYyBuZXR3b3JrIHNsaWRlclxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGluaXRTbGlkZXJzKCkge1xyXG4gICAgLy8gdGltZSBzbGlkZXJcclxuICAgIHNsaWRlciA9ICQoJyNzbGlkZXInKVxyXG4gICAgICAgIC5zbGlkZXIoe1xyXG4gICAgICAgICAgICBtaW46IDAsXHJcbiAgICAgICAgICAgIG1heDogc3dhcm1EYXRhLmxlbmd0aCxcclxuICAgICAgICAgICAgc3RlcDogMjUsXHJcbiAgICAgICAgICAgIHNsaWRlOiBmdW5jdGlvbihldmVudCwgdWkpIHtcclxuICAgICAgICAgICAgICAgIFNQVi5zZXRJbmRleFRpbWUodWkudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgLy8gaWYgcGF1c2VkIGFwcGx5IGNoYW5nZXNcclxuICAgICAgICAgICAgICAgIGlmICghJCgnI3BsYXktYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgICAgICAgIFNQVi5kcmF3KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIC8vIGluaXRpYWxpemUgdGhlIE5ldHdvcmsgc2xpZGVyXHJcbiAgICAkKCcjbmV0d29yay1zbGlkZXInKVxyXG4gICAgICAgIC5zbGlkZXIoe1xyXG4gICAgICAgICAgICByYW5nZTogJ21heCcsXHJcbiAgICAgICAgICAgIG1pbjogMCxcclxuICAgICAgICAgICAgbWF4OiAxLFxyXG4gICAgICAgICAgICBzdGVwOiAwLjAxLFxyXG4gICAgICAgICAgICB2YWx1ZTogMC41LFxyXG4gICAgICAgICAgICBzbGlkZTogZnVuY3Rpb24oZXZlbnQsIHVpKSB7XHJcbiAgICAgICAgICAgICAgICBOZXR3b3JrLnNldE5ldHdvckxpbWl0KHVpLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICQoJyNuZXR3b3JrLWxpbWl0JykudmFsKHVpLnZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgLy8gc2V0IHRleHQgZm9yIHRoZSBmaXJzdCBpbml0aWFsaXphdGlvblxyXG4gICAgJCgnI25ldHdvcmstbGltaXQnKS52YWwoMC41KTtcclxuXHJcbiAgICAvLyBnZXQgdGhlIG1heCBmcm9tIHRoZSBzbGlkZXIgdGhpcyBpcyBuZWVkZWQgdG8gY2FsY3VsYXRlIHRoZSB0aWNrc1xyXG4gICAgbGV0IG1heCA9IHNsaWRlci5zbGlkZXIoJ29wdGlvbicsICdtYXgnKTtcclxuICAgIGxldCBzcGFjZSA9IDEwMCAvIG1heDtcclxuICAgIC8vYXBwZW5kIHRoZSBtaW51dGUgdGlja3NcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWF4OyBpID0gaSArIDE1MDApIHtcclxuICAgICAgICAkKCc8c3BhbiBjbGFzcz1cInVpLXNsaWRlci10aWNrXCI+PC9zcGFuPicpXHJcbiAgICAgICAgICAgIC5jc3MoJ2xlZnQnLCAoc3BhY2UgKiBpKSArICclJylcclxuICAgICAgICAgICAgLmFwcGVuZFRvKHNsaWRlcik7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgIFNldHRlclxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbi8qKlxyXG4gKiBTZXQgdGhlIHRpbWUgc2xpZGVyIHRvIGEgbmV3IHZhbHVlXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSB2YWx1ZSAtIG5ldyB2YWx1ZSBmb3IgdGhlIHRpbWUgc2xpZGVyXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2V0VGltZVNsaWRlcih2YWx1ZSkge1xyXG4gICAgc2xpZGVyLnNsaWRlcigndmFsdWUnLCB2YWx1ZSk7XHJcbn0iLCIvKmVzbGludC1kaXNhYmxlIG5vLXVudXNlZC1sZXRzKi9cclxuLypnbG9iYWwgd2luZG93LCBkMywgJCwgY29sb3JicmV3ZXIqL1xyXG5pbXBvcnQgKiBhcyBTUFYgZnJvbSAnLi9zcGF0aWFsX3ZpZXcuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGNoYW5nZUxlZ2VuZFxyXG59IGZyb20gJy4vbGVnZW5kLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBkYXRhU2V0UGVyY2VudGlsZVxyXG59IGZyb20gJy4uL2V4cGxvcmUuanMnO1xyXG5cclxuZXhwb3J0IGxldCBjb2xvclNjYWxlID0ge1xyXG4gICAgdHlwZTogJ0xpbmVhcicsXHJcbiAgICBjb2xvcjogY29sb3JicmV3ZXIuQnVZbEJ1XHJcbn07XHJcblxyXG4vKipcclxuICogUmV0dXJucyB0aGUgY29sb3Igc2NhbGVcclxuICogQHJldHVybiB7Y29sb3JTY2FsZX0gYWN0aXZlIGNvbG9yIHNjYWxlIGlzIGluIGxpbmVhciBvciB0aHJlc2hvbGRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiByZXR1cm5Db2xvclNjYWxlKCkge1xyXG4gICAgLy9pZiBsaW5lYXIgaXMgY2hvb3NlblxyXG4gICAgaWYgKGNvbG9yU2NhbGVbJ3R5cGUnXSA9PT0gJ0xpbmVhcicpIHtcclxuICAgICAgICByZXR1cm4gZDMuc2NhbGVMaW5lYXIoKVxyXG4gICAgICAgICAgICAuZG9tYWluKFxyXG4gICAgICAgICAgICAgICAgZGF0YVNldFBlcmNlbnRpbGVbU1BWLmFjdGl2ZVNjYWxlXVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIC5yYW5nZShjb2xvclNjYWxlWydjb2xvciddKTtcclxuICAgIH0gLy9UaHJlc2hvbGQgY29sb3Igc2NhbGVcclxuICAgIGVsc2UgaWYgKGNvbG9yU2NhbGVbJ3R5cGUnXSA9PT0gJ1RocmVzaG9sZCcpIHtcclxuICAgICAgICByZXR1cm4gZDMuc2NhbGVUaHJlc2hvbGQoKVxyXG4gICAgICAgICAgICAuZG9tYWluKFxyXG4gICAgICAgICAgICAgICAgZGF0YVNldFBlcmNlbnRpbGVbU1BWLmFjdGl2ZVNjYWxlXVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIC5yYW5nZShjb2xvclNjYWxlWydjb2xvciddKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEluaXRpYWxpemUgdGhlIGNvbG9yIHBpY2tlclxyXG4gKiB3aXRoIGFsbCBsaXN0ZW5lcnMgaW5jbHVkZWRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpbml0Q29sb3JQaWNrZXIoKSB7XHJcbiAgICBkMy5zZWxlY3QoJy5jb2xvcnMtYm9keScpXHJcbiAgICAgICAgLnNlbGVjdEFsbCgnLnBhbGV0dGUnKVxyXG4gICAgICAgIC5kYXRhKGQzLmVudHJpZXMoY29sb3JicmV3ZXIpKVxyXG4gICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgLmFwcGVuZCgnc3BhbicpXHJcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3BhbGV0dGUnKVxyXG4gICAgICAgIC5hdHRyKCd0aXRsZScsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGQua2V5O1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgLy8gaGlnaHRsaWdodCB0aGUgcmlnaHQgcGFsZXR0ZVxyXG4gICAgICAgICAgICAkKCcucGFsZXR0ZScpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAkKCcucGFsZXR0ZVt0aXRsZT1cIicgKyBkLmtleSArICdcIl0nKS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgY29sb3JTY2FsZS5jb2xvciA9IGNvbG9yYnJld2VyW2Qua2V5XTtcclxuICAgICAgICAgICAgY2hhbmdlTGVnZW5kKCk7XHJcbiAgICAgICAgICAgIGlmICghJCgnI3BsYXktYnV0dG9uJylcclxuICAgICAgICAgICAgICAgIC5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAgIC8vZ28gYmFjayBvbmUgc2Vjb25kIGFuZCBkcmF3IHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAgICAgICAgICAvL3RoaXMgYXBwbHlzIHRoZSBjaGFuZ2VzXHJcbiAgICAgICAgICAgICAgICBTUFYuZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgICAgICAgICBTUFYuZHJhdygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuc2VsZWN0QWxsKCcuc3dhdGNoJylcclxuICAgICAgICAuZGF0YShmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkLnZhbHVlO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmVudGVyKClcclxuICAgICAgICAuYXBwZW5kKCdzcGFuJylcclxuICAgICAgICAuYXR0cignY2xhc3MnLCAnc3dhdGNoJylcclxuICAgICAgICAuc3R5bGUoJ2JhY2tncm91bmQtY29sb3InLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIC8vIGhpZ2hsaWdodCB0aGUgc2VsZWN0ZWQgY29sb3Igc2NoZW1lXHJcbiAgICAkKCcucGFsZXR0ZVt0aXRsZT1cIkJ1WWxCdVwiXScpLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xyXG59XHJcbiIsIi8qZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLWxldHMqL1xyXG4vKmdsb2JhbCB3aW5kb3csIGQzLCAkKi9cclxuXHJcbmltcG9ydCB7XHJcbiAgICBhY3RpdmVTY2FsZVxyXG59IGZyb20gJy4vc3BhdGlhbF92aWV3LmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICByZXR1cm5Db2xvclNjYWxlXHJcbn0gZnJvbSAnLi9jb2xvcl9waWNrZXIuanMnO1xyXG5cclxubGV0IHN2Z0xlZ2VuZDsgLy8gc3ZnIGNvbnRhaW5lciBmb3IgdGhlIGxlZ2VuZFxyXG5cclxuLyoqXHJcbiAqIEFkZCB0aGUgZ3JvdXAgdG8gdGhlIHN2ZyB3aGVyZSB0aGUgbGVnZW5kIGZvciB0aGUgY29sb3IgbGVnZW5kIGlzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gYWRkU3BhdGlhbFZpZXdHcm91cCgpIHtcclxuICAgIGxldCBsZWdlbmRXaWR0aCA9IDU1MDtcclxuICAgIGxldCBsZWdlbmRIZWlnaHQgPSA2MDtcclxuXHJcbiAgICBzdmdMZWdlbmQgPSBkMy5zZWxlY3QoJyNtYWluLXZpcy1sZWdlbmQtZGl2JylcclxuICAgICAgICAuYXBwZW5kKCdzdmcnKVxyXG4gICAgICAgIC5hdHRyKCdpZCcsICdtYWluLXZpcy1sZWdlbmQnKVxyXG4gICAgICAgIC5hdHRyKCd3aWR0aCcsIGxlZ2VuZFdpZHRoKVxyXG4gICAgICAgIC5hdHRyKCdoZWlnaHQnLCBsZWdlbmRIZWlnaHQpO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hhbmdlIHRoZSBjb2xvciBsZWdlbmRcclxuICpcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjaGFuZ2VMZWdlbmQoKSB7XHJcbiAgICBsZXQgbGVnZW5kOyAvLyB0aGUgY29sb3IgbGVnZW5kXHJcbiAgICBsZXQgbGVnZW5kVGV4dDsgLy8gY29sb3IgbGVnZW5kIHRleHRcclxuICAgIC8vIHZhcnMgZm9yIHRoZSBsZWdlbmRcclxuICAgIGxldCBsZWdlbmRTd2F0Y2hXaWR0aCA9IDUwO1xyXG4gICAgbGV0IGxlZ2VuZFN3YXRjaEhlaWdodCA9IDIwO1xyXG4gICAgLy8gbGV0IGRpZmZlcmVudENvbG9ycyA9IDA7XHJcblxyXG4gICAgLy8gU2hvdyB0aGUgc3ZnIGZpcnN0IG9mIGFsbFxyXG4gICAgJCgnI21haW4tdmlzLWxlZ2VuZC1kaXYnKVxyXG4gICAgICAgIC5zaG93KCk7XHJcblxyXG4gICAgLy9jaGFuZ2UgdGhlIGNvbG9ycyBvZiB0aGUgYW5pbWFsc1xyXG4gICAgaWYgKGFjdGl2ZVNjYWxlICE9PSAnYmxhY2snKSB7XHJcbiAgICAgICAgdmFyIHRtcFNjYWxlID0gcmV0dXJuQ29sb3JTY2FsZSgpO1xyXG4gICAgICAgIC8vIG9uY2UgdGhlIGZpbGwgZm9yIHRoZSBoZWFkcyBhbmQgdGhlIHN0cm9rZSBmb3IgdGhlIHBhdGhcclxuICAgICAgICBsZWdlbmQgPSBzdmdMZWdlbmQuc2VsZWN0QWxsKCdyZWN0LmxlZ2VuZCcpXHJcbiAgICAgICAgICAgIC5kYXRhKHRtcFNjYWxlLnJhbmdlKCkpO1xyXG5cclxuICAgICAgICBsZWdlbmRUZXh0ID0gc3ZnTGVnZW5kLnNlbGVjdEFsbCgndGV4dC5sZWdlbmQtdGV4dCcpXHJcbiAgICAgICAgICAgIC5kYXRhKHRtcFNjYWxlLmRvbWFpbigpKTtcclxuICAgICAgICAvLyBkaWZmZXJlbnRDb2xvcnMgPSB0bXBTY2FsZS5yYW5nZSgpXHJcbiAgICAgICAgLy8gLmxlbmd0aDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbGVnZW5kID0gc3ZnTGVnZW5kLnNlbGVjdEFsbCgncmVjdC5sZWdlbmQnKVxyXG4gICAgICAgICAgICAuZGF0YShbXSk7XHJcbiAgICAgICAgbGVnZW5kVGV4dCA9IHN2Z0xlZ2VuZC5zZWxlY3RBbGwoJ3RleHQubGVnZW5kLXRleHQnKVxyXG4gICAgICAgICAgICAuZGF0YShbXSk7XHJcbiAgICAgICAgLy8gaGlkZSB0aGUgZGl2IGFnYWluXHJcbiAgICAgICAgJCgnI21haW4tdmlzLWxlZ2VuZC1kaXYnKVxyXG4gICAgICAgICAgICAuaGlkZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLSBMZWdlbmQgc3dhdGNoZXMgIC0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIFVQREFURSAtIGxlZ2VuZFxyXG4gICAgbGVnZW5kLnN0eWxlKCdmaWxsJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgIHJldHVybiBkO1xyXG4gICAgfSk7XHJcbiAgICAvLyBFTlRFUiAtIGxlZ2VuZFxyXG4gICAgbGVnZW5kXHJcbiAgICAgICAgLmVudGVyKClcclxuICAgICAgICAuYXBwZW5kKCdyZWN0JylcclxuICAgICAgICAuYXR0cignY2xhc3MnLCAnbGVnZW5kJylcclxuICAgICAgICAuYXR0cignd2lkdGgnLCBsZWdlbmRTd2F0Y2hXaWR0aClcclxuICAgICAgICAuYXR0cignaGVpZ2h0JywgbGVnZW5kU3dhdGNoSGVpZ2h0KVxyXG4gICAgICAgIC5hdHRyKCd5JywgMClcclxuICAgICAgICAuYXR0cigneCcsIGZ1bmN0aW9uKGQsIGkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChsZWdlbmRTd2F0Y2hXaWR0aCArIGkgKiBsZWdlbmRTd2F0Y2hXaWR0aCkgKyAncHgnO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnN0eWxlKCdmaWxsJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgICB9KTtcclxuICAgIC8vIEVYSVQgLSBsZWdlbmRcclxuICAgIGxlZ2VuZC5leGl0KClcclxuICAgICAgICAucmVtb3ZlKCk7XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tIFRleHQgIC0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIFVQREFURSAtIGxlZ2VuZCB0ZXh0XHJcbiAgICBsZWdlbmRUZXh0LnRleHQoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgIHJldHVybiBNYXRoLmNlaWwoZCAqIDIpIC8gMjtcclxuICAgIH0pO1xyXG4gICAgLy8gRU5URVIgLSBsZWdlbmQgdGV4dFxyXG4gICAgbGVnZW5kVGV4dFxyXG4gICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgLmFwcGVuZCgndGV4dCcpXHJcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xlZ2VuZC10ZXh0JylcclxuICAgICAgICAuYXR0cigneScsIDIgKiBsZWdlbmRTd2F0Y2hIZWlnaHQpXHJcbiAgICAgICAgLmF0dHIoJ3gnLCBmdW5jdGlvbihkLCBpKSB7XHJcbiAgICAgICAgICAgIC8vIHBsdXMgNSBoYXMgdG8gYmUgY2hhbmdlZFxyXG4gICAgICAgICAgICByZXR1cm4gKGxlZ2VuZFN3YXRjaFdpZHRoICsgaSAqIGxlZ2VuZFN3YXRjaFdpZHRoICsgNSkgKyAncHgnO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRleHQoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5jZWlsKGQgKiAyKSAvIDI7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgLy8gRVhJVCAtIGxlZ2VuZCB0ZXh0XHJcbiAgICBsZWdlbmRUZXh0LmV4aXQoKVxyXG4gICAgICAgIC5yZW1vdmUoKTtcclxufSIsIi8qZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLWxldHMqL1xyXG4vKmdsb2JhbCB3aW5kb3csICQsICovXHJcbi8vIGltcG9ydCAqIGFzIHNwdiBmcm9tICcuL3NwYXRpYWxfdmlldy5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgZGF0YXNldE1ldGFkYXRhXHJcbn0gZnJvbSAnLi9leHBsb3JlLmpzJztcclxuXHJcblxyXG5leHBvcnQgbGV0IG1ldGFkYXRhQ29sb3IgPSB7fTsgLy8gc2F2ZSB0aGUgbWV0YWRhdGEgY29sb3JpbmdcclxuXHJcbi8qKlxyXG4gKiBJbml0IE1ldGFkYXRhIGJ1dHRvbnMgXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZU1ldGFkZGF0YSgpIHtcclxuICAgIGxldCBjb2xvcnMgPSBbJyNmZmYnLCAnI2U0MWExYycsICcjMzc3ZWI4JywgJyM0ZGFmNGEnLCAnIzk4NGVhMycsICcjZmY3ZjAwJywgJyNmZmZmMzMnLCAnI2E2NTYyOCddO1xyXG4gICAgLy8gYWRkIHRoZSBkYXRhIHRvIHRoZSBtZXRhZGF0YSBtb2RhbFxyXG4gICAgaWYgKGRhdGFzZXRNZXRhZGF0YS5sZW5ndGgpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGFzZXRNZXRhZGF0YS5sZW5ndGg7IGkrKykge1xyXG5cclxuICAgICAgICAgICAgJCgnI21ldGFkYXRhLXRhYmxlJykuZmluZCgndGJvZHknKVxyXG4gICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8dHIgaWQ9XCJtZXRhZGF0YS1yb3ctJyArIGRhdGFzZXRNZXRhZGF0YVtpXVsnYW5pbWFsX2lkJ10gKyAnXCI+JylcclxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzx0ZD4nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGRhdGFzZXRNZXRhZGF0YVtpXVsnYW5pbWFsX2lkJ10pKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPHRkPicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoZGF0YXNldE1ldGFkYXRhW2ldWydzcGVjaWVzJ10pKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPHRkPicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoZGF0YXNldE1ldGFkYXRhW2ldWydzZXgnXSkpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8dGQ+JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChkYXRhc2V0TWV0YWRhdGFbaV1bJ3NpemUnXSkpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8dGQ+JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChkYXRhc2V0TWV0YWRhdGFbaV1bJ3dlaWdodCddKSlcclxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzx0ZD4nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGA8ZGl2IGNsYXNzPVwiZHJvcGRvd25cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPVwiZHJvcGRvd24tdG9nZ2xlIGJ0biBidG4tZGVmYXVsdCBidG4tY29sb3JcIiBkYXRhLXRvZ2dsZT1cImRyb3Bkb3duXCIgaHJlZj1cIiNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJwcmV2aWV3XCIgY2xhc3M9XCJtZXRhZGF0YS1zd2F0Y2hcIiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6I2ZmZlwiPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVwiY29sb3ItZmllbGRcIiB2YWx1ZT1cIldoaXRlXCIgc3R5bGU9XCJkaXNwbGF5Om5vbmU7XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9XCJkcm9wZG93bi1tZW51XCIgcm9sZT1cIm1lbnVcIiBhcmlhLWxhYmVsbGVkYnk9XCJkTGFiZWxcIj4gYCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZXN1bHRTdHJpbmcgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbG9ycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRTdHJpbmcgKz0gJzxkaXYgY2xhc3M9XCJtZXRhZGF0YS1zd2F0Y2ggbWV0YWRhdGEtc3dhdGNoLWNsaWNrYWJsZVwiIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjonICsgY29sb3JzW2ldICsgJ1wiIHZhbHVlPVwiJyArIGlkICsgJ1wiPjwvZGl2Pic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRTdHJpbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KGRhdGFzZXRNZXRhZGF0YVtpXVsnYW5pbWFsX2lkJ10pICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8L3VsPjwvZGl2PicpXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgICQoJyNtZXRhZGF0YS10YWJsZScpLmZpbmQoJ3Rib2R5JylcclxuICAgICAgICAgICAgLmFwcGVuZCgnVGhlcmUgaXMgbm8gbWV0YWRhdGEgZm9yIHRoaXMgZGF0YXNldCcpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuLyoqXHJcbiAqIFNpemUgYW5kIHdlaWdodCBjb2xvcmluZyBmb3IgdGhlIG1ldGFkYXRhXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY29sb3JNZXRhZGF0YSgpIHtcclxuICAgIHJlc2V0SW5kaXZpZHVhbE1ldGFkYXRhKCk7XHJcbiAgICAvLyBnZXQgdGhlIGlucHV0IHZhbHVlc1xyXG4gICAgbGV0IHZhbHVlID0gJCgnI2dyb3VwLW1ldGFkYXRhIC5idG4uYnRuLWRlZmF1bHQuYWN0aXZlIGlucHV0JylcclxuICAgICAgICAuYXR0cigndmFsdWUnKTtcclxuICAgIGxldCBibEF2ZyA9ICQoJyNibC1hdmcnKS52YWwoKTtcclxuICAgIGxldCBhYkF2ZyA9ICQoJyNhYi1hdmcnKS52YWwoKTtcclxuICAgIC8vIGNvbG9yIHNjaGVtZSBmb3IgdGhlIGlucHV0c1xyXG4gICAgbGV0IGNvbG9ycyA9IFsnIzdmYzk3ZicsICcjZmRjMDg2JywgJyMzODZjYjAnXTtcclxuICAgIC8vIGNvbG9yIHRoZSBhbmltYWxzXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGFzZXRNZXRhZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmIChkYXRhc2V0TWV0YWRhdGFbaV1bdmFsdWVdIDwgYmxBdmcpIHtcclxuICAgICAgICAgICAgbWV0YWRhdGFDb2xvcltkYXRhc2V0TWV0YWRhdGFbaV1bJ2FuaW1hbF9pZCddXSA9IGNvbG9yc1swXTtcclxuICAgICAgICB9IGVsc2UgaWYgKGRhdGFzZXRNZXRhZGF0YVtpXVt2YWx1ZV0gPiBhYkF2Zykge1xyXG4gICAgICAgICAgICBtZXRhZGF0YUNvbG9yW2RhdGFzZXRNZXRhZGF0YVtpXVsnYW5pbWFsX2lkJ11dID0gY29sb3JzWzJdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG1ldGFkYXRhQ29sb3JbZGF0YXNldE1ldGFkYXRhW2ldWydhbmltYWxfaWQnXV0gPSBjb2xvcnNbMV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIE1ldGFkYXRhIHJlc2V0IGFsbCBpbmRpdmlkdWFsIG1ldGFkYXRhIGlucHV0IGZpZWxkc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0SW5kaXZpZHVhbE1ldGFkYXRhKCkge1xyXG4gICAgbWV0YWRhdGFDb2xvciA9IHt9O1xyXG4gICAgJCgnLmRyb3Bkb3duICNwcmV2aWV3JylcclxuICAgICAgICAuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgJ3JnYigyNTUsIDI1NSwgMjU1KScpO1xyXG59XHJcbiIsIi8qZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLWxldHMqL1xyXG4vKmdsb2JhbCB3aW5kb3csIGQzLCAkLCBTZXQqL1xyXG5cclxuaW1wb3J0ICogYXMgU1BWIGZyb20gJy4vc3BhdGlhbF92aWV3L3NwYXRpYWxfdmlldy5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgZGlzYWJsZVBsYXlCdXR0b25cclxufSBmcm9tICcuL2hlbHBlcnMuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGJydXNoZW5kLFxyXG4gICAgc2xpZGVyXHJcbn0gZnJvbSAnLi9zcGF0aWFsX3ZpZXcvaW50ZXJhY3Rpb24uanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGNoYW5nZUxlZ2VuZCxcclxufSBmcm9tICcuL3NwYXRpYWxfdmlldy9sZWdlbmQuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIG1ldGFkYXRhQ29sb3IsXHJcbiAgICByZXNldEluZGl2aWR1YWxNZXRhZGF0YSxcclxuICAgIGNvbG9yTWV0YWRhdGFcclxufSBmcm9tICcuL21ldGFkYXRhLmpzJztcclxuXHJcblxyXG5pbXBvcnQge1xyXG4gICAgc2V0TmV0d29ya0F1dG8sXHJcbiAgICBzZXROZXR3b3JMaW1pdCxcclxuICAgIHNldE5ldHdvcmtIaWVyYXJjaHksXHJcbiAgICBzZXRuZXR3b3JrQ29sb3IsXHJcbiAgICBzZXROZXR3b3JrSUQsXHJcbiAgICBzZXROZXR3b3JrQmFja2dyb3VuZCxcclxuICAgIHNldE5ldHdvcmtCYWNrZ3JvdW5kTGltaXRcclxufSBmcm9tICcuL25ldHdvcmsuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGRhdGFzZXQsXHJcbiAgICBzd2FybURhdGEsXHJcbiAgICBkYXRhc2V0TWV0YWRhdGEsXHJcbiAgICBzZXROZXR3b3JrRGF0YSxcclxuICAgIHNldEhpZXJhcmNoeURhdGFcclxufSBmcm9tICcuL2V4cGxvcmUuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGdldERhdGFzZXRGZWF0dXJlLFxyXG4gICAgZ2V0TmV0d29ya0RhdGEsXHJcbiAgICBnZXRTd2FybURhdGFzZXRGZWF0dXJlLFxyXG4gICAgZ2V0TmV0d29ya0hpZXJhcmNoeURhdGFcclxufSBmcm9tICcuL2FqYXhfcXVlcmllcy5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgY29sb3JTY2FsZVxyXG59IGZyb20gJy4vc3BhdGlhbF92aWV3L2NvbG9yX3BpY2tlcic7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgYWRkSGllcmFyY2h5QnV0dG9uLFxyXG4gICAgcmVtb3ZlSGllcmFyY2h5QnV0dG9uLFxyXG4gICAgbWF4TnVtYmVySGllcmFyY2hpZXMsXHJcbiAgICBzZXRTZXRPcGVyYXRpb24sXHJcbiAgICAvL0RyYXdlclxyXG59IGZyb20gJy4vaGllcmFyY2h5LmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBzZXRUcmFja2luZ0Jvb2xlYW4sXHJcbiAgICByZXNldFRyYWNrZWREYXRhLFxyXG4gICAgc2VuZFRyYWNrZWREYXRhXHJcbn0gZnJvbSAnLi92aXN1YWxfcGFyYW1ldGVyLmpzJztcclxuXHJcbmxldCBicnVzaDsgLy8gYnJ1c2hpbmcgdmFyaWFibGVcclxuZXhwb3J0IGxldCBwbGF5Qm9vbGVhbiA9IHRydWU7IC8vIHBhdXNlIGFuZCBwbGF5IGJvb2xlYW5cclxuXHJcblxyXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICBHZXR0ZXIgYW5kIHNldHRlclxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbi8qKlxyXG4gKiBTZXQgcGxheSBib29sZWFuXHJcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gdmFsdWUgLSBwYXVzZSAoZmFsc2UpIG9yIHBsYXkgKHRydWUpXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2V0UGxheUJvb2xlYW4odmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJykge1xyXG4gICAgICAgIHBsYXlCb29sZWFuID0gdmFsdWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHBsYXlCb29sZWFuID0gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuIiwiLyplc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtbGV0cyovXHJcbi8qZ2xvYmFsIHdpbmRvdywkLCBkMywqL1xyXG4vLyBpbXBvcnQgKiBhcyBzcHYgZnJvbSAnLi9zcGF0aWFsX3ZpZXcuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGRyYXdcclxufSBmcm9tICcuL3NwYXRpYWxfdmlldy9zcGF0aWFsX3ZpZXcuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIHNldFBsYXlCb29sZWFuXHJcbn0gZnJvbSAnLi9saXN0ZW5lci5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gIC8vaW5pdFRyZW5kQ2hhcnRMaXN0ZW5lcixcclxuICBUcmVuZENoYXJ0XHJcbn0gZnJvbSAnLi9saW5lX2NoYXJ0LmpzJztcclxuaW1wb3J0IHtcclxuICAgIHN3YXJtRGF0YVxyXG59IGZyb20gJy4vZXhwbG9yZS5qcyc7XHJcbi8qKlxyXG4gKiBEaXNhYmxlIHRoZSBwbGF5IGJ1dHRvbiAtLT4gTG9hZGluZyBzeW1ib2xcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBkaXNhYmxlUGxheUJ1dHRvbigpIHtcclxuICAgIHNldFBsYXlCb29sZWFuKGZhbHNlKTtcclxuICAgICQoJyNwbGF5LWJ1dHRvbicpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICQoJyNwbGF5LWJ1dHRvbicpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcbiAgICAkKCcjcGxheS1pY29ucycpLmhpZGUoKTtcclxuICAgICQoJyNwbGF5LWxvYWRpbmcnKS5zaG93KCk7XHJcblxyXG59XHJcblxyXG4vKipcclxuICogRW5hYmxlIHRoZSBwbGF5IGJ1dHRvbiByZW1vdmUgbG9hZGluZyBzeW1ib2xcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBlbmFibGVQbGF5QnV0dG9uKCkge1xyXG4gICAgc2V0UGxheUJvb2xlYW4odHJ1ZSk7XHJcbiAgICAkKCcjcGxheS1idXR0b24nKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAkKCcjcGxheS1idXR0b24nKS5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcclxuICAgICQoJyNwbGF5LWxvYWRpbmcnKS5oaWRlKCk7XHJcbiAgICAkKCcjcGxheS1pY29ucycpLnNob3coKTtcclxuICAgIC8vZHJhdygpO1xyXG59XHJcblxyXG4vKipcclxuICogUmV0dXJuICAuMDUgcGVyY2VudGlsZXMgb2YgdGhlIGFycmF5XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcGVyY2VudGlsZXMoYXJyKSB7XHJcbiAgICBsZXQgcCA9IDAuMDU7XHJcbiAgICBpZiAoYXJyLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG4gICAgYXJyLnNvcnQoZnVuY3Rpb24oYSwgYikge1xyXG4gICAgICAgIHJldHVybiBhIC0gYjtcclxuICAgIH0pO1xyXG4gICAgbGV0IGluZGV4ID0gKGFyci5sZW5ndGggLSAxKSAqIHA7XHJcbiAgICBsZXQgbG93ZXIgPSBNYXRoLmZsb29yKGluZGV4KTtcclxuICAgIGxldCB1cHBlciA9IGxvd2VyICsgMTtcclxuICAgIGxldCB3ZWlnaHQgPSBpbmRleCAlIDE7XHJcbiAgICBpZiAodXBwZXIgPj0gYXJyLmxlbmd0aCkge1xyXG4gICAgICAgIHJldHVybiAxIC0gYXJyW2xvd2VyXTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIDEgLSAoYXJyW2xvd2VyXSAqICgxIC0gd2VpZ2h0KSArIGFyclt1cHBlcl0gKiB3ZWlnaHQpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogUmV0dXJuIHRoZSAwNSwgMjUsIDUwLCA3NSwgOTUgcGVyY2VudGlsZXMgb2YgdGhlIGFycmF5XHJcbiAqXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcGVyY2VudGlsZXNMaW5lQ2hhcnQoYXJyKSB7XHJcbiAgICBsZXQgcCA9IFswLjA1LCAwLjI1LCAwLjUsIDAuNzUsIDAuOTVdO1xyXG4gICAgbGV0IHJlc3VsdCA9IFtdO1xyXG4gICAgaWYgKGFyci5sZW5ndGggPT09IDApIHtcclxuICAgICAgICByZXR1cm4gMDtcclxuICAgIH1cclxuICAgIGFyci5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcclxuICAgICAgICByZXR1cm4gYSAtIGI7XHJcbiAgICB9KTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGxldCBpbmRleCA9IChhcnIubGVuZ3RoIC0gMSkgKiBwW2ldO1xyXG4gICAgICAgIGxldCBsb3dlciA9IE1hdGguZmxvb3IoaW5kZXgpO1xyXG4gICAgICAgIGxldCB1cHBlciA9IGxvd2VyICsgMTtcclxuICAgICAgICBsZXQgd2VpZ2h0ID0gaW5kZXggJSAxO1xyXG4gICAgICAgIGlmICh1cHBlciA+PSBhcnIubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGFycltsb3dlcl0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGFycltsb3dlcl0gKiAoMSAtIHdlaWdodCkgKyBhcnJbdXBwZXJdICogd2VpZ2h0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG4vKipcclxuICogTGluZSBjaGFydCBkZXRhaWxzIGNsaWNrIGxpc3RlbmVyXHJcbiAqL1xyXG5mdW5jdGlvbiBpbml0VHJlbmRDaGFydExpc3RlbmVyKCkge1xyXG4gICAgJCgnLmRyYXctZGV0YWlscycpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmICgkKHRoaXMpLmZpbmQoJ2lucHV0OmNoZWNrYm94JykucHJvcCgnY2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgIC8vZGlzYWJsZUxpbmVDaGFydCgpO1xyXG4gICAgICAgICAgICB2YXIgdHJlbmRjaGFydCA9IG5ldyBUcmVuZENoYXJ0KHRoaXMsIHN3YXJtRGF0YSk7XHJcbiAgICAgICAgICAgIHRyZW5kY2hhcnQuZGlzYWJsZUxpbmVDaGFydCgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlbW92ZVRyZW5kQ2hhcnQoKTtcclxuICAgICAgICAgICAgZW5hYmxlTGluZUNoYXJ0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBMaW5lIGNoYXJ0IGRldGFpbHMgY2xpY2sgbGlzdGVuZXJcclxuICovXHJcbmZ1bmN0aW9uIGRpc2FibGVMaW5lQ2hhcnQoKSB7XHJcbiAgICAkKCcubGluZUNoYXJ0QnV0dG9uJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgJCgnLmxpbmUtY2hhcnQtY2hlY2stYm94JykuYXR0cignZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICQoJy5saW5lQ2hhcnRMaW5lJykuYXR0cigndmlzaWJpbGl0eScsICdoaWRkZW4nKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIExpbmUgY2hhcnQgZGV0YWlscyBjbGljayBsaXN0ZW5lclxyXG4gKi9cclxuZnVuY3Rpb24gZW5hYmxlTGluZUNoYXJ0KCkge1xyXG4gICAgJCgnLmxpbmVDaGFydEJ1dHRvbicpLnByb3AoJ2NoZWNrZWQnLCB0cnVlKS5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcclxuICAgICQoJy5saW5lLWNoYXJ0LWNoZWNrLWJveCcpLmF0dHIoJ2Rpc2FibGVkJywgZmFsc2UpO1xyXG4gICAgJCgnLmxpbmVDaGFydExpbmUnKS5hdHRyKCd2aXNpYmlsaXR5JywgJ3Zpc2libGUnKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEhpZGUgdGhlIHRyZW5kIGNoYXJ0XHJcbiAqL1xyXG5mdW5jdGlvbiByZW1vdmVUcmVuZENoYXJ0KCkge1xyXG4gICAgJCgnLnRyZW5kQ2hhcnREYXRhJykuaGlkZSgpO1xyXG4gICAgJCgnI3RyZW5kQ2hhcnRMZWdlbmQnKS5oaWRlKCk7XHJcbiAgICAkKCcjbGluZUNoYXJ0TGVnZW5kJykuc2hvdygpO1xyXG59XHJcblxyXG5cclxuXHJcbi8qKlxyXG4gKiBBZGQgdGhlIGFic29sdXRlIGZlYXR1cmUgY2hlY2tib3hlcyBpbiB0aGUgZmVhdHVyZSBwYW5lbCBleHBvcnQgdG8gYWpheFxyXG4gKlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGFkZEFic29sdXRlRmVhdHVyZUJ1dHRvbnMoZGF0YVNldFBlcmNlbnRpbGUpIHtcclxuICAgIC8vIGl0ZXJhdGUgb3ZlciB0aGUgb2JqZWN0XHJcbiAgICBmb3IgKHZhciBrZXkgaW4gZGF0YVNldFBlcmNlbnRpbGUpIHtcclxuICAgICAgICBpZiAoZGF0YVNldFBlcmNlbnRpbGUuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICAvLyBnZW5lcmF0ZSB0ZXh0IGZvciB0aGUgZGlzcGxheWVkIGJ1dHRvblxyXG4gICAgICAgICAgICBsZXQgY2FwaXRhbGl6ZWRfZmVhdHVyZV9zdHJpbmcgPSBrZXkuc3BsaXQoJ18nKS5qb2luKCcgJyk7XHJcbiAgICAgICAgICAgIGNhcGl0YWxpemVkX2ZlYXR1cmVfc3RyaW5nID0gY2FwaXRhbGl6ZWRfZmVhdHVyZV9zdHJpbmcuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBjYXBpdGFsaXplZF9mZWF0dXJlX3N0cmluZy5zbGljZSgxKTtcclxuICAgICAgICAgICAgLy8gYWRkIHRoZSBidXR0b25cclxuICAgICAgICAgICAgJCgnI2Fic29sdXRlLWZlYXR1cmUtY2hlY2tib3hlcycpLmFwcGVuZCgnPHRyPjx0aD4nICtcclxuICAgICAgICAgICAgICAgICcgPGRpdiBjbGFzcz1cInByZXR0eSBwLXN3aXRjaCBwLWZpbGwgcC1iaWdnZXJcIj48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgaWQ9XCJkcmF3LScgKyBrZXkgK1xyXG4gICAgICAgICAgICAgICAgJ1wiLz48ZGl2IGNsYXNzPVwic3RhdGVcIj48bGFiZWw+JyArIGNhcGl0YWxpemVkX2ZlYXR1cmVfc3RyaW5nICsgJzwvbGFiZWw+PC9kaXY+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAvLyBxdWFudGlsZSBncmFwaFxyXG4gICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJmbG9hdC1yaWdodCBkcmF3LWRldGFpbHNcIiBpZD1cImRyYXctJyArIGtleSArICctZGV0YWlsc1wiPjxkaXYgY2xhc3M9XCJwcmV0dHkgcC1pY29uIHAtdG9nZ2xlIHAtcGxhaW5cIj48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgaWQ9XCJkcmF3LScgKyBrZXkgKyAnLWlucHV0XCIgLz4nICtcclxuICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwic3RhdGUgcC1zdWNjZXNzLW8gcC1vblwiPjxpIGNsYXNzPVwibWRpIG1kaS1pbWFnZS1hcmVhXCI+PC9pPjxsYWJlbD48L2xhYmVsPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJzdGF0ZSBwLW9mZlwiPjxpIGNsYXNzPVwibWRpIG1kaS1pbWFnZS1vZmZcIj48L2k+PGxhYmVsPjwvbGFiZWw+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAnPC9kaXY+PC9kaXY+PC90aD48L3RyPicpO1xyXG5cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBoaWRlIHRoZSBlbGVtZW50c1xyXG4gICAgJCgnLmRyYXctZGV0YWlscycpLmhpZGUoKTtcclxuICAgIC8vIGluaXQgdGhlIGxpc3Rlcm5lcnNcclxuICBpbml0VHJlbmRDaGFydExpc3RlbmVyKCk7XHJcblxyXG59XHJcblxyXG4vLyBnZW5lcmF0ZSBoYXNoIGNvZGVzIGZyb20gc3RyaW5nc1xyXG4vLyBzb3VyY2U6IGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzc2MTY0NjEvZ2VuZXJhdGUtYS1oYXNoLWZyb20tc3RyaW5nLWluLWphdmFzY3JpcHQtanF1ZXJ5XHJcblN0cmluZy5wcm90b3R5cGUuaGFzaENvZGUgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBoYXNoID0gMCxcclxuICAgICAgICBpLCBjaHI7XHJcbiAgICBpZiAodGhpcy5sZW5ndGggPT09IDApIHJldHVybiBoYXNoO1xyXG4gICAgZm9yIChpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjaHIgPSB0aGlzLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgaGFzaCA9ICgoaGFzaCA8PCA1KSAtIGhhc2gpICsgY2hyO1xyXG4gICAgICAgIGhhc2ggfD0gMDsgLy8gQ29udmVydCB0byAzMmJpdCBpbnRlZ2VyXHJcbiAgICB9XHJcbiAgICByZXR1cm4gaGFzaDtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBDYWxjdWxhdGUgdGhlIHN0YW5kYXJkRGV2aWF0aW9uIG9mIGFuIGFycmF5IG9mIG51bWJlcnNcclxuICogQHBhcmFtIHtBcnJheX0gYXJyIC0gYXJyYXkgb2YgbnVtYmVyc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHN0YW5kYXJkRGV2aWF0aW9uKGFycikge1xyXG4gICAgaWYgKGFyciBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgbGV0IG1lYW4gPSBhcnIucmVkdWNlKGZ1bmN0aW9uKHB2LCBjdikge1xyXG4gICAgICAgICAgICByZXR1cm4gcHYgKyBjdjtcclxuICAgICAgICB9LCAwKSAvIGFyci5sZW5ndGg7XHJcbiAgICAgICAgbGV0IHRtcCA9IGFyci5tYXAoZnVuY3Rpb24obnVtKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLnBvdyhudW0gLSBtZWFuLCAyKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KHRtcC5yZWR1Y2UoZnVuY3Rpb24ocHYsIGN2KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwdiArIGN2O1xyXG4gICAgICAgIH0sIDApIC8gdG1wLmxlbmd0aCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBNb3ZlIGVsZW1lbnQgaW4gU1ZHIGludG8gYmFja2dyb3VuZCBkb25lIGJ5IG1vdmluZyBpdCB0byBmaXJzdCBlbGVtZW50XHJcbiAqL1xyXG5kMy5zZWxlY3Rpb24ucHJvdG90eXBlLm1vdmVUb0JhY2sgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGZpcnN0Q2hpbGQgPSB0aGlzLnBhcmVudE5vZGUuZmlyc3RDaGlsZDtcclxuICAgICAgICBpZiAoZmlyc3RDaGlsZCkge1xyXG4gICAgICAgICAgICB0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMsIGZpcnN0Q2hpbGQpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIE1ha2UgdGhlIG1haW4gdmlzIHNwYXRpYWwgdmlldyByZXNpemFibGVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBtYWtlUmVzaXphYmxlKGhlaWdodCwgd2lkdGgpIHtcclxuICAgICQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJCgnI21haW4tdmlzJylcclxuICAgICAgICAgICAgLmRyYWdnYWJsZSh7XHJcbiAgICAgICAgICAgICAgICBjb250YWlubWVudDogJ3BhcmVudCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnJlc2l6YWJsZSh7XHJcbiAgICAgICAgICAgICAgICBhc3BlY3RSYXRpbzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG1heFdpZHRoOiAkKCcjbWFpbi12aXMtZGl2Jykud2lkdGgoKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuaGVpZ2h0KGhlaWdodCAqIDAuNilcclxuICAgICAgICAgICAgLndpZHRoKHdpZHRoICogMC42KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogUmVzZXQgdGhlIGJ1dHRvbnMgYW5kIGNoZWNrYm94ZXNcclxuICogSGlkZSBpY29ucyAtIG5lZWRlZCBiZWNhdXNlIG9mIGJvb3RzdHJhcCBidWdcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0Q29uZmlnKCkge1xyXG4gICAgJCgnaW5wdXRbdHlwZT1jaGVja2JveF0nKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xyXG4gICAgLy9zZXQgdGhlIGNvbG9yIHNjYWxlIGZ1bmN0aW9uIHRvIGxpbmVhclxyXG4gICAgJCgnI2NvbG9yLXNjYWxlLWxpbmVhcicpXHJcbiAgICAgICAgLnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcclxuICAgICQoJyNncm91cC1zaXplLW0nKVxyXG4gICAgICAgIC5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XHJcbiAgICAkKCcjYmFja2dyb3VuZC13aGl0ZScpXHJcbiAgICAgICAgLnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcclxuICAgICQoJyNzZXR0aW5ncy1kaXYgaW5wdXRbdHlwZT1jaGVja2JveF0nKVxyXG4gICAgICAgIC5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XHJcbiAgICAvL2hpZGUgdGhlIGxvYWRpbmcgZ2lmXHJcbiAgICAkKCcjbG9hZGluZycpXHJcbiAgICAgICAgLmhpZGUoKTtcclxuICAgIC8vIG5lZWRlZCBkdWUgdG8galF1ZXJ5IGluY29tcGF0aWJpbGl0eVxyXG4gICAgJCgnI3BsYXktbG9hZGluZycpLmhpZGUoKTtcclxuICAgICQoJy5tZGktcGxheScpLmhpZGUoKTtcclxuICAgICQoJyNtZXRhZGF0YS1pbnB1dCcpLmhpZGUoKTtcclxuICAgICQoJyNkZW5kcm9ncmFtLWJ1dHRvbnMtZGl2JykuaGlkZSgpO1xyXG4gICAgJCgnI2ctY2VudHJvaWQnKS5oaWRlKCk7XHJcbiAgICAvL2NoZWNrIGxpbmUgY2hhcnQgZHJhdyBhbGwgbGluZXNcclxuICAgICQoJyNsaW5lLWNoYXJ0LWZlYXR1cmUtY2hlY2tib3hlcyBpbnB1dFt0eXBlPWNoZWNrYm94XScpXHJcbiAgICAgICAgLnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcclxufVxyXG4iLCIvKmVzbGludC1kaXNhYmxlIG5vLXVudXNlZC1sZXRzKi9cclxuLypnbG9iYWwgd2luZG93LCAkLGQzLCBwYXJhbWV0ZXJzLCBTZXQgKi9cclxuJ3VzZSBzdHJpY3QnO1xyXG5pbXBvcnQge1xyXG4gICAgZGF0YXNldCxcclxuICAgIG5ldHdvcmtEYXRhLFxyXG4gICAgc3dhcm1EYXRhLFxyXG4gICAgZGF0YXNldE1ldGFkYXRhLFxyXG4gICAgc2V0TmV0d29ya0RhdGEsXHJcbiAgICBzZXRIaWVyYXJjaHlEYXRhXHJcbn0gZnJvbSAnLi4vZXhwbG9yZS5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgbmV0d29ya0NvbG9yU2NhbGUsXHJcbiAgICBuZXR3b3JrQXV0byxcclxuICAgIHNldE5ldHdvckxpbWl0LFxyXG4gICAgbmV0d29ya0xpbWl0LFxyXG4gICAgbmV0d29ya0hpZXJhcmNoeVxyXG4gICAgLy8gc2hvd05ldHdvcmtIaWVyYXJjaHksXHJcbiAgICAvLyBuZXR3b3JrSUQsXHJcbiAgICAvLyBuZXR3b3JrQmFja2dyb3VuZCxcclxuICAgIC8vIG5ldHdvcmtCYWNrZ3JvdW5kTGltaXRcclxufSBmcm9tICcuLi9uZXR3b3JrLmpzJztcclxuXHJcblxyXG5cclxuaW1wb3J0IHtcclxuICAgIHBlcmNlbnRpbGVzLFxyXG4gICAgbWFrZVJlc2l6YWJsZSxcclxuICAgIGRlZmF1bHRDb25maWcsXHJcbiAgICBkaXNhYmxlUGxheUJ1dHRvbixcclxuICAgIGVuYWJsZVBsYXlCdXR0b25cclxufSBmcm9tICcuLi9oZWxwZXJzLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBzZXRUaW1lU2xpZGVyLFxyXG4gICAgaW5pdFRvb2x0aXAsXHJcbiAgICB0b29sdGlwRnVuY3Rpb24sXHJcbiAgICBpbml0U2xpZGVycyxcclxuICAgIHRvb2x0aXBcclxufSBmcm9tICcuL2ludGVyYWN0aW9uLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBtZXRhZGF0YUNvbG9yXHJcbn0gZnJvbSAnLi4vbWV0YWRhdGEuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGluaXRDb2xvclBpY2tlcixcclxuICAgIHJldHVybkNvbG9yU2NhbGVcclxufSBmcm9tICcuL2NvbG9yX3BpY2tlci5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgaW5pdExpc3RlbmVycyxcclxuXHJcbn0gZnJvbSAnLi4vbGlzdGVuZXIuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGFkZFNwYXRpYWxWaWV3R3JvdXBcclxufSBmcm9tICcuL2xlZ2VuZC5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgdXBkYXRlRGVuZHJvZ3JhbSxcclxuICAgIHNldEhpZXJhcmNoeUxldmVsLFxyXG4gICAgZHJhd0hpZXJhcmNoeSxcclxuICAgIGluaXREZW5kcm9ncmFtTGVnZW5kLFxyXG4gICAgLy8gbmV0d29ya0hpZXJhcmNoeUlkcyxcclxuICAgIC8vIHNldGhpZXJhcmNoeUdyb3VwU3RkZXYsXHJcbiAgICByZXNldGhpZXJhcmNoeUdyb3VwU3RkZXYsXHJcbiAgICBEZW5kcm9ncmFtXHJcbn0gZnJvbSAnLi4vaGllcmFyY2h5LmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICB0cmFja2luZ0Jvb2xlYW4sXHJcbiAgICBhZGRUcmFja2VkRGF0YVxyXG59IGZyb20gJy4uL3Zpc3VhbF9wYXJhbWV0ZXIuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGJydXNoZW5kLFxyXG4gICAgc2xpZGVyXHJcbn0gZnJvbSAnLi9pbnRlcmFjdGlvbi5qcyc7XHJcbmltcG9ydCB7XHJcbiAgICBnZXREYXRhc2V0RmVhdHVyZSxcclxuICAgIGdldE5ldHdvcmtEYXRhLFxyXG4gICAgZ2V0U3dhcm1EYXRhc2V0RmVhdHVyZSxcclxuICAgIGdldE5ldHdvcmtIaWVyYXJjaHlEYXRhXHJcbn0gZnJvbSAnLi4vYWpheF9xdWVyaWVzLmpzJztcclxuXHJcblxyXG4gLy8gc3ZnIGNvbnRhaW5lciBmb3IgdGhlIHNwYXRpYWwgdmlld1xyXG4gLy8gc3ZnIGdyb3VwIGZvciB0aGUgc3BhdGlhbCB2aWV3IHRhbmtcclxuLy8gbGV0IG5ldHdvcmtCYWtEYXRhID0ge307XHJcblxyXG4vL2V4cG9ydCBsZXQgaW5kZXhUaW1lID0gMDsgLy8gYWN0dWFsIHRpbWUgbW9tZW50IGluIHRoZSBhbmltYXRpb25cclxuXHJcbi8vIGFycmF5IG9mIGFuaW1hbHMgZm9yIHRoZSBzcGVjaWZpYyB0aW1lIGZyYW1lXHJcblxyXG5cclxuLy8gRHJhd2VyIFNldHVwXHJcbmV4cG9ydCBsZXQgYWN0aXZlU2NhbGUgPSAnYmxhY2snOyAvLyBjYW4gYmUgc3BlZWQsIGFjY2VsZXJhdGlvbiwgLi4gYW5kIGJsYWNrIChtZWFuaW5nIG5vIGFjdGl2ZSBzY2FsZSlcclxuZXhwb3J0IGxldCBtZWRvaWRBbmltYWwgPSAtMTsgLy8gd2hpY2ggYW5pbWFsIGlzIHRoZSBtZWRvaWQgKC0xIGlzIG5vIGFuaW1hbClcclxuZXhwb3J0IGxldCBhY3RpdmVBbmltYWxzID0gW107IC8vIGFjdGl2ZSBzZWxlY3RlZCBhbmltYWxzXHJcbmV4cG9ydCBsZXQgYXJyYXlBbmltYWxzO1xyXG5cclxuXHJcbmxldCB0cmVuZENoYXJ0c1pvb20gPSB7fTtcclxuLy9sZXQgdGhpcy50cmVuZENoYXJ0c0VsZW0gPSBbJ2xvd2VyLW91dGVyLWFyZWEnLCAnbG93ZXItaW5uZXItYXJlYScsICdtZWRpYW4tbGluZScsICd1cHBlci1pbm5lci1hcmVhJywgJ3VwcGVyLW91dGVyLWFyZWEnXTtcclxuLy9sZXQgbGluZUNoYXJ0V2lkdGggPSA1MDAwO1xyXG5cclxuXHJcbi8vIExpc3RlbmVyIFNldHVwXHJcbmxldCBicnVzaDsgLy8gYnJ1c2hpbmcgdmFyaWFibGVcclxuZXhwb3J0IGxldCBwbGF5Qm9vbGVhbiA9IHRydWU7XHJcblxyXG5cclxuLy8gTGluZWNoYXJ0IFNldHVwXHJcbmxldCByYXRpbyA9IDE7XHJcbmxldCB6b29tR3JvdXA7XHJcbmxldCB4O1xyXG5sZXQgeTtcclxuZXhwb3J0IGxldCB6b29tRnVuY3Rpb247XHJcblxyXG5cclxuXHJcblxyXG4vKipcclxuKiBCYXNlIGNsYXNzIGRyYXdlclxyXG4qL1xyXG5cclxuLyoqXHJcbiAqIEluaXRpYWxpemUgdGhlIHNwYXRpYWwgdmlldyB3aXRoIGFsbCB0aGUgaW1wb3J0YW50IGZhY3RvcnNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBEcmF3ZXIge1xyXG4gICBjb25zdHJ1Y3Rvcigpe1xyXG4gICAgIHRoaXMuaW5kZXhUaW1lPTA7XHJcbiAgICAgLy8gVGFuayBCYXNlXHJcbiAgICAgdGhpcy5zdmdDb250YWluZXIgPSBkMy5zZWxlY3QoJyNtYWluLXZpcycpXHJcblxyXG5cclxuICAgICB0aGlzLnpvb20gPSBkMy56b29tKClcclxuICAgICAgICAgLnNjYWxlRXh0ZW50KFsxLCA2XSlcclxuICAgICAgICAgLm9uKCd6b29tJywgKCk9PntcclxuICAgICAgICAgICAgIC8vY29uc3RyYWluZWQgem9vbWluZ1xyXG4gICAgICAgICAgICAgLy8gbW9kaWZ5IHRoZSB0cmFuc2xhdGUgc28gdGhhdCBpdCBuZXZlciBleGl0cyB0aGUgdGFua1xyXG4gICAgICAgICAgICAgZDMuZXZlbnQudHJhbnNmb3JtLnggPSBNYXRoLm1pbigwLCB0aGlzLnRhbmtXaWR0aCAqIChkMy5ldmVudC50cmFuc2Zvcm0uayAtIDEpLFxyXG4gICAgICAgICAgICAgICAgIE1hdGgubWF4KHRoaXMudGFua1dpZHRoICogKDEgLSBkMy5ldmVudC50cmFuc2Zvcm0uayksIGQzLmV2ZW50LnRyYW5zZm9ybS54KSk7XHJcblxyXG4gICAgICAgICAgICAgZDMuZXZlbnQudHJhbnNmb3JtLnkgPSBNYXRoLm1pbigwLCB0aGlzLnRhbmtIZWlnaHQgKiAoZDMuZXZlbnQudHJhbnNmb3JtLmsgLSAxKSxcclxuICAgICAgICAgICAgICAgICBNYXRoLm1heCh0aGlzLnRhbmtIZWlnaHQgKiAoMSAtIGQzLmV2ZW50LnRyYW5zZm9ybS5rKSwgZDMuZXZlbnQudHJhbnNmb3JtLnkpKTtcclxuXHJcbiAgICAgICAgICAgICAvLyB0cmFuc2xhdGUgYW5kIHNjYWxlXHJcbiAgICAgICAgICAgICB0aGlzLnpvb21Hcm91cC5hdHRyKCd0cmFuc2Zvcm0nLCBkMy5ldmVudC50cmFuc2Zvcm0pO1xyXG5cclxuICAgICAgICAgICAgIC8vIHJlc2NhbGUgdGhlIGF4aXNcclxuICAgICAgICAgICAgIGdYYXhpcy5jYWxsKHhBeGlzLnNjYWxlKGQzLmV2ZW50LnRyYW5zZm9ybS5yZXNjYWxlWCh4KSkpO1xyXG4gICAgICAgICAgICAgZ1lheGlzLmNhbGwoeUF4aXMuc2NhbGUoZDMuZXZlbnQudHJhbnNmb3JtLnJlc2NhbGVZKHkpKSk7XHJcbiAgICAgICAgIH0pO1xyXG4gICAgIHRoaXMuem9vbUdyb3VwID0gdGhpcy5zdmdDb250YWluZXIuYXBwZW5kKCdzdmc6ZycpO1xyXG4gICAgIHRoaXMudGFuayA9IHRoaXMuem9vbUdyb3VwLmFwcGVuZCgnc3ZnOmcnKVxyXG4gICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAndGFuaycpXHJcbiAgICAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgbGV0IHggPSBwYXJhbWV0ZXJzLmludmVydGVkX3ggPyAtMSA6IDE7XHJcbiAgICAgICAgICAgICAgICAgICBsZXQgeSA9IHBhcmFtZXRlcnMuaW52ZXJ0ZWRfeSA/IC0xIDogMTtcclxuICAgICAgICAgICAgICAgICAgIHJldHVybiAnc2NhbGUoJyArIHggKyAnLCcgKyB5ICsgJyknO1xyXG4gICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAvLyBhY3R1YWwgdGltZSBtb21lbnQgaW4gdGhlIGFuaW1hdGlvblxyXG5cclxuICAgICB0aGlzLmFjdGl2ZVNjYWxlID0gJ2JsYWNrJzsgLy8gY2FuIGJlIHNwZWVkLCBhY2NlbGVyYXRpb24sIC4uIGFuZCBibGFjayAobWVhbmluZyBubyBhY3RpdmUgc2NhbGUpXHJcbiAgICAgdGhpcy5tZWRvaWRBbmltYWwgPSAtMTsgLy8gd2hpY2ggYW5pbWFsIGlzIHRoZSBtZWRvaWQgKC0xIGlzIG5vIGFuaW1hbClcclxuICAgICB0aGlzLmFjdGl2ZUFuaW1hbHMgPSBbXTsgLy8gYWN0aXZlIHNlbGVjdGVkIGFuaW1hbHNcclxuICAgICB0aGlzLmFycmF5QW5pbWFscyA9IDAgLy8gYXJyYXkgb2YgYW5pbWFscyBmb3IgdGhlIHNwZWNpZmljIHRpbWUgZnJhbWVcclxuICAgICB0aGlzLmlkID0gJCgnLnNob3ctZGVuZHJvZ3JhbS5idG4tcHJpbWFyeScpLmF0dHIoJ2RhdGEnKTtcclxuICAgICB0aGlzLnBsYXlCb29sZWFuID0gdHJ1ZTtcclxuXHJcblxyXG4gICB9XHJcbiAgIHNldEluZGV4VGltZSh2YWx1ZSkge1xyXG4gICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgKHRoaXMuaW5kZXhUaW1lIDw9IHN3YXJtRGF0YS5sZW5ndGgpKSB7XHJcbiAgICAgICAgICAgdGhpcy5pbmRleFRpbWUgPSB2YWx1ZTtcclxuICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgdGhpcy5pbmRleFRpbWUgPSAwO1xyXG4gICAgICAgfVxyXG4gICB9XHJcbiAgIGRlY2luZGV4VGltZSgpIHtcclxuICAgICAgIHRoaXMuaW5kZXhUaW1lID0gdGhpcy5pbmRleFRpbWUgLSAxO1xyXG4gICB9XHJcbiAgIHVwZGF0ZUxpbmVDaGFydCgpIHtcclxuICAgICAgIGlmIChkMy5zZWxlY3QoJyNsaW5lQ2hhcnRUaW1lTGluZScpICYmIHN3YXJtRGF0YVtNYXRoLmNlaWwodGhpcy5pbmRleFRpbWUgLyByYXRpbyldKSB7XHJcbiAgICAgICAgICAgbGV0IHRtcCA9IE1hdGguY2VpbCh0aGlzLmluZGV4VGltZSAvIHJhdGlvKTtcclxuICAgICAgICAgICAvL3VwZGF0ZSB0aGUgbGluZSBjaGFydCBsZWdlbmQgdGV4dCB2YWx1ZXMgcGVyIHNlY29uZFxyXG4gICAgICAgICAgIGlmICh0aGlzLmluZGV4VGltZSAlIDI1ID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgIC8vIFRPRE8gY2hhbmdlIHRoaXMgdG8gYSBtb3JlIG1vZHVsYXIgd2F5XHJcbiAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnI2NvbnZleF9odWxsX2FyZWFMaW5lVmFsdWUnKVxyXG4gICAgICAgICAgICAgICAgICAgLnRleHQoKHN3YXJtRGF0YVt0bXBdWydjb252ZXhfaHVsbF9hcmVhJ10pICsgJ21twrInKTtcclxuICAgICAgICAgICAgICAgZDMuc2VsZWN0KCcjc3BlZWRMaW5lVmFsdWUnKVxyXG4gICAgICAgICAgICAgICAgICAgLnRleHQoc3dhcm1EYXRhW3RtcF1bJ3NwZWVkJ10gKyAnbW0vcycpO1xyXG4gICAgICAgICAgICAgICBkMy5zZWxlY3QoJyNhY2NlbGVyYXRpb25MaW5lVmFsdWUnKVxyXG4gICAgICAgICAgICAgICAgICAgLnRleHQoc3dhcm1EYXRhW3RtcF1bJ2FjY2VsZXJhdGlvbiddICsgJ21tL3PCsicpO1xyXG4gICAgICAgICAgICAgICBkMy5zZWxlY3QoJyNkaXN0YW5jZV9jZW50cm9pZExpbmVWYWx1ZScpXHJcbiAgICAgICAgICAgICAgICAgICAudGV4dChzd2FybURhdGFbdG1wXVsnZGlzdGFuY2VfY2VudHJvaWQnXSArICdtbScpO1xyXG4gICAgICAgICAgICAgICBkMy5zZWxlY3QoJyNkaXJlY3Rpb25MaW5lVmFsdWUnKVxyXG4gICAgICAgICAgICAgICAgICAgLnRleHQoc3dhcm1EYXRhW3RtcF1bJ2RpcmVjdGlvbiddICsgJ8KwJyk7XHJcbiAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnI3BvbGFyaXNhdGlvbkxpbmVWYWx1ZScpXHJcbiAgICAgICAgICAgICAgICAgICAudGV4dChzd2FybURhdGFbdG1wXVsncG9sYXJpc2F0aW9uJ10pO1xyXG4gICAgICAgICAgIH1cclxuICAgICAgICAgICBkMy5zZWxlY3QoJyNsaW5lQ2hhcnRUaW1lTGluZScpXHJcbiAgICAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyB6b29tRnVuY3Rpb24odG1wKSArICcsMCknKTtcclxuICAgICAgIH1cclxuICAgfVxyXG4gICBkcmF3KCkge1xyXG4gICAgICAgLy91cGRhdGUgdGltZSB0byB3YWl0IGFrYSBzcGVlZCBvZiByZXBsYXlcclxuICAgICAgIGxldCB0aW1lVG9XYWl0ID0gJCgnaW5wdXRbdHlwZT1cInJhZGlvXCJdLmdyb3VwLXBsYXliYWNrLXJhdGU6Y2hlY2tlZCcpXHJcbiAgICAgICAgICAgLnZhbCgpO1xyXG4gICAgICAgLy9zY2FsZSB0aGUgc2l6ZSBieSB0aGlzIG51bWJlclxyXG4gICAgICAgbGV0IGFuaW1hbFNjYWxlID0gJCgnaW5wdXRbdHlwZT1cInJhZGlvXCJdLmdyb3VwLXNpemU6Y2hlY2tlZCcpXHJcbiAgICAgICAgICAgLnZhbCgpO1xyXG5cclxuICAgICAgIC8vZ2V0IHRoZSBuZXh0IGFuaW1hbHNcclxuICAgICAgIGFycmF5QW5pbWFscyA9IGRhdGFzZXQuZmlsdGVyKChkKT0+e1xyXG4gICAgICAgICAgIHJldHVybiBkWyd0J10gPT09IHRoaXMuaW5kZXhUaW1lO1xyXG4gICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgIC8vdGhlIHRpbWVvdXQgaXMgc2V0IGFmdGVyIG9uZSB1cGRhdGUgMzAgbXNcclxuICAgICAgIHNldFRpbWVvdXQoKCk9PntcclxuICAgICAgICAgICAgICAgLy8gZHJhdyBoaWVyYXJjaHlcclxuICAgICAgICAgICAgICAgdGhpcy5kcmF3RGVuZHJvZ3JhbSgpO1xyXG4gICAgICAgICAgICAgICAvL2NoYW5nZSB0aGUgdGltZSBmcmFtZSB0ZXh0XHJcbiAgICAgICAgICAgICAgIHRoaXMuc3ZnQ29udGFpbmVyLnNlbGVjdCgnLmZyYW1lLXRleHQnKVxyXG4gICAgICAgICAgICAgICAgICAgLnRleHQoTWF0aC5mbG9vcih0aGlzLmluZGV4VGltZSAvIDE1MDApICUgNjAgKyAnOicgKyBNYXRoLmZsb29yKHRoaXMuaW5kZXhUaW1lIC8gcGFyYW1ldGVyc1snZnBzJ10pICUgNjAgKyAnOjonICsgdGhpcy5pbmRleFRpbWUgJSBwYXJhbWV0ZXJzWydmcHMnXSk7XHJcbiAgICAgICAgICAgICAgIC8vIGlmIGEgc2Vjb25kIGhhcyBjaGFuZ2VkIG1vdmUgdGhlIHNsaWRlclxyXG4gICAgICAgICAgICAgICBpZiAodGhpcy5pbmRleFRpbWUgJSBwYXJhbWV0ZXJzWydmcHMnXSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgc2V0VGltZVNsaWRlcih0aGlzLmluZGV4VGltZSk7XHJcbiAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgIGxldCBzdmdBbmltYWxzID0gdGhpcy50YW5rLnNlbGVjdEFsbCgnZy5hbmltYWwnKVxyXG4gICAgICAgICAgICAgICAgICAgLmRhdGEoYXJyYXlBbmltYWxzKTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIE5ldHdvcmsgdmlzXHJcbiAgICAgICAgICAgICAgIGxldCBuZXR3b3JrVmlzO1xyXG4gICAgICAgICAgICAgICAvLyBsZXQgbmV0d29ya1Zpc0JhaztcclxuICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5kZXhUaW1lIGluIG5ldHdvcmtEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICBsZXQgbmV0d29yayA9IG5ldHdvcmtEYXRhW3RoaXMuaW5kZXhUaW1lXTtcclxuICAgICAgICAgICAgICAgICAgIC8vIHJlc2V0IHRoZSBncm91cCBzdGFuZGFyZCBkZXZpYXRpb24gZm9yIHRoZSBoaWVyYXJoY3lcclxuICAgICAgICAgICAgICAgICAgIC8vIG5lZWRlZCBmb3IgY29sb3Jpbmcgb2YgdGhlIGRlbmRyb2dyYW0gbm9kZXMgKHZhcmlhY25lKVxyXG4gICAgICAgICAgICAgICAgICAgcmVzZXRoaWVyYXJjaHlHcm91cFN0ZGV2KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgLy8gZGlzcGxheSB0aGUgd2hvbGUgbmV0d29ya1xyXG4gICAgICAgICAgICAgICAgICAgbmV0d29yayA9IG5ldHdvcmsubWFwKGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICBsZXQgYW5pbWFsMSA9IGFycmF5QW5pbWFscy5maWx0ZXIoZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmpbJ2EnXSA9PT0gaXRlbVsncyddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGxldCBhbmltYWwyID0gYXJyYXlBbmltYWxzLmZpbHRlcihmdW5jdGlvbihvYmopIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9ialsnYSddID09PSBpdGVtWydlJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgJ25vZGUxJzogYW5pbWFsMVsnYSddLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAnbm9kZTInOiBhbmltYWwyWydhJ10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICdzdGFydCc6IGFuaW1hbDFbJ3AnXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2VuZCc6IGFuaW1hbDJbJ3AnXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3ZhbCc6IGl0ZW1bJ3YnXVxyXG4gICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICBuZXR3b3JrLmZvckVhY2goZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICQoKCcjbWMtJyArIGRbJ25vZGUxJ10gKyAnLScgKyBkWydub2RlMiddKSkuY3NzKCdmaWxsJywgbmV0d29ya0NvbG9yU2NhbGUoZFsndmFsJ10pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAkKCgnI21jLScgKyBkWydub2RlMiddICsgJy0nICsgZFsnbm9kZTEnXSkpLmNzcygnZmlsbCcsIG5ldHdvcmtDb2xvclNjYWxlKGRbJ3ZhbCddKSk7XHJcbiAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICBpZiAobmV0d29ya0F1dG8pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICBsZXQgdG1wQXJyYXkgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5ldHdvcmsubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wQXJyYXkucHVzaChuZXR3b3JrW2ldWyd2YWwnXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgIHNldE5ldHdvckxpbWl0KHBlcmNlbnRpbGVzKHRtcEFycmF5KSk7XHJcbiAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICBuZXR3b3JrID0gbmV0d29yay5maWx0ZXIoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkWyd2YWwnXSA8PSAoMSAtIG5ldHdvcmtMaW1pdCk7XHJcbiAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgIC8vIERBVEEgSk9JTlxyXG4gICAgICAgICAgICAgICAgICAgbmV0d29ya1ZpcyA9IHRoaXMudGFuay5zZWxlY3QoJyNuZXR3b3JrLWdyb3VwJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuc2VsZWN0QWxsKCdsaW5lLm5ldHdvcmstZWRnZXMnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5kYXRhKG5ldHdvcmspO1xyXG4gICAgICAgICAgICAgICAgICAgLy8gVVBEQVRFXHJcbiAgICAgICAgICAgICAgICAgICBuZXR3b3JrVmlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gxJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZFsnc3RhcnQnXVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd5MScsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC1kWydzdGFydCddWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gyJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZFsnZW5kJ11bMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneTInLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtZFsnZW5kJ11bMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV0d29ya0NvbG9yU2NhbGUoKDEgLSBkWyd2YWwnXSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZS1vcGFjaXR5JywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMSAtIGRbJ3ZhbCddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgLy9FTlRFUlxyXG5cclxuICAgICAgICAgICAgICAgICAgIG5ldHdvcmtWaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJ2xpbmUnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICduZXR3b3JrLWVkZ2VzJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneDEnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkWydzdGFydCddWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3kxJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLWRbJ3N0YXJ0J11bMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneDInLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkWydlbmQnXVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd5MicsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC1kWydlbmQnXVsxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2UnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXR3b3JrQ29sb3JTY2FsZShkWyd2YWwnXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlLW9wYWNpdHknLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkWyd2YWwnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICBuZXR3b3JrVmlzID0gdGhpcy50YW5rLnNlbGVjdEFsbCgnbGluZS5uZXR3b3JrLWVkZ2VzJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuZGF0YShbXSk7XHJcblxyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIC8vIEVYSVQgLSBuZXR3b3JrXHJcbiAgICAgICAgICAgICAgIG5ldHdvcmtWaXMuZXhpdCgpXHJcbiAgICAgICAgICAgICAgICAgICAucmVtb3ZlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyBkZWxhdW5heSB0cmlhbmd1bGF0aW9uXHJcbiAgICAgICAgICAgICAgIC8vIERBVEEgSk9JTiAgLSB0cmlhbmd1bGF0aW9uXHJcbiAgICAgICAgICAgICAgIHZhciB0cmlhbmd1bGF0aW9uO1xyXG4gICAgICAgICAgICAgICBpZiAoJCgnI2RyYXctdHJpYW5ndWxhdGlvbicpXHJcbiAgICAgICAgICAgICAgICAgICAuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coW3N3YXJtRGF0YVt0aGlzLmluZGV4VGltZV1bJ3RyaWFuZ3VsYXRpb24nXV0pO1xyXG4gICAgICAgICAgICAgICAgICAgdHJpYW5ndWxhdGlvbiA9IHRoaXMudGFuay5zZWxlY3QoJyNkZWxhdW5heS10cmlhbmd1bGF0aW9uLWdyb3VwJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuc2VsZWN0QWxsKCdwYXRoLmRlbGF1bmF5LXRyaWFuZ3VsYXRpb24nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5kYXRhKFtzd2FybURhdGFbdGhpcy5pbmRleFRpbWVdWyd0cmlhbmd1bGF0aW9uJ11dKTtcclxuICAgICAgICAgICAgICAgICAgIC8vIFVQREFURSAtIHRyaWFuZ3VsYXRpb25cclxuICAgICAgICAgICAgICAgICAgIHRyaWFuZ3VsYXRpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignZCcsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgIC8vRU5URVIgLSB0cmlhbmd1bGF0aW9uXHJcbiAgICAgICAgICAgICAgICAgICB0cmlhbmd1bGF0aW9uLmVudGVyKClcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCdwYXRoJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnZGVsYXVuYXktdHJpYW5ndWxhdGlvbicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2QnLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICB0cmlhbmd1bGF0aW9uID0gdGhpcy50YW5rLnNlbGVjdEFsbCgncGF0aC5kZWxhdW5heS10cmlhbmd1bGF0aW9uJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuZGF0YShbXSk7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgLy8gRVhJVCAtIHRyaWFuZ3VsYXRpb25cclxuICAgICAgICAgICAgICAgdHJpYW5ndWxhdGlvbi5leGl0KClcclxuICAgICAgICAgICAgICAgICAgIC5yZW1vdmUoKTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIFZvcm9ub2lcclxuICAgICAgICAgICAgICAgLy8gREFUQSBKT0lOICAtIHZvcm9ub2lcclxuICAgICAgICAgICAgICAgdmFyIHZvcm9ub2k7XHJcbiAgICAgICAgICAgICAgIGlmICgkKCcjZHJhdy12b3Jvbm9pJylcclxuICAgICAgICAgICAgICAgICAgIC5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLmluZGV4VGltZSk7XHJcbiAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzd2FybURhdGFbdGhpcy5pbmRleFRpbWVdWyd2b3Jvbm9pJ10pO1xyXG4gICAgICAgICAgICAgICAgICAgLy9hcHBlbmQgdGhlIGdyb3VwIGZvciB0aGUgdm9yb25vaSBwYXRoc1xyXG5cclxuICAgICAgICAgICAgICAgICAgIHZvcm9ub2kgPSB0aGlzLnRhbmtcclxuICAgICAgICAgICAgICAgICAgICAgICAuc2VsZWN0KCcjdm9ybm9pLWdyb3VwJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuc2VsZWN0QWxsKCdwYXRoLnZvcm9ub2knKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5kYXRhKHN3YXJtRGF0YVt0aGlzLmluZGV4VGltZV1bJ3Zvcm9ub2knXS5zcGxpdCgnOycpKTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgLy8gVVBEQVRFIC0gdm9yb25vaVxyXG4gICAgICAgICAgICAgICAgICAgdm9yb25vaVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdkJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgLy9FTlRFUiAtIHZvcm9ub2lcclxuICAgICAgICAgICAgICAgICAgIHZvcm9ub2kuZW50ZXIoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJ3BhdGgnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICd2b3Jvbm9pJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignZCcsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICB2b3Jvbm9pID0gdGhpcy50YW5rLnNlbGVjdCgnI3Zvcm5vaS1ncm91cCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnNlbGVjdEFsbCgncGF0aC52b3Jvbm9pJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuZGF0YShbXSk7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgLy8gRVhJVCAtIHZvcm9ub2lcclxuICAgICAgICAgICAgICAgdm9yb25vaS5leGl0KClcclxuICAgICAgICAgICAgICAgICAgIC5yZW1vdmUoKTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vRU5URVIgLSBhcHBlbmQgdGhlIGFuaW1hbCBncm91cHNcclxuICAgICAgICAgICAgICAgbGV0IGFuaW1hbEdyb3VwaW5ncyA9IHN2Z0FuaW1hbHNcclxuICAgICAgICAgICAgICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCdnJylcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdhbmltYWwnKVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2lkJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdhbmltYWwtJyArIGRbJ2EnXTtcclxuICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gQXBwZW5kIHRoZSBjaXJjbGVzIGZvciBlYWNoIGFuaW1hbCB0byB0aGUgYW5pbWFsZ3JvdXBcclxuICAgICAgICAgICAgICAgYW5pbWFsR3JvdXBpbmdzLmFwcGVuZCgnY2lyY2xlJylcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdyJywgMS41ICogYW5pbWFsU2NhbGUpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignY3gnLCAoZCk9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRbJ3AnXVswXTtcclxuICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignY3knLCAoZCk9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC1kWydwJ11bMV07XHJcbiAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgLm9uKCdtb3VzZW92ZXInLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICB0b29sdGlwRnVuY3Rpb24oZCk7XHJcbiAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgLm9uKCdtb3VzZW91dCcsICgpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgdG9vbHRpcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAudHJhbnNpdGlvbigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC5kdXJhdGlvbig1MDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zdHlsZSgnb3BhY2l0eScsIDApO1xyXG4gICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgIC8vIGFkZCBvbiBjbGljayBmb3IgdGhlIGFjdGl2ZSBmaXNoc1xyXG4gICAgICAgICAgICAgICAgICAgLm9uKCdjbGljaycsIChkKT0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVBbmltYWxzLmluY2x1ZGVzKGRbJ2EnXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVBbmltYWxzID0gdGhpcy5hY3RpdmVBbmltYWxzLmZpbHRlcihpdGVtID0+IGl0ZW0gIT09IGRbJ2EnXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVBbmltYWxzLnB1c2goZFsnYSddKTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEkKCcjcGxheS1idXR0b24nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vZ28gYmFjayBvbmUgc2Vjb25kIGFuZCBkcmF3IHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmRleFRpbWUtLTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyBVUERBVEUgLSBhbmltYWxzIGNpcmNsZXNcclxuICAgICAgICAgICAgICAgc3ZnQW5pbWFscy5zZWxlY3QoJ2NpcmNsZScpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignY3gnLCAoZCk9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRbJ3AnXVswXTtcclxuICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignY3knLCAoZCk9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC1kWydwJ11bMV07XHJcbiAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ3InLCBhbmltYWxTY2FsZSk7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHN2Z0FuaW1hbHMuc2VsZWN0KCdjaXJjbGUnKSk7XHJcbiAgICAgICAgICAgICAgIC8vIEFwcGVuZCBmb3IgZWFjaCBncm91cCB0aGUgYXJyb3csIG5lZWRlZCBmb3IgY29sb3JpbmdcclxuICAgICAgICAgICAgICAgYW5pbWFsR3JvdXBpbmdzLmFwcGVuZCgnc3ZnOmRlZnMnKVxyXG4gICAgICAgICAgICAgICAgICAgLmFwcGVuZCgnc3ZnOm1hcmtlcicpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignaWQnLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2Fycm93LW1hcmtlci0nICsgZFsnYSddO1xyXG4gICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdyZWZYJywgMilcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdyZWZZJywgNilcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdtYXJrZXJXaWR0aCcsIDEzKVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ21hcmtlckhlaWdodCcsIDEzKVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ29yaWVudCcsICdhdXRvJylcclxuICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJ3N2ZzpwYXRoJylcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdkJywgJ00yLDIgTDIsMTEgTDEwLDYgTDIsMicpO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gQXBwZW5kIHRoZSBsaW5lIGZvciB0aGUgZGlyZWN0aW9uIGFycm93XHJcbiAgICAgICAgICAgICAgIGFuaW1hbEdyb3VwaW5nc1xyXG4gICAgICAgICAgICAgICAgICAgLmFwcGVuZCgnbGluZScpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnYXJyb3cnKVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ21hcmtlci1lbmQnLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3VybCgjYXJyb3ctbWFya2VyLScgKyBkWydhJ10gKyAnKSc7XHJcbiAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vZXhlY3V0ZSBvbmx5IHdoZW4gZHJhdyBkaXJlY3Rpb24gYnV0dG9uIGlzIGNoZWNrZWRcclxuICAgICAgICAgICAgICAgaWYgKCQoJyNkcmF3LWRpcmVjdGlvbicpXHJcbiAgICAgICAgICAgICAgICAgICAuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICAgICAgIC8vIFVQREFURSBhbmltYWwgZGlyZWN0aW9uIGFycm93XHJcbiAgICAgICAgICAgICAgICAgICBzdmdBbmltYWxzLnNlbGVjdCgnbGluZScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gxJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkWydwJ11bMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneTEnLCAoZCk9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtZFsncCddWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gyJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoZFsncCddWzBdICsgMiAqIGFuaW1hbFNjYWxlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd5MicsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKC1kWydwJ11bMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3JvdGF0ZSgnICsgLWRbJ2RpcmVjdGlvbiddICsgJyAnICsgZFsncCddWzBdICsgJyAnICsgLWRbJ3AnXVsxXSArICcpJztcclxuICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgIC8vIGhpZGUgdGhlIGFycm93c1xyXG4gICAgICAgICAgICAgICAgICAgJCgnLmFycm93JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAvLyBFWElUIC0gdGhlIGdyb3Vwc1xyXG4gICAgICAgICAgICAgICBzdmdBbmltYWxzLmV4aXQoKVxyXG4gICAgICAgICAgICAgICAgICAgLnJlbW92ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgLy9Db252ZXggaHVsbFxyXG4gICAgICAgICAgICAgICBpZiAoJCgnI2RyYXctY29udmV4LWh1bGwnKVxyXG4gICAgICAgICAgICAgICAgICAgLmlzKCc6Y2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAvLyBEQVRBIEpPSU4gLSBwYXRoc1xyXG4gICAgICAgICAgICAgICAgICAgdmFyIGh1bGxQYXRoID0gdGhpcy50YW5rLnNlbGVjdEFsbCgncGF0aC5odWxsLXBhdGgnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5kYXRhKFtzd2FybURhdGFbdGhpcy5pbmRleFRpbWVdWydjb252ZXhfaHVsbCddXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgLy8gVVBEQVRFIC0gaHVsbCBwYXRoXHJcbiAgICAgICAgICAgICAgICAgICBodWxsUGF0aFxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdkJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgIC8vIEVOVEVSIC0gaHVsbCBwYXRoc1xyXG4gICAgICAgICAgICAgICAgICAgaHVsbFBhdGguZW50ZXIoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJ3BhdGgnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdodWxsLXBhdGgnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdkJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgIC8vIGRyYXcgbm8gaHVsbFxyXG4gICAgICAgICAgICAgICAgICAgaHVsbFBhdGggPSB0aGlzLnRhbmsuc2VsZWN0KCdwYXRoLmh1bGwtcGF0aCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmRhdGEoW10pO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIC8vIEVYSVQgLSBodWxsIHBhdGhzXHJcbiAgICAgICAgICAgICAgIGh1bGxQYXRoLmV4aXQoKVxyXG4gICAgICAgICAgICAgICAgICAgLnJlbW92ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgLy9jaGFuZ2UgdGhlIGNvbG9ycyBvZiB0aGUgZmlzaFxyXG4gICAgICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVTY2FsZSAhPT0gJ2JsYWNrJykge1xyXG4gICAgICAgICAgICAgICAgICAgLy8gb25jZSB0aGUgZmlsbCBmb3IgdGhlIGhlYWRzIGFuZCB0aGUgc3Ryb2tlIGZvciB0aGUgcGF0aFxyXG4gICAgICAgICAgICAgICAgICAgdmFyIHRtcFNjYWxlID0gcmV0dXJuQ29sb3JTY2FsZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgc3ZnQW5pbWFsc1xyXG4gICAgICAgICAgICAgICAgICAgICAgIC50cmFuc2l0aW9uKClcclxuICAgICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24oMTApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdmaWxsJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG1wU2NhbGUoZFt0aGlzLmFjdGl2ZVNjYWxlXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG1wU2NhbGUoZFt0aGlzLmFjdGl2ZVNjYWxlXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAvL2NvbG9yIGV2ZXJ5IGZpc2ggYmxhY2tcclxuICAgICAgICAgICAgICAgICAgIHN2Z0FuaW1hbHNcclxuICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ2ZpbGwnLCAnIzAwMCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZScsICcjMDAwJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgaWYgKCEkLmlzRW1wdHlPYmplY3QobWV0YWRhdGFDb2xvcikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhtZXRhZGF0YUNvbG9yKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBkM1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNlbGVjdCgnI2FuaW1hbC0nICsga2V5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdmaWxsJywgbWV0YWRhdGFDb2xvcltrZXldKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZScsIG1ldGFkYXRhQ29sb3Jba2V5XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgIC8vY2hhbmdlIG9wYWN0aXkgaWYgdGhlIGZpc2ggaXMgc2VsZWN0ZWRcclxuICAgICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlQW5pbWFscy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgIHN2Z0FuaW1hbHNcclxuICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ29wYWNpdHknLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZUFuaW1hbHMuaW5jbHVkZXMoZFsnYSddKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMC4yNTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgaWYgKCQoJyNyZW1vdmUtYWN0aXZlLXNlbGVjdGVkLWJ1dHRvbicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmlzKCc6ZGlzYWJsZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICQoJyNyZW1vdmUtYWN0aXZlLXNlbGVjdGVkLWJ1dHRvbicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAkKCcjdmlzdWFsLXBhcmFtZXRlci1idXR0b24nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAvLyBpZiB0cmFja2luZyBpcyBvblxyXG4gICAgICAgICAgICAgICAgICAgaWYgKHRyYWNraW5nQm9vbGVhbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGFkZFRyYWNrZWREYXRhKGFycmF5QW5pbWFsc1swXVsndCddLCB0aGlzLmFjdGl2ZUFuaW1hbHMpO1xyXG4gICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgaWYgKCEkKCcjcmVtb3ZlLWFjdGl2ZS1zZWxlY3RlZC1idXR0b24nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5pcygnOmRpc2FibGVkJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAkKCcjcmVtb3ZlLWFjdGl2ZS1zZWxlY3RlZC1idXR0b24nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAkKCcjdmlzdWFsLXBhcmFtZXRlci1idXR0b24nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgIC8vIG5vcm1hbCBvcGFjaXR5XHJcbiAgICAgICAgICAgICAgICAgICBzdmdBbmltYWxzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgMSk7XHJcbiAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgIC8vZHJhdyBjZW50cm9pZFxyXG4gICAgICAgICAgICAgICBkMy5zZWxlY3QoJy5jZW50cm9pZCcpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignY3gnLCAoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGlmICgnY2VudHJvaWQnIGluIHN3YXJtRGF0YVswXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3dhcm1EYXRhW3RoaXMuaW5kZXhUaW1lXVsnY2VudHJvaWQnXVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2N5JywgKCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICBpZiAoJ2NlbnRyb2lkJyBpbiBzd2FybURhdGFbMF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC1zd2FybURhdGFbdGhpcy5pbmRleFRpbWVdWydjZW50cm9pZCddWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICBpZiAoJCgnI2RyYXctZGlyZWN0aW9uJykuaXMoJzpjaGVja2VkJykgJiZcclxuICAgICAgICAgICAgICAgICAgIHN3YXJtRGF0YVt0aGlzLmluZGV4VGltZV0uY2VudHJvaWQgJiZcclxuICAgICAgICAgICAgICAgICAgICQoJyNkcmF3LWNlbnRyb2lkJykuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnI2NlbnRyb2lkLWxpbmUnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdoaWRkZW4nLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAvLyBVUERBVEUgYW5pbWFsIGRpcmVjdGlvbiBhcnJvd1xyXG4gICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KCcjY2VudHJvaWQtbGluZScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gxJywgKCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN3YXJtRGF0YVt0aGlzLmluZGV4VGltZV1bJ2NlbnRyb2lkJ11bMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneTEnLCAoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLXN3YXJtRGF0YVt0aGlzLmluZGV4VGltZV1bJ2NlbnRyb2lkJ11bMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneDInLCAoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHN3YXJtRGF0YVt0aGlzLmluZGV4VGltZV1bJ2NlbnRyb2lkJ11bMF0gKyAyICogYW5pbWFsU2NhbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3kyJywgKCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC1zd2FybURhdGFbdGhpcy5pbmRleFRpbWVdWydjZW50cm9pZCddWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICgpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAncm90YXRlKCcgKyAtc3dhcm1EYXRhW3RoaXMuaW5kZXhUaW1lXVsnZGlyZWN0aW9uJ10gKyAnICcgKyBzd2FybURhdGFbdGhpcy5pbmRleFRpbWVdWydjZW50cm9pZCddWzBdICsgJyAnICsgLXN3YXJtRGF0YVt0aGlzLmluZGV4VGltZV1bJ2NlbnRyb2lkJ11bMV0gKyAnKSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAvLyBoaWRlIHRoZSBhcnJvd3NcclxuICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnI2NlbnRyb2lkLWxpbmUnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdoaWRkZW4nKTtcclxuICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgLy8gbWVkb2lkXHJcbiAgICAgICAgICAgICAgIGlmICh0aGlzLm1lZG9pZEFuaW1hbCAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgnI2FuaW1hbC0nICsgdGhpcy5tZWRvaWRBbmltYWwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ21lZG9pZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgIHRoaXMubWVkb2lkQW5pbWFsID0gc3dhcm1EYXRhW3RoaXMuaW5kZXhUaW1lXVsnbWVkb2lkJ107XHJcbiAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoJyNhbmltYWwtJyArIHRoaXMubWVkb2lkQW5pbWFsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdtZWRvaWQnLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgLy9uZXh0IGZyYW1lXHJcbiAgICAgICAgICAgICAgIHRoaXMuaW5kZXhUaW1lKys7XHJcblxyXG4gICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUxpbmVDaGFydCgpO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgIC8vY2hlY2sgaWYgcGxheSBidXR0b24gaXMgYWN0aXZlIGFuZCBpZiB0aGUgYW5pbWF0aW9uIGlzIG5vdCBmaW5pc2hlZFxyXG4gICAgICAgICAgICAgICBpZiAodGhpcy5pbmRleFRpbWUgPj0gc3dhcm1EYXRhLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgLy9zdGFydCBhZ2FpbiBmcm9tIHRoZSBzdGFydFxyXG4gICAgICAgICAgICAgICAgICAgdGhpcy5pbmRleFRpbWUgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wbGF5Qm9vbGVhbikge1xyXG4gICAgICAgICAgICAgICAgICAgLy9tZWFzdXJlIGV4ZWN1dGlvbiB0aW1lXHJcbiAgICAgICAgICAgICAgICAgICAvLyAgIGxldCB0MSA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG4gICAgICAgICAgICAgICAgICAgLy8gICBjb25zb2xlLmxvZyh0MSAtIHQwKTsgLy8gaW4gbWlsbGlzZWNvbmRzXHJcbiAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXcoKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgdGltZVRvV2FpdCk7XHJcbiAgIH1cclxuICAgZHJhd0RlbmRyb2dyYW0oKSB7XHJcbiAgICAgICAvLyBnZXQgdGhlIGFjdGl2ZSBkZW5kcm9ncmFtXHJcbiAgICAgICAvL2lkID0gJCgnLnNob3ctZGVuZHJvZ3JhbS5idG4tcHJpbWFyeScpLmF0dHIoJ2RhdGEnKTtcclxuICAgICAgIC8vIGlmIGRhdGEgaXMgYXZhaWFibGUgZHJhdyBoaWVyYXJjaHkgY2x1c3RlcnMgYW5kIGEgYnV0dG9uIGlzIGFjdGl2ZSBzZWxjdGVkXHJcbiAgICAgICBpZiAoISQuaXNFbXB0eU9iamVjdChuZXR3b3JrSGllcmFyY2h5KSAmJiB0aGlzLmlkKSB7XHJcbiAgICAgICAgICAgLy8gZ2V0IHRoZSBkYXRhIGFuZCB0cmFuc2Zvcm0gaXRcclxuICAgICAgICAgICBsZXQgdHJlZURhdGEgPSBuZXR3b3JrSGllcmFyY2h5WydoJyArIHRoaXMuaWRdW3RoaXMuaW5kZXhUaW1lXTtcclxuICAgICAgICAgICBsZXQgbm9kZXMgPSBkMy5oaWVyYXJjaHkodHJlZURhdGEsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgcmV0dXJuIGQuY2hpbGRyZW47XHJcbiAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgLy8gc2tpcCB0aGUgcm9vdCBub2RlXHJcbiAgICAgICAgICAgbm9kZXMgPSBub2Rlcy5jaGlsZHJlblswXTtcclxuICAgICAgICAgICAvLyBjb2xsYXBzZSB0aGUgdHJlZVxyXG4gICAgICAgICAgIG5vZGVzLmNoaWxkcmVuLmZvckVhY2goY29sbGFwc2UpO1xyXG5cclxuICAgICAgICAgICAvLyBtYXBzIHRoZSBub2RlIGRhdGEgdG8gdGhlIHRyZWUgbGF5b3V0XHJcbiAgICAgICAgICAgbm9kZXMgPSB0cmVlbWFwKG5vZGVzKTtcclxuICAgICAgICAgICBjb25zb2xlLmxvZyhub2Rlcyk7XHJcblxyXG4gICAgICAgICAgIC8vIGhpZGUgaWYgbm8gbmV0d29yayBpcyBjaG9vc2VuXHJcbiAgICAgICAgICAgaWYgKCQoJy5zaG93LWRlbmRyb2dyYW0uYnRuLXByaW1hcnknKS5sZW5ndGgpIHtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIHNldCB0aGUgbmV3IHNsaWRlciBtYXhcclxuICAgICAgICAgICAgICAgJCgnI2RlbmRyb2dyYW0tcGFuZWwtbGV2ZWwtc2xpZGVyJylcclxuICAgICAgICAgICAgICAgICAgIC5zbGlkZXIoJ29wdGlvbicsICdtYXgnLCAobm9kZXNbJ2hlaWdodCddIC0gMSkpXHJcbiAgICAgICAgICAgICAgICAgICAuc2xpZGVyKCd2YWx1ZScsIGhpZXJhcmNoeUxldmVsc1snaCcgKyB0aGlzLmlkXSk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyBEQVRBIEpPSU4gLSBsaW5rcyAoZWRnZXMpXHJcbiAgICAgICAgICAgICAgIGxldCBsaW5rID0gdGhpcy56b29tR3JvdXBcclxuICAgICAgICAgICAgICAgICAgIC5zZWxlY3RBbGwoJ3BhdGgubGluaycpXHJcbiAgICAgICAgICAgICAgICAgICAuZGF0YShub2Rlcy5kZXNjZW5kYW50cygpLnNsaWNlKDEpKTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIEVOVEVSXHJcbiAgICAgICAgICAgICAgIGxpbmtcclxuICAgICAgICAgICAgICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCdwYXRoJylcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsaW5rJylcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdkJywgZGlhZ29uYWxMaW5lcyk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyBUcmFuc2l0aW9uIGxpbmtzIHRvIHRoZWlyIG5ldyBwb3NpdGlvbi5cclxuICAgICAgICAgICAgICAgbGlua1xyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2QnLCBkaWFnb25hbExpbmVzKTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIEVYSVRcclxuICAgICAgICAgICAgICAgbGluay5leGl0KClcclxuICAgICAgICAgICAgICAgICAgIC5yZW1vdmUoKTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIERBVEEgSk9JTiAtIG5vZGVzXHJcbiAgICAgICAgICAgICAgIC8vIGFkZHMgZWFjaCBub2RlIGFzIGEgZ3JvdXBcclxuICAgICAgICAgICAgICAgbGV0IG5vZGUgPSB0aGlzLnpvb21Hcm91cFxyXG4gICAgICAgICAgICAgICAgICAgLnNlbGVjdEFsbCgnLm5vZGUnKVxyXG4gICAgICAgICAgICAgICAgICAgLmRhdGEobm9kZXMuZGVzY2VuZGFudHMoKSk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyBhZGQgdGhlIGdyb3VwcyB0byB0aGUgZGVuZGdyb2dyYW1cclxuICAgICAgICAgICAgICAgdmFyIG5vZGVFbnRlciA9IG5vZGUuZW50ZXIoKVxyXG4gICAgICAgICAgICAgICAgICAgLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdub2RlJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIChkLmNoaWxkcmVuID8gJyBub2RlLS1pbnRlcm5hbCcgOiAnIG5vZGUtLWxlYWYnKTtcclxuICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyBkLnggKyAnLCcgKyBkLnkgKyAnKSc7XHJcbiAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIEVOVEVSIC0gYXBwZW5kIGZvciBlYWNoIGdyb3VwIGEgbm9kZSAoY2lyY2xlKVxyXG4gICAgICAgICAgICAgICAvLyB3aXRoIGhpZ2hsaWdodGluZyBmb3IgdGhlIGFjdGl2ZSBjaG9vc2VuIGxldmVsXHJcbiAgICAgICAgICAgICAgIG5vZGVFbnRlci5hcHBlbmQoJ2NpcmNsZScpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cigncicsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGlmIChkWydkZXB0aCddID09PSBoaWVyYXJjaHlMZXZlbHNbJ2gnICsgdGhpcy5pZF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDQwICsgZC5kYXRhLm5hbWUubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAyMCArIGQuZGF0YS5uYW1lLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRbJ2RlcHRoJ10gPT09IGhpZXJhcmNoeUxldmVsc1snaCcgKyB0aGlzLmlkXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2FjdGl2ZS1sZXZlbCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnaCcgKyBkWydkYXRhJ11bJ25hbWUnXS50b1N0cmluZygpLmhhc2hDb2RlKCk7XHJcbiAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgLy8gVE9ETyBmaW5kIGEgbmljZSBmdW5jdGlvbiBmb3IgdGhlIG9uIGNsaWNrIG1ldGhvZFxyXG4gICAgICAgICAgICAgICAgICAgLm9uKCdjbGljaycsIGNsaWNrKVxyXG4gICAgICAgICAgICAgICAgICAgLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgLy8gdG9vbHRpcCBwb3NpdGlvbiBhbmQgdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXBEaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdsZWZ0JywgKGQzLmV2ZW50LnBhZ2VYICsgNSkgKyAncHgnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ3RvcCcsIChkMy5ldmVudC5wYWdlWSArIDUpICsgJ3B4JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgdG9vbHRpcERpdi5zZWxlY3QoJy50b29sdGlwLXNwYW4nKS5odG1sKGRbJ2RhdGEnXVsnbmFtZSddLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCBoaWdobGlnaHQgaW4gdGhlIHNwYXRpYWwgdmlld1xyXG4gICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSB1bmRpb24gb2YgdGhlIHBhdGhzIG1ha2VzIHRoaXMgY29tcGxpY2F0ZWRcclxuICAgICAgICAgICAgICAgICAgICAgICBhZGRIaWdobGlnaHRTcGF0aWFsVmlldyhkWydkYXRhJ11bJ25hbWUnXSk7XHJcbiAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgLm9uKCdtb3VzZW91dCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXBEaXYudHJhbnNpdGlvbigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC5kdXJhdGlvbig1MDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zdHlsZSgnb3BhY2l0eScsIDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBoaWdobGlnaHQgaW4gdGhlIHNwYXRpYWwgdmlld1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUhpZ2hsaWdodFNwYXRpYWxWaWV3KCk7XHJcbiAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIGFkZCB0aGUgdGV4dCAtICMgbnVtYmVyIG9mIGFuaW1hbHMgaW4gdGhlIGNsdXN0ZXJcclxuICAgICAgICAgICAgICAgbm9kZUVudGVyLmFwcGVuZCgndGV4dCcpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnZGVuZHJvZ3JhbS10ZXh0JylcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4JywgMTUwKVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ3knLCAtMTUwKVxyXG4gICAgICAgICAgICAgICAgICAgLnRleHQoKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuZGF0YS5uYW1lLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gVVBEQVRFIC0tIHVwZGF0ZSB0aGUgZ3JvdXBzXHJcbiAgICAgICAgICAgICAgIG5vZGVFbnRlclxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyBkLnggKyAnLCcgKyBkLnkgKyAnKSc7XHJcbiAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIHVwZGFlIHRoZSBub2RlIGFuZCBjaXJjbGVzXHJcbiAgICAgICAgICAgICAgIC8vIHdpdGggYWN0aXZlLWxldmVsIGZ1bmN0aW9uIHRvIGhpZ2hsaWdodCB3aGljaCBsZXZlbCBpcyBjaG9zZW5cclxuICAgICAgICAgICAgICAgbm9kZVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyBkLnggKyAnLCcgKyBkLnkgKyAnKSc7XHJcbiAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgLnNlbGVjdCgnY2lyY2xlJylcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdyJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRbJ2RlcHRoJ10gPT09IGhpZXJhcmNoeUxldmVsc1snaCcgK3RoaXMuaWRdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiA0MCArIGQuZGF0YS5uYW1lLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMjAgKyBkLmRhdGEubmFtZS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsIChkKT0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICBpZiAoZFsnZGVwdGgnXSA9PT0gaGllcmFyY2h5TGV2ZWxzWydoJyArdGhpcy5pZF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2FjdGl2ZS1sZXZlbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygoJ2gnICsgZFsnZGF0YSddWyduYW1lJ10udG9TdHJpbmcoKS5oYXNoQ29kZSgpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnYWN0aXZlLWxldmVsJztcclxuICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnaCcgKyBkWydkYXRhJ11bJ25hbWUnXS50b1N0cmluZygpLmhhc2hDb2RlKCk7XHJcbiAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgdGV4dCBvZiBudW1iZXIgb2YgZW50aXRpZXNcclxuICAgICAgICAgICAgICAgbm9kZS5zZWxlY3QoJ3RleHQnKVxyXG4gICAgICAgICAgICAgICAgICAgLnRleHQoKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuZGF0YS5uYW1lLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gRVhJVFxyXG4gICAgICAgICAgICAgICBub2RlLmV4aXQoKVxyXG4gICAgICAgICAgICAgICAgICAgLnJlbW92ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gY29sb3IgdGhlIGRlbmRyb2dyYW0gbm9kZXMgdXNpbmcgdGhlIHN0YW5kYXJkRGV2aWF0aW9uIGluIHRoZSBjbHVzdGVyXHJcbiAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhoaWVyYXJjaHlHcm91cFN0ZGV2KS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgIC8vIHNob3cgdGhlIGxlZ2VuZCBmb3IgdGhlIGNvbG9yaW5nXHJcbiAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhoaWVyYXJjaHlHcm91cFN0ZGV2KTtcclxuICAgICAgICAgICAgICAgICAgIC8vIFRPRE8gbGVnZW5kIGhlcmVcclxuICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdKVU1QUyBIRVJFJyk7XHJcbiAgICAgICAgICAgICAgICAgICBpZiAoJCgnI2RlbmRyb2dyYW0tbGVnZW5kJykuY3NzKCdkaXNwbGF5JykgPT0gJ25vbmUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgJCgnI2RlbmRyb2dyYW0tbGVnZW5kJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgLy8gSU1QT1JUQU5UIC0gYXN5bmMgcHJvYmxlbXNcclxuICAgICAgICAgICAgICAgICAgIC8vIFRPRE8gc29sdmUgdGhpcyAtIHZlcnkgc2xvd1xyXG4gICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIG5vZGUuc2VsZWN0KCdjaXJjbGUnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ2ZpbGwnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhoaWVyYXJjaHlHcm91cFN0ZGV2KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCgnaCcgKyBkWydkYXRhJ11bJ25hbWUnXS50b1N0cmluZygpLmhhc2hDb2RlKCkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCgnaCcgKyBkWydkYXRhJ11bJ25hbWUnXS50b1N0cmluZygpLmhhc2hDb2RlKCkpIGluIGhpZXJhcmNoeUdyb3VwU3RkZXYpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb2xvciB0aGUgbm9kZXMgYnkgY2FsY3VsYXRpbmcgdGhlIHN0YW5kYXJkRGV2aWF0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmb3IgZWFjaCBjbHVzdGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvbmx5IGFjdGl2ZSBpcyBzaG93IGluIGNsdXN0ZXIgaXMgY2hvb3NlblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCgnaCcgKyBkWydkYXRhJ11bJ25hbWUnXS50b1N0cmluZygpLmhhc2hDb2RlKCkpIGluIGhpZXJhcmNoeUdyb3VwU3RkZXYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnaGVsbG8nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhzdGFuZGFyZERldmlhdGlvbihoaWVyYXJjaHlHcm91cFN0ZGV2WygnaCcgKyBkWydkYXRhJ11bJ25hbWUnXS50b1N0cmluZygpLmhhc2hDb2RlKCkpXSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdGFuZGFyZERldmlhdGlvbkNvbG9yU2NhbGUoc3RhbmRhcmREZXZpYXRpb24oaGllcmFyY2h5R3JvdXBTdGRldlsoJ2gnICsgZFsnZGF0YSddWyduYW1lJ10udG9TdHJpbmcoKS5oYXNoQ29kZSgpKV0pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZFsnZGVwdGgnXSAhPT0gaGllcmFyY2h5TGV2ZWxzWydoJyArdGhpcy5pZF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnIzAwMCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgfSwgMjUwKTtcclxuICAgICAgICAgICAgICAgfSBlbHNlIGlmICgkKCcjZGVuZHJvZ3JhbS1sZWdlbmQnKS5jc3MoJ2Rpc3BsYXknKSAhPT0gJ25vbmUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAkKCcjZGVuZHJvZ3JhbS1sZWdlbmQnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICB9XHJcbiAgICAgICB9XHJcbiAgICAgICBpZiAoISQuaXNFbXB0eU9iamVjdChuZXR3b3JrSGllcmFyY2h5KSkge1xyXG4gICAgICAgICAgIC8vIGRyYXcgdGhlIGhpZXJhcmNoeSBpbiBzcGF0aWFsIHZpZXdcclxuICAgICAgICAgICBkcmF3SGllcmFyY2h5KCk7XHJcbiAgICAgICB9XHJcbiAgIH1cclxuICAgY3BfbGlzdGVuZXIoKSB7XHJcblxyXG4gICAgICAgLyoqXHJcbiAgICAgICAgKiBQbGF5IG9yIHN0b3AgdGhlIGFuaW1hdGlvblxyXG4gICAgICAgICovXHJcbiAgICAgICAkKCcjcGxheS1idXR0b24nKS5jbGljaygoKT0+e1xyXG4gICAgICAgICAgIGlmICgkKCcjcGxheS1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgdGhpcy5wbGF5Qm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAkKCcubWRpLXBhdXNlJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAkKCcubWRpLXBsYXknKS5zaG93KCk7XHJcbiAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgdGhpcy5wbGF5Qm9vbGVhbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICQoJy5tZGktcGxheScpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgJCgnLm1kaS1wYXVzZScpLnNob3coKTtcclxuICAgICAgICAgICAgICAgdGhpcy5zZXRJbmRleFRpbWUoc2xpZGVyLnNsaWRlcigndmFsdWUnKSk7XHJcbiAgICAgICAgICAgICAgICQoJy5icnVzaCcpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICB0aGlzLmRyYXcoKTtcclxuICAgICAgICAgICB9XHJcbiAgICAgICB9KTtcclxuXHJcbiAgICAgICAvKipcclxuICAgICAgICAqIFBhdXNlIHRoZSBhbmltYXRpb24gYW5kIHNob3cgb25seSB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICovXHJcbiAgICAgICAkKCcjbmV4dC1mcmFtZS1idXR0b24nKS5jbGljaygoKT0+e1xyXG4gICAgICAgICAgIGlmICgkKCcjcGxheS1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgdGhpcy5wbGF5Qm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgICAgICAgIH1cclxuICAgICAgICAgICAkKCcjcGxheS1idXR0b24nKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgICAgICB9KTtcclxuXHJcbiAgICAgICAvKipcclxuICAgICAgICAqIEJydXNoaW5nIGJ1dHRvblxyXG4gICAgICAgICovXHJcbiAgICAgICAkKCcjYnJ1c2hpbmctYnV0dG9uJykuY2xpY2soKCk9PntcclxuICAgICAgICAgICAvL3N0b3AgdGhlIGFuaW1hdGlvblxyXG4gICAgICAgICAgIHRoaXMucGxheUJvb2xlYW4gPSBmYWxzZTtcclxuICAgICAgICAgICAkKCcjcGxheS1idXR0b24nKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgaWYgKCEkKCcjYnJ1c2hpbmctYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgIC8vZGVmaW5lIHRoZSBicnVzaFxyXG4gICAgICAgICAgICAgICBicnVzaCA9IGQzLmJydXNoKClcclxuICAgICAgICAgICAgICAgICAgIC5leHRlbnQoW1xyXG4gICAgICAgICAgICAgICAgICAgICAgIFswLCAwXSxcclxuICAgICAgICAgICAgICAgICAgICAgICBbdGhpcy50YW5rV2lkdGgsIHRoaXMudGFua0hlaWdodF1cclxuICAgICAgICAgICAgICAgICAgIF0pXHJcbiAgICAgICAgICAgICAgICAgICAub24oJ2VuZCcsIGJydXNoZW5kKTtcclxuICAgICAgICAgICAgICAgLy9hZGQgdGhlIGJydXNoXHJcbiAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnI21haW4tdmlzLXN2ZycpXHJcbiAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCdnJylcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdicnVzaCcpXHJcbiAgICAgICAgICAgICAgICAgICAuY2FsbChicnVzaCk7XHJcbiAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgLy8gcmVtb3ZlIHRoZSBicnVzaFxyXG4gICAgICAgICAgICAgICAkKCcuYnJ1c2gnKS5yZW1vdmUoKTtcclxuICAgICAgICAgICB9XHJcbiAgICAgICB9KTtcclxuXHJcbiAgICAgICAvKipcclxuICAgICAgICAqIFVuc2VsZWN0IGFsbCBidXR0b25cclxuICAgICAgICAqL1xyXG4gICAgICAgJCgnI3JlbW92ZS1hY3RpdmUtc2VsZWN0ZWQtYnV0dG9uJykuY2xpY2soKCk9PntcclxuICAgICAgICAgICBpZiAoISQoJyNyZW1vdmUtYWN0aXZlLXNlbGVjdGVkLWJ1dHRvbicpLmlzKCc6ZGlzYWJsZWQnKSkge1xyXG4gICAgICAgICAgICAgICAkKCcjcmVtb3ZlLWFjdGl2ZS1zZWxlY3RlZC1idXR0b24nKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgICAgICAgICAgICBzZXRBY3RpdmVBbmltYWxzKFtdKTtcclxuICAgICAgICAgICAgICAgLy8gdHJhY2tpbmcgb2YgZGF0YSBmb3IgdmlzdWFsIHBhcmFtZXRlciBzdWdnZXN0aW9uXHJcbiAgICAgICAgICAgICAgIHJlc2V0VHJhY2tlZERhdGEoKTtcclxuICAgICAgICAgICAgICAgJCgnI3Zpc3VhbC1wYXJhbWV0ZXItYnV0dG9uJykucHJvcCgnZGlzYWJsZWQnLCB0cnVlKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcblxyXG4gICAgICAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgLy9nbyBiYWNrIG9uZSBzZWNvbmQgYW5kIGRyYXcgdGhlIG5leHQgZnJhbWVcclxuICAgICAgICAgICAgICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuXHJcbiAgICAgICAgICAgICAgICAgICB0aGlzLmRlY0luZGV4VGltZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICB9XHJcbiAgICAgICB9KTtcclxuXHJcbiAgICAgICAvKipcclxuICAgICAgICAqIFRyYWNrIHZpc3VhbCBwYXJhbWV0ZXIgYnV0dG9uXHJcbiAgICAgICAgKi9cclxuICAgICAgICQoJyN2aXN1YWwtcGFyYW1ldGVyLWJ1dHRvbicpLmNsaWNrKCgpPT57XHJcbiAgICAgICAgICAgaWYgKCQoJyN2aXN1YWwtcGFyYW1ldGVyLWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICBzZXRUcmFja2luZ0Jvb2xlYW4oZmFsc2UpO1xyXG4gICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgIHNldFRyYWNraW5nQm9vbGVhbih0cnVlKTtcclxuICAgICAgICAgICB9XHJcbiAgICAgICB9KTtcclxuXHJcbiAgICAgICAvKipcclxuICAgICAgICAqIFNlbmQgdGhlIHRyYWNrZWQgdmlhIGEgYWpheCBxdWVyeSB0byB0aGUgc2VydmVyIHRvIGNhbGN1bGF0ZSB0aGUgcGFyYW1ldGVyc1xyXG4gICAgICAgICovXHJcbiAgICAgICAkKCcjY2FsY3VsYXRlLXBhcmFtZXRlci1idXR0b24nKS5jbGljaygoKT0+e1xyXG4gICAgICAgICAgIGlmICghJCgnI2NhbGN1bGF0ZS1wYXJhbWV0ZXItYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgIHNldFRyYWNraW5nQm9vbGVhbihmYWxzZSk7XHJcbiAgICAgICAgICAgICAgIHNlbmRUcmFja2VkRGF0YSgpO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gZGlzYWJsZSBib3RoIGJ1dHRvbnMgYW5kIHJlbW92ZSB0aGUgYWN0aXZlIG9uZVxyXG4gICAgICAgICAgICAgICAkKCcjY2FsY3VsYXRlLXBhcmFtZXRlci1idXR0b24nKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAkKCcjY2FsY3VsYXRlLXBhcmFtZXRlci1idXR0b24nKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICQoJyN2aXN1YWwtcGFyYW1ldGVyLWJ1dHRvbicpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICB9XHJcbiAgICAgICB9KTtcclxuXHJcbiAgICAgICAvKipcclxuICAgICAgICAqIFNwYXRpYWwgdmlldyBiYWNrZ3JvdW5kIGNvbG9yXHJcbiAgICAgICAgKi9cclxuICAgICAgICQoJyNiYWNrZ3JvdW5kLWNvbG9yJykuY2hhbmdlKCgpPT57XHJcbiAgICAgICAgICAgbGV0IGNvbG9yID0gJCgnaW5wdXRbdHlwZT1cInJhZGlvXCJdLmdyb3VwLWJhY2tncm91bmQ6Y2hlY2tlZCcpLnZhbCgpO1xyXG4gICAgICAgICAgICQoJyNtYWluLXZpcy1zdmcnKS5jc3MoJ2JhY2tncm91bmQtY29sb3InLCBjb2xvcik7XHJcbiAgICAgICB9KTtcclxuXHJcbiAgICAgICAvKipcclxuICAgICAgICAqIFNob3cgdGhlIHNwYXRpYWwgdmlldyBheGlzIGJ1dHRvblxyXG4gICAgICAgICovXHJcbiAgICAgICAkKCcjZHJhdy1heGlzJykub24oJ2NoYW5nZScsICgpPT4ge1xyXG4gICAgICAgICAgIGlmICh0aGlzLmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgJCgnI21haW4tdmlzIGcueC5heGlzJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAkKCcjbWFpbi12aXMgZy55LmF4aXMnKS5zaG93KCk7XHJcbiAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgJCgnI21haW4tdmlzIGcueC5heGlzJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAkKCcjbWFpbi12aXMgZy55LmF4aXMnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgfVxyXG5cclxuICAgICAgIH0pO1xyXG5cclxuICAgICAgIC8qKlxyXG4gICAgICAgICogU2hvdyB0aGUgZnJhbWUgKHRpbWUpIG51bWJlciBpbiB0aGUgc3BhdGlhbCB2aWV3IGJ1dHRvblxyXG4gICAgICAgICovXHJcbiAgICAgICAkKCcjZHJhdy10aW1lJykub24oJ2NoYW5nZScsICgpPT57XHJcbiAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICAkKCcjbWFpbi12aXMgLmZyYW1lLXRleHQnKS5zaG93KCk7XHJcbiAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgJCgnI21haW4tdmlzIC5mcmFtZS10ZXh0JykuaGlkZSgpO1xyXG4gICAgICAgICAgIH1cclxuICAgICAgIH0pO1xyXG5cclxuICAgICAgIC8qKlxyXG4gICAgICAgICogRHJhdyB0aGUgbmV0d29yayBiYWNrZ3JvdW5kIGNvbG9yXHJcbiAgICAgICAgKi9cclxuICAgICAgICQoJyNuZXR3b3JrLWJhY2tncm91bmQnKS5vbignY2hhbmdlJywgKCk9PiB7XHJcbiAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICBzZXROZXR3b3JrQmFja2dyb3VuZCh0cnVlKTtcclxuICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICBzZXROZXR3b3JrQmFja2dyb3VuZChmYWxzZSk7XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgfSk7XHJcblxyXG4gICAgICAgLyoqXHJcbiAgICAgICAgKiBTZXQgdGhlIG5ldHdvcmsgYmFja2dyb3VuZCBlZGdlIGxpbWl0XHJcbiAgICAgICAgKi9cclxuICAgICAgICQoJyNuZXR3b3JrLWJhY2tncm91bmQtbGltaXQnKS52YWwoMSk7XHJcbiAgICAgICAkKCcjbmV0d29yay1iYWNrZ3JvdW5kLWxpbWl0Jykub24oJ2NoYW5nZScsICgpPT57XHJcbiAgICAgICAgICAgbGV0IHZhbCA9ICQodGhpcykudmFsKCk7XHJcbiAgICAgICAgICAgaWYgKCQuaXNOdW1lcmljKHZhbCkgJiYgdmFsID4gMCkge1xyXG4gICAgICAgICAgICAgICBzZXROZXR3b3JrQmFja2dyb3VuZExpbWl0KHZhbCk7XHJcbiAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgJCh0aGlzKS52YWwoMSk7XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgfSk7XHJcblxyXG4gICAgICAgLyoqXHJcbiAgICAgICAgKiBDb2xvciBTY2FsZSBGdW5jdGlvbiBSYWRpbyBidXR0b25zXHJcbiAgICAgICAgKi9cclxuICAgICAgICQoJyNjb2xvci1zY2FsZS1yYWRpby1mb3JtIGlucHV0Jykub24oJ2NoYW5nZScsICgpPT57XHJcbiAgICAgICAgICAgY29sb3JTY2FsZVsndHlwZSddID0gJCgnaW5wdXRbbmFtZT1jb2xvci1zY2FsZS1yYWRpb106Y2hlY2tlZCcsICcjY29sb3Itc2NhbGUtcmFkaW8tZm9ybScpLnZhbCgpO1xyXG4gICAgICAgICAgIGlmICghJCgnI3BsYXktYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgIC8vZ28gYmFjayBvbmUgc2Vjb25kIGFuZCBkcmF3IHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAgICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuICAgICAgICAgICAgICAgdGhpcy5kZWNJbmRleFRpbWUoKTtcclxuICAgICAgICAgICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgfSk7XHJcbiAgIH1cclxuICAgc2ZfbGlzdGVuZXJzKCkge1xyXG5cclxuICAgICAgIC8qKlxyXG4gICAgICAgICogRHJhdyBkaXJlY3Rpb24gYXJyb3cgb2YgdGhlIGFuaW1hbFxyXG4gICAgICAgICovXHJcbiAgICAgICAkKCcjZHJhdy1kaXJlY3Rpb24nKS5jbGljaygoKT0+e1xyXG4gICAgICAgICAgIGlmICgkKCcjZHJhdy1kaXJlY3Rpb24nKS5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgICBpZiAoISgnZGlyZWN0aW9uJyBpbiBkYXRhc2V0WzBdKSkge1xyXG4gICAgICAgICAgICAgICAgICAgZGlzYWJsZVBsYXlCdXR0b24oKTtcclxuICAgICAgICAgICAgICAgICAgIC8vIGFqYXggcXVlcnkgdG8gZ2V0IGRpcmVjdGlvbiBkYXRhXHJcbiAgICAgICAgICAgICAgICAgICBnZXREYXRhc2V0RmVhdHVyZSgnZGlyZWN0aW9uJyk7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgJCgnLmFycm93Jykuc2hvdygpO1xyXG4gICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICQoJy5hcnJvdycpLmhpZGUoKTtcclxuICAgICAgICAgICB9XHJcbiAgICAgICAgICAgaWYgKCEkKCcjcGxheS1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAgLy9nbyBiYWNrIG9uZSBzZWNvbmQgYW5kIGRyYXcgdGhlIG5leHQgZnJhbWVcclxuICAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgICAvL3RoaXMuZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgICAgICAgIC8vdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgfSk7XHJcblxyXG4gICAgICAgLyoqXHJcbiAgICAgICAgKiBEcmF3IG1lZG9pZCBpbiBjb2xvciBidXR0b25cclxuICAgICAgICAqL1xyXG4gICAgICAgJCgnI2RyYXctbWVkb2lkJykuY2xpY2soKCkgPT4ge1xyXG4gICAgICAgICAgIGlmICgkKCcjZHJhdy1tZWRvaWQnKS5pcygnOmNoZWNrZWQnKSkge1xyXG5cclxuICAgICAgICAgICAgICAgaWYgKCEoJ21lZG9pZCcgaW4gc3dhcm1EYXRhWzBdKSkge1xyXG4gICAgICAgICAgICAgICAgICAgZ2V0U3dhcm1EYXRhc2V0RmVhdHVyZSgnbWVkb2lkJyk7XHJcblxyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIHRoaXMuc2V0TWVkb2lkQW5pbWFsKHN3YXJtRGF0YVt0aGlzLmluZGV4VGltZV1bJ21lZG9pZCddKTtcclxuICAgICAgICAgICAgICAgLy8gZGlzcGxheSB0aGUgbWVkb2lkXHJcbiAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgnI2FuaW1hbC0nICsgdGhpcy5tZWRvaWRBbmltYWwpXHJcbiAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnbWVkb2lkJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgLy8gZG8gbm90IGRpc3BsYXkgdGhlIG1lZG9pZCBmaXNoXHJcbiAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgnI2FuaW1hbC0nICsgdGhpcy5tZWRvaWRBbmltYWwpXHJcbiAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnbWVkb2lkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICB0aGlzLnNldE1lZG9pZEFuaW1hbCgtMSk7XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgfSk7XHJcblxyXG4gICAgICAgLyoqXHJcbiAgICAgICAgKiBEcmF3IGNlbnRyb2lkIGJ1dHRvblxyXG4gICAgICAgICovXHJcbiAgICAgICAkKCcjZHJhdy1jZW50cm9pZCcpLmNsaWNrKCgpPT57XHJcbiAgICAgICAgICAgaWYgKCQoJyNkcmF3LWNlbnRyb2lkJykuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICAgaWYgKCEoJ2NlbnRyb2lkJyBpbiBzd2FybURhdGFbMF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICBnZXRTd2FybURhdGFzZXRGZWF0dXJlKCdjZW50cm9pZCcpO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIC8vIGRpc3BsYXkgdGhlIGNlbnRyb2lkXHJcbiAgICAgICAgICAgICAgICQoJyNnLWNlbnRyb2lkJykuc2hvdygpO1xyXG4gICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgIC8vIGhpZGUgdGhlIGNlbnRyb2lkXHJcbiAgICAgICAgICAgICAgICQoJyNnLWNlbnRyb2lkJykuaGlkZSgpO1xyXG4gICAgICAgICAgIH1cclxuICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAvKipcclxuICAgICAgICAqIERyYXcgY29udmV4IGh1bGwgaW4gY29sb3IgYnV0dG9uXHJcbiAgICAgICAgKi9cclxuICAgICAgICQoJyNkcmF3LWNvbnZleC1odWxsJykuY2xpY2soKCk9PntcclxuICAgICAgICAgICBpZiAoJCgnI2RyYXctY29udmV4LWh1bGwnKS5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgICBpZiAoISgnaHVsbCcgaW4gc3dhcm1EYXRhWzBdKSkge1xyXG4gICAgICAgICAgICAgICAgICAgZ2V0U3dhcm1EYXRhc2V0RmVhdHVyZSgnY29udmV4X2h1bGwnKTtcclxuXHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICB9XHJcbiAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgLyoqXHJcbiAgICAgICAgKiBEcmF3IHRyaWFuZ3VsYXRpb25cclxuICAgICAgICAqL1xyXG4gICAgICAgJCgnI2RyYXctdHJpYW5ndWxhdGlvbicpLmNsaWNrKCgpPT57XHJcbiAgICAgICAgICAgaWYgKCQoJyNkcmF3LXRyaWFuZ3VsYXRpb24nKS5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgICBpZiAoISgndHJpYW5ndWxhdGlvbicgaW4gc3dhcm1EYXRhWzBdKSkge1xyXG4gICAgICAgICAgICAgICAgICAgZ2V0U3dhcm1EYXRhc2V0RmVhdHVyZSgndHJpYW5ndWxhdGlvbicpO1xyXG5cclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgLy9nbyBiYWNrIG9uZSBzZWNvbmQgYW5kIGRyYXcgdGhlIG5leHQgZnJhbWVcclxuICAgICAgICAgICAgICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuICAgICAgICAgICAgICAgICAgIHRoaXMuZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXcoKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgIH1cclxuICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAvKipcclxuICAgICAgICAqIERyYXcgdm9yb25vaVxyXG4gICAgICAgICovXHJcbiAgICAgICAkKCcjZHJhdy12b3Jvbm9pJykuY2xpY2soKCk9PntcclxuICAgICAgICAgICBpZiAoJCgnI2RyYXctdm9yb25vaScpLmlzKCc6Y2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICAgIGlmICghKCd2b3Jvbm9pJyBpbiBzd2FybURhdGFbMF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICBnZXRTd2FybURhdGFzZXRGZWF0dXJlKCd2b3Jvbm9pJyk7XHJcblxyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIGlmICghJCgnI3BsYXktYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgICAgICAgdGhpcy5kZWNJbmRleFRpbWUoKTtcclxuICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgfSk7XHJcblxyXG5cclxuICAgfVxyXG5cclxuXHJcbiB9XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIFNwYXRpYWxWaWV3IGV4dGVuZHMgRHJhd2Vye1xyXG4gIGNvbnN0cnVjdG9yKGRhdGEpe1xyXG4gICAgc3VwZXIoZGF0YSk7XHJcblxyXG5cclxuICAgIHRoaXMuc3BhdGlhbFZpZXdJbml0KCk7XHJcbiAgICAvL3RoaXMuY3BfbGlzdGVuZXIoKTtcclxuICB9XHJcbiAgc3BhdGlhbFZpZXdJbml0KCl7XHJcblxyXG5cclxuXHJcbiAgICAgIGxldCBtaW5Qb2ludCA9IHBhcmFtZXRlcnNbJ21pbiddWydnZW9tZXRyeSddWydjb29yZGluYXRlcyddO1xyXG4gICAgICBsZXQgbWF4UG9pbnQgPSBwYXJhbWV0ZXJzWydtYXgnXVsnZ2VvbWV0cnknXVsnY29vcmRpbmF0ZXMnXTtcclxuICAgICAgLy8gbGV0IGNvb3JkaW5hdGVPcmlnaW4gPSBwYXJhbWV0ZXJzWydjb29yZGluYXRlX29yaWdpbiddWydnZW9tZXRyeSddWydjb29yZGluYXRlcyddO1xyXG4gICAgICAvLyB3aWR0aCA9IHdpZHRoICoxLjAyIC0tPiBzbyB0aGVyZSBpcyBhIG1hcmdpbiBpbiB0aGUgc3BhdGlhbCB2aWV3IHdoZXJlIG5vIGFuaW1hbCBpcyBldmVyXHJcbiAgICAgIHRoaXMudGFua1dpZHRoID0gKG1heFBvaW50WzBdIC0gbWluUG9pbnRbMF0pICogMS4wMjtcclxuICAgICAgdGhpcy50YW5rSGVpZ2h0ID0gKG1heFBvaW50WzFdIC0gbWluUG9pbnRbMV0pICogMS4wMjtcclxuICAgICAgLy9YIGFuZCBZIGF4aXNcclxuICAgICAgbGV0IHggPSBkMy5zY2FsZUxpbmVhcigpXHJcbiAgICAgICAgICAuZG9tYWluKFttaW5Qb2ludFswXSwgbWF4UG9pbnRbMF1dKVxyXG4gICAgICAgICAgLnJhbmdlKFttaW5Qb2ludFswXSwgbWF4UG9pbnRbMF1dKTtcclxuXHJcbiAgICAgIGxldCB4QXhpcyA9IGQzLmF4aXNCb3R0b20oeClcclxuICAgICAgICAgIC50aWNrcygxMClcclxuICAgICAgICAgIC50aWNrU2l6ZSgxMClcclxuICAgICAgICAgIC50aWNrUGFkZGluZyg1KTtcclxuXHJcbiAgICAgIGxldCB5ID0gZDMuc2NhbGVMaW5lYXIoKVxyXG4gICAgICAgICAgLmRvbWFpbihbbWluUG9pbnRbMV0sIG1heFBvaW50WzFdXSlcclxuICAgICAgICAgIC5yYW5nZShbbWluUG9pbnRbMV0sIG1heFBvaW50WzFdXSk7XHJcblxyXG4gICAgICBsZXQgeUF4aXMgPSBkMy5heGlzUmlnaHQoeSlcclxuICAgICAgICAgIC50aWNrcyg3KVxyXG4gICAgICAgICAgLnRpY2tTaXplKDEwKVxyXG4gICAgICAgICAgLnRpY2tQYWRkaW5nKDUpO1xyXG5cclxuICAgICAgLy8gWk9PTUlORyBBTkQgUEFOTklORyBTVFVGRlxyXG5cclxuICAgICAgbGV0IHpvb20gPSBkMy56b29tKClcclxuICAgICAgICAgIC5zY2FsZUV4dGVudChbMSwgNl0pXHJcbiAgICAgICAgICAub24oJ3pvb20nLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgLy9jb25zdHJhaW5lZCB6b29taW5nXHJcbiAgICAgICAgICAgICAgLy8gbW9kaWZ5IHRoZSB0cmFuc2xhdGUgc28gdGhhdCBpdCBuZXZlciBleGl0cyB0aGUgdGFua1xyXG4gICAgICAgICAgICAgIGQzLmV2ZW50LnRyYW5zZm9ybS54ID0gTWF0aC5taW4oMCwgdGhpcy50YW5rV2lkdGggKiAoZDMuZXZlbnQudHJhbnNmb3JtLmsgLSAxKSxcclxuICAgICAgICAgICAgICAgICAgTWF0aC5tYXgodGhpcy50YW5rV2lkdGggKiAoMSAtIGQzLmV2ZW50LnRyYW5zZm9ybS5rKSwgZDMuZXZlbnQudHJhbnNmb3JtLngpKTtcclxuXHJcbiAgICAgICAgICAgICAgZDMuZXZlbnQudHJhbnNmb3JtLnkgPSBNYXRoLm1pbigwLCB0aGlzLnRhbmtIZWlnaHQgKiAoZDMuZXZlbnQudHJhbnNmb3JtLmsgLSAxKSxcclxuICAgICAgICAgICAgICAgICAgTWF0aC5tYXgodGhpcy50YW5rSGVpZ2h0ICogKDEgLSBkMy5ldmVudC50cmFuc2Zvcm0uayksIGQzLmV2ZW50LnRyYW5zZm9ybS55KSk7XHJcblxyXG4gICAgICAgICAgICAgIC8vIHRyYW5zbGF0ZSBhbmQgc2NhbGVcclxuICAgICAgICAgICAgICB0aGlzLnpvb21Hcm91cC5hdHRyKCd0cmFuc2Zvcm0nLCBkMy5ldmVudC50cmFuc2Zvcm0pO1xyXG5cclxuICAgICAgICAgICAgICAvLyByZXNjYWxlIHRoZSBheGlzXHJcbiAgICAgICAgICAgICAgZ1hheGlzLmNhbGwoeEF4aXMuc2NhbGUoZDMuZXZlbnQudHJhbnNmb3JtLnJlc2NhbGVYKHgpKSk7XHJcbiAgICAgICAgICAgICAgZ1lheGlzLmNhbGwoeUF4aXMuc2NhbGUoZDMuZXZlbnQudHJhbnNmb3JtLnJlc2NhbGVZKHkpKSk7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgIC8vdGhlIHN2ZyBjb250YWluZXJcclxuICAgICAgdGhpcy5zdmdDb250YWluZXIgPSBkMy5zZWxlY3QoJyNtYWluLXZpcycpXHJcbiAgICAgICAgICAgIC5jbGFzc2VkKCdzdmctY29udGFpbmVyJywgdHJ1ZSlcclxuICAgICAgICAgICAgLy8gdG8gbWFrZSBpdCByZXNwb25zaXZlIHdpdGggY3NzXHJcbiAgICAgICAgICAgIC5hcHBlbmQoJ3N2ZycpXHJcbiAgICAgICAgICAgIC5hdHRyKCdwcmVzZXJ2ZUFzcGVjdFJhdGlvJywgJ3hNaW5ZTWluIG1lZXQnKVxyXG4gICAgICAgICAgICAuYXR0cigndmlld0JveCcsICcwIDAgJyArIHRoaXMudGFua1dpZHRoICsgJyAnICsgdGhpcy50YW5rSGVpZ2h0KVxyXG4gICAgICAgICAgICAvLyBhZGQgdGhlIGNsYXNzIHN2Zy1jb250ZW50XHJcbiAgICAgICAgICAgIC5jbGFzc2VkKCdzdmctY29udGVudCcsIHRydWUpXHJcbiAgICAgICAgICAgIC5hdHRyKCdpZCcsICdtYWluLXZpcy1zdmcnKVxyXG4gICAgICAgICAgICAuY2FsbCh6b29tKTtcclxuXHJcbiAgICAgIC8qIGRlcGVuZHMgb24gc3ZnIHJhdGlvLCBmb3IgZS5nIDEyNDAvMTkwMCA9IDAuNjUgc28gcGFkZGluZy1ib3R0b20gPSA2NSUgKi9cclxuICAgICAgbGV0IHBlcmNlbnRhZ2UgPSBNYXRoLmNlaWwoKHRoaXMudGFua0hlaWdodCAvIHRoaXMudGFua1dpZHRoKSAqIDEwMCk7XHJcbiAgICAgICQoJyNtYWluLXZpcycpLmFwcGVuZCgkKCc8c3R5bGU+I21haW4tdmlzOjphZnRlciB7cGFkZGluZy10b3A6ICcgKyBwZXJjZW50YWdlICsgJyU7ZGlzcGxheTogYmxvY2s7Y29udGVudDogXCJcIjt9PC9zdHlsZT4gJykpO1xyXG5cclxuICAgICAgdGhpcy56b29tR3JvdXAgPSB0aGlzLnN2Z0NvbnRhaW5lci5hcHBlbmQoJ3N2ZzpnJyk7XHJcblxyXG4gICAgICAvLyBWaXN1YWxpemUgdGhlIGJhY2tncm91bmQgaW1hZ2UgaWYgaXQgaXMgdXBsb2FkZWRcclxuICAgICAgaWYgKHBhcmFtZXRlcnMuYmFja2dyb3VuZF9pbWFnZSkge1xyXG4gICAgICAgICAgdGhpcy56b29tR3JvdXBcclxuICAgICAgICAgICAgICAuYXBwZW5kKCdpbWFnZScpXHJcbiAgICAgICAgICAgICAgLmF0dHIoJ3hsaW5rOmhyZWYnLCAnLycgKyBwYXJhbWV0ZXJzLmJhY2tncm91bmRfaW1hZ2UpXHJcbiAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2JhY2tncm91bmQtaW1hZ2UnKVxyXG4gICAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCB0aGlzLnRhbmtIZWlnaHQpXHJcbiAgICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgdGhpcy50YW5rV2lkdGgpXHJcbiAgICAgICAgICAgICAgLmF0dHIoJ3gnLCAnMCcpXHJcbiAgICAgICAgICAgICAgLmF0dHIoJ3knLCAnMCcpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvL2FwcGVuZCB0aGUgdGFuayBncm91cCB3aXRoIGEgdHJhbnNmb3JtYXRpb24gd2hpY2ggcm90YXRlcyB0aGUgeSBheGlzXHJcbiAgICAgIHRoaXMudGFuayA9IHRoaXMuem9vbUdyb3VwLmFwcGVuZCgnc3ZnOmcnKVxyXG4gICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3RhbmsnKVxyXG4gICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICgpPT57XHJcbiAgICAgICAgICAgICAgbGV0IHggPSBwYXJhbWV0ZXJzLmludmVydGVkX3ggPyAtMSA6IDE7XHJcbiAgICAgICAgICAgICAgbGV0IHkgPSBwYXJhbWV0ZXJzLmludmVydGVkX3kgPyAtMSA6IDE7XHJcbiAgICAgICAgICAgICAgcmV0dXJuICdzY2FsZSgnICsgeCArICcsJyArIHkgKyAnKSc7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgIC8vYWRkIHRoZSBjZW50cm9pZFxyXG4gICAgICB0aGlzLnRhbmsuYXBwZW5kKCdnJylcclxuICAgICAgICAgIC5hdHRyKCdpZCcsICdnLWNlbnRyb2lkJylcclxuICAgICAgICAgIC5hcHBlbmQoJ2NpcmNsZScpXHJcbiAgICAgICAgICAuYXR0cignY2xhc3MnLCAnY2VudHJvaWQnKVxyXG4gICAgICAgICAgLmF0dHIoJ3InLCA2KVxyXG4gICAgICAgICAgLmF0dHIoJ2N4JywgMClcclxuICAgICAgICAgIC5hdHRyKCdjeScsIDApO1xyXG5cclxuICAgICAgLy8gYXJyb3cgZm9yIHRoZSBjZW50cm9pZCBkaXJlY3Rpb25cclxuICAgICAgdGhpcy50YW5rLnNlbGVjdCgnI2ctY2VudHJvaWQnKVxyXG4gICAgICAgICAgLmFwcGVuZCgnc3ZnOmRlZnMnKVxyXG4gICAgICAgICAgLmFwcGVuZCgnc3ZnOm1hcmtlcicpXHJcbiAgICAgICAgICAuYXR0cignaWQnLCAnY2VudHJvaWQtYXJyb3cnKVxyXG4gICAgICAgICAgLmF0dHIoJ3JlZlgnLCAyKVxyXG4gICAgICAgICAgLmF0dHIoJ3JlZlknLCA2KVxyXG4gICAgICAgICAgLmF0dHIoJ21hcmtlcldpZHRoJywgMTMpXHJcbiAgICAgICAgICAuYXR0cignbWFya2VySGVpZ2h0JywgMTMpXHJcbiAgICAgICAgICAuYXR0cignb3JpZW50JywgJ2F1dG8nKVxyXG4gICAgICAgICAgLmFwcGVuZCgnc3ZnOnBhdGgnKVxyXG4gICAgICAgICAgLmF0dHIoJ2QnLCAnTTIsMiBMMiwxMSBMMTAsNiBMMiwyJyk7XHJcblxyXG4gICAgICAvLyBBcHBlbmQgdGhlIGxpbmUgZm9yIHRoZSBkaXJlY3Rpb24gYXJyb3dcclxuICAgICAgdGhpcy50YW5rLnNlbGVjdCgnI2ctY2VudHJvaWQnKVxyXG4gICAgICAgICAgLmFwcGVuZCgnbGluZScpXHJcbiAgICAgICAgICAuYXR0cignaWQnLCAnY2VudHJvaWQtbGluZScpXHJcbiAgICAgICAgICAuYXR0cignbWFya2VyLWVuZCcsICd1cmwoI2NlbnRyb2lkLWFycm93KScpO1xyXG5cclxuICAgICAgLy9hcHBlbmQgbmV0d29yayAgZ3JvdXBcclxuICAgICAgdGhpcy50YW5rLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAuYXR0cignaWQnLCAnbmV0d29yay1ncm91cCcpO1xyXG5cclxuICAgICAgLy9hcHBlbmQgZGVsYXVuYXktdHJpYW5ndWxhdGlvbiBncm91cFxyXG4gICAgICB0aGlzLnRhbmsuYXBwZW5kKCdnJylcclxuICAgICAgICAgIC5hdHRyKCdpZCcsICdkZWxhdW5heS10cmlhbmd1bGF0aW9uLWdyb3VwJyk7XHJcblxyXG4gICAgICAvL2FwcGVuZCB2b3Jvbm9pIGdyb3VwXHJcbiAgICAgIHRoaXMudGFuay5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgLmF0dHIoJ2lkJywgJ3Zvcm5vaS1ncm91cCcpO1xyXG5cclxuICAgICAgLy9hcHBlbmQgdGhlIGZyYW1lIHRpbWUgdGV4dFxyXG4gICAgICB0aGlzLnN2Z0NvbnRhaW5lci5hcHBlbmQoJ3RleHQnKVxyXG4gICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2ZyYW1lLXRleHQnKVxyXG4gICAgICAgICAgLmF0dHIoJ3gnLCAzMClcclxuICAgICAgICAgIC5hdHRyKCd5JywgMzApXHJcbiAgICAgICAgICAudGV4dCgnLS0gOiAtLSA6IC0tICcpO1xyXG5cclxuICAgICAgLy8gYWRkIHRoZSBheGlzXHJcbiAgICAgIGxldCBnWGF4aXMgPSB0aGlzLnN2Z0NvbnRhaW5lci5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3ggYXhpcycpXHJcbiAgICAgICAgICAuY2FsbCh4QXhpcyk7XHJcblxyXG4gICAgICBsZXQgZ1lheGlzID0gdGhpcy5zdmdDb250YWluZXIuYXBwZW5kKCdnJylcclxuICAgICAgICAgIC5hdHRyKCdjbGFzcycsICd5IGF4aXMnKVxyXG4gICAgICAgICAgLmNhbGwoeUF4aXMpO1xyXG5cclxuICAgICAgLy8gaW5pdCBzdHVmZiBmcm9tIG90aGVyIG1vZHVsZXNcclxuICAgICAgaW5pdFRvb2x0aXAoKTtcclxuICAgICAgaW5pdFNsaWRlcnMoKTtcclxuICAgICAgYWRkU3BhdGlhbFZpZXdHcm91cCgpO1xyXG4gICAgICBpbml0Q29sb3JQaWNrZXIoKTtcclxuICAgICAgdmFyIGxpbmVjaGFydCA9IG5ldyBMaW5lQ2hhcnQoc3dhcm1EYXRhKTtcclxuICAgICAgdGhpcy5jcF9saXN0ZW5lcigpO1xyXG4gICAgICB0aGlzLnNmX2xpc3RlbmVycygpO1xyXG4gICAgICAvL3ZhciBkZW5kcm9ncmFtID0gbmV3IERlbmRyb2dyYW0oKTtcclxuICAgICAgbWFrZVJlc2l6YWJsZSh0aGlzLnRhbmtIZWlnaHQsIHRoaXMudGFua1dpZHRoKTtcclxuICAgICAgZGVmYXVsdENvbmZpZygpO1xyXG4gICAgICAvLyBzdGFydCB0aGUgYW5pbWF0aW9uXHJcbiAgICAgIHRoaXMuZHJhdygpO1xyXG4gIH07XHJcbiAgc2V0TWVkb2lkQW5pbWFsKHZhbHVlKSB7XHJcbiAgICAgIHRoaXMubWVkb2lkQW5pbWFsID0gdmFsdWU7XHJcbiAgfVxyXG5cclxufVxyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBMaXN0ZW5lciBleHRlbmRzIERyYXdlciB7XHJcbiAgY29uc3RydWN0b3IoKXtcclxuICAgIHN1cGVyKCk7XHJcbiAgICB0aGlzLmNwX2xpc3RlbmVyKCk7XHJcbiAgICB0aGlzLnNmX2xpc3RlbmVycygpO1xyXG4gICAgdGhpcy5hZl9saXN0ZW5lcnMoKTtcclxuICAgIHRoaXMubWRfbGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLm5fbGlzdGVuZXJzKCk7XHJcbiAgICAvL3RoaXMuaF9saXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG5cclxuICBjcF9saXN0ZW5lcigpIHtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBQbGF5IG9yIHN0b3AgdGhlIGFuaW1hdGlvblxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI3BsYXktYnV0dG9uJykuY2xpY2soKCk9PntcclxuICAgICAgICAgIGlmICgkKCcjcGxheS1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICB0aGlzLnBsYXlCb29sZWFuID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAkKCcubWRpLXBhdXNlJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICQoJy5tZGktcGxheScpLnNob3coKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5wbGF5Qm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICQoJy5tZGktcGxheScpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAkKCcubWRpLXBhdXNlJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgIHRoaXMuc2V0SW5kZXhUaW1lKHNsaWRlci5zbGlkZXIoJ3ZhbHVlJykpO1xyXG4gICAgICAgICAgICAgICQoJy5icnVzaCcpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBQYXVzZSB0aGUgYW5pbWF0aW9uIGFuZCBzaG93IG9ubHkgdGhlIG5leHQgZnJhbWVcclxuICAgICAgICovXHJcbiAgICAgICQoJyNuZXh0LWZyYW1lLWJ1dHRvbicpLmNsaWNrKCgpPT57XHJcbiAgICAgICAgICBpZiAoJCgnI3BsYXktYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5wbGF5Qm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgJCgnI3BsYXktYnV0dG9uJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEJydXNoaW5nIGJ1dHRvblxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2JydXNoaW5nLWJ1dHRvbicpLmNsaWNrKCgpPT57XHJcbiAgICAgICAgICAvL3N0b3AgdGhlIGFuaW1hdGlvblxyXG4gICAgICAgICAgdGhpcy5wbGF5Qm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgICAgICAgJCgnI3BsYXktYnV0dG9uJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgaWYgKCEkKCcjYnJ1c2hpbmctYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgLy9kZWZpbmUgdGhlIGJydXNoXHJcbiAgICAgICAgICAgICAgYnJ1c2ggPSBkMy5icnVzaCgpXHJcbiAgICAgICAgICAgICAgICAgIC5leHRlbnQoW1xyXG4gICAgICAgICAgICAgICAgICAgICAgWzAsIDBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgW3RoaXMudGFua1dpZHRoLCB0aGlzLnRhbmtIZWlnaHRdXHJcbiAgICAgICAgICAgICAgICAgIF0pXHJcbiAgICAgICAgICAgICAgICAgIC5vbignZW5kJywgYnJ1c2hlbmQpO1xyXG4gICAgICAgICAgICAgIC8vYWRkIHRoZSBicnVzaFxyXG4gICAgICAgICAgICAgIGQzLnNlbGVjdCgnI21haW4tdmlzLXN2ZycpXHJcbiAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnYnJ1c2gnKVxyXG4gICAgICAgICAgICAgICAgICAuY2FsbChicnVzaCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIC8vIHJlbW92ZSB0aGUgYnJ1c2hcclxuICAgICAgICAgICAgICAkKCcuYnJ1c2gnKS5yZW1vdmUoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogVW5zZWxlY3QgYWxsIGJ1dHRvblxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI3JlbW92ZS1hY3RpdmUtc2VsZWN0ZWQtYnV0dG9uJykuY2xpY2soKCk9PntcclxuICAgICAgICAgIGlmICghJCgnI3JlbW92ZS1hY3RpdmUtc2VsZWN0ZWQtYnV0dG9uJykuaXMoJzpkaXNhYmxlZCcpKSB7XHJcbiAgICAgICAgICAgICAgJCgnI3JlbW92ZS1hY3RpdmUtc2VsZWN0ZWQtYnV0dG9uJykucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICAgICAgICAgICBzZXRBY3RpdmVBbmltYWxzKFtdKTtcclxuICAgICAgICAgICAgICAvLyB0cmFja2luZyBvZiBkYXRhIGZvciB2aXN1YWwgcGFyYW1ldGVyIHN1Z2dlc3Rpb25cclxuICAgICAgICAgICAgICByZXNldFRyYWNrZWREYXRhKCk7XHJcbiAgICAgICAgICAgICAgJCgnI3Zpc3VhbC1wYXJhbWV0ZXItYnV0dG9uJykucHJvcCgnZGlzYWJsZWQnLCB0cnVlKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcblxyXG4gICAgICAgICAgICAgIGlmICghJCgnI3BsYXktYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgIC8vZ28gYmFjayBvbmUgc2Vjb25kIGFuZCBkcmF3IHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAgICAgICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuXHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogVHJhY2sgdmlzdWFsIHBhcmFtZXRlciBidXR0b25cclxuICAgICAgICovXHJcbiAgICAgICQoJyN2aXN1YWwtcGFyYW1ldGVyLWJ1dHRvbicpLmNsaWNrKCgpPT57XHJcbiAgICAgICAgICBpZiAoJCgnI3Zpc3VhbC1wYXJhbWV0ZXItYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgc2V0VHJhY2tpbmdCb29sZWFuKGZhbHNlKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgc2V0VHJhY2tpbmdCb29sZWFuKHRydWUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBTZW5kIHRoZSB0cmFja2VkIHZpYSBhIGFqYXggcXVlcnkgdG8gdGhlIHNlcnZlciB0byBjYWxjdWxhdGUgdGhlIHBhcmFtZXRlcnNcclxuICAgICAgICovXHJcbiAgICAgICQoJyNjYWxjdWxhdGUtcGFyYW1ldGVyLWJ1dHRvbicpLmNsaWNrKCgpPT57XHJcbiAgICAgICAgICBpZiAoISQoJyNjYWxjdWxhdGUtcGFyYW1ldGVyLWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgIHNldFRyYWNraW5nQm9vbGVhbihmYWxzZSk7XHJcbiAgICAgICAgICAgICAgc2VuZFRyYWNrZWREYXRhKCk7XHJcblxyXG4gICAgICAgICAgICAgIC8vIGRpc2FibGUgYm90aCBidXR0b25zIGFuZCByZW1vdmUgdGhlIGFjdGl2ZSBvbmVcclxuICAgICAgICAgICAgICAkKCcjY2FsY3VsYXRlLXBhcmFtZXRlci1idXR0b24nKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgICAgICAgICAgICQoJyNjYWxjdWxhdGUtcGFyYW1ldGVyLWJ1dHRvbicpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAkKCcjdmlzdWFsLXBhcmFtZXRlci1idXR0b24nKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFNwYXRpYWwgdmlldyBiYWNrZ3JvdW5kIGNvbG9yXHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjYmFja2dyb3VuZC1jb2xvcicpLmNoYW5nZShmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGxldCBjb2xvciA9ICQoJ2lucHV0W3R5cGU9XCJyYWRpb1wiXS5ncm91cC1iYWNrZ3JvdW5kOmNoZWNrZWQnKS52YWwoKTtcclxuICAgICAgICAgICQoJyNtYWluLXZpcy1zdmcnKS5jc3MoJ2JhY2tncm91bmQtY29sb3InLCBjb2xvcik7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFNob3cgdGhlIHNwYXRpYWwgdmlldyBheGlzIGJ1dHRvblxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2RyYXctYXhpcycpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmICh0aGlzLmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAkKCcjbWFpbi12aXMgZy54LmF4aXMnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgJCgnI21haW4tdmlzIGcueS5heGlzJykuc2hvdygpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAkKCcjbWFpbi12aXMgZy54LmF4aXMnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgJCgnI21haW4tdmlzIGcueS5heGlzJykuaGlkZSgpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogU2hvdyB0aGUgZnJhbWUgKHRpbWUpIG51bWJlciBpbiB0aGUgc3BhdGlhbCB2aWV3IGJ1dHRvblxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2RyYXctdGltZScpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmICh0aGlzLmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAkKCcjbWFpbi12aXMgLmZyYW1lLXRleHQnKS5zaG93KCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICQoJyNtYWluLXZpcyAuZnJhbWUtdGV4dCcpLmhpZGUoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogRHJhdyB0aGUgbmV0d29yayBiYWNrZ3JvdW5kIGNvbG9yXHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjbmV0d29yay1iYWNrZ3JvdW5kJykub24oJ2NoYW5nZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgaWYgKHRoaXMuY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgIHNldE5ldHdvcmtCYWNrZ3JvdW5kKHRydWUpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBzZXROZXR3b3JrQmFja2dyb3VuZChmYWxzZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFNldCB0aGUgbmV0d29yayBiYWNrZ3JvdW5kIGVkZ2UgbGltaXRcclxuICAgICAgICovXHJcbiAgICAgICQoJyNuZXR3b3JrLWJhY2tncm91bmQtbGltaXQnKS52YWwoMSk7XHJcbiAgICAgICQoJyNuZXR3b3JrLWJhY2tncm91bmQtbGltaXQnKS5vbignY2hhbmdlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBsZXQgdmFsID0gJCh0aGlzKS52YWwoKTtcclxuICAgICAgICAgIGlmICgkLmlzTnVtZXJpYyh2YWwpICYmIHZhbCA+IDApIHtcclxuICAgICAgICAgICAgICBzZXROZXR3b3JrQmFja2dyb3VuZExpbWl0KHZhbCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICQodGhpcykudmFsKDEpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBDb2xvciBTY2FsZSBGdW5jdGlvbiBSYWRpbyBidXR0b25zXHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjY29sb3Itc2NhbGUtcmFkaW8tZm9ybSBpbnB1dCcpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGNvbG9yU2NhbGVbJ3R5cGUnXSA9ICQoJ2lucHV0W25hbWU9Y29sb3Itc2NhbGUtcmFkaW9dOmNoZWNrZWQnLCAnI2NvbG9yLXNjYWxlLXJhZGlvLWZvcm0nKS52YWwoKTtcclxuICAgICAgICAgIGlmICghJCgnI3BsYXktYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgLy9nbyBiYWNrIG9uZSBzZWNvbmQgYW5kIGRyYXcgdGhlIG5leHQgZnJhbWVcclxuICAgICAgICAgICAgICAvL3RoaXMgYXBwbHlzIHRoZSBjaGFuZ2VzXHJcbiAgICAgICAgICAgICAgdGhpcy5kZWNJbmRleFRpbWUoKTtcclxuICAgICAgICAgICAgICB0aGlzLmRyYXcoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEluaXQgc3dhcm0gZmVhdHVyZXMgbGlzdGVuZXJzXHJcbiAgICovXHJcbiAgc2ZfbGlzdGVuZXJzKCkge1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIERyYXcgZGlyZWN0aW9uIGFycm93IG9mIHRoZSBhbmltYWxcclxuICAgICAgICovXHJcbiAgICAgICQoJyNkcmF3LWRpcmVjdGlvbicpLmNsaWNrKCgpPT57XHJcbiAgICAgICAgICBpZiAoJCgnI2RyYXctZGlyZWN0aW9uJykuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICBpZiAoISgnZGlyZWN0aW9uJyBpbiBkYXRhc2V0WzBdKSkge1xyXG4gICAgICAgICAgICAgICAgICBkaXNhYmxlUGxheUJ1dHRvbigpO1xyXG4gICAgICAgICAgICAgICAgICAvLyBhamF4IHF1ZXJ5IHRvIGdldCBkaXJlY3Rpb24gZGF0YVxyXG4gICAgICAgICAgICAgICAgICBnZXREYXRhc2V0RmVhdHVyZSgnZGlyZWN0aW9uJyk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICQoJy5hcnJvdycpLnNob3coKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgJCgnLmFycm93JykuaGlkZSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKCEkKCcjcGxheS1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuICAgICAgICAgICAgICB0aGlzLmRlY0luZGV4VGltZSgpO1xyXG4gICAgICAgICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBEcmF3IG1lZG9pZCBpbiBjb2xvciBidXR0b25cclxuICAgICAgICovXHJcbiAgICAgICQoJyNkcmF3LW1lZG9pZCcpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgaWYgKCQoJyNkcmF3LW1lZG9pZCcpLmlzKCc6Y2hlY2tlZCcpKSB7XHJcblxyXG4gICAgICAgICAgICAgIGlmICghKCdtZWRvaWQnIGluIHN3YXJtRGF0YVswXSkpIHtcclxuICAgICAgICAgICAgICAgICAgZ2V0U3dhcm1EYXRhc2V0RmVhdHVyZSgnbWVkb2lkJyk7XHJcblxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBTUFYuc2V0TWVkb2lkQW5pbWFsKHN3YXJtRGF0YVtTUFYuaW5kZXhUaW1lXVsnbWVkb2lkJ10pO1xyXG4gICAgICAgICAgICAgIC8vIGRpc3BsYXkgdGhlIG1lZG9pZFxyXG4gICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgnI2FuaW1hbC0nICsgU1BWLm1lZG9pZEFuaW1hbClcclxuICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ21lZG9pZCcsIHRydWUpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAvLyBkbyBub3QgZGlzcGxheSB0aGUgbWVkb2lkIGZpc2hcclxuICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoJyNhbmltYWwtJyArIFNQVi5tZWRvaWRBbmltYWwpXHJcbiAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdtZWRvaWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgU1BWLnNldE1lZG9pZEFuaW1hbCgtMSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIERyYXcgY2VudHJvaWQgYnV0dG9uXHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjZHJhdy1jZW50cm9pZCcpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgaWYgKCQoJyNkcmF3LWNlbnRyb2lkJykuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICBpZiAoISgnY2VudHJvaWQnIGluIHN3YXJtRGF0YVswXSkpIHtcclxuICAgICAgICAgICAgICAgICAgZ2V0U3dhcm1EYXRhc2V0RmVhdHVyZSgnY2VudHJvaWQnKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgLy8gZGlzcGxheSB0aGUgY2VudHJvaWRcclxuICAgICAgICAgICAgICAkKCcjZy1jZW50cm9pZCcpLnNob3coKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgLy8gaGlkZSB0aGUgY2VudHJvaWRcclxuICAgICAgICAgICAgICAkKCcjZy1jZW50cm9pZCcpLmhpZGUoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIERyYXcgY29udmV4IGh1bGwgaW4gY29sb3IgYnV0dG9uXHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjZHJhdy1jb252ZXgtaHVsbCcpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgaWYgKCQoJyNkcmF3LWNvbnZleC1odWxsJykuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICBpZiAoISgnaHVsbCcgaW4gc3dhcm1EYXRhWzBdKSkge1xyXG4gICAgICAgICAgICAgICAgICBnZXRTd2FybURhdGFzZXRGZWF0dXJlKCdjb252ZXhfaHVsbCcpO1xyXG5cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBEcmF3IHRyaWFuZ3VsYXRpb25cclxuICAgICAgICovXHJcbiAgICAgICQoJyNkcmF3LXRyaWFuZ3VsYXRpb24nKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmICgkKCcjZHJhdy10cmlhbmd1bGF0aW9uJykuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICBpZiAoISgndHJpYW5ndWxhdGlvbicgaW4gc3dhcm1EYXRhWzBdKSkge1xyXG4gICAgICAgICAgICAgICAgICBnZXRTd2FybURhdGFzZXRGZWF0dXJlKCd0cmlhbmd1bGF0aW9uJyk7XHJcblxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgICAgICAvL3RoaXMgYXBwbHlzIHRoZSBjaGFuZ2VzXHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIERyYXcgdm9yb25vaVxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2RyYXctdm9yb25vaScpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgaWYgKCQoJyNkcmF3LXZvcm9ub2knKS5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgIGlmICghKCd2b3Jvbm9pJyBpbiBzd2FybURhdGFbMF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgIGdldFN3YXJtRGF0YXNldEZlYXR1cmUoJ3Zvcm9ub2knKTtcclxuXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGlmICghJCgnI3BsYXktYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgIC8vZ28gYmFjayBvbmUgc2Vjb25kIGFuZCBkcmF3IHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAgICAgICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuICAgICAgICAgICAgICAgICAgdGhpcy5kZWNJbmRleFRpbWUoKTtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcblxyXG4gIH1cclxuICAvKipcclxuICAgKiBJbml0IGFic29sdXRlIGZlYXR1cmUgbGlzdGVuZXJzXHJcbiAgICovXHJcbiAgYWZfbGlzdGVuZXJzKCkge1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIERyYXcgU3BlZWQgYnV0dG9uXHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjZHJhdy1zcGVlZCcpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgJCgnLmRyYXctZGV0YWlscycpLmhpZGUoKVxyXG4gICAgICAgICAgICAgIC5maW5kKCdpbnB1dDpjaGVja2JveCcpLnByb3AoJ2NoZWNrZWQnLCB0cnVlKS5jbGljaygpO1xyXG4gICAgICAgICAgaWYgKCQoJyNkcmF3LXNwZWVkJykuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICAvLyBsb2FkIGFic29sdXRlIGZlYXR1cmUgc3BlZWQgZGF0YSBvbmNlXHJcbiAgICAgICAgICAgICAgaWYgKCEoJ3NwZWVkJyBpbiBkYXRhc2V0WzBdKSkge1xyXG4gICAgICAgICAgICAgICAgICBkaXNhYmxlUGxheUJ1dHRvbigpO1xyXG4gICAgICAgICAgICAgICAgICAvLyBhamF4IHF1ZXJ5IHRvIGdldCB0aGUgYWJzb2x1dGUgZmVhdHVyZSBzcGVlZFxyXG4gICAgICAgICAgICAgICAgICBnZXREYXRhc2V0RmVhdHVyZSgnc3BlZWQnKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgLy8gJCgnLmRyYXctZGV0YWlscycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAkKCcjZHJhdy1zcGVlZC1kZXRhaWxzJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICQoJyNkcmF3LWFjY2VsZXJhdGlvbicpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgJCgnI2RyYXctZGlzdGFuY2VfY2VudHJvaWQnKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICQoJyNkcmF3LW1pZGxpbmVfb2Zmc2V0JykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICBTUFYuc2V0QWN0aXZlU2NhbGUoJ3NwZWVkJyk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICQoJyNkcmF3LXNwZWVkLWRldGFpbHMnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgU1BWLnNldEFjdGl2ZVNjYWxlKCdibGFjaycpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLy9jaGFuZ2UgY29sb3IgbGVnZW5kXHJcbiAgICAgICAgICBkMy5zZWxlY3RBbGwoJy5jb2xvckxlZ2VuZCAqJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICBjaGFuZ2VMZWdlbmQoKTtcclxuXHJcbiAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgIC8vZ28gYmFjayBvbmUgc2Vjb25kIGFuZCBkcmF3IHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgIHRoaXMuZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIERyYXcgYWNjZWxlcmF0aW9uIGJ1dHRvblxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2RyYXctYWNjZWxlcmF0aW9uJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAkKCcuZHJhdy1kZXRhaWxzJykuaGlkZSgpXHJcbiAgICAgICAgICAgICAgLmZpbmQoJ2lucHV0OmNoZWNrYm94JykucHJvcCgnY2hlY2tlZCcsIHRydWUpLmNsaWNrKCk7XHJcbiAgICAgICAgICBpZiAoJCgnI2RyYXctYWNjZWxlcmF0aW9uJykuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICAvLyBsb2FkIGFic29sdXRlIGZlYXR1cmUgYWNjZWxlcmF0aW9uIGRhdGEgb25jZVxyXG4gICAgICAgICAgICAgIGlmICghKCdhY2NlbGVyYXRpb24nIGluIGRhdGFzZXRbMF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgIGRpc2FibGVQbGF5QnV0dG9uKCk7XHJcbiAgICAgICAgICAgICAgICAgIC8vIGFqYXggcXVlcnkgdG8gZ2V0IHRoZSBhYnNvbHV0ZSBmZWF0dXJlIGFjY2VsZXJhdGlvblxyXG4gICAgICAgICAgICAgICAgICBnZXREYXRhc2V0RmVhdHVyZSgnYWNjZWxlcmF0aW9uJyk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICQoJyNkcmF3LWFjY2VsZXJhdGlvbi1kZXRhaWxzJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICQoJyNkcmF3LXNwZWVkJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAkKCcjZHJhdy1kaXN0YW5jZV9jZW50cm9pZCcpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgJCgnI2RyYXctbWlkbGluZV9vZmZzZXQnKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgIFNQVi5zZXRBY3RpdmVTY2FsZSgnYWNjZWxlcmF0aW9uJyk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICQoJyNkcmF3LWFjY2VsZXJhdGlvbi1kZXRhaWxzJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgIFNQVi5zZXRBY3RpdmVTY2FsZSgnYmxhY2snKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgICQoJy5kcmF3LWRldGFpbHMuYWN0aXZlJykuY2xpY2soKTtcclxuICAgICAgICAgIC8vY2hhbmdlIGNvbG9yIGxlZ2VuZFxyXG4gICAgICAgICAgZDMuc2VsZWN0QWxsKCcuY29sb3JMZWdlbmQgKicpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgY2hhbmdlTGVnZW5kKCk7XHJcblxyXG4gICAgICAgICAgaWYgKCEkKCcjcGxheS1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuICAgICAgICAgICAgICB0aGlzLmRlY0luZGV4VGltZSgpO1xyXG4gICAgICAgICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBEcmF3IGRpc3RhbmNlIHRvIGNlbnRyb2lkIGJ1dHRvblxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2RyYXctZGlzdGFuY2VfY2VudHJvaWQnKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICAgICAgICQoJy5kcmF3LWRldGFpbHMnKS5oaWRlKClcclxuICAgICAgICAgICAgICAuZmluZCgnaW5wdXQ6Y2hlY2tib3gnKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSkuY2xpY2soKTtcclxuICAgICAgICAgIGlmICgkKCcjZHJhdy1kaXN0YW5jZV9jZW50cm9pZCcpLmlzKCc6Y2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICAgLy8gbG9hZCBhYnNvbHV0ZSBmZWF0dXJlIGRpc3RhbmNlX2NlbnRyb2lkIGRhdGEgb25jZVxyXG4gICAgICAgICAgICAgIGlmICghKCdkaXN0YW5jZV9jZW50cm9pZCcgaW4gZGF0YXNldFswXSkpIHtcclxuICAgICAgICAgICAgICAgICAgZGlzYWJsZVBsYXlCdXR0b24oKTtcclxuICAgICAgICAgICAgICAgICAgLy8gYWpheCBxdWVyeSB0byBnZXQgdGhlIGFic29sdXRlIGZlYXR1cmUgZGlzdGFuY2VfY2VudHJvaWRcclxuICAgICAgICAgICAgICAgICAgZ2V0RGF0YXNldEZlYXR1cmUoJ2Rpc3RhbmNlX2NlbnRyb2lkJyk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICQoJyNkcmF3LWRpc3RhbmNlX2NlbnRyb2lkLWRldGFpbHMnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgJCgnI2RyYXctc3BlZWQnKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICQoJyNkcmF3LWFjY2VsZXJhdGlvbicpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgJCgnI2RyYXctbWlkbGluZV9vZmZzZXQnKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgIFNQVi5zZXRBY3RpdmVTY2FsZSgnZGlzdGFuY2VfY2VudHJvaWQnKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgJCgnI2RyYXctZGlzdGFuY2VfY2VudHJvaWQtZGV0YWlscycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICBTUFYuc2V0QWN0aXZlU2NhbGUoJ2JsYWNrJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAkKCcuZHJhdy1kZXRhaWxzLmFjdGl2ZScpLmNsaWNrKCk7XHJcbiAgICAgICAgICAvL2NoYW5nZSBjb2xvciBsZWdlbmRcclxuICAgICAgICAgIGQzLnNlbGVjdEFsbCgnLmNvbG9yTGVnZW5kIConKS5yZW1vdmUoKTtcclxuICAgICAgICAgIGNoYW5nZUxlZ2VuZCgpO1xyXG5cclxuICAgICAgICAgIGlmICghJCgnI3BsYXktYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgLy9nbyBiYWNrIG9uZSBzZWNvbmQgYW5kIGRyYXcgdGhlIG5leHQgZnJhbWVcclxuICAgICAgICAgICAgICAvL3RoaXMgYXBwbHlzIHRoZSBjaGFuZ2VzXHJcbiAgICAgICAgICAgICAgdGhpcy5kZWNJbmRleFRpbWUoKTtcclxuICAgICAgICAgICAgICB0aGlzLmRyYXcoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogRHJhdyBtaWRsaW5lIG9mZnNldFxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2RyYXctbWlkbGluZV9vZmZzZXQnKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICAgICAgICQoJy5kcmF3LWRldGFpbHMnKS5oaWRlKClcclxuICAgICAgICAgICAgICAuZmluZCgnaW5wdXQ6Y2hlY2tib3gnKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSkuY2xpY2soKTtcclxuICAgICAgICAgIGlmICgkKCcjZHJhdy1taWRsaW5lX29mZnNldCcpLmlzKCc6Y2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICAgLy8gbG9hZCBhYnNvbHV0ZSBmZWF0dXJlIGRyYXctbWlkbGluZV9vZmZzZXQgZGF0YSBvbmNlXHJcbiAgICAgICAgICAgICAgaWYgKCEoJ2RyYXctbWlkbGluZV9vZmZzZXQnIGluIGRhdGFzZXRbMF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgIGRpc2FibGVQbGF5QnV0dG9uKCk7XHJcbiAgICAgICAgICAgICAgICAgIC8vIGFqYXggcXVlcnkgdG8gZ2V0IHRoZSBhYnNvbHV0ZSBmZWF0dXJlIG1pZGxpbmVfb2Zmc2V0XHJcbiAgICAgICAgICAgICAgICAgIGdldERhdGFzZXRGZWF0dXJlKCdtaWRsaW5lX29mZnNldCcpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAkKCcjZHJhdy1taWRsaW5lX29mZnNldC1kZXRhaWxzJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICQoJyNkcmF3LXNwZWVkJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAkKCcjZHJhdy1hY2NlbGVyYXRpb24nKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICQoJyNkcmF3LWRpc3RhbmNlX2NlbnRyb2lkJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICBTUFYuc2V0QWN0aXZlU2NhbGUoJ21pZGxpbmVfb2Zmc2V0Jyk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIFNQVi5zZXRBY3RpdmVTY2FsZSgnYmxhY2snKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgICQoJy5kcmF3LWRldGFpbHMuYWN0aXZlJykuY2xpY2soKTtcclxuICAgICAgICAgIC8vY2hhbmdlIGNvbG9yIGxlZ2VuZFxyXG4gICAgICAgICAgZDMuc2VsZWN0QWxsKCcuY29sb3JMZWdlbmQgKicpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgY2hhbmdlTGVnZW5kKCk7XHJcblxyXG4gICAgICAgICAgaWYgKCEkKCcjcGxheS1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuICAgICAgICAgICAgICB0aGlzLmRlY0luZGV4VGltZSgpO1xyXG4gICAgICAgICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEluaXQgbmV0d29yayBsaXN0ZWVuZXJzXHJcbiAgICovXHJcbiAgbl9saXN0ZW5lcnMoKSB7XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBOZXR3b3JrIGJ1dHRvbnMgY2xpY2tlZCAtIGdldCB0aGUgZGF0YVxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI25ldHdvcmtzLW1vZGFsLWJvZHkgYnV0dG9uJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBsZXQgbmV0d29ya19pZCA9ICQodGhpcykuYXR0cignZGF0YScpO1xyXG5cclxuICAgICAgICAgIC8vIGFkZCB0aGUgbmFtZSBvZiB0aGUgY2hvb3NlbiBuZXR3b3JrIHRvIHRoZSBOZXR3b3JrIG1vZGFsXHJcbiAgICAgICAgICAkKCcjYWN0aXZlLW5ldHdvcmstbmFtZScpLnRleHQoJCh0aGlzKS5hdHRyKCduYW1lJykpO1xyXG5cclxuICAgICAgICAgIGRpc2FibGVQbGF5QnV0dG9uKCk7XHJcbiAgICAgICAgICBnZXROZXR3b3JrRGF0YShuZXR3b3JrX2lkKTtcclxuICAgICAgICAgIC8vIHNldCB0aGUgY29sb3Igb2YgdGhlIG5ldHdvcmtcclxuICAgICAgICAgIHNldG5ldHdvcmtDb2xvcihuZXR3b3JrX2lkKTtcclxuICAgICAgICAgICQoJyNuZXR3b3JrLWRpdicpLm1vZGFsKCd0b2dnbGUnKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogTmV0d29yayBidXR0b25zIGNsaWNrZWQgLSBnZXQgdGhlIGRhdGFcclxuICAgICAgICovXHJcbiAgICAgICQoJyNuZXR3b3JrLXJlbW92ZScpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgc2V0TmV0d29ya0RhdGEoe30pO1xyXG4gICAgICAgICAgc2V0TmV0d29ya0lEKC0xKTtcclxuICAgICAgICAgIC8vIHJlbW92ZSB0aGUgbmV0d29yayBjb2xvclxyXG4gICAgICAgICAgc2V0bmV0d29ya0NvbG9yKC0xKTtcclxuICAgICAgICAgICQoJyNhY3RpdmUtbmV0d29yay1uYW1lJykudGV4dCgnJyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIE5ldHdvcmsgYXV0byBidXR0b24gc2V0IGFjaXZlIG9yIHJlbW92ZVxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI25ldHdvcmstYXV0by1zdWdnZXN0JykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZiAoISQoJyNuZXR3b3JrLWF1dG8tc3VnZ2VzdCcpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICQoJyNuZXR3b3JrLWxpbWl0LXAnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgJCgnI25ldHdvcmstc2xpZGVyJykuaGlkZSgpO1xyXG5cclxuICAgICAgICAgICAgICBzZXROZXR3b3JrQXV0byh0cnVlKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgJCgnI25ldHdvcmstbGltaXQtcCcpLnNob3coKTtcclxuICAgICAgICAgICAgICAkKCcjbmV0d29yay1zbGlkZXInKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgc2V0TmV0d29ya0F1dG8oZmFsc2UpO1xyXG4gICAgICAgICAgICAgIGxldCBsaW1pdCA9ICQoJyNuZXR3b3JrLXNsaWRlcicpLnNsaWRlcigndmFsdWUnKTtcclxuICAgICAgICAgICAgICBzZXROZXR3b3JMaW1pdChsaW1pdCk7XHJcbiAgICAgICAgICAgICAgJCgnI25ldHdvcmstbGltaXQnKS52YWwobGltaXQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEluaXQgbWV0YWRhdGEgbGlzdGVuZXJzXHJcbiAgICovXHJcbiAgbWRfbGlzdGVuZXJzKCkge1xyXG4gICAgICAvKipcclxuICAgICAgICogTWV0YWRhdGEgc3dhdGNoIGZ1bmN0aW9ucyBjb2xvcmluZyBpbmRpdmlkdWFsIGFuaW1hbHNcclxuICAgICAgICovXHJcbiAgICAgICQoJy5tZXRhZGF0YS1zd2F0Y2gubWV0YWRhdGEtc3dhdGNoLWNsaWNrYWJsZScpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgbGV0IGlkID0gJCh0aGlzKS5hdHRyKCd2YWx1ZScpO1xyXG4gICAgICAgICAgbGV0IGNvbG9yUkdCID0gJCh0aGlzKS5jc3MoJ2JhY2tncm91bmQtY29sb3InKTtcclxuICAgICAgICAgIC8vIHNldCB0aGUgY29sb3Igb2YgdGhlIHN3YXRjaCBwcmV2aWV3XHJcbiAgICAgICAgICAkKCcjbWV0YWRhdGEtcm93LScgKyBpZCArICcgI3ByZXZpZXcnKVxyXG4gICAgICAgICAgICAgIC5jc3MoJ2JhY2tncm91bmQtY29sb3InLCBjb2xvclJHQik7XHJcbiAgICAgICAgICAvLyBpZiB3aGl0ZSB0aGFuIHJlc2V0IHRoZSBjb2xvclxyXG4gICAgICAgICAgaWYgKGNvbG9yUkdCID09PSAncmdiKDI1NSwgMjU1LCAyNTUpJykge1xyXG4gICAgICAgICAgICAgIGlmIChtZXRhZGF0YUNvbG9yW2lkXSkge1xyXG4gICAgICAgICAgICAgICAgICBkZWxldGUgbWV0YWRhdGFDb2xvcltpZF07XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBtZXRhZGF0YUNvbG9yW2lkXSA9IGNvbG9yUkdCO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBNZXRhZGF0YSBncm91cCBtZXRhZGF0YSBmdW5jdGlvbnMgZm9yIGluc3RhbmNlIGNvbG9yIHNleFxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2dyb3VwLW1ldGFkYXRhIDppbnB1dCcpLmNoYW5nZShmdW5jdGlvbigpIHtcclxuICAgICAgICAgIC8vIHJlc2V0IHRoZSBtZXRhZGF0IGFjb2xvcmluZ1xyXG4gICAgICAgICAgcmVzZXRJbmRpdmlkdWFsTWV0YWRhdGEoKTtcclxuXHJcbiAgICAgICAgICBsZXQgdmFsdWUgPSAkKHRoaXMpLmF0dHIoJ3ZhbHVlJyk7XHJcbiAgICAgICAgICBsZXQgdG1wID0gW107XHJcblxyXG4gICAgICAgICAgLy8gbWV0YWRhdGEgc2V4IGlzIGNob29zZW4gLSBjb2xvcmluZyBiYXNlZCBvbiBtIGFuZCBmXHJcbiAgICAgICAgICBpZiAodmFsdWUgPT09ICdzZXgnKSB7XHJcbiAgICAgICAgICAgICAgJCgnI21ldGFkYXRhLWRpdicpLm1vZGFsKCd0b2dnbGUnKTtcclxuICAgICAgICAgICAgICAvLyBjbG9zZSBhbmQgY29sb3IgaGVyZVxyXG4gICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YXNldE1ldGFkYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgIHRtcC5wdXNoKGRhdGFzZXRNZXRhZGF0YVtpXVt2YWx1ZV0udG9Mb3dlckNhc2UoKSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIC8vIGNyZWF0ZSBhIHNldCBvZiBpbmRpdmlkdWFsIHN0cmluZ3MgaW4gc2V4XHJcbiAgICAgICAgICAgICAgdG1wID0gQXJyYXkuZnJvbShuZXcgU2V0KHRtcCkpO1xyXG4gICAgICAgICAgICAgIGxldCBjb2xvcnMgPSBbJyM3ZmM5N2YnLCAnIzM4NmNiMCddO1xyXG5cclxuICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGFzZXRNZXRhZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRtcC5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFzZXRNZXRhZGF0YVtpXVt2YWx1ZV0udG9Mb3dlckNhc2UoKSA9PT0gdG1wW2pdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIHRoZSBjb2xvcmluZyB0byB0aGUgbWV0YWRhdGFjb2xvciBvYmplY3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YUNvbG9yW2RhdGFzZXRNZXRhZGF0YVtpXVsnYW5pbWFsX2lkJ11dID0gY29sb3JzW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICQoJyNtZXRhZGF0YS1pbnB1dCcpLmhpZGUoKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgJCgnI21ldGFkYXRhLWlucHV0Jykuc2hvdygpO1xyXG4gICAgICAgICAgICAgIC8vIHNldCB2YWx1ZXMgb2YgaW5wdXRzXHJcbiAgICAgICAgICAgICAgLy8gaGVyZSBhcmUgYXV0b21hdGljYWxseSBpbnB1dCB2YWx1ZXMgY2FsY3VsYXRlZFxyXG4gICAgICAgICAgICAgIC8vIC4yNSBhbmQgLjc1IHBlcmNlbnRpbGVzIGFyZSB1c2VkXHJcbiAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhc2V0TWV0YWRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgdG1wLnB1c2goZGF0YXNldE1ldGFkYXRhW2ldW3ZhbHVlXSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGxldCBibEF2ZyA9IGQzLnF1YW50aWxlKHRtcCwgMC4yNSk7IC8vIGJlbG93IGF2ZXJhZ2UgdmFsdWVcclxuICAgICAgICAgICAgICBsZXQgYWJBdmcgPSBkMy5xdWFudGlsZSh0bXAsIDAuNzUpOyAvLyBhYm92ZSBhdmVyYWdlXHJcbiAgICAgICAgICAgICAgJCgnI2JsLWF2ZycpLnZhbChibEF2Zyk7XHJcbiAgICAgICAgICAgICAgJCgnI2FiLWF2ZycpLnZhbChhYkF2Zyk7XHJcbiAgICAgICAgICAgICAgLy8gY29sb3IgdGhlIGFuaW1hbHNcclxuICAgICAgICAgICAgICBjb2xvck1ldGFkYXRhKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIE1ldGFkYXRhIGdyb3VwIG1ldGFkYXRhIGlucHV0IHNwaW5uZXJcclxuICAgICAgICogKy8tIDAuMSB0byB0aGUgaW5wdXQgdmFsdWVcclxuICAgICAgICovXHJcbiAgICAgICQoJy5udW1iZXItc3Bpbm5lciBidXR0b24nKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGxldCBidG4gPSAkKHRoaXMpLFxyXG4gICAgICAgICAgICAgIG9sZFZhbHVlID0gYnRuLmNsb3Nlc3QoJy5udW1iZXItc3Bpbm5lcicpLmZpbmQoJ2lucHV0JykudmFsKCkudHJpbSgpLFxyXG4gICAgICAgICAgICAgIG5ld1ZhbCA9IDA7XHJcblxyXG4gICAgICAgICAgaWYgKGJ0bi5hdHRyKCdkYXRhLWRpcicpID09ICd1cCcpIHtcclxuICAgICAgICAgICAgICBuZXdWYWwgPSBwYXJzZUZsb2F0KG9sZFZhbHVlKSArIDAuMTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgaWYgKG9sZFZhbHVlID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICBuZXdWYWwgPSBwYXJzZUZsb2F0KG9sZFZhbHVlKSAtIDAuMTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICBuZXdWYWwgPSAwO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIG5ld1ZhbCA9IE1hdGgucm91bmQobmV3VmFsICogMTAwKSAvIDEwMDsgLVxyXG4gICAgICAgICAgYnRuLmNsb3Nlc3QoJy5udW1iZXItc3Bpbm5lcicpLmZpbmQoJ2lucHV0JykudmFsKG5ld1ZhbCk7XHJcbiAgICAgICAgICAvLyBjaGFuZ2UgdGhlIGNvbG9yaW5nXHJcbiAgICAgICAgICBjb2xvck1ldGFkYXRhKCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIE1ldGFkYXRhIGlucHV0IGZpZWxkcyBjaGFuZ2VcclxuICAgICAgICovXHJcbiAgICAgICQoJy5udW1iZXItc3Bpbm5lciBpbnB1dCcpLm9uKCdpbnB1dCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgY29sb3JNZXRhZGF0YSgpO1xyXG4gICAgICB9KTtcclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogUmVzZXQgYWxsIG1ldGFkYXRhIGlucHV0IHBhcmFtZXRlcnNcclxuICAgICAgICovXHJcbiAgICAgICQoJyNtZXRhZGF0YS1yZXNldCcpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgJCgnI21ldGFkYXRhLWlucHV0JykuaGlkZSgpO1xyXG4gICAgICAgICAgcmVzZXRJbmRpdmlkdWFsTWV0YWRhdGEoKTtcclxuICAgICAgfSk7XHJcblxyXG4gIH1cclxuICAvKipcclxuICAgKiBJbml0aWFsaXplIGhpZXJhcmNoeS9kZW5kZ3JvZ3JhbSBsaXN0ZW5lcnNcclxuICAgKi9cclxuICBoX2xpc3RlbmVycygpIHtcclxuICAgICAgLyoqXHJcbiAgICAgICAqIFNob3cgZGVuZGdyb2dyYW0gc2xpZGluZyBidXR0b25cclxuICAgICAgICovXHJcbiAgICAgIGZ1bmN0aW9uIGluaXRTaG93RGVuZHJvZ3JhbUxpc3RlbmVyKGlkKSB7XHJcblxyXG4gICAgICAgICAgJCgnI3Nob3ctZGVuZHJvZ3JhbS0nICsgaWQpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIGxldCBjbGlja2VkQnV0dG9uSUQgPSAkKHRoaXMpLmF0dHIoJ2lkJyk7XHJcbiAgICAgICAgICAgICAgLy8gaXRlcmF0ZSBvdmVyIGFsbCBidXR0b25zIGFuZCBjdXN0b20gaGlnaGxpZ2h0IGp1c3Qgb25lIG9yIG5vbmVcclxuICAgICAgICAgICAgICAkKCcuc2hvdy1kZW5kcm9ncmFtJykuZWFjaChmdW5jdGlvbihpLCBidXR0b24pIHtcclxuICAgICAgICAgICAgICAgICAgLy8gYWN0aXZlIGZvdW5kIGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICBpZiAoJChidXR0b24pLmF0dHIoJ2lkJykgPT09IGNsaWNrZWRCdXR0b25JRCAmJiAkKGJ1dHRvbikuaGFzQ2xhc3MoJ2J0bi1wcmltYXJ5JykgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAkKGJ1dHRvbikuYWRkQ2xhc3MoJ2J0bi1wcmltYXJ5Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAkKGJ1dHRvbikuZmluZCgnI2J0bi1sZWZ0JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgJChidXR0b24pLmZpbmQoJyNidG4tcmlnaHQnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPIGFkZCBoZXJlIGEgcmVzaXplIG9mIHRoZSBtYWluIHZpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgLy8gJCgnI2RlbmRyb2dyYW0tcGFuZWwnKS5pbnNlcnRBZnRlcigkKHRoaXMpKTtcclxuICAgICAgICAgICAgICAgICAgfSAvLyByZW1vdmUgaGlnaGxpZ2h0XHJcbiAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgJChidXR0b24pLnJlbW92ZUNsYXNzKCdidG4tcHJpbWFyeScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgJChidXR0b24pLmZpbmQoJyNidG4tbGVmdCcpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICQoYnV0dG9uKS5maW5kKCcjYnRuLXJpZ2h0JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgIC8vIHNob3cgZGVuZHJvZ3JhbVxyXG4gICAgICAgICAgICAgIGlmICgkKCcuc2hvdy1kZW5kcm9ncmFtLmJ0bi1wcmltYXJ5JykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICQoJyNkZW5kcm9ncmFtLXBhbmVsJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICQoJyNkZW5kcm9ncmFtLXBhbmVsJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgICAgICAvL3RoaXMgYXBwbHlzIHRoZSBjaGFuZ2VzXHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLmRyYXdEZW5kcm9ncmFtKCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBIaWVyYXJjaHkgYnV0dG9uIGluIG5ldHdvcmsgbW9kYWwgb24gY2hhbmdlXHJcbiAgICAgICAqIExvYWQgZGF0YSBvciByZW1vdmUgaXRcclxuICAgICAgICovXHJcbiAgICAgICQoJy5oaWVhcmNoeS1jaGVja2JveCcpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGxldCBjaGVja2JveCA9ICQodGhpcyk7XHJcblxyXG4gICAgICAgICAgbGV0IGlkID0gY2hlY2tib3guYXR0cignZGF0YScpO1xyXG4gICAgICAgICAgbGV0IG5hbWUgPSBjaGVja2JveC5hdHRyKCduYW1lJyk7XHJcbiAgICAgICAgICBsZXQgY2hlY2tlZCA9IGNoZWNrYm94LnByb3AoJ2NoZWNrZWQnKTtcclxuXHJcbiAgICAgICAgICBpZiAoY2hlY2tlZCAmJiAkKCcuc2hvdy1kZW5kcm9ncmFtJykubGVuZ3RoIDwgbWF4TnVtYmVySGllcmFyY2hpZXMpIHtcclxuICAgICAgICAgICAgICBkaXNhYmxlUGxheUJ1dHRvbigpO1xyXG4gICAgICAgICAgICAgIGdldE5ldHdvcmtIaWVyYXJjaHlEYXRhKGlkKTtcclxuXHJcbiAgICAgICAgICAgICAgYWRkSGllcmFyY2h5QnV0dG9uKGlkLCBuYW1lKTtcclxuICAgICAgICAgICAgICBpbml0U2hvd0RlbmRyb2dyYW1MaXN0ZW5lcihpZCk7XHJcbiAgICAgICAgICAgICAgJCgnI2RlbmRyb2dyYW0tYnV0dG9ucy1kaXYnKS5zaG93KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyBlbHNlIGlmICgkKCcuc2hvdy1kZW5kcm9ncmFtJykubGVuZ3RoID09PSBtYXhOdW1iZXJIaWVyYXJjaGllcykge1xyXG4gICAgICAgICAgLy8gY29uc29sZS5sb2coJ01heCBudW1iZXIgb2YgaGllcmFyY2hpZXMgaXM6ICcgKyBtYXhOdW1iZXJIaWVyYXJjaGllcyk7XHJcbiAgICAgICAgICAvL1RPRE8gaW1wbGVtZW50IHRoaXMgaGVyZVxyXG4gICAgICAgICAgLy8gbm90aWNlIHVzZXIgdGhhdCBpdCBpcyBub3QgcG9zc2libGUgdG8gc2hvdyBtb3JlIHRoYW4gbiBoaWVyYXJjaGllc1xyXG4gICAgICAgICAgLy8gICAgICAgICAgPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cclxuICAgICAgICAgIC8vICAgPHN0cm9uZz5JbmZvITwvc3Ryb25nPiBBdHRlbnRpb24gdXNlciAuXHJcbiAgICAgICAgICAvLyA8L2Rpdj5cclxuICAgICAgICAgIC8vIH1cclxuICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgIC8vIHRtcCB2YXJpYWJsZSB0byBzYXZlIGlmIHRoZSBidXR0b24gd2hpY2ggaXMgZ29pbmcgdG8gYmUgcmVtb3ZlZFxyXG4gICAgICAgICAgICAgIC8vIHdhcyBhY3RpdmVcclxuICAgICAgICAgICAgICBsZXQgdG1wQWN0aXZlID0gJCgnI3Nob3ctZGVuZHJvZ3JhbS0nICsgaWQpLmhhc0NsYXNzKCdidG4tcHJpbWFyeScpO1xyXG4gICAgICAgICAgICAgIHNldEhpZXJhcmNoeURhdGEoe30sIGlkKTtcclxuXHJcbiAgICAgICAgICAgICAgcmVtb3ZlSGllcmFyY2h5QnV0dG9uKGlkKTtcclxuICAgICAgICAgICAgICAvLyBUT0RPIGZpbmQgYmV0dGVyIHdheSBoZXJlXHJcbiAgICAgICAgICAgICAgZDMuc2VsZWN0KCdnLmgnICsgaWQpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgIC8vIHJlbW92ZSB0aGUgZGVuZHJvZ3JhbSBhbmQgdGhlIHBhbmVsIGlmIHRoZSByZW1vdmVkIGVsZW1lbnQgd2FzIGNoZWNrZWRcclxuICAgICAgICAgICAgICBpZiAodG1wQWN0aXZlID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICQoJyNkZW5kcm9ncmFtLXBhbmVsJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBpZiAoJCgnLnNob3ctZGVuZHJvZ3JhbScpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAkKCcjZGVuZHJvZ3JhbS1idXR0b25zLWRpdicpLmhpZGUoKTtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLy8gcmVzaXplIHRoZSBtYWluIHN2Z1xyXG4gICAgICAgICAgaWYgKCQoJy5zaG93LWRlbmRyb2dyYW0nKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAkKCcjbWFpbi12aXMtZGl2JykucmVtb3ZlQ2xhc3MoJ2NvbC1tZC0xMicpO1xyXG4gICAgICAgICAgICAgICQoJyNtYWluLXZpcy1kaXYnKS5hZGRDbGFzcygnY29sLW1kLTgnKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgJCgnI21haW4tdmlzLWRpdicpLnJlbW92ZUNsYXNzKCdjb2wtbWQtOCcpO1xyXG4gICAgICAgICAgICAgICQoJyNtYWluLXZpcy1kaXYnKS5hZGRDbGFzcygnY29sLW1kLTEyJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFZpc3VhbGl6ZSB0aGUgbmV0d29yayBvbmx5IGluIHRoZSBjaG9vc2VuIGhpZXJhcmNoeVxyXG4gICAgICAgKi9cclxuICAgICAgJCgnLm5ldHdvcmstaGllcmFyY2h5LWNoZWNrYm94Jykub24oJ2NoYW5nZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgLy8gZ2V0IHRoZSBpbmZvIGZvciB0aGUgY2xpY2tlZCBidXR0b25cclxuICAgICAgICAgIGxldCBjaGVja2JveCA9ICQodGhpcyk7XHJcblxyXG4gICAgICAgICAgLy8gcmVzZXQgYWxsIHRoZSBvdGhlciBhY3RpdmUgY2hlY2tib3hlc1xyXG4gICAgICAgICAgJCgnLm5ldHdvcmstaGllcmFyY2h5LWNoZWNrYm94JykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcclxuICAgICAgICAgIGNoZWNrYm94LnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcclxuXHJcbiAgICAgICAgICBpZiAoY2hlY2tib3gucHJvcCgnY2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICAgLy8gc2V0IHRoZSBuZXR3b3JrIGlkXHJcbiAgICAgICAgICAgICAgc2V0TmV0d29ya0hpZXJhcmNoeShjaGVja2JveC5hdHRyKCdkYXRhJykpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBzZXROZXR3b3JrSGllcmFyY2h5KHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxufVxyXG5cclxuXHJcbn1cclxuXHJcbmNsYXNzIENoYXJ0IGV4dGVuZHMgRHJhd2VyIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhKSB7XHJcbiAgICBzdXBlcigpXHJcbiAgICAgIC8vIGxvYWQgaW4gYXJndW1lbnRzIGZyb20gY29uZmlnIG9iamVjdFxyXG4gICAgdGhpcy5zd2FybURhdGEgPSBkYXRhO1xyXG4gICAgdGhpcy5zd2FybV9mZWF0dXJlcyA9IE9iamVjdC5rZXlzKHRoaXMuc3dhcm1EYXRhWzBdKTtcclxuICAgIHRoaXMubGluZUNoYXJ0V2lkdGggPSA1MDAwO1xyXG4gICAgdGhpcy50cmVuZENoYXJ0c0VsZW0gPSBbJ2xvd2VyLW91dGVyLWFyZWEnLCAnbG93ZXItaW5uZXItYXJlYScsICdtZWRpYW4tbGluZScsICd1cHBlci1pbm5lci1hcmVhJywgJ3VwcGVyLW91dGVyLWFyZWEnXTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICogaW5pdCB0aGUgbGluZSBjaGFydCBhbmQgYWxzbyB0aGUgdHJlbmQgY2hhcnRcclxuICAgICAqL1xyXG5cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBMaW5lQ2hhcnQgZXh0ZW5kcyBDaGFydCB7XHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhKXtcclxuICAgIHN1cGVyKGRhdGEpXHJcbiAgICB0aGlzLmxpbmVDaGFydCgpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBsaW5lQ2hhcnQoKSB7XHJcblxyXG4gICAgICByYXRpbyA9IE1hdGguY2VpbCh0aGlzLnN3YXJtRGF0YS5sZW5ndGggLyB0aGlzLmxpbmVDaGFydFdpZHRoKTtcclxuXHJcbiAgICAgIC8vIFN3YXJtIGZlYXR1cmVzIGxpbmUgY2hhcnRcclxuICAgICAgbGV0IGxpbmVDaGFydEhlaWdodCA9IDUwMDsgLy8gdGhlIGxpbmUgY2hhcnQgaGVpZ2h0XHJcbiAgICAgIGxldCBtYXJnaW4gPSB7XHJcbiAgICAgICAgICB0b3A6IDEwLFxyXG4gICAgICAgICAgcmlnaHQ6IDAsXHJcbiAgICAgICAgICBib3R0b206IDEwMCxcclxuICAgICAgICAgIGxlZnQ6IDEwXHJcbiAgICAgIH07XHJcbiAgICAgIGxldCBtYXJnaW5Ub0xlZ2VuZCA9IDUwO1xyXG5cclxuICAgICAgbGV0IHN3YXJtX2ZlYXR1cmVzID0gdGhpcy5zd2FybV9mZWF0dXJlcztcclxuICAgICAgLy8gcmVtb3ZlIHRoZSB0aW1lIGtleVxyXG4gICAgICBsZXQgaW5kZXggPSBzd2FybV9mZWF0dXJlcy5pbmRleE9mKCd0aW1lJyk7XHJcbiAgICAgIHN3YXJtX2ZlYXR1cmVzLnNwbGljZShpbmRleCwgMSk7XHJcblxyXG4gICAgICBsZXQgbGluZUNoYXJ0RGF0YSA9IFtdO1xyXG4gICAgICAvLyBhZ2dyZWdhdGUgYW5kIGF2ZXJhZ2UgdGhlIHN3YXJtIGRhdGEgdG8gdGhpcy5saW5lQ2hhcnRXaWR0aCBwb2ludHMgaW4gdGhlIGxpbmUgY2hhcnRcclxuICAgICAgaWYgKHRoaXMuc3dhcm1EYXRhLmxlbmd0aCA+IHRoaXMubGluZUNoYXJ0V2lkdGgpIHtcclxuICAgICAgICAgIC8vIHRtcCBhcnJheSBmb3IgdGhlIGFnZ3JlZ2F0ZWQgYW5kIGF2ZXJhZ2VkIGZlYXR1cmVzXHJcbiAgICAgICAgICBsZXQgdG1wID0gbmV3IEFycmF5KHN3YXJtX2ZlYXR1cmVzLmxlbmd0aCkuZmlsbCgwKTtcclxuXHJcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc3dhcm1EYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgLy8gYWdncmVnYXRlIHRoZSBmZWF0dXJlcyBpbiB0aGUgdGVtcCBhcnJheVxyXG4gICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgc3dhcm1fZmVhdHVyZXMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgdG1wW2pdICs9IHRoaXMuc3dhcm1EYXRhW2ldW3N3YXJtX2ZlYXR1cmVzW2pdXTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgLy8gaWYgdGhlIHJhdGlvIGlzIHplcm8gdGhlbiBhdmVyYWdlIGl0IGFuZCBzZXQgaXQgdG8gemVyb1xyXG4gICAgICAgICAgICAgIGlmIChpICUgcmF0aW8gPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgbGV0IHRtcF9vYmplY3QgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAndGltZSc6IGkgLyByYXRpb1xyXG4gICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzd2FybV9mZWF0dXJlcy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgdG1wW2pdID0gdG1wW2pdIC8gcmF0aW87XHJcbiAgICAgICAgICAgICAgICAgICAgICB0bXBfb2JqZWN0W3N3YXJtX2ZlYXR1cmVzW2pdXSA9IHRtcFtqXTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgbGluZUNoYXJ0RGF0YS5wdXNoKHRtcF9vYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgICB0bXAgPSBuZXcgQXJyYXkoc3dhcm1fZmVhdHVyZXMubGVuZ3RoKS5maWxsKDApO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGxpbmVDaGFydERhdGEgPSB0aGlzLnN3YXJtRGF0YTtcclxuICAgICAgfVxyXG4gICAgICAvL2NvbnNvbGUubG9nKGxpbmVDaGFydERhdGEpO1xyXG4gICAgICB6b29tRnVuY3Rpb24gPSBkMy5zY2FsZUxpbmVhcigpXHJcbiAgICAgICAgICAuZG9tYWluKFswLCBsaW5lQ2hhcnREYXRhLmxlbmd0aF0pXHJcbiAgICAgICAgICAucmFuZ2UoWzAsIHRoaXMubGluZUNoYXJ0V2lkdGhdKTtcclxuXHJcblxyXG4gICAgICAvLyB4IGF4aXMgc2NhbGUgLSBtaW51cyBtYXJnaW5MaW5lQ2hhcnQgIG5lZWRlZFxyXG4gICAgICB4ID0gZDMuc2NhbGVMaW5lYXIoKVxyXG4gICAgICAgICAgLmRvbWFpbihbMCwgbGluZUNoYXJ0RGF0YS5sZW5ndGhdKVxyXG4gICAgICAgICAgLnJhbmdlKFswLCB0aGlzLmxpbmVDaGFydFdpZHRoXSk7XHJcbiAgICAgIGxldCB4MiA9IGQzLnNjYWxlTGluZWFyKClcclxuICAgICAgICAgIC5kb21haW4oWzAsIGxpbmVDaGFydERhdGEubGVuZ3RoXSlcclxuICAgICAgICAgIC5yYW5nZShbMCwgdGhpcy5saW5lQ2hhcnRXaWR0aF0pO1xyXG4gICAgICAvLyBkZWZpbmUgd2hlcmUgdGhlIGF4aXMgaXMgZXRjXHJcbiAgICAgIGxldCB4QXhpcyA9IGQzLmF4aXNCb3R0b20oeClcclxuICAgICAgICAgIC50aWNrcygxMClcclxuICAgICAgICAgIC50aWNrU2l6ZSgxMClcclxuICAgICAgICAgIC50aWNrUGFkZGluZyg1KVxyXG4gICAgICAgICAgLnRpY2tGb3JtYXQoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKChkICogcmF0aW8pIC8gMTUwMCkgJSA2MCArICc6JyArIE1hdGguZmxvb3IoKGQgKiByYXRpbykgLyBwYXJhbWV0ZXJzWydmcHMnXSkgJSA2MCArICc6OicgKyAoZCAqIHJhdGlvKSAlIHBhcmFtZXRlcnNbJ2ZwcyddO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAvLyB5IGF4aXMgc2NhbGUgd2hpY2ggaXMgbm9ybWFsaXplZFxyXG4gICAgICB5ID0gZDMuc2NhbGVMaW5lYXIoKVxyXG4gICAgICAgICAgLmRvbWFpbihbMCwgMTAwXSlcclxuICAgICAgICAgIC5yYW5nZShbbGluZUNoYXJ0SGVpZ2h0LCAwXSk7XHJcbiAgICAgIC8vIGRlZmluZSB3aGVyZSB0aGUgYXhpcyBpcyBldGNcclxuICAgICAgbGV0IHlBeGlzID0gZDMuYXhpc0xlZnQoeSlcclxuICAgICAgICAgIC50aWNrcygwKVxyXG4gICAgICAgICAgLnRpY2tTaXplKDEwKVxyXG4gICAgICAgICAgLnRpY2tQYWRkaW5nKDUpO1xyXG5cclxuICAgICAgbGV0IGRyYWdnZWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIC8vIGRyYWdnZWQgZnVuY3Rpb24gZ2V0IHRoZSBjb29yZGluYXRlcyBhbmQgY2FsY3VsYXRlIHRoZSB0aW1lIG1vbWVudCBmcm9tIHRoaXNcclxuICAgICAgICAgIGxldCBjb29yZHMgPSBkMy5tb3VzZSh0aGlzKTtcclxuICAgICAgICAgIGlmIChjb29yZHNbMF0gPCBtYXJnaW4ubGVmdCB8fCBjb29yZHNbMF0gPiB0aGlzLmxpbmVDaGFydFdpZHRoIHx8IGNvb3Jkc1sxXSA8IDAgfHwgY29vcmRzWzFdID4gbGluZUNoYXJ0SGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLy8gdG1wIHNjYWxlIHRvIGluY2x1ZGUgdGhlIHpvb20gZmFjdG9yXHJcbiAgICAgICAgICBsZXQgdG1wU2NhbGUgPSBkMy5zY2FsZUxpbmVhcigpXHJcbiAgICAgICAgICAgICAgLmRvbWFpbih6b29tRnVuY3Rpb24ucmFuZ2UoKSlcclxuICAgICAgICAgICAgICAucmFuZ2Uoem9vbUZ1bmN0aW9uLmRvbWFpbigpKTtcclxuICAgICAgICAgIC8vIHNldCB0aGUgbmV3IHRpbWVcclxuICAgICAgICAgIHRoaXMuc2V0SW5kZXhUaW1lKE1hdGguZmxvb3IoKHRtcFNjYWxlKGNvb3Jkc1swXSAtIG1hcmdpbi5sZWZ0KSkgKiByYXRpbykpO1xyXG4gICAgICB9O1xyXG4gICAgICBsZXQgem9vbSA9IGQzLnpvb20oKVxyXG4gICAgICAgICAgLnNjYWxlRXh0ZW50KFsxLCAyMF0pXHJcbiAgICAgICAgICAudHJhbnNsYXRlRXh0ZW50KFtcclxuICAgICAgICAgICAgICBbMCwgMF0sXHJcbiAgICAgICAgICAgICAgW3RoaXMubGluZUNoYXJ0V2lkdGgsIGxpbmVDaGFydEhlaWdodF1cclxuICAgICAgICAgIF0pXHJcbiAgICAgICAgICAuZXh0ZW50KFtcclxuICAgICAgICAgICAgICBbMCwgMF0sXHJcbiAgICAgICAgICAgICAgW3RoaXMubGluZUNoYXJ0V2lkdGgsIGxpbmVDaGFydEhlaWdodF1cclxuICAgICAgICAgIF0pXHJcbiAgICAgICAgICAub24oJ3pvb20nLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAvLyBnZXQgdGhlIHRyYW5zZm9ybSBmYWN0b3JcclxuICAgICAgICAgICAgICBsZXQgdCA9IGQzLmV2ZW50LnRyYW5zZm9ybTtcclxuICAgICAgICAgICAgICAvLyBjaGFuZ2Ugc2NhbGluZyBmdW5jdGlvblxyXG4gICAgICAgICAgICAgIHpvb21GdW5jdGlvbiA9IHguZG9tYWluKHQucmVzY2FsZVgoeDIpLmRvbWFpbigpKTtcclxuICAgICAgICAgICAgICAvLyB6b29tIGVhY2ggYXZhaWFibGUgbGluZVxyXG4gICAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiBsaW5lcykge1xyXG4gICAgICAgICAgICAgICAgICBpZiAobGluZXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgem9vbUdyb3VwLnNlbGVjdCgoJyMnICsga2V5ICsgJ0xpbmUnKSkuYXR0cignZCcsIGxpbmVzW2tleV0pO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIC8vIHpvb20gdGhlIHRyZW5kIGNoYXJ0c1xyXG4gICAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiB0cmVuZENoYXJ0c1pvb20pIHtcclxuICAgICAgICAgICAgICAgICAgaWYgKHRyZW5kQ2hhcnRzWm9vbS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudHJlbmRDaGFydHNFbGVtLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgem9vbUdyb3VwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZWxlY3QoKCcjJyArIGtleSArICdUcmVuZENoYXJ0IC4nICsgdGhpcy50cmVuZENoYXJ0c0VsZW1baV0pKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignZCcsIHRyZW5kQ2hhcnRzWm9vbVtrZXldW3RoaXMudHJlbmRDaGFydHNFbGVtW2ldXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgLy8gcmVzY2FsZSB0aGUgYXhpc1xyXG4gICAgICAgICAgICAgIGdYYXhpcy5jYWxsKHhBeGlzKTtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gbWFrZSB0aGUgc3ZnIHJlc2l6YWJsZVxyXG4gICAgICBsZXQgc3dhcm1MaW5lQ2hhcnQgPSBkMy5zZWxlY3QoJyNzd2FybS12aXMnKVxyXG4gICAgICAgICAgLmNsYXNzZWQoJ3N2Zy1saW5lLWNoYXJ0LWNvbnRhaW5lcicsIHRydWUpXHJcbiAgICAgICAgICAvLyB0byBtYWtlIGl0IHJlc3BvbnNpdmUgd2l0aCBjc3NcclxuICAgICAgICAgIC5hcHBlbmQoJ3N2ZycpXHJcbiAgICAgICAgICAuYXR0cigncHJlc2VydmVBc3BlY3RSYXRpbycsICd4TWluWU1pbiBtZWV0JylcclxuXHJcbiAgICAgICAgICAuYXR0cigndmlld0JveCcsICcwIDAgJyArIHRoaXMubGluZUNoYXJ0V2lkdGggKyAnICcgKyAobGluZUNoYXJ0SGVpZ2h0ICsgbWFyZ2luLmJvdHRvbSkpXHJcbiAgICAgICAgICAvLyBhZGQgdGhlIGNsYXNzIHN2Zy1jb250ZW50XHJcbiAgICAgICAgICAuY2xhc3NlZCgnc3ZnLWNvbnRlbnQnLCB0cnVlKTtcclxuXHJcbiAgICAgIHpvb21Hcm91cCA9IHN3YXJtTGluZUNoYXJ0XHJcbiAgICAgICAgICAuYXBwZW5kKCdzdmc6ZycpXHJcbiAgICAgICAgICAuYXR0cignaWQnLCAnbGluZUNoYXJ0Wm9vbScpXHJcbiAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgbWFyZ2luLmxlZnQgKyAnLDApJyk7XHJcblxyXG4gICAgICAvLyBhcHBlbmQgYSBncm91cCBmb3IgdGhlIHggYXhpc1xyXG4gICAgICAvLyBhZGQgdGhlIGF4aXNcclxuICAgICAgbGV0IGdYYXhpcyA9IHpvb21Hcm91cC5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3ggYXhpcy1saW5lLWNoYXJ0JylcclxuICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKDAsJyArIGxpbmVDaGFydEhlaWdodCArICcpJylcclxuICAgICAgICAgIC5jYWxsKHhBeGlzKTtcclxuXHJcbiAgICAgIC8vIGFwcGVuZCBhIGdyb3VwIGZvciB0aGUgeSBheGlzXHJcbiAgICAgIHpvb21Hcm91cC5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3kgYXhpcy1saW5lLWNoYXJ0JylcclxuICAgICAgICAgIC5jYWxsKHlBeGlzKTtcclxuXHJcblxyXG4gICAgICAvLyB0aGUgdGltZSBsaW5lIGFwcGVuZCB0aGUgbGluZVxyXG4gICAgICB6b29tR3JvdXAuYXBwZW5kKCdsaW5lJylcclxuICAgICAgICAgIC5hdHRyKCdjbGFzcycsICd0aW1lLWxpbmUnKVxyXG4gICAgICAgICAgLmF0dHIoJ2lkJywgJ2xpbmVDaGFydFRpbWVMaW5lJylcclxuICAgICAgICAgIC5hdHRyKCd4MScsIDApXHJcbiAgICAgICAgICAuYXR0cigneTEnLCAwKVxyXG4gICAgICAgICAgLmF0dHIoJ3gyJywgMClcclxuICAgICAgICAgIC5hdHRyKCd5MicsIGxpbmVDaGFydEhlaWdodCk7XHJcblxyXG4gICAgICAgICAgLy8gY29sb3JzIGZvciB0aGUgbGluZXNcclxuICAgICAgICAgIGxldCBsaW5lX2NvbG9ycyA9IGQzLnNjYWxlT3JkaW5hbChkMy5zY2hlbWVDYXRlZ29yeTEwKTtcclxuICAgICAgICAgIGxldCBsaW5lcyA9IHt9O1xyXG4gICAgICAgICAgLy8gYWRkIHRoZSBsaW5lcyB0byB0aGUgbGluZSBjaGFydFxyXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzd2FybV9mZWF0dXJlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgIGxldCBtaW4gPSBkMy5taW4obGluZUNoYXJ0RGF0YSwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gZFtzd2FybV9mZWF0dXJlc1tpXV07XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgbGV0IG1heCA9IGQzLm1heChsaW5lQ2hhcnREYXRhLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBkW3N3YXJtX2ZlYXR1cmVzW2ldXTtcclxuICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgbGV0IG5vcm1hbGl6YXRpb25TY2FsZSA9IGQzLnNjYWxlTGluZWFyKCkuZG9tYWluKFttaW4sIG1heF0pLnJhbmdlKFswLCAxMDBdKTtcclxuICAgICAgICAgICAgICBsZXQgbGluZSA9IGQzLmxpbmUoKVxyXG4gICAgICAgICAgICAgICAgICAueChmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geChkWyd0aW1lJ10pO1xyXG4gICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAueShmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geShub3JtYWxpemF0aW9uU2NhbGUoZFtzd2FybV9mZWF0dXJlc1tpXV0pKTtcclxuICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgbGluZXNbc3dhcm1fZmVhdHVyZXNbaV1dID0gbGluZTtcclxuICAgICAgICAgICAgICAvL2FwcGVuZCB0aGUgbGluZSB0byB0aGUgbGluZSBjaGFydFxyXG4gICAgICAgICAgICAgIHpvb21Hcm91cC5hcHBlbmQoJ3BhdGgnKVxyXG4gICAgICAgICAgICAgICAgICAuZGF0YShbbGluZUNoYXJ0RGF0YV0pXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsIChzd2FybV9mZWF0dXJlc1tpXSArICdMaW5lJykpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsaW5lIGxpbmVDaGFydExpbmUnKVxyXG4gICAgICAgICAgICAgICAgICAuc3R5bGUoJ3N0cm9rZScsIGxpbmVfY29sb3JzKGkpKVxyXG4gICAgICAgICAgICAgICAgICAuYXR0cignZCcsIGxpbmUpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCduYW1lJywgc3dhcm1fZmVhdHVyZXNbaV0pO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICQoJyNsaW5lQ2hhcnRUaW1lTGluZScpLmFwcGVuZFRvKCcjbGluZUNoYXJ0Wm9vbScpO1xyXG4gICAgICAgICAgLy8gYXBwZW5kIHRoZSB6b29tIHJlY3RhbmdsZVxyXG4gICAgICAgICAgem9vbUdyb3VwLmFwcGVuZCgncmVjdCcpXHJcbiAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3pvb20nKVxyXG4gICAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIHRoaXMubGluZUNoYXJ0V2lkdGgpXHJcbiAgICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGxpbmVDaGFydEhlaWdodClcclxuICAgICAgICAgICAgICAuY2FsbCh6b29tKVxyXG4gICAgICAgICAgICAgIC5vbignY2xpY2snLCBkcmFnZ2VkKVxyXG4gICAgICAgICAgICAgIC5jYWxsKGQzLmRyYWcoKVxyXG4gICAgICAgICAgICAgICAgICAub24oJ2RyYWcnLCBkcmFnZ2VkKVxyXG4gICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAvLyBhcHBlbmQgdGhlIGxlZ2VuZCBmb3IgdGhlIGxpbmUgY2hhcnRcclxuICAgICAgLy8gdmFycyBmb3IgdGhlIGxlZ2VuZFxyXG4gICAgICBsZXQgbGVnZW5kV2lkdGggPSAxMDA7XHJcbiAgICAgIGxldCBsZWdlbmRIZWlnaHQgPSA1MDtcclxuXHJcbiAgICAgIC8vc2VsZWN0IGFsbCB0aGUgbGluZXNcclxuICAgICAgbGV0IGNoYXJ0TGluZXMgPSBkMy5zZWxlY3RBbGwoJy5saW5lJyk7XHJcblxyXG4gICAgICAvL2FwcGVuZCBhIGdyb3VwIGZvciB0aGUgbGVnZW5kXHJcbiAgICAgIHN3YXJtTGluZUNoYXJ0XHJcbiAgICAgICAgICAuYXBwZW5kKCdnJylcclxuICAgICAgICAgIC5hdHRyKCdpZCcsICdsaW5lQ2hhcnRMZWdlbmQnKVxyXG4gICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIG1hcmdpbi5ib3R0b20gKyAnLCcgKyAobGluZUNoYXJ0SGVpZ2h0ICsgbWFyZ2luVG9MZWdlbmQpICsgJyknKVxyXG4gICAgICAgICAgLnNlbGVjdEFsbCgncmVjdC5sZWdlbmQnKVxyXG4gICAgICAgICAgLmRhdGEoY2hhcnRMaW5lcy5fZ3JvdXBzWzBdKVxyXG4gICAgICAgICAgLmVudGVyKClcclxuICAgICAgICAgIC8vYXBwZW5kIHRoZSB3aG9sZSBsZWdlbmQgaW4gYSBlYWNoIGZ1bmN0aW9uXHJcbiAgICAgICAgICAuZWFjaChmdW5jdGlvbihkLCBpKSB7XHJcbiAgICAgICAgICAgICAgbGV0IHNwYWNpbmcgPSA2MDA7XHJcbiAgICAgICAgICAgICAgbGV0IHRleHRTcGFjZSA9IDQwO1xyXG4gICAgICAgICAgICAgIC8vIGFwcGVuZCB0aGUgcmVjdGFuZ2xlcyBmb3IgdGhlIGxlZ2VuZFxyXG4gICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5hcHBlbmQoJ3JlY3QnKVxyXG4gICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGVnZW5kJylcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgbGVnZW5kV2lkdGgpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCBsZWdlbmRIZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCd4JywgKHNwYWNpbmcgKiBpKSArICdweCcpXHJcbiAgICAgICAgICAgICAgICAgIC5zdHlsZSgnZmlsbCcsIGQuc3R5bGUuc3Ryb2tlKTtcclxuXHJcbiAgICAgICAgICAgICAgLy8gYXBwZW5kIHRoZSB0ZXh0IGZvciB0aGUgbGVnZW5kXHJcbiAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmFwcGVuZCgndGV4dCcpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsIGQuYXR0cmlidXRlcy5pZC52YWx1ZSArICdMZWdlbmRUaXRsZScpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsaW5lLWNoYXJ0LWxlZ2VuZC10ZXh0JylcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ3knLCB0ZXh0U3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCd4JywgKHNwYWNpbmcgKiBpICsgbGVnZW5kV2lkdGggKyAxMCkgKyAncHgnKVxyXG4gICAgICAgICAgICAgICAgICAudGV4dChkLmF0dHJpYnV0ZXMubmFtZS52YWx1ZSArICc6ICcpO1xyXG5cclxuICAgICAgICAgICAgICAvL2FwcGVuZCB0aGUgdGV4dCBmb3IgdGhlIHZhbHVlIG9mIHRoZSBsaW5lXHJcbiAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmFwcGVuZCgndGV4dCcpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsIGQuYXR0cmlidXRlcy5pZC52YWx1ZSArICdWYWx1ZScpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsaW5lLWNoYXJ0LWxlZ2VuZC10ZXh0JylcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ3knLCB0ZXh0U3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCd4JywgKHNwYWNpbmcgKiBpICsgbGVnZW5kV2lkdGggK1xyXG4gICAgICAgICAgICAgICAgICAgICAgLy90aGUgbmV4dCBleHByZXNzaW9uIGdldHMgdGhlIHRleHQgbGVuZ3RoXHJcbiAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QoJyMnICsgZC5hdHRyaWJ1dGVzLmlkLnZhbHVlICsgJ0xlZ2VuZFRpdGxlJykubm9kZSgpLmdldENvbXB1dGVkVGV4dExlbmd0aCgpICtcclxuICAgICAgICAgICAgICAgICAgICAgIDEwKSArICdweCcpXHJcbiAgICAgICAgICAgICAgICAgIC50ZXh0KCcwLjAnKTtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgLy9hcHBlbmQgYSBsZWdlbmQgZ3JvdXAgZm9yIHRoZSB0cmVuZCBjaGFydHNcclxuICAgICAgc3dhcm1MaW5lQ2hhcnRcclxuICAgICAgICAgIC5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgLmF0dHIoJ2lkJywgJ3RyZW5kQ2hhcnRMZWdlbmQnKVxyXG4gICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIG1hcmdpbi5ib3R0b20gKyAnLCcgKyAobGluZUNoYXJ0SGVpZ2h0ICsgbWFyZ2luVG9MZWdlbmQpICsgJyknKVxyXG4gICAgICAgICAgLnNlbGVjdEFsbCgncmVjdC5sZWdlbmQnKVxyXG4gICAgICAgICAgLmRhdGEoWyc1JSAtIDk1JScsICcyNSUgLSA3NSUnLCAnTWVkaWFuJ10pXHJcbiAgICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgLy9hcHBlbmQgdGhlIHdob2xlIGxlZ2VuZCBpbiBhIGVhY2ggZnVuY3Rpb25cclxuICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uKGQsIGkpIHtcclxuICAgICAgICAgICAgICBsZXQgc3BhY2luZyA9IDgwMDtcclxuICAgICAgICAgICAgICBsZXQgdGV4dFNwYWNlID0gNDA7XHJcbiAgICAgICAgICAgICAgLy8gYXBwZW5kIHRoZSByZWN0YW5nbGVzIGZvciB0aGUgbGVnZW5kXHJcbiAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmFwcGVuZCgncmVjdCcpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsZWdlbmQnKVxyXG4gICAgICAgICAgICAgICAgICAuYXR0cignd2lkdGgnLCBsZWdlbmRXaWR0aClcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGxlZ2VuZEhlaWdodClcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gnLCAoc3BhY2luZyAqIGkpICsgJ3B4JylcclxuICAgICAgICAgICAgICAgICAgLnN0eWxlKCdmaWxsJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnIzc0YTljZic7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGkgPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyMwNDVhOGQnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyM1MjUyNTInO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgLy8gYXBwZW5kIHRoZSB0ZXh0IGZvciB0aGUgbGVnZW5kXHJcbiAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmFwcGVuZCgndGV4dCcpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsaW5lLWNoYXJ0LWxlZ2VuZC10ZXh0JylcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ3knLCB0ZXh0U3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCd4JywgKHNwYWNpbmcgKiBpICsgbGVnZW5kV2lkdGggKyAxMCkgKyAncHgnKVxyXG4gICAgICAgICAgICAgICAgICAudGV4dChkKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAkKCcjdHJlbmRDaGFydExlZ2VuZCcpLmhpZGUoKTtcclxuXHJcbiAgICAgIHRoaXMuaW5pdExpbmVDaGFydEJ1dHRvbnMoKVxyXG5cclxuXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJbml0IGxpbmUgY2hhcnQgYnV0dG9uIGxpc3RlbmVyc1xyXG4gICAqL1xyXG4gIGluaXRMaW5lQ2hhcnRCdXR0b25zKCkge1xyXG4gICAgICAvLyBhZGQgdGhlIExpbmUgY2hhcnQgYnV0dG9ucyB0byB0aGUgZmVhdHVyZSBwYW5lbFxyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc3dhcm1fZmVhdHVyZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGxldCBjYXBpdGFsaXplZF9mZWF0dXJlX3N0cmluZyA9IHRoaXMuc3dhcm1fZmVhdHVyZXNbaV0uc3BsaXQoJ18nKS5qb2luKCcgJyk7XHJcbiAgICAgICAgICBjYXBpdGFsaXplZF9mZWF0dXJlX3N0cmluZyA9IGNhcGl0YWxpemVkX2ZlYXR1cmVfc3RyaW5nLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2FwaXRhbGl6ZWRfZmVhdHVyZV9zdHJpbmcuc2xpY2UoMSk7XHJcblxyXG4gICAgICAgICAgJCgnI2xpbmUtY2hhcnQtZmVhdHVyZS1jaGVja2JveGVzJylcclxuICAgICAgICAgICAgICAuYXBwZW5kKCc8dHI+PHRoPiA8ZGl2IGNsYXNzPVwicHJldHR5IHAtc3dpdGNoIHAtZmlsbCBwLWJpZ2dlclwiPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBjbGFzcz1cImxpbmUtY2hhcnQtY2hlY2stYm94XCIgaWQ9XCJkcmF3LScgK1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnN3YXJtX2ZlYXR1cmVzW2ldICsgJ1wiIGRhdGE9XCIjJyArIHRoaXMuc3dhcm1fZmVhdHVyZXNbaV0gKyAnTGluZVwiIC8+PGRpdiBjbGFzcz1cInN0YXRlXCI+PGxhYmVsPicgK1xyXG4gICAgICAgICAgICAgICAgICBjYXBpdGFsaXplZF9mZWF0dXJlX3N0cmluZyArICc8L2xhYmVsPjwvZGl2PjwvZGl2PjwvdGg+PC90cj4nKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgJCgnLmxpbmUtY2hhcnQtY2hlY2stYm94JykuY2hhbmdlKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgbGV0IGNoZWNrYm94ID0gJCh0aGlzKTtcclxuICAgICAgICAgIGlmIChjaGVja2JveC5wcm9wKCdjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICAkKGNoZWNrYm94LmF0dHIoJ2RhdGEnKSkuc2hvdygpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAkKGNoZWNrYm94LmF0dHIoJ2RhdGEnKSkuaGlkZSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG5cclxufVxyXG5cclxuLyoqXHJcbiAqIEFkZCBhIHRyZW5kIGNoYXJ0IHNob3dpbmcgbWVkaWFuIGFuZCBwZXJjZW50aWxlc1xyXG4gKiAvLyAtIHdoaWNoIGZlYXR1cmVcclxuICovXHJcbmV4cG9ydCBjbGFzcyBUcmVuZENoYXJ0IGV4dGVuZHMgQ2hhcnR7XHJcbiAgICBjb25zdHJ1Y3RvcihlbGVtLCBzd2FybURhdGEpe1xyXG4gICAgICBzdXBlcihzd2FybURhdGEpO1xyXG4gICAgICB0aGlzLmVsZW0gPSBlbGVtO1xyXG5cclxuICAgICAgdGhpcy50cmVuZGNoYXJ0KCk7XHJcbiAgICAgIC8vdGhpcy5kaXNhYmxlTGluZUNoYXJ0KCk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGRpc2FibGVMaW5lQ2hhcnQoKSB7XHJcbiAgICAgICAgJCgnLmxpbmVDaGFydEJ1dHRvbicpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSkucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICAgICAkKCcubGluZS1jaGFydC1jaGVjay1ib3gnKS5hdHRyKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgICAgICQoJy5saW5lQ2hhcnRMaW5lJykuYXR0cigndmlzaWJpbGl0eScsICdoaWRkZW4nKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgdHJlbmRjaGFydCgpe1xyXG4gICAgLy8gY2hlY2sgd2hpY2ggZmVhdHVyZSB0byBkaXNwbGF5IGluIHRoZSB0cmVuZCBjaGFydFxyXG4gICAgbGV0IGZlYXR1cmUgPSAnJztcclxuICAgIGlmICh0aGlzLmVsZW1bJ2lkJ10udG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnc3BlZWQnKSkge1xyXG4gICAgICAgIGZlYXR1cmUgPSAnc3BlZWQnO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmVsZW1bJ2lkJ10udG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnYWNjZWxlcmF0aW9uJykpIHtcclxuICAgICAgICBmZWF0dXJlID0gJ2FjY2VsZXJhdGlvbic7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuZWxlbVsnaWQnXS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdkaXN0YW5jZV9jZW50cm9pZCcpKSB7XHJcbiAgICAgICAgZmVhdHVyZSA9ICdkaXN0YW5jZV9jZW50cm9pZCc7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuZWxlbVsnaWQnXS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdtaWRsaW5lX29mZnNldCcpKSB7XHJcbiAgICAgICAgZmVhdHVyZSA9ICdtaWRsaW5lX29mZnNldCc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIC8vIGRhdGEgaXMgbm90IGxvYWRlZCBmdWxseSAtLSByZXR1cm5cclxuICAgIC8vaWYgKCFkYXRhc2V0WzBdW2ZlYXR1cmVdKSB7XHJcbiAgICAvLyAgICByZXR1cm47XHJcbiAgICAvL31cclxuICAgIC8vIGNoYW5nZSB0byB0aGUgdHJlbmQgY2hhcnQgbGVnZW5kXHJcbiAgICAkKCcjbGluZUNoYXJ0TGVnZW5kJykuaGlkZSgpO1xyXG4gICAgJCgnI3RyZW5kQ2hhcnRMZWdlbmQnKS5zaG93KCk7XHJcbiAgICAvLyBjaGVjayBpZiBhbHJlYWR5IGNvbXB1dGVkIGFuZCBvbmx5IGhpZGRlblxyXG4gICAgaWYgKCEkKCgnIycgKyBmZWF0dXJlICsgJ1RyZW5kQ2hhcnQnKSkubGVuZ3RoKSB7XHJcbiAgICAgICAgLy8gZ2V0IHRoZSBkYXRhIGZvciB0aGUgdHJlbmQgY2hhcnRcclxuICAgICAgICBsZXQgdHJlbmRDaGFydERhdGEgPSBbXTtcclxuICAgICAgICBsZXQgbnVtX2FuaW1hbHMgPSBhbmltYWxJZHMubGVuZ3RoO1xyXG4gICAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgcGVyY2V0aWxlcyBmb3IgZXZlcnkgdGltZSBzdGVwXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzd2FybURhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IHRtcCA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IG51bV9hbmltYWxzOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhc2V0W2kgKiBudW1fYW5pbWFscyArIGpdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG1wLnB1c2goZGF0YXNldFtpICogbnVtX2FuaW1hbHMgKyBqXVtmZWF0dXJlXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdHJlbmRDaGFydERhdGEucHVzaChwZXJjZW50aWxlc0xpbmVDaGFydCh0bXApKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy9hZ2dyZWdhdGUgYW5kIGF2ZXJhZ2UgdGhlIHRyZW5kQ2hhcnREYXRhIHRvIHRoaXMubGluZUNoYXJ0V2lkdGggZGF0YSBwb2ludHNcclxuICAgICAgICBpZiAodHJlbmRDaGFydERhdGEubGVuZ3RoID4gdGhpcy5saW5lQ2hhcnRXaWR0aCkge1xyXG4gICAgICAgICAgICBsZXQgdG1wVHJlbmRDaGFydERhdGEgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIC8vIFtwZXJjMDUscGVyYzI1LHBlcmM1MCxwZXJjNzUscGVyYzk1XVxyXG4gICAgICAgICAgICBsZXQgdG1wID0gWzAsIDAsIDAsIDAsIDBdO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmVuZENoYXJ0RGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgLy8gYWdncmVnYXRlXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRtcC5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRtcFtqXSArPSB0cmVuZENoYXJ0RGF0YVtpXVtqXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIGRpdmlkZVxyXG4gICAgICAgICAgICAgICAgaWYgKGkgJSByYXRpbyA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdG1wLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRtcFtqXSArPSB0bXBbal0gLyByYXRpbztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy9hZGQgdG8gdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgdG1wVHJlbmRDaGFydERhdGEucHVzaCh0bXApO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFtwZXJjMDUscGVyYzI1LHBlcmM1MCxwZXJjNzUscGVyYzk1XVxyXG4gICAgICAgICAgICAgICAgICAgIHRtcCA9IFswLCAwLCAwLCAwLCAwXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0cmVuZENoYXJ0RGF0YSA9IHRtcFRyZW5kQ2hhcnREYXRhO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBnZXQgbWluIGFuZCBtYXggZm9yIHRoZSBub3JtYWxpemF0aW9uXHJcbiAgICAgICAgbGV0IG1pbiA9IGQzLm1pbih0cmVuZENoYXJ0RGF0YSwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZFswXTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBsZXQgbWF4ID0gZDMubWF4KHRyZW5kQ2hhcnREYXRhLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkWzRdO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGxldCBub3JtYWxpemF0aW9uU2NhbGUgPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbbWluLCBtYXhdKS5yYW5nZShbMCwgMTAwXSk7XHJcblxyXG4gICAgICAgIC8vIGFkZCBhIGdyb3VwIGZvciB0aGUgdHJlbmQgY2hhcnRcclxuICAgICAgICBsZXQgdHJlbmRDaGFydCA9IHpvb21Hcm91cC5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAuYXR0cignaWQnLCAoZmVhdHVyZSArICdUcmVuZENoYXJ0JykpXHJcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICd0cmVuZENoYXJ0RGF0YScpO1xyXG4gICAgICAgIC8vIGFwcGVuZCB0aGUgem9vbSByZWN0YW5nbGUgYWdhaW4gdG8gdGhlIGVuZCBvZiB0aGUgZ3JvdXBcclxuICAgICAgICAkKCcuem9vbScpLmFwcGVuZFRvKCcjbGluZUNoYXJ0Wm9vbScpO1xyXG4gICAgICAgICQoJyNsaW5lQ2hhcnRUaW1lTGluZScpLmFwcGVuZFRvKCcjbGluZUNoYXJ0Wm9vbScpO1xyXG4gICAgICAgIC8vIHZhciB0byBzYXZlIHRoZSBmdW5jdGlvbnMgZm9yIHRoZSB6b29tXHJcbiAgICAgICAgdHJlbmRDaGFydHNab29tW2ZlYXR1cmVdID0ge307XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy50cmVuZENoYXJ0c0VsZW0ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgLy8gZnVuY3Rpb25zIGZvciB0aGUgdXBwZXIgYW5kIGlubmVyIGFyZWFzIGFuZCB0aGUgbWVkaWFuXHJcbiAgICAgICAgICAgIGxldCB0ZW1wO1xyXG4gICAgICAgICAgICAvLyBsb3dlciBvdXRlciBhcmVhIGFuZCBsb3dlciBpbm5lciBhcmVhXHJcbiAgICAgICAgICAgIGlmIChpIDwgMikge1xyXG4gICAgICAgICAgICAgICAgdGVtcCA9IGQzLmFyZWEoKVxyXG4gICAgICAgICAgICAgICAgICAgIC54KGZ1bmN0aW9uKGQsIGopIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHgoaik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAueTAoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geShub3JtYWxpemF0aW9uU2NhbGUoZFsoaSArIDEpXSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLnkxKGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHkobm9ybWFsaXphdGlvblNjYWxlKGRbaV0pKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBtZWRpYW4gbGluZVxyXG4gICAgICAgICAgICBlbHNlIGlmIChpID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wID0gZDMubGluZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgLngoZnVuY3Rpb24oZCwgaikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geChqKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC55KGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHkobm9ybWFsaXphdGlvblNjYWxlKGRbaV0pKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyB1cHBlciBpbm5lciBhcmVhIGFuZCB1cHBlciBvdXRlciBhcmVhXHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGkgPiAyKSB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wID0gZDMuYXJlYSgpXHJcbiAgICAgICAgICAgICAgICAgICAgLngoZnVuY3Rpb24oZCwgaikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geChqKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC55MChmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB5KG5vcm1hbGl6YXRpb25TY2FsZShkW2ldKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAueTEoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geShub3JtYWxpemF0aW9uU2NhbGUoZFsoaSAtIDEpXSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHNhdmUgdGhpcyBmb3IgdGhlIGxhdGVyIHpvb21cclxuICAgICAgICAgICAgdHJlbmRDaGFydHNab29tW2ZlYXR1cmVdW3RoaXMudHJlbmRDaGFydHNFbGVtW2ldXSA9IHRlbXA7XHJcbiAgICAgICAgICAgIC8vIGFwcGVuZCBpdCB0byB0aGUgcGF0aFxyXG4gICAgICAgICAgICB0cmVuZENoYXJ0LmFwcGVuZCgncGF0aCcpXHJcbiAgICAgICAgICAgICAgICAuZGF0YShbdHJlbmRDaGFydERhdGFdKVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgdGhpcy50cmVuZENoYXJ0c0VsZW1baV0pXHJcbiAgICAgICAgICAgICAgICAuYXR0cignZCcsIHRlbXApO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gc2hvdyB0aGUgdHJlbmQgY2hhcnRcclxuICAgICAgICAkKCgnIycgKyBmZWF0dXJlICsgJ1RyZW5kQ2hhcnQnKSkuc2hvdygpO1xyXG4gICAgfVxyXG59XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBVcGRhdGUgdGhlIGxpbmUgY2hhcnQgZmllbGRzIGFuZCB0aGUgbGluZSBjaGFydCB0aW1lIGxpbmVcclxuICovXHJcblxyXG5cclxuXHJcbi8qKlxyXG4gKiBEcmF3aW5nIGZ1bmN0aW9uIC0gaXMgY2FsbGVkIGZvciBlYWNoIHRpbWVzdGVwXHJcbiAqIGluZGV4VGltZSBzYXZlcyB0aGUgY3VycmVudCB0aW1lXHJcbiAqL1xyXG5cclxuXHJcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgIFNldHRlclxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbi8qKlxyXG4gKiBTZXQgdGhlIGluZGV4IHRpbWUgdG8gYSBuZXcgdmFsdWVcclxuICogQHBhcmFtIHtOdW1iZXJ9IHZhbHVlIC0gbmV3IHRpbWUgc3RlcFxyXG4gKi9cclxuXHJcblxyXG4vKipcclxuICogRGVjcmVhc2UgdGltZSBieSAxXHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBTZXQgdGhlIHRoZSBuZXcgYWN0aXZlIHNjYWxlIC0gZS5nLiBzcGVlZCwgYWNjZWxlcmF0aW9uLCBibGFjayBldGMuXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZSAtIGFjdGl2ZSBzY2FsZSBmb3IgdGhlIGluZGl2aWR1YWwgYW5pbWFsc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldEFjdGl2ZVNjYWxlKHZhbHVlKSB7XHJcbiAgICBhY3RpdmVTY2FsZSA9IHZhbHVlO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IHRoZSBuZXcgbWVkb2lkIGFuaW1hbFxyXG4gKiBAcGFyYW0ge051bWJlcn0gdmFsdWUgLSBVbmlxdWV0aGlzLmlkIG9mIHRoZSBhbmltYWxcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRNZWRvaWRBbmltYWwodmFsdWUpIHtcclxuICAgIG1lZG9pZEFuaW1hbCA9IHZhbHVlO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IHRoZSBzZWxlY3RlZCBhbmQgaGlnaGxpZ2h0ZWQgYW5pbWFsc1xyXG4gKiBAcGFyYW0ge2FycmF5fSB2YWx1ZSAtIGFycmF5IG9mIHVucWl1ZXRoaXMuaWQgb2YgdGhlIGFuaW1hbHNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRBY3RpdmVBbmltYWxzKHZhbHVlKSB7XHJcbiAgICBhY3RpdmVBbmltYWxzID0gdmFsdWU7XHJcbn1cclxuIiwiLyplc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtbGV0cyovXHJcbi8qZ2xvYmFsIHdpbmRvdywkLCBkMywgUG9seUJvb2wsIHBhcmFtZXRlcnMsIFNldCovXHJcbi8vIGltcG9ydCAqIGFzIHNwdiBmcm9tICcuL3NwYXRpYWxfdmlldy5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgbmV0d29ya0hpZXJhcmNoeVxyXG59IGZyb20gJy4vZXhwbG9yZS5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgaW5kZXhUaW1lLFxyXG4gICAgYXJyYXlBbmltYWxzLFxyXG4gICAgc2V0QWN0aXZlQW5pbWFscyxcclxuICAgIGRlY0luZGV4VGltZSxcclxuICAgIERyYXdlclxyXG59IGZyb20gJy4vc3BhdGlhbF92aWV3L3NwYXRpYWxfdmlldy5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgc2hvd05ldHdvcmtIaWVyYXJjaHksXHJcbiAgICBuZXR3b3JrQ29sb3IsXHJcbiAgICBuZXR3b3JrQ29sb3JTY2FsZSxcclxuICAgIG5ldHdvcmtBdXRvLFxyXG4gICAgc2V0TmV0d29yTGltaXQsXHJcbiAgICBuZXR3b3JrTGltaXQsXHJcbn0gZnJvbSAnLi9uZXR3b3JrLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBzdGFuZGFyZERldmlhdGlvblxyXG59IGZyb20gJy4vaGVscGVycy5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgc2V0VGltZVNsaWRlcixcclxuICAgIGluaXRUb29sdGlwLFxyXG4gICAgdG9vbHRpcEZ1bmN0aW9uLFxyXG4gICAgaW5pdFNsaWRlcnMsXHJcbiAgICB0b29sdGlwXHJcbn0gZnJvbSAnLi9zcGF0aWFsX3ZpZXcvaW50ZXJhY3Rpb24uanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIC8vbGluZUNoYXJ0LFxyXG4gICAgdXBkYXRlTGluZUNoYXJ0LFxyXG4gICAgTGluZUNoYXJ0XHJcbn0gZnJvbSAnLi9saW5lX2NoYXJ0LmpzJztcclxuXHJcbmxldCB6b29tR3JvdXA7IC8vIHpvb20gZ3JvdXAgZm9yIHRoZSBzcGVjaWZpYyBkZW5kcm9ncmFtXHJcbmxldCB0cmVlbWFwO1xyXG5sZXQgdG9vbHRpcERpdjtcclxubGV0IHNwYXRpYWxWaWV3OyAvLyBnZXQgdGhlIHNwYXRpYWwgdmlldyBzdmcgZnJvbSB0aGUgbWFpbiB2aXNcclxubGV0IHN2Z0xlZ2VuZDtcclxubGV0IGhpZXJhcmNoeUxldmVscyA9IHt9O1xyXG5sZXQgc2V0T3BlcmF0aW9uID0gJ3VuaW9uJztcclxubGV0IGlkOyAvLyBuZWVkZWQgZm9yIHRoZSBjb2xsYXBzZSBmdW5jdGlvblxyXG4vL1N0YXRpYyBjb2xvciBzY2FsZSBmb3IgdGhlIGRlbmRyb2dyYW0gdmFyaWFjbmUgY29sb3JpbmdcclxubGV0IHN0YW5kYXJkRGV2aWF0aW9uQ29sb3JTY2FsZSA9IGQzLnNjYWxlVGhyZXNob2xkKClcclxuICAgIC5kb21haW4oXHJcbiAgICAgICAgWzAsIC4xLCAuMiwgLjMsIC40LCAuNSwgLjYsIC43LCAuOCwgLjksIDFdXHJcbiAgICApXHJcbiAgICAucmFuZ2UoWycjZjdmYmZmJywgJyNkZWViZjcnLCAnI2M2ZGJlZicsICcjOWVjYWUxJywgJyM2YmFlZDYnLCAnIzQyOTJjNicsICcjMjE3MWI1JywgJyMwODUxOWMnLCAnIzA4MzA2YiddKTtcclxuXHJcbmV4cG9ydCBjb25zdCBtYXhOdW1iZXJIaWVyYXJjaGllcyA9IDQ7XHJcbmV4cG9ydCBsZXQgbmV0d29ya0hpZXJhcmNoeUlkcyA9IFtdO1xyXG5leHBvcnQgbGV0IGhpZXJhcmNoeUNvbG9ycyA9IHt9O1xyXG5leHBvcnQgbGV0IGhpZXJhcmNoeUdyb3VwU3RkZXYgPSB7fTtcclxuLy8gVE9ETyBhZGQgbW9yZSBjb2xvcnNcclxuZXhwb3J0IGxldCBjb2xvcnMgPSBbJyM3ZmM5N2YnLCAnIzM4NmNiMCcsICcjZTcyOThhJywgJyNmZjk5MDAnXTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIERlbmRyb2dyYW0gZXh0ZW5kcyBEcmF3ZXJ7XHJcbiAgY29uc3RydWN0b3IoKXtcclxuICAgIHRoaXMuaW5pdERlbmRyb2dyYW0oKVxyXG4gIH1cclxuXHJcbiAgaW5pdERlbmRyb2dyYW0oKSB7XHJcbiAgICAgIC8vIGNvbnN0YW5jdCBmYWN0b3JzIGZvciB0aGUgZGVuZGdyb2dyYW1cclxuICAgICAgbGV0IG1hcmdpbiA9IDIwLFxyXG4gICAgICAgICAgd2lkdGggPSA1MDAwLFxyXG4gICAgICAgICAgaGVpZ2h0ID0gNTAwMDtcclxuXHJcbiAgICAgIC8vIHpvb20gZnVuY3Rpb24gZm9yIHRoZSBkZW5kcm9ncmFtXHJcbiAgICAgIGxldCB6b29tID0gZDMuem9vbSgpXHJcbiAgICAgICAgICAuc2NhbGVFeHRlbnQoWzEsIDEwXSlcclxuICAgICAgICAgIC5vbignem9vbScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIC8vY29uc3RyYWluZWQgem9vbWluZ1xyXG4gICAgICAgICAgICAgIGQzLmV2ZW50LnRyYW5zZm9ybS54ID0gTWF0aC5taW4oMCwgd2lkdGggKiAoZDMuZXZlbnQudHJhbnNmb3JtLmsgLSAxKSxcclxuICAgICAgICAgICAgICAgICAgTWF0aC5tYXgod2lkdGggKiAoMSAtIGQzLmV2ZW50LnRyYW5zZm9ybS5rKSwgZDMuZXZlbnQudHJhbnNmb3JtLngpKTtcclxuXHJcbiAgICAgICAgICAgICAgZDMuZXZlbnQudHJhbnNmb3JtLnkgPSBNYXRoLm1pbigwLCBoZWlnaHQgKiAoZDMuZXZlbnQudHJhbnNmb3JtLmsgLSAxKSxcclxuICAgICAgICAgICAgICAgICAgTWF0aC5tYXgoaGVpZ2h0ICogKDEgLSBkMy5ldmVudC50cmFuc2Zvcm0uayksIGQzLmV2ZW50LnRyYW5zZm9ybS55KSk7XHJcblxyXG4gICAgICAgICAgICAgIC8vIHRyYW5zbGF0ZSBhbmQgc2NhbGVcclxuICAgICAgICAgICAgICB6b29tR3JvdXAuYXR0cigndHJhbnNmb3JtJywgZDMuZXZlbnQudHJhbnNmb3JtKTtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gc3ZnIGNvbnRhaW5lciBmb3IgdGhlIGRlbmRyb2dyYW1cclxuICAgICAgbGV0IHN2ZyA9IGQzLnNlbGVjdCgnI2RlbmRyb2dyYW0tcGFuZWwnKVxyXG4gICAgICAgICAgLmNsYXNzZWQoJ3N2Zy1kZW5kcm9ncmFtLWNvbnRhaW5lcicsIHRydWUpXHJcbiAgICAgICAgICAuYXBwZW5kKCdzdmcnKVxyXG4gICAgICAgICAgLmF0dHIoJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLCAneE1pbllNaW4gbWVldCcpXHJcbiAgICAgICAgICAuYXR0cigndmlld0JveCcsICcwIDAgJyArIHdpZHRoICsgJyAnICsgaGVpZ2h0KVxyXG4gICAgICAgICAgLy8gYWRkIHRoZSBjbGFzcyBzdmctY29udGVudFxyXG4gICAgICAgICAgLmNsYXNzZWQoJ3N2Zy1jb250ZW50LWRlbmRyb2dyYW0nLCB0cnVlKVxyXG4gICAgICAgICAgLmNhbGwoem9vbSk7XHJcblxyXG4gICAgICBpbml0RGVuZHJvZ3JhbUxlZ2VuZCgpO1xyXG5cclxuICAgICAgLy8gYXBwZW5kIHRoZSB6b29tIGdyb3VwIHRvIHRoZSBzdmdcclxuICAgICAgem9vbUdyb3VwID0gc3ZnLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgbWFyZ2luICsgJywnICsgbWFyZ2luICsgJyknKVxyXG4gICAgICAgICAgLmFwcGVuZCgnc3ZnOmcnKTtcclxuXHJcbiAgICAgIC8vIGQzIHRyZWVcclxuICAgICAgdHJlZW1hcCA9IGQzLnRyZWUoKSAvL2QzLmNsdXN0ZXIoKVxyXG4gICAgICAgICAgLnNpemUoWyhoZWlnaHQgLSAxMCAqIG1hcmdpbiksICh3aWR0aCAtIDEwICogbWFyZ2luKV0pO1xyXG5cclxuICAgICAgLy8gc2V0IHRoZSBzcGF0aWFsIHZpZXcgLSBuZWVkZWQgdG8gYWRkIHRoZSBjbHVzdGVyaW5nIHRvIHRoZSBzcGF0aWFsIHZpZXcgd2luZG93XHJcbiAgICAgIHNwYXRpYWxWaWV3ID0gZDMuc2VsZWN0KCcudGFuaycpO1xyXG5cclxuICAgICAgLy8gaW5pdCBkZW5kcm9ncmFtIHNsaWRlclxyXG4gICAgICAvLyBpbml0aWFsaXplIHRoZSBOZXR3b3JrIHNsaWRlclxyXG4gICAgICAkKCcjZGVuZHJvZ3JhbS1wYW5lbC1sZXZlbC1zbGlkZXInKVxyXG4gICAgICAgICAgLnNsaWRlcih7XHJcbiAgICAgICAgICAgICAgcmFuZ2U6ICdtYXgnLFxyXG4gICAgICAgICAgICAgIG1pbjogMixcclxuICAgICAgICAgICAgICBtYXg6IDIsXHJcbiAgICAgICAgICAgICAgc3RlcDogMSxcclxuICAgICAgICAgICAgICB2YWx1ZTogaGllcmFyY2h5TGV2ZWxzWydoMCddLFxyXG4gICAgICAgICAgICAgIHNsaWRlOiBmdW5jdGlvbihldmVudCwgdWkpIHtcclxuICAgICAgICAgICAgICAgICAgbGV0IGlkID0gJCgnLnNob3ctZGVuZHJvZ3JhbS5idG4tcHJpbWFyeScpLmF0dHIoJ2RhdGEnKTtcclxuICAgICAgICAgICAgICAgICAgc2V0SGllcmFyY2h5TGV2ZWwoaWQsIHVpLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgdXBkYXRlRGVuZHJvZ3JhbSgpO1xyXG4gICAgICAgICAgICAgICAgICAvLyBpZiBubyBhbmltYXRpb24gaXMgYWN0aXZlIGRyYXcgdGhlIG5ldyBjbHVzdGVyaW5nIGFuZCBkZW5kcm9ncmFtXHJcbiAgICAgICAgICAgICAgICAgIC8vIGRyYXdEZW5kcm9ncmFtKCk7XHJcbiAgICAgICAgICAgICAgICAgIGlmICghJCgnI3BsYXktYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWNJbmRleFRpbWUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3RGVuZHJvZ3JhbSgpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBpbml0IHRoZSB0b29sdGlwIGZvciB0aGUgZGVuZHJvZ3JhbVxyXG4gICAgICB0b29sdGlwRGl2ID0gZDMuc2VsZWN0KCcjZGVuZHJvZ3JhbS10b29sdGlwJylcclxuICAgICAgICAgIC5zdHlsZSgnbGVmdCcsIDAgKyAncHgnKVxyXG4gICAgICAgICAgLnN0eWxlKCd0b3AnLCAwICsgJ3B4JylcclxuICAgICAgICAgIC5vbignbW91c2VvdmVyJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgdG9vbHRpcERpdlxyXG4gICAgICAgICAgICAgICAgICAuc3R5bGUoJ29wYWNpdHknLCAxKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAvLyBpbml0IHRoZSBoaWVyYXJjaHkgbGVnZW5kXHJcbiAgICAgIGxldCBsZWdlbmRXaWR0aCA9IG1heE51bWJlckhpZXJhcmNoaWVzICogMTAwO1xyXG4gICAgICBsZXQgbGVnZW5kSGVpZ2h0ID0gNjA7XHJcblxyXG4gICAgICBzdmdMZWdlbmQgPSBkMy5zZWxlY3QoJyNoaWVyYXJjaHktbGVnZW5kLWRpdicpXHJcbiAgICAgICAgICAuYXBwZW5kKCdzdmcnKVxyXG4gICAgICAgICAgLmF0dHIoJ2lkJywgJ2hpZXJhcmNoeS1sZWdlbmQnKVxyXG4gICAgICAgICAgLmF0dHIoJ3dpZHRoJywgbGVnZW5kV2lkdGgpXHJcbiAgICAgICAgICAuYXR0cignaGVpZ2h0JywgbGVnZW5kSGVpZ2h0KTtcclxuXHJcbiAgICAgIC8vIGFkZCBwYXR0ZXJuIGZvciBzdHJpcGVkIGJhY2tncm91bmQgb2YgaW50ZXJzZWN0aW9ucyBldGMuXHJcbiAgICAgIHNwYXRpYWxWaWV3LmFwcGVuZCgnZGVmcycpXHJcbiAgICAgICAgICAuYXBwZW5kKCdzdmc6cGF0dGVybicpXHJcbiAgICAgICAgICAuYXR0cignaWQnLCAnc3RyaXBlZCcpXHJcbiAgICAgICAgICAuYXR0cigncGF0dGVyblVuaXRzJywgJ3VzZXJTcGFjZU9uVXNlJylcclxuICAgICAgICAgIC5hdHRyKCd3aWR0aCcsICcyMCcpXHJcbiAgICAgICAgICAuYXR0cignaGVpZ2h0JywgJzUnKVxyXG4gICAgICAgICAgLmF0dHIoJ3BhdHRlcm5UcmFuc2Zvcm0nLCAncm90YXRlKDYwKScpXHJcbiAgICAgICAgICAuYXBwZW5kKCdyZWN0JylcclxuICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIDUpXHJcbiAgICAgICAgICAuYXR0cignaGVpZ2h0JywgMTApXHJcbiAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgwLDApJylcclxuICAgICAgICAgIC5zdHlsZSgnZmlsbCcsICcjNjcwMDBkJyk7XHJcblxyXG4gIH07XHJcblxyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEluaXRpYWxpemUgdGhlIGRlbmRyb2dyYW1cclxuICovXHJcblxyXG5cclxuLyoqXHJcbiAqIERyYXcgdGhlIGRlbmRncm9ncmFtIGZvciBvbmUgc3RlcFxyXG4gKiBGdXJ0aGVyIGNhbGxzIHRoZSBkcmF3SGllcmFyY2h5IGZ1bmN0aW9uXHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBDb2xsYXBzZSBmdW5jdGlvbiAtIG9ubHkgc2hvdyB0aGUgYWN0aXZlIGxldmVsIGFuZCBvbmUgc3ViIGxldmVsXHJcbiAqL1xyXG5mdW5jdGlvbiBjb2xsYXBzZShkKSB7XHJcbiAgICBpZiAoZC5jaGlsZHJlbiAmJiBkLmRlcHRoIDw9IGhpZXJhcmNoeUxldmVsc1snaCcgKyBpZF0pIHtcclxuICAgICAgICBkLl9jaGlsZHJlbiA9IGQuY2hpbGRyZW47XHJcbiAgICAgICAgZC5fY2hpbGRyZW4uZm9yRWFjaChjb2xsYXBzZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGQuY2hpbGRyZW4gPSBudWxsO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogRHJhdyB0aGUgYWxsIGhpZXJhcmNoaWVzIGluIHRoZSBzcGF0aWFsIHZpZXdcclxuICogYWRkIGEgZ3JvdXAgd2l0aCB0aGUgaWRzIG9mIHRoZSBhbmltYWxzIGluIGl0IHRvIHRoZSB2aWV3XHJcbiAqIHdpdGggcGF0aCBjaGlsZCBlbGVtZW50c1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGRyYXdIaWVyYXJjaHkoKSB7XHJcbiAgICAvLyBpZCBvZiB0aGUgaGllcmFyY2h5IGUuZy4gWzEsNSwzXVxyXG4gICAgbGV0IGhpZXJhcmNoeUlkcyA9IE9iamVjdC5rZXlzKG5ldHdvcmtIaWVyYXJjaHkpLm1hcChmdW5jdGlvbih4KSB7XHJcbiAgICAgICAgcmV0dXJuIHgucmVwbGFjZSgnaCcsICcnKTtcclxuICAgIH0pO1xyXG4gICAgLy8gIFRoZSBjbHVzdGVyaW5nIGluIGFuIDJEIGFycmF5IHdpdGggd2hpY2ggYW5pbWFsIGlkIGJlbG9uZ3MgdG8gd2hpY2ggZ3JvdXBcclxuICAgIGxldCBoaWVyYXJjaHlWZXJ0aWNlcyA9IFtdO1xyXG5cclxuICAgIC8vIGl0ZXJhdGUgb3ZlciB0aGUgaGllcmFyY2h5IGRhdGEgdG8gZ2V0IHRoZSBoaWVyYXJjaHkgYW5pbWFsIGlkcyBwZXIgY2x1c3RlcmluZyBhbmQgZ3JvdXBpbmdcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaGllcmFyY2h5SWRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IHRyZWVEYXRhID0gbmV0d29ya0hpZXJhcmNoeVsnaCcgKyBoaWVyYXJjaHlJZHNbaV1dW2luZGV4VGltZV07XHJcbiAgICAgICAgbGV0IG5vZGVzID0gZDMuaGllcmFyY2h5KHRyZWVEYXRhLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkLmNoaWxkcmVuO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBub2RlcyA9IHRyZWVtYXAobm9kZXMpO1xyXG4gICAgICAgIGxldCByb290ID0gbm9kZXNbJ2NoaWxkcmVuJ11bMF07XHJcbiAgICAgICAgaWYgKHNob3dOZXR3b3JrSGllcmFyY2h5ID09PSBoaWVyYXJjaHlJZHNbaV0pIHtcclxuICAgICAgICAgICAgbmV0d29ya0hpZXJhcmNoeUlkcyA9IGdldEhpZXJhcmNoeUxldmVsKHJvb3QsIGhpZXJhcmNoeUlkc1tpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGFkZCB0aGUgdmVydGljZXMgaW50byB0aGUgYXJyYXlcclxuICAgICAgICBoaWVyYXJjaHlWZXJ0aWNlcy5wdXNoKGdldEhpZXJhcmNoeVZlcnRpY2VzKGdldEhpZXJhcmNoeUxldmVsKHJvb3QsIGhpZXJhcmNoeUlkc1tpXSkpKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBpZiBtb3JlIHRoYW4gMiBoaWVyYXJjaGllcyBhcmUgZHJhd25cclxuICAgIGlmIChoaWVyYXJjaHlWZXJ0aWNlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgLy8gdW5pb24gdGhlIGxpc3Qgb2YgcG9seWdvbnMgdG8gb25lIHBvbHlnb25cclxuICAgICAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IGhpZXJhcmNoeUlkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIC8vICAgICBoaWVyYXJjaHlWZXJ0aWNlc1tpXSA9IHVuaW9uUG9seWdvbnMoaGllcmFyY2h5VmVydGljZXNbaV0pO1xyXG4gICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgLy8gdHJhbnNmb3JtIGFuZCBjYWxjdWxhdGUgdGhlIGludGVyc2VjdGlvbiBwb2x5Z29ucyBvZiB0aGUgbiBoaWVyYXJjaGllc1xyXG4gICAgICAgIC8vIGlmIChzZXRPcGVyYXRpb24gPT09ICdpbnRlcnNlY3Rpb24nKSB7XHJcbiAgICAgICAgLy8gICAgIC8vIHRlbXAgc29sdXRpb24gb2YgdHdvIGludGVyc2VjdGlvbnNcclxuICAgICAgICAvLyAgICAgbGV0IHRtcEludGVyc2VjdGlvbiA9IGhpZXJhcmNoeVZlcnRpY2VzWzBdO1xyXG4gICAgICAgIC8vICAgICAvLyBpdGVyYXRlIG92ZXIgdGhlIGhpZXJhcmNoaWVzIGFuZCBpbnRlcnNlY3QgYWxsIG9mIHRoZW1cclxuICAgICAgICAvLyAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBoaWVyYXJjaHlWZXJ0aWNlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIC8vICAgICAgICAgLy8gaW50ZXJzZWN0aW9uXHJcbiAgICAgICAgLy8gICAgICAgICB0bXBJbnRlcnNlY3Rpb24gPSBQb2x5Qm9vbC5pbnRlcnNlY3Qoe1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIHJlZ2lvbnM6IHRtcEludGVyc2VjdGlvbiwgLy8gbGlzdCBvZiByZWdpb25zXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgaW52ZXJ0ZWQ6IGZhbHNlIC8vIGlzIHRoaXMgcG9seWdvbiBpbnZlcnRlZD9cclxuICAgICAgICAvLyAgICAgICAgIH0sIHtcclxuICAgICAgICAvLyAgICAgICAgICAgICByZWdpb25zOiBoaWVyYXJjaHlWZXJ0aWNlc1tpXSxcclxuICAgICAgICAvLyAgICAgICAgICAgICBpbnZlcnRlZDogZmFsc2VcclxuICAgICAgICAvLyAgICAgICAgIH0pO1xyXG4gICAgICAgIC8vICAgICAgICAgLy8gY29udmVydCBpdCBhZ2FpblxyXG4gICAgICAgIC8vICAgICAgICAgdG1wSW50ZXJzZWN0aW9uID0gdG1wSW50ZXJzZWN0aW9uWydyZWdpb25zJ107XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vICAgICAvLyByZXN1bHRcclxuICAgICAgICAvLyAgICAgaGllcmFyY2h5VmVydGljZXMgPSBbdG1wSW50ZXJzZWN0aW9uXTtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgLy8gLy8gdHJhbnNmb3JtIGFuZCBjYWxjdWxhdGUgdGhlIHN5bW1ldHJpYyBkaWZmZXJlbmNlIHBvbHlnb25zIG9mIHRoZSBuIGhpZXJhcmNoaWVzXHJcbiAgICAgICAgLy8gZWxzZSBpZiAoc2V0T3BlcmF0aW9uID09PSAnc3ltLWRpZmZlcmVuY2UnKSB7XHJcbiAgICAgICAgLy8gICAgIC8vIHhvciA9IFVuaW9uIG9mIGFsbCBoaWVyYXJjaGllcyAtIGludGVyc2VjdGlvbiBvZiBhbGwgaGllcmFyY2hpZXNcclxuICAgICAgICAvLyAgICAgLy8gdGVtcCBzb2x1dGlvbiBvZiB0d28gaW50ZXJzZWN0aW9uc1xyXG4gICAgICAgIC8vICAgICBsZXQgdG1wSW50ZXJzZWN0aW9uID0gaGllcmFyY2h5VmVydGljZXNbMF07XHJcbiAgICAgICAgLy8gICAgIC8vIGl0ZXJhdGUgb3ZlciB0aGUgaGllcmFyY2hpZXMgYW5kIGludGVyc2VjdCBhbGwgb2YgdGhlbVxyXG4gICAgICAgIC8vICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGhpZXJhcmNoeVZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgLy8gICAgICAgICAvLyBpbnRlcnNlY3Rpb25cclxuICAgICAgICAvLyAgICAgICAgIHRtcEludGVyc2VjdGlvbiA9IFBvbHlCb29sLmludGVyc2VjdCh7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgcmVnaW9uczogdG1wSW50ZXJzZWN0aW9uLCAvLyBsaXN0IG9mIHJlZ2lvbnNcclxuICAgICAgICAvLyAgICAgICAgICAgICBpbnZlcnRlZDogZmFsc2UgLy8gaXMgdGhpcyBwb2x5Z29uIGludmVydGVkP1xyXG4gICAgICAgIC8vICAgICAgICAgfSwge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIHJlZ2lvbnM6IGhpZXJhcmNoeVZlcnRpY2VzW2ldLFxyXG4gICAgICAgIC8vICAgICAgICAgICAgIGludmVydGVkOiBmYWxzZVxyXG4gICAgICAgIC8vICAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gICAgICAgICAvLyBjb252ZXJ0IGl0IGFnYWluXHJcbiAgICAgICAgLy8gICAgICAgICB0bXBJbnRlcnNlY3Rpb24gPSB0bXBJbnRlcnNlY3Rpb25bJ3JlZ2lvbnMnXTtcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vICAgICAvLyBpbnRlcnNlY3Rpb24gcmVzdWx0XHJcbiAgICAgICAgLy8gICAgIGxldCBpbnRlcnNlY3Rpb25IaWVyYXJjaHlQb2x5Z29ucyA9IHRtcEludGVyc2VjdGlvbjtcclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vICAgICAvLyB1bmlvblxyXG4gICAgICAgIC8vICAgICBsZXQgdG1wVW5pb24gPSBoaWVyYXJjaHlWZXJ0aWNlc1swXTtcclxuICAgICAgICAvLyAgICAgLy8gaXRlcmF0ZSBvdmVyIHRoZSBoaWVyYXJjaGllcyBhbmQgaW50ZXJzZWN0IGFsbCBvZiB0aGVtXHJcbiAgICAgICAgLy8gICAgIGZvciAobGV0IGkgPSAxOyBpIDwgaGllcmFyY2h5VmVydGljZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAvLyAgICAgICAgIC8vIGludGVyc2VjdGlvblxyXG4gICAgICAgIC8vICAgICAgICAgdG1wVW5pb24gPSBQb2x5Qm9vbC51bmlvbih7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgcmVnaW9uczogdG1wVW5pb24sIC8vIGxpc3Qgb2YgcmVnaW9uc1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIGludmVydGVkOiBmYWxzZSAvLyBpcyB0aGlzIHBvbHlnb24gaW52ZXJ0ZWQ/XHJcbiAgICAgICAgLy8gICAgICAgICB9LCB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgcmVnaW9uczogaGllcmFyY2h5VmVydGljZXNbaV0sXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgaW52ZXJ0ZWQ6IGZhbHNlXHJcbiAgICAgICAgLy8gICAgICAgICB9KTtcclxuICAgICAgICAvLyAgICAgICAgIC8vIGNvbnZlcnQgaXQgYWdhaW5cclxuICAgICAgICAvLyAgICAgICAgIHRtcFVuaW9uID0gdG1wVW5pb25bJ3JlZ2lvbnMnXTtcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vICAgICBsZXQgdW5pb25IaWVyYXJjaHlQb2x5Z29ucyA9IHRtcFVuaW9uO1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyAgICAgLy8gc3ltbWV0cmljIGRpZmZlcmVuY2VcclxuICAgICAgICAvLyAgICAgbGV0IHRtcERpZmZlcmVuY2UgPSBQb2x5Qm9vbC54b3Ioe1xyXG4gICAgICAgIC8vICAgICAgICAgcmVnaW9uczogdW5pb25IaWVyYXJjaHlQb2x5Z29ucywgLy8gbGlzdCBvZiByZWdpb25zXHJcbiAgICAgICAgLy8gICAgICAgICBpbnZlcnRlZDogZmFsc2UgLy8gaXMgdGhpcyBwb2x5Z29uIGludmVydGVkP1xyXG4gICAgICAgIC8vICAgICB9LCB7XHJcbiAgICAgICAgLy8gICAgICAgICByZWdpb25zOiBpbnRlcnNlY3Rpb25IaWVyYXJjaHlQb2x5Z29ucyxcclxuICAgICAgICAvLyAgICAgICAgIGludmVydGVkOiBmYWxzZVxyXG4gICAgICAgIC8vICAgICB9KTtcclxuICAgICAgICAvLyAgICAgLy8gY29udmVydCBpdCBhZ2FpblxyXG4gICAgICAgIC8vICAgICB0bXBEaWZmZXJlbmNlID0gdG1wRGlmZmVyZW5jZVsncmVnaW9ucyddO1xyXG4gICAgICAgIC8vICAgICAvLyByZXN1bHRcclxuICAgICAgICAvLyAgICAgaGllcmFyY2h5VmVydGljZXMgPSBbdG1wRGlmZmVyZW5jZV07XHJcbiAgICAgICAgLy8gfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIERBVEEgSm9pblxyXG4gICAgbGV0IGhpZXJhcmNoaWVzID0gc3BhdGlhbFZpZXdcclxuICAgICAgICAuc2VsZWN0QWxsKCdnLmhpZXJhcmNoeS1ncm91cCcpXHJcbiAgICAgICAgLmRhdGEoaGllcmFyY2h5VmVydGljZXMpO1xyXG5cclxuICAgIC8vIEVOVEVSIHRoZSBncm91cHMgLSBhZGRzIGEgc3BlY2lmaWMgaWQgYW5kIGNvbG9yXHJcbiAgICBoaWVyYXJjaGllc1xyXG4gICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgLmFwcGVuZCgnZycpXHJcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgZnVuY3Rpb24oZCwgaSkge1xyXG4gICAgICAgICAgICBpZiAoc2V0T3BlcmF0aW9uID09PSAnaW50ZXJzZWN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdoaWVyYXJjaHktZ3JvdXAgaW50ZXJzZWN0aW9uJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChzZXRPcGVyYXRpb24gPT09ICdzeW0tZGlmZmVyZW5jZScpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnaGllcmFyY2h5LWdyb3VwIHN5bS1kaWZmZXJlbmNlJztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnaGllcmFyY2h5LWdyb3VwIGgnICsgaGllcmFyY2h5SWRzW2ldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuc3R5bGUoJ2ZpbGwnLCBmdW5jdGlvbihkLCBpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBoaWVyYXJjaHlDb2xvcnNbJ2gnICsgaGllcmFyY2h5SWRzW2ldXTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5hdHRyKCdzdHJva2UnLCBmdW5jdGlvbihkLCBpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBoaWVyYXJjaHlDb2xvcnNbJ2gnICsgaGllcmFyY2h5SWRzW2ldXTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5tb3ZlVG9CYWNrKCk7XHJcblxyXG4gICAgLy8gVVBEQVRFIC0gdGhlIGNsYXNzIG5lZWRlZCBmb3IgaW50ZXJzZWN0aW9uIGFuZCBzeW1tZXRyaWMgZGlmZmVyZW5jZVxyXG4gICAgaGllcmFyY2hpZXMuYXR0cignY2xhc3MnLCBmdW5jdGlvbihkLCBpKSB7XHJcbiAgICAgICAgaWYgKHNldE9wZXJhdGlvbiA9PT0gJ2ludGVyc2VjdGlvbicpIHtcclxuICAgICAgICAgICAgcmV0dXJuICdoaWVyYXJjaHktZ3JvdXAgaW50ZXJzZWN0aW9uJztcclxuICAgICAgICB9IGVsc2UgaWYgKHNldE9wZXJhdGlvbiA9PT0gJ3N5bS1kaWZmZXJlbmNlJykge1xyXG4gICAgICAgICAgICByZXR1cm4gJ2hpZXJhcmNoeS1ncm91cCBzeW0tZGlmZmVyZW5jZSc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuICdoaWVyYXJjaHktZ3JvdXAgaCcgKyBoaWVyYXJjaHlJZHNbaV07XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gRVhJVFxyXG4gICAgaGllcmFyY2hpZXMuZXhpdCgpXHJcbiAgICAgICAgLnJlbW92ZSgpO1xyXG5cclxuICAgIC8vIEhpZXJhY2h5IGh1bGxzIGFkZGVkIHRvIHRoZSBzcGF0aWFsIHZpZXcgLSBnZXQgdGhlIHBvaW50cyBmb3IgZWFjaCBhbmltYWwgaW4gdGhlXHJcbiAgICAvLyBzcGF0aWFsIHZpZXcgc28gdGhhdCBhIGNvbnZleCBodWxsIGNhbiBiZSBjYWxjdWxhdGVkXHJcbiAgICBsZXQgaGllcmFyeUh1bGxzID0gaGllcmFyY2hpZXMuc2VsZWN0QWxsKCdwYXRoLmhpZXJhcmNoeS1odWxsLXBhdGgnKVxyXG4gICAgICAgIC5kYXRhKGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgLy8gRU5URVIgYW5kIGNhbGN1bGF0ZSB0aGUgY29udmV4IGh1bGxcclxuICAgIGhpZXJhcnlIdWxsc1xyXG4gICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgLmFwcGVuZCgncGF0aCcpXHJcbiAgICAgICAgLy8gLmF0dHIoJ2lkJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgIC8vICAgICByZXR1cm4gJ2hwJyArIGQuam9pbignJykucmVwbGFjZSgvLC9nLCAnJyk7XHJcbiAgICAgICAgLy8gfSlcclxuICAgICAgICAuYXR0cignY2xhc3MnLCAnaGllcmFyY2h5LWh1bGwtcGF0aCcpXHJcbiAgICAgICAgLmF0dHIoJ2QnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgIC8vIHJldHVybiBkcmF3TGluZShkKTtcclxuICAgICAgICAgICAgcmV0dXJuICdNJyArIGQuam9pbignTCcpICsgJ1onO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIC8vIFVQREFURSB0aGUgY29udmV4IGh1bGxcclxuICAgIGhpZXJhcnlIdWxsc1xyXG4gICAgICAgIC5hdHRyKCdkJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAvLyByZXR1cm4gZHJhd0xpbmUoZCk7XHJcbiAgICAgICAgICAgIHJldHVybiAnTScgKyBkLmpvaW4oJ0wnKSArICdaJztcclxuICAgICAgICB9KTtcclxuICAgIC8vIC5hdHRyKCdpZCcsIGZ1bmN0aW9uKGQpIHtcclxuICAgIC8vIHJldHVybiAnaHAnICsgZC5qb2luKCcnKS5yZXBsYWNlKC8sL2csICcnKTtcclxuICAgIC8vIH0pO1xyXG4gICAgLy8gRVhJVFxyXG4gICAgaGllcmFyeUh1bGxzLmV4aXQoKVxyXG4gICAgICAgIC5yZW1vdmUoKTtcclxuXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBVbmlvbiBtdWx0aXBsZSBwb2x5Z29ucyB0b2dldGhlciAtIG5lZWRlZCBvciBlbHNlIHRoZXJlIHdpbGwgYmUgaG9sZXMgaW4gdGhlIGludGVyc2VjdGlvbnNcclxuICogQHBhcmFtIHthcnJheX0gcG9seWdvbnMgLSBhcnJheSBvZiBhcnJheSBvZiBwb2ludHNcclxuICovXHJcbi8vIGZ1bmN0aW9uIHVuaW9uUG9seWdvbnMocG9seWdvbnMpIHtcclxuLy8gICAgIC8vIGNvbnNvbGUubG9nKHBvbHlnb25zKTtcclxuLy8gICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9seWdvbnMubGVuZ3RoOyBpKyspIHtcclxuLy8gICAgICAgICBwb2x5Z29uc1tpXSA9IHtcclxuLy8gICAgICAgICAgICAgcmVnaW9uczogW3BvbHlnb25zW2ldXSxcclxuLy8gICAgICAgICAgICAgaW52ZXJ0ZWQ6IGZhbHNlIC8vIGlzIHRoaXMgcG9seWdvbiBpbnZlcnRlZD9cclxuLy8gICAgICAgICB9O1xyXG4vLyAgICAgfVxyXG4vLyAgICAgLy8gdW5pb24gYSBsaXN0IG9mIHBvbHlnb25zIHRvZ2V0aGVyXHJcbi8vICAgICBsZXQgc2VnbWVudHMgPSBQb2x5Qm9vbC5zZWdtZW50cyhwb2x5Z29uc1swXSk7XHJcbi8vICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHBvbHlnb25zLmxlbmd0aDsgaSsrKSB7XHJcbi8vICAgICAgICAgbGV0IHNlZzIgPSBQb2x5Qm9vbC5zZWdtZW50cyhwb2x5Z29uc1tpXSk7XHJcbi8vICAgICAgICAgbGV0IGNvbWIgPSBQb2x5Qm9vbC5jb21iaW5lKHNlZ21lbnRzLCBzZWcyKTtcclxuLy8gICAgICAgICBzZWdtZW50cyA9IFBvbHlCb29sLnNlbGVjdFVuaW9uKGNvbWIpO1xyXG4vLyAgICAgfVxyXG4vLyAgICAgcmV0dXJuIFBvbHlCb29sLnBvbHlnb24oc2VnbWVudHMpWydyZWdpb25zJ107XHJcbi8vIH1cclxuXHJcbi8qKlxyXG4gKiBFZGdlIGRyYXdpbmcgbWV0aG9kIG9mIHRoZSBkZW5kcm9ncmFtXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSBkIC0gVHJlZW1hcCBlbGVtZW50XHJcbiAqL1xyXG5mdW5jdGlvbiBkaWFnb25hbExpbmVzKGQpIHtcclxuICAgIHJldHVybiAnTScgKyBkLnggKyAnLCcgKyBkLnkgK1xyXG4gICAgICAgICdWJyArIGQucGFyZW50LnkgKyAnSCcgKyBkLnBhcmVudC54O1xyXG59XHJcblxyXG4vKipcclxuICogT24gY2xpY2sgZnVuY3Rpb24gLSBoaWdobGlnaHQgdGhlIGVsZW1lbnRzIGluIHRoZSBzcGF0aWFsIHZpZXdcclxuICogQHBhcmFtIHtvYmplY3R9IGQgLSBUcmVlbWFwIGVsZW1lbnRcclxuICovXHJcbmZ1bmN0aW9uIGNsaWNrKGQpIHtcclxuICAgIHNldEFjdGl2ZUFuaW1hbHMoZFsnZGF0YSddWyduYW1lJ10pO1xyXG4gICAgLy8gaWYgbm8gYW5pbWF0aW9uIGlzIGFjdGl2ZSBkcmF3IHRoZSBkcmF3IG9uZSBzdGVwXHJcbiAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgIGRlY0luZGV4VGltZSgpO1xyXG4gICAgICAgIGRyYXcoKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBhbGwgdGhlIGNsdXN0ZXJpbmcgb2YgYSBzcGVjaWZpYyBsZXZlbCBpbiB0aGUgZGVuZHJvZ3JhbSB0cmVlXHJcbiAqIEZvciBpbnN0YW5jZSBhbGwgY2x1c3RlcnMgZnJvbSBsZXZlbCA1XHJcbiAqIEBwYXJhbSB7b2JqZWN0fSByb290IC0gUm9vdCBvZiB0aGUgdHJlZW1hcFxyXG4gKiBAcGFyYW0ge251bWJlcn0gaGllYXJjaHkgLSBOdW1iZXIgb2YgaGllcmFyY2h5IGZyb20gWzAtM11cclxuICovXHJcbmZ1bmN0aW9uIGdldEhpZXJhcmNoeUxldmVsKHJvb3QsIGhpZXJhcmNoeSkge1xyXG4gICAgbGV0IHJlc3VsdCA9IFtdO1xyXG4gICAgbGV0IGxldmVsID0gaGllcmFyY2h5TGV2ZWxzWydoJyArIGhpZXJhcmNoeV07XHJcblxyXG4gICAgLy8gc2Vjb25kIGxldmVsIG9mIHRoZSBhcnJheVxyXG4gICAgbGV0IHRtcF9ub2RlcyA9IHJvb3RbJ2NoaWxkcmVuJ107XHJcbiAgICAvLyBpdGVyYXRlIHRocm91Z2ggdGhlIHRyZWVcclxuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgcm9vdFsnaGVpZ2h0J107IGkrKykge1xyXG4gICAgICAgIC8vIGNoZWNrIGlmIHdlIGFyZSBhdCB0aGUgc2VhcmNoZWQgbGV2ZWxcclxuICAgICAgICBpZiAodG1wX25vZGVzWzBdICYmIHRtcF9ub2Rlc1swXVsnZGVwdGgnXSA9PT0gbGV2ZWwpIHtcclxuICAgICAgICAgICAgLy8gYWRkIGVhY2ggY2x1c3RlciB0byB0aGUgcmVzdWx0IHNldFxyXG4gICAgICAgICAgICB0bXBfbm9kZXMuZm9yRWFjaChmdW5jdGlvbihub2RlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG5vZGVbJ2RhdGEnXVsnbmFtZSddICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKG5vZGVbJ2RhdGEnXVsnbmFtZSddKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBnZXQgYWxsIGNoaWxkcmVuIG9mIGEgc3BlY2lmaWMgbGV2ZWwgaW4gdGhlIHRyZWVcclxuICAgICAgICBsZXQgdG1wID0gW107XHJcbiAgICAgICAgdG1wX25vZGVzLmZvckVhY2goZnVuY3Rpb24obm9kZSkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIG5vZGVbJ2NoaWxkcmVuJ10gIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICB0bXAgPSB0bXAuY29uY2F0KG5vZGVbJ2NoaWxkcmVuJ10pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdG1wX25vZGVzID0gdG1wO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJldHVybiB0aGUgc3BlY2lmaWMgdmVydGljZXMgb2YgYSBjbHVzdGVyaW5nIGluIHRoZSBzcGF0aWFsIHZpZXdcclxuICogUmV0dXJuIGFuIGFycmF5IG9mIHBvaW50cyBbW3gseV1beCx5XS4uLl1cclxuICogQHBhcmFtIHtBcnJheX0gaGllcmFyY2hpZXMgLSBBcnJheSBvZiBhcnJheXMgd2l0aCBlYWNoIGFycmF5IGNvbnRhaW5zIGFsbCB0aGUgaWRzIGZvciBhIHNwZWNpZmljIGNsdXN0ZXJpbmdcclxuICovXHJcbmZ1bmN0aW9uIGdldEhpZXJhcmNoeVZlcnRpY2VzKGhpZXJhcmNoaWVzKSB7XHJcbiAgICBsZXQgcmVzdWx0ID0gW107IC8vIHJlc3VsdCBzZXRcclxuICAgIGhpZXJhcmNoaWVzLmZvckVhY2goZnVuY3Rpb24oY2x1c3Rlcikge1xyXG4gICAgICAgIGxldCB2ZXJ0aWNlcyA9IFtdOyAvLyB2ZXJ0aWNlcyBvZiB0aGUgY2x1c3RlcnMgaW4gdGhlIHNwYXRpYWwgdmlld1xyXG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgY2x1c3Rlci5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICBsZXQgZ3JvdXBNZW1iZXIgPSBhcnJheUFuaW1hbHMuZmluZChkID0+IGRbJ2EnXSA9PT0gY2x1c3RlcltqXSk7XHJcbiAgICAgICAgICAgIGlmIChncm91cE1lbWJlcikge1xyXG4gICAgICAgICAgICAgICAgdmVydGljZXMucHVzaChbZ3JvdXBNZW1iZXJbJ3AnXVswXSwgLWdyb3VwTWVtYmVyWydwJ11bMV1dKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBBbmRyZXcgbW9udG9uZSBjaGFpbiBhbGdvcml0aG0gcmV1dHJucyBmb3IgcG9pbnRzIGZld2VyIHRoYW4gMyBudWxsXHJcbiAgICAgICAgaWYgKHZlcnRpY2VzLmxlbmd0aCA+PSAzKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGQzLnBvbHlnb25IdWxsKHZlcnRpY2VzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IHRoZSBhY3RpdmUgbGV2ZWwgZm9yIGEgc3BlY2lmaWMgZGVuZHJvZ3JhbVxyXG4gKiBAcGFyYW0ge251bWJlcn0gaGllcmFyY2h5IC0gSGllcmFyY2h5IGNhbiBiZSBmcm9tIFswLTNdXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBsZXZlbCAtIE5ldyBhY3RpdmUgbGV2ZWxcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRIaWVyYXJjaHlMZXZlbChoaWVyYXJjaHksIGxldmVsKSB7XHJcbiAgICAvLyBUT0RPIGNhdGNoIGNhc2VzIDwgMCBhbmQgYmlnZ2VyIHRoYW4gb3ZlcmFsbCBoZWlnaHRcclxuICAgIGhpZXJhcmNoeUxldmVsc1snaCcgKyBoaWVyYXJjaHldID0gbGV2ZWw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZW1vdmUgdGhlIGVudHJ5IGZvciB0aGUgaGllcmFyY2ggbGV2ZWxcclxuICogQHBhcmFtIHtudW1iZXJ9IGhpZXJhcmNoeSAtIEhpZXJhcmNoeVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUhpZXJhcmNoeUxldmVsKGhpZXJhcmNoeSkge1xyXG4gICAgLy8gVE9ETyBjYXRjaCBjYXNlcyA8IDAgYW5kIGJpZ2dlciB0aGFuIG92ZXJhbGwgaGVpZ2h0XHJcbiAgICBkZWxldGUgaGllcmFyY2h5TGV2ZWxzWydoJyArIGhpZXJhcmNoeV07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXQgdGhlIGFjdGl2ZSBjb2xvciBmb3IgYSBzcGVjaWZpYyBkZW5kcm9ncmFtXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBoaWVyYXJjaHkgLSBIaWVyYXJjaHkgY2FuIGJlIGZyb20gWzAtM11cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRIaWVyYXJjaHlDb2xvcihoaWVyYXJjaHkpIHtcclxuICAgIC8vIGNoZWNrIGlmIHRoZSBoaWVyYXJjaHkgaXMgYWxyZWFkeSBzaG93biBhcyBuZXR3b3JrXHJcbiAgICAvLyB0YWtlIHRoZSBzYW1lIGNvbG9yXHJcbiAgICBmb3IgKGxldCBrZXkgaW4gbmV0d29ya0NvbG9yKSB7XHJcbiAgICAgICAgaWYgKGtleSA9PT0gKCdoJyArIGhpZXJhcmNoeSkpIHtcclxuICAgICAgICAgICAgaGllcmFyY2h5Q29sb3JzWydoJyArIGhpZXJhcmNoeV0gPSBuZXR3b3JrQ29sb3Jba2V5XTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIGhpZXJhcmNoeSBpcyBub3QgdmlzdWFsaXplZCBhbHJlYWR5IGFzIGEgbmV0d29ya1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2xvcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBsZXQgdG1wX2Jvb2xlYW4gPSB0cnVlO1xyXG4gICAgICAgIGZvciAobGV0IGtleSBpbiBoaWVyYXJjaHlDb2xvcnMpIHtcclxuICAgICAgICAgICAgaWYgKGhpZXJhcmNoeUNvbG9ycy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaGllcmFyY2h5Q29sb3JzW2tleV0gPT09IGNvbG9yc1tpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRtcF9ib29sZWFuID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRtcF9ib29sZWFuKSB7XHJcbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIGEgbmV0d29yayBpcyBkZXBpY3RlZFxyXG4gICAgICAgICAgICAvLyBpZiBzbyBza2lwIHRoZSBjb2xvciB3aGljaCBpcyBhbHJlYWR5IGNob29zZW4gZm9yIHRoZSBuZXR3b3JrXHJcbiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhuZXR3b3JrQ29sb3IpLmxlbmd0aCAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIG5ldHdvcmtDb2xvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXR3b3JrQ29sb3Jba2V5XSAhPT0gY29sb3JzW2ldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZXJhcmNoeUNvbG9yc1snaCcgKyBoaWVyYXJjaHldID0gY29sb3JzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaGllcmFyY2h5Q29sb3JzWydoJyArIGhpZXJhcmNoeV0gPSBjb2xvcnNbaV07XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogUmVtb3ZlIHRoZSBjb2xvciBmb3IgdGhlIGhpZXJhcmNoIGxldmVsXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBoaWVyYXJjaHkgLSBIaWVyYXJjaHlcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVIaWVyYXJjaHlDb2xvcihoaWVyYXJjaHkpIHtcclxuICAgIGRlbGV0ZSBoaWVyYXJjaHlDb2xvcnNbJ2gnICsgaGllcmFyY2h5XTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEFkZCB0aGUgaGllcmFyY2h5IGJ1dHRvbiB0byB0aGUgZGl2XHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBpZCAtIEhpZXJhcmNoeSBvZiB0aGUgaWRcclxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgLSBOZXcgYWN0aXZlIGxldmVsXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gYWRkSGllcmFyY2h5QnV0dG9uKGlkLCBuYW1lKSB7XHJcbiAgICBpZiAoJCgnLnNob3ctZGVuZHJvZ3JhbScpLmxlbmd0aCA8IG1heE51bWJlckhpZXJhcmNoaWVzKSB7XHJcbiAgICAgICAgJCgnI2RlbmRyb2dyYW0tYnV0dG9ucy1kaXYnKS5hcHBlbmQoJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGlkPVwic2hvdy1kZW5kcm9ncmFtLScgKyBpZCArICdcIiBkYXRhPScgKyBpZCArICcgbmFtZT0nICsgbmFtZSArXHJcbiAgICAgICAgICAgICcgY2xhc3M9XCJzaG93LWRlbmRyb2dyYW0gYnRuIGJ0bi1ibG9ja1wiIGRhdGEtdG9nZ2xlPVwiYnV0dG9uXCIgYXJpYS1wcmVzc2VkPVwiZmFsc2VcIiBhdXRvY29tcGxldGU9XCJvZmZcIj4nICtcclxuICAgICAgICAgICAgJyA8c3BhbiBjbGFzcz1cImJ0bi1sYWJlbFwiIGlkPVwiYnRuLWxlZnRcIj4gPGkgY2xhc3M9XCJtZGkgbWRpLWFycm93LWNvbGxhcHNlLWxlZnRcIj48L2k+Jm5ic3AmbmJzcCBTaG93ICcgKyBuYW1lICsgJzwvc3Bhbj4nICtcclxuICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwiYnRuLWxhYmVsXCIgaWQ9XCJidG4tcmlnaHRcIj4gPGkgY2xhc3M9XCJtZGkgbWRpLWFycm93LWNvbGxhcHNlLXJpZ2h0XCI+PC9pPiZuYnNwJm5ic3AgSGlkZSAnICsgbmFtZSArICcgPC9zcGFuPjwvYnV0dG9uPiA8YnI+J1xyXG4gICAgICAgICk7XHJcbiAgICAgICAgJCgnI3Nob3ctZGVuZHJvZ3JhbS0nICsgaWQpLmZpbmQoJyNidG4tcmlnaHQnKS5oaWRlKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZW1vdmUgYSBzcGVjaWZpYyBoaWVyYXJjaHkgYnV0dG9uIHRvIHRoZSBkaXZcclxuICogQHBhcmFtIHtudW1iZXJ9IGlkIC0gSGllcmFyY2h5IG9mIHRoZSBpZFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUhpZXJhcmNoeUJ1dHRvbihpZCkge1xyXG4gICAgLy8gcmVtb3ZlIHRoZSBmb2xsb3dpbmcgbGluZSBicmVhayBhbmQgZWxlbWVudFxyXG4gICAgJCgnI3Nob3ctZGVuZHJvZ3JhbS0nICsgaWQpLm5leHQoKS5yZW1vdmUoKTtcclxuICAgICQoJyNzaG93LWRlbmRyb2dyYW0tJyArIGlkKS5yZW1vdmUoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZSBzbGlkZXIgYW5kIHRleHQgaW4gdGhlIGRlbmRyb2dyYW0gcGFuZWxcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVEZW5kcm9ncmFtKCkge1xyXG4gICAgLy8gZ2V0IHRoZSBpbXBvcnRhbnQgaW5mb1xyXG4gICAgbGV0IGlkID0gJCgnLnNob3ctZGVuZHJvZ3JhbS5idG4tcHJpbWFyeScpLmF0dHIoJ2RhdGEnKTtcclxuICAgIGxldCBuYW1lID0gJCgnLnNob3ctZGVuZHJvZ3JhbS5idG4tcHJpbWFyeScpLmF0dHIoJ25hbWUnKTtcclxuICAgIC8vIHNldCB0aGUgbmFtZSBvZiB0aGUgZGlzcGxheWVkIGhpZXJhcmNoeVxyXG4gICAgJCgnI2RlbmRyb2dyYW0tcGFuZWwtbmFtZScpLnRleHQobmFtZSk7XHJcblxyXG4gICAgLy8gc2V0IHNsaWRlciBhbmQgIHRleHQgdmFsdWVcclxuICAgICQoJyNkZW5kcm9ncmFtLXBhbmVsLWxldmVsLXNsaWRlcicpLnZhbChoaWVyYXJjaHlMZXZlbHNbJ2gnICsgaWRdKTtcclxuICAgICQoJyNkZW5kcm9ncmFtLXBhbmVsLWxldmVsLXRleHQnKS50ZXh0KGhpZXJhcmNoeUxldmVsc1snaCcgKyBpZF0pO1xyXG5cclxufVxyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZSBoaWVyYXJjaHkgbGVnZW5kXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY2hhbmdlSGllcmFyY2h5TGVnZW5kKCkge1xyXG4gICAgbGV0IGxlZ2VuZDsgLy8gdGhlIGNvbG9yIGxlZ2VuZFxyXG4gICAgbGV0IGxlZ2VuZFRleHQ7IC8vIGNvbG9yIGxlZ2VuZCB0ZXh0XHJcbiAgICAvLyB2YXJzIGZvciB0aGUgbGVnZW5kXHJcbiAgICBsZXQgbGVnZW5kU3dhdGNoV2lkdGggPSA1MDtcclxuICAgIGxldCBsZWdlbmRTd2F0Y2hIZWlnaHQgPSAyMDtcclxuXHJcbiAgICAvLyBTaG93IG9yIGhpZGUgdGhlIHN2ZyBlbGVtZW50XHJcbiAgICBpZiAoT2JqZWN0LmtleXMoaGllcmFyY2h5Q29sb3JzKS5sZW5ndGggIT09IDAgfHwgT2JqZWN0LmtleXMobmV0d29ya0NvbG9yKS5sZW5ndGggIT09IDApIHtcclxuICAgICAgICAkKCcjaGllcmFyY2h5LWxlZ2VuZC1kaXYnKS5zaG93KCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgICQoJyNoaWVyYXJjaHktbGVnZW5kLWRpdicpLmhpZGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgbGVnZW5kRGF0YSA9IFtdO1xyXG4gICAgbGV0IGxlZ2VuZFRleHREYXRhID0gW107XHJcbiAgICAvLyBnZXQgdGhlIHJlcXVpcmVkIGRhdGFcclxuICAgICQoJy5zaG93LWRlbmRyb2dyYW0nKS5lYWNoKGZ1bmN0aW9uKGksIG9iaikge1xyXG4gICAgICAgIC8vIGNoZWNrIGlmIGRhdGEgaXMgbm90IHVuZGVmaW5lZFxyXG4gICAgICAgIGlmIChoaWVyYXJjaHlDb2xvcnNbJ2gnICsgJChvYmopLmF0dHIoJ2RhdGEnKV0gIT0gbnVsbCAmJiAkKG9iaikuYXR0cignbmFtZScpICE9IG51bGwpIHtcclxuICAgICAgICAgICAgbGVnZW5kRGF0YS5wdXNoKGhpZXJhcmNoeUNvbG9yc1snaCcgKyAkKG9iaikuYXR0cignZGF0YScpXSk7XHJcbiAgICAgICAgICAgIGxlZ2VuZFRleHREYXRhLnB1c2goJChvYmopLmF0dHIoJ25hbWUnKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAvLyBhZGQgdGhlIG5ldHdvcmsgY29sb3JcclxuICAgIGlmIChPYmplY3Qua2V5cyhuZXR3b3JrQ29sb3IpLmxlbmd0aCAhPT0gMCkge1xyXG4gICAgICAgIGZvciAobGV0IGtleSBpbiBuZXR3b3JrQ29sb3IpIHtcclxuICAgICAgICAgICAgaWYgKGxlZ2VuZERhdGEuaW5kZXhPZihuZXR3b3JrQ29sb3Jba2V5XSkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBsZWdlbmREYXRhLnB1c2gobmV0d29ya0NvbG9yW2tleV0pO1xyXG4gICAgICAgICAgICAgICAgbGVnZW5kVGV4dERhdGEucHVzaCgnTmV0d29yaycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gREFUQSBKT0lOXHJcbiAgICBsZWdlbmQgPSBzdmdMZWdlbmQuc2VsZWN0QWxsKCdyZWN0LmxlZ2VuZCcpXHJcbiAgICAgICAgLmRhdGEobGVnZW5kRGF0YSk7XHJcbiAgICBsZWdlbmRUZXh0ID0gc3ZnTGVnZW5kLnNlbGVjdEFsbCgndGV4dC5sZWdlbmQtdGV4dCcpXHJcbiAgICAgICAgLmRhdGEobGVnZW5kVGV4dERhdGEpO1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLSBMZWdlbmQgc3dhdGNoZXMgIC0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIFVQREFURSAtIGxlZ2VuZFxyXG4gICAgbGVnZW5kLnN0eWxlKCdmaWxsJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgIHJldHVybiBkO1xyXG4gICAgfSk7XHJcbiAgICAvLyBFTlRFUiAtIGxlZ2VuZFxyXG4gICAgbGVnZW5kXHJcbiAgICAgICAgLmVudGVyKClcclxuICAgICAgICAuYXBwZW5kKCdyZWN0JylcclxuICAgICAgICAuYXR0cignY2xhc3MnLCAnbGVnZW5kJylcclxuICAgICAgICAuYXR0cignd2lkdGgnLCBsZWdlbmRTd2F0Y2hXaWR0aClcclxuICAgICAgICAuYXR0cignaGVpZ2h0JywgbGVnZW5kU3dhdGNoSGVpZ2h0KVxyXG4gICAgICAgIC5hdHRyKCd5JywgMClcclxuICAgICAgICAuYXR0cigneCcsIGZ1bmN0aW9uKGQsIGkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChsZWdlbmRTd2F0Y2hXaWR0aCArIDIuNSAqIGkgKiBsZWdlbmRTd2F0Y2hXaWR0aCkgKyAncHgnO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnN0eWxlKCdmaWxsJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgICB9KTtcclxuICAgIC8vIEVYSVQgLSBsZWdlbmRcclxuICAgIGxlZ2VuZC5leGl0KClcclxuICAgICAgICAucmVtb3ZlKCk7XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tIFRleHQgIC0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIFVQREFURSAtIGxlZ2VuZCB0ZXh0XHJcbiAgICBsZWdlbmRUZXh0LnRleHQoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgIHJldHVybiBkO1xyXG4gICAgfSk7XHJcbiAgICAvLyBFTlRFUiAtIGxlZ2VuZCB0ZXh0XHJcbiAgICBsZWdlbmRUZXh0XHJcbiAgICAgICAgLmVudGVyKClcclxuICAgICAgICAuYXBwZW5kKCd0ZXh0JylcclxuICAgICAgICAuYXR0cignY2xhc3MnLCAnbGVnZW5kLXRleHQnKVxyXG4gICAgICAgIC5hdHRyKCd5JywgMiAqIGxlZ2VuZFN3YXRjaEhlaWdodClcclxuICAgICAgICAuYXR0cigneCcsIGZ1bmN0aW9uKGQsIGkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChsZWdlbmRTd2F0Y2hXaWR0aCArIDIuNSAqIGkgKiBsZWdlbmRTd2F0Y2hXaWR0aCkgKyAncHgnO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRleHQoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAvLyBFWElUIC0gbGVnZW5kIHRleHRcclxuICAgIGxlZ2VuZFRleHQuZXhpdCgpXHJcbiAgICAgICAgLnJlbW92ZSgpO1xyXG5cclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBJbml0aWFsaXplIHRoZSBkZW5kcm9ncmFtIGxlZ2VuZFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGluaXREZW5kcm9ncmFtTGVnZW5kKCkge1xyXG4gICAgbGV0IGxlZ2VuZFdpZHRoID0gNTUwO1xyXG4gICAgbGV0IGxlZ2VuZEhlaWdodCA9IDYwO1xyXG5cclxuICAgIGxldCBkZW5kcm9ncmFtTGVnZW5kID0gZDMuc2VsZWN0KCcjZGVuZHJvZ3JhbS1wYW5lbCcpXHJcbiAgICAgICAgLmFwcGVuZCgnc3ZnJylcclxuICAgICAgICAuYXR0cignaWQnLCAnZGVuZHJvZ3JhbS1sZWdlbmQnKVxyXG4gICAgICAgIC5hdHRyKCd3aWR0aCcsIGxlZ2VuZFdpZHRoKVxyXG4gICAgICAgIC5hdHRyKCdoZWlnaHQnLCBsZWdlbmRIZWlnaHQpO1xyXG5cclxuICAgICQoJyNkZW5kcm9ncmFtLWxlZ2VuZCcpLmhpZGUoKTtcclxuXHJcbiAgICBsZXQgbGVnZW5kOyAvLyB0aGUgY29sb3IgbGVnZW5kXHJcbiAgICBsZXQgbGVnZW5kVGV4dDsgLy8gY29sb3IgbGVnZW5kIHRleHRcclxuICAgIC8vIHZhcnMgZm9yIHRoZSBsZWdlbmRcclxuICAgIGxldCBsZWdlbmRTd2F0Y2hXaWR0aCA9IDUwO1xyXG4gICAgbGV0IGxlZ2VuZFN3YXRjaEhlaWdodCA9IDIwO1xyXG5cclxuICAgIGxldCBsZWdlbmREYXRhID0gc3RhbmRhcmREZXZpYXRpb25Db2xvclNjYWxlLnJhbmdlKCk7XHJcbiAgICAvL1RPRE8gY2hhbmdlIHRoaXMgdG8gYmV0dGVyIHNvbHV0aW9uXHJcbiAgICBsZXQgbGVnZW5kVGV4dERhdGEgPSBbJ2xvdycsICcnLCAnJywgJycsICcnLCAnJywgJycsICcnLCAnaGlnaCddO1xyXG5cclxuICAgIGxlZ2VuZCA9IGRlbmRyb2dyYW1MZWdlbmQuc2VsZWN0QWxsKCdyZWN0LmxlZ2VuZCcpXHJcbiAgICAgICAgLmRhdGEobGVnZW5kRGF0YSk7XHJcbiAgICBsZWdlbmRUZXh0ID0gZGVuZHJvZ3JhbUxlZ2VuZC5zZWxlY3RBbGwoJ3RleHQubGVnZW5kLXRleHQnKVxyXG4gICAgICAgIC5kYXRhKGxlZ2VuZFRleHREYXRhKTtcclxuXHJcbiAgICAvLyBFTlRFUiAtIGxlZ2VuZFxyXG4gICAgbGVnZW5kXHJcbiAgICAgICAgLmVudGVyKClcclxuICAgICAgICAuYXBwZW5kKCdyZWN0JylcclxuICAgICAgICAuYXR0cignY2xhc3MnLCAnbGVnZW5kJylcclxuICAgICAgICAuYXR0cignd2lkdGgnLCBsZWdlbmRTd2F0Y2hXaWR0aClcclxuICAgICAgICAuYXR0cignaGVpZ2h0JywgbGVnZW5kU3dhdGNoSGVpZ2h0KVxyXG4gICAgICAgIC5hdHRyKCd5JywgMClcclxuICAgICAgICAuYXR0cigneCcsIGZ1bmN0aW9uKGQsIGkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChpICogbGVnZW5kU3dhdGNoV2lkdGgpICsgJ3B4JztcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5zdHlsZSgnZmlsbCcsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tIFRleHQgIC0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIEVOVEVSIC0gbGVnZW5kIHRleHRcclxuICAgIGxlZ2VuZFRleHRcclxuICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgIC5hcHBlbmQoJ3RleHQnKVxyXG4gICAgICAgIC5hdHRyKCdjbGFzcycsICdsZWdlbmQtdGV4dCcpXHJcbiAgICAgICAgLmF0dHIoJ3knLCAyICogbGVnZW5kU3dhdGNoSGVpZ2h0KVxyXG4gICAgICAgIC5hdHRyKCd4JywgZnVuY3Rpb24oZCwgaSkge1xyXG4gICAgICAgICAgICByZXR1cm4gKGkgKiBsZWdlbmRTd2F0Y2hXaWR0aCkgKyAncHgnO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRleHQoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldCB0aGUgc2V0IG9wZXJhdGlvblxyXG4gKiBAcGFyYW0ge3N0cmluZ30gb3BlcmF0aW9uIC0gZS5nLiBcInVuaW9uXCIgXCJpbnRlcnNlY3Rpb25cIiBcInN5bS1kaWZmZXJlbmNlXCJcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRTZXRPcGVyYXRpb24odmFsdWUpIHtcclxuICAgIHNldE9wZXJhdGlvbiA9IHZhbHVlO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IHRoZSBoaWVyYXJjaHkgZ3JvdXAgc3RhbmRhcmQgZGV2aWF0aW9uXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXkgLSB1bmlxdWUgaGFzaCBpZCBmb3IgdGhlIGdyb3VwXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSAtIHVuaXF1ZSBoYXNoIGlkIGZvciB0aGUgZ3JvdXBcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRoaWVyYXJjaHlHcm91cFN0ZGV2KGtleSwgdmFsdWUpIHtcclxuICAgIGlmIChrZXkgaW4gaGllcmFyY2h5R3JvdXBTdGRldikge1xyXG4gICAgICAgIGhpZXJhcmNoeUdyb3VwU3RkZXZba2V5XS5wdXNoKHZhbHVlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaGllcmFyY2h5R3JvdXBTdGRldltrZXldID0gW3ZhbHVlXTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFJlc2V0IGhpZXJhcmNoeSBncm91cCBzdGFuZGFyZCBkZXZpYXRpb25cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiByZXNldGhpZXJhcmNoeUdyb3VwU3RkZXYoKSB7XHJcbiAgICBoaWVyYXJjaHlHcm91cFN0ZGV2ID0ge307XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBIaWdobGlnaHQgYSBzdWJzZXQgb2YgYW5pbWFscyBpbiB0aGUgc3BhdGlhbCB2aWV3XHJcbiAqIEBwYXJhbSB7YXJyYXl9IGFuaW1hbHMgLSBhcnJheSBvZiBhbmltYWwgaWRzIHdoaWNoIGhhdmUgdG8gYmUgaGlnaGxpZ2h0ZWRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRIaWdobGlnaHRTcGF0aWFsVmlldyhhbmltYWxzKSB7XHJcbiAgICAvLyBwb2ludHMgdG8gY2FsY3VsYXRlIHRoZSBjb252ZXggaHVsbCBvZiB0aGUgaGlnaGxpZ2h0IGNsdXN0ZXJcclxuICAgIGxldCB2ZXJ0aWNlcyA9IFtdO1xyXG4gICAgLy8gaXRlcmF0ZSB0aHJvdWdoIHRoZSBvYmplY3RzIGluIHRoZSBjbHVzdGVyXHJcbiAgICAvLyBnZXQgdGhlIHBvaW50cyBhbmQgaGlnaGxpZ2h0IHRoZSBhbmltYWxzXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFuaW1hbHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBsZXQgdG1wQW5pbWFsID0gc3BhdGlhbFZpZXcuc2VsZWN0KCcjYW5pbWFsLScgKyBhbmltYWxzW2ldKTtcclxuICAgICAgICBsZXQgcG9pbnQgPSB0bXBBbmltYWwuZGF0YSgpWzBdWydwJ107XHJcbiAgICAgICAgdmVydGljZXMucHVzaChbcG9pbnRbMF0sIC1wb2ludFsxXV0pO1xyXG5cclxuICAgICAgICB0bXBBbmltYWwuY2xhc3NlZCgnYW5pbWFsLWhpZ2hsaWdodCcsIHRydWUpO1xyXG4gICAgfVxyXG4gICAgLy8gYWRkIGEgcG9seWdvbiBodWxsIGluIHRoZSBzcGF0aWFsIHZpZXdcclxuICAgIHNwYXRpYWxWaWV3LmFwcGVuZCgncGF0aCcpXHJcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2hpZ2hsaWdodC1oaWVyYXJjaHknKVxyXG4gICAgICAgIC5hdHRyKCdkJywgKCdNJyArIGQzLnBvbHlnb25IdWxsKHZlcnRpY2VzKS5qb2luKCdMJykgKyAnWicpKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlbW92ZSB0aGUgaGlnaGxpZ2h0IGluIHRoZSBzcGF0aWFsIHZpZXdcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVIaWdobGlnaHRTcGF0aWFsVmlldygpIHtcclxuICAgIC8vIHJlbW92ZSB0aGUgY29sb3JpbmcgYW5kIHRoZSBoaWVyYXJjaHkgaGlnaGxpZ2h0IGh1bGxcclxuICAgIGQzLnNlbGVjdEFsbCgnLmFuaW1hbCcpLmNsYXNzZWQoJ2FuaW1hbC1oaWdobGlnaHQnLCBmYWxzZSk7XHJcbiAgICBkMy5zZWxlY3RBbGwoJy5oaWdobGlnaHQtaGllcmFyY2h5JykucmVtb3ZlKCk7XHJcbn1cclxuIiwiLyplc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtbGV0cyovXHJcbi8qZ2xvYmFsIHdpbmRvdywgJCwgZDMgKi9cclxuaW1wb3J0IHtcclxuICAgIGhpZXJhcmNoeUNvbG9ycyxcclxuICAgIGNvbG9ycyxcclxuICAgIGNoYW5nZUhpZXJhcmNoeUxlZ2VuZFxyXG59IGZyb20gJy4vaGllcmFyY2h5LmpzJztcclxuXHJcblxyXG5cclxuZXhwb3J0IGxldCBuZXR3b3JrQXV0byA9IGZhbHNlOyAvLyBpZiB0cnVlIHRoZSBuZXR3b3JrIGVkZ2UgbGltaXQgaXMgYXV0b21hdGljYWxseSBzdWdnZXN0ZWRcclxuZXhwb3J0IGxldCBuZXR3b3JrTGltaXQgPSAwLjU7XHJcbmV4cG9ydCBsZXQgc2hvd05ldHdvcmtIaWVyYXJjaHk7XHJcbmV4cG9ydCBsZXQgbmV0d29ya0NvbG9yID0ge307XHJcbmV4cG9ydCBsZXQgbmV0d29ya0lEO1xyXG5leHBvcnQgbGV0IG5ldHdvcmtCYWNrZ3JvdW5kID0gdHJ1ZTtcclxuZXhwb3J0IGxldCBuZXR3b3JrQmFja2dyb3VuZExpbWl0ID0gMTsgLy9kcmF3IGJhY2tncm91bmQgbGluZSBpZiBsaW1pdCBpcyBleGNlZWRlZFxyXG4vLyBmaXhlZCBjb2xvciBzY2FsZSBmb3IgdGhlIG5ldHdvcmtcclxuXHJcbi8qKlxyXG4gKiBjb2xvciBzY2FsZSBmb3IgbmV0d29yayAtIHJhbmdlIGlzIGRlZmluZWQgZHluYW1pYyBiYXNlZCBvbiB0aGUgaGllcmFyaGN5IGNvbG9yXHJcbiAqL1xyXG5leHBvcnQgbGV0IG5ldHdvcmtDb2xvclNjYWxlID0gZDMuc2NhbGVUaHJlc2hvbGQoKVxyXG4gICAgLmRvbWFpbihcclxuICAgICAgICBbMCwgLjEsIC4yLCAuMywgLjQsIC41LCAuNiwgLjcsIC44LCAuOSwgMV1cclxuICAgICkucmFuZ2UoWycjZjdmYmZmJywgJyNkZWViZjcnLCAnI2M2ZGJlZicsICcjOWVjYWUxJywgJyM2YmFlZDYnLCAnIzQyOTJjNicsICcjMjE3MWI1JywgJyMwODUxOWMnLCAnIzA4MzA2YiddKTtcclxuXHJcblxyXG4vKipcclxuICogQWRkIHRoZSBuZXR3b3JrICBzZWxlY3QgYnV0dG9ucyBhbmQgaGllcmFyY2h5IGNoZWNrYm94ZXMgdG8gdGhlIG5ldHdvcmsgbW9kYWxcclxuICogQHBhcmFtIHthcnJheX0gZGF0YSAtIEFycmF5IG9mIG5ldHdvcmsgZGF0YVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGFkZE5ldHdvcmtCdXR0b25zKGRhdGEpIHtcclxuICAgIGlmIChkYXRhLmxlbmd0aCkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZGF0YVtpXVsnZmluaXNoZWQnXSkge1xyXG4gICAgICAgICAgICAgICAgJCgnI25ldHdvcmtzLWhpZXJhcmNoaWVzLXRhYmxlIHRib2R5JylcclxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCc8dHI+PHRkPicgKyBkYXRhW2ldWyduYW1lJ10gKyAnPC90ZD4gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8dGQ+IDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0XCIgZGF0YT0nICsgZGF0YVtpXVsnbmV0d29ya19pZCddICsgJyBuYW1lPScgKyBkYXRhW2ldWyduYW1lJ10gK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPjxzcGFuIGNsYXNzPVwibWRpIG1kaS1ncmFwaHFsXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9zcGFuPjwvYnV0dG9uPjwvdGQ+ICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPHRkPjxkaXYgY2xhc3M9XCJwcmV0dHkgcC1zd2l0Y2ggcC1maWxsXCI+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGNsYXNzPVwiaGllYXJjaHktY2hlY2tib3hcIiBkYXRhPVwiJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbaV1bJ25ldHdvcmtfaWQnXSArICdcIiBuYW1lPVwiJyArIGRhdGFbaV1bJ25hbWUnXSArICdcIj48ZGl2IGNsYXNzPVwic3RhdGUgcC1zdWNjZXNzXCI+PGxhYmVsPjwvbGFiZWw+PC9kaXY+PC9kaXY+PC90ZD4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzx0ZD4tLS08L3RkPidcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gJzx0ZD48ZGl2IGNsYXNzPVwicHJldHR5IHAtc3dpdGNoIHAtZmlsbFwiPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBjbGFzcz1cIm5ldHdvcmstaGllcmFyY2h5LWNoZWNrYm94XCIgZGF0YT1cIicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkYXRhW2ldWyduZXR3b3JrX2lkJ10gKyAnXCI+PGRpdiBjbGFzcz1cInN0YXRlIHAtc3VjY2Vzc1wiPjxsYWJlbD48L2xhYmVsPjwvZGl2PjwvZGl2PjwvdGQ+J1xyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgICQoJyNuZXR3b3Jrcy1oaWVyYXJjaGllcy10YWJsZScpXHJcbiAgICAgICAgICAgIC5hcHBlbmQoJ1RoZXJlIGlzIG5vIG5ldHdvcmsgZGF0YSBmb3IgdGhpcyBkYXRhc2V0Jyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgU2V0dGVyXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuLyoqXHJcbiAqIFNldCB0aGUgbmV0d29yayBhdXRvIHZhbHVlIC0gaWYgdHJ1ZSB0aGFuIHRoZSBuZXR3b3JrIGxpbWl0IGlzIHNldCB0byB0aGUgMC45NSBwZXJjZW50aWxlIG9mIGFsbCB2YWx1ZXNcclxuICogQHBhcmFtIHtCb29sZWFufSB2YWx1ZVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldE5ldHdvcmtBdXRvKHZhbHVlKSB7XHJcbiAgICBuZXR3b3JrQXV0byA9IHZhbHVlO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IHRoZSBuZXR3b3JrIGxpbWl0IHdpdGggdGhlIHNwZWNpZmljIG5ldHdvcmsgc2xpZGVyIC0gY3VzdG9tXHJcbiAqIDAgPSBzaW1pbGFyIGFuZCAxIHVuc2ltaWxhciBmb3IgdGhlIHNwZWNpZmljIHRpbWUgbW9tZW50XHJcbiAqIEBwYXJhbSB7TnVtYmVyfSB2YWx1ZSAtIGJldHdlZW4gMCBhbmQgMVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldE5ldHdvckxpbWl0KHZhbHVlKSB7XHJcbiAgICBuZXR3b3JrTGltaXQgPSB2YWx1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldCB0aGUgbmV0d29yayBpbiBoaWVyYXJjaHkgKGUuZy4gaDApIGZpbHRlclxyXG4gKiBAcGFyYW0ge051bWJlcn0gaGllcmFyY2h5IC0gZS5nLiAwLW5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXROZXR3b3JrSGllcmFyY2h5KHZhbHVlKSB7XHJcbiAgICBzaG93TmV0d29ya0hpZXJhcmNoeSA9IHZhbHVlO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IHRoZSBuZXR3b3JrIG5ldHdvcmsgaWQgLSBuZWVkZWQgZm9yIGhpZXJhcmNoeSBzdGFuZGFyZCBkZXZpYXRpb24gY29sb3JpbmdcclxuICogQHBhcmFtIHtOdW1iZXJ9IHZhbHVlIC0gZS5nLiAwLW5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXROZXR3b3JrSUQodmFsdWUpIHtcclxuICAgIG5ldHdvcmtJRCA9IHZhbHVlO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IG5ldHdvcmsgY29sb3Igc2NhbGUgcmFuZ2VcclxuICogQHBhcmFtIHtOdW1iZXJ9IGlkIC0gaWQgb2YgdGhlIG5ldHdvcmtcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRuZXR3b3JrQ29sb3IobmV0d29ya19pZCkge1xyXG4gICAgLy8gaWYgaWQgPSAtMSBzZXQgdGhlIGNvbG9yIHRvIG5vdGhpbmdcclxuICAgIGlmIChuZXR3b3JrX2lkID49IDApIHtcclxuICAgICAgICBuZXR3b3JrQ29sb3JbJ2gnICsgbmV0d29ya19pZF0gPSAnIzA4MzA2Yic7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIG5ldHdvcmtDb2xvciA9IHt9O1xyXG4gICAgfVxyXG4gICAgY2hhbmdlSGllcmFyY2h5TGVnZW5kKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXQgdGhlIGJvb2xlYW4gdmFsdWUgZm9yIHRoZSBuZXR3b3JrIGJhY2tncm91bmQgY29sb3JcclxuICogQHBhcmFtIHtCb29sZWFufSB2YWx1ZSAtIHRydWUgb3IgZmFsc2VcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXROZXR3b3JrQmFja2dyb3VuZCh2YWx1ZSkge1xyXG4gICAgbmV0d29ya0JhY2tncm91bmQgPSB2YWx1ZTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBTZXQgdGhlIG5ldHdvcmsgYmFja2dyb3VuZCBjb2xvciBsaW1pdCAtIGRyYXcgYmFja2dyb3VuZCBsaW5lIGlmIGxpbWl0IGlzIGV4Y2VlZGVkXHJcbiAqIEBwYXJhbSB7SW50ZWdlcn0gdmFsdWUgLSBuZXcgbGltaXRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXROZXR3b3JrQmFja2dyb3VuZExpbWl0KHZhbHVlKSB7XHJcbiAgICBuZXR3b3JrQmFja2dyb3VuZExpbWl0ID0gdmFsdWU7XHJcbn0iLCIvKmVzbGludC1kaXNhYmxlIG5vLXVudXNlZC1sZXRzKi9cclxuLypnbG9iYWwgd2luZG93LCAkLCBwYXJhbWV0ZXJzICovXHJcblxyXG5sZXQgSlNPTkFQSV9NSU1FVFlQRSA9ICdhcHBsaWNhdGlvbi92bmQuYXBpK2pzb24nO1xyXG52YXIgc291cmNlO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGFkZFRvRGF0YXNldCxcclxuICAgIHNldERhdGFTZXRQZXJjZW50aWxlLFxyXG4gICAgc2V0U3dhcm1EYXRhLFxyXG4gICAgc2V0TWV0YURhdGEsXHJcbiAgICBzZXREYXRhc2V0RmVhdHVyZSxcclxuICAgIHNldE5ldHdvcmtEYXRhLFxyXG4gICAgc2V0SGllcmFyY2h5RGF0YSxcclxuICAgIHNldEFuaW1hbElkc1xyXG59IGZyb20gJy4vZXhwbG9yZS5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgYWRkTmV0d29ya0J1dHRvbnMsXHJcbiAgICBzZXROZXR3b3JrSURcclxufSBmcm9tICcuL25ldHdvcmsuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGVuYWJsZVBsYXlCdXR0b24sXHJcbiAgICBkaXNhYmxlUGxheUJ1dHRvbixcclxuICAgIGFkZEFic29sdXRlRmVhdHVyZUJ1dHRvbnNcclxufSBmcm9tICcuL2hlbHBlcnMuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIFNwYXRpYWxWaWV3XHJcbn0gZnJvbSAnLi9zcGF0aWFsX3ZpZXcvc3BhdGlhbF92aWV3LmpzJztcclxuXHJcbi8vIGltcG9ydCB7XHJcbi8vICAgICByZXNwb25zZVBhcmFtZXRlcnNcclxuLy8gfSBmcm9tICcuL3Zpc3VhbF9wYXJhbWV0ZXIuanMnO1xyXG5cclxuXHJcbi8qKlxyXG4gKiBTdHJlYW0gdGhlIG1vdmVtZW50IGRhdGEgZnJvbSB0aGUgQVBJXHJcbiAqIExvYWRzIG9ubHkgdGhlIGV4cGxpY2l0IG1vdmVtZW50IGRhdGFcclxuICovXHJcbi8vY29uc29sZS5sb2coZGF0YSk7XHJcbmV4cG9ydCBmdW5jdGlvbiBzdHJlYW1Nb3ZlbWVudERhdGEoKSB7XHJcbiAgICBpZiAod2luZG93LkV2ZW50U291cmNlKSB7XHJcbiAgICAgICAgc291cmNlID0gbmV3IEV2ZW50U291cmNlKCcvYXBpL21vdmVtZW50X29ubHkvJyArIHBhcmFtZXRlcnNbJ2lkJ10pO1xyXG4gICAgICAgIHNvdXJjZS5vbm1lc3NhZ2UgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmRhdGEgPT09ICdjbG9zZScpIHtcclxuICAgICAgICAgICAgICAgIHNvdXJjZS5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgLy8gaWYgYWxsIGFqYXggcXVlcmllcyBhcmUgY29tcGVsdGUgaW5pdGlhbGl6ZVxyXG4gICAgICAgICAgICAgICAgKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNoZWNrUGVuZGluZ1JlcXVlc3QoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkLmFjdGl2ZSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGNoZWNrUGVuZGluZ1JlcXVlc3QsIDEwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZpZXcgPSBuZXcgU3BhdGlhbFZpZXcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChjaGVja1BlbmRpbmdSZXF1ZXN0LCAxMDApO1xyXG4gICAgICAgICAgICAgICAgfSkoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGFkZFRvRGF0YXNldChKU09OLnBhcnNlKGUuZGF0YSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgc291cmNlLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICBpZiAoZS5yZWFkeVN0YXRlID09IEV2ZW50U291cmNlLkNMT1NFRCkge1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoJ1N0cmVhbWluZyBlcnJvcicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgZmFsc2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBhbGVydCgnV2ViYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IHN0cmVhbWluZycpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogR2V0IHRoZSBwZXJjZW50aWxlIGRhdGEgZnJvbSB0aGUgYXBpIGV4cG9ydCB0byBleHBsb3JlLmpzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGVyY2VudGlsZSgpIHtcclxuICAgIGxldCBkYXRhU2V0UGVyY2VudGlsZSA9IFtdO1xyXG4gICAgJC5hamF4KHtcclxuICAgICAgICB1cmw6ICcvYXBpL3BlcmNlbnRpbGUvJyArIHBhcmFtZXRlcnNbJ2lkJ10sXHJcbiAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICB0eXBlOiAnR0VUJyxcclxuICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgJ0FjY2VwdCc6IEpTT05BUElfTUlNRVRZUEVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgLy8gY29udmVydCB0aGUgZGF0YVNldFBlcmNlbnRpbGUgaW50byBhbiBhcnJheVxyXG4gICAgICAgICAgICAvLyBbbWluLCBwZXJjZW50aWxlXzEsLi4uLHBlcmNlbnRpbGVfOSxtYXhdXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgZGF0YVNldFBlcmNlbnRpbGVbZGF0YVtpXVsnZmVhdHVyZSddXSA9IFtkYXRhW2ldWydtaW4nXSwgZGF0YVtpXVsncDEnXSwgZGF0YVtpXVsncDInXSwgZGF0YVtpXVsncDMnXSwgZGF0YVtpXVsncDUnXSwgZGF0YVtpXVsncDcnXSwgZGF0YVtpXVsncDgnXSwgZGF0YVtpXVsncDknXSwgZGF0YVtpXVsnbWF4J11dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldERhdGFTZXRQZXJjZW50aWxlKGRhdGFTZXRQZXJjZW50aWxlKTtcclxuICAgICAgICAgICAgYWRkQWJzb2x1dGVGZWF0dXJlQnV0dG9ucyhkYXRhU2V0UGVyY2VudGlsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIHN3YXJtIGZlYXR1cmVzIGZvciB0aGUgbGluZSBjaGFydCBmcm9tIHRoZSBhcGlcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRTd2FybUZlYXR1cmVzKCkge1xyXG4gICAgY29uc3Qgc3dhcm1fZmVhdHVyZXMgPSBbJ3N3YXJtX3RpbWUnLCAnc3dhcm1fc3BlZWQnLCAnc3dhcm1fYWNjZWxlcmF0aW9uJywgJ3N3YXJtX2NvbnZleF9odWxsX2FyZWEnLFxyXG4gICAgICAgICdzd2FybV9kaXN0YW5jZV9jZW50cm9pZCcsICdzd2FybV9kaXJlY3Rpb24nLCAnc3dhcm1fcG9sYXJpc2F0aW9uJ1xyXG4gICAgXTtcclxuXHJcbiAgICAvLyBnZXQgYWxsIHRoZSBvdGhlciBzd2FybSBmZWF0dXJlcyBmb3IgdGhlIGxpbmUgY2hhcnRcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3dhcm1fZmVhdHVyZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6ICcvYXBpL2RhdGFzZXQvJyArIHBhcmFtZXRlcnNbJ2lkJ10gKyAnLycgKyBzd2FybV9mZWF0dXJlc1tpXSxcclxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICAgICAgdHlwZTogJ0dFVCcsXHJcbiAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICdBY2NlcHQnOiBKU09OQVBJX01JTUVUWVBFXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGxldCBmZWF0dXJlID0gc3dhcm1fZmVhdHVyZXNbaV0ucmVwbGFjZSgnc3dhcm1fJywgJycpO1xyXG5cclxuICAgICAgICAgICAgICAgIHNldFN3YXJtRGF0YShkYXRhLCBmZWF0dXJlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogR2V0IHRoZSBtZWFkYXRhIGluZm9ybWF0aW9uXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0TWV0YURhdGEoKSB7XHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICAgIHVybDogJy9hcGkvbWV0YWRhdGEvJyArIHBhcmFtZXRlcnNbJ2lkJ10sXHJcbiAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICB0eXBlOiAnR0VUJyxcclxuICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgJ0FjY2VwdCc6IEpTT05BUElfTUlNRVRZUEVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgc2V0TWV0YURhdGEoZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIG5ldHdvcmsgZGF0YXNldHMgZm9yIHRoZSBidXR0b25zXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0TmV0d29ya0RhdGFCdXR0b24oKSB7XHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICAgIHVybDogJy9hcGkvZGF0YXNldC9uZXR3b3Jrcy8nICsgcGFyYW1ldGVyc1snaWQnXSxcclxuICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgIHR5cGU6ICdHRVQnLFxyXG4gICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAnQWNjZXB0JzogSlNPTkFQSV9NSU1FVFlQRVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICBhZGROZXR3b3JrQnV0dG9ucyhkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCB0aGUgc3BlY2lmYyBmZWF0dXJlXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBmZWF0dXJlIC0gZm9yIGluc3RhbmNlIHNwZWVkLCBhY2NlbGVyYXRpb24gZXRjLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldERhdGFzZXRGZWF0dXJlKGZlYXR1cmUpIHtcclxuICAgICQuYWpheCh7XHJcbiAgICAgICAgdXJsOiAnL2FwaS9kYXRhc2V0LycgKyBwYXJhbWV0ZXJzWydpZCddICsgJy8nICsgZmVhdHVyZSxcclxuICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgIHR5cGU6ICdHRVQnLFxyXG4gICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAnQWNjZXB0JzogSlNPTkFQSV9NSU1FVFlQRVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAvLyBhZGQgdGhlIHNwZWVkIGZlYXR1cmUgdG8gdGhlIGRhdGFzZXRcclxuICAgICAgICAgICAgc2V0RGF0YXNldEZlYXR1cmUoZGF0YSwgZmVhdHVyZSk7XHJcbiAgICAgICAgICAgIGVuYWJsZVBsYXlCdXR0b24oKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCB0aGUgc3BlY2lmYyBzd2FybSBmZWF0dXJlXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBmZWF0dXJlIC0gZm9yIGluc3RhbmNlIGNlbnRyb2lkLCBtZWRvaWQgZXRjLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFN3YXJtRGF0YXNldEZlYXR1cmUoZmVhdHVyZSkge1xyXG4gICAgZGlzYWJsZVBsYXlCdXR0b24oKTtcclxuICAgICQuYWpheCh7XHJcbiAgICAgICAgdXJsOiAnL2FwaS9kYXRhc2V0LycgKyBwYXJhbWV0ZXJzWydpZCddICsgJy8nICsgZmVhdHVyZSxcclxuICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgIHR5cGU6ICdHRVQnLFxyXG4gICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAnQWNjZXB0JzogSlNPTkFQSV9NSU1FVFlQRVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAvLyBhZGQgdGhlIHNwZWVkIGZlYXR1cmUgdG8gdGhlIGRhdGFzZXRcclxuICAgICAgICAgICAgc2V0U3dhcm1EYXRhKGRhdGEsIGZlYXR1cmUpO1xyXG4gICAgICAgICAgICBlbmFibGVQbGF5QnV0dG9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIG5ldHdvcmsgZm9yIHRoZSBzcGVjaWZpYyBuZXR3b3JrX2lkXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBuZXR3b3JrX2lkIC0gdW5pcXVlIG5ldHdvcmsgaWQgb2YgYSBkYXRhc2V0LlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldE5ldHdvcmtEYXRhKG5ldHdvcmtfaWQpIHtcclxuICAgICQuYWpheCh7XHJcbiAgICAgICAgdXJsOiAnL2FwaS9kYXRhc2V0L25ldHdvcmsvJyArIHBhcmFtZXRlcnNbJ2lkJ10gKyAnLycgKyBuZXR3b3JrX2lkLFxyXG4gICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgdHlwZTogJ0dFVCcsXHJcbiAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICdBY2NlcHQnOiBKU09OQVBJX01JTUVUWVBFXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgc2V0TmV0d29ya0RhdGEoSlNPTi5wYXJzZShkYXRhWzBdWydkYXRhJ10pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbmFibGVQbGF5QnV0dG9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAvLyBuZWVkZWQgZm9yIHN0YW5kYXJkIERldmlhdGlvbiBpbiBkZW5kcm9ncmFtXHJcbiAgICBzZXROZXR3b3JrSUQobmV0d29ya19pZCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIG5ldHdvcmsgaGllcmFyY2h5IGZvciB0aGUgc3BlY2lmaWMgbmV0d29ya19pZFxyXG4gKiBAcGFyYW0ge1N0cmluZ30gbmV0d29ya19pZCAtIHVuaXF1ZSBuZXR3b3JrIGlkIG9mIGEgZGF0YXNldC5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXROZXR3b3JrSGllcmFyY2h5RGF0YShuZXR3b3JrX2lkKSB7XHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICAgIHVybDogJy9hcGkvZGF0YXNldC9uZXR3b3JrL2hpZXJhcmNoeS8nICsgcGFyYW1ldGVyc1snaWQnXSArICcvJyArIG5ldHdvcmtfaWQsXHJcbiAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICB0eXBlOiAnR0VUJyxcclxuICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgJ0FjY2VwdCc6IEpTT05BUElfTUlNRVRZUEVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgaWYgKGRhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRIaWVyYXJjaHlEYXRhKEpTT04ucGFyc2UoZGF0YVswXVsnaGllcmFyY2h5J10pLCBuZXR3b3JrX2lkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbmFibGVQbGF5QnV0dG9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIGRpc3RpbmN0IGFuaW1hbCBpZHMgZm9yIGEgc3BlY2lmYyBkYXRhc2V0XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0QW5pbWFsSWRzKCkge1xyXG4gICAgJC5hamF4KHtcclxuICAgICAgICB1cmw6ICcvYXBpL2RhdGFzZXQvJyArIHBhcmFtZXRlcnNbJ2lkJ10gKyAnL2FuaW1hbF9pZHMnLFxyXG4gICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgdHlwZTogJ0dFVCcsXHJcbiAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICdBY2NlcHQnOiBKU09OQVBJX01JTUVUWVBFXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgIHNldEFuaW1hbElkcyhkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuLy8gLyoqXHJcbi8vICAqIFZpc3VhbCBwYXJhbWV0ZXIgc3VnZ2VzdGlvbiBhamF4IHF1ZXJ5XHJcbi8vICAqIEBwYXJhbSB7QXJyYXl9IHRyYWNrZWREYXRhIC0gdHJhY2tlZCBkYXRhIHdpdGggLlxyXG4vLyAgKi9cclxuLy8gZXhwb3J0IGZ1bmN0aW9uIGdldFN1Z2dlc3RlZFBhcmFtZXRlcnModHJhY2tlZERhdGEpIHtcclxuLy8gICAgICQuYWpheCh7XHJcbi8vICAgICAgICAgdXJsOiAnL2FwaS9kYXRhc2V0L3Zpc3VhbF9wYXJhbWV0ZXIvJyArIHBhcmFtZXRlcnNbJ2lkJ10sXHJcbi8vICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuLy8gICAgICAgICB0eXBlOiAnUE9TVCcsXHJcbi8vICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcclxuLy8gICAgICAgICBoZWFkZXJzOiB7XHJcbi8vICAgICAgICAgICAgICdBY2NlcHQnOiBKU09OQVBJX01JTUVUWVBFXHJcbi8vICAgICAgICAgfSxcclxuLy8gICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XHJcbi8vICAgICAgICAgICAgIHJlc3BvbnNlUGFyYW1ldGVycyhkYXRhKTtcclxuLy8gICAgICAgICB9LFxyXG4vLyAgICAgICAgIGRhdGE6IHRyYWNrZWREYXRhXHJcbi8vICAgICB9KTtcclxuLy9cclxuLy8gfVxyXG4iLCIvKmVzbGludC1kaXNhYmxlIG5vLXVudXNlZC1sZXRzKi9cclxuLypnbG9iYWwgd2luZG93LCAkICovXHJcbi8vIGltcG9ydCBhbGwganNcclxuaW1wb3J0ICogYXMgcXVlcmllcyBmcm9tICcuL2FqYXhfcXVlcmllcy5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgaW5pdGlhbGl6ZU1ldGFkZGF0YVxyXG59IGZyb20gJy4vbWV0YWRhdGEuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIHNldEhpZXJhcmNoeUxldmVsLFxyXG4gICAgcmVtb3ZlSGllcmFyY2h5TGV2ZWwsXHJcbiAgICBzZXRIaWVyYXJjaHlDb2xvcixcclxuICAgIHJlbW92ZUhpZXJhcmNoeUNvbG9yLFxyXG4gICAgY2hhbmdlSGllcmFyY2h5TGVnZW5kXHJcbn0gZnJvbSAnLi9oaWVyYXJjaHkuanMnO1xyXG5cclxuLy8gaW1wb3J0IGNzc1xyXG5pbXBvcnQgJy4vZXhwbG9yZS5jc3MnO1xyXG5cclxuaW1wb3J0IENoYXJ0IGZyb20gJy4vbGluZV9jaGFydC5qcyc7XHJcblxyXG5leHBvcnQgbGV0IGRhdGFzZXQgPSBbXTsgLy8gbWFpbiBkYXRhc2V0IHdpdGggdmFsdWVzIGZvciBlYWNoIGluZGl2aWR1YWwgYW5pbWFsXHJcbmV4cG9ydCBsZXQgZGF0YXNldE1ldGFkYXRhID0gW107IC8vIG1ldGFkYXRhc2V0IGZvciBlYWNoIGluZGl2aWR1YWwgZmlzaFxyXG5leHBvcnQgbGV0IHN3YXJtRGF0YSA9IFtdOyAvLyBzd2FybWRhdGEgZm9yIGxpbmVjaGFydCBhbmQgYWxzbyBvdGhlciBzd2FybSBmZWF0dXJlc1xyXG5leHBvcnQgbGV0IGRhdGFTZXRQZXJjZW50aWxlID0ge307IC8vIHBlY2VudGlsZXMgbmVlZGVkIGZvciB0aGUgY29sb3IgbWFwcGluZ1xyXG5leHBvcnQgbGV0IG5ldHdvcmtEYXRhID0ge307IC8vIG5ldHdvcmsgZGF0YVxyXG5leHBvcnQgbGV0IG5ldHdvcmtIaWVyYXJjaHkgPSB7fTsgLy8gbmV0d29yayBoaWVyYXJjaHkgZGF0YVxyXG5leHBvcnQgbGV0IGFuaW1hbElkcyA9IHt9OyAvLyBkaXN0aW5jdCBhbmltYWwgaWRzXHJcblxyXG5cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIGJhc2ljIGRhdGEgdG8gZ2V0IHRoZSB0b29sIHJ1bm5pbmcuXHJcbiAqIGFmdGVyIHRoZSBwZW5kaW5nIGFqYXggcXVlcmllcyBhcmUgZmluaXNoZWRcclxuICogdGhlIHRvb2wgaXMgZHJhd25cclxuICovXHJcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xyXG4gICAgLy8gY29uc29sZS5sb2cocGFyYW1ldGVycyk7XHJcblxyXG4gICAgLy8gZ2V0IHRoZSBtb3ZlbWVudCBkYXRhXHJcbiAgICBxdWVyaWVzLnN0cmVhbU1vdmVtZW50RGF0YSgpO1xyXG5cclxuICAgIC8vIGdldCB0aGUgZGF0YVNldFBlcmNlbnRpbGVcclxuICAgIHF1ZXJpZXMuZ2V0UGVyY2VudGlsZSgpO1xyXG5cclxuICAgIC8vIGdldCB0aGUgZGlzdGluY3QgYW5pbWFsIGlkcyBmb3IgdGhlIHdob2xlIGRhdGFzZXRcclxuICAgIHF1ZXJpZXMuZ2V0QW5pbWFsSWRzKCk7XHJcblxyXG4gICAgLy8gZ2V0IHRoZSBzd2FybSBmZWF0dXJlcyBmb3IgdGhlIGxpbmUgY2hhcnRcclxuICAgIHF1ZXJpZXMuZ2V0U3dhcm1GZWF0dXJlcygpO1xyXG5cclxuICAgIC8vIGdldCB0aGUgbWV0YWRhdGEgYW5kIGluaXRpYWxpemUgdGhlIG1ldGFkYSB3aW5kb3dcclxuICAgIHF1ZXJpZXMuZ2V0TWV0YURhdGEoKTtcclxuXHJcbiAgICAvLyBnZXQgdGhlIGluZm9ybWF0aW9uIGlmIHRoZXJlIGFyZSBhbHJlYWR5IG5ldHdvcmtzIGNyZWF0ZWQgZm9yIHRoaXMgZGFzdGFzZXRcclxuICAgIHF1ZXJpZXMuZ2V0TmV0d29ya0RhdGFCdXR0b24oKTtcclxufSk7XHJcblxyXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICBHZXR0ZXIgYW5kIHNldHRlclxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbi8qKlxyXG4gKiBDb25jYWN0IHRvIHRoZSBtYWluIGRhdGFzZXRcclxuICogdGhlIGlkZWEgaXMgdG8gdXNlIHRoaXMgb25lIGRheSBmb3IgbGF6eSBsb2FkaW5nXHJcbiAqIEBwYXJhbSB7YXJyYXl9IHZhbHVlIC0gYXJyYXkgb2YgbW92ZW1lbnQgZGF0YXNldHNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRUb0RhdGFzZXQodmFsdWUpIHtcclxuICAgIGRhdGFzZXQgPSBkYXRhc2V0LmNvbmNhdCh2YWx1ZSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXQgZGF0YXNldCBwZXJjZW50aWxlXHJcbiAqIEBwYXJhbSB7YXJyYXl9IHZhbHVlIC0gYXJyYXkgb2YgYXJyYXJ5c1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldERhdGFTZXRQZXJjZW50aWxlKHZhbHVlKSB7XHJcbiAgICBkYXRhU2V0UGVyY2VudGlsZSA9IHZhbHVlO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IGRhdGFzZXQgbWV0YWRhdGFcclxuICogQHBhcmFtIHthcnJheX0gdmFsdWUgLSBhcnJheVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldE1ldGFEYXRhKHZhbHVlKSB7XHJcbiAgICBkYXRhc2V0TWV0YWRhdGEgPSB2YWx1ZTtcclxuICAgIC8vIGluaXRpYWxpemUgdGhlIG1ldGFkYXRhIG1vZGFsXHJcbiAgICBpbml0aWFsaXplTWV0YWRkYXRhKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBZGQgYSBuZXcgZmVhdHVyZSBkaW1lbnNpb24gdG8gdGhlIHN3YXJtIGRhdGFzZXRcclxuICogQHBhcmFtIHthcnJheX0gZGF0YSAtIEFycmF5IG9mIHN3YXJtIHZhbHVlcyBjb25zaXN0aW5nIG9mIFtmZWF0dXJlXzAsZmVhdHVyZV8xLC4uLl1cclxuICogQHBhcmFtIHtzdHJpbmd9IGZlYXR1cmUgLSBzdHJpbmcgYXJyYXkgb2YgdGhlIGZlYXR1cmVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRTd2FybURhdGEoZGF0YSwgZmVhdHVyZSkge1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgLy8gYWRkIHRoZSB0aGUgb2JqZWN0IHRvIHRoZSBhcnJheSBpZiB0aGVyZSBpcyBubyBlbGVtZW50IHlldFxyXG4gICAgICAgIGlmICh0eXBlb2Ygc3dhcm1EYXRhW2ldID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICBzd2FybURhdGEucHVzaCh7fSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBjaGVjayBpZiBpbnRlZ2VyIG9yIGZsb2F0XHJcbiAgICAgICAgaWYgKGRhdGFbaV0gJiYgIShpc05hTihkYXRhW2ldKSkpIHtcclxuICAgICAgICAgICAgc3dhcm1EYXRhW2ldW2ZlYXR1cmVdID0gK2RhdGFbaV07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gaXMgc3RyaW5nXHJcbiAgICAgICAgICAgIHN3YXJtRGF0YVtpXVtmZWF0dXJlXSA9IGRhdGFbaV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEFkZCBhIG5ldyBmZWF0dXJlIGRpbWVuc2lvbiB0byB0aGUgZGF0YXNldFxyXG4gKiBAcGFyYW0ge2FycmF5fSBkYXRhIC0gQXJyYXkgb2YgZmVhdHVyZXMgdmFsdWVzIGNvbnNpc3Rpbmcgb2YgW2ZlYXR1cmVfMCwgZmVhdHVyZV8xLC4uLl1cclxuICogQHBhcmFtIHtzdHJpbmd9IGZlYXR1cmUgLSBzdHJpbmcgYXJyYXkgb2YgdGhlIGZlYXR1cmVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXREYXRhc2V0RmVhdHVyZShkYXRhLCBmZWF0dXJlKSB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAvLyBhZGQgdGhlIHRoZSBvYmplY3QgdG8gdGhlIGFycmF5IGlmIHRoZXJlIGlzIG5vIGVsZW1lbnQgeWV0XHJcbiAgICAgICAgaWYgKHR5cGVvZiBkYXRhc2V0W2ldID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICBkYXRhc2V0LnB1c2goe30pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBwYXJzZSB0aGUgaW50XHJcbiAgICAgICAgZGF0YXNldFtpXVtmZWF0dXJlXSA9ICtkYXRhW2ldO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogU2V0IHRoZSBuZXR3b3JrIHZhbHVlXHJcbiAqIEBwYXJhbSB7YXJyYXl9IHZhbHVlIC0gQXJyYXkgb2Ygb2YgYXJyYXlzIHdpdGggYWxsIHZhbHVlc1xyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gdGhlIGNhbGN1bGF0ZWQgYWRqYWNlbmN5IG1hdHJpeFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldE5ldHdvcmtEYXRhKHZhbHVlKSB7XHJcbiAgICBuZXR3b3JrRGF0YSA9IHZhbHVlO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IHRoZSBuZXR3b3JrIGhpZWFyaGN5IHZhbHVlXHJcbiAqIEBwYXJhbSB7YXJyYXl9IHZhbHVlIC0gQXJyYXkgb2Ygb2YgYXJyYXlzIHdpdGggYWxsIHZhbHVlc1xyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpdGggaGllcmFyY2h5XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2V0SGllcmFyY2h5RGF0YSh2YWx1ZSwgbmV0d29ya19pZCkge1xyXG4gICAgLy8gaWYgdGhlIGVsZW1lbnQgaXMgZW1wdHkgcmVtb3ZlIHRoZSBlbGVtZW50IGZyb20gdGhlIG5ldHdyb2tIaWVyYXJjaHkgb2JqZWN0XHJcbiAgICBpZiAoT2JqZWN0LmtleXModmFsdWUpLmxlbmd0aCA9PT0gMCAmJiB2YWx1ZS5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0KSB7XHJcbiAgICAgICAgZGVsZXRlIG5ldHdvcmtIaWVyYXJjaHlbJ2gnICsgbmV0d29ya19pZF07XHJcbiAgICAgICAgcmVtb3ZlSGllcmFyY2h5TGV2ZWwobmV0d29ya19pZCk7XHJcbiAgICAgICAgcmVtb3ZlSGllcmFyY2h5Q29sb3IobmV0d29ya19pZCk7XHJcbiAgICB9IC8vIGFkZCBpdCB0byB0aGUgbmV0d29yayBoaWVyYXJjaHlcclxuICAgIGVsc2Uge1xyXG4gICAgICAgIG5ldHdvcmtIaWVyYXJjaHlbJ2gnICsgbmV0d29ya19pZF0gPSB2YWx1ZTtcclxuICAgICAgICBzZXRIaWVyYXJjaHlMZXZlbChuZXR3b3JrX2lkLCAyKTtcclxuICAgICAgICBzZXRIaWVyYXJjaHlDb2xvcihuZXR3b3JrX2lkKTtcclxuICAgIH0gLy8gdG9vIG1hbnkgZWxlbWVudHMgY2FudCBiZSBhZGRlZFxyXG5cclxuICAgIGNoYW5nZUhpZXJhcmNoeUxlZ2VuZCgpO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IGFuaW1hbCBpZHMgZGF0YXNldFxyXG4gKiBAcGFyYW0ge2FycmF5fSBpZHMgLSBBcnJheSBvZiBhbGwgZGlzdGluY3QgYW5pbWFsIGlkc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldEFuaW1hbElkcyh2YWx1ZSkge1xyXG4gICAgYW5pbWFsSWRzID0gdmFsdWU7XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==