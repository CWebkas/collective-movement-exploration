!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=6)}([function(e,t){},function(e,t,r){var n=r(2);"string"==typeof n&&(n=[[e.i,n,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};r(4)(n,a);n.locals&&(e.exports=n.locals)},function(e,t,r){(t=r(3)(!1)).push([e.i,"/* Icons for bootstrap 4 */\r\n\r\n.mdi::before {\r\n    font-size: 24px;\r\n    line-height: 14px;\r\n}\r\n\r\n.btn .mdi::before {\r\n    position: relative;\r\n    top: 4px;\r\n}\r\n\r\n.btn-xs .mdi::before {\r\n    font-size: 18px;\r\n    top: 3px;\r\n}\r\n\r\n.btn-sm .mdi::before {\r\n    font-size: 18px;\r\n    top: 3px;\r\n}\r\n\r\n.dropdown-menu .mdi {\r\n    width: 18px;\r\n}\r\n\r\n.dropdown-menu .mdi::before {\r\n    position: relative;\r\n    top: 4px;\r\n    left: -8px;\r\n}\r\n\r\n.nav .mdi::before {\r\n    position: relative;\r\n    top: 4px;\r\n}\r\n\r\n.navbar .navbar-toggle .mdi::before {\r\n    position: relative;\r\n    top: 4px;\r\n    color: #FFF;\r\n}\r\n\r\n.breadcrumb .mdi::before {\r\n    position: relative;\r\n    top: 4px;\r\n}\r\n\r\n.breadcrumb a:hover {\r\n    text-decoration: none;\r\n}\r\n\r\n.breadcrumb a:hover span {\r\n    text-decoration: underline;\r\n}\r\n\r\n.alert .mdi::before {\r\n    position: relative;\r\n    top: 4px;\r\n    margin-right: 2px;\r\n}\r\n\r\n.input-group-addon .mdi::before {\r\n    position: relative;\r\n    top: 3px;\r\n}\r\n\r\n.navbar-brand .mdi::before {\r\n    position: relative;\r\n    top: 2px;\r\n    margin-right: 2px;\r\n}\r\n\r\n.list-group-item .mdi::before {\r\n    position: relative;\r\n    top: 3px;\r\n    left: -3px\r\n}\r\n\r\n/* SVG elements and text */\r\n\r\n#main-vis {\r\n    margin-bottom: 10px;\r\n}\r\n\r\n.svg-container {\r\n    display: inline-block;\r\n    position: relative;\r\n    width: 100%;\r\n    /* aspect ratio */\r\n    vertical-align: top;\r\n    overflow: visible;\r\n}\r\n\r\n.svg-content {\r\n    display: inline-block;\r\n    position: absolute;\r\n    border: 1px solid #000;\r\n}\r\n\r\n#main-vis-legend-div {\r\n    display: none;\r\n}\r\n\r\n#hierarchy-legend-div {\r\n    display: none;\r\n}\r\n\r\n#main-vis-legend {\r\n    float: right;\r\n    display: inline-block;\r\n    position: relative;\r\n    overflow: visible;\r\n    top: 10px;\r\n    left: 10px;\r\n}\r\n\r\n#hierarchy-legend {\r\n    float: left;\r\n    display: inline-block;\r\n    position: relative;\r\n    overflow: visible;\r\n    top: 10px;\r\n    left: 10px;\r\n}\r\n\r\n.svg-content-dendrogram {\r\n    display: inline-block;\r\n    border: 1px solid #000;\r\n}\r\n\r\n.svg-line-chart-container {\r\n    display: inline-block;\r\n    position: relative;\r\n    width: 100%;\r\n    height: auto;\r\n    /* depends on svg ratio */\r\n    padding-bottom: 17%;\r\n    /* aspect ratio */\r\n    vertical-align: top;\r\n    overflow: visible;\r\n}\r\n\r\n.svg-dendrogram-container {\r\n    display: inline-block;\r\n    position: relative;\r\n    height: auto;\r\n    vertical-align: top;\r\n    overflow: visible;\r\n}\r\n\r\n.axis path {\r\n    display: none;\r\n}\r\n\r\n.axis line {\r\n    stroke-opacity: 0.3;\r\n    shape-rendering: crispEdges;\r\n}\r\n\r\n.x {\r\n    font-size: 1em;\r\n}\r\n\r\n.y {\r\n    font-size: 1em;\r\n}\r\n\r\n.axis-line-chart path line {\r\n    fill: none;\r\n    stroke: #000;\r\n    shape-rendering: crispEdges;\r\n}\r\n\r\n.line {\r\n    fill: none;\r\n    stroke-width: 5px;\r\n}\r\n\r\n/* Time  */\r\n\r\n.frame-text {\r\n    margin-top: 0;\r\n    margin-bottom: 0;\r\n    font-size: 2em;\r\n    color: inherit;\r\n    font-weight: 500;\r\n    line-height: 1.1;\r\n}\r\n\r\n/* Slider ticks  */\r\n\r\n.ui-slider-tick {\r\n    display: inline-block;\r\n    width: 3px;\r\n    background: #337ab7;\r\n    height: 0.8em;\r\n    position: absolute;\r\n}\r\n\r\n/* Laoding gif   */\r\n\r\n#loading {\r\n    display: block;\r\n    text-align: center;\r\n}\r\n\r\n/* Color legend    */\r\n\r\n.legend {\r\n    font-size: 12px;\r\n    stroke: #000;\r\n}\r\n\r\n.legend-text {\r\n    font-size: 1.2em;\r\n    color: inherit;\r\n    line-height: 1.1;\r\n}\r\n\r\n.line-chart-legend-text {\r\n    font-size: 2em;\r\n    color: inherit;\r\n    line-height: 1.1;\r\n}\r\n\r\n.time-line {\r\n    fill: none;\r\n    stroke-width: 5px;\r\n    stroke: #000;\r\n}\r\n\r\n/*swarm features */\r\n\r\n.centroid {\r\n    fill-opacity: 0;\r\n    stroke: #e7298a;\r\n    stroke-width: 3px;\r\n}\r\n\r\n.medoid {\r\n    fill: #e7298a !important;\r\n    stroke: #e7298a !important;\r\n}\r\n\r\n.hull-path {\r\n    fill: #fff;\r\n    fill-opacity: 0;\r\n    stroke-width: 3;\r\n    stroke: #252525;\r\n    stroke-opacity: 0.5;\r\n}\r\n\r\n.hierarchy-group {\r\n    stroke-width: 10;\r\n    stroke-linejoin: round;\r\n    opacity: 0.2;\r\n}\r\n\r\n.delaunay-triangulation {\r\n    fill-opacity: 0;\r\n    stroke-width: 2;\r\n    stroke: #000;\r\n    stroke-opacity: 0.4;\r\n}\r\n\r\n/* Color brewer picker div */\r\n\r\n.palette {\r\n    cursor: pointer;\r\n    display: table;\r\n    vertical-align: bottom;\r\n    margin: 4px 0 4px 4px;\r\n    background: #fff;\r\n    border: solid 1px #aaa;\r\n}\r\n\r\n.swatch {\r\n    display: inline-block;\r\n    vertical-align: middle;\r\n    width: 22px;\r\n    height: 22px;\r\n}\r\n\r\n.voronoi {\r\n    fill-opacity: 0;\r\n    stroke-width: 3;\r\n    stroke: #000;\r\n    stroke-opacity: 0.2;\r\n}\r\n\r\n/* Tooltip */\r\n\r\ndiv.tooltip {\r\n    pointer-events: none;\r\n    opacity: 0;\r\n    background: rgb(255, 255, 255) !important;\r\n    border-left-color: #1b809e !important;\r\n    border: 1px solid #eee;\r\n    border-left-width: 5px;\r\n    border-radius: 3px;\r\n    position: absolute;\r\n}\r\n\r\ndiv.tooltip table td:nth-child(2) {\r\n    text-align: center;\r\n    font-weight: bold;\r\n}\r\n\r\n.tooltip-span {\r\n    display: block;\r\n    width: 150px;\r\n    word-wrap: break-word;\r\n    font-size: 1.5em;\r\n}\r\n\r\n.upper-outer-area, .lower-outer-area {\r\n    stroke-width: 1;\r\n    fill: #74a9cf;\r\n    stroke: #3690c0;\r\n}\r\n\r\n.upper-inner-area, .lower-inner-area {\r\n    stroke-width: 1;\r\n    fill: #045a8d;\r\n    stroke: #023858;\r\n}\r\n\r\n.median-line {\r\n    fill: none;\r\n    stroke: #525252;\r\n    stroke-width: 5;\r\n}\r\n\r\n.selected {\r\n    background: #999;\r\n    border: 4px solid #4d4d4d;\r\n    -moz-border-radius: 5px;\r\n    -webkit-border-radius: 5px;\r\n    box-shadow: 1px 2px 4px rgba(0, 0, 0, .4);\r\n}\r\n\r\n.zoom {\r\n    fill: none;\r\n    pointer-events: all;\r\n}\r\n\r\n.x.axis-line-chart>g>text {\r\n    font-size: 3em;\r\n    color: inherit;\r\n    line-height: 1.1;\r\n}\r\n\r\n.arrow {\r\n    stroke-width: 1;\r\n}\r\n\r\n#centroid-line {\r\n    stroke-width: 1;\r\n    stroke: #e7298a;\r\n}\r\n\r\n#centroid-arrow {\r\n    fill: #e7298a;\r\n}\r\n\r\n.metadata-swatch {\r\n    width: 30px;\r\n    height: 30px;\r\n    border-radius: 3px;\r\n    border: 2px solid #666;\r\n}\r\n\r\n.metadata-swatch-clickable:hover {\r\n    border: 2px solid #000;\r\n    cursor: pointer;\r\n}\r\n\r\n.dropdown-menu {\r\n    min-width: 40px;\r\n    padding: 5px;\r\n}\r\n\r\n.metadata-legend {\r\n    list-style: none;\r\n    margin-top: 10px;\r\n}\r\n\r\n.metadata-legend li {\r\n    float: left;\r\n    margin-right: 10px;\r\n}\r\n\r\n.metadata-legend span {\r\n    border: 2px solid #666;\r\n    float: left;\r\n    width: 30px;\r\n    height: 30px;\r\n}\r\n\r\n.metadata-legend .bl-avg {\r\n    background-color: #7fc97f;\r\n}\r\n\r\n.metadata-legend .avg {\r\n    background-color: #fdc086;\r\n}\r\n\r\n.metadata-legend .ab-avg {\r\n    background-color: #386cb0;\r\n}\r\n\r\n.network-edges {\r\n    fill-opacity: 0;\r\n    stroke-width: 2;\r\n}\r\n\r\n.network-background-edges {\r\n    fill-opacity: 0;\r\n    stroke-opacity: 0.25;\r\n    stroke: #737373;\r\n}\r\n\r\n.node text {\r\n    font: 12px sans-serif;\r\n}\r\n\r\n.node--internal text {\r\n    text-shadow: 0 1px 0 #fff, 0 -1px 0 #fff, 1px 0 0 #fff, -1px 0 0 #fff;\r\n}\r\n\r\n.link {\r\n    fill: none;\r\n    stroke: #636363;\r\n    stroke-width: 5px;\r\n}\r\n\r\n#active-network-name {\r\n    font-weight: bold;\r\n    color: #296292;\r\n}\r\n\r\n.active-level {\r\n    fill: #386cb0;\r\n}\r\n\r\n#dendrogram-panel {\r\n    position: initial;\r\n}\r\n\r\n#dendrogram-panel {\r\n    display: none\r\n}\r\n\r\n.show-dendrogram {\r\n    float: right;\r\n    border-radius: 3px;\r\n    border: 1px solid #D1D3D4;\r\n    font-weight: normal;\r\n}\r\n\r\n.show-dendrogram:hover {\r\n    background: #D1D3D4;\r\n}\r\n\r\n.dendrogram-text {\r\n    font-size: 10em !important;\r\n}\r\n\r\n.highlight-hierarchy {\r\n    fill: #252525;\r\n    stroke: #252525;\r\n    stroke-width: 10;\r\n    stroke-linejoin: round;\r\n    opacity: 0.3;\r\n}\r\n\r\n.animal-highlight {\r\n    fill: #c51b7d !important;\r\n}\r\n\r\n#dendrogram-buttons-div .btn span.glyphicon {\r\n    opacity: 0;\r\n}\r\n\r\n#dendrogram-buttons-div .btn.active span.glyphicon {\r\n    opacity: 1;\r\n}\r\n\r\n#dendrogram-buttons-div {\r\n    border: 2px solid #D1D3D4;\r\n    border-radius: 5px;\r\n}\r\n\r\n#dendrogram-legend {\r\n    margin-left: 20px;\r\n}\r\n\r\n.intersection {\r\n    fill: url(#striped) !important;\r\n    stroke: #67000d;\r\n}\r\n\r\n.sym-difference {\r\n    fill: url(#striped) !important;\r\n    stroke: #67000d;\r\n}\r\n\r\n.modal-lg {\r\n    max-width: 80%;\r\n}\r\n\r\n.background-image {\r\n    background: #fff;\r\n}",""]),e.exports=t},function(e,t,r){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r=e[1]||"",n=e[3];if(!n)return r;if(t&&"function"==typeof btoa){var a=(o=n,s=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(l," */")),i=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[r].concat(i).concat([a]).join("\n")}var o,s,l;return[r].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(r,"}"):r})).join("")},t.i=function(e,r,n){"string"==typeof e&&(e=[[null,e,""]]);var a={};if(n)for(var i=0;i<this.length;i++){var o=this[i][0];null!=o&&(a[o]=!0)}for(var s=0;s<e.length;s++){var l=[].concat(e[s]);n&&a[l[0]]||(r&&(l[2]?l[2]="".concat(r," and ").concat(l[2]):l[2]=r),t.push(l))}},t}},function(e,t,r){var n,a,i={},o=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===a&&(a=n.apply(this,arguments)),a}),s=function(e){return document.querySelector(e)},l=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var r=s.call(this,e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}}(),d=null,c=0,h=[],p=r(5);function u(e,t){for(var r=0;r<e.length;r++){var n=e[r],a=i[n.id];if(a){a.refs++;for(var o=0;o<a.parts.length;o++)a.parts[o](n.parts[o]);for(;o<n.parts.length;o++)a.parts.push(x(n.parts[o],t))}else{var s=[];for(o=0;o<n.parts.length;o++)s.push(x(n.parts[o],t));i[n.id]={id:n.id,refs:1,parts:s}}}}function m(e,t){for(var r=[],n={},a=0;a<e.length;a++){var i=e[a],o=t.base?i[0]+t.base:i[0],s={css:i[1],media:i[2],sourceMap:i[3]};n[o]?n[o].parts.push(s):r.push(n[o]={id:o,parts:[s]})}return r}function f(e,t){var r=l(e.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=h[h.length-1];if("top"===e.insertAt)n?n.nextSibling?r.insertBefore(t,n.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),h.push(t);else if("bottom"===e.insertAt)r.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var a=l(e.insertInto+" "+e.insertAt.before);r.insertBefore(t,a)}}function g(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=h.indexOf(e);t>=0&&h.splice(t,1)}function v(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),b(t,e.attrs),f(e,t),t}function b(e,t){Object.keys(t).forEach((function(r){e.setAttribute(r,t[r])}))}function x(e,t){var r,n,a,i;if(t.transform&&e.css){if(!(i=t.transform(e.css)))return function(){};e.css=i}if(t.singleton){var o=c++;r=d||(d=v(t)),n=w.bind(null,r,o,!1),a=w.bind(null,r,o,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",b(t,e.attrs),f(e,t),t}(t),n=C.bind(null,r,t),a=function(){g(r),r.href&&URL.revokeObjectURL(r.href)}):(r=v(t),n=$.bind(null,r),a=function(){g(r)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else a()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=o()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var r=m(e,t);return u(r,t),function(e){for(var n=[],a=0;a<r.length;a++){var o=r[a];(s=i[o.id]).refs--,n.push(s)}e&&u(m(e,t),t);for(a=0;a<n.length;a++){var s;if(0===(s=n[a]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete i[s.id]}}}};var y,k=(y=[],function(e,t){return y[e]=t,y.filter(Boolean).join("\n")});function w(e,t,r,n){var a=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=k(t,a);else{var i=document.createTextNode(a),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(i,o[t]):e.appendChild(i)}}function $(e,t){var r=t.css,n=t.media;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}function C(e,t,r){var n=r.css,a=r.sourceMap,i=void 0===t.convertToAbsoluteUrls&&a;(t.convertToAbsoluteUrls||i)&&(n=p(n)),a&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");var o=new Blob([n],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var r=t.protocol+"//"+t.host,n=r+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var a,i=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?e:(a=0===i.indexOf("//")?i:0===i.indexOf("/")?r+i:n+i.replace(/^\.\//,""),"url("+JSON.stringify(a)+")")}))}},function(e,t,r){"use strict";let n,a;r.r(t),r.d(t,"dataset",(function(){return K})),r.d(t,"datasetMetadata",(function(){return Q})),r.d(t,"swarmData",(function(){return ee})),r.d(t,"dataSetPercentile",(function(){return te})),r.d(t,"networkData",(function(){return re})),r.d(t,"networkHierarchy",(function(){return ne})),r.d(t,"animalIds",(function(){return ae})),r.d(t,"addToDataset",(function(){return ie})),r.d(t,"setDataSetPercentile",(function(){return oe})),r.d(t,"setMetaData",(function(){return se})),r.d(t,"setSwarmData",(function(){return le})),r.d(t,"setDatasetFeature",(function(){return de})),r.d(t,"setNetworkData",(function(){return ce})),r.d(t,"setHierarchyData",(function(){return he})),r.d(t,"setAnimalIds",(function(){return pe}));colorbrewer.BuYlBu;let i={};var o=r(0);let s=!0;function l(e){s="boolean"==typeof e&&e}function d(){l(!1),$("#play-button").removeClass("active"),$("#play-button").prop("disabled",!0),$("#play-icons").hide(),$("#play-loading").show()}function c(){l(!0),$("#play-button").addClass("active"),$("#play-button").prop("disabled",!1),$("#play-loading").hide(),$("#play-icons").show()}function h(e){let t=[.05,.25,.5,.75,.95],r=[];if(0===e.length)return 0;e.sort((function(e,t){return e-t}));for(let n=0;n<t.length;n++){let a=(e.length-1)*t[n],i=Math.floor(a),o=i+1,s=a%1;o>=e.length?r.push(e[i]):r.push(e[i]*(1-s)+e[o]*s)}return r}function p(){$(".draw-details").click((function(){$(this).find("input:checkbox").prop("checked")?new C(this,ee).disableLineChart():($(".trendChartData").hide(),$("#trendChartLegend").hide(),$("#lineChartLegend").show(),$(".lineChartButton").prop("checked",!0).prop("disabled",!1),$(".line-chart-check-box").attr("disabled",!1),$(".lineChartLine").attr("visibility","visible"))}))}String.prototype.hashCode=function(){var e,t=0;if(0===this.length)return t;for(e=0;e<this.length;e++)t=(t<<5)-t+this.charCodeAt(e),t|=0;return t},d3.selection.prototype.moveToBack=function(){return this.each((function(){var e=this.parentNode.firstChild;e&&this.parentNode.insertBefore(this,e)}))};let u,m,f,g,v={},b=1;class x{constructor(){this.indexTime=0,this.svgContainer=d3.select("#main-vis"),this.zoom=d3.zoom().scaleExtent([1,6]).on("zoom",()=>{d3.event.transform.x=Math.min(0,this.tankWidth*(d3.event.transform.k-1),Math.max(this.tankWidth*(1-d3.event.transform.k),d3.event.transform.x)),d3.event.transform.y=Math.min(0,this.tankHeight*(d3.event.transform.k-1),Math.max(this.tankHeight*(1-d3.event.transform.k),d3.event.transform.y)),this.zoomGroup.attr("transform",d3.event.transform),gXaxis.call(xAxis.scale(d3.event.transform.rescaleX(m))),gYaxis.call(yAxis.scale(d3.event.transform.rescaleY(f)))}),this.zoomGroup=this.svgContainer.append("svg:g"),this.tank=this.zoomGroup.append("svg:g").attr("class","tank").attr("transform",()=>"scale("+(parameters.inverted_x?-1:1)+","+(parameters.inverted_y?-1:1)+")"),this.activeScale="black",this.colorScale={type:"Linear",color:colorbrewer.BuYlBu},this.legendWidth=550,this.legendHeight=60,this.svgLegend=d3.select("#main-vis-legend-div").append("svg").attr("id","main-vis-legend").attr("width",this.legendWidth).attr("height",this.legendHeight),this.medoidAnimal=-1,this.activeAnimals=[],this.arrayAnimals=K.filter(e=>e.t===this.indexTime),this.id=$(".show-dendrogram.btn-primary").attr("data"),this.playBoolean=!0,this.hierarchyLevels={},this.hierarchyGroupStdev={},this.brush=d3.brush().extent([[0,0],[this.tankWidth,this.tankHeight]])}setIndexTime(e){"number"==typeof e&&this.indexTime<=ee.length?this.indexTime=e:this.indexTime=0}setActiveScale(e){this.activeScale=e}setActiveAnimals(e){this.activeAnimals=e}decIndexTime(){this.indexTime=this.indexTime-1}updateLineChart(){if(d3.select("#lineChartTimeLine")&&ee[Math.ceil(this.indexTime/b)]){let e=Math.ceil(this.indexTime/b);this.indexTime%25==0&&(d3.select("#convex_hull_areaLineValue").text(ee[e].convex_hull_area+"mm²"),d3.select("#speedLineValue").text(ee[e].speed+"mm/s"),d3.select("#accelerationLineValue").text(ee[e].acceleration+"mm/s²"),d3.select("#distance_centroidLineValue").text(ee[e].distance_centroid+"mm"),d3.select("#directionLineValue").text(ee[e].direction+"°"),d3.select("#polarisationLineValue").text(ee[e].polarisation)),d3.select("#lineChartTimeLine").attr("transform","translate("+g(e)+",0)")}}returnColorScale(){return"Linear"===this.colorScale.type?d3.scaleLinear().domain(te[this.activeScale]).range(this.colorScale.color):"Threshold"===this.colorScale.type?d3.scaleThreshold().domain(te[this.activeScale]).range(this.colorScale.color):void 0}initColorPicker(){d3.select(".colors-body").selectAll(".palette").data(d3.entries(colorbrewer)).enter().append("span").attr("class","palette").attr("title",e=>e.key).on("click",e=>{$(".palette").removeClass("selected"),$('.palette[title="'+e.key+'"]').addClass("selected"),this.colorScale.color=colorbrewer[e.key],this.changelegend(),$("#play-button").hasClass("active")||(this.decIndexTime(),this.draw())}).selectAll(".swatch").data(e=>e.value).enter().append("span").attr("class","swatch").style("background-color",e=>e),$('.palette[title="BuYlBu"]').addClass("selected")}changelegend(){let e,t;if($("#main-vis-legend-div").show(),"black"!==this.activeScale){var r=this.returnColorScale();e=this.svgLegend.selectAll("rect.legend").data(r.range()),t=this.svgLegend.selectAll("text.legend-text").data(r.domain())}else e=this.svgLegend.selectAll("rect.legend").data([]),t=this.svgLegend.selectAll("text.legend-text").data([]),$("#main-vis-legend-div").hide();e.style("fill",(function(e){return e})),e.enter().append("rect").attr("class","legend").attr("width",50).attr("height",20).attr("y",0).attr("x",(function(e,t){return 50+50*t+"px"})).style("fill",(function(e){return e})),e.exit().remove(),t.text((function(e){return Math.ceil(2*e)/2})),t.enter().append("text").attr("class","legend-text").attr("y",40).attr("x",(function(e,t){return 50+50*t+5+"px"})).text((function(e){return Math.ceil(2*e)/2})),t.exit().remove()}draw(){let e=$('input[type="radio"].group-playback-rate:checked').val(),t=$('input[type="radio"].group-size:checked').val();this.arrayAnimals=K.filter(e=>e.t===this.indexTime),setTimeout(()=>{var e;this.drawDendrogram(),this.svgContainer.select(".frame-text").text(Math.floor(this.indexTime/1500)%60+":"+Math.floor(this.indexTime/parameters.fps)%60+"::"+this.indexTime%parameters.fps),this.indexTime%parameters.fps==0&&(e=this.indexTime,n.slider("value",e));let r,s=this.tank.selectAll("g.animal").data(this.arrayAnimals);if(this.indexTime in re){let e=re[this.indexTime];if(E={},e=e.map(e=>{let t=this.arrayAnimals.filter((function(t){return t.a===e.s}))[0],r=this.arrayAnimals.filter((function(t){return t.a===e.e}))[0];return{node1:t.a,node2:r.a,start:t.p,end:r.p,val:e.v}}),e.forEach((function(e){$("#mc-"+e.node1+"-"+e.node2).css("fill",P(e.val)),$("#mc-"+e.node2+"-"+e.node1).css("fill",P(e.val))})),N){let t=[];for(let r=0;r<e.length;r++)t.push(e[r].val);V(function(e){if(0===e.length)return 0;e.sort((function(e,t){return e-t}));let t=.05*(e.length-1),r=Math.floor(t),n=r+1,a=t%1;return n>=e.length?1-e[r]:1-(e[r]*(1-a)+e[n]*a)}(t))}e=e.filter((function(e){return e.val<=1-U})),r=this.tank.select("#network-group").selectAll("line.network-edges").data(e),r.attr("x1",(function(e){return e.start[0]})).attr("y1",(function(e){return-e.start[1]})).attr("x2",(function(e){return e.end[0]})).attr("y2",(function(e){return-e.end[1]})).attr("stroke",(function(e){return P(1-e.val)})).attr("stroke-opacity",(function(e){return 1-e.val})),r.enter().append("line").attr("class","network-edges").attr("x1",(function(e){return e.start[0]})).attr("y1",(function(e){return-e.start[1]})).attr("x2",(function(e){return e.end[0]})).attr("y2",(function(e){return-e.end[1]})).attr("stroke",(function(e){return P(e.val)})).attr("stroke-opacity",(function(e){return e.val}))}else r=this.tank.selectAll("line.network-edges").data([]);var l,d;r.exit().remove(),$("#draw-triangulation").is(":checked")?((l=this.tank.select("#delaunay-triangulation-group").selectAll("path.delaunay-triangulation").data([ee[this.indexTime].triangulation])).attr("d",e=>e),l.enter().append("path").attr("class","delaunay-triangulation").attr("d",e=>e)):l=this.tank.selectAll("path.delaunay-triangulation").data([]),l.exit().remove(),$("#draw-voronoi").is(":checked")?((d="voronoi"in ee[0]?this.tank.select("#vornoi-group").selectAll("path.voronoi").data(ee[this.indexTime].voronoi.split(";")):this.tank.select("#vornoi-group").selectAll("path.voronoi").data([ee[this.indexTime].voronoi])).attr("d",e=>e),d.enter().append("path").attr("class","voronoi").attr("d",e=>e)):d=this.tank.select("#vornoi-group").selectAll("path.voronoi").data([]),d.exit().remove();let c=s.enter().append("g").attr("class","animal").attr("id",e=>"animal-"+e.a);if(c.append("circle").attr("r",1.5*t).attr("cx",e=>e.p[0]).attr("cy",e=>-e.p[1]).on("mouseover",e=>{!function(e){for(let t=0;t<Q.length;t++)e.a===Q[t].animal_id&&(a.style("left",d3.event.pageX+5+"px").style("top",d3.event.pageY-100+"px").style("opacity",1),a.select("#tooltip-animal-id").html(Q[t].animal_id),a.select("#tooltip-species").html(Q[t].species),a.select("#tooltip-sex").html(Q[t].sex),a.select("#tooltip-size").html(Q[t].size),a.select("#tooltip-weight").html(Q[t].weight))}(e)}).on("mouseout",()=>{a.transition().duration(500).style("opacity",0)}).on("click",e=>{this.activeAnimals.includes(e.a)?this.activeAnimals=this.activeAnimals.filter(t=>t!==e.a):this.activeAnimals.push(e.a),$("#play-button").hasClass("active")||(this.indexTime--,this.draw())}),s.select("circle").attr("cx",e=>e.p[0]).attr("cy",e=>-e.p[1]).attr("r",t),c.append("svg:defs").append("svg:marker").attr("id",e=>"arrow-marker-"+e.a).attr("refX",2).attr("refY",6).attr("markerWidth",13).attr("markerHeight",13).attr("orient","auto").append("svg:path").attr("d","M2,2 L2,11 L10,6 L2,2"),c.append("line").attr("class","arrow").attr("marker-end",e=>"url(#arrow-marker-"+e.a+")"),$("#draw-direction").is(":checked")?s.select("line").attr("x1",e=>e.p[0]).attr("y1",e=>-e.p[1]).attr("x2",e=>e.p[0]+2*t).attr("y2",e=>-e.p[1]).attr("transform",e=>"rotate("+-e.direction+" "+e.p[0]+" "+-e.p[1]+")"):$(".arrow").hide(),s.exit().remove(),$("#draw-convex-hull").is(":checked")){var h=this.tank.selectAll("path.hull-path").data([ee[this.indexTime].convex_hull]);h.attr("d",e=>e),h.enter().append("path").attr("class","hull-path").attr("d",e=>e)}else h=this.tank.select("path.hull-path").data([]);if(h.exit().remove(),"black"!==this.activeScale){var p=this.returnColorScale();s.transition().duration(10).style("fill",e=>p(e[this.activeScale])).attr("stroke",e=>p(e[this.activeScale]))}else s.style("fill","#000").attr("stroke","#000"),$.isEmptyObject(i)||Object.keys(i).forEach((function(e){d3.select("#animal-"+e).style("fill",i[e]).attr("stroke",i[e])}));this.activeAnimals.length?(s.style("opacity",e=>this.activeAnimals.includes(e.a)?1:.25),$("#remove-active-selected-button").is(":disabled")&&($("#remove-active-selected-button").prop("disabled",!1),$("#visual-parameter-button").prop("disabled",!1)),o.trackingBoolean&&Object(o.addTrackedData)(this.arrayAnimals[0].t,this.activeAnimals)):($("#remove-active-selected-button").is(":disabled")||($("#remove-active-selected-button").prop("disabled",!0),$("#visual-parameter-button").prop("disabled",!0)),s.style("opacity",1)),d3.select(".centroid").attr("cx",()=>"centroid"in ee[0]?ee[this.indexTime].centroid[0]:0).attr("cy",()=>"centroid"in ee[0]?-ee[this.indexTime].centroid[1]:0),$("#draw-direction").is(":checked")&&ee[this.indexTime].centroid&&$("#draw-centroid").is(":checked")?(d3.select("#centroid-line").classed("hidden",!1),d3.select("#centroid-line").attr("x1",()=>ee[this.indexTime].centroid[0]).attr("y1",()=>-ee[this.indexTime].centroid[1]).attr("x2",()=>ee[this.indexTime].centroid[0]+2*t).attr("y2",()=>-ee[this.indexTime].centroid[1]).attr("transform",()=>"rotate("+-ee[this.indexTime].direction+" "+ee[this.indexTime].centroid[0]+" "+-ee[this.indexTime].centroid[1]+")")):d3.select("#centroid-line").attr("class","hidden"),-1!==this.medoidAnimal&&(d3.selectAll("#animal-"+this.medoidAnimal).classed("medoid",!1),this.medoidAnimal=ee[this.indexTime].medoid,d3.selectAll("#animal-"+this.medoidAnimal).classed("medoid",!0)),this.indexTime++,this.updateLineChart(),this.indexTime>=ee.length?(this.indexTime=0,this.draw()):this.playBoolean&&this.draw()},e)}click(e){setActiveAnimals(e.data.name),$("#play-button").hasClass("active")||(this.decIndexTime(),this.draw())}sethierarchyGroupStdev(e,t){e in this.hierarchyGroupStdev?this.hierarchyGroupStdev[e].push(t):this.hierarchyGroupStdev[e]=[t]}resethierarchyGroupStdev(){this.hierarchyGroupStdev={}}getHierarchyLevel(e,t){let r=[],n=this.hierarchyLevels["h"+t],a=e.children;for(let t=1;t<e.height;t++){if(a[0]&&a[0].depth===n){a.forEach((function(e){void 0!==e.data.name&&r.push(e.data.name)}));break}let e=[];a.forEach((function(t){void 0!==t.children&&(e=e.concat(t.children))})),a=e}return r}setHierarchyLevel(e,t){this.hierarchyLevels["h"+e]=t}removeHierarchyLevel(e){delete this.hierarchyLevels["h"+e]}updateDendrogram(){let e=$(".show-dendrogram.btn-primary").attr("data"),t=$(".show-dendrogram.btn-primary").attr("name");$("#dendrogram-panel-name").text(t),$("#dendrogram-panel-level-slider").val(this.hierarchyLevels["h"+e]),$("#dendrogram-panel-level-text").text(this.hierarchyLevels["h"+e])}getHierarchyVertices(e){let t=[];return e.forEach(e=>{let r=[];for(let t=0;t<e.length;t++){let n=this.arrayAnimals.find(r=>r.a===e[t]);n&&r.push([n.p[0],-n.p[1]])}r.length>=3&&t.push(d3.polygonHull(r))}),t}drawHierarchy(){let e=Object.keys(ne).map((function(e){return e.replace("h","")})),t=[];for(let r=0;r<e.length;r++){let n=ne["h"+e[r]][this.indexTime],a=d3.hierarchy(n,(function(e){return e.children})),i=20,o=5e3,s=5e3;a=d3.tree().size([s-10*i,o-10*i])(a);let l=a.children[0];G===e[r]&&(networkHierarchyIds=this.getHierarchyLevel(l,e[r])),t.push(this.getHierarchyVertices(this.getHierarchyLevel(l,e[r])))}t.length;let r=d3.select(".tank").selectAll("g.hierarchy-group").data(t);r.enter().append("g").attr("class",(function(t,r){return"hierarchy-group h"+e[r]})).style("fill",(function(t,r){return z["h"+e[r]]})).attr("stroke",(function(t,r){return z["h"+e[r]]})).moveToBack(),r.attr("class",(function(t,r){return"hierarchy-group h"+e[r]})),r.exit().remove();let n=r.selectAll("path.hierarchy-hull-path").data((function(e){return e}));n.enter().append("path").attr("class","hierarchy-hull-path").attr("d",(function(e){return"M"+e.join("L")+"Z"})),n.attr("d",(function(e){return"M"+e.join("L")+"Z"})),n.exit().remove()}drawDendrogram(){var e=t=>{t.children&&t.depth<=2?(t._children=t.children,t._children.forEach(e)):t.children=0};let t=$(".show-dendrogram.btn-primary").attr("data");if(!$.isEmptyObject(ne)&&t){let n=ne["h"+t][this.indexTime],a=d3.hierarchy(n,(function(e){return e.children}));a=a.children[0],a.children.forEach(e);let i=20,o=5e3,s=5e3;if(a=d3.tree().size([s-10*i,o-10*i])(a),$(".show-dendrogram.btn-primary").length){$("#dendrogram-panel-level-slider").slider("option","max",a.height-1).slider("value",this.hierarchyLevels["h"+t]);let e=this.zoomGroup.selectAll("path.link").data(a.descendants().slice(1));e.enter().append("path").attr("class","link").attr("d",H),e.attr("d",H),e.exit().remove();let n=this.zoomGroup.selectAll(".node").data(a.descendants());var r=n.enter().append("g").attr("class",(function(e){return"node"+(e.children?" node--internal":" node--leaf")})).attr("transform",(function(e){return"translate("+e.x+","+e.y+")"}));r.append("circle").attr("r",e=>e.depth===this.hierarchyLevels["h"+t]?40+e.data.name.length:20+e.data.name.length).attr("class",e=>{if(e.depth===this.hierarchyLevels["h"+t])return"active-level"}).attr("id",e=>"h"+e.data.name.toString().hashCode()).on("click",this.click).on("mouseover",(function(e){tooltipDiv.style("left",d3.event.pageX+5+"px").style("top",d3.event.pageY+5+"px").style("opacity",1),tooltipDiv.select(".tooltip-span").html(e.data.name.toString()),addHighlightSpatialView(e.data.name)})).on("mouseout",(function(){tooltipDiv.transition().duration(500).style("opacity",0),removeHighlightSpatialView()})),r.append("text").attr("class","dendrogram-text").attr("x",150).attr("y",-150).text(e=>e.data.name.length),r.attr("transform",e=>"translate("+e.x+","+e.y+")"),n.attr("transform",e=>"translate("+e.x+","+e.y+")").select("circle").attr("r",e=>e.depth===this.hierarchyLevels["h"+t]?40+e.data.name.length:20+e.data.name.length).attr("class",e=>e.depth===this.hierarchyLevels["h"+t]?"active-level":"").attr("id",e=>"h"+e.data.name.toString().hashCode()),n.select("text").text(e=>e.data.name.length),n.exit().remove(),Object.keys(this.hierarchyGroupStdev).length?(console.log("runs"),"none"==$("#dendrogram-legend").css("display")&&$("#dendrogram-legend").show(),setTimeout(()=>{n.select("circle").style("fill",(function(e){return"h"+e.data.name.toString().hashCode()in E?standardDeviationColorScale(standardDeviation(E["h"+e.data.name.toString().hashCode()])):e.depth!==(void 0)["h"+this.id]?"":"#000"}))},250)):"none"!==$("#dendrogram-legend").css("display")&&$("#dendrogram-legend").hide()}}$.isEmptyObject(ne)||this.drawHierarchy()}}class y extends x{constructor(e){super(e),this.spatialViewInit()}cp_listener(){$("#play-button").click(()=>{!0===$("#play-button").hasClass("active")?(this.playBoolean=!1,$(".mdi-pause").hide(),$(".mdi-play").show()):(this.playBoolean=!0,$(".mdi-play").hide(),$(".mdi-pause").show(),this.setIndexTime(n.slider("value")),$(".brush").remove(),this.draw())}),$("#next-frame-button").click(()=>{!0===$("#play-button").hasClass("active")&&(this.playBoolean=!1),$("#play-button").removeClass("active"),this.draw()}),$("#brushing-button").click(()=>{this.playBoolean=!1,$("#play-button").removeClass("active"),$("#brushing-button").hasClass("active")?$(".brush").remove():(this.brush=d3.brush().extent([[0,0],[this.tankWidth,this.tankHeight]]).on("end",()=>{var e=d3.event.selection;this.activeAnimals=[],this.arrayAnimals.map(t=>{var r=[t.p[0],t.p[1]];e[0][0]<=r[0]&&r[0]<=e[1][0]&&e[0][1]<=r[1]&&r[1]<=e[1][1]&&this.activeAnimals.push(t.a)}),console.log(this.activeAnimals),$("#play-button").hasClass("active"),$("#brushing-button").removeClass("active"),$(".brush").remove()}),d3.select("#main-vis-svg").append("g").attr("class","brush").call(this.brush))}),$("#remove-active-selected-button").click(()=>{$("#remove-active-selected-button").is(":disabled")||($("#remove-active-selected-button").prop("disabled",!0),this.setActiveAnimals([]),resetTrackedData(),$("#visual-parameter-button").prop("disabled",!0).removeClass("active"),$("#play-button").hasClass("active")||(this.decIndexTime(),this.draw()))}),$("#visual-parameter-button").click(()=>{!0===$("#visual-parameter-button").hasClass("active")?setTrackingBoolean(!1):setTrackingBoolean(!0)}),$("#calculate-parameter-button").click(()=>{$("#calculate-parameter-button").hasClass("active")||(setTrackingBoolean(!1),sendTrackedData(),$("#calculate-parameter-button").prop("disabled",!0),$("#calculate-parameter-button").removeClass("active"),$("#visual-parameter-button").removeClass("active"))}),$("#background-color").change(()=>{let e=$('input[type="radio"].group-background:checked').val();$("#main-vis-svg").css("background-color",e)}),$("#draw-axis").on("change",()=>{this.checked?($("#main-vis g.x.axis").show(),$("#main-vis g.y.axis").show()):($("#main-vis g.x.axis").hide(),$("#main-vis g.y.axis").hide())}),$("#draw-time").on("change",()=>{this.checked?$("#main-vis .frame-text").show():$("#main-vis .frame-text").hide()}),$("#network-background").on("change",()=>{this.checked?setNetworkBackground(!0):setNetworkBackground(!1)}),$("#network-background-limit").val(1),$("#network-background-limit").on("change",()=>{let e=$(this).val();$.isNumeric(e)&&e>0?setNetworkBackgroundLimit(e):$(this).val(1)}),$("#color-scale-radio-form input").on("change",()=>{this.colorScale.type=$("input[name=color-scale-radio]:checked","#color-scale-radio-form").val(),$("#play-button").hasClass("active")||(this.decIndexTime(),this.draw())})}sf_listeners(){$("#draw-direction").click(()=>{$("#draw-direction").is(":checked")?("direction"in K[0]||(d(),Z("direction")),$(".arrow").show()):$(".arrow").hide(),$("#play-button").hasClass("active")||this.decIndexTime()}),$("#draw-medoid").click(()=>{$("#draw-medoid").is(":checked")?("medoid"in ee[0]||q("medoid"),this.setMedoidAnimal(ee[this.indexTime].medoid),d3.selectAll("#animal-"+this.medoidAnimal).classed("medoid",!0)):(d3.selectAll("#animal-"+this.medoidAnimal).classed("medoid",!1),this.setMedoidAnimal(-1))}),$("#draw-centroid").click(()=>{$("#draw-centroid").is(":checked")?("centroid"in ee[0]||q("centroid"),$("#g-centroid").show()):$("#g-centroid").hide()}),$("#draw-convex-hull").click(()=>{$("#draw-convex-hull").is(":checked")&&("hull"in ee[0]||q("convex_hull"))}),$("#draw-triangulation").click(()=>{$("#draw-triangulation").is(":checked")&&("triangulation"in ee[0]||q("triangulation"),$("#play-button").hasClass("active")||this.decIndexTime())}),$("#draw-voronoi").click(()=>{$("#draw-voronoi").is(":checked")&&("voronoi"in ee[0]||q("voronoi"),$("#play-button").hasClass("active")||this.decIndexTime())})}af_listeners(){$("#draw-speed").click(()=>{$(".draw-details").hide().find("input:checkbox").prop("checked",!0).click(),$("#draw-speed").is(":checked")?("speed"in K[0]||(d(),Z("speed")),$("#draw-speed-details").show(),$("#draw-acceleration").prop("checked",!1),$("#draw-distance_centroid").prop("checked",!1),$("#draw-midline_offset").prop("checked",!1),this.setActiveScale("speed")):($("#draw-speed-details").hide(),this.setActiveScale("black")),d3.selectAll(".colorLegend *").remove(),this.changelegend(),$("#play-button").hasClass("active")||this.decIndexTime()}),$("#draw-acceleration").click(()=>{$(".draw-details").hide().find("input:checkbox").prop("checked",!0).click(),$("#draw-acceleration").is(":checked")?("acceleration"in K[0]||(d(),Z("acceleration")),$("#draw-acceleration-details").show(),$("#draw-speed").prop("checked",!1),$("#draw-distance_centroid").prop("checked",!1),$("#draw-midline_offset").prop("checked",!1),this.setActiveScale("acceleration")):($("#draw-acceleration-details").hide(),this.setActiveScale("black")),$(".draw-details.active").click(),d3.selectAll(".colorLegend *").remove(),this.changelegend(),$("#play-button").hasClass("active")||this.decIndexTime()}),$("#draw-distance_centroid").click(()=>{$(".draw-details").hide().find("input:checkbox").prop("checked",!0).click(),$("#draw-distance_centroid").is(":checked")?(console.log("checked"),"distance_centroid"in K[0]||(d(),Z("distance_centroid")),console.log(K),$("#draw-distance_centroid-details").show(),$("#draw-speed").prop("checked",!1),$("#draw-acceleration").prop("checked",!1),$("#draw-midline_offset").prop("checked",!1),this.setActiveScale("distance_centroid")):(console.log("black"),$("#draw-distance_centroid-details").hide(),this.setActiveScale("black")),$(".draw-details.active").click(),d3.selectAll(".colorLegend *").remove(),this.changelegend(),$("#play-button").hasClass("active")||this.decIndexTime()}),$("#draw-midline_offset").click(()=>{$(".draw-details").hide().find("input:checkbox").prop("checked",!0).click(),$("#draw-midline_offset").is(":checked")?("draw-midline_offset"in K[0]||(d(),Z("midline_offset")),$("#draw-midline_offset-details").show(),$("#draw-speed").prop("checked",!1),$("#draw-acceleration").prop("checked",!1),$("#draw-distance_centroid").prop("checked",!1),T("midline_offset")):T("black"),$(".draw-details.active").click(),d3.selectAll(".colorLegend *").remove(),this.changelegend(),$("#play-button").hasClass("active")||(this.decIndexTime(),this.draw())})}md_listeners(){$(".metadata-swatch.metadata-swatch-clickable").click((function(){let e=$(this).attr("value"),t=$(this).css("background-color");$("#metadata-row-"+e+" #preview").css("background-color",t),"rgb(255, 255, 255)"===t?i[e]&&delete i[e]:i[e]=t})),$("#group-metadata :input").change((function(){resetIndividualMetadata();let e=$(this).attr("value"),t=[];if("sex"===e){$("#metadata-div").modal("toggle");for(let r=0;r<Q.length;r++)t.push(Q[r][e].toLowerCase());t=Array.from(new Set(t));let r=["#7fc97f","#386cb0"];for(let n=0;n<Q.length;n++)for(let a=0;a<t.length;a++)Q[n][e].toLowerCase()===t[a]&&(i[Q[n].animal_id]=r[a]);$("#metadata-input").hide()}else{$("#metadata-input").show();for(let r=0;r<Q.length;r++)t.push(Q[r][e]);let r=d3.quantile(t,.25),n=d3.quantile(t,.75);$("#bl-avg").val(r),$("#ab-avg").val(n),colorMetadata()}})),$(".number-spinner button").click((function(){let e=$(this),t=e.closest(".number-spinner").find("input").val().trim(),r=0;r="up"==e.attr("data-dir")?parseFloat(t)+.1:t>0?parseFloat(t)-.1:0,r=Math.round(100*r)/100,e.closest(".number-spinner").find("input").val(r),colorMetadata()})),$(".number-spinner input").on("input",(function(){colorMetadata()})),$("#metadata-reset").click((function(){$("#metadata-input").hide(),resetIndividualMetadata()}))}initShowDendrogramListener(e){$("#show-dendrogram-"+e).click((function(){let e=$(this).attr("id");$(".show-dendrogram").each((function(t,r){$(r).attr("id")===e&&!1===$(r).hasClass("btn-primary")?($(r).addClass("btn-primary"),$(r).find("#btn-left").hide(),$(r).find("#btn-right").show()):($(r).removeClass("btn-primary"),$(r).find("#btn-left").show(),$(r).find("#btn-right").hide())})),$(".show-dendrogram.btn-primary").length?$("#dendrogram-panel").show():$("#dendrogram-panel").hide(),$("#play-button").hasClass("active")||(this.decIndexTime(),this.draw(),this.drawDendrogram())}))}h_listeners(){$(".hiearchy-checkbox").on("change",()=>{let e=$(".hiearchy-checkbox"),t=e.attr("data"),r=e.attr("name");if(e.prop("checked")&&$(".show-dendrogram").length<D)d(),n=t,$.ajax({url:"/api/dataset/network/hierarchy/"+parameters.id+"/"+n,dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:Y},success:function(e){e.length&&he(JSON.parse(e[0].hierarchy),n),c()}}),function(e,t){$(".show-dendrogram").length<D&&($("#dendrogram-buttons-div").append('<button type="button" id="show-dendrogram-'+e+'" data='+e+" name="+t+' class="show-dendrogram btn btn-block" data-toggle="button" aria-pressed="false" autocomplete="off"> <span class="btn-label" id="btn-left"> <i class="mdi mdi-arrow-collapse-left"></i>&nbsp&nbsp Show '+t+'</span><span class="btn-label" id="btn-right"> <i class="mdi mdi-arrow-collapse-right"></i>&nbsp&nbsp Hide '+t+" </span></button> <br>"),$("#show-dendrogram-"+e).find("#btn-right").hide())}(t,r),this.initShowDendrogramListener(t),$("#dendrogram-buttons-div").show();else{let e=$("#show-dendrogram-"+t).hasClass("btn-primary");he({},t),function(e){$("#show-dendrogram-"+e).next().remove(),$("#show-dendrogram-"+e).remove()}(t),d3.select("g.h"+t).remove(),!0===e&&$("#dendrogram-panel").hide(),0===$(".show-dendrogram").length&&$("#dendrogram-buttons-div").hide()}var n;$(".show-dendrogram").length?($("#main-vis-div").removeClass("col-md-12"),$("#main-vis-div").addClass("col-md-8")):($("#main-vis-div").removeClass("col-md-8"),$("#main-vis-div").addClass("col-md-12"))}),$(".network-hierarchy-checkbox").on("change",()=>{let e=$(this);$(".network-hierarchy-checkbox").prop("checked",!1),e.prop("checked",!0),e.prop("checked")?setNetworkHierarchy(e.attr("data")):setNetworkHierarchy(void 0)})}n_listeners(){$("#networks-modal-body button").click((function(){let e=$(this).attr("data");$("#active-network-name").text($(this).attr("name")),d(),function(e){$.ajax({url:"/api/dataset/network/"+parameters.id+"/"+e,dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:Y},success:function(e){e.length&&ce(JSON.parse(e[0].data)),c()}}),t=e,W=t;var t}(e),setnetworkColor(e),$("#network-div").modal("toggle")})),$("#network-remove").click((function(){ce({}),setNetworkID(-1),setnetworkColor(-1),$("#active-network-name").text("")})),$("#network-auto-suggest").click((function(){if($("#network-auto-suggest").hasClass("active")){$("#network-limit-p").show(),$("#network-slider").show(),setNetworkAuto(!1);let e=$("#network-slider").slider("value");V(e),$("#network-limit").val(e)}else $("#network-limit-p").hide(),$("#network-slider").hide(),setNetworkAuto(!0)}))}spatialViewInit(){let e=parameters.min.geometry.coordinates,t=parameters.max.geometry.coordinates;this.tankWidth=1.02*(t[0]-e[0]),this.tankHeight=1.02*(t[1]-e[1]);let r=d3.scaleLinear().domain([e[0],t[0]]).range([e[0],t[0]]),i=d3.axisBottom(r).ticks(10).tickSize(10).tickPadding(5),o=d3.scaleLinear().domain([e[1],t[1]]).range([e[1],t[1]]),s=d3.axisRight(o).ticks(7).tickSize(10).tickPadding(5),l=d3.zoom().scaleExtent([1,6]).on("zoom",()=>{d3.event.transform.x=Math.min(0,this.tankWidth*(d3.event.transform.k-1),Math.max(this.tankWidth*(1-d3.event.transform.k),d3.event.transform.x)),d3.event.transform.y=Math.min(0,this.tankHeight*(d3.event.transform.k-1),Math.max(this.tankHeight*(1-d3.event.transform.k),d3.event.transform.y)),this.zoomGroup.attr("transform",d3.event.transform),c.call(i.scale(d3.event.transform.rescaleX(r))),h.call(s.scale(d3.event.transform.rescaleY(o)))});this.svgContainer=d3.select("#main-vis").classed("svg-container",!0).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 "+this.tankWidth+" "+this.tankHeight).classed("svg-content",!0).attr("id","main-vis-svg").call(l);let d=Math.ceil(this.tankHeight/this.tankWidth*100);$("#main-vis").append($("<style>#main-vis::after {padding-top: "+d+'%;display: block;content: "";}</style> ')),this.zoomGroup=this.svgContainer.append("svg:g"),parameters.background_image&&this.zoomGroup.append("image").attr("xlink:href","/"+parameters.background_image).attr("class","background-image").attr("height",this.tankHeight).attr("width",this.tankWidth).attr("x","0").attr("y","0"),this.tank=this.zoomGroup.append("svg:g").attr("class","tank").attr("transform",()=>"scale("+(parameters.inverted_x?-1:1)+","+(parameters.inverted_y?-1:1)+")"),this.tank.append("g").attr("id","g-centroid").append("circle").attr("class","centroid").attr("r",6).attr("cx",0).attr("cy",0),this.tank.select("#g-centroid").append("svg:defs").append("svg:marker").attr("id","centroid-arrow").attr("refX",2).attr("refY",6).attr("markerWidth",13).attr("markerHeight",13).attr("orient","auto").append("svg:path").attr("d","M2,2 L2,11 L10,6 L2,2"),this.tank.select("#g-centroid").append("line").attr("id","centroid-line").attr("marker-end","url(#centroid-arrow)"),this.tank.append("g").attr("id","network-group"),this.tank.append("g").attr("id","delaunay-triangulation-group"),this.tank.append("g").attr("id","vornoi-group"),this.svgContainer.append("text").attr("class","frame-text").attr("x",30).attr("y",30).text("-- : -- : -- ");let c=this.svgContainer.append("g").attr("class","x axis").call(i),h=this.svgContainer.append("g").attr("class","y axis").call(s);a=d3.select("div.tooltip").style("left","0px").style("top","0px").on("mouseover",(function(){a.style("opacity",1)})),function(){n=$("#slider").slider({min:0,max:ee.length,step:25,slide:function(e,t){(void 0)(t.value),$("#play-button").hasClass("active")||(void 0)()}}),$("#network-slider").slider({range:"max",min:0,max:1,step:.01,value:.5,slide:function(e,t){V(t.value),$("#network-limit").val(t.value)}}),$("#network-limit").val(.5);let e=n.slider("option","max"),t=100/e;for(let r=0;r<e;r+=1500)$('<span class="ui-slider-tick"></span>').css("left",t*r+"%").appendTo(n)}(),this.initColorPicker();new w(ee);this.cp_listener(),this.sf_listeners(),this.af_listeners(),this.md_listeners(),this.n_listeners(),this.h_listeners();var p,u;new B;p=this.tankHeight,u=this.tankWidth,$((function(){$("#main-vis").draggable({containment:"parent"}).resizable({aspectRatio:!0,maxWidth:$("#main-vis-div").width()}).height(.6*p).width(.6*u)})),$("input[type=checkbox]").prop("checked",!1),$("#color-scale-linear").prop("checked",!0),$("#group-size-m").prop("checked",!0),$("#background-white").prop("checked",!0),$("#settings-div input[type=checkbox]").prop("checked",!0),$("#loading").hide(),$("#play-loading").hide(),$(".mdi-play").hide(),$("#metadata-input").hide(),$("#dendrogram-buttons-div").hide(),$("#g-centroid").hide(),$("#line-chart-feature-checkboxes input[type=checkbox]").prop("checked",!0),this.draw()}setMedoidAnimal(e){this.medoidAnimal=e}}class k extends x{constructor(e){super(),this.swarmData=e,this.swarm_features=Object.keys(this.swarmData[0]),this.lineChartWidth=5e3,this.trendChartsElem=["lower-outer-area","lower-inner-area","median-line","upper-inner-area","upper-outer-area"]}}class w extends k{constructor(e){super(e),this.lineChart()}lineChart(){b=Math.ceil(this.swarmData.length/this.lineChartWidth);let e=100,t=10,r=this.swarm_features,n=r.indexOf("time");r.splice(n,1);let a=[];if(this.swarmData.length>this.lineChartWidth){let e=new Array(r.length).fill(0);for(let t=0;t<this.swarmData.length;t++){for(let n=0;n<r.length;n++)e[n]+=this.swarmData[t][r[n]];if(t%b==0){let n={time:t/b};for(let t=0;t<r.length;t++)e[t]=e[t]/b,n[r[t]]=e[t];a.push(n),e=new Array(r.length).fill(0)}}}else a=this.swarmData;g=d3.scaleLinear().domain([0,a.length]).range([0,this.lineChartWidth]),m=d3.scaleLinear().domain([0,a.length]).range([0,this.lineChartWidth]);let i=d3.scaleLinear().domain([0,a.length]).range([0,this.lineChartWidth]),o=d3.axisBottom(m).ticks(10).tickSize(10).tickPadding(5).tickFormat((function(e){return Math.floor(e*b/1500)%60+":"+Math.floor(e*b/parameters.fps)%60+"::"+e*b%parameters.fps}));f=d3.scaleLinear().domain([0,100]).range([500,0]);let s=d3.axisLeft(f).ticks(0).tickSize(10).tickPadding(5),l=()=>{let e=d3.mouse(this);if(e[0]<t||e[0]>this.lineChartWidth||e[1]<0||e[1]>500)return;let r=d3.scaleLinear().domain(g.range()).range(g.domain());this.setIndexTime(Math.floor(r(e[0]-t)*b))},d=d3.zoom().scaleExtent([1,20]).translateExtent([[0,0],[this.lineChartWidth,500]]).extent([[0,0],[this.lineChartWidth,500]]).on("zoom",()=>{let e=d3.event.transform;g=m.domain(e.rescaleX(i).domain());for(let e in x)x.hasOwnProperty(e)&&u.select("#"+e+"Line").attr("d",x[e]);for(let e in v)if(v.hasOwnProperty(e))for(let t=0;t<this.trendChartsElem.length;t++)u.select("#"+e+"TrendChart ."+this.trendChartsElem[t]).attr("d",v[e][this.trendChartsElem[t]]);h.call(o)}),c=d3.select("#swarm-vis").classed("svg-line-chart-container",!0).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 "+this.lineChartWidth+" "+(500+e)).classed("svg-content",!0);u=c.append("svg:g").attr("id","lineChartZoom").attr("transform","translate("+t+",0)");let h=u.append("g").attr("class","x axis-line-chart").attr("transform","translate(0,500)").call(o);u.append("g").attr("class","y axis-line-chart").call(s),u.append("line").attr("class","time-line").attr("id","lineChartTimeLine").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",500);let p=d3.scaleOrdinal(d3.schemeCategory10),x={};for(let e=0;e<r.length;e++){let t=d3.min(a,(function(t){return t[r[e]]})),n=d3.max(a,(function(t){return t[r[e]]})),i=d3.scaleLinear().domain([t,n]).range([0,100]),o=d3.line().x((function(e){return m(e.time)})).y((function(t){return f(i(t[r[e]]))}));x[r[e]]=o,u.append("path").data([a]).attr("id",r[e]+"Line").attr("class","line lineChartLine").style("stroke",p(e)).attr("d",o).attr("name",r[e])}$("#lineChartTimeLine").appendTo("#lineChartZoom"),u.append("rect").attr("class","zoom").attr("width",this.lineChartWidth).attr("height",500).call(d).on("click",l).call(d3.drag().on("drag",l));let y=d3.selectAll(".line");c.append("g").attr("id","lineChartLegend").attr("transform","translate("+e+",550)").selectAll("rect.legend").data(y._groups[0]).enter().each((function(e,t){d3.select(this).append("rect").attr("class","legend").attr("width",100).attr("height",50).attr("x",600*t+"px").style("fill",e.style.stroke),d3.select(this).append("text").attr("id",e.attributes.id.value+"LegendTitle").attr("class","line-chart-legend-text").attr("y",40).attr("x",600*t+100+10+"px").text(e.attributes.name.value+": "),d3.select(this).append("text").attr("id",e.attributes.id.value+"Value").attr("class","line-chart-legend-text").attr("y",40).attr("x",600*t+100+d3.select("#"+e.attributes.id.value+"LegendTitle").node().getComputedTextLength()+10+"px").text("0.0")})),c.append("g").attr("id","trendChartLegend").attr("transform","translate("+e+",550)").selectAll("rect.legend").data(["5% - 95%","25% - 75%","Median"]).enter().each((function(e,t){d3.select(this).append("rect").attr("class","legend").attr("width",100).attr("height",50).attr("x",800*t+"px").style("fill",(function(){return 0===t?"#74a9cf":1===t?"#045a8d":"#525252"})),d3.select(this).append("text").attr("class","line-chart-legend-text").attr("y",40).attr("x",800*t+100+10+"px").text(e)})),$("#trendChartLegend").hide(),this.initLineChartButtons()}initLineChartButtons(){for(let e=0;e<this.swarm_features.length;e++){let t=this.swarm_features[e].split("_").join(" ");t=t.charAt(0).toUpperCase()+t.slice(1),$("#line-chart-feature-checkboxes").append('<tr><th> <div class="pretty p-switch p-fill p-bigger"><input type="checkbox" class="line-chart-check-box" id="draw-'+this.swarm_features[e]+'" data="#'+this.swarm_features[e]+'Line" /><div class="state"><label>'+t+"</label></div></div></th></tr>")}$(".line-chart-check-box").change((function(){let e=$(this);e.prop("checked")?$(e.attr("data")).show():$(e.attr("data")).hide()}))}}class C extends k{constructor(e,t){super(t),this.elem=e,this.trendchart()}disableLineChart(){$(".lineChartButton").prop("checked",!1).prop("disabled",!0),$(".line-chart-check-box").attr("disabled",!0),$(".lineChartLine").attr("visibility","hidden")}trendchart(){let e="";if(this.elem.id.toLowerCase().includes("speed"))e="speed";else if(this.elem.id.toLowerCase().includes("acceleration"))e="acceleration";else if(this.elem.id.toLowerCase().includes("distance_centroid"))e="distance_centroid";else{if(!this.elem.id.toLowerCase().includes("midline_offset"))return;e="midline_offset"}if($("#lineChartLegend").hide(),$("#trendChartLegend").show(),$("#"+e+"TrendChart").length)$("#"+e+"TrendChart").show();else{let t=[],r=ae.length;for(let n=0;n<ee.length;n++){let a=[];for(let t=0;t<r;t++)K[n*r+t]&&a.push(K[n*r+t][e]);t.push(h(a))}if(t.length>this.lineChartWidth){let e=[],r=[0,0,0,0,0];for(let n=0;n<t.length;n++){for(let e=0;e<r.length;e++)r[e]+=t[n][e];if(n%b==0){for(let e=0;e<r.length;e++)r[e]+=r[e]/b;e.push(r),r=[0,0,0,0,0]}}t=e}let n=d3.min(t,(function(e){return e[0]})),a=d3.max(t,(function(e){return e[4]})),i=d3.scaleLinear().domain([n,a]).range([0,100]),o=u.append("g").attr("id",e+"TrendChart").attr("class","trendChartData");$(".zoom").appendTo("#lineChartZoom"),$("#lineChartTimeLine").appendTo("#lineChartZoom"),v[e]={};for(let r=0;r<this.trendChartsElem.length;r++){let n;r<2?n=d3.area().x((function(e,t){return m(t)})).y0((function(e){return f(i(e[r+1]))})).y1((function(e){return f(i(e[r]))})):2===r?n=d3.line().x((function(e,t){return m(t)})).y((function(e){return f(i(e[r]))})):r>2&&(n=d3.area().x((function(e,t){return m(t)})).y0((function(e){return f(i(e[r]))})).y1((function(e){return f(i(e[r-1]))}))),v[e][this.trendChartsElem[r]]=n,o.append("path").data([t]).attr("class",this.trendChartsElem[r]).attr("d",n)}}}}function T(e){activeScale=e}let A,L,_,S,j={},M=d3.scaleThreshold().domain([0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]).range(["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"]);const D=4;let z={},E={},O=["#7fc97f","#386cb0","#e7298a","#ff9900"];class B extends x{constructor(){super(),this.initDendrogram()}initDendrogram(){let e=d3.zoom().scaleExtent([1,10]).on("zoom",()=>{d3.event.transform.x=Math.min(0,5e3*(d3.event.transform.k-1),Math.max(5e3*(1-d3.event.transform.k),d3.event.transform.x)),d3.event.transform.y=Math.min(0,5e3*(d3.event.transform.k-1),Math.max(5e3*(1-d3.event.transform.k),d3.event.transform.y)),this.zoomGroup.attr("transform",d3.event.transform)}),t=d3.select("#dendrogram-panel").classed("svg-dendrogram-container",!0).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 5000 5000").classed("svg-content-dendrogram",!0).call(e);!function(){let e,t,r=d3.select("#dendrogram-panel").append("svg").attr("id","dendrogram-legend").attr("width",550).attr("height",60);$("#dendrogram-legend").hide();let n=M.range();e=r.selectAll("rect.legend").data(n),t=r.selectAll("text.legend-text").data(["low","","","","","","","","high"]),e.enter().append("rect").attr("class","legend").attr("width",50).attr("height",20).attr("y",0).attr("x",(function(e,t){return 50*t+"px"})).style("fill",(function(e){return e})),t.enter().append("text").attr("class","legend-text").attr("y",40).attr("x",(function(e,t){return 50*t+"px"})).text((function(e){return e}))}(),this.zoomGroup=t.append("g").attr("transform","translate(20,20)").append("svg:g"),A=d3.tree().size([4800,4800]),_=d3.select(".tank"),$("#dendrogram-panel-level-slider").slider({range:"max",min:2,max:2,step:1,value:this.hierarchyLevels.h0,slide:(e,t)=>{let r=$(".show-dendrogram.btn-primary").attr("data");this.setHierarchyLevel(r,t.value),this.updateDendrogram(),$("#play-button").hasClass("active")||(this.decIndexTime(),this.draw(),this.drawDendrogram())}}),L=d3.select("#dendrogram-tooltip").style("left","0px").style("top","0px").on("mouseover",(function(){L.style("opacity",1)}));let r=100*D;S=d3.select("#hierarchy-legend-div").append("svg").attr("id","hierarchy-legend").attr("width",r).attr("height",60),_.append("defs").append("svg:pattern").attr("id","striped").attr("patternUnits","userSpaceOnUse").attr("width","20").attr("height","5").attr("patternTransform","rotate(60)").append("rect").attr("width",5).attr("height",10).attr("transform","translate(0,0)").style("fill","#67000d")}}function H(e){return"M"+e.x+","+e.y+"V"+e.parent.y+"H"+e.parent.x}function I(){let e,t;0!==Object.keys(z).length||0!==Object.keys(R).length?$("#hierarchy-legend-div").show():$("#hierarchy-legend-div").hide();let r=[],n=[];if($(".show-dendrogram").each((function(e,t){null!=z["h"+$(t).attr("data")]&&null!=$(t).attr("name")&&(r.push(z["h"+$(t).attr("data")]),n.push($(t).attr("name")))})),0!==Object.keys(R).length)for(let e in R)-1===r.indexOf(R[e])&&(r.push(R[e]),n.push("Network"));e=S.selectAll("rect.legend").data(r),t=S.selectAll("text.legend-text").data(n),e.style("fill",(function(e){return e})),e.enter().append("rect").attr("class","legend").attr("width",50).attr("height",20).attr("y",0).attr("x",(function(e,t){return 50+2.5*t*50+"px"})).style("fill",(function(e){return e})),e.exit().remove(),t.text((function(e){return e})),t.enter().append("text").attr("class","legend-text").attr("y",40).attr("x",(function(e,t){return 50+2.5*t*50+"px"})).text((function(e){return e})),t.exit().remove()}let G,W,N=!1,U=.5,R={},P=d3.scaleThreshold().domain([0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]).range(["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"]);function V(e){U=e}let Y="application/vnd.api+json";var F;function X(){let e=[];$.ajax({url:"/api/percentile/"+parameters.id,dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:Y},success:function(t){for(let r=0;r<t.length;r++)e[t[r].feature]=[t[r].min,t[r].p1,t[r].p2,t[r].p3,t[r].p5,t[r].p7,t[r].p8,t[r].p9,t[r].max];oe(e),function(e){for(var t in e)if(e.hasOwnProperty(t)){let e=t.split("_").join(" ");e=e.charAt(0).toUpperCase()+e.slice(1),$("#absolute-feature-checkboxes").append('<tr><th> <div class="pretty p-switch p-fill p-bigger"><input type="checkbox" id="draw-'+t+'"/><div class="state"><label>'+e+'</label></div></div><div class="float-right draw-details" id="draw-'+t+'-details"><div class="pretty p-icon p-toggle p-plain"><input type="checkbox" id="draw-'+t+'-input" /><div class="state p-success-o p-on"><i class="mdi mdi-image-area"></i><label></label></div><div class="state p-off"><i class="mdi mdi-image-off"></i><label></label></div></div></div></th></tr>')}$(".draw-details").hide(),p()}(e)}})}function J(){$.ajax({url:"/api/dataset/networks/"+parameters.id,dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:Y},success:function(e){!function(e){if(e.length)for(let t=0;t<e.length;t++)e[t].finished&&$("#networks-hierarchies-table tbody").append("<tr><td>"+e[t].name+'</td> <td> <button type="button" class="btn btn-default" data='+e[t].network_id+" name="+e[t].name+'><span class="mdi mdi-graphql" aria-hidden="true"></span></button></td> <td><div class="pretty p-switch p-fill"><input type="checkbox" class="hiearchy-checkbox" data="'+e[t].network_id+'" name="'+e[t].name+'"><div class="state p-success"><label></label></div></div></td><td>---</td>');else $("#networks-hierarchies-table").append("There is no network data for this dataset")}(e)}})}function Z(e){$.ajax({url:"/api/dataset/"+parameters.id+"/"+e,dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:Y},success:function(t){de(t,e),c()}})}function q(e){d(),$.ajax({url:"/api/dataset/"+parameters.id+"/"+e,dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:Y},success:function(t){le(t,e),c()}})}r(1);let K=[],Q=[],ee=[],te={},re={},ne={},ae={};function ie(e){K=K.concat(e)}function oe(e){te=e}function se(e){Q=e,function(){let e=["#fff","#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628"];if(Q.length)for(let t=0;t<Q.length;t++)$("#metadata-table").find("tbody").append($('<tr id="metadata-row-'+Q[t].animal_id+'">').append($("<td>").append(Q[t].animal_id)).append($("<td>").append(Q[t].species)).append($("<td>").append(Q[t].sex)).append($("<td>").append(Q[t].size)).append($("<td>").append(Q[t].weight)).append($("<td>").append('<div class="dropdown">\n                                              <a class="dropdown-toggle btn btn-default btn-color" data-toggle="dropdown" href="#">\n                                              <div id="preview" class="metadata-swatch" style="background-color:#fff"></div>\n                                              <input class="color-field" value="White" style="display:none;">\n                                              </a>\n                                              <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel"> '+function(t){let r="";for(let n=0;n<e.length;n++)r+='<div class="metadata-swatch metadata-swatch-clickable" style="background-color:'+e[n]+'" value="'+t+'"></div>';return r}(Q[t].animal_id)+"</ul></div>")));else $("#metadata-table").find("tbody").append("There is no metadata for this dataset")}()}function le(e,t){for(let r=0;r<e.length;r++)void 0===ee[r]&&ee.push({}),e[r]&&!isNaN(e[r])?ee[r][t]=+e[r]:ee[r][t]=e[r]}function de(e,t){for(let r=0;r<e.length;r++)void 0===K[r]&&K.push({}),K[r][t]=+e[r]}function ce(e){re=e}function he(e,t){0===Object.keys(e).length&&e.constructor===Object?(delete ne["h"+t],delete j["h"+t],function(e){delete z["h"+e]}(t)):(ne["h"+t]=e,function(e,t){j["h"+e]=t}(t,2),function(e){for(let t in R)if(t==="h"+e)return void(z["h"+e]=R[t]);for(let t=0;t<O.length;t++){let r=!0;for(let e in z)z.hasOwnProperty(e)&&z[e]===O[t]&&(r=!1);if(r){if(0===Object.keys(R).length)return void(z["h"+e]=O[t]);for(let r in R)if(R[r]!==O[t])return void(z["h"+e]=O[t])}}}(t)),I()}function pe(e){ae=e}$(document).ready((function(){window.EventSource?((F=new EventSource("/api/movement_only/"+parameters.id)).onmessage=function(e){"close"===e.data?(F.close(),window.setTimeout((function e(){$.active>0?window.setTimeout(e,100):new y}),100)):ie(JSON.parse(e.data))},F.addEventListener("error",(function(e){e.readyState==EventSource.CLOSED&&alert("Streaming error")}),!1)):alert("Webbrowser does not support streaming"),X(),$.ajax({url:"/api/dataset/"+parameters.id+"/animal_ids",dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:Y},success:function(e){pe(e)}}),function(){const e=["swarm_time","swarm_speed","swarm_acceleration","swarm_convex_hull_area","swarm_distance_centroid","swarm_direction","swarm_polarisation"];for(let t=0;t<e.length;t++)$.ajax({url:"/api/dataset/"+parameters.id+"/"+e[t],dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:Y},success:function(r){le(r,e[t].replace("swarm_",""))}})}(),$.ajax({url:"/api/metadata/"+parameters.id,dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:Y},success:function(e){se(e)}}),J()}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vZXhwbG9yZS9leHBsb3JlLmNzcz9lNzJlIiwid2VicGFjazovLy8uL2V4cGxvcmUvZXhwbG9yZS5jc3MiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9saWIvdXJscy5qcyIsIndlYnBhY2s6Ly8vLi9leHBsb3JlL3NwYXRpYWxfdmlldy9pbnRlcmFjdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9leHBsb3JlL3NwYXRpYWxfdmlldy9jb2xvcl9waWNrZXIuanMiLCJ3ZWJwYWNrOi8vLy4vZXhwbG9yZS9tZXRhZGF0YS5qcyIsIndlYnBhY2s6Ly8vLi9leHBsb3JlL2xpc3RlbmVyLmpzIiwid2VicGFjazovLy8uL2V4cGxvcmUvaGVscGVycy5qcyIsIndlYnBhY2s6Ly8vLi9leHBsb3JlL3NwYXRpYWxfdmlldy9zcGF0aWFsX3ZpZXcuanMiLCJ3ZWJwYWNrOi8vLy4vZXhwbG9yZS9oaWVyYXJjaHkuanMiLCJ3ZWJwYWNrOi8vLy4vZXhwbG9yZS9hamF4X3F1ZXJpZXMuanMiLCJ3ZWJwYWNrOi8vLy4vZXhwbG9yZS9uZXR3b3JrLmpzIiwid2VicGFjazovLy8uL2V4cGxvcmUvbGluZV9jaGFydC5qcyIsIndlYnBhY2s6Ly8vLi9leHBsb3JlL2V4cGxvcmUuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJjb250ZW50Iiwib3B0aW9ucyIsInRyYW5zZm9ybSIsInVuZGVmaW5lZCIsImxvY2FscyIsIl9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyIsInB1c2giLCJ1c2VTb3VyY2VNYXAiLCJsaXN0IiwidG9TdHJpbmciLCJ0aGlzIiwibWFwIiwiaXRlbSIsImNzc01hcHBpbmciLCJidG9hIiwic291cmNlTWFwcGluZyIsInNvdXJjZU1hcCIsImJhc2U2NCIsInVuZXNjYXBlIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiSlNPTiIsInN0cmluZ2lmeSIsImRhdGEiLCJjb25jYXQiLCJzb3VyY2VVUkxzIiwic291cmNlcyIsInNvdXJjZSIsInNvdXJjZVJvb3QiLCJqb2luIiwiY3NzV2l0aE1hcHBpbmdUb1N0cmluZyIsIm1lZGlhUXVlcnkiLCJkZWR1cGUiLCJhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzIiwibGVuZ3RoIiwiaWQiLCJfaSIsImZuIiwibWVtbyIsInN0eWxlc0luRG9tIiwiaXNPbGRJRSIsIndpbmRvdyIsImRvY3VtZW50IiwiYWxsIiwiYXRvYiIsImFwcGx5IiwiYXJndW1lbnRzIiwiZ2V0VGFyZ2V0IiwidGFyZ2V0IiwicXVlcnlTZWxlY3RvciIsImdldEVsZW1lbnQiLCJzdHlsZVRhcmdldCIsIkhUTUxJRnJhbWVFbGVtZW50IiwiY29udGVudERvY3VtZW50IiwiaGVhZCIsImUiLCJzaW5nbGV0b24iLCJzaW5nbGV0b25Db3VudGVyIiwic3R5bGVzSW5zZXJ0ZWRBdFRvcCIsImZpeFVybHMiLCJhZGRTdHlsZXNUb0RvbSIsInN0eWxlcyIsImRvbVN0eWxlIiwicmVmcyIsImoiLCJwYXJ0cyIsImFkZFN0eWxlIiwibGlzdFRvU3R5bGVzIiwibmV3U3R5bGVzIiwiYmFzZSIsInBhcnQiLCJjc3MiLCJtZWRpYSIsImluc2VydFN0eWxlRWxlbWVudCIsInN0eWxlIiwiaW5zZXJ0SW50byIsIkVycm9yIiwibGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AiLCJpbnNlcnRBdCIsIm5leHRTaWJsaW5nIiwiaW5zZXJ0QmVmb3JlIiwiYXBwZW5kQ2hpbGQiLCJmaXJzdENoaWxkIiwiYmVmb3JlIiwicmVtb3ZlU3R5bGVFbGVtZW50IiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwiaWR4IiwiaW5kZXhPZiIsInNwbGljZSIsImNyZWF0ZVN0eWxlRWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJhdHRycyIsInR5cGUiLCJhZGRBdHRycyIsImVsIiwia2V5cyIsImZvckVhY2giLCJzZXRBdHRyaWJ1dGUiLCJvYmoiLCJ1cGRhdGUiLCJyZW1vdmUiLCJyZXN1bHQiLCJzdHlsZUluZGV4IiwiYXBwbHlUb1NpbmdsZXRvblRhZyIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsInJldm9rZU9iamVjdFVSTCIsIkJsb2IiLCJsaW5rIiwicmVsIiwiY3JlYXRlTGlua0VsZW1lbnQiLCJ1cGRhdGVMaW5rIiwiaHJlZiIsImFwcGx5VG9UYWciLCJuZXdPYmoiLCJERUJVRyIsIm5ld0xpc3QiLCJtYXlSZW1vdmUiLCJ0ZXh0U3RvcmUiLCJyZXBsYWNlVGV4dCIsImluZGV4IiwicmVwbGFjZW1lbnQiLCJmaWx0ZXIiLCJCb29sZWFuIiwic3R5bGVTaGVldCIsImNzc1RleHQiLCJjc3NOb2RlIiwiY3JlYXRlVGV4dE5vZGUiLCJjaGlsZE5vZGVzIiwiYXV0b0ZpeFVybHMiLCJjb252ZXJ0VG9BYnNvbHV0ZVVybHMiLCJibG9iIiwib2xkU3JjIiwibG9jYXRpb24iLCJiYXNlVXJsIiwicHJvdG9jb2wiLCJob3N0IiwiY3VycmVudERpciIsInBhdGhuYW1lIiwicmVwbGFjZSIsImZ1bGxNYXRjaCIsIm9yaWdVcmwiLCJuZXdVcmwiLCJ1bnF1b3RlZE9yaWdVcmwiLCJ0cmltIiwiJDEiLCJ0ZXN0Iiwic2xpZGVyIiwidG9vbHRpcCIsImNvbG9yYnJld2VyIiwiQnVZbEJ1IiwibWV0YWRhdGFDb2xvciIsInBsYXlCb29sZWFuIiwic2V0UGxheUJvb2xlYW4iLCJkaXNhYmxlUGxheUJ1dHRvbiIsIiQiLCJyZW1vdmVDbGFzcyIsInByb3AiLCJoaWRlIiwic2hvdyIsImVuYWJsZVBsYXlCdXR0b24iLCJhZGRDbGFzcyIsInBlcmNlbnRpbGVzTGluZUNoYXJ0IiwiYXJyIiwic29ydCIsImEiLCJiIiwibG93ZXIiLCJNYXRoIiwiZmxvb3IiLCJ1cHBlciIsIndlaWdodCIsImluaXRUcmVuZENoYXJ0TGlzdGVuZXIiLCJjbGljayIsImZpbmQiLCJzd2FybURhdGEiLCJkaXNhYmxlTGluZUNoYXJ0IiwiYXR0ciIsIlN0cmluZyIsImhhc2hDb2RlIiwiaGFzaCIsImNoYXJDb2RlQXQiLCJkMyIsInNlbGVjdGlvbiIsIm1vdmVUb0JhY2siLCJlYWNoIiwiem9vbUdyb3VwIiwiem9vbUZ1bmN0aW9uIiwidHJlbmRDaGFydHNab29tIiwicmF0aW8iLCJpbmRleFRpbWUiLCJzdmdDb250YWluZXIiLCJzZWxlY3QiLCJ6b29tIiwic2NhbGVFeHRlbnQiLCJvbiIsImV2ZW50IiwieCIsIm1pbiIsInRhbmtXaWR0aCIsImsiLCJtYXgiLCJ5IiwidGFua0hlaWdodCIsImdYYXhpcyIsInhBeGlzIiwic2NhbGUiLCJyZXNjYWxlWCIsImdZYXhpcyIsInlBeGlzIiwicmVzY2FsZVkiLCJhcHBlbmQiLCJ0YW5rIiwicGFyYW1ldGVycyIsImludmVydGVkX3giLCJpbnZlcnRlZF95IiwiYWN0aXZlU2NhbGUiLCJjb2xvclNjYWxlIiwiY29sb3IiLCJsZWdlbmRXaWR0aCIsImxlZ2VuZEhlaWdodCIsInN2Z0xlZ2VuZCIsIm1lZG9pZEFuaW1hbCIsImFjdGl2ZUFuaW1hbHMiLCJhcnJheUFuaW1hbHMiLCJkYXRhc2V0IiwiaGllcmFyY2h5TGV2ZWxzIiwiaGllcmFyY2h5R3JvdXBTdGRldiIsImJydXNoIiwiZXh0ZW50IiwiY2VpbCIsInRtcCIsInRleHQiLCJzY2FsZUxpbmVhciIsImRvbWFpbiIsInJhbmdlIiwic2NhbGVUaHJlc2hvbGQiLCJzZWxlY3RBbGwiLCJlbnRyaWVzIiwiZW50ZXIiLCJjaGFuZ2VsZWdlbmQiLCJoYXNDbGFzcyIsImRlY0luZGV4VGltZSIsImRyYXciLCJsZWdlbmQiLCJsZWdlbmRUZXh0IiwidG1wU2NhbGUiLCJyZXR1cm5Db2xvclNjYWxlIiwiZXhpdCIsInRpbWVUb1dhaXQiLCJ2YWwiLCJhbmltYWxTY2FsZSIsInNldFRpbWVvdXQiLCJkcmF3RGVuZHJvZ3JhbSIsIm5ldHdvcmtWaXMiLCJzdmdBbmltYWxzIiwibmV0d29ya0RhdGEiLCJuZXR3b3JrIiwiYW5pbWFsMSIsImFuaW1hbDIiLCJuZXR3b3JrQ29sb3JTY2FsZSIsIm5ldHdvcmtBdXRvIiwidG1wQXJyYXkiLCJzZXROZXR3b3JMaW1pdCIsInBlcmNlbnRpbGVzIiwibmV0d29ya0xpbWl0IiwidHJpYW5ndWxhdGlvbiIsInZvcm9ub2kiLCJpcyIsInNwbGl0IiwiYW5pbWFsR3JvdXBpbmdzIiwiZGF0YXNldE1ldGFkYXRhIiwicGFnZVgiLCJwYWdlWSIsImh0bWwiLCJ0b29sdGlwRnVuY3Rpb24iLCJ0cmFuc2l0aW9uIiwiZHVyYXRpb24iLCJpbmNsdWRlcyIsImh1bGxQYXRoIiwiaXNFbXB0eU9iamVjdCIsImNlbnRyb2lkIiwiY2xhc3NlZCIsInVwZGF0ZUxpbmVDaGFydCIsInNldEFjdGl2ZUFuaW1hbHMiLCJyb290IiwiaGllcmFyY2h5IiwibGV2ZWwiLCJ0bXBfbm9kZXMiLCJub2RlIiwiaGllcmFyY2hpZXMiLCJjbHVzdGVyIiwidmVydGljZXMiLCJncm91cE1lbWJlciIsInBvbHlnb25IdWxsIiwiaGllcmFyY2h5SWRzIiwibmV0d29ya0hpZXJhcmNoeSIsImhpZXJhcmNoeVZlcnRpY2VzIiwidHJlZURhdGEiLCJub2RlcyIsImNoaWxkcmVuIiwibWFyZ2luIiwid2lkdGgiLCJoZWlnaHQiLCJ0cmVlIiwic2l6ZSIsInRyZWVtYXAiLCJzaG93TmV0d29ya0hpZXJhcmNoeSIsIm5ldHdvcmtIaWVyYXJjaHlJZHMiLCJnZXRIaWVyYXJjaHlMZXZlbCIsImdldEhpZXJhcmNoeVZlcnRpY2VzIiwiaGllcmFyY2h5Q29sb3JzIiwiaGllcmFyeUh1bGxzIiwiY29sbGFwc2UiLCJkZXB0aCIsIl9jaGlsZHJlbiIsImRlc2NlbmRhbnRzIiwic2xpY2UiLCJkaWFnb25hbExpbmVzIiwibm9kZUVudGVyIiwidG9vbHRpcERpdiIsImFkZEhpZ2hsaWdodFNwYXRpYWxWaWV3IiwicmVtb3ZlSGlnaGxpZ2h0U3BhdGlhbFZpZXciLCJjb25zb2xlIiwibG9nIiwic3RhbmRhcmREZXZpYXRpb25Db2xvclNjYWxlIiwic3RhbmRhcmREZXZpYXRpb24iLCJkcmF3SGllcmFyY2h5Iiwic3VwZXIiLCJzcGF0aWFsVmlld0luaXQiLCJzZXRJbmRleFRpbWUiLCJyZWN0IiwiYW5pbWFsIiwicG9pbnQiLCJyZXNldFRyYWNrZWREYXRhIiwic2V0VHJhY2tpbmdCb29sZWFuIiwic2VuZFRyYWNrZWREYXRhIiwiY2hhbmdlIiwiY2hlY2tlZCIsInNldE5ldHdvcmtCYWNrZ3JvdW5kIiwiaXNOdW1lcmljIiwic2V0TmV0d29ya0JhY2tncm91bmRMaW1pdCIsImdldERhdGFzZXRGZWF0dXJlIiwiZ2V0U3dhcm1EYXRhc2V0RmVhdHVyZSIsInNldE1lZG9pZEFuaW1hbCIsInNldEFjdGl2ZVNjYWxlIiwiY29sb3JSR0IiLCJyZXNldEluZGl2aWR1YWxNZXRhZGF0YSIsIm1vZGFsIiwidG9Mb3dlckNhc2UiLCJBcnJheSIsImZyb20iLCJTZXQiLCJjb2xvcnMiLCJibEF2ZyIsInF1YW50aWxlIiwiYWJBdmciLCJjb2xvck1ldGFkYXRhIiwiYnRuIiwib2xkVmFsdWUiLCJjbG9zZXN0IiwibmV3VmFsIiwicGFyc2VGbG9hdCIsInJvdW5kIiwiY2xpY2tlZEJ1dHRvbklEIiwiYnV0dG9uIiwiY2hlY2tib3giLCJtYXhOdW1iZXJIaWVyYXJjaGllcyIsIm5ldHdvcmtfaWQiLCJhamF4IiwidXJsIiwiZGF0YVR5cGUiLCJjb250ZW50VHlwZSIsImhlYWRlcnMiLCJKU09OQVBJX01JTUVUWVBFIiwic3VjY2VzcyIsInNldEhpZXJhcmNoeURhdGEiLCJwYXJzZSIsImFkZEhpZXJhcmNoeUJ1dHRvbiIsImluaXRTaG93RGVuZHJvZ3JhbUxpc3RlbmVyIiwidG1wQWN0aXZlIiwibmV4dCIsInJlbW92ZUhpZXJhcmNoeUJ1dHRvbiIsInNldE5ldHdvcmtIaWVyYXJjaHkiLCJzZXROZXR3b3JrRGF0YSIsIm5ldHdvcmtJRCIsImdldE5ldHdvcmtEYXRhIiwic2V0bmV0d29ya0NvbG9yIiwic2V0TmV0d29ya0lEIiwic2V0TmV0d29ya0F1dG8iLCJsaW1pdCIsIm1pblBvaW50IiwibWF4UG9pbnQiLCJheGlzQm90dG9tIiwidGlja3MiLCJ0aWNrU2l6ZSIsInRpY2tQYWRkaW5nIiwiYXhpc1JpZ2h0IiwicGVyY2VudGFnZSIsImJhY2tncm91bmRfaW1hZ2UiLCJzdGVwIiwic2xpZGUiLCJ1aSIsInNwYWNlIiwiYXBwZW5kVG8iLCJpbml0U2xpZGVycyIsImluaXRDb2xvclBpY2tlciIsIkxpbmVDaGFydCIsImNwX2xpc3RlbmVyIiwic2ZfbGlzdGVuZXJzIiwiYWZfbGlzdGVuZXJzIiwibWRfbGlzdGVuZXJzIiwibl9saXN0ZW5lcnMiLCJoX2xpc3RlbmVycyIsImRyYWdnYWJsZSIsImNvbnRhaW5tZW50IiwicmVzaXphYmxlIiwiYXNwZWN0UmF0aW8iLCJtYXhXaWR0aCIsIkNoYXJ0Iiwic3dhcm1fZmVhdHVyZXMiLCJsaW5lQ2hhcnRXaWR0aCIsInRyZW5kQ2hhcnRzRWxlbSIsImxpbmVDaGFydCIsImxpbmVDaGFydERhdGEiLCJmaWxsIiwidG1wX29iamVjdCIsIngyIiwidGlja0Zvcm1hdCIsImF4aXNMZWZ0IiwiZHJhZ2dlZCIsImNvb3JkcyIsIm1vdXNlIiwidHJhbnNsYXRlRXh0ZW50IiwibGluZXMiLCJzd2FybUxpbmVDaGFydCIsImxpbmVfY29sb3JzIiwic2NhbGVPcmRpbmFsIiwic2NoZW1lQ2F0ZWdvcnkxMCIsIm5vcm1hbGl6YXRpb25TY2FsZSIsImxpbmUiLCJkcmFnIiwiY2hhcnRMaW5lcyIsIl9ncm91cHMiLCJzdHJva2UiLCJhdHRyaWJ1dGVzIiwiZ2V0Q29tcHV0ZWRUZXh0TGVuZ3RoIiwiaW5pdExpbmVDaGFydEJ1dHRvbnMiLCJjYXBpdGFsaXplZF9mZWF0dXJlX3N0cmluZyIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwiZWxlbSIsInRyZW5kY2hhcnQiLCJmZWF0dXJlIiwidHJlbmRDaGFydERhdGEiLCJudW1fYW5pbWFscyIsImFuaW1hbElkcyIsInRtcFRyZW5kQ2hhcnREYXRhIiwidHJlbmRDaGFydCIsInRlbXAiLCJhcmVhIiwieTAiLCJ5MSIsImluaXREZW5kcm9ncmFtIiwic3ZnIiwiZGVuZHJvZ3JhbUxlZ2VuZCIsImxlZ2VuZERhdGEiLCJpbml0RGVuZHJvZ3JhbUxlZ2VuZCIsInNldEhpZXJhcmNoeUxldmVsIiwidXBkYXRlRGVuZHJvZ3JhbSIsInBhcmVudCIsImNoYW5nZUhpZXJhcmNoeUxlZ2VuZCIsIm5ldHdvcmtDb2xvciIsImxlZ2VuZFRleHREYXRhIiwiZ2V0UGVyY2VudGlsZSIsImRhdGFTZXRQZXJjZW50aWxlIiwic2V0RGF0YVNldFBlcmNlbnRpbGUiLCJhZGRBYnNvbHV0ZUZlYXR1cmVCdXR0b25zIiwiZ2V0TmV0d29ya0RhdGFCdXR0b24iLCJhZGROZXR3b3JrQnV0dG9ucyIsInNldERhdGFzZXRGZWF0dXJlIiwic2V0U3dhcm1EYXRhIiwiYWRkVG9EYXRhc2V0Iiwic2V0TWV0YURhdGEiLCJyZXN1bHRTdHJpbmciLCJpbml0aWFsaXplTWV0YWRkYXRhIiwiaXNOYU4iLCJjb25zdHJ1Y3RvciIsInJlbW92ZUhpZXJhcmNoeUNvbG9yIiwidG1wX2Jvb2xlYW4iLCJzZXRIaWVyYXJjaHlDb2xvciIsInNldEFuaW1hbElkcyIsInJlYWR5IiwiRXZlbnRTb3VyY2UiLCJvbm1lc3NhZ2UiLCJjbG9zZSIsImNoZWNrUGVuZGluZ1JlcXVlc3QiLCJhY3RpdmUiLCJhZGRFdmVudExpc3RlbmVyIiwicmVhZHlTdGF0ZSIsIkNMT1NFRCIsImFsZXJ0Il0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlYixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sS0FRdkRyQixFQUFvQnNCLEVBQUksU0FBU0QsRUFBT0UsR0FFdkMsR0FEVSxFQUFQQSxJQUFVRixFQUFRckIsRUFBb0JxQixJQUMvQixFQUFQRSxFQUFVLE9BQU9GLEVBQ3BCLEdBQVcsRUFBUEUsR0FBOEIsaUJBQVZGLEdBQXNCQSxHQUFTQSxFQUFNRyxXQUFZLE9BQU9ILEVBQ2hGLElBQUlJLEVBQUtYLE9BQU9ZLE9BQU8sTUFHdkIsR0FGQTFCLEVBQW9Ca0IsRUFBRU8sR0FDdEJYLE9BQU9DLGVBQWVVLEVBQUksVUFBVyxDQUFFVCxZ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Q2JDLFFBQVMsQ0FDTCxPQUFVQyxHQUVkQyxRQUFTLFNBQVNqVyxHQUNkcWQsR0FBYXJkLE1BbEtsQixXQUNILE1BQU04WSxFQUFpQixDQUFDLGFBQWMsY0FBZSxxQkFBc0IseUJBQ3ZFLDBCQUEyQixrQkFBbUIsc0JBSWxELElBQUssSUFBSXBjLEVBQUksRUFBR0EsRUFBSW9jLEVBQWVuWSxPQUFRakUsSUFDdkMyTCxFQUFFc04sS0FBSyxDQUNIQyxJQUFLLGdCQUFrQjdKLFdBQWUsR0FBSSxJQUFNK00sRUFBZXBjLEdBQy9EbVosU0FBVSxPQUNWdlIsS0FBTSxNQUNOd1IsWUFBYSxrQ0FDYkMsUUFBUyxDQUNMLE9BQVVDLEdBRWRDLFFBQVMsU0FBU2pXLEdBR2QyYyxHQUFhM2MsRUFGQzhZLEVBQWVwYyxHQUFHMkssUUFBUSxTQUFVLFFHckU5RCxHSGlGQWdCLEVBQUVzTixLQUFLLENBQ0hDLElBQUssaUJBQW1CN0osV0FBZSxHQUN2QzhKLFNBQVUsT0FDVnZSLEtBQU0sTUFDTndSLFlBQWEsa0NBQ2JDLFFBQVMsQ0FDTCxPQUFVQyxHQUVkQyxRQUFTLFNBQVNqVyxHQUNkNmMsR0FBWTdjLE1HcEZwQiIsImZpbGUiOiJleHBsb3JlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDYpO1xuIiwiXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vZXhwbG9yZS5jc3NcIik7XG5cbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXG52YXIgdHJhbnNmb3JtO1xudmFyIGluc2VydEludG87XG5cblxuXG52YXIgb3B0aW9ucyA9IHtcImhtclwiOnRydWV9XG5cbm9wdGlvbnMudHJhbnNmb3JtID0gdHJhbnNmb3JtXG5vcHRpb25zLmluc2VydEludG8gPSB1bmRlZmluZWQ7XG5cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCBvcHRpb25zKTtcblxuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cbmlmKG1vZHVsZS5ob3QpIHtcblx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vZXhwbG9yZS5jc3NcIiwgZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL2V4cGxvcmUuY3NzXCIpO1xuXG5cdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cblx0XHR2YXIgbG9jYWxzID0gKGZ1bmN0aW9uKGEsIGIpIHtcblx0XHRcdHZhciBrZXksIGlkeCA9IDA7XG5cblx0XHRcdGZvcihrZXkgaW4gYSkge1xuXHRcdFx0XHRpZighYiB8fCBhW2tleV0gIT09IGJba2V5XSkgcmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRpZHgrKztcblx0XHRcdH1cblxuXHRcdFx0Zm9yKGtleSBpbiBiKSBpZHgtLTtcblxuXHRcdFx0cmV0dXJuIGlkeCA9PT0gMDtcblx0XHR9KGNvbnRlbnQubG9jYWxzLCBuZXdDb250ZW50LmxvY2FscykpO1xuXG5cdFx0aWYoIWxvY2FscykgdGhyb3cgbmV3IEVycm9yKCdBYm9ydGluZyBDU1MgSE1SIGR1ZSB0byBjaGFuZ2VkIGNzcy1tb2R1bGVzIGxvY2Fscy4nKTtcblxuXHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0fSk7XG5cblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59IiwiLy8gSW1wb3J0c1xudmFyIF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyA9IHJlcXVpcmUoXCIuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCIpO1xuZXhwb3J0cyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhmYWxzZSk7XG4vLyBNb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi8qIEljb25zIGZvciBib290c3RyYXAgNCAqL1xcclxcblxcclxcbi5tZGk6OmJlZm9yZSB7XFxyXFxuICAgIGZvbnQtc2l6ZTogMjRweDtcXHJcXG4gICAgbGluZS1oZWlnaHQ6IDE0cHg7XFxyXFxufVxcclxcblxcclxcbi5idG4gLm1kaTo6YmVmb3JlIHtcXHJcXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xcclxcbiAgICB0b3A6IDRweDtcXHJcXG59XFxyXFxuXFxyXFxuLmJ0bi14cyAubWRpOjpiZWZvcmUge1xcclxcbiAgICBmb250LXNpemU6IDE4cHg7XFxyXFxuICAgIHRvcDogM3B4O1xcclxcbn1cXHJcXG5cXHJcXG4uYnRuLXNtIC5tZGk6OmJlZm9yZSB7XFxyXFxuICAgIGZvbnQtc2l6ZTogMThweDtcXHJcXG4gICAgdG9wOiAzcHg7XFxyXFxufVxcclxcblxcclxcbi5kcm9wZG93bi1tZW51IC5tZGkge1xcclxcbiAgICB3aWR0aDogMThweDtcXHJcXG59XFxyXFxuXFxyXFxuLmRyb3Bkb3duLW1lbnUgLm1kaTo6YmVmb3JlIHtcXHJcXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xcclxcbiAgICB0b3A6IDRweDtcXHJcXG4gICAgbGVmdDogLThweDtcXHJcXG59XFxyXFxuXFxyXFxuLm5hdiAubWRpOjpiZWZvcmUge1xcclxcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XFxyXFxuICAgIHRvcDogNHB4O1xcclxcbn1cXHJcXG5cXHJcXG4ubmF2YmFyIC5uYXZiYXItdG9nZ2xlIC5tZGk6OmJlZm9yZSB7XFxyXFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXHJcXG4gICAgdG9wOiA0cHg7XFxyXFxuICAgIGNvbG9yOiAjRkZGO1xcclxcbn1cXHJcXG5cXHJcXG4uYnJlYWRjcnVtYiAubWRpOjpiZWZvcmUge1xcclxcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XFxyXFxuICAgIHRvcDogNHB4O1xcclxcbn1cXHJcXG5cXHJcXG4uYnJlYWRjcnVtYiBhOmhvdmVyIHtcXHJcXG4gICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xcclxcbn1cXHJcXG5cXHJcXG4uYnJlYWRjcnVtYiBhOmhvdmVyIHNwYW4ge1xcclxcbiAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcXHJcXG59XFxyXFxuXFxyXFxuLmFsZXJ0IC5tZGk6OmJlZm9yZSB7XFxyXFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXHJcXG4gICAgdG9wOiA0cHg7XFxyXFxuICAgIG1hcmdpbi1yaWdodDogMnB4O1xcclxcbn1cXHJcXG5cXHJcXG4uaW5wdXQtZ3JvdXAtYWRkb24gLm1kaTo6YmVmb3JlIHtcXHJcXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xcclxcbiAgICB0b3A6IDNweDtcXHJcXG59XFxyXFxuXFxyXFxuLm5hdmJhci1icmFuZCAubWRpOjpiZWZvcmUge1xcclxcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XFxyXFxuICAgIHRvcDogMnB4O1xcclxcbiAgICBtYXJnaW4tcmlnaHQ6IDJweDtcXHJcXG59XFxyXFxuXFxyXFxuLmxpc3QtZ3JvdXAtaXRlbSAubWRpOjpiZWZvcmUge1xcclxcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XFxyXFxuICAgIHRvcDogM3B4O1xcclxcbiAgICBsZWZ0OiAtM3B4XFxyXFxufVxcclxcblxcclxcbi8qIFNWRyBlbGVtZW50cyBhbmQgdGV4dCAqL1xcclxcblxcclxcbiNtYWluLXZpcyB7XFxyXFxuICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XFxyXFxufVxcclxcblxcclxcbi5zdmctY29udGFpbmVyIHtcXHJcXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcclxcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XFxyXFxuICAgIHdpZHRoOiAxMDAlO1xcclxcbiAgICAvKiBhc3BlY3QgcmF0aW8gKi9cXHJcXG4gICAgdmVydGljYWwtYWxpZ246IHRvcDtcXHJcXG4gICAgb3ZlcmZsb3c6IHZpc2libGU7XFxyXFxufVxcclxcblxcclxcbi5zdmctY29udGVudCB7XFxyXFxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXHJcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcclxcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjMDAwO1xcclxcbn1cXHJcXG5cXHJcXG4jbWFpbi12aXMtbGVnZW5kLWRpdiB7XFxyXFxuICAgIGRpc3BsYXk6IG5vbmU7XFxyXFxufVxcclxcblxcclxcbiNoaWVyYXJjaHktbGVnZW5kLWRpdiB7XFxyXFxuICAgIGRpc3BsYXk6IG5vbmU7XFxyXFxufVxcclxcblxcclxcbiNtYWluLXZpcy1sZWdlbmQge1xcclxcbiAgICBmbG9hdDogcmlnaHQ7XFxyXFxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXHJcXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xcclxcbiAgICBvdmVyZmxvdzogdmlzaWJsZTtcXHJcXG4gICAgdG9wOiAxMHB4O1xcclxcbiAgICBsZWZ0OiAxMHB4O1xcclxcbn1cXHJcXG5cXHJcXG4jaGllcmFyY2h5LWxlZ2VuZCB7XFxyXFxuICAgIGZsb2F0OiBsZWZ0O1xcclxcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxyXFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXHJcXG4gICAgb3ZlcmZsb3c6IHZpc2libGU7XFxyXFxuICAgIHRvcDogMTBweDtcXHJcXG4gICAgbGVmdDogMTBweDtcXHJcXG59XFxyXFxuXFxyXFxuLnN2Zy1jb250ZW50LWRlbmRyb2dyYW0ge1xcclxcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxyXFxuICAgIGJvcmRlcjogMXB4IHNvbGlkICMwMDA7XFxyXFxufVxcclxcblxcclxcbi5zdmctbGluZS1jaGFydC1jb250YWluZXIge1xcclxcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxyXFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXHJcXG4gICAgd2lkdGg6IDEwMCU7XFxyXFxuICAgIGhlaWdodDogYXV0bztcXHJcXG4gICAgLyogZGVwZW5kcyBvbiBzdmcgcmF0aW8gKi9cXHJcXG4gICAgcGFkZGluZy1ib3R0b206IDE3JTtcXHJcXG4gICAgLyogYXNwZWN0IHJhdGlvICovXFxyXFxuICAgIHZlcnRpY2FsLWFsaWduOiB0b3A7XFxyXFxuICAgIG92ZXJmbG93OiB2aXNpYmxlO1xcclxcbn1cXHJcXG5cXHJcXG4uc3ZnLWRlbmRyb2dyYW0tY29udGFpbmVyIHtcXHJcXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcclxcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XFxyXFxuICAgIGhlaWdodDogYXV0bztcXHJcXG4gICAgdmVydGljYWwtYWxpZ246IHRvcDtcXHJcXG4gICAgb3ZlcmZsb3c6IHZpc2libGU7XFxyXFxufVxcclxcblxcclxcbi5heGlzIHBhdGgge1xcclxcbiAgICBkaXNwbGF5OiBub25lO1xcclxcbn1cXHJcXG5cXHJcXG4uYXhpcyBsaW5lIHtcXHJcXG4gICAgc3Ryb2tlLW9wYWNpdHk6IDAuMztcXHJcXG4gICAgc2hhcGUtcmVuZGVyaW5nOiBjcmlzcEVkZ2VzO1xcclxcbn1cXHJcXG5cXHJcXG4ueCB7XFxyXFxuICAgIGZvbnQtc2l6ZTogMWVtO1xcclxcbn1cXHJcXG5cXHJcXG4ueSB7XFxyXFxuICAgIGZvbnQtc2l6ZTogMWVtO1xcclxcbn1cXHJcXG5cXHJcXG4uYXhpcy1saW5lLWNoYXJ0IHBhdGggbGluZSB7XFxyXFxuICAgIGZpbGw6IG5vbmU7XFxyXFxuICAgIHN0cm9rZTogIzAwMDtcXHJcXG4gICAgc2hhcGUtcmVuZGVyaW5nOiBjcmlzcEVkZ2VzO1xcclxcbn1cXHJcXG5cXHJcXG4ubGluZSB7XFxyXFxuICAgIGZpbGw6IG5vbmU7XFxyXFxuICAgIHN0cm9rZS13aWR0aDogNXB4O1xcclxcbn1cXHJcXG5cXHJcXG4vKiBUaW1lICAqL1xcclxcblxcclxcbi5mcmFtZS10ZXh0IHtcXHJcXG4gICAgbWFyZ2luLXRvcDogMDtcXHJcXG4gICAgbWFyZ2luLWJvdHRvbTogMDtcXHJcXG4gICAgZm9udC1zaXplOiAyZW07XFxyXFxuICAgIGNvbG9yOiBpbmhlcml0O1xcclxcbiAgICBmb250LXdlaWdodDogNTAwO1xcclxcbiAgICBsaW5lLWhlaWdodDogMS4xO1xcclxcbn1cXHJcXG5cXHJcXG4vKiBTbGlkZXIgdGlja3MgICovXFxyXFxuXFxyXFxuLnVpLXNsaWRlci10aWNrIHtcXHJcXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcclxcbiAgICB3aWR0aDogM3B4O1xcclxcbiAgICBiYWNrZ3JvdW5kOiAjMzM3YWI3O1xcclxcbiAgICBoZWlnaHQ6IDAuOGVtO1xcclxcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxyXFxufVxcclxcblxcclxcbi8qIExhb2RpbmcgZ2lmICAgKi9cXHJcXG5cXHJcXG4jbG9hZGluZyB7XFxyXFxuICAgIGRpc3BsYXk6IGJsb2NrO1xcclxcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxyXFxufVxcclxcblxcclxcbi8qIENvbG9yIGxlZ2VuZCAgICAqL1xcclxcblxcclxcbi5sZWdlbmQge1xcclxcbiAgICBmb250LXNpemU6IDEycHg7XFxyXFxuICAgIHN0cm9rZTogIzAwMDtcXHJcXG59XFxyXFxuXFxyXFxuLmxlZ2VuZC10ZXh0IHtcXHJcXG4gICAgZm9udC1zaXplOiAxLjJlbTtcXHJcXG4gICAgY29sb3I6IGluaGVyaXQ7XFxyXFxuICAgIGxpbmUtaGVpZ2h0OiAxLjE7XFxyXFxufVxcclxcblxcclxcbi5saW5lLWNoYXJ0LWxlZ2VuZC10ZXh0IHtcXHJcXG4gICAgZm9udC1zaXplOiAyZW07XFxyXFxuICAgIGNvbG9yOiBpbmhlcml0O1xcclxcbiAgICBsaW5lLWhlaWdodDogMS4xO1xcclxcbn1cXHJcXG5cXHJcXG4udGltZS1saW5lIHtcXHJcXG4gICAgZmlsbDogbm9uZTtcXHJcXG4gICAgc3Ryb2tlLXdpZHRoOiA1cHg7XFxyXFxuICAgIHN0cm9rZTogIzAwMDtcXHJcXG59XFxyXFxuXFxyXFxuLypzd2FybSBmZWF0dXJlcyAqL1xcclxcblxcclxcbi5jZW50cm9pZCB7XFxyXFxuICAgIGZpbGwtb3BhY2l0eTogMDtcXHJcXG4gICAgc3Ryb2tlOiAjZTcyOThhO1xcclxcbiAgICBzdHJva2Utd2lkdGg6IDNweDtcXHJcXG59XFxyXFxuXFxyXFxuLm1lZG9pZCB7XFxyXFxuICAgIGZpbGw6ICNlNzI5OGEgIWltcG9ydGFudDtcXHJcXG4gICAgc3Ryb2tlOiAjZTcyOThhICFpbXBvcnRhbnQ7XFxyXFxufVxcclxcblxcclxcbi5odWxsLXBhdGgge1xcclxcbiAgICBmaWxsOiAjZmZmO1xcclxcbiAgICBmaWxsLW9wYWNpdHk6IDA7XFxyXFxuICAgIHN0cm9rZS13aWR0aDogMztcXHJcXG4gICAgc3Ryb2tlOiAjMjUyNTI1O1xcclxcbiAgICBzdHJva2Utb3BhY2l0eTogMC41O1xcclxcbn1cXHJcXG5cXHJcXG4uaGllcmFyY2h5LWdyb3VwIHtcXHJcXG4gICAgc3Ryb2tlLXdpZHRoOiAxMDtcXHJcXG4gICAgc3Ryb2tlLWxpbmVqb2luOiByb3VuZDtcXHJcXG4gICAgb3BhY2l0eTogMC4yO1xcclxcbn1cXHJcXG5cXHJcXG4uZGVsYXVuYXktdHJpYW5ndWxhdGlvbiB7XFxyXFxuICAgIGZpbGwtb3BhY2l0eTogMDtcXHJcXG4gICAgc3Ryb2tlLXdpZHRoOiAyO1xcclxcbiAgICBzdHJva2U6ICMwMDA7XFxyXFxuICAgIHN0cm9rZS1vcGFjaXR5OiAwLjQ7XFxyXFxufVxcclxcblxcclxcbi8qIENvbG9yIGJyZXdlciBwaWNrZXIgZGl2ICovXFxyXFxuXFxyXFxuLnBhbGV0dGUge1xcclxcbiAgICBjdXJzb3I6IHBvaW50ZXI7XFxyXFxuICAgIGRpc3BsYXk6IHRhYmxlO1xcclxcbiAgICB2ZXJ0aWNhbC1hbGlnbjogYm90dG9tO1xcclxcbiAgICBtYXJnaW46IDRweCAwIDRweCA0cHg7XFxyXFxuICAgIGJhY2tncm91bmQ6ICNmZmY7XFxyXFxuICAgIGJvcmRlcjogc29saWQgMXB4ICNhYWE7XFxyXFxufVxcclxcblxcclxcbi5zd2F0Y2gge1xcclxcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxyXFxuICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XFxyXFxuICAgIHdpZHRoOiAyMnB4O1xcclxcbiAgICBoZWlnaHQ6IDIycHg7XFxyXFxufVxcclxcblxcclxcbi52b3Jvbm9pIHtcXHJcXG4gICAgZmlsbC1vcGFjaXR5OiAwO1xcclxcbiAgICBzdHJva2Utd2lkdGg6IDM7XFxyXFxuICAgIHN0cm9rZTogIzAwMDtcXHJcXG4gICAgc3Ryb2tlLW9wYWNpdHk6IDAuMjtcXHJcXG59XFxyXFxuXFxyXFxuLyogVG9vbHRpcCAqL1xcclxcblxcclxcbmRpdi50b29sdGlwIHtcXHJcXG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XFxyXFxuICAgIG9wYWNpdHk6IDA7XFxyXFxuICAgIGJhY2tncm91bmQ6IHJnYigyNTUsIDI1NSwgMjU1KSAhaW1wb3J0YW50O1xcclxcbiAgICBib3JkZXItbGVmdC1jb2xvcjogIzFiODA5ZSAhaW1wb3J0YW50O1xcclxcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjZWVlO1xcclxcbiAgICBib3JkZXItbGVmdC13aWR0aDogNXB4O1xcclxcbiAgICBib3JkZXItcmFkaXVzOiAzcHg7XFxyXFxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXHJcXG59XFxyXFxuXFxyXFxuZGl2LnRvb2x0aXAgdGFibGUgdGQ6bnRoLWNoaWxkKDIpIHtcXHJcXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xcclxcbiAgICBmb250LXdlaWdodDogYm9sZDtcXHJcXG59XFxyXFxuXFxyXFxuLnRvb2x0aXAtc3BhbiB7XFxyXFxuICAgIGRpc3BsYXk6IGJsb2NrO1xcclxcbiAgICB3aWR0aDogMTUwcHg7XFxyXFxuICAgIHdvcmQtd3JhcDogYnJlYWstd29yZDtcXHJcXG4gICAgZm9udC1zaXplOiAxLjVlbTtcXHJcXG59XFxyXFxuXFxyXFxuLnVwcGVyLW91dGVyLWFyZWEsIC5sb3dlci1vdXRlci1hcmVhIHtcXHJcXG4gICAgc3Ryb2tlLXdpZHRoOiAxO1xcclxcbiAgICBmaWxsOiAjNzRhOWNmO1xcclxcbiAgICBzdHJva2U6ICMzNjkwYzA7XFxyXFxufVxcclxcblxcclxcbi51cHBlci1pbm5lci1hcmVhLCAubG93ZXItaW5uZXItYXJlYSB7XFxyXFxuICAgIHN0cm9rZS13aWR0aDogMTtcXHJcXG4gICAgZmlsbDogIzA0NWE4ZDtcXHJcXG4gICAgc3Ryb2tlOiAjMDIzODU4O1xcclxcbn1cXHJcXG5cXHJcXG4ubWVkaWFuLWxpbmUge1xcclxcbiAgICBmaWxsOiBub25lO1xcclxcbiAgICBzdHJva2U6ICM1MjUyNTI7XFxyXFxuICAgIHN0cm9rZS13aWR0aDogNTtcXHJcXG59XFxyXFxuXFxyXFxuLnNlbGVjdGVkIHtcXHJcXG4gICAgYmFja2dyb3VuZDogIzk5OTtcXHJcXG4gICAgYm9yZGVyOiA0cHggc29saWQgIzRkNGQ0ZDtcXHJcXG4gICAgLW1vei1ib3JkZXItcmFkaXVzOiA1cHg7XFxyXFxuICAgIC13ZWJraXQtYm9yZGVyLXJhZGl1czogNXB4O1xcclxcbiAgICBib3gtc2hhZG93OiAxcHggMnB4IDRweCByZ2JhKDAsIDAsIDAsIC40KTtcXHJcXG59XFxyXFxuXFxyXFxuLnpvb20ge1xcclxcbiAgICBmaWxsOiBub25lO1xcclxcbiAgICBwb2ludGVyLWV2ZW50czogYWxsO1xcclxcbn1cXHJcXG5cXHJcXG4ueC5heGlzLWxpbmUtY2hhcnQ+Zz50ZXh0IHtcXHJcXG4gICAgZm9udC1zaXplOiAzZW07XFxyXFxuICAgIGNvbG9yOiBpbmhlcml0O1xcclxcbiAgICBsaW5lLWhlaWdodDogMS4xO1xcclxcbn1cXHJcXG5cXHJcXG4uYXJyb3cge1xcclxcbiAgICBzdHJva2Utd2lkdGg6IDE7XFxyXFxufVxcclxcblxcclxcbiNjZW50cm9pZC1saW5lIHtcXHJcXG4gICAgc3Ryb2tlLXdpZHRoOiAxO1xcclxcbiAgICBzdHJva2U6ICNlNzI5OGE7XFxyXFxufVxcclxcblxcclxcbiNjZW50cm9pZC1hcnJvdyB7XFxyXFxuICAgIGZpbGw6ICNlNzI5OGE7XFxyXFxufVxcclxcblxcclxcbi5tZXRhZGF0YS1zd2F0Y2gge1xcclxcbiAgICB3aWR0aDogMzBweDtcXHJcXG4gICAgaGVpZ2h0OiAzMHB4O1xcclxcbiAgICBib3JkZXItcmFkaXVzOiAzcHg7XFxyXFxuICAgIGJvcmRlcjogMnB4IHNvbGlkICM2NjY7XFxyXFxufVxcclxcblxcclxcbi5tZXRhZGF0YS1zd2F0Y2gtY2xpY2thYmxlOmhvdmVyIHtcXHJcXG4gICAgYm9yZGVyOiAycHggc29saWQgIzAwMDtcXHJcXG4gICAgY3Vyc29yOiBwb2ludGVyO1xcclxcbn1cXHJcXG5cXHJcXG4uZHJvcGRvd24tbWVudSB7XFxyXFxuICAgIG1pbi13aWR0aDogNDBweDtcXHJcXG4gICAgcGFkZGluZzogNXB4O1xcclxcbn1cXHJcXG5cXHJcXG4ubWV0YWRhdGEtbGVnZW5kIHtcXHJcXG4gICAgbGlzdC1zdHlsZTogbm9uZTtcXHJcXG4gICAgbWFyZ2luLXRvcDogMTBweDtcXHJcXG59XFxyXFxuXFxyXFxuLm1ldGFkYXRhLWxlZ2VuZCBsaSB7XFxyXFxuICAgIGZsb2F0OiBsZWZ0O1xcclxcbiAgICBtYXJnaW4tcmlnaHQ6IDEwcHg7XFxyXFxufVxcclxcblxcclxcbi5tZXRhZGF0YS1sZWdlbmQgc3BhbiB7XFxyXFxuICAgIGJvcmRlcjogMnB4IHNvbGlkICM2NjY7XFxyXFxuICAgIGZsb2F0OiBsZWZ0O1xcclxcbiAgICB3aWR0aDogMzBweDtcXHJcXG4gICAgaGVpZ2h0OiAzMHB4O1xcclxcbn1cXHJcXG5cXHJcXG4ubWV0YWRhdGEtbGVnZW5kIC5ibC1hdmcge1xcclxcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjN2ZjOTdmO1xcclxcbn1cXHJcXG5cXHJcXG4ubWV0YWRhdGEtbGVnZW5kIC5hdmcge1xcclxcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmRjMDg2O1xcclxcbn1cXHJcXG5cXHJcXG4ubWV0YWRhdGEtbGVnZW5kIC5hYi1hdmcge1xcclxcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzg2Y2IwO1xcclxcbn1cXHJcXG5cXHJcXG4ubmV0d29yay1lZGdlcyB7XFxyXFxuICAgIGZpbGwtb3BhY2l0eTogMDtcXHJcXG4gICAgc3Ryb2tlLXdpZHRoOiAyO1xcclxcbn1cXHJcXG5cXHJcXG4ubmV0d29yay1iYWNrZ3JvdW5kLWVkZ2VzIHtcXHJcXG4gICAgZmlsbC1vcGFjaXR5OiAwO1xcclxcbiAgICBzdHJva2Utb3BhY2l0eTogMC4yNTtcXHJcXG4gICAgc3Ryb2tlOiAjNzM3MzczO1xcclxcbn1cXHJcXG5cXHJcXG4ubm9kZSB0ZXh0IHtcXHJcXG4gICAgZm9udDogMTJweCBzYW5zLXNlcmlmO1xcclxcbn1cXHJcXG5cXHJcXG4ubm9kZS0taW50ZXJuYWwgdGV4dCB7XFxyXFxuICAgIHRleHQtc2hhZG93OiAwIDFweCAwICNmZmYsIDAgLTFweCAwICNmZmYsIDFweCAwIDAgI2ZmZiwgLTFweCAwIDAgI2ZmZjtcXHJcXG59XFxyXFxuXFxyXFxuLmxpbmsge1xcclxcbiAgICBmaWxsOiBub25lO1xcclxcbiAgICBzdHJva2U6ICM2MzYzNjM7XFxyXFxuICAgIHN0cm9rZS13aWR0aDogNXB4O1xcclxcbn1cXHJcXG5cXHJcXG4jYWN0aXZlLW5ldHdvcmstbmFtZSB7XFxyXFxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xcclxcbiAgICBjb2xvcjogIzI5NjI5MjtcXHJcXG59XFxyXFxuXFxyXFxuLmFjdGl2ZS1sZXZlbCB7XFxyXFxuICAgIGZpbGw6ICMzODZjYjA7XFxyXFxufVxcclxcblxcclxcbiNkZW5kcm9ncmFtLXBhbmVsIHtcXHJcXG4gICAgcG9zaXRpb246IGluaXRpYWw7XFxyXFxufVxcclxcblxcclxcbiNkZW5kcm9ncmFtLXBhbmVsIHtcXHJcXG4gICAgZGlzcGxheTogbm9uZVxcclxcbn1cXHJcXG5cXHJcXG4uc2hvdy1kZW5kcm9ncmFtIHtcXHJcXG4gICAgZmxvYXQ6IHJpZ2h0O1xcclxcbiAgICBib3JkZXItcmFkaXVzOiAzcHg7XFxyXFxuICAgIGJvcmRlcjogMXB4IHNvbGlkICNEMUQzRDQ7XFxyXFxuICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7XFxyXFxufVxcclxcblxcclxcbi5zaG93LWRlbmRyb2dyYW06aG92ZXIge1xcclxcbiAgICBiYWNrZ3JvdW5kOiAjRDFEM0Q0O1xcclxcbn1cXHJcXG5cXHJcXG4uZGVuZHJvZ3JhbS10ZXh0IHtcXHJcXG4gICAgZm9udC1zaXplOiAxMGVtICFpbXBvcnRhbnQ7XFxyXFxufVxcclxcblxcclxcbi5oaWdobGlnaHQtaGllcmFyY2h5IHtcXHJcXG4gICAgZmlsbDogIzI1MjUyNTtcXHJcXG4gICAgc3Ryb2tlOiAjMjUyNTI1O1xcclxcbiAgICBzdHJva2Utd2lkdGg6IDEwO1xcclxcbiAgICBzdHJva2UtbGluZWpvaW46IHJvdW5kO1xcclxcbiAgICBvcGFjaXR5OiAwLjM7XFxyXFxufVxcclxcblxcclxcbi5hbmltYWwtaGlnaGxpZ2h0IHtcXHJcXG4gICAgZmlsbDogI2M1MWI3ZCAhaW1wb3J0YW50O1xcclxcbn1cXHJcXG5cXHJcXG4jZGVuZHJvZ3JhbS1idXR0b25zLWRpdiAuYnRuIHNwYW4uZ2x5cGhpY29uIHtcXHJcXG4gICAgb3BhY2l0eTogMDtcXHJcXG59XFxyXFxuXFxyXFxuI2RlbmRyb2dyYW0tYnV0dG9ucy1kaXYgLmJ0bi5hY3RpdmUgc3Bhbi5nbHlwaGljb24ge1xcclxcbiAgICBvcGFjaXR5OiAxO1xcclxcbn1cXHJcXG5cXHJcXG4jZGVuZHJvZ3JhbS1idXR0b25zLWRpdiB7XFxyXFxuICAgIGJvcmRlcjogMnB4IHNvbGlkICNEMUQzRDQ7XFxyXFxuICAgIGJvcmRlci1yYWRpdXM6IDVweDtcXHJcXG59XFxyXFxuXFxyXFxuI2RlbmRyb2dyYW0tbGVnZW5kIHtcXHJcXG4gICAgbWFyZ2luLWxlZnQ6IDIwcHg7XFxyXFxufVxcclxcblxcclxcbi5pbnRlcnNlY3Rpb24ge1xcclxcbiAgICBmaWxsOiB1cmwoI3N0cmlwZWQpICFpbXBvcnRhbnQ7XFxyXFxuICAgIHN0cm9rZTogIzY3MDAwZDtcXHJcXG59XFxyXFxuXFxyXFxuLnN5bS1kaWZmZXJlbmNlIHtcXHJcXG4gICAgZmlsbDogdXJsKCNzdHJpcGVkKSAhaW1wb3J0YW50O1xcclxcbiAgICBzdHJva2U6ICM2NzAwMGQ7XFxyXFxufVxcclxcblxcclxcbi5tb2RhbC1sZyB7XFxyXFxuICAgIG1heC13aWR0aDogODAlO1xcclxcbn1cXHJcXG5cXHJcXG4uYmFja2dyb3VuZC1pbWFnZSB7XFxyXFxuICAgIGJhY2tncm91bmQ6ICNmZmY7XFxyXFxufVwiLCBcIlwiXSk7XG4vLyBFeHBvcnRzXG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHM7XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuLypcbiAgTUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcbiAgQXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cbi8vIGNzcyBiYXNlIGNvZGUsIGluamVjdGVkIGJ5IHRoZSBjc3MtbG9hZGVyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodXNlU291cmNlTWFwKSB7XG4gIHZhciBsaXN0ID0gW107IC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcblxuICBsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICB2YXIgY29udGVudCA9IGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSwgdXNlU291cmNlTWFwKTtcblxuICAgICAgaWYgKGl0ZW1bMl0pIHtcbiAgICAgICAgcmV0dXJuIFwiQG1lZGlhIFwiLmNvbmNhdChpdGVtWzJdLCBcIiB7XCIpLmNvbmNhdChjb250ZW50LCBcIn1cIik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjb250ZW50O1xuICAgIH0pLmpvaW4oJycpO1xuICB9OyAvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdFxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuXG5cbiAgbGlzdC5pID0gZnVuY3Rpb24gKG1vZHVsZXMsIG1lZGlhUXVlcnksIGRlZHVwZSkge1xuICAgIGlmICh0eXBlb2YgbW9kdWxlcyA9PT0gJ3N0cmluZycpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgbW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgJyddXTtcbiAgICB9XG5cbiAgICB2YXIgYWxyZWFkeUltcG9ydGVkTW9kdWxlcyA9IHt9O1xuXG4gICAgaWYgKGRlZHVwZSkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItZGVzdHJ1Y3R1cmluZ1xuICAgICAgICB2YXIgaWQgPSB0aGlzW2ldWzBdO1xuXG4gICAgICAgIGlmIChpZCAhPSBudWxsKSB7XG4gICAgICAgICAgYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IG1vZHVsZXMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgaXRlbSA9IFtdLmNvbmNhdChtb2R1bGVzW19pXSk7XG5cbiAgICAgIGlmIChkZWR1cGUgJiYgYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpdGVtWzBdXSkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29udGludWVcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChtZWRpYVF1ZXJ5KSB7XG4gICAgICAgIGlmICghaXRlbVsyXSkge1xuICAgICAgICAgIGl0ZW1bMl0gPSBtZWRpYVF1ZXJ5O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW1bMl0gPSBcIlwiLmNvbmNhdChtZWRpYVF1ZXJ5LCBcIiBhbmQgXCIpLmNvbmNhdChpdGVtWzJdKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBsaXN0LnB1c2goaXRlbSk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBsaXN0O1xufTtcblxuZnVuY3Rpb24gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtLCB1c2VTb3VyY2VNYXApIHtcbiAgdmFyIGNvbnRlbnQgPSBpdGVtWzFdIHx8ICcnOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWRlc3RydWN0dXJpbmdcblxuICB2YXIgY3NzTWFwcGluZyA9IGl0ZW1bM107XG5cbiAgaWYgKCFjc3NNYXBwaW5nKSB7XG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH1cblxuICBpZiAodXNlU291cmNlTWFwICYmIHR5cGVvZiBidG9hID09PSAnZnVuY3Rpb24nKSB7XG4gICAgdmFyIHNvdXJjZU1hcHBpbmcgPSB0b0NvbW1lbnQoY3NzTWFwcGluZyk7XG4gICAgdmFyIHNvdXJjZVVSTHMgPSBjc3NNYXBwaW5nLnNvdXJjZXMubWFwKGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICAgIHJldHVybiBcIi8qIyBzb3VyY2VVUkw9XCIuY29uY2F0KGNzc01hcHBpbmcuc291cmNlUm9vdCB8fCAnJykuY29uY2F0KHNvdXJjZSwgXCIgKi9cIik7XG4gICAgfSk7XG4gICAgcmV0dXJuIFtjb250ZW50XS5jb25jYXQoc291cmNlVVJMcykuY29uY2F0KFtzb3VyY2VNYXBwaW5nXSkuam9pbignXFxuJyk7XG4gIH1cblxuICByZXR1cm4gW2NvbnRlbnRdLmpvaW4oJ1xcbicpO1xufSAvLyBBZGFwdGVkIGZyb20gY29udmVydC1zb3VyY2UtbWFwIChNSVQpXG5cblxuZnVuY3Rpb24gdG9Db21tZW50KHNvdXJjZU1hcCkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgdmFyIGJhc2U2NCA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSk7XG4gIHZhciBkYXRhID0gXCJzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxcIi5jb25jYXQoYmFzZTY0KTtcbiAgcmV0dXJuIFwiLyojIFwiLmNvbmNhdChkYXRhLCBcIiAqL1wiKTtcbn0iLCIvKlxuXHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuXHRBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xuXG52YXIgc3R5bGVzSW5Eb20gPSB7fTtcblxudmFyXHRtZW1vaXplID0gZnVuY3Rpb24gKGZuKSB7XG5cdHZhciBtZW1vO1xuXG5cdHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdFx0aWYgKHR5cGVvZiBtZW1vID09PSBcInVuZGVmaW5lZFwiKSBtZW1vID0gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHRyZXR1cm4gbWVtbztcblx0fTtcbn07XG5cbnZhciBpc09sZElFID0gbWVtb2l6ZShmdW5jdGlvbiAoKSB7XG5cdC8vIFRlc3QgZm9yIElFIDw9IDkgYXMgcHJvcG9zZWQgYnkgQnJvd3NlcmhhY2tzXG5cdC8vIEBzZWUgaHR0cDovL2Jyb3dzZXJoYWNrcy5jb20vI2hhY2stZTcxZDg2OTJmNjUzMzQxNzNmZWU3MTVjMjIyY2I4MDVcblx0Ly8gVGVzdHMgZm9yIGV4aXN0ZW5jZSBvZiBzdGFuZGFyZCBnbG9iYWxzIGlzIHRvIGFsbG93IHN0eWxlLWxvYWRlclxuXHQvLyB0byBvcGVyYXRlIGNvcnJlY3RseSBpbnRvIG5vbi1zdGFuZGFyZCBlbnZpcm9ubWVudHNcblx0Ly8gQHNlZSBodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay1jb250cmliL3N0eWxlLWxvYWRlci9pc3N1ZXMvMTc3XG5cdHJldHVybiB3aW5kb3cgJiYgZG9jdW1lbnQgJiYgZG9jdW1lbnQuYWxsICYmICF3aW5kb3cuYXRvYjtcbn0pO1xuXG52YXIgZ2V0VGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpO1xufTtcblxudmFyIGdldEVsZW1lbnQgPSAoZnVuY3Rpb24gKGZuKSB7XG5cdHZhciBtZW1vID0ge307XG5cblx0cmV0dXJuIGZ1bmN0aW9uKHRhcmdldCkge1xuICAgICAgICAgICAgICAgIC8vIElmIHBhc3NpbmcgZnVuY3Rpb24gaW4gb3B0aW9ucywgdGhlbiB1c2UgaXQgZm9yIHJlc29sdmUgXCJoZWFkXCIgZWxlbWVudC5cbiAgICAgICAgICAgICAgICAvLyBVc2VmdWwgZm9yIFNoYWRvdyBSb290IHN0eWxlIGkuZVxuICAgICAgICAgICAgICAgIC8vIHtcbiAgICAgICAgICAgICAgICAvLyAgIGluc2VydEludG86IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZm9vXCIpLnNoYWRvd1Jvb3QgfVxuICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRhcmdldCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lbW9bdGFyZ2V0XSA9PT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0dmFyIHN0eWxlVGFyZ2V0ID0gZ2V0VGFyZ2V0LmNhbGwodGhpcywgdGFyZ2V0KTtcblx0XHRcdC8vIFNwZWNpYWwgY2FzZSB0byByZXR1cm4gaGVhZCBvZiBpZnJhbWUgaW5zdGVhZCBvZiBpZnJhbWUgaXRzZWxmXG5cdFx0XHRpZiAod2luZG93LkhUTUxJRnJhbWVFbGVtZW50ICYmIHN0eWxlVGFyZ2V0IGluc3RhbmNlb2Ygd2luZG93LkhUTUxJRnJhbWVFbGVtZW50KSB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Ly8gVGhpcyB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhY2Nlc3MgdG8gaWZyYW1lIGlzIGJsb2NrZWRcblx0XHRcdFx0XHQvLyBkdWUgdG8gY3Jvc3Mtb3JpZ2luIHJlc3RyaWN0aW9uc1xuXHRcdFx0XHRcdHN0eWxlVGFyZ2V0ID0gc3R5bGVUYXJnZXQuY29udGVudERvY3VtZW50LmhlYWQ7XG5cdFx0XHRcdH0gY2F0Y2goZSkge1xuXHRcdFx0XHRcdHN0eWxlVGFyZ2V0ID0gbnVsbDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0bWVtb1t0YXJnZXRdID0gc3R5bGVUYXJnZXQ7XG5cdFx0fVxuXHRcdHJldHVybiBtZW1vW3RhcmdldF1cblx0fTtcbn0pKCk7XG5cbnZhciBzaW5nbGV0b24gPSBudWxsO1xudmFyXHRzaW5nbGV0b25Db3VudGVyID0gMDtcbnZhclx0c3R5bGVzSW5zZXJ0ZWRBdFRvcCA9IFtdO1xuXG52YXJcdGZpeFVybHMgPSByZXF1aXJlKFwiLi91cmxzXCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGxpc3QsIG9wdGlvbnMpIHtcblx0aWYgKHR5cGVvZiBERUJVRyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBERUJVRykge1xuXHRcdGlmICh0eXBlb2YgZG9jdW1lbnQgIT09IFwib2JqZWN0XCIpIHRocm93IG5ldyBFcnJvcihcIlRoZSBzdHlsZS1sb2FkZXIgY2Fubm90IGJlIHVzZWQgaW4gYSBub24tYnJvd3NlciBlbnZpcm9ubWVudFwiKTtcblx0fVxuXG5cdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG5cdG9wdGlvbnMuYXR0cnMgPSB0eXBlb2Ygb3B0aW9ucy5hdHRycyA9PT0gXCJvYmplY3RcIiA/IG9wdGlvbnMuYXR0cnMgOiB7fTtcblxuXHQvLyBGb3JjZSBzaW5nbGUtdGFnIHNvbHV0aW9uIG9uIElFNi05LCB3aGljaCBoYXMgYSBoYXJkIGxpbWl0IG9uIHRoZSAjIG9mIDxzdHlsZT5cblx0Ly8gdGFncyBpdCB3aWxsIGFsbG93IG9uIGEgcGFnZVxuXHRpZiAoIW9wdGlvbnMuc2luZ2xldG9uICYmIHR5cGVvZiBvcHRpb25zLnNpbmdsZXRvbiAhPT0gXCJib29sZWFuXCIpIG9wdGlvbnMuc2luZ2xldG9uID0gaXNPbGRJRSgpO1xuXG5cdC8vIEJ5IGRlZmF1bHQsIGFkZCA8c3R5bGU+IHRhZ3MgdG8gdGhlIDxoZWFkPiBlbGVtZW50XG4gICAgICAgIGlmICghb3B0aW9ucy5pbnNlcnRJbnRvKSBvcHRpb25zLmluc2VydEludG8gPSBcImhlYWRcIjtcblxuXHQvLyBCeSBkZWZhdWx0LCBhZGQgPHN0eWxlPiB0YWdzIHRvIHRoZSBib3R0b20gb2YgdGhlIHRhcmdldFxuXHRpZiAoIW9wdGlvbnMuaW5zZXJ0QXQpIG9wdGlvbnMuaW5zZXJ0QXQgPSBcImJvdHRvbVwiO1xuXG5cdHZhciBzdHlsZXMgPSBsaXN0VG9TdHlsZXMobGlzdCwgb3B0aW9ucyk7XG5cblx0YWRkU3R5bGVzVG9Eb20oc3R5bGVzLCBvcHRpb25zKTtcblxuXHRyZXR1cm4gZnVuY3Rpb24gdXBkYXRlIChuZXdMaXN0KSB7XG5cdFx0dmFyIG1heVJlbW92ZSA9IFtdO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBpdGVtID0gc3R5bGVzW2ldO1xuXHRcdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG5cblx0XHRcdGRvbVN0eWxlLnJlZnMtLTtcblx0XHRcdG1heVJlbW92ZS5wdXNoKGRvbVN0eWxlKTtcblx0XHR9XG5cblx0XHRpZihuZXdMaXN0KSB7XG5cdFx0XHR2YXIgbmV3U3R5bGVzID0gbGlzdFRvU3R5bGVzKG5ld0xpc3QsIG9wdGlvbnMpO1xuXHRcdFx0YWRkU3R5bGVzVG9Eb20obmV3U3R5bGVzLCBvcHRpb25zKTtcblx0XHR9XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IG1heVJlbW92ZS5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGRvbVN0eWxlID0gbWF5UmVtb3ZlW2ldO1xuXG5cdFx0XHRpZihkb21TdHlsZS5yZWZzID09PSAwKSB7XG5cdFx0XHRcdGZvciAodmFyIGogPSAwOyBqIDwgZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspIGRvbVN0eWxlLnBhcnRzW2pdKCk7XG5cblx0XHRcdFx0ZGVsZXRlIHN0eWxlc0luRG9tW2RvbVN0eWxlLmlkXTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG59O1xuXG5mdW5jdGlvbiBhZGRTdHlsZXNUb0RvbSAoc3R5bGVzLCBvcHRpb25zKSB7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGl0ZW0gPSBzdHlsZXNbaV07XG5cdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG5cblx0XHRpZihkb21TdHlsZSkge1xuXHRcdFx0ZG9tU3R5bGUucmVmcysrO1xuXG5cdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0ZG9tU3R5bGUucGFydHNbal0oaXRlbS5wYXJ0c1tqXSk7XG5cdFx0XHR9XG5cblx0XHRcdGZvcig7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdGRvbVN0eWxlLnBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR2YXIgcGFydHMgPSBbXTtcblxuXHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0cGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XG5cdFx0XHR9XG5cblx0XHRcdHN0eWxlc0luRG9tW2l0ZW0uaWRdID0ge2lkOiBpdGVtLmlkLCByZWZzOiAxLCBwYXJ0czogcGFydHN9O1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBsaXN0VG9TdHlsZXMgKGxpc3QsIG9wdGlvbnMpIHtcblx0dmFyIHN0eWxlcyA9IFtdO1xuXHR2YXIgbmV3U3R5bGVzID0ge307XG5cblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGl0ZW0gPSBsaXN0W2ldO1xuXHRcdHZhciBpZCA9IG9wdGlvbnMuYmFzZSA/IGl0ZW1bMF0gKyBvcHRpb25zLmJhc2UgOiBpdGVtWzBdO1xuXHRcdHZhciBjc3MgPSBpdGVtWzFdO1xuXHRcdHZhciBtZWRpYSA9IGl0ZW1bMl07XG5cdFx0dmFyIHNvdXJjZU1hcCA9IGl0ZW1bM107XG5cdFx0dmFyIHBhcnQgPSB7Y3NzOiBjc3MsIG1lZGlhOiBtZWRpYSwgc291cmNlTWFwOiBzb3VyY2VNYXB9O1xuXG5cdFx0aWYoIW5ld1N0eWxlc1tpZF0pIHN0eWxlcy5wdXNoKG5ld1N0eWxlc1tpZF0gPSB7aWQ6IGlkLCBwYXJ0czogW3BhcnRdfSk7XG5cdFx0ZWxzZSBuZXdTdHlsZXNbaWRdLnBhcnRzLnB1c2gocGFydCk7XG5cdH1cblxuXHRyZXR1cm4gc3R5bGVzO1xufVxuXG5mdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQgKG9wdGlvbnMsIHN0eWxlKSB7XG5cdHZhciB0YXJnZXQgPSBnZXRFbGVtZW50KG9wdGlvbnMuaW5zZXJ0SW50bylcblxuXHRpZiAoIXRhcmdldCkge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIkNvdWxkbid0IGZpbmQgYSBzdHlsZSB0YXJnZXQuIFRoaXMgcHJvYmFibHkgbWVhbnMgdGhhdCB0aGUgdmFsdWUgZm9yIHRoZSAnaW5zZXJ0SW50bycgcGFyYW1ldGVyIGlzIGludmFsaWQuXCIpO1xuXHR9XG5cblx0dmFyIGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wID0gc3R5bGVzSW5zZXJ0ZWRBdFRvcFtzdHlsZXNJbnNlcnRlZEF0VG9wLmxlbmd0aCAtIDFdO1xuXG5cdGlmIChvcHRpb25zLmluc2VydEF0ID09PSBcInRvcFwiKSB7XG5cdFx0aWYgKCFsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCkge1xuXHRcdFx0dGFyZ2V0Lmluc2VydEJlZm9yZShzdHlsZSwgdGFyZ2V0LmZpcnN0Q2hpbGQpO1xuXHRcdH0gZWxzZSBpZiAobGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AubmV4dFNpYmxpbmcpIHtcblx0XHRcdHRhcmdldC5pbnNlcnRCZWZvcmUoc3R5bGUsIGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wLm5leHRTaWJsaW5nKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcblx0XHR9XG5cdFx0c3R5bGVzSW5zZXJ0ZWRBdFRvcC5wdXNoKHN0eWxlKTtcblx0fSBlbHNlIGlmIChvcHRpb25zLmluc2VydEF0ID09PSBcImJvdHRvbVwiKSB7XG5cdFx0dGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcblx0fSBlbHNlIGlmICh0eXBlb2Ygb3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJvYmplY3RcIiAmJiBvcHRpb25zLmluc2VydEF0LmJlZm9yZSkge1xuXHRcdHZhciBuZXh0U2libGluZyA9IGdldEVsZW1lbnQob3B0aW9ucy5pbnNlcnRJbnRvICsgXCIgXCIgKyBvcHRpb25zLmluc2VydEF0LmJlZm9yZSk7XG5cdFx0dGFyZ2V0Lmluc2VydEJlZm9yZShzdHlsZSwgbmV4dFNpYmxpbmcpO1xuXHR9IGVsc2Uge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIltTdHlsZSBMb2FkZXJdXFxuXFxuIEludmFsaWQgdmFsdWUgZm9yIHBhcmFtZXRlciAnaW5zZXJ0QXQnICgnb3B0aW9ucy5pbnNlcnRBdCcpIGZvdW5kLlxcbiBNdXN0IGJlICd0b3AnLCAnYm90dG9tJywgb3IgT2JqZWN0LlxcbiAoaHR0cHM6Ly9naXRodWIuY29tL3dlYnBhY2stY29udHJpYi9zdHlsZS1sb2FkZXIjaW5zZXJ0YXQpXFxuXCIpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudCAoc3R5bGUpIHtcblx0aWYgKHN0eWxlLnBhcmVudE5vZGUgPT09IG51bGwpIHJldHVybiBmYWxzZTtcblx0c3R5bGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZSk7XG5cblx0dmFyIGlkeCA9IHN0eWxlc0luc2VydGVkQXRUb3AuaW5kZXhPZihzdHlsZSk7XG5cdGlmKGlkeCA+PSAwKSB7XG5cdFx0c3R5bGVzSW5zZXJ0ZWRBdFRvcC5zcGxpY2UoaWR4LCAxKTtcblx0fVxufVxuXG5mdW5jdGlvbiBjcmVhdGVTdHlsZUVsZW1lbnQgKG9wdGlvbnMpIHtcblx0dmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuXG5cdGlmKG9wdGlvbnMuYXR0cnMudHlwZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0b3B0aW9ucy5hdHRycy50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xuXHR9XG5cblx0YWRkQXR0cnMoc3R5bGUsIG9wdGlvbnMuYXR0cnMpO1xuXHRpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgc3R5bGUpO1xuXG5cdHJldHVybiBzdHlsZTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlTGlua0VsZW1lbnQgKG9wdGlvbnMpIHtcblx0dmFyIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcblxuXHRpZihvcHRpb25zLmF0dHJzLnR5cGUgPT09IHVuZGVmaW5lZCkge1xuXHRcdG9wdGlvbnMuYXR0cnMudHlwZSA9IFwidGV4dC9jc3NcIjtcblx0fVxuXHRvcHRpb25zLmF0dHJzLnJlbCA9IFwic3R5bGVzaGVldFwiO1xuXG5cdGFkZEF0dHJzKGxpbmssIG9wdGlvbnMuYXR0cnMpO1xuXHRpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgbGluayk7XG5cblx0cmV0dXJuIGxpbms7XG59XG5cbmZ1bmN0aW9uIGFkZEF0dHJzIChlbCwgYXR0cnMpIHtcblx0T2JqZWN0LmtleXMoYXR0cnMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHRcdGVsLnNldEF0dHJpYnV0ZShrZXksIGF0dHJzW2tleV0pO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24gYWRkU3R5bGUgKG9iaiwgb3B0aW9ucykge1xuXHR2YXIgc3R5bGUsIHVwZGF0ZSwgcmVtb3ZlLCByZXN1bHQ7XG5cblx0Ly8gSWYgYSB0cmFuc2Zvcm0gZnVuY3Rpb24gd2FzIGRlZmluZWQsIHJ1biBpdCBvbiB0aGUgY3NzXG5cdGlmIChvcHRpb25zLnRyYW5zZm9ybSAmJiBvYmouY3NzKSB7XG5cdCAgICByZXN1bHQgPSBvcHRpb25zLnRyYW5zZm9ybShvYmouY3NzKTtcblxuXHQgICAgaWYgKHJlc3VsdCkge1xuXHQgICAgXHQvLyBJZiB0cmFuc2Zvcm0gcmV0dXJucyBhIHZhbHVlLCB1c2UgdGhhdCBpbnN0ZWFkIG9mIHRoZSBvcmlnaW5hbCBjc3MuXG5cdCAgICBcdC8vIFRoaXMgYWxsb3dzIHJ1bm5pbmcgcnVudGltZSB0cmFuc2Zvcm1hdGlvbnMgb24gdGhlIGNzcy5cblx0ICAgIFx0b2JqLmNzcyA9IHJlc3VsdDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICBcdC8vIElmIHRoZSB0cmFuc2Zvcm0gZnVuY3Rpb24gcmV0dXJucyBhIGZhbHN5IHZhbHVlLCBkb24ndCBhZGQgdGhpcyBjc3MuXG5cdCAgICBcdC8vIFRoaXMgYWxsb3dzIGNvbmRpdGlvbmFsIGxvYWRpbmcgb2YgY3NzXG5cdCAgICBcdHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgIFx0XHQvLyBub29wXG5cdCAgICBcdH07XG5cdCAgICB9XG5cdH1cblxuXHRpZiAob3B0aW9ucy5zaW5nbGV0b24pIHtcblx0XHR2YXIgc3R5bGVJbmRleCA9IHNpbmdsZXRvbkNvdW50ZXIrKztcblxuXHRcdHN0eWxlID0gc2luZ2xldG9uIHx8IChzaW5nbGV0b24gPSBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucykpO1xuXG5cdFx0dXBkYXRlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCBmYWxzZSk7XG5cdFx0cmVtb3ZlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCB0cnVlKTtcblxuXHR9IGVsc2UgaWYgKFxuXHRcdG9iai5zb3VyY2VNYXAgJiZcblx0XHR0eXBlb2YgVVJMID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgVVJMLmNyZWF0ZU9iamVjdFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIFVSTC5yZXZva2VPYmplY3RVUkwgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBCbG9iID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgYnRvYSA9PT0gXCJmdW5jdGlvblwiXG5cdCkge1xuXHRcdHN0eWxlID0gY3JlYXRlTGlua0VsZW1lbnQob3B0aW9ucyk7XG5cdFx0dXBkYXRlID0gdXBkYXRlTGluay5iaW5kKG51bGwsIHN0eWxlLCBvcHRpb25zKTtcblx0XHRyZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpO1xuXG5cdFx0XHRpZihzdHlsZS5ocmVmKSBVUkwucmV2b2tlT2JqZWN0VVJMKHN0eWxlLmhyZWYpO1xuXHRcdH07XG5cdH0gZWxzZSB7XG5cdFx0c3R5bGUgPSBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucyk7XG5cdFx0dXBkYXRlID0gYXBwbHlUb1RhZy5iaW5kKG51bGwsIHN0eWxlKTtcblx0XHRyZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpO1xuXHRcdH07XG5cdH1cblxuXHR1cGRhdGUob2JqKTtcblxuXHRyZXR1cm4gZnVuY3Rpb24gdXBkYXRlU3R5bGUgKG5ld09iaikge1xuXHRcdGlmIChuZXdPYmopIHtcblx0XHRcdGlmIChcblx0XHRcdFx0bmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJlxuXHRcdFx0XHRuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJlxuXHRcdFx0XHRuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwXG5cdFx0XHQpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHR1cGRhdGUob2JqID0gbmV3T2JqKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmVtb3ZlKCk7XG5cdFx0fVxuXHR9O1xufVxuXG52YXIgcmVwbGFjZVRleHQgPSAoZnVuY3Rpb24gKCkge1xuXHR2YXIgdGV4dFN0b3JlID0gW107XG5cblx0cmV0dXJuIGZ1bmN0aW9uIChpbmRleCwgcmVwbGFjZW1lbnQpIHtcblx0XHR0ZXh0U3RvcmVbaW5kZXhdID0gcmVwbGFjZW1lbnQ7XG5cblx0XHRyZXR1cm4gdGV4dFN0b3JlLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKTtcblx0fTtcbn0pKCk7XG5cbmZ1bmN0aW9uIGFwcGx5VG9TaW5nbGV0b25UYWcgKHN0eWxlLCBpbmRleCwgcmVtb3ZlLCBvYmopIHtcblx0dmFyIGNzcyA9IHJlbW92ZSA/IFwiXCIgOiBvYmouY3NzO1xuXG5cdGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG5cdFx0c3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gcmVwbGFjZVRleHQoaW5kZXgsIGNzcyk7XG5cdH0gZWxzZSB7XG5cdFx0dmFyIGNzc05vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpO1xuXHRcdHZhciBjaGlsZE5vZGVzID0gc3R5bGUuY2hpbGROb2RlcztcblxuXHRcdGlmIChjaGlsZE5vZGVzW2luZGV4XSkgc3R5bGUucmVtb3ZlQ2hpbGQoY2hpbGROb2Rlc1tpbmRleF0pO1xuXG5cdFx0aWYgKGNoaWxkTm9kZXMubGVuZ3RoKSB7XG5cdFx0XHRzdHlsZS5pbnNlcnRCZWZvcmUoY3NzTm9kZSwgY2hpbGROb2Rlc1tpbmRleF0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRzdHlsZS5hcHBlbmRDaGlsZChjc3NOb2RlKTtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gYXBwbHlUb1RhZyAoc3R5bGUsIG9iaikge1xuXHR2YXIgY3NzID0gb2JqLmNzcztcblx0dmFyIG1lZGlhID0gb2JqLm1lZGlhO1xuXG5cdGlmKG1lZGlhKSB7XG5cdFx0c3R5bGUuc2V0QXR0cmlidXRlKFwibWVkaWFcIiwgbWVkaWEpXG5cdH1cblxuXHRpZihzdHlsZS5zdHlsZVNoZWV0KSB7XG5cdFx0c3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuXHR9IGVsc2Uge1xuXHRcdHdoaWxlKHN0eWxlLmZpcnN0Q2hpbGQpIHtcblx0XHRcdHN0eWxlLnJlbW92ZUNoaWxkKHN0eWxlLmZpcnN0Q2hpbGQpO1xuXHRcdH1cblxuXHRcdHN0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUxpbmsgKGxpbmssIG9wdGlvbnMsIG9iaikge1xuXHR2YXIgY3NzID0gb2JqLmNzcztcblx0dmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XG5cblx0Lypcblx0XHRJZiBjb252ZXJ0VG9BYnNvbHV0ZVVybHMgaXNuJ3QgZGVmaW5lZCwgYnV0IHNvdXJjZW1hcHMgYXJlIGVuYWJsZWRcblx0XHRhbmQgdGhlcmUgaXMgbm8gcHVibGljUGF0aCBkZWZpbmVkIHRoZW4gbGV0cyB0dXJuIGNvbnZlcnRUb0Fic29sdXRlVXJsc1xuXHRcdG9uIGJ5IGRlZmF1bHQuICBPdGhlcndpc2UgZGVmYXVsdCB0byB0aGUgY29udmVydFRvQWJzb2x1dGVVcmxzIG9wdGlvblxuXHRcdGRpcmVjdGx5XG5cdCovXG5cdHZhciBhdXRvRml4VXJscyA9IG9wdGlvbnMuY29udmVydFRvQWJzb2x1dGVVcmxzID09PSB1bmRlZmluZWQgJiYgc291cmNlTWFwO1xuXG5cdGlmIChvcHRpb25zLmNvbnZlcnRUb0Fic29sdXRlVXJscyB8fCBhdXRvRml4VXJscykge1xuXHRcdGNzcyA9IGZpeFVybHMoY3NzKTtcblx0fVxuXG5cdGlmIChzb3VyY2VNYXApIHtcblx0XHQvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yNjYwMzg3NVxuXHRcdGNzcyArPSBcIlxcbi8qIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsXCIgKyBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpICsgXCIgKi9cIjtcblx0fVxuXG5cdHZhciBibG9iID0gbmV3IEJsb2IoW2Nzc10sIHsgdHlwZTogXCJ0ZXh0L2Nzc1wiIH0pO1xuXG5cdHZhciBvbGRTcmMgPSBsaW5rLmhyZWY7XG5cblx0bGluay5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcblxuXHRpZihvbGRTcmMpIFVSTC5yZXZva2VPYmplY3RVUkwob2xkU3JjKTtcbn1cbiIsIlxuLyoqXG4gKiBXaGVuIHNvdXJjZSBtYXBzIGFyZSBlbmFibGVkLCBgc3R5bGUtbG9hZGVyYCB1c2VzIGEgbGluayBlbGVtZW50IHdpdGggYSBkYXRhLXVyaSB0b1xuICogZW1iZWQgdGhlIGNzcyBvbiB0aGUgcGFnZS4gVGhpcyBicmVha3MgYWxsIHJlbGF0aXZlIHVybHMgYmVjYXVzZSBub3cgdGhleSBhcmUgcmVsYXRpdmUgdG8gYVxuICogYnVuZGxlIGluc3RlYWQgb2YgdGhlIGN1cnJlbnQgcGFnZS5cbiAqXG4gKiBPbmUgc29sdXRpb24gaXMgdG8gb25seSB1c2UgZnVsbCB1cmxzLCBidXQgdGhhdCBtYXkgYmUgaW1wb3NzaWJsZS5cbiAqXG4gKiBJbnN0ZWFkLCB0aGlzIGZ1bmN0aW9uIFwiZml4ZXNcIiB0aGUgcmVsYXRpdmUgdXJscyB0byBiZSBhYnNvbHV0ZSBhY2NvcmRpbmcgdG8gdGhlIGN1cnJlbnQgcGFnZSBsb2NhdGlvbi5cbiAqXG4gKiBBIHJ1ZGltZW50YXJ5IHRlc3Qgc3VpdGUgaXMgbG9jYXRlZCBhdCBgdGVzdC9maXhVcmxzLmpzYCBhbmQgY2FuIGJlIHJ1biB2aWEgdGhlIGBucG0gdGVzdGAgY29tbWFuZC5cbiAqXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY3NzKSB7XG4gIC8vIGdldCBjdXJyZW50IGxvY2F0aW9uXG4gIHZhciBsb2NhdGlvbiA9IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93LmxvY2F0aW9uO1xuXG4gIGlmICghbG9jYXRpb24pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJmaXhVcmxzIHJlcXVpcmVzIHdpbmRvdy5sb2NhdGlvblwiKTtcbiAgfVxuXG5cdC8vIGJsYW5rIG9yIG51bGw/XG5cdGlmICghY3NzIHx8IHR5cGVvZiBjc3MgIT09IFwic3RyaW5nXCIpIHtcblx0ICByZXR1cm4gY3NzO1xuICB9XG5cbiAgdmFyIGJhc2VVcmwgPSBsb2NhdGlvbi5wcm90b2NvbCArIFwiLy9cIiArIGxvY2F0aW9uLmhvc3Q7XG4gIHZhciBjdXJyZW50RGlyID0gYmFzZVVybCArIGxvY2F0aW9uLnBhdGhuYW1lLnJlcGxhY2UoL1xcL1teXFwvXSokLywgXCIvXCIpO1xuXG5cdC8vIGNvbnZlcnQgZWFjaCB1cmwoLi4uKVxuXHQvKlxuXHRUaGlzIHJlZ3VsYXIgZXhwcmVzc2lvbiBpcyBqdXN0IGEgd2F5IHRvIHJlY3Vyc2l2ZWx5IG1hdGNoIGJyYWNrZXRzIHdpdGhpblxuXHRhIHN0cmluZy5cblxuXHQgL3VybFxccypcXCggID0gTWF0Y2ggb24gdGhlIHdvcmQgXCJ1cmxcIiB3aXRoIGFueSB3aGl0ZXNwYWNlIGFmdGVyIGl0IGFuZCB0aGVuIGEgcGFyZW5zXG5cdCAgICggID0gU3RhcnQgYSBjYXB0dXJpbmcgZ3JvdXBcblx0ICAgICAoPzogID0gU3RhcnQgYSBub24tY2FwdHVyaW5nIGdyb3VwXG5cdCAgICAgICAgIFteKShdICA9IE1hdGNoIGFueXRoaW5nIHRoYXQgaXNuJ3QgYSBwYXJlbnRoZXNlc1xuXHQgICAgICAgICB8ICA9IE9SXG5cdCAgICAgICAgIFxcKCAgPSBNYXRjaCBhIHN0YXJ0IHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICAoPzogID0gU3RhcnQgYW5vdGhlciBub24tY2FwdHVyaW5nIGdyb3Vwc1xuXHQgICAgICAgICAgICAgICAgIFteKShdKyAgPSBNYXRjaCBhbnl0aGluZyB0aGF0IGlzbid0IGEgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICAgICB8ICA9IE9SXG5cdCAgICAgICAgICAgICAgICAgXFwoICA9IE1hdGNoIGEgc3RhcnQgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICAgICAgICAgW14pKF0qICA9IE1hdGNoIGFueXRoaW5nIHRoYXQgaXNuJ3QgYSBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgICAgIFxcKSAgPSBNYXRjaCBhIGVuZCBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgKSAgPSBFbmQgR3JvdXBcbiAgICAgICAgICAgICAgKlxcKSA9IE1hdGNoIGFueXRoaW5nIGFuZCB0aGVuIGEgY2xvc2UgcGFyZW5zXG4gICAgICAgICAgKSAgPSBDbG9zZSBub24tY2FwdHVyaW5nIGdyb3VwXG4gICAgICAgICAgKiAgPSBNYXRjaCBhbnl0aGluZ1xuICAgICAgICkgID0gQ2xvc2UgY2FwdHVyaW5nIGdyb3VwXG5cdCBcXCkgID0gTWF0Y2ggYSBjbG9zZSBwYXJlbnNcblxuXHQgL2dpICA9IEdldCBhbGwgbWF0Y2hlcywgbm90IHRoZSBmaXJzdC4gIEJlIGNhc2UgaW5zZW5zaXRpdmUuXG5cdCAqL1xuXHR2YXIgZml4ZWRDc3MgPSBjc3MucmVwbGFjZSgvdXJsXFxzKlxcKCgoPzpbXikoXXxcXCgoPzpbXikoXSt8XFwoW14pKF0qXFwpKSpcXCkpKilcXCkvZ2ksIGZ1bmN0aW9uKGZ1bGxNYXRjaCwgb3JpZ1VybCkge1xuXHRcdC8vIHN0cmlwIHF1b3RlcyAoaWYgdGhleSBleGlzdClcblx0XHR2YXIgdW5xdW90ZWRPcmlnVXJsID0gb3JpZ1VybFxuXHRcdFx0LnRyaW0oKVxuXHRcdFx0LnJlcGxhY2UoL15cIiguKilcIiQvLCBmdW5jdGlvbihvLCAkMSl7IHJldHVybiAkMTsgfSlcblx0XHRcdC5yZXBsYWNlKC9eJyguKiknJC8sIGZ1bmN0aW9uKG8sICQxKXsgcmV0dXJuICQxOyB9KTtcblxuXHRcdC8vIGFscmVhZHkgYSBmdWxsIHVybD8gbm8gY2hhbmdlXG5cdFx0aWYgKC9eKCN8ZGF0YTp8aHR0cDpcXC9cXC98aHR0cHM6XFwvXFwvfGZpbGU6XFwvXFwvXFwvfFxccyokKS9pLnRlc3QodW5xdW90ZWRPcmlnVXJsKSkge1xuXHRcdCAgcmV0dXJuIGZ1bGxNYXRjaDtcblx0XHR9XG5cblx0XHQvLyBjb252ZXJ0IHRoZSB1cmwgdG8gYSBmdWxsIHVybFxuXHRcdHZhciBuZXdVcmw7XG5cblx0XHRpZiAodW5xdW90ZWRPcmlnVXJsLmluZGV4T2YoXCIvL1wiKSA9PT0gMCkge1xuXHRcdCAgXHQvL1RPRE86IHNob3VsZCB3ZSBhZGQgcHJvdG9jb2w/XG5cdFx0XHRuZXdVcmwgPSB1bnF1b3RlZE9yaWdVcmw7XG5cdFx0fSBlbHNlIGlmICh1bnF1b3RlZE9yaWdVcmwuaW5kZXhPZihcIi9cIikgPT09IDApIHtcblx0XHRcdC8vIHBhdGggc2hvdWxkIGJlIHJlbGF0aXZlIHRvIHRoZSBiYXNlIHVybFxuXHRcdFx0bmV3VXJsID0gYmFzZVVybCArIHVucXVvdGVkT3JpZ1VybDsgLy8gYWxyZWFkeSBzdGFydHMgd2l0aCAnLydcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gcGF0aCBzaG91bGQgYmUgcmVsYXRpdmUgdG8gY3VycmVudCBkaXJlY3Rvcnlcblx0XHRcdG5ld1VybCA9IGN1cnJlbnREaXIgKyB1bnF1b3RlZE9yaWdVcmwucmVwbGFjZSgvXlxcLlxcLy8sIFwiXCIpOyAvLyBTdHJpcCBsZWFkaW5nICcuLydcblx0XHR9XG5cblx0XHQvLyBzZW5kIGJhY2sgdGhlIGZpeGVkIHVybCguLi4pXG5cdFx0cmV0dXJuIFwidXJsKFwiICsgSlNPTi5zdHJpbmdpZnkobmV3VXJsKSArIFwiKVwiO1xuXHR9KTtcblxuXHQvLyBzZW5kIGJhY2sgdGhlIGZpeGVkIGNzc1xuXHRyZXR1cm4gZml4ZWRDc3M7XG59O1xuIiwiLyplc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtbGV0cyovXHJcbi8qZ2xvYmFsIHdpbmRvdywgZDMsICQqL1xyXG5pbXBvcnQge1xyXG4gICAgZGF0YXNldE1ldGFkYXRhLFxyXG4gICAgc3dhcm1EYXRhLFxyXG4gICAgYW5pbWFsSWRzXHJcbn0gZnJvbSAnLi4vZXhwbG9yZS5qcyc7XHJcblxyXG5pbXBvcnQgKiBhcyBTUFYgZnJvbSAnLi9zcGF0aWFsX3ZpZXcuanMnO1xyXG5cclxuaW1wb3J0ICogYXMgTmV0d29yayBmcm9tICcuLi9uZXR3b3JrLmpzJztcclxuXHJcbmV4cG9ydCBsZXQgc2xpZGVyOyAvLyB0aW1lIHNsaWRlciBvZiB0aGUgYXBwXHJcbmV4cG9ydCBsZXQgdG9vbHRpcDsgLy8gdG9vbHRpcCBmdW5jdGlvblxyXG5cclxuLyoqXHJcbiAqIEJydXNoIGVuZCBmdW5jdGlvblxyXG4gKiBhZGQgYWN0aXZlIGFuaW1hbHMgdG8gdGhlIGFycmF5IG9yIHJlbW92ZSB0aGVtXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gYnJ1c2hlbmQoKSB7XHJcbiAgICBsZXQgYXJyYXlBbmltYWxzID0gU1BWLmFycmF5QW5pbWFscztcclxuICAgIGxldCBhY3RpdmVBbmltYWxzID0gU1BWLmFjdGl2ZUFuaW1hbHM7XHJcbiAgICB2YXIgcmVjdCA9IGQzLmV2ZW50LnNlbGVjdGlvbjtcclxuICAgIC8vaXRlcmF0ZSBvdmVyIHRoZSAxNTEgZmlzaCB0byBjaGVjayB3aGljaCBhcmUgaW4gdGhlIGJydXNoXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFuaW1hbElkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHZhciBwb2ludCA9IFthcnJheUFuaW1hbHNbaV1bJ3AnXVswXSwgYXJyYXlBbmltYWxzW2ldWydwJ11bMV1dO1xyXG4gICAgICAgIC8vY2hlY2sgd2hpY2ggZmlzaCBhcmUgaW4gIHRoZSBicnVzaGVkIGFyZWFcclxuICAgICAgICBpZiAoKHJlY3RbMF1bMF0gPD0gcG9pbnRbMF0pICYmIChwb2ludFswXSA8PSByZWN0WzFdWzBdKSAmJlxyXG4gICAgICAgICAgICAocmVjdFswXVsxXSA8PSBwb2ludFsxXSkgJiYgKHBvaW50WzFdIDw9IHJlY3RbMV1bMV0pKSB7XHJcbiAgICAgICAgICAgIC8vIFBvaW50IGlzIGluIHRoZSBicnVzaFxyXG4gICAgICAgICAgICBhY3RpdmVBbmltYWxzLnB1c2goYXJyYXlBbmltYWxzW2ldWydhJ10pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFNQVi5zZXRBY3RpdmVBbmltYWxzKGFjdGl2ZUFuaW1hbHMpO1xyXG4gICAgaWYgKCEkKCcjcGxheS1idXR0b24nKVxyXG4gICAgICAgIC5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuICAgICAgICBTUFYuZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgU1BWLmRyYXcoKTtcclxuICAgIH1cclxuICAgICQoJyNicnVzaGluZy1idXR0b24nKVxyXG4gICAgICAgIC5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAvLyByZW1vdmUgdGhlIGJydXNoXHJcbiAgICAkKCcuYnJ1c2gnKVxyXG4gICAgICAgIC5yZW1vdmUoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEluaXRpYWxpemUgdGhlIHRvb2x0aXBcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpbml0VG9vbHRpcCgpIHtcclxuICAgIHRvb2x0aXAgPSBkMy5zZWxlY3QoJ2Rpdi50b29sdGlwJylcclxuICAgICAgICAuc3R5bGUoJ2xlZnQnLCAwICsgJ3B4JylcclxuICAgICAgICAuc3R5bGUoJ3RvcCcsIDAgKyAncHgnKVxyXG4gICAgICAgIC5vbignbW91c2VvdmVyJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHRvb2x0aXBcclxuICAgICAgICAgICAgICAgIC5zdHlsZSgnb3BhY2l0eScsIDEpO1xyXG4gICAgICAgIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogVG9vbHRpcCBmdW5jdGlvblxyXG4gKiBAcGFyYW0ge09iamVjdH0gZCAtIGQzIGRhdGEgb2JqZWN0IHdpdGggdGhlIG1ldGFkYXRhIGluZm9ybWF0aW9uXHJcbiAqXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gdG9vbHRpcEZ1bmN0aW9uKGQpIHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YXNldE1ldGFkYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGRbJ2EnXSA9PT0gZGF0YXNldE1ldGFkYXRhW2ldWydhbmltYWxfaWQnXSkge1xyXG4gICAgICAgICAgICB0b29sdGlwXHJcbiAgICAgICAgICAgICAgICAuc3R5bGUoJ2xlZnQnLCAoZDMuZXZlbnQucGFnZVggKyA1KSArICdweCcpXHJcbiAgICAgICAgICAgICAgICAuc3R5bGUoJ3RvcCcsIChkMy5ldmVudC5wYWdlWSAtIDEwMCkgKyAncHgnKVxyXG4gICAgICAgICAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgMSk7XHJcbiAgICAgICAgICAgIC8vIHNldCB0aGUgdmFsdWVzXHJcbiAgICAgICAgICAgIC8vIFRPRE8gbWFrZSB0aGlzIG1vZHVsYXJcclxuICAgICAgICAgICAgdG9vbHRpcC5zZWxlY3QoJyN0b29sdGlwLWFuaW1hbC1pZCcpXHJcbiAgICAgICAgICAgICAgICAuaHRtbChkYXRhc2V0TWV0YWRhdGFbaV1bJ2FuaW1hbF9pZCddKTtcclxuICAgICAgICAgICAgdG9vbHRpcC5zZWxlY3QoJyN0b29sdGlwLXNwZWNpZXMnKVxyXG4gICAgICAgICAgICAgICAgLmh0bWwoZGF0YXNldE1ldGFkYXRhW2ldWydzcGVjaWVzJ10pO1xyXG4gICAgICAgICAgICB0b29sdGlwLnNlbGVjdCgnI3Rvb2x0aXAtc2V4JylcclxuICAgICAgICAgICAgICAgIC5odG1sKGRhdGFzZXRNZXRhZGF0YVtpXVsnc2V4J10pO1xyXG4gICAgICAgICAgICB0b29sdGlwLnNlbGVjdCgnI3Rvb2x0aXAtc2l6ZScpXHJcbiAgICAgICAgICAgICAgICAuaHRtbChkYXRhc2V0TWV0YWRhdGFbaV1bJ3NpemUnXSk7XHJcbiAgICAgICAgICAgIHRvb2x0aXAuc2VsZWN0KCcjdG9vbHRpcC13ZWlnaHQnKVxyXG4gICAgICAgICAgICAgICAgLmh0bWwoZGF0YXNldE1ldGFkYXRhW2ldWyd3ZWlnaHQnXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufVxyXG5cclxuLyoqXHJcbiAqIEluaXRpYWxpemUgdGhlIHRpbWUgc2xpZGVyIGFuZCB0aGUgZHluYW1pYyBuZXR3b3JrIHNsaWRlclxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGluaXRTbGlkZXJzKCkge1xyXG4gICAgLy8gdGltZSBzbGlkZXJcclxuICAgIHNsaWRlciA9ICQoJyNzbGlkZXInKVxyXG4gICAgICAgIC5zbGlkZXIoe1xyXG4gICAgICAgICAgICBtaW46IDAsXHJcbiAgICAgICAgICAgIG1heDogc3dhcm1EYXRhLmxlbmd0aCxcclxuICAgICAgICAgICAgc3RlcDogMjUsXHJcbiAgICAgICAgICAgIHNsaWRlOiBmdW5jdGlvbihldmVudCwgdWkpIHtcclxuICAgICAgICAgICAgICAgIFNQVi5zZXRJbmRleFRpbWUodWkudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgLy8gaWYgcGF1c2VkIGFwcGx5IGNoYW5nZXNcclxuICAgICAgICAgICAgICAgIGlmICghJCgnI3BsYXktYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgICAgICAgIFNQVi5kcmF3KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIC8vIGluaXRpYWxpemUgdGhlIE5ldHdvcmsgc2xpZGVyXHJcbiAgICAkKCcjbmV0d29yay1zbGlkZXInKVxyXG4gICAgICAgIC5zbGlkZXIoe1xyXG4gICAgICAgICAgICByYW5nZTogJ21heCcsXHJcbiAgICAgICAgICAgIG1pbjogMCxcclxuICAgICAgICAgICAgbWF4OiAxLFxyXG4gICAgICAgICAgICBzdGVwOiAwLjAxLFxyXG4gICAgICAgICAgICB2YWx1ZTogMC41LFxyXG4gICAgICAgICAgICBzbGlkZTogZnVuY3Rpb24oZXZlbnQsIHVpKSB7XHJcbiAgICAgICAgICAgICAgICBOZXR3b3JrLnNldE5ldHdvckxpbWl0KHVpLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICQoJyNuZXR3b3JrLWxpbWl0JykudmFsKHVpLnZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgLy8gc2V0IHRleHQgZm9yIHRoZSBmaXJzdCBpbml0aWFsaXphdGlvblxyXG4gICAgJCgnI25ldHdvcmstbGltaXQnKS52YWwoMC41KTtcclxuXHJcbiAgICAvLyBnZXQgdGhlIG1heCBmcm9tIHRoZSBzbGlkZXIgdGhpcyBpcyBuZWVkZWQgdG8gY2FsY3VsYXRlIHRoZSB0aWNrc1xyXG4gICAgbGV0IG1heCA9IHNsaWRlci5zbGlkZXIoJ29wdGlvbicsICdtYXgnKTtcclxuICAgIGxldCBzcGFjZSA9IDEwMCAvIG1heDtcclxuICAgIC8vYXBwZW5kIHRoZSBtaW51dGUgdGlja3NcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWF4OyBpID0gaSArIDE1MDApIHtcclxuICAgICAgICAkKCc8c3BhbiBjbGFzcz1cInVpLXNsaWRlci10aWNrXCI+PC9zcGFuPicpXHJcbiAgICAgICAgICAgIC5jc3MoJ2xlZnQnLCAoc3BhY2UgKiBpKSArICclJylcclxuICAgICAgICAgICAgLmFwcGVuZFRvKHNsaWRlcik7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgIFNldHRlclxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbi8qKlxyXG4gKiBTZXQgdGhlIHRpbWUgc2xpZGVyIHRvIGEgbmV3IHZhbHVlXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSB2YWx1ZSAtIG5ldyB2YWx1ZSBmb3IgdGhlIHRpbWUgc2xpZGVyXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2V0VGltZVNsaWRlcih2YWx1ZSkge1xyXG4gICAgc2xpZGVyLnNsaWRlcigndmFsdWUnLCB2YWx1ZSk7XHJcbn0iLCIvKmVzbGludC1kaXNhYmxlIG5vLXVudXNlZC1sZXRzKi9cclxuLypnbG9iYWwgd2luZG93LCBkMywgJCwgY29sb3JicmV3ZXIqL1xyXG5pbXBvcnQgKiBhcyBTUFYgZnJvbSAnLi9zcGF0aWFsX3ZpZXcuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGNoYW5nZUxlZ2VuZFxyXG59IGZyb20gJy4vbGVnZW5kLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBkYXRhU2V0UGVyY2VudGlsZVxyXG59IGZyb20gJy4uL2V4cGxvcmUuanMnO1xyXG5cclxuZXhwb3J0IGxldCBjb2xvclNjYWxlID0ge1xyXG4gICAgdHlwZTogJ0xpbmVhcicsXHJcbiAgICBjb2xvcjogY29sb3JicmV3ZXIuQnVZbEJ1XHJcbn07XHJcblxyXG4vKipcclxuICogUmV0dXJucyB0aGUgY29sb3Igc2NhbGVcclxuICogQHJldHVybiB7Y29sb3JTY2FsZX0gYWN0aXZlIGNvbG9yIHNjYWxlIGlzIGluIGxpbmVhciBvciB0aHJlc2hvbGRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiByZXR1cm5Db2xvclNjYWxlKCkge1xyXG4gICAgLy9pZiBsaW5lYXIgaXMgY2hvb3NlblxyXG4gICAgaWYgKGNvbG9yU2NhbGVbJ3R5cGUnXSA9PT0gJ0xpbmVhcicpIHtcclxuICAgICAgICByZXR1cm4gZDMuc2NhbGVMaW5lYXIoKVxyXG4gICAgICAgICAgICAuZG9tYWluKFxyXG4gICAgICAgICAgICAgICAgZGF0YVNldFBlcmNlbnRpbGVbU1BWLmFjdGl2ZVNjYWxlXVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIC5yYW5nZShjb2xvclNjYWxlWydjb2xvciddKTtcclxuICAgIH0gLy9UaHJlc2hvbGQgY29sb3Igc2NhbGVcclxuICAgIGVsc2UgaWYgKGNvbG9yU2NhbGVbJ3R5cGUnXSA9PT0gJ1RocmVzaG9sZCcpIHtcclxuICAgICAgICByZXR1cm4gZDMuc2NhbGVUaHJlc2hvbGQoKVxyXG4gICAgICAgICAgICAuZG9tYWluKFxyXG4gICAgICAgICAgICAgICAgZGF0YVNldFBlcmNlbnRpbGVbU1BWLmFjdGl2ZVNjYWxlXVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIC5yYW5nZShjb2xvclNjYWxlWydjb2xvciddKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEluaXRpYWxpemUgdGhlIGNvbG9yIHBpY2tlclxyXG4gKiB3aXRoIGFsbCBsaXN0ZW5lcnMgaW5jbHVkZWRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpbml0Q29sb3JQaWNrZXIoKSB7XHJcbiAgICBkMy5zZWxlY3QoJy5jb2xvcnMtYm9keScpXHJcbiAgICAgICAgLnNlbGVjdEFsbCgnLnBhbGV0dGUnKVxyXG4gICAgICAgIC5kYXRhKGQzLmVudHJpZXMoY29sb3JicmV3ZXIpKVxyXG4gICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgLmFwcGVuZCgnc3BhbicpXHJcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3BhbGV0dGUnKVxyXG4gICAgICAgIC5hdHRyKCd0aXRsZScsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGQua2V5O1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgLy8gaGlnaHRsaWdodCB0aGUgcmlnaHQgcGFsZXR0ZVxyXG4gICAgICAgICAgICAkKCcucGFsZXR0ZScpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAkKCcucGFsZXR0ZVt0aXRsZT1cIicgKyBkLmtleSArICdcIl0nKS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgY29sb3JTY2FsZS5jb2xvciA9IGNvbG9yYnJld2VyW2Qua2V5XTtcclxuICAgICAgICAgICAgY2hhbmdlTGVnZW5kKCk7XHJcbiAgICAgICAgICAgIGlmICghJCgnI3BsYXktYnV0dG9uJylcclxuICAgICAgICAgICAgICAgIC5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAgIC8vZ28gYmFjayBvbmUgc2Vjb25kIGFuZCBkcmF3IHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAgICAgICAgICAvL3RoaXMgYXBwbHlzIHRoZSBjaGFuZ2VzXHJcbiAgICAgICAgICAgICAgICBTUFYuZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgICAgICAgICBTUFYuZHJhdygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuc2VsZWN0QWxsKCcuc3dhdGNoJylcclxuICAgICAgICAuZGF0YShmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkLnZhbHVlO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmVudGVyKClcclxuICAgICAgICAuYXBwZW5kKCdzcGFuJylcclxuICAgICAgICAuYXR0cignY2xhc3MnLCAnc3dhdGNoJylcclxuICAgICAgICAuc3R5bGUoJ2JhY2tncm91bmQtY29sb3InLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIC8vIGhpZ2hsaWdodCB0aGUgc2VsZWN0ZWQgY29sb3Igc2NoZW1lXHJcbiAgICAkKCcucGFsZXR0ZVt0aXRsZT1cIkJ1WWxCdVwiXScpLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xyXG59XHJcbiIsIi8qZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLWxldHMqL1xyXG4vKmdsb2JhbCB3aW5kb3csICQsICovXHJcbi8vIGltcG9ydCAqIGFzIHNwdiBmcm9tICcuL3NwYXRpYWxfdmlldy5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgZGF0YXNldE1ldGFkYXRhXHJcbn0gZnJvbSAnLi9leHBsb3JlLmpzJztcclxuXHJcblxyXG5leHBvcnQgbGV0IG1ldGFkYXRhQ29sb3IgPSB7fTsgLy8gc2F2ZSB0aGUgbWV0YWRhdGEgY29sb3JpbmdcclxuXHJcbi8qKlxyXG4gKiBJbml0IE1ldGFkYXRhIGJ1dHRvbnMgXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZU1ldGFkZGF0YSgpIHtcclxuICAgIGxldCBjb2xvcnMgPSBbJyNmZmYnLCAnI2U0MWExYycsICcjMzc3ZWI4JywgJyM0ZGFmNGEnLCAnIzk4NGVhMycsICcjZmY3ZjAwJywgJyNmZmZmMzMnLCAnI2E2NTYyOCddO1xyXG4gICAgLy8gYWRkIHRoZSBkYXRhIHRvIHRoZSBtZXRhZGF0YSBtb2RhbFxyXG4gICAgaWYgKGRhdGFzZXRNZXRhZGF0YS5sZW5ndGgpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGFzZXRNZXRhZGF0YS5sZW5ndGg7IGkrKykge1xyXG5cclxuICAgICAgICAgICAgJCgnI21ldGFkYXRhLXRhYmxlJykuZmluZCgndGJvZHknKVxyXG4gICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8dHIgaWQ9XCJtZXRhZGF0YS1yb3ctJyArIGRhdGFzZXRNZXRhZGF0YVtpXVsnYW5pbWFsX2lkJ10gKyAnXCI+JylcclxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzx0ZD4nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGRhdGFzZXRNZXRhZGF0YVtpXVsnYW5pbWFsX2lkJ10pKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPHRkPicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoZGF0YXNldE1ldGFkYXRhW2ldWydzcGVjaWVzJ10pKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPHRkPicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoZGF0YXNldE1ldGFkYXRhW2ldWydzZXgnXSkpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8dGQ+JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChkYXRhc2V0TWV0YWRhdGFbaV1bJ3NpemUnXSkpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8dGQ+JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChkYXRhc2V0TWV0YWRhdGFbaV1bJ3dlaWdodCddKSlcclxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzx0ZD4nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGA8ZGl2IGNsYXNzPVwiZHJvcGRvd25cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPVwiZHJvcGRvd24tdG9nZ2xlIGJ0biBidG4tZGVmYXVsdCBidG4tY29sb3JcIiBkYXRhLXRvZ2dsZT1cImRyb3Bkb3duXCIgaHJlZj1cIiNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJwcmV2aWV3XCIgY2xhc3M9XCJtZXRhZGF0YS1zd2F0Y2hcIiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6I2ZmZlwiPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVwiY29sb3ItZmllbGRcIiB2YWx1ZT1cIldoaXRlXCIgc3R5bGU9XCJkaXNwbGF5Om5vbmU7XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9XCJkcm9wZG93bi1tZW51XCIgcm9sZT1cIm1lbnVcIiBhcmlhLWxhYmVsbGVkYnk9XCJkTGFiZWxcIj4gYCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZXN1bHRTdHJpbmcgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbG9ycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRTdHJpbmcgKz0gJzxkaXYgY2xhc3M9XCJtZXRhZGF0YS1zd2F0Y2ggbWV0YWRhdGEtc3dhdGNoLWNsaWNrYWJsZVwiIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjonICsgY29sb3JzW2ldICsgJ1wiIHZhbHVlPVwiJyArIGlkICsgJ1wiPjwvZGl2Pic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRTdHJpbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KGRhdGFzZXRNZXRhZGF0YVtpXVsnYW5pbWFsX2lkJ10pICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8L3VsPjwvZGl2PicpXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgICQoJyNtZXRhZGF0YS10YWJsZScpLmZpbmQoJ3Rib2R5JylcclxuICAgICAgICAgICAgLmFwcGVuZCgnVGhlcmUgaXMgbm8gbWV0YWRhdGEgZm9yIHRoaXMgZGF0YXNldCcpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuLyoqXHJcbiAqIFNpemUgYW5kIHdlaWdodCBjb2xvcmluZyBmb3IgdGhlIG1ldGFkYXRhXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY29sb3JNZXRhZGF0YSgpIHtcclxuICAgIHJlc2V0SW5kaXZpZHVhbE1ldGFkYXRhKCk7XHJcbiAgICAvLyBnZXQgdGhlIGlucHV0IHZhbHVlc1xyXG4gICAgbGV0IHZhbHVlID0gJCgnI2dyb3VwLW1ldGFkYXRhIC5idG4uYnRuLWRlZmF1bHQuYWN0aXZlIGlucHV0JylcclxuICAgICAgICAuYXR0cigndmFsdWUnKTtcclxuICAgIGxldCBibEF2ZyA9ICQoJyNibC1hdmcnKS52YWwoKTtcclxuICAgIGxldCBhYkF2ZyA9ICQoJyNhYi1hdmcnKS52YWwoKTtcclxuICAgIC8vIGNvbG9yIHNjaGVtZSBmb3IgdGhlIGlucHV0c1xyXG4gICAgbGV0IGNvbG9ycyA9IFsnIzdmYzk3ZicsICcjZmRjMDg2JywgJyMzODZjYjAnXTtcclxuICAgIC8vIGNvbG9yIHRoZSBhbmltYWxzXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGFzZXRNZXRhZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmIChkYXRhc2V0TWV0YWRhdGFbaV1bdmFsdWVdIDwgYmxBdmcpIHtcclxuICAgICAgICAgICAgbWV0YWRhdGFDb2xvcltkYXRhc2V0TWV0YWRhdGFbaV1bJ2FuaW1hbF9pZCddXSA9IGNvbG9yc1swXTtcclxuICAgICAgICB9IGVsc2UgaWYgKGRhdGFzZXRNZXRhZGF0YVtpXVt2YWx1ZV0gPiBhYkF2Zykge1xyXG4gICAgICAgICAgICBtZXRhZGF0YUNvbG9yW2RhdGFzZXRNZXRhZGF0YVtpXVsnYW5pbWFsX2lkJ11dID0gY29sb3JzWzJdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG1ldGFkYXRhQ29sb3JbZGF0YXNldE1ldGFkYXRhW2ldWydhbmltYWxfaWQnXV0gPSBjb2xvcnNbMV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIE1ldGFkYXRhIHJlc2V0IGFsbCBpbmRpdmlkdWFsIG1ldGFkYXRhIGlucHV0IGZpZWxkc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0SW5kaXZpZHVhbE1ldGFkYXRhKCkge1xyXG4gICAgbWV0YWRhdGFDb2xvciA9IHt9O1xyXG4gICAgJCgnLmRyb3Bkb3duICNwcmV2aWV3JylcclxuICAgICAgICAuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgJ3JnYigyNTUsIDI1NSwgMjU1KScpO1xyXG59XHJcbiIsIi8qZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLWxldHMqL1xyXG4vKmdsb2JhbCB3aW5kb3csIGQzLCAkLCBTZXQqL1xyXG5cclxuaW1wb3J0ICogYXMgU1BWIGZyb20gJy4vc3BhdGlhbF92aWV3L3NwYXRpYWxfdmlldy5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgZGlzYWJsZVBsYXlCdXR0b25cclxufSBmcm9tICcuL2hlbHBlcnMuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGJydXNoZW5kLFxyXG4gICAgc2xpZGVyXHJcbn0gZnJvbSAnLi9zcGF0aWFsX3ZpZXcvaW50ZXJhY3Rpb24uanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGNoYW5nZUxlZ2VuZCxcclxufSBmcm9tICcuL3NwYXRpYWxfdmlldy9sZWdlbmQuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIG1ldGFkYXRhQ29sb3IsXHJcbiAgICByZXNldEluZGl2aWR1YWxNZXRhZGF0YSxcclxuICAgIGNvbG9yTWV0YWRhdGFcclxufSBmcm9tICcuL21ldGFkYXRhLmpzJztcclxuXHJcblxyXG5pbXBvcnQge1xyXG4gICAgc2V0TmV0d29ya0F1dG8sXHJcbiAgICBzZXROZXR3b3JMaW1pdCxcclxuICAgIHNldE5ldHdvcmtIaWVyYXJjaHksXHJcbiAgICBzZXRuZXR3b3JrQ29sb3IsXHJcbiAgICBzZXROZXR3b3JrSUQsXHJcbiAgICBzZXROZXR3b3JrQmFja2dyb3VuZCxcclxuICAgIHNldE5ldHdvcmtCYWNrZ3JvdW5kTGltaXRcclxufSBmcm9tICcuL25ldHdvcmsuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGRhdGFzZXQsXHJcbiAgICBzd2FybURhdGEsXHJcbiAgICBkYXRhc2V0TWV0YWRhdGEsXHJcbiAgICBzZXROZXR3b3JrRGF0YSxcclxuICAgIHNldEhpZXJhcmNoeURhdGFcclxufSBmcm9tICcuL2V4cGxvcmUuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGdldERhdGFzZXRGZWF0dXJlLFxyXG4gICAgZ2V0TmV0d29ya0RhdGEsXHJcbiAgICBnZXRTd2FybURhdGFzZXRGZWF0dXJlLFxyXG4gICAgZ2V0TmV0d29ya0hpZXJhcmNoeURhdGFcclxufSBmcm9tICcuL2FqYXhfcXVlcmllcy5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgY29sb3JTY2FsZVxyXG59IGZyb20gJy4vc3BhdGlhbF92aWV3L2NvbG9yX3BpY2tlcic7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgYWRkSGllcmFyY2h5QnV0dG9uLFxyXG4gICAgcmVtb3ZlSGllcmFyY2h5QnV0dG9uLFxyXG4gICAgbWF4TnVtYmVySGllcmFyY2hpZXMsXHJcbiAgICBzZXRTZXRPcGVyYXRpb24sXHJcbiAgICAvL0RyYXdlclxyXG59IGZyb20gJy4vaGllcmFyY2h5LmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBzZXRUcmFja2luZ0Jvb2xlYW4sXHJcbiAgICByZXNldFRyYWNrZWREYXRhLFxyXG4gICAgc2VuZFRyYWNrZWREYXRhXHJcbn0gZnJvbSAnLi92aXN1YWxfcGFyYW1ldGVyLmpzJztcclxuXHJcbmxldCBicnVzaDsgLy8gYnJ1c2hpbmcgdmFyaWFibGVcclxuZXhwb3J0IGxldCBwbGF5Qm9vbGVhbiA9IHRydWU7IC8vIHBhdXNlIGFuZCBwbGF5IGJvb2xlYW5cclxuXHJcblxyXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICBHZXR0ZXIgYW5kIHNldHRlclxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbi8qKlxyXG4gKiBTZXQgcGxheSBib29sZWFuXHJcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gdmFsdWUgLSBwYXVzZSAoZmFsc2UpIG9yIHBsYXkgKHRydWUpXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2V0UGxheUJvb2xlYW4odmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJykge1xyXG4gICAgICAgIHBsYXlCb29sZWFuID0gdmFsdWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHBsYXlCb29sZWFuID0gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuIiwiLyplc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtbGV0cyovXHJcbi8qZ2xvYmFsIHdpbmRvdywkLCBkMywqL1xyXG4vLyBpbXBvcnQgKiBhcyBzcHYgZnJvbSAnLi9zcGF0aWFsX3ZpZXcuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGRyYXcsXHJcbiAgICBUcmVuZENoYXJ0XHJcbn0gZnJvbSAnLi9zcGF0aWFsX3ZpZXcvc3BhdGlhbF92aWV3LmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBzZXRQbGF5Qm9vbGVhblxyXG59IGZyb20gJy4vbGlzdGVuZXIuanMnO1xyXG5cclxuXHJcbmltcG9ydCB7XHJcbiAgICBzd2FybURhdGFcclxufSBmcm9tICcuL2V4cGxvcmUuanMnO1xyXG4vKipcclxuICogRGlzYWJsZSB0aGUgcGxheSBidXR0b24gLS0+IExvYWRpbmcgc3ltYm9sXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZGlzYWJsZVBsYXlCdXR0b24oKSB7XHJcbiAgICBzZXRQbGF5Qm9vbGVhbihmYWxzZSk7XHJcbiAgICAkKCcjcGxheS1idXR0b24nKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAkKCcjcGxheS1idXR0b24nKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgJCgnI3BsYXktaWNvbnMnKS5oaWRlKCk7XHJcbiAgICAkKCcjcGxheS1sb2FkaW5nJykuc2hvdygpO1xyXG5cclxufVxyXG5cclxuLyoqXHJcbiAqIEVuYWJsZSB0aGUgcGxheSBidXR0b24gcmVtb3ZlIGxvYWRpbmcgc3ltYm9sXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZW5hYmxlUGxheUJ1dHRvbigpIHtcclxuICAgIHNldFBsYXlCb29sZWFuKHRydWUpO1xyXG4gICAgJCgnI3BsYXktYnV0dG9uJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgJCgnI3BsYXktYnV0dG9uJykucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XHJcbiAgICAkKCcjcGxheS1sb2FkaW5nJykuaGlkZSgpO1xyXG4gICAgJCgnI3BsYXktaWNvbnMnKS5zaG93KCk7XHJcbiAgICAvL2RyYXcoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJldHVybiAgLjA1IHBlcmNlbnRpbGVzIG9mIHRoZSBhcnJheVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHBlcmNlbnRpbGVzKGFycikge1xyXG4gICAgbGV0IHAgPSAwLjA1O1xyXG4gICAgaWYgKGFyci5sZW5ndGggPT09IDApIHtcclxuICAgICAgICByZXR1cm4gMDtcclxuICAgIH1cclxuICAgIGFyci5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcclxuICAgICAgICByZXR1cm4gYSAtIGI7XHJcbiAgICB9KTtcclxuICAgIGxldCBpbmRleCA9IChhcnIubGVuZ3RoIC0gMSkgKiBwO1xyXG4gICAgbGV0IGxvd2VyID0gTWF0aC5mbG9vcihpbmRleCk7XHJcbiAgICBsZXQgdXBwZXIgPSBsb3dlciArIDE7XHJcbiAgICBsZXQgd2VpZ2h0ID0gaW5kZXggJSAxO1xyXG4gICAgaWYgKHVwcGVyID49IGFyci5sZW5ndGgpIHtcclxuICAgICAgICByZXR1cm4gMSAtIGFycltsb3dlcl07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiAxIC0gKGFycltsb3dlcl0gKiAoMSAtIHdlaWdodCkgKyBhcnJbdXBwZXJdICogd2VpZ2h0KTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFJldHVybiB0aGUgMDUsIDI1LCA1MCwgNzUsIDk1IHBlcmNlbnRpbGVzIG9mIHRoZSBhcnJheVxyXG4gKlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHBlcmNlbnRpbGVzTGluZUNoYXJ0KGFycikge1xyXG4gICAgbGV0IHAgPSBbMC4wNSwgMC4yNSwgMC41LCAwLjc1LCAwLjk1XTtcclxuICAgIGxldCByZXN1bHQgPSBbXTtcclxuICAgIGlmIChhcnIubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICB9XHJcbiAgICBhcnIuc29ydChmdW5jdGlvbihhLCBiKSB7XHJcbiAgICAgICAgcmV0dXJuIGEgLSBiO1xyXG4gICAgfSk7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHAubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBsZXQgaW5kZXggPSAoYXJyLmxlbmd0aCAtIDEpICogcFtpXTtcclxuICAgICAgICBsZXQgbG93ZXIgPSBNYXRoLmZsb29yKGluZGV4KTtcclxuICAgICAgICBsZXQgdXBwZXIgPSBsb3dlciArIDE7XHJcbiAgICAgICAgbGV0IHdlaWdodCA9IGluZGV4ICUgMTtcclxuICAgICAgICBpZiAodXBwZXIgPj0gYXJyLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXN1bHQucHVzaChhcnJbbG93ZXJdKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXN1bHQucHVzaChhcnJbbG93ZXJdICogKDEgLSB3ZWlnaHQpICsgYXJyW3VwcGVyXSAqIHdlaWdodCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuLyoqXHJcbiAqIExpbmUgY2hhcnQgZGV0YWlscyBjbGljayBsaXN0ZW5lclxyXG4gKi9cclxuZnVuY3Rpb24gaW5pdFRyZW5kQ2hhcnRMaXN0ZW5lcigpIHtcclxuICAgICQoJy5kcmF3LWRldGFpbHMnKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoJCh0aGlzKS5maW5kKCdpbnB1dDpjaGVja2JveCcpLnByb3AoJ2NoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAvL2Rpc2FibGVMaW5lQ2hhcnQoKTtcclxuICAgICAgICAgICAgdmFyIHRyZW5kY2hhcnQgPSBuZXcgVHJlbmRDaGFydCh0aGlzLCBzd2FybURhdGEpO1xyXG4gICAgICAgICAgICB0cmVuZGNoYXJ0LmRpc2FibGVMaW5lQ2hhcnQoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZW1vdmVUcmVuZENoYXJ0KCk7XHJcbiAgICAgICAgICAgIGVuYWJsZUxpbmVDaGFydCgpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogTGluZSBjaGFydCBkZXRhaWxzIGNsaWNrIGxpc3RlbmVyXHJcbiAqL1xyXG5mdW5jdGlvbiBkaXNhYmxlTGluZUNoYXJ0KCkge1xyXG4gICAgJCgnLmxpbmVDaGFydEJ1dHRvbicpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSkucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICQoJy5saW5lLWNoYXJ0LWNoZWNrLWJveCcpLmF0dHIoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcbiAgICAkKCcubGluZUNoYXJ0TGluZScpLmF0dHIoJ3Zpc2liaWxpdHknLCAnaGlkZGVuJyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBMaW5lIGNoYXJ0IGRldGFpbHMgY2xpY2sgbGlzdGVuZXJcclxuICovXHJcbmZ1bmN0aW9uIGVuYWJsZUxpbmVDaGFydCgpIHtcclxuICAgICQoJy5saW5lQ2hhcnRCdXR0b24nKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSkucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XHJcbiAgICAkKCcubGluZS1jaGFydC1jaGVjay1ib3gnKS5hdHRyKCdkaXNhYmxlZCcsIGZhbHNlKTtcclxuICAgICQoJy5saW5lQ2hhcnRMaW5lJykuYXR0cigndmlzaWJpbGl0eScsICd2aXNpYmxlJyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBIaWRlIHRoZSB0cmVuZCBjaGFydFxyXG4gKi9cclxuZnVuY3Rpb24gcmVtb3ZlVHJlbmRDaGFydCgpIHtcclxuICAgICQoJy50cmVuZENoYXJ0RGF0YScpLmhpZGUoKTtcclxuICAgICQoJyN0cmVuZENoYXJ0TGVnZW5kJykuaGlkZSgpO1xyXG4gICAgJCgnI2xpbmVDaGFydExlZ2VuZCcpLnNob3coKTtcclxufVxyXG5cclxuXHJcblxyXG4vKipcclxuICogQWRkIHRoZSBhYnNvbHV0ZSBmZWF0dXJlIGNoZWNrYm94ZXMgaW4gdGhlIGZlYXR1cmUgcGFuZWwgZXhwb3J0IHRvIGFqYXhcclxuICpcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRBYnNvbHV0ZUZlYXR1cmVCdXR0b25zKGRhdGFTZXRQZXJjZW50aWxlKSB7XHJcbiAgICAvLyBpdGVyYXRlIG92ZXIgdGhlIG9iamVjdFxyXG4gICAgZm9yICh2YXIga2V5IGluIGRhdGFTZXRQZXJjZW50aWxlKSB7XHJcbiAgICAgICAgaWYgKGRhdGFTZXRQZXJjZW50aWxlLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICAgICAgLy8gZ2VuZXJhdGUgdGV4dCBmb3IgdGhlIGRpc3BsYXllZCBidXR0b25cclxuICAgICAgICAgICAgbGV0IGNhcGl0YWxpemVkX2ZlYXR1cmVfc3RyaW5nID0ga2V5LnNwbGl0KCdfJykuam9pbignICcpO1xyXG4gICAgICAgICAgICBjYXBpdGFsaXplZF9mZWF0dXJlX3N0cmluZyA9IGNhcGl0YWxpemVkX2ZlYXR1cmVfc3RyaW5nLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2FwaXRhbGl6ZWRfZmVhdHVyZV9zdHJpbmcuc2xpY2UoMSk7XHJcbiAgICAgICAgICAgIC8vIGFkZCB0aGUgYnV0dG9uXHJcbiAgICAgICAgICAgICQoJyNhYnNvbHV0ZS1mZWF0dXJlLWNoZWNrYm94ZXMnKS5hcHBlbmQoJzx0cj48dGg+JyArXHJcbiAgICAgICAgICAgICAgICAnIDxkaXYgY2xhc3M9XCJwcmV0dHkgcC1zd2l0Y2ggcC1maWxsIHAtYmlnZ2VyXCI+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGlkPVwiZHJhdy0nICsga2V5ICtcclxuICAgICAgICAgICAgICAgICdcIi8+PGRpdiBjbGFzcz1cInN0YXRlXCI+PGxhYmVsPicgKyBjYXBpdGFsaXplZF9mZWF0dXJlX3N0cmluZyArICc8L2xhYmVsPjwvZGl2PjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgLy8gcXVhbnRpbGUgZ3JhcGhcclxuICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiZmxvYXQtcmlnaHQgZHJhdy1kZXRhaWxzXCIgaWQ9XCJkcmF3LScgKyBrZXkgKyAnLWRldGFpbHNcIj48ZGl2IGNsYXNzPVwicHJldHR5IHAtaWNvbiBwLXRvZ2dsZSBwLXBsYWluXCI+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGlkPVwiZHJhdy0nICsga2V5ICsgJy1pbnB1dFwiIC8+JyArXHJcbiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cInN0YXRlIHAtc3VjY2Vzcy1vIHAtb25cIj48aSBjbGFzcz1cIm1kaSBtZGktaW1hZ2UtYXJlYVwiPjwvaT48bGFiZWw+PC9sYWJlbD48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwic3RhdGUgcC1vZmZcIj48aSBjbGFzcz1cIm1kaSBtZGktaW1hZ2Utb2ZmXCI+PC9pPjxsYWJlbD48L2xhYmVsPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgJzwvZGl2PjwvZGl2PjwvdGg+PC90cj4nKTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gaGlkZSB0aGUgZWxlbWVudHNcclxuICAgICQoJy5kcmF3LWRldGFpbHMnKS5oaWRlKCk7XHJcbiAgICAvLyBpbml0IHRoZSBsaXN0ZXJuZXJzXHJcbiAgaW5pdFRyZW5kQ2hhcnRMaXN0ZW5lcigpO1xyXG5cclxufVxyXG5cclxuLy8gZ2VuZXJhdGUgaGFzaCBjb2RlcyBmcm9tIHN0cmluZ3NcclxuLy8gc291cmNlOiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy83NjE2NDYxL2dlbmVyYXRlLWEtaGFzaC1mcm9tLXN0cmluZy1pbi1qYXZhc2NyaXB0LWpxdWVyeVxyXG5TdHJpbmcucHJvdG90eXBlLmhhc2hDb2RlID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgaGFzaCA9IDAsXHJcbiAgICAgICAgaSwgY2hyO1xyXG4gICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSByZXR1cm4gaGFzaDtcclxuICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY2hyID0gdGhpcy5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgIGhhc2ggPSAoKGhhc2ggPDwgNSkgLSBoYXNoKSArIGNocjtcclxuICAgICAgICBoYXNoIHw9IDA7IC8vIENvbnZlcnQgdG8gMzJiaXQgaW50ZWdlclxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGhhc2g7XHJcbn07XHJcblxyXG4vKipcclxuICogQ2FsY3VsYXRlIHRoZSBzdGFuZGFyZERldmlhdGlvbiBvZiBhbiBhcnJheSBvZiBudW1iZXJzXHJcbiAqIEBwYXJhbSB7QXJyYXl9IGFyciAtIGFycmF5IG9mIG51bWJlcnNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzdGFuZGFyZERldmlhdGlvbihhcnIpIHtcclxuICAgIGlmIChhcnIgaW5zdGFuY2VvZiBBcnJheSkge1xyXG4gICAgICAgIGxldCBtZWFuID0gYXJyLnJlZHVjZShmdW5jdGlvbihwdiwgY3YpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHB2ICsgY3Y7XHJcbiAgICAgICAgfSwgMCkgLyBhcnIubGVuZ3RoO1xyXG4gICAgICAgIGxldCB0bXAgPSBhcnIubWFwKGZ1bmN0aW9uKG51bSkge1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5wb3cobnVtIC0gbWVhbiwgMik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydCh0bXAucmVkdWNlKGZ1bmN0aW9uKHB2LCBjdikge1xyXG4gICAgICAgICAgICByZXR1cm4gcHYgKyBjdjtcclxuICAgICAgICB9LCAwKSAvIHRtcC5sZW5ndGgpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogTW92ZSBlbGVtZW50IGluIFNWRyBpbnRvIGJhY2tncm91bmQgZG9uZSBieSBtb3ZpbmcgaXQgdG8gZmlyc3QgZWxlbWVudFxyXG4gKi9cclxuZDMuc2VsZWN0aW9uLnByb3RvdHlwZS5tb3ZlVG9CYWNrID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBmaXJzdENoaWxkID0gdGhpcy5wYXJlbnROb2RlLmZpcnN0Q2hpbGQ7XHJcbiAgICAgICAgaWYgKGZpcnN0Q2hpbGQpIHtcclxuICAgICAgICAgICAgdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLCBmaXJzdENoaWxkKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBNYWtlIHRoZSBtYWluIHZpcyBzcGF0aWFsIHZpZXcgcmVzaXphYmxlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gbWFrZVJlc2l6YWJsZShoZWlnaHQsIHdpZHRoKSB7XHJcbiAgICAkKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICQoJyNtYWluLXZpcycpXHJcbiAgICAgICAgICAgIC5kcmFnZ2FibGUoe1xyXG4gICAgICAgICAgICAgICAgY29udGFpbm1lbnQ6ICdwYXJlbnQnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5yZXNpemFibGUoe1xyXG4gICAgICAgICAgICAgICAgYXNwZWN0UmF0aW86IHRydWUsXHJcbiAgICAgICAgICAgICAgICBtYXhXaWR0aDogJCgnI21haW4tdmlzLWRpdicpLndpZHRoKClcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmhlaWdodChoZWlnaHQgKiAwLjYpXHJcbiAgICAgICAgICAgIC53aWR0aCh3aWR0aCAqIDAuNik7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlc2V0IHRoZSBidXR0b25zIGFuZCBjaGVja2JveGVzXHJcbiAqIEhpZGUgaWNvbnMgLSBuZWVkZWQgYmVjYXVzZSBvZiBib290c3RyYXAgYnVnXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZGVmYXVsdENvbmZpZygpIHtcclxuICAgICQoJ2lucHV0W3R5cGU9Y2hlY2tib3hdJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcclxuICAgIC8vc2V0IHRoZSBjb2xvciBzY2FsZSBmdW5jdGlvbiB0byBsaW5lYXJcclxuICAgICQoJyNjb2xvci1zY2FsZS1saW5lYXInKVxyXG4gICAgICAgIC5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XHJcbiAgICAkKCcjZ3JvdXAtc2l6ZS1tJylcclxuICAgICAgICAucHJvcCgnY2hlY2tlZCcsIHRydWUpO1xyXG4gICAgJCgnI2JhY2tncm91bmQtd2hpdGUnKVxyXG4gICAgICAgIC5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XHJcbiAgICAkKCcjc2V0dGluZ3MtZGl2IGlucHV0W3R5cGU9Y2hlY2tib3hdJylcclxuICAgICAgICAucHJvcCgnY2hlY2tlZCcsIHRydWUpO1xyXG4gICAgLy9oaWRlIHRoZSBsb2FkaW5nIGdpZlxyXG4gICAgJCgnI2xvYWRpbmcnKVxyXG4gICAgICAgIC5oaWRlKCk7XHJcbiAgICAvLyBuZWVkZWQgZHVlIHRvIGpRdWVyeSBpbmNvbXBhdGliaWxpdHlcclxuICAgICQoJyNwbGF5LWxvYWRpbmcnKS5oaWRlKCk7XHJcbiAgICAkKCcubWRpLXBsYXknKS5oaWRlKCk7XHJcbiAgICAkKCcjbWV0YWRhdGEtaW5wdXQnKS5oaWRlKCk7XHJcbiAgICAkKCcjZGVuZHJvZ3JhbS1idXR0b25zLWRpdicpLmhpZGUoKTtcclxuICAgICQoJyNnLWNlbnRyb2lkJykuaGlkZSgpO1xyXG4gICAgLy9jaGVjayBsaW5lIGNoYXJ0IGRyYXcgYWxsIGxpbmVzXHJcbiAgICAkKCcjbGluZS1jaGFydC1mZWF0dXJlLWNoZWNrYm94ZXMgaW5wdXRbdHlwZT1jaGVja2JveF0nKVxyXG4gICAgICAgIC5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XHJcbn1cclxuIiwiLyplc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtbGV0cyovXHJcbi8qZ2xvYmFsIHdpbmRvdywgJCxkMywgcGFyYW1ldGVycywgY29sb3JicmV3ZXIsIFNldCAqL1xyXG4ndXNlIHN0cmljdCc7XHJcbmltcG9ydCB7XHJcbiAgICBkYXRhc2V0LFxyXG4gICAgbmV0d29ya0RhdGEsXHJcbiAgICBzd2FybURhdGEsXHJcbiAgICBhbmltYWxJZHMsXHJcbiAgICBkYXRhc2V0TWV0YWRhdGEsXHJcbiAgICBzZXROZXR3b3JrRGF0YSxcclxuICAgIHNldEhpZXJhcmNoeURhdGEsXHJcbiAgICBkYXRhU2V0UGVyY2VudGlsZSxcclxuICAgIG5ldHdvcmtIaWVyYXJjaHlcclxufSBmcm9tICcuLi9leHBsb3JlLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBuZXR3b3JrQ29sb3JTY2FsZSxcclxuICAgIG5ldHdvcmtBdXRvLFxyXG4gICAgc2V0TmV0d29yTGltaXQsXHJcbiAgICBuZXR3b3JrTGltaXQsXHJcbiAgICBzaG93TmV0d29ya0hpZXJhcmNoeSxcclxuICAgIC8vIG5ldHdvcmtJRCxcclxuICAgIC8vIG5ldHdvcmtCYWNrZ3JvdW5kLFxyXG4gICAgLy8gbmV0d29ya0JhY2tncm91bmRMaW1pdFxyXG59IGZyb20gJy4uL25ldHdvcmsuanMnO1xyXG5cclxuXHJcblxyXG5pbXBvcnQge1xyXG4gICAgcGVyY2VudGlsZXMsXHJcbiAgICBtYWtlUmVzaXphYmxlLFxyXG4gICAgZGVmYXVsdENvbmZpZyxcclxuICAgIGRpc2FibGVQbGF5QnV0dG9uLFxyXG4gICAgZW5hYmxlUGxheUJ1dHRvbixcclxuICAgIHBlcmNlbnRpbGVzTGluZUNoYXJ0XHJcbn0gZnJvbSAnLi4vaGVscGVycy5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgc2V0VGltZVNsaWRlcixcclxuICAgIGluaXRUb29sdGlwLFxyXG4gICAgdG9vbHRpcEZ1bmN0aW9uLFxyXG4gICAgaW5pdFNsaWRlcnMsXHJcbiAgICB0b29sdGlwLFxyXG4gICAgc2xpZGVyXHJcbn0gZnJvbSAnLi9pbnRlcmFjdGlvbi5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgbWV0YWRhdGFDb2xvclxyXG59IGZyb20gJy4uL21ldGFkYXRhLmpzJztcclxuXHJcblxyXG5cclxuaW1wb3J0IHtcclxuICAgIGluaXRMaXN0ZW5lcnMsXHJcblxyXG59IGZyb20gJy4uL2xpc3RlbmVyLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBhZGRTcGF0aWFsVmlld0dyb3VwXHJcbn0gZnJvbSAnLi9sZWdlbmQuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIC8vdXBkYXRlRGVuZHJvZ3JhbSxcclxuICAgIC8vc2V0SGllcmFyY2h5TGV2ZWwsXHJcbiAgICAvL2dldEhpZXJhcmNoeUxldmVsLFxyXG4gICAgZHJhd0hpZXJhcmNoeSxcclxuICAgIGluaXREZW5kcm9ncmFtTGVnZW5kLFxyXG4gICAgYWRkSGllcmFyY2h5QnV0dG9uLFxyXG4gICAgcmVtb3ZlSGllcmFyY2h5QnV0dG9uLFxyXG4gICAgaGllcmFyY2h5Q29sb3JzLFxyXG4gICAgLy8gbmV0d29ya0hpZXJhcmNoeUlkcyxcclxuICAgIC8vIHNldGhpZXJhcmNoeUdyb3VwU3RkZXYsXHJcbiAgICByZXNldGhpZXJhcmNoeUdyb3VwU3RkZXYsXHJcbiAgICBoaWVyYXJjaHlHcm91cFN0ZGV2LFxyXG4gICAgbWF4TnVtYmVySGllcmFyY2hpZXMsXHJcbiAgICB0cmVlbWFwLFxyXG4gICAgc2V0T3BlcmF0aW9uLFxyXG4gICAgLy9jb2xsYXBzZSxcclxuICAgIGhpZXJhcmNoeUxldmVscyxcclxuICAgIGRpYWdvbmFsTGluZXMsXHJcbiAgICAvL2NsaWNrLFxyXG4gICAgLy9nZXRIaWVyYXJjaHlWZXJ0aWNlcyxcclxuICAgIERlbmRyb2dyYW1cclxufSBmcm9tICcuLi9oaWVyYXJjaHkuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIHRyYWNraW5nQm9vbGVhbixcclxuICAgIGFkZFRyYWNrZWREYXRhXHJcbn0gZnJvbSAnLi4vdmlzdWFsX3BhcmFtZXRlci5qcyc7XHJcblxyXG5cclxuaW1wb3J0IHtcclxuICAgIGdldERhdGFzZXRGZWF0dXJlLFxyXG4gICAgZ2V0TmV0d29ya0RhdGEsXHJcbiAgICBnZXRTd2FybURhdGFzZXRGZWF0dXJlLFxyXG4gICAgZ2V0TmV0d29ya0hpZXJhcmNoeURhdGFcclxufSBmcm9tICcuLi9hamF4X3F1ZXJpZXMuanMnO1xyXG5cclxuXHJcbiAvLyBzdmcgY29udGFpbmVyIGZvciB0aGUgc3BhdGlhbCB2aWV3XHJcbiAvLyBzdmcgZ3JvdXAgZm9yIHRoZSBzcGF0aWFsIHZpZXcgdGFua1xyXG4vLyBsZXQgbmV0d29ya0Jha0RhdGEgPSB7fTtcclxuXHJcbi8vZXhwb3J0IGxldCBpbmRleFRpbWUgPSAwOyAvLyBhY3R1YWwgdGltZSBtb21lbnQgaW4gdGhlIGFuaW1hdGlvblxyXG5cclxuLy8gYXJyYXkgb2YgYW5pbWFscyBmb3IgdGhlIHNwZWNpZmljIHRpbWUgZnJhbWVcclxuXHJcblxyXG4vLyBEcmF3ZXIgU2V0dXBcclxuXHJcblxyXG5cclxuXHJcbmxldCB0cmVuZENoYXJ0c1pvb20gPSB7fTtcclxuLy9sZXQgdGhpcy50cmVuZENoYXJ0c0VsZW0gPSBbJ2xvd2VyLW91dGVyLWFyZWEnLCAnbG93ZXItaW5uZXItYXJlYScsICdtZWRpYW4tbGluZScsICd1cHBlci1pbm5lci1hcmVhJywgJ3VwcGVyLW91dGVyLWFyZWEnXTtcclxuLy9sZXQgbGluZUNoYXJ0V2lkdGggPSA1MDAwO1xyXG5cclxuXHJcbi8vIExpc3RlbmVyIFNldHVwXHJcbi8vIGJydXNoaW5nIHZhcmlhYmxlXHJcbmV4cG9ydCBsZXQgcGxheUJvb2xlYW4gPSB0cnVlO1xyXG5cclxuXHJcbi8vIExpbmVjaGFydCBTZXR1cFxyXG5sZXQgcmF0aW8gPSAxO1xyXG5sZXQgem9vbUdyb3VwO1xyXG5sZXQgeDtcclxubGV0IHk7XHJcbmV4cG9ydCBsZXQgem9vbUZ1bmN0aW9uO1xyXG5cclxuXHJcblxyXG5cclxuXHJcbi8qKlxyXG4qIEJhc2UgY2xhc3MgZHJhd2VyXHJcbiovXHJcblxyXG4vKipcclxuICogSW5pdGlhbGl6ZSB0aGUgc3BhdGlhbCB2aWV3IHdpdGggYWxsIHRoZSBpbXBvcnRhbnQgZmFjdG9yc1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIERyYXdlciB7XHJcbiAgIGNvbnN0cnVjdG9yKCl7XHJcbiAgICAgdGhpcy5pbmRleFRpbWU9MDtcclxuICAgICAvLyBUYW5rIEJhc2VcclxuICAgICB0aGlzLnN2Z0NvbnRhaW5lciA9IGQzLnNlbGVjdCgnI21haW4tdmlzJylcclxuXHJcblxyXG4gICAgIHRoaXMuem9vbSA9IGQzLnpvb20oKVxyXG4gICAgICAgICAuc2NhbGVFeHRlbnQoWzEsIDZdKVxyXG4gICAgICAgICAub24oJ3pvb20nLCAoKT0+e1xyXG4gICAgICAgICAgICAgLy9jb25zdHJhaW5lZCB6b29taW5nXHJcbiAgICAgICAgICAgICAvLyBtb2RpZnkgdGhlIHRyYW5zbGF0ZSBzbyB0aGF0IGl0IG5ldmVyIGV4aXRzIHRoZSB0YW5rXHJcbiAgICAgICAgICAgICBkMy5ldmVudC50cmFuc2Zvcm0ueCA9IE1hdGgubWluKDAsIHRoaXMudGFua1dpZHRoICogKGQzLmV2ZW50LnRyYW5zZm9ybS5rIC0gMSksXHJcbiAgICAgICAgICAgICAgICAgTWF0aC5tYXgodGhpcy50YW5rV2lkdGggKiAoMSAtIGQzLmV2ZW50LnRyYW5zZm9ybS5rKSwgZDMuZXZlbnQudHJhbnNmb3JtLngpKTtcclxuXHJcbiAgICAgICAgICAgICBkMy5ldmVudC50cmFuc2Zvcm0ueSA9IE1hdGgubWluKDAsIHRoaXMudGFua0hlaWdodCAqIChkMy5ldmVudC50cmFuc2Zvcm0uayAtIDEpLFxyXG4gICAgICAgICAgICAgICAgIE1hdGgubWF4KHRoaXMudGFua0hlaWdodCAqICgxIC0gZDMuZXZlbnQudHJhbnNmb3JtLmspLCBkMy5ldmVudC50cmFuc2Zvcm0ueSkpO1xyXG5cclxuICAgICAgICAgICAgIC8vIHRyYW5zbGF0ZSBhbmQgc2NhbGVcclxuICAgICAgICAgICAgIHRoaXMuem9vbUdyb3VwLmF0dHIoJ3RyYW5zZm9ybScsIGQzLmV2ZW50LnRyYW5zZm9ybSk7XHJcblxyXG4gICAgICAgICAgICAgLy8gcmVzY2FsZSB0aGUgYXhpc1xyXG4gICAgICAgICAgICAgZ1hheGlzLmNhbGwoeEF4aXMuc2NhbGUoZDMuZXZlbnQudHJhbnNmb3JtLnJlc2NhbGVYKHgpKSk7XHJcbiAgICAgICAgICAgICBnWWF4aXMuY2FsbCh5QXhpcy5zY2FsZShkMy5ldmVudC50cmFuc2Zvcm0ucmVzY2FsZVkoeSkpKTtcclxuICAgICAgICAgfSk7XHJcbiAgICAgdGhpcy56b29tR3JvdXAgPSB0aGlzLnN2Z0NvbnRhaW5lci5hcHBlbmQoJ3N2ZzpnJyk7XHJcbiAgICAgdGhpcy50YW5rID0gdGhpcy56b29tR3JvdXAuYXBwZW5kKCdzdmc6ZycpXHJcbiAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICd0YW5rJylcclxuICAgICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICgpPT57XHJcbiAgICAgICAgICAgICAgICAgICBsZXQgeCA9IHBhcmFtZXRlcnMuaW52ZXJ0ZWRfeCA/IC0xIDogMTtcclxuICAgICAgICAgICAgICAgICAgIGxldCB5ID0gcGFyYW1ldGVycy5pbnZlcnRlZF95ID8gLTEgOiAxO1xyXG4gICAgICAgICAgICAgICAgICAgcmV0dXJuICdzY2FsZSgnICsgeCArICcsJyArIHkgKyAnKSc7XHJcbiAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgIC8vIGFjdHVhbCB0aW1lIG1vbWVudCBpbiB0aGUgYW5pbWF0aW9uXHJcblxyXG4gICAgIHRoaXMuYWN0aXZlU2NhbGUgPSAnYmxhY2snOyAvLyBjYW4gYmUgc3BlZWQsIGFjY2VsZXJhdGlvbiwgLi4gYW5kIGJsYWNrIChtZWFuaW5nIG5vIGFjdGl2ZSBzY2FsZSlcclxuICAgICB0aGlzLmNvbG9yU2NhbGUgPSB7XHJcbiAgICAgICAgIHR5cGU6ICdMaW5lYXInLFxyXG4gICAgICAgICBjb2xvcjogY29sb3JicmV3ZXIuQnVZbEJ1XHJcbiAgICAgfTtcclxuICAgICB0aGlzLmxlZ2VuZFdpZHRoID0gNTUwO1xyXG4gICAgIHRoaXMubGVnZW5kSGVpZ2h0ID0gNjA7XHJcblxyXG4gICAgIHRoaXMuc3ZnTGVnZW5kID0gZDMuc2VsZWN0KCcjbWFpbi12aXMtbGVnZW5kLWRpdicpXHJcbiAgICAgICAgIC5hcHBlbmQoJ3N2ZycpXHJcbiAgICAgICAgIC5hdHRyKCdpZCcsICdtYWluLXZpcy1sZWdlbmQnKVxyXG4gICAgICAgICAuYXR0cignd2lkdGgnLCB0aGlzLmxlZ2VuZFdpZHRoKVxyXG4gICAgICAgICAuYXR0cignaGVpZ2h0JywgdGhpcy5sZWdlbmRIZWlnaHQpO1xyXG4gICAgIHRoaXMubWVkb2lkQW5pbWFsID0gLTE7IC8vIHdoaWNoIGFuaW1hbCBpcyB0aGUgbWVkb2lkICgtMSBpcyBubyBhbmltYWwpXHJcbiAgICAgdGhpcy5hY3RpdmVBbmltYWxzID0gW107IC8vIGFjdGl2ZSBzZWxlY3RlZCBhbmltYWxzXHJcbiAgICAgdGhpcy5hcnJheUFuaW1hbHMgPSBkYXRhc2V0LmZpbHRlcigoZCk9PntcclxuICAgICAgICAgcmV0dXJuIGRbJ3QnXSA9PT0gdGhpcy5pbmRleFRpbWU7XHJcbiAgICAgfSk7Ly8gYXJyYXkgb2YgYW5pbWFscyBmb3IgdGhlIHNwZWNpZmljIHRpbWUgZnJhbWVcclxuICAgICB0aGlzLmlkID0gJCgnLnNob3ctZGVuZHJvZ3JhbS5idG4tcHJpbWFyeScpLmF0dHIoJ2RhdGEnKTtcclxuICAgICB0aGlzLnBsYXlCb29sZWFuID0gdHJ1ZTtcclxuICAgICB0aGlzLmhpZXJhcmNoeUxldmVscyA9IHt9O1xyXG4gICAgIHRoaXMuaGllcmFyY2h5R3JvdXBTdGRldiA9IHt9O1xyXG4gICAgIHRoaXMuYnJ1c2ggPSBkMy5icnVzaCgpXHJcbiAgICAgICAgIC5leHRlbnQoW1xyXG4gICAgICAgICAgICAgWzAsIDBdLFxyXG4gICAgICAgICAgICAgW3RoaXMudGFua1dpZHRoLCB0aGlzLnRhbmtIZWlnaHRdXHJcbiAgICAgICAgIF0pO1xyXG5cclxuXHJcbiAgIH1cclxuICAgc2V0SW5kZXhUaW1lKHZhbHVlKSB7XHJcbiAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyAmJiAodGhpcy5pbmRleFRpbWUgPD0gc3dhcm1EYXRhLmxlbmd0aCkpIHtcclxuICAgICAgICAgICB0aGlzLmluZGV4VGltZSA9IHZhbHVlO1xyXG4gICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICB0aGlzLmluZGV4VGltZSA9IDA7XHJcbiAgICAgICB9XHJcbiAgIH1cclxuICAgc2V0QWN0aXZlU2NhbGUodmFsdWUpIHtcclxuICAgICAgIHRoaXMuYWN0aXZlU2NhbGUgPSB2YWx1ZTtcclxuICB9XHJcbiAgIHNldEFjdGl2ZUFuaW1hbHModmFsdWUpIHtcclxuICAgICAgdGhpcy5hY3RpdmVBbmltYWxzID0gdmFsdWU7XHJcbiAgfVxyXG4gICBkZWNJbmRleFRpbWUoKSB7XHJcbiAgICAgICB0aGlzLmluZGV4VGltZSA9IHRoaXMuaW5kZXhUaW1lIC0gMTtcclxuICAgfVxyXG4gICB1cGRhdGVMaW5lQ2hhcnQoKSB7XHJcbiAgICAgICBpZiAoZDMuc2VsZWN0KCcjbGluZUNoYXJ0VGltZUxpbmUnKSAmJiBzd2FybURhdGFbTWF0aC5jZWlsKHRoaXMuaW5kZXhUaW1lIC8gcmF0aW8pXSkge1xyXG4gICAgICAgICAgIGxldCB0bXAgPSBNYXRoLmNlaWwodGhpcy5pbmRleFRpbWUgLyByYXRpbyk7XHJcbiAgICAgICAgICAgLy91cGRhdGUgdGhlIGxpbmUgY2hhcnQgbGVnZW5kIHRleHQgdmFsdWVzIHBlciBzZWNvbmRcclxuICAgICAgICAgICBpZiAodGhpcy5pbmRleFRpbWUgJSAyNSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAvLyBUT0RPIGNoYW5nZSB0aGlzIHRvIGEgbW9yZSBtb2R1bGFyIHdheVxyXG4gICAgICAgICAgICAgICBkMy5zZWxlY3QoJyNjb252ZXhfaHVsbF9hcmVhTGluZVZhbHVlJylcclxuICAgICAgICAgICAgICAgICAgIC50ZXh0KChzd2FybURhdGFbdG1wXVsnY29udmV4X2h1bGxfYXJlYSddKSArICdtbcKyJyk7XHJcbiAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnI3NwZWVkTGluZVZhbHVlJylcclxuICAgICAgICAgICAgICAgICAgIC50ZXh0KHN3YXJtRGF0YVt0bXBdWydzcGVlZCddICsgJ21tL3MnKTtcclxuICAgICAgICAgICAgICAgZDMuc2VsZWN0KCcjYWNjZWxlcmF0aW9uTGluZVZhbHVlJylcclxuICAgICAgICAgICAgICAgICAgIC50ZXh0KHN3YXJtRGF0YVt0bXBdWydhY2NlbGVyYXRpb24nXSArICdtbS9zwrInKTtcclxuICAgICAgICAgICAgICAgZDMuc2VsZWN0KCcjZGlzdGFuY2VfY2VudHJvaWRMaW5lVmFsdWUnKVxyXG4gICAgICAgICAgICAgICAgICAgLnRleHQoc3dhcm1EYXRhW3RtcF1bJ2Rpc3RhbmNlX2NlbnRyb2lkJ10gKyAnbW0nKTtcclxuICAgICAgICAgICAgICAgZDMuc2VsZWN0KCcjZGlyZWN0aW9uTGluZVZhbHVlJylcclxuICAgICAgICAgICAgICAgICAgIC50ZXh0KHN3YXJtRGF0YVt0bXBdWydkaXJlY3Rpb24nXSArICfCsCcpO1xyXG4gICAgICAgICAgICAgICBkMy5zZWxlY3QoJyNwb2xhcmlzYXRpb25MaW5lVmFsdWUnKVxyXG4gICAgICAgICAgICAgICAgICAgLnRleHQoc3dhcm1EYXRhW3RtcF1bJ3BvbGFyaXNhdGlvbiddKTtcclxuICAgICAgICAgICB9XHJcbiAgICAgICAgICAgZDMuc2VsZWN0KCcjbGluZUNoYXJ0VGltZUxpbmUnKVxyXG4gICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgem9vbUZ1bmN0aW9uKHRtcCkgKyAnLDApJyk7XHJcbiAgICAgICB9XHJcbiAgIH1cclxuICAgcmV0dXJuQ29sb3JTY2FsZSgpIHtcclxuICAgICAgIC8vaWYgbGluZWFyIGlzIGNob29zZW5cclxuICAgICAgIGlmICh0aGlzLmNvbG9yU2NhbGVbJ3R5cGUnXSA9PT0gJ0xpbmVhcicpIHtcclxuICAgICAgICAgICByZXR1cm4gZDMuc2NhbGVMaW5lYXIoKVxyXG4gICAgICAgICAgICAgICAuZG9tYWluKFxyXG4gICAgICAgICAgICAgICAgICAgZGF0YVNldFBlcmNlbnRpbGVbdGhpcy5hY3RpdmVTY2FsZV1cclxuICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAucmFuZ2UodGhpcy5jb2xvclNjYWxlWydjb2xvciddKTtcclxuICAgICAgIH0gLy9UaHJlc2hvbGQgY29sb3Igc2NhbGVcclxuICAgICAgIGVsc2UgaWYgKHRoaXMuY29sb3JTY2FsZVsndHlwZSddID09PSAnVGhyZXNob2xkJykge1xyXG4gICAgICAgICAgIHJldHVybiBkMy5zY2FsZVRocmVzaG9sZCgpXHJcbiAgICAgICAgICAgICAgIC5kb21haW4oXHJcbiAgICAgICAgICAgICAgICAgICBkYXRhU2V0UGVyY2VudGlsZVt0aGlzLmFjdGl2ZVNjYWxlXVxyXG4gICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgIC5yYW5nZSh0aGlzLmNvbG9yU2NhbGVbJ2NvbG9yJ10pO1xyXG4gICAgICAgfVxyXG4gICB9XHJcbiAgIGluaXRDb2xvclBpY2tlcigpIHtcclxuICAgICAgIGQzLnNlbGVjdCgnLmNvbG9ycy1ib2R5JylcclxuICAgICAgICAgICAuc2VsZWN0QWxsKCcucGFsZXR0ZScpXHJcbiAgICAgICAgICAgLmRhdGEoZDMuZW50cmllcyhjb2xvcmJyZXdlcikpXHJcbiAgICAgICAgICAgLmVudGVyKClcclxuICAgICAgICAgICAuYXBwZW5kKCdzcGFuJylcclxuICAgICAgICAgICAuYXR0cignY2xhc3MnLCAncGFsZXR0ZScpXHJcbiAgICAgICAgICAgLmF0dHIoJ3RpdGxlJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgIHJldHVybiBkLmtleTtcclxuICAgICAgICAgICB9KVxyXG4gICAgICAgICAgIC5vbignY2xpY2snLCAoZCk9PntcclxuICAgICAgICAgICAgICAgLy8gaGlnaHRsaWdodCB0aGUgcmlnaHQgcGFsZXR0ZVxyXG4gICAgICAgICAgICAgICAkKCcucGFsZXR0ZScpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAkKCcucGFsZXR0ZVt0aXRsZT1cIicgKyBkLmtleSArICdcIl0nKS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgdGhpcy5jb2xvclNjYWxlLmNvbG9yID0gY29sb3JicmV3ZXJbZC5rZXldO1xyXG4gICAgICAgICAgICAgICB0aGlzLmNoYW5nZWxlZ2VuZCgpO1xyXG4gICAgICAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpXHJcbiAgICAgICAgICAgICAgICAgICAuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgICAgICAgdGhpcy5kZWNJbmRleFRpbWUoKTtcclxuICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgfSlcclxuICAgICAgICAgICAuc2VsZWN0QWxsKCcuc3dhdGNoJylcclxuICAgICAgICAgICAuZGF0YSgoZCk9PntcclxuICAgICAgICAgICAgICAgcmV0dXJuIGQudmFsdWU7XHJcbiAgICAgICAgICAgfSlcclxuICAgICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgIC5hcHBlbmQoJ3NwYW4nKVxyXG4gICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdzd2F0Y2gnKVxyXG4gICAgICAgICAgIC5zdHlsZSgnYmFja2dyb3VuZC1jb2xvcicsIChkKT0+e1xyXG4gICAgICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAvLyBoaWdobGlnaHQgdGhlIHNlbGVjdGVkIGNvbG9yIHNjaGVtZVxyXG4gICAgICAgJCgnLnBhbGV0dGVbdGl0bGU9XCJCdVlsQnVcIl0nKS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcclxuICAgfVxyXG4gICBjaGFuZ2VsZWdlbmQoKSB7XHJcbiAgICAgICBsZXQgbGVnZW5kOyAvLyB0aGUgY29sb3IgbGVnZW5kXHJcbiAgICAgICBsZXQgbGVnZW5kVGV4dDsgLy8gY29sb3IgbGVnZW5kIHRleHRcclxuICAgICAgIC8vIHZhcnMgZm9yIHRoZSBsZWdlbmRcclxuICAgICAgIGxldCBsZWdlbmRTd2F0Y2hXaWR0aCA9IDUwO1xyXG4gICAgICAgbGV0IGxlZ2VuZFN3YXRjaEhlaWdodCA9IDIwO1xyXG4gICAgICAgLy8gbGV0IGRpZmZlcmVudENvbG9ycyA9IDA7XHJcblxyXG4gICAgICAgLy8gU2hvdyB0aGUgc3ZnIGZpcnN0IG9mIGFsbFxyXG4gICAgICAgJCgnI21haW4tdmlzLWxlZ2VuZC1kaXYnKVxyXG4gICAgICAgICAgIC5zaG93KCk7XHJcblxyXG4gICAgICAgLy9jaGFuZ2UgdGhlIGNvbG9ycyBvZiB0aGUgYW5pbWFsc1xyXG4gICAgICAgaWYgKHRoaXMuYWN0aXZlU2NhbGUgIT09ICdibGFjaycpIHtcclxuICAgICAgICAgICB2YXIgdG1wU2NhbGUgPSB0aGlzLnJldHVybkNvbG9yU2NhbGUoKTtcclxuICAgICAgICAgICAvLyBvbmNlIHRoZSBmaWxsIGZvciB0aGUgaGVhZHMgYW5kIHRoZSBzdHJva2UgZm9yIHRoZSBwYXRoXHJcbiAgICAgICAgICAgbGVnZW5kID0gdGhpcy5zdmdMZWdlbmQuc2VsZWN0QWxsKCdyZWN0LmxlZ2VuZCcpXHJcbiAgICAgICAgICAgICAgIC5kYXRhKHRtcFNjYWxlLnJhbmdlKCkpO1xyXG5cclxuICAgICAgICAgICBsZWdlbmRUZXh0ID0gdGhpcy5zdmdMZWdlbmQuc2VsZWN0QWxsKCd0ZXh0LmxlZ2VuZC10ZXh0JylcclxuICAgICAgICAgICAgICAgLmRhdGEodG1wU2NhbGUuZG9tYWluKCkpO1xyXG4gICAgICAgICAgIC8vIGRpZmZlcmVudENvbG9ycyA9IHRtcFNjYWxlLnJhbmdlKClcclxuICAgICAgICAgICAvLyAubGVuZ3RoO1xyXG4gICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICBsZWdlbmQgPSB0aGlzLnN2Z0xlZ2VuZC5zZWxlY3RBbGwoJ3JlY3QubGVnZW5kJylcclxuICAgICAgICAgICAgICAgLmRhdGEoW10pO1xyXG4gICAgICAgICAgIGxlZ2VuZFRleHQgPSB0aGlzLnN2Z0xlZ2VuZC5zZWxlY3RBbGwoJ3RleHQubGVnZW5kLXRleHQnKVxyXG4gICAgICAgICAgICAgICAuZGF0YShbXSk7XHJcbiAgICAgICAgICAgLy8gaGlkZSB0aGUgZGl2IGFnYWluXHJcbiAgICAgICAgICAgJCgnI21haW4tdmlzLWxlZ2VuZC1kaXYnKVxyXG4gICAgICAgICAgICAgICAuaGlkZSgpO1xyXG4gICAgICAgfVxyXG5cclxuICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLSBMZWdlbmQgc3dhdGNoZXMgIC0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgIC8vIFVQREFURSAtIGxlZ2VuZFxyXG4gICAgICAgbGVnZW5kLnN0eWxlKCdmaWxsJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgIHJldHVybiBkO1xyXG4gICAgICAgfSk7XHJcbiAgICAgICAvLyBFTlRFUiAtIGxlZ2VuZFxyXG4gICAgICAgbGVnZW5kXHJcbiAgICAgICAgICAgLmVudGVyKClcclxuICAgICAgICAgICAuYXBwZW5kKCdyZWN0JylcclxuICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGVnZW5kJylcclxuICAgICAgICAgICAuYXR0cignd2lkdGgnLCBsZWdlbmRTd2F0Y2hXaWR0aClcclxuICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgbGVnZW5kU3dhdGNoSGVpZ2h0KVxyXG4gICAgICAgICAgIC5hdHRyKCd5JywgMClcclxuICAgICAgICAgICAuYXR0cigneCcsIGZ1bmN0aW9uKGQsIGkpIHtcclxuICAgICAgICAgICAgICAgcmV0dXJuIChsZWdlbmRTd2F0Y2hXaWR0aCArIGkgKiBsZWdlbmRTd2F0Y2hXaWR0aCkgKyAncHgnO1xyXG4gICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgLnN0eWxlKCdmaWxsJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgICAgICB9KTtcclxuICAgICAgIC8vIEVYSVQgLSBsZWdlbmRcclxuICAgICAgIGxlZ2VuZC5leGl0KClcclxuICAgICAgICAgICAucmVtb3ZlKCk7XHJcblxyXG4gICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tIFRleHQgIC0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgIC8vIFVQREFURSAtIGxlZ2VuZCB0ZXh0XHJcbiAgICAgICBsZWdlbmRUZXh0LnRleHQoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgIHJldHVybiBNYXRoLmNlaWwoZCAqIDIpIC8gMjtcclxuICAgICAgIH0pO1xyXG4gICAgICAgLy8gRU5URVIgLSBsZWdlbmQgdGV4dFxyXG4gICAgICAgbGVnZW5kVGV4dFxyXG4gICAgICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgICAgLmFwcGVuZCgndGV4dCcpXHJcbiAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xlZ2VuZC10ZXh0JylcclxuICAgICAgICAgICAuYXR0cigneScsIDIgKiBsZWdlbmRTd2F0Y2hIZWlnaHQpXHJcbiAgICAgICAgICAgLmF0dHIoJ3gnLCBmdW5jdGlvbihkLCBpKSB7XHJcbiAgICAgICAgICAgICAgIC8vIHBsdXMgNSBoYXMgdG8gYmUgY2hhbmdlZFxyXG4gICAgICAgICAgICAgICByZXR1cm4gKGxlZ2VuZFN3YXRjaFdpZHRoICsgaSAqIGxlZ2VuZFN3YXRjaFdpZHRoICsgNSkgKyAncHgnO1xyXG4gICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgLnRleHQoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICByZXR1cm4gTWF0aC5jZWlsKGQgKiAyKSAvIDI7XHJcbiAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgLy8gRVhJVCAtIGxlZ2VuZCB0ZXh0XHJcbiAgICAgICBsZWdlbmRUZXh0LmV4aXQoKVxyXG4gICAgICAgICAgIC5yZW1vdmUoKTtcclxuICAgfVxyXG5cclxuICAgZHJhdygpIHtcclxuXHJcbiAgICAgICAvL3VwZGF0ZSB0aW1lIHRvIHdhaXQgYWthIHNwZWVkIG9mIHJlcGxheVxyXG4gICAgICAgbGV0IHRpbWVUb1dhaXQgPSAkKCdpbnB1dFt0eXBlPVwicmFkaW9cIl0uZ3JvdXAtcGxheWJhY2stcmF0ZTpjaGVja2VkJylcclxuICAgICAgICAgICAudmFsKCk7XHJcbiAgICAgICAvL3NjYWxlIHRoZSBzaXplIGJ5IHRoaXMgbnVtYmVyXHJcbiAgICAgICBsZXQgYW5pbWFsU2NhbGUgPSAkKCdpbnB1dFt0eXBlPVwicmFkaW9cIl0uZ3JvdXAtc2l6ZTpjaGVja2VkJylcclxuICAgICAgICAgICAudmFsKCk7XHJcblxyXG4gICAgICAgLy9nZXQgdGhlIG5leHQgYW5pbWFsc1xyXG4gICAgICAgdGhpcy5hcnJheUFuaW1hbHMgPSBkYXRhc2V0LmZpbHRlcigoZCk9PntcclxuICAgICAgICAgICByZXR1cm4gZFsndCddID09PSB0aGlzLmluZGV4VGltZTtcclxuICAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgIC8vdGhlIHRpbWVvdXQgaXMgc2V0IGFmdGVyIG9uZSB1cGRhdGUgMzAgbXNcclxuICAgICAgIHNldFRpbWVvdXQoKCk9PntcclxuICAgICAgICAgICAgICAgLy8gZHJhdyBoaWVyYXJjaHlcclxuICAgICAgICAgICAgICAgdGhpcy5kcmF3RGVuZHJvZ3JhbSgpO1xyXG4gICAgICAgICAgICAgICAvL2NoYW5nZSB0aGUgdGltZSBmcmFtZSB0ZXh0XHJcbiAgICAgICAgICAgICAgIHRoaXMuc3ZnQ29udGFpbmVyLnNlbGVjdCgnLmZyYW1lLXRleHQnKVxyXG4gICAgICAgICAgICAgICAgICAgLnRleHQoTWF0aC5mbG9vcih0aGlzLmluZGV4VGltZSAvIDE1MDApICUgNjAgKyAnOicgKyBNYXRoLmZsb29yKHRoaXMuaW5kZXhUaW1lIC8gcGFyYW1ldGVyc1snZnBzJ10pICUgNjAgKyAnOjonICsgdGhpcy5pbmRleFRpbWUgJSBwYXJhbWV0ZXJzWydmcHMnXSk7XHJcbiAgICAgICAgICAgICAgIC8vIGlmIGEgc2Vjb25kIGhhcyBjaGFuZ2VkIG1vdmUgdGhlIHNsaWRlclxyXG4gICAgICAgICAgICAgICBpZiAodGhpcy5pbmRleFRpbWUgJSBwYXJhbWV0ZXJzWydmcHMnXSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgc2V0VGltZVNsaWRlcih0aGlzLmluZGV4VGltZSk7XHJcbiAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgIGxldCBzdmdBbmltYWxzID0gdGhpcy50YW5rLnNlbGVjdEFsbCgnZy5hbmltYWwnKVxyXG4gICAgICAgICAgICAgICAgICAgLmRhdGEodGhpcy5hcnJheUFuaW1hbHMpO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gTmV0d29yayB2aXNcclxuICAgICAgICAgICAgICAgbGV0IG5ldHdvcmtWaXM7XHJcbiAgICAgICAgICAgICAgIC8vIGxldCBuZXR3b3JrVmlzQmFrO1xyXG4gICAgICAgICAgICAgICBpZiAodGhpcy5pbmRleFRpbWUgaW4gbmV0d29ya0RhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgIGxldCBuZXR3b3JrID0gbmV0d29ya0RhdGFbdGhpcy5pbmRleFRpbWVdO1xyXG4gICAgICAgICAgICAgICAgICAgLy8gcmVzZXQgdGhlIGdyb3VwIHN0YW5kYXJkIGRldmlhdGlvbiBmb3IgdGhlIGhpZXJhcmhjeVxyXG4gICAgICAgICAgICAgICAgICAgLy8gbmVlZGVkIGZvciBjb2xvcmluZyBvZiB0aGUgZGVuZHJvZ3JhbSBub2RlcyAodmFyaWFjbmUpXHJcbiAgICAgICAgICAgICAgICAgICByZXNldGhpZXJhcmNoeUdyb3VwU3RkZXYoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAvLyBkaXNwbGF5IHRoZSB3aG9sZSBuZXR3b3JrXHJcbiAgICAgICAgICAgICAgICAgICBuZXR3b3JrID0gbmV0d29yay5tYXAoKGl0ZW0pPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFuaW1hbDEgPSB0aGlzLmFycmF5QW5pbWFscy5maWx0ZXIoZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmpbJ2EnXSA9PT0gaXRlbVsncyddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGxldCBhbmltYWwyID0gdGhpcy5hcnJheUFuaW1hbHMuZmlsdGVyKGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqWydhJ10gPT09IGl0ZW1bJ2UnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAnbm9kZTEnOiBhbmltYWwxWydhJ10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICdub2RlMic6IGFuaW1hbDJbJ2EnXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3N0YXJ0JzogYW5pbWFsMVsncCddLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAnZW5kJzogYW5pbWFsMlsncCddLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAndmFsJzogaXRlbVsndiddXHJcbiAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgIG5ldHdvcmsuZm9yRWFjaChmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgJCgoJyNtYy0nICsgZFsnbm9kZTEnXSArICctJyArIGRbJ25vZGUyJ10pKS5jc3MoJ2ZpbGwnLCBuZXR3b3JrQ29sb3JTY2FsZShkWyd2YWwnXSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICQoKCcjbWMtJyArIGRbJ25vZGUyJ10gKyAnLScgKyBkWydub2RlMSddKSkuY3NzKCdmaWxsJywgbmV0d29ya0NvbG9yU2NhbGUoZFsndmFsJ10pKTtcclxuICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgIGlmIChuZXR3b3JrQXV0bykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGxldCB0bXBBcnJheSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmV0d29yay5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBBcnJheS5wdXNoKG5ldHdvcmtbaV1bJ3ZhbCddKTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgc2V0TmV0d29yTGltaXQocGVyY2VudGlsZXModG1wQXJyYXkpKTtcclxuICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgIG5ldHdvcmsgPSBuZXR3b3JrLmZpbHRlcihmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRbJ3ZhbCddIDw9ICgxIC0gbmV0d29ya0xpbWl0KTtcclxuICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgLy8gREFUQSBKT0lOXHJcbiAgICAgICAgICAgICAgICAgICBuZXR3b3JrVmlzID0gdGhpcy50YW5rLnNlbGVjdCgnI25ldHdvcmstZ3JvdXAnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5zZWxlY3RBbGwoJ2xpbmUubmV0d29yay1lZGdlcycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmRhdGEobmV0d29yayk7XHJcbiAgICAgICAgICAgICAgICAgICAvLyBVUERBVEVcclxuICAgICAgICAgICAgICAgICAgIG5ldHdvcmtWaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneDEnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkWydzdGFydCddWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3kxJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLWRbJ3N0YXJ0J11bMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneDInLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkWydlbmQnXVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd5MicsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC1kWydlbmQnXVsxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2UnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXR3b3JrQ29sb3JTY2FsZSgoMSAtIGRbJ3ZhbCddKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlLW9wYWNpdHknLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAxIC0gZFsndmFsJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAvL0VOVEVSXHJcblxyXG4gICAgICAgICAgICAgICAgICAgbmV0d29ya1Zpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgnbGluZScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ25ldHdvcmstZWRnZXMnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4MScsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRbJ3N0YXJ0J11bMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneTEnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtZFsnc3RhcnQnXVsxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4MicsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRbJ2VuZCddWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3kyJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLWRbJ2VuZCddWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZScsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldHdvcmtDb2xvclNjYWxlKGRbJ3ZhbCddKTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2Utb3BhY2l0eScsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRbJ3ZhbCddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgIG5ldHdvcmtWaXMgPSB0aGlzLnRhbmsuc2VsZWN0QWxsKCdsaW5lLm5ldHdvcmstZWRnZXMnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5kYXRhKFtdKTtcclxuXHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgLy8gRVhJVCAtIG5ldHdvcmtcclxuICAgICAgICAgICAgICAgbmV0d29ya1Zpcy5leGl0KClcclxuICAgICAgICAgICAgICAgICAgIC5yZW1vdmUoKTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIGRlbGF1bmF5IHRyaWFuZ3VsYXRpb25cclxuICAgICAgICAgICAgICAgLy8gREFUQSBKT0lOICAtIHRyaWFuZ3VsYXRpb25cclxuICAgICAgICAgICAgICAgdmFyIHRyaWFuZ3VsYXRpb247XHJcbiAgICAgICAgICAgICAgIGlmICgkKCcjZHJhdy10cmlhbmd1bGF0aW9uJylcclxuICAgICAgICAgICAgICAgICAgIC5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhbc3dhcm1EYXRhW3RoaXMuaW5kZXhUaW1lXVsndHJpYW5ndWxhdGlvbiddXSk7XHJcbiAgICAgICAgICAgICAgICAgICB0cmlhbmd1bGF0aW9uID0gdGhpcy50YW5rLnNlbGVjdCgnI2RlbGF1bmF5LXRyaWFuZ3VsYXRpb24tZ3JvdXAnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5zZWxlY3RBbGwoJ3BhdGguZGVsYXVuYXktdHJpYW5ndWxhdGlvbicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmRhdGEoW3N3YXJtRGF0YVt0aGlzLmluZGV4VGltZV1bJ3RyaWFuZ3VsYXRpb24nXV0pO1xyXG4gICAgICAgICAgICAgICAgICAgLy8gVVBEQVRFIC0gdHJpYW5ndWxhdGlvblxyXG4gICAgICAgICAgICAgICAgICAgdHJpYW5ndWxhdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdkJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgLy9FTlRFUiAtIHRyaWFuZ3VsYXRpb25cclxuICAgICAgICAgICAgICAgICAgIHRyaWFuZ3VsYXRpb24uZW50ZXIoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJ3BhdGgnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdkZWxhdW5heS10cmlhbmd1bGF0aW9uJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignZCcsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgIHRyaWFuZ3VsYXRpb24gPSB0aGlzLnRhbmsuc2VsZWN0QWxsKCdwYXRoLmRlbGF1bmF5LXRyaWFuZ3VsYXRpb24nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5kYXRhKFtdKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAvLyBFWElUIC0gdHJpYW5ndWxhdGlvblxyXG4gICAgICAgICAgICAgICB0cmlhbmd1bGF0aW9uLmV4aXQoKVxyXG4gICAgICAgICAgICAgICAgICAgLnJlbW92ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gVm9yb25vaVxyXG4gICAgICAgICAgICAgICAvLyBEQVRBIEpPSU4gIC0gdm9yb25vaVxyXG4gICAgICAgICAgICAgICB2YXIgdm9yb25vaTtcclxuICAgICAgICAgICAgICAgaWYgKCQoJyNkcmF3LXZvcm9ub2knKVxyXG4gICAgICAgICAgICAgICAgICAgLmlzKCc6Y2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMuaW5kZXhUaW1lKTtcclxuICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2hvJyk7XHJcbiAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFtzd2FybURhdGFbdGhpcy5pbmRleFRpbWVdWyd2b3Jvbm9pJ11dKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvL2FwcGVuZCB0aGUgZ3JvdXAgZm9yIHRoZSB2b3Jvbm9pIHBhdGhzXHJcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGEgd29ya2Fyb3VuZCB0byBhdm9pZCB2b3Jvbm9pIHN0b3BwaW5nIGF0IHNwbGl0IGlmIGVtcHR5IHZhbHVlLlxyXG4gICAgICAgICAgICAgICAgaWYgKCEoJ3Zvcm9ub2knIGluIHN3YXJtRGF0YVswXSkpe1xyXG4gICAgICAgICAgICAgICAgICAgdm9yb25vaSA9IHRoaXMudGFua1xyXG4gICAgICAgICAgICAgICAgICAgICAgIC5zZWxlY3QoJyN2b3Jub2ktZ3JvdXAnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5zZWxlY3RBbGwoJ3BhdGgudm9yb25vaScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmRhdGEoW3N3YXJtRGF0YVt0aGlzLmluZGV4VGltZV1bJ3Zvcm9ub2knXV0pXHJcbiAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICB2b3Jvbm9pID0gdGhpcy50YW5rXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnNlbGVjdCgnI3Zvcm5vaS1ncm91cCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnNlbGVjdEFsbCgncGF0aC52b3Jvbm9pJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuZGF0YShzd2FybURhdGFbdGhpcy5pbmRleFRpbWVdWyd2b3Jvbm9pJ10uc3BsaXQoJzsnKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhzd2FybURhdGFbdGhpcy5pbmRleFRpbWVdWyd2b3Jvbm9pJ10pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgIC8vIFVQREFURSAtIHZvcm9ub2lcclxuICAgICAgICAgICAgICAgICAgIHZvcm9ub2lcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignZCcsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgIC8vRU5URVIgLSB2b3Jvbm9pXHJcbiAgICAgICAgICAgICAgICAgICB2b3Jvbm9pLmVudGVyKClcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCdwYXRoJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAndm9yb25vaScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2QnLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgdm9yb25vaSA9IHRoaXMudGFuay5zZWxlY3QoJyN2b3Jub2ktZ3JvdXAnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5zZWxlY3RBbGwoJ3BhdGgudm9yb25vaScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmRhdGEoW10pO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIC8vIEVYSVQgLSB2b3Jvbm9pXHJcbiAgICAgICAgICAgICAgIHZvcm9ub2kuZXhpdCgpXHJcbiAgICAgICAgICAgICAgICAgICAucmVtb3ZlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAvL0VOVEVSIC0gYXBwZW5kIHRoZSBhbmltYWwgZ3JvdXBzXHJcbiAgICAgICAgICAgICAgIGxldCBhbmltYWxHcm91cGluZ3MgPSBzdmdBbmltYWxzXHJcbiAgICAgICAgICAgICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgICAgICAgICAgLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnYW5pbWFsJylcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnYW5pbWFsLScgKyBkWydhJ107XHJcbiAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIEFwcGVuZCB0aGUgY2lyY2xlcyBmb3IgZWFjaCBhbmltYWwgdG8gdGhlIGFuaW1hbGdyb3VwXHJcbiAgICAgICAgICAgICAgIGFuaW1hbEdyb3VwaW5ncy5hcHBlbmQoJ2NpcmNsZScpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cigncicsIDEuNSAqIGFuaW1hbFNjYWxlKVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2N4JywgKGQpPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkWydwJ11bMF07XHJcbiAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2N5JywgKGQpPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtZFsncCddWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgIC5vbignbW91c2VvdmVyJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgdG9vbHRpcEZ1bmN0aW9uKGQpO1xyXG4gICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgIC5vbignbW91c2VvdXQnLCAoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRyYW5zaXRpb24oKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24oNTAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ29wYWNpdHknLCAwKTtcclxuICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAvLyBhZGQgb24gY2xpY2sgZm9yIHRoZSBhY3RpdmUgZmlzaHNcclxuICAgICAgICAgICAgICAgICAgIC5vbignY2xpY2snLCAoZCk9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlQW5pbWFscy5pbmNsdWRlcyhkWydhJ10pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlQW5pbWFscyA9IHRoaXMuYWN0aXZlQW5pbWFscy5maWx0ZXIoaXRlbSA9PiBpdGVtICE9PSBkWydhJ10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlQW5pbWFscy5wdXNoKGRbJ2EnXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgIGlmICghJCgnI3BsYXktYnV0dG9uJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAvL3RoaXMgYXBwbHlzIHRoZSBjaGFuZ2VzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZXhUaW1lLS07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gVVBEQVRFIC0gYW5pbWFscyBjaXJjbGVzXHJcbiAgICAgICAgICAgICAgIHN2Z0FuaW1hbHMuc2VsZWN0KCdjaXJjbGUnKVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2N4JywgKGQpPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkWydwJ11bMF07XHJcbiAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2N5JywgKGQpPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtZFsncCddWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdyJywgYW5pbWFsU2NhbGUpO1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhzdmdBbmltYWxzLnNlbGVjdCgnY2lyY2xlJykpO1xyXG4gICAgICAgICAgICAgICAvLyBBcHBlbmQgZm9yIGVhY2ggZ3JvdXAgdGhlIGFycm93LCBuZWVkZWQgZm9yIGNvbG9yaW5nXHJcbiAgICAgICAgICAgICAgIGFuaW1hbEdyb3VwaW5ncy5hcHBlbmQoJ3N2ZzpkZWZzJylcclxuICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJ3N2ZzptYXJrZXInKVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2lkJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdhcnJvdy1tYXJrZXItJyArIGRbJ2EnXTtcclxuICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cigncmVmWCcsIDIpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cigncmVmWScsIDYpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignbWFya2VyV2lkdGgnLCAxMylcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdtYXJrZXJIZWlnaHQnLCAxMylcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdvcmllbnQnLCAnYXV0bycpXHJcbiAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCdzdmc6cGF0aCcpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignZCcsICdNMiwyIEwyLDExIEwxMCw2IEwyLDInKTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIEFwcGVuZCB0aGUgbGluZSBmb3IgdGhlIGRpcmVjdGlvbiBhcnJvd1xyXG4gICAgICAgICAgICAgICBhbmltYWxHcm91cGluZ3NcclxuICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJ2xpbmUnKVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2Fycm93JylcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdtYXJrZXItZW5kJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICd1cmwoI2Fycm93LW1hcmtlci0nICsgZFsnYSddICsgJyknO1xyXG4gICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAvL2V4ZWN1dGUgb25seSB3aGVuIGRyYXcgZGlyZWN0aW9uIGJ1dHRvbiBpcyBjaGVja2VkXHJcbiAgICAgICAgICAgICAgIGlmICgkKCcjZHJhdy1kaXJlY3Rpb24nKVxyXG4gICAgICAgICAgICAgICAgICAgLmlzKCc6Y2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAvLyBVUERBVEUgYW5pbWFsIGRpcmVjdGlvbiBhcnJvd1xyXG4gICAgICAgICAgICAgICAgICAgc3ZnQW5pbWFscy5zZWxlY3QoJ2xpbmUnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4MScsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZFsncCddWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3kxJywgKGQpPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLWRbJ3AnXVsxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4MicsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGRbJ3AnXVswXSArIDIgKiBhbmltYWxTY2FsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneTInLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgtZFsncCddWzFdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdyb3RhdGUoJyArIC1kWydkaXJlY3Rpb24nXSArICcgJyArIGRbJ3AnXVswXSArICcgJyArIC1kWydwJ11bMV0gKyAnKSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAvLyBoaWRlIHRoZSBhcnJvd3NcclxuICAgICAgICAgICAgICAgICAgICQoJy5hcnJvdycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgLy8gRVhJVCAtIHRoZSBncm91cHNcclxuICAgICAgICAgICAgICAgc3ZnQW5pbWFscy5leGl0KClcclxuICAgICAgICAgICAgICAgICAgIC5yZW1vdmUoKTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vQ29udmV4IGh1bGxcclxuICAgICAgICAgICAgICAgaWYgKCQoJyNkcmF3LWNvbnZleC1odWxsJylcclxuICAgICAgICAgICAgICAgICAgIC5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgLy8gREFUQSBKT0lOIC0gcGF0aHNcclxuICAgICAgICAgICAgICAgICAgIHZhciBodWxsUGF0aCA9IHRoaXMudGFuay5zZWxlY3RBbGwoJ3BhdGguaHVsbC1wYXRoJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuZGF0YShbc3dhcm1EYXRhW3RoaXMuaW5kZXhUaW1lXVsnY29udmV4X2h1bGwnXV0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgIC8vIFVQREFURSAtIGh1bGwgcGF0aFxyXG4gICAgICAgICAgICAgICAgICAgaHVsbFBhdGhcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignZCcsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAvLyBFTlRFUiAtIGh1bGwgcGF0aHNcclxuICAgICAgICAgICAgICAgICAgIGh1bGxQYXRoLmVudGVyKClcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCdwYXRoJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnaHVsbC1wYXRoJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignZCcsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAvLyBkcmF3IG5vIGh1bGxcclxuICAgICAgICAgICAgICAgICAgIGh1bGxQYXRoID0gdGhpcy50YW5rLnNlbGVjdCgncGF0aC5odWxsLXBhdGgnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5kYXRhKFtdKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAvLyBFWElUIC0gaHVsbCBwYXRoc1xyXG4gICAgICAgICAgICAgICBodWxsUGF0aC5leGl0KClcclxuICAgICAgICAgICAgICAgICAgIC5yZW1vdmUoKTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vY2hhbmdlIHRoZSBjb2xvcnMgb2YgdGhlIGZpc2hcclxuICAgICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlU2NhbGUgIT09ICdibGFjaycpIHtcclxuICAgICAgICAgICAgICAgICAgIC8vIG9uY2UgdGhlIGZpbGwgZm9yIHRoZSBoZWFkcyBhbmQgdGhlIHN0cm9rZSBmb3IgdGhlIHBhdGhcclxuICAgICAgICAgICAgICAgICAgIHZhciB0bXBTY2FsZSA9IHRoaXMucmV0dXJuQ29sb3JTY2FsZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgc3ZnQW5pbWFsc1xyXG4gICAgICAgICAgICAgICAgICAgICAgIC50cmFuc2l0aW9uKClcclxuICAgICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24oMTApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdmaWxsJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0bXBTY2FsZShkW3RoaXMuYWN0aXZlU2NhbGVdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2UnLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRtcFNjYWxlKGRbdGhpcy5hY3RpdmVTY2FsZV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgLy9jb2xvciBldmVyeSBmaXNoIGJsYWNrXHJcbiAgICAgICAgICAgICAgICAgICBzdmdBbmltYWxzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdmaWxsJywgJyMwMDAnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2UnLCAnIzAwMCcpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgIGlmICghJC5pc0VtcHR5T2JqZWN0KG1ldGFkYXRhQ29sb3IpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMobWV0YWRhdGFDb2xvcikuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgZDNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZWxlY3QoJyNhbmltYWwtJyArIGtleSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zdHlsZSgnZmlsbCcsIG1ldGFkYXRhQ29sb3Jba2V5XSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2UnLCBtZXRhZGF0YUNvbG9yW2tleV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAvL2NoYW5nZSBvcGFjdGl5IGlmIHRoZSBmaXNoIGlzIHNlbGVjdGVkXHJcbiAgICAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZUFuaW1hbHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICBzdmdBbmltYWxzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZUFuaW1hbHMuaW5jbHVkZXMoZFsnYSddKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMC4yNTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgaWYgKCQoJyNyZW1vdmUtYWN0aXZlLXNlbGVjdGVkLWJ1dHRvbicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmlzKCc6ZGlzYWJsZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICQoJyNyZW1vdmUtYWN0aXZlLXNlbGVjdGVkLWJ1dHRvbicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAkKCcjdmlzdWFsLXBhcmFtZXRlci1idXR0b24nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAvLyBpZiB0cmFja2luZyBpcyBvblxyXG4gICAgICAgICAgICAgICAgICAgaWYgKHRyYWNraW5nQm9vbGVhbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGFkZFRyYWNrZWREYXRhKHRoaXMuYXJyYXlBbmltYWxzWzBdWyd0J10sIHRoaXMuYWN0aXZlQW5pbWFscyk7XHJcbiAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICBpZiAoISQoJyNyZW1vdmUtYWN0aXZlLXNlbGVjdGVkLWJ1dHRvbicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmlzKCc6ZGlzYWJsZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICQoJyNyZW1vdmUtYWN0aXZlLXNlbGVjdGVkLWJ1dHRvbicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICQoJyN2aXN1YWwtcGFyYW1ldGVyLWJ1dHRvbicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgLy8gbm9ybWFsIG9wYWNpdHlcclxuICAgICAgICAgICAgICAgICAgIHN2Z0FuaW1hbHNcclxuICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ29wYWNpdHknLCAxKTtcclxuICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgLy9kcmF3IGNlbnRyb2lkXHJcbiAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnLmNlbnRyb2lkJylcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjeCcsICgpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgaWYgKCdjZW50cm9pZCcgaW4gc3dhcm1EYXRhWzBdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzd2FybURhdGFbdGhpcy5pbmRleFRpbWVdWydjZW50cm9pZCddWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignY3knLCAoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGlmICgnY2VudHJvaWQnIGluIHN3YXJtRGF0YVswXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLXN3YXJtRGF0YVt0aGlzLmluZGV4VGltZV1bJ2NlbnRyb2lkJ11bMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgIGlmICgkKCcjZHJhdy1kaXJlY3Rpb24nKS5pcygnOmNoZWNrZWQnKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgc3dhcm1EYXRhW3RoaXMuaW5kZXhUaW1lXS5jZW50cm9pZCAmJlxyXG4gICAgICAgICAgICAgICAgICAgJCgnI2RyYXctY2VudHJvaWQnKS5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KCcjY2VudHJvaWQtbGluZScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ2hpZGRlbicsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgIC8vIFVQREFURSBhbmltYWwgZGlyZWN0aW9uIGFycm93XHJcbiAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QoJyNjZW50cm9pZC1saW5lJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneDEnLCAoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3dhcm1EYXRhW3RoaXMuaW5kZXhUaW1lXVsnY2VudHJvaWQnXVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd5MScsICgpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtc3dhcm1EYXRhW3RoaXMuaW5kZXhUaW1lXVsnY2VudHJvaWQnXVsxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4MicsICgpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoc3dhcm1EYXRhW3RoaXMuaW5kZXhUaW1lXVsnY2VudHJvaWQnXVswXSArIDIgKiBhbmltYWxTY2FsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneTInLCAoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLXN3YXJtRGF0YVt0aGlzLmluZGV4VGltZV1bJ2NlbnRyb2lkJ11bMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgKCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdyb3RhdGUoJyArIC1zd2FybURhdGFbdGhpcy5pbmRleFRpbWVdWydkaXJlY3Rpb24nXSArICcgJyArIHN3YXJtRGF0YVt0aGlzLmluZGV4VGltZV1bJ2NlbnRyb2lkJ11bMF0gKyAnICcgKyAtc3dhcm1EYXRhW3RoaXMuaW5kZXhUaW1lXVsnY2VudHJvaWQnXVsxXSArICcpJztcclxuICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgIC8vIGhpZGUgdGhlIGFycm93c1xyXG4gICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KCcjY2VudHJvaWQtbGluZScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2hpZGRlbicpO1xyXG4gICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAvLyBtZWRvaWRcclxuICAgICAgICAgICAgICAgaWYgKHRoaXMubWVkb2lkQW5pbWFsICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCcjYW5pbWFsLScgKyB0aGlzLm1lZG9pZEFuaW1hbClcclxuICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnbWVkb2lkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgdGhpcy5tZWRvaWRBbmltYWwgPSBzd2FybURhdGFbdGhpcy5pbmRleFRpbWVdWydtZWRvaWQnXTtcclxuICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgnI2FuaW1hbC0nICsgdGhpcy5tZWRvaWRBbmltYWwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ21lZG9pZCcsIHRydWUpO1xyXG4gICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAvL25leHQgZnJhbWVcclxuICAgICAgICAgICAgICAgdGhpcy5pbmRleFRpbWUrKztcclxuXHJcbiAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTGluZUNoYXJ0KCk7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgLy9jaGVjayBpZiBwbGF5IGJ1dHRvbiBpcyBhY3RpdmUgYW5kIGlmIHRoZSBhbmltYXRpb24gaXMgbm90IGZpbmlzaGVkXHJcbiAgICAgICAgICAgICAgIGlmICh0aGlzLmluZGV4VGltZSA+PSBzd2FybURhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAvL3N0YXJ0IGFnYWluIGZyb20gdGhlIHN0YXJ0XHJcbiAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4VGltZSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXcoKTtcclxuICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBsYXlCb29sZWFuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAvL21lYXN1cmUgZXhlY3V0aW9uIHRpbWVcclxuICAgICAgICAgICAgICAgICAgIC8vICAgbGV0IHQxID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAvLyAgIGNvbnNvbGUubG9nKHQxIC0gdDApOyAvLyBpbiBtaWxsaXNlY29uZHNcclxuICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgfSxcclxuICAgICAgICAgICB0aW1lVG9XYWl0KTtcclxuICAgfVxyXG5cclxuICAgY2xpY2soZCkge1xyXG4gICAgICAgc2V0QWN0aXZlQW5pbWFscyhkWydkYXRhJ11bJ25hbWUnXSk7XHJcbiAgICAgICAvLyBpZiBubyBhbmltYXRpb24gaXMgYWN0aXZlIGRyYXcgdGhlIGRyYXcgb25lIHN0ZXBcclxuICAgICAgIGlmICghJCgnI3BsYXktYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgdGhpcy5kZWNJbmRleFRpbWUoKTtcclxuICAgICAgICAgICB0aGlzLmRyYXcoKTtcclxuICAgICAgIH1cclxuICAgfVxyXG4gICBzZXRoaWVyYXJjaHlHcm91cFN0ZGV2KGtleSwgdmFsdWUpIHtcclxuICAgICAgIGlmIChrZXkgaW4gdGhpcy5oaWVyYXJjaHlHcm91cFN0ZGV2KSB7XHJcbiAgICAgICAgICAgdGhpcy5oaWVyYXJjaHlHcm91cFN0ZGV2W2tleV0ucHVzaCh2YWx1ZSk7XHJcbiAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgIHRoaXMuaGllcmFyY2h5R3JvdXBTdGRldltrZXldID0gW3ZhbHVlXTtcclxuICAgICAgIH1cclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIFJlc2V0IGhpZXJhcmNoeSBncm91cCBzdGFuZGFyZCBkZXZpYXRpb25cclxuICAgICovXHJcbiAgIHJlc2V0aGllcmFyY2h5R3JvdXBTdGRldigpIHtcclxuICAgICAgIHRoaXMuaGllcmFyY2h5R3JvdXBTdGRldiA9IHt9O1xyXG4gICB9XHJcbiAgIGdldEhpZXJhcmNoeUxldmVsKHJvb3QsIGhpZXJhcmNoeSkge1xyXG4gICAgbGV0IHJlc3VsdCA9IFtdO1xyXG4gICAgbGV0IGxldmVsID0gdGhpcy5oaWVyYXJjaHlMZXZlbHNbJ2gnICsgaGllcmFyY2h5XTtcclxuXHJcbiAgICAvLyBzZWNvbmQgbGV2ZWwgb2YgdGhlIGFycmF5XHJcbiAgICBsZXQgdG1wX25vZGVzID0gcm9vdFsnY2hpbGRyZW4nXTtcclxuICAgIC8vIGl0ZXJhdGUgdGhyb3VnaCB0aGUgdHJlZVxyXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCByb290WydoZWlnaHQnXTsgaSsrKSB7XHJcbiAgICAgICAgLy8gY2hlY2sgaWYgd2UgYXJlIGF0IHRoZSBzZWFyY2hlZCBsZXZlbFxyXG4gICAgICAgIGlmICh0bXBfbm9kZXNbMF0gJiYgdG1wX25vZGVzWzBdWydkZXB0aCddID09PSBsZXZlbCkge1xyXG4gICAgICAgICAgICAvLyBhZGQgZWFjaCBjbHVzdGVyIHRvIHRoZSByZXN1bHQgc2V0XHJcbiAgICAgICAgICAgIHRtcF9ub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uKG5vZGUpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygbm9kZVsnZGF0YSddWyduYW1lJ10gIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobm9kZVsnZGF0YSddWyduYW1lJ10pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGdldCBhbGwgY2hpbGRyZW4gb2YgYSBzcGVjaWZpYyBsZXZlbCBpbiB0aGUgdHJlZVxyXG4gICAgICAgIGxldCB0bXAgPSBbXTtcclxuICAgICAgICB0bXBfbm9kZXMuZm9yRWFjaChmdW5jdGlvbihub2RlKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygbm9kZVsnY2hpbGRyZW4nXSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgIHRtcCA9IHRtcC5jb25jYXQobm9kZVsnY2hpbGRyZW4nXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0bXBfbm9kZXMgPSB0bXA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbiAgIHNldEhpZXJhcmNoeUxldmVsKGhpZXJhcmNoeSwgbGV2ZWwpIHtcclxuICAgICAvLyBUT0RPIGNhdGNoIGNhc2VzIDwgMCBhbmQgYmlnZ2VyIHRoYW4gb3ZlcmFsbCBoZWlnaHRcclxuICAgICB0aGlzLmhpZXJhcmNoeUxldmVsc1snaCcgKyBoaWVyYXJjaHldID0gbGV2ZWw7XHJcbiAgICB9XHJcbiAgIHJlbW92ZUhpZXJhcmNoeUxldmVsKGhpZXJhcmNoeSkge1xyXG4gICAgICAvLyBUT0RPIGNhdGNoIGNhc2VzIDwgMCBhbmQgYmlnZ2VyIHRoYW4gb3ZlcmFsbCBoZWlnaHRcclxuICAgICAgZGVsZXRlIHRoaXMuaGllcmFyY2h5TGV2ZWxzWydoJyArIGhpZXJhcmNoeV07XHJcbiAgfVxyXG4gICB1cGRhdGVEZW5kcm9ncmFtKCkge1xyXG4gICAgIC8vIGdldCB0aGUgaW1wb3J0YW50IGluZm9cclxuICAgICBsZXQgaWQgPSAkKCcuc2hvdy1kZW5kcm9ncmFtLmJ0bi1wcmltYXJ5JykuYXR0cignZGF0YScpO1xyXG4gICAgIGxldCBuYW1lID0gJCgnLnNob3ctZGVuZHJvZ3JhbS5idG4tcHJpbWFyeScpLmF0dHIoJ25hbWUnKTtcclxuICAgICAvLyBzZXQgdGhlIG5hbWUgb2YgdGhlIGRpc3BsYXllZCBoaWVyYXJjaHlcclxuICAgICAkKCcjZGVuZHJvZ3JhbS1wYW5lbC1uYW1lJykudGV4dChuYW1lKTtcclxuXHJcbiAgICAgLy8gc2V0IHNsaWRlciBhbmQgIHRleHQgdmFsdWVcclxuICAgICAkKCcjZGVuZHJvZ3JhbS1wYW5lbC1sZXZlbC1zbGlkZXInKS52YWwodGhpcy5oaWVyYXJjaHlMZXZlbHNbJ2gnICsgaWRdKTtcclxuICAgICAkKCcjZGVuZHJvZ3JhbS1wYW5lbC1sZXZlbC10ZXh0JykudGV4dCh0aGlzLmhpZXJhcmNoeUxldmVsc1snaCcgKyBpZF0pO1xyXG5cclxufVxyXG4gICBnZXRIaWVyYXJjaHlWZXJ0aWNlcyhoaWVyYXJjaGllcykge1xyXG4gICAgICAgbGV0IHJlc3VsdCA9IFtdOyAvLyByZXN1bHQgc2V0XHJcbiAgICAgICBoaWVyYXJjaGllcy5mb3JFYWNoKChjbHVzdGVyKT0+e1xyXG4gICAgICAgICAgIGxldCB2ZXJ0aWNlcyA9IFtdOyAvLyB2ZXJ0aWNlcyBvZiB0aGUgY2x1c3RlcnMgaW4gdGhlIHNwYXRpYWwgdmlld1xyXG4gICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgY2x1c3Rlci5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICBsZXQgZ3JvdXBNZW1iZXIgPSB0aGlzLmFycmF5QW5pbWFscy5maW5kKGQgPT4gZFsnYSddID09PSBjbHVzdGVyW2pdKTtcclxuICAgICAgICAgICAgICAgaWYgKGdyb3VwTWVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICB2ZXJ0aWNlcy5wdXNoKFtncm91cE1lbWJlclsncCddWzBdLCAtZ3JvdXBNZW1iZXJbJ3AnXVsxXV0pO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgICAgIC8vIEFuZHJldyBtb250b25lIGNoYWluIGFsZ29yaXRobSByZXV0cm5zIGZvciBwb2ludHMgZmV3ZXIgdGhhbiAzIG51bGxcclxuICAgICAgICAgICBpZiAodmVydGljZXMubGVuZ3RoID49IDMpIHtcclxuICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goZDMucG9seWdvbkh1bGwodmVydGljZXMpKTtcclxuICAgICAgICAgICB9XHJcbiAgICAgICB9KTtcclxuICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgIH1cclxuICAgZHJhd0hpZXJhcmNoeSgpIHtcclxuICAgICAgIC8vIGlkIG9mIHRoZSBoaWVyYXJjaHkgZS5nLiBbMSw1LDNdXHJcbiAgICAgICBsZXQgaGllcmFyY2h5SWRzID0gT2JqZWN0LmtleXMobmV0d29ya0hpZXJhcmNoeSkubWFwKGZ1bmN0aW9uKHgpIHtcclxuICAgICAgICAgICByZXR1cm4geC5yZXBsYWNlKCdoJywgJycpO1xyXG4gICAgICAgfSk7XHJcbiAgICAgICAvLyAgVGhlIGNsdXN0ZXJpbmcgaW4gYW4gMkQgYXJyYXkgd2l0aCB3aGljaCBhbmltYWwgaWQgYmVsb25ncyB0byB3aGljaCBncm91cFxyXG4gICAgICAgbGV0IGhpZXJhcmNoeVZlcnRpY2VzID0gW107XHJcblxyXG4gICAgICAgLy8gaXRlcmF0ZSBvdmVyIHRoZSBoaWVyYXJjaHkgZGF0YSB0byBnZXQgdGhlIGhpZXJhcmNoeSBhbmltYWwgaWRzIHBlciBjbHVzdGVyaW5nIGFuZCBncm91cGluZ1xyXG4gICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBoaWVyYXJjaHlJZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICBsZXQgdHJlZURhdGEgPSBuZXR3b3JrSGllcmFyY2h5WydoJyArIGhpZXJhcmNoeUlkc1tpXV1bdGhpcy5pbmRleFRpbWVdO1xyXG4gICAgICAgICAgIC8vY29uc29sZS5sb2codHJlZURhdGEpO1xyXG4gICAgICAgICAgIGxldCBub2RlcyA9IGQzLmhpZXJhcmNoeSh0cmVlRGF0YSwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICByZXR1cm4gZC5jaGlsZHJlbjtcclxuICAgICAgICAgICB9KTtcclxuICAgICAgICAgICBsZXQgbWFyZ2luID0gMjAsXHJcbiAgICAgICAgICAgICAgIHdpZHRoID0gNTAwMCxcclxuICAgICAgICAgICAgICAgaGVpZ2h0ID0gNTAwMDtcclxuXHJcbiAgICAgICAgICAgLy8gZDMgdHJlZVxyXG4gICAgICAgICAgIGxldCB0cmVlbWFwID0gZDMudHJlZSgpIC8vZDMuY2x1c3RlcigpXHJcbiAgICAgICAgICAgICAgIC5zaXplKFsoaGVpZ2h0IC0gMTAgKiBtYXJnaW4pLCAod2lkdGggLSAxMCAqIG1hcmdpbildKTtcclxuICAgICAgICAgICBub2RlcyA9IHRyZWVtYXAobm9kZXMpO1xyXG4gICAgICAgICAgIGxldCByb290ID0gbm9kZXNbJ2NoaWxkcmVuJ11bMF07XHJcbiAgICAgICAgICAgaWYgKHNob3dOZXR3b3JrSGllcmFyY2h5ID09PSBoaWVyYXJjaHlJZHNbaV0pIHtcclxuICAgICAgICAgICAgICAgbmV0d29ya0hpZXJhcmNoeUlkcyA9IHRoaXMuZ2V0SGllcmFyY2h5TGV2ZWwocm9vdCwgaGllcmFyY2h5SWRzW2ldKTtcclxuICAgICAgICAgICB9XHJcbiAgICAgICAgICAgLy8gYWRkIHRoZSB2ZXJ0aWNlcyBpbnRvIHRoZSBhcnJheVxyXG4gICAgICAgICAgIGhpZXJhcmNoeVZlcnRpY2VzLnB1c2godGhpcy5nZXRIaWVyYXJjaHlWZXJ0aWNlcyh0aGlzLmdldEhpZXJhcmNoeUxldmVsKHJvb3QsIGhpZXJhcmNoeUlkc1tpXSkpKTtcclxuICAgICAgIH1cclxuXHJcbiAgICAgICAvLyBpZiBtb3JlIHRoYW4gMiBoaWVyYXJjaGllcyBhcmUgZHJhd25cclxuICAgICAgIGlmIChoaWVyYXJjaHlWZXJ0aWNlcy5sZW5ndGggPiAwKSB7XHJcblxyXG4gICAgICAgfVxyXG4gICAgICAgbGV0IHNwYXRpYWxWaWV3ID0gZDMuc2VsZWN0KCcudGFuaycpO1xyXG4gICAgICAgLy8gREFUQSBKb2luXHJcbiAgICAgICBsZXQgaGllcmFyY2hpZXMgPSBzcGF0aWFsVmlld1xyXG4gICAgICAgICAgIC5zZWxlY3RBbGwoJ2cuaGllcmFyY2h5LWdyb3VwJylcclxuICAgICAgICAgICAuZGF0YShoaWVyYXJjaHlWZXJ0aWNlcyk7XHJcblxyXG4gICAgICAgLy8gRU5URVIgdGhlIGdyb3VwcyAtIGFkZHMgYSBzcGVjaWZpYyBpZCBhbmQgY29sb3JcclxuICAgICAgIGhpZXJhcmNoaWVzXHJcbiAgICAgICAgICAgLmVudGVyKClcclxuICAgICAgICAgICAuYXBwZW5kKCdnJylcclxuICAgICAgICAgICAuYXR0cignY2xhc3MnLCBmdW5jdGlvbihkLCBpKSB7XHJcbiAgICAgICAgICAgICAgIGlmIChzZXRPcGVyYXRpb24gPT09ICdpbnRlcnNlY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2hpZXJhcmNoeS1ncm91cCBpbnRlcnNlY3Rpb24nO1xyXG4gICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNldE9wZXJhdGlvbiA9PT0gJ3N5bS1kaWZmZXJlbmNlJykge1xyXG4gICAgICAgICAgICAgICAgICAgcmV0dXJuICdoaWVyYXJjaHktZ3JvdXAgc3ltLWRpZmZlcmVuY2UnO1xyXG4gICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgcmV0dXJuICdoaWVyYXJjaHktZ3JvdXAgaCcgKyBoaWVyYXJjaHlJZHNbaV07XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICB9KVxyXG4gICAgICAgICAgIC5zdHlsZSgnZmlsbCcsIGZ1bmN0aW9uKGQsIGkpIHtcclxuICAgICAgICAgICAgICAgcmV0dXJuIGhpZXJhcmNoeUNvbG9yc1snaCcgKyBoaWVyYXJjaHlJZHNbaV1dO1xyXG4gICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgLmF0dHIoJ3N0cm9rZScsIGZ1bmN0aW9uKGQsIGkpIHtcclxuICAgICAgICAgICAgICAgcmV0dXJuIGhpZXJhcmNoeUNvbG9yc1snaCcgKyBoaWVyYXJjaHlJZHNbaV1dO1xyXG4gICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgLm1vdmVUb0JhY2soKTtcclxuXHJcbiAgICAgICAvLyBVUERBVEUgLSB0aGUgY2xhc3MgbmVlZGVkIGZvciBpbnRlcnNlY3Rpb24gYW5kIHN5bW1ldHJpYyBkaWZmZXJlbmNlXHJcbiAgICAgICBoaWVyYXJjaGllcy5hdHRyKCdjbGFzcycsIGZ1bmN0aW9uKGQsIGkpIHtcclxuICAgICAgICAgICBpZiAoc2V0T3BlcmF0aW9uID09PSAnaW50ZXJzZWN0aW9uJykge1xyXG4gICAgICAgICAgICAgICByZXR1cm4gJ2hpZXJhcmNoeS1ncm91cCBpbnRlcnNlY3Rpb24nO1xyXG4gICAgICAgICAgIH0gZWxzZSBpZiAoc2V0T3BlcmF0aW9uID09PSAnc3ltLWRpZmZlcmVuY2UnKSB7XHJcbiAgICAgICAgICAgICAgIHJldHVybiAnaGllcmFyY2h5LWdyb3VwIHN5bS1kaWZmZXJlbmNlJztcclxuICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICByZXR1cm4gJ2hpZXJhcmNoeS1ncm91cCBoJyArIGhpZXJhcmNoeUlkc1tpXTtcclxuICAgICAgICAgICB9XHJcbiAgICAgICB9KTtcclxuXHJcbiAgICAgICAvLyBFWElUXHJcbiAgICAgICBoaWVyYXJjaGllcy5leGl0KClcclxuICAgICAgICAgICAucmVtb3ZlKCk7XHJcblxyXG4gICAgICAgLy8gSGllcmFjaHkgaHVsbHMgYWRkZWQgdG8gdGhlIHNwYXRpYWwgdmlldyAtIGdldCB0aGUgcG9pbnRzIGZvciBlYWNoIGFuaW1hbCBpbiB0aGVcclxuICAgICAgIC8vIHNwYXRpYWwgdmlldyBzbyB0aGF0IGEgY29udmV4IGh1bGwgY2FuIGJlIGNhbGN1bGF0ZWRcclxuICAgICAgIGxldCBoaWVyYXJ5SHVsbHMgPSBoaWVyYXJjaGllcy5zZWxlY3RBbGwoJ3BhdGguaGllcmFyY2h5LWh1bGwtcGF0aCcpXHJcbiAgICAgICAgICAgLmRhdGEoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAvLyBFTlRFUiBhbmQgY2FsY3VsYXRlIHRoZSBjb252ZXggaHVsbFxyXG4gICAgICAgaGllcmFyeUh1bGxzXHJcbiAgICAgICAgICAgLmVudGVyKClcclxuICAgICAgICAgICAuYXBwZW5kKCdwYXRoJylcclxuICAgICAgICAgICAvLyAuYXR0cignaWQnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgLy8gICAgIHJldHVybiAnaHAnICsgZC5qb2luKCcnKS5yZXBsYWNlKC8sL2csICcnKTtcclxuICAgICAgICAgICAvLyB9KVxyXG4gICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdoaWVyYXJjaHktaHVsbC1wYXRoJylcclxuICAgICAgICAgICAuYXR0cignZCcsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgLy8gcmV0dXJuIGRyYXdMaW5lKGQpO1xyXG4gICAgICAgICAgICAgICByZXR1cm4gJ00nICsgZC5qb2luKCdMJykgKyAnWic7XHJcbiAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgLy8gVVBEQVRFIHRoZSBjb252ZXggaHVsbFxyXG4gICAgICAgaGllcmFyeUh1bGxzXHJcbiAgICAgICAgICAgLmF0dHIoJ2QnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgIC8vIHJldHVybiBkcmF3TGluZShkKTtcclxuICAgICAgICAgICAgICAgcmV0dXJuICdNJyArIGQuam9pbignTCcpICsgJ1onO1xyXG4gICAgICAgICAgIH0pO1xyXG4gICAgICAgLy8gLmF0dHIoJ2lkJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgLy8gcmV0dXJuICdocCcgKyBkLmpvaW4oJycpLnJlcGxhY2UoLywvZywgJycpO1xyXG4gICAgICAgLy8gfSk7XHJcbiAgICAgICAvLyBFWElUXHJcbiAgICAgICBoaWVyYXJ5SHVsbHMuZXhpdCgpXHJcbiAgICAgICAgICAgLnJlbW92ZSgpO1xyXG5cclxuICAgfVxyXG4gICBkcmF3RGVuZHJvZ3JhbSgpIHtcclxuXHJcblxyXG4gICAgICAgICB2YXIgY29sbGFwc2UgPSAoZCk9PntcclxuICAgICAgICAgIC8vY29uc29sZS5sb2codGhpcy5oaWVyYXJjaHlMZXZlbHMpO1xyXG4gICAgICAgICAgLy9jb25zb2xlLmxvZyhkLmNoaWxkcmVuKTtcclxuICAgICAgICAgIC8vaWYgKGQuY2hpbGRyZW4gJiYgZC5kZXB0aCA8PSB0aGlzLmhpZXJhcmNoeUxldmVsc1snaCcgKyB0aGlzLmlkXSlcclxuICAgICAgICAgIGlmIChkLmNoaWxkcmVuICYmIGQuZGVwdGggPD0gMikge1xyXG4gICAgICAgICAgICAgIGQuX2NoaWxkcmVuID0gZC5jaGlsZHJlbjtcclxuICAgICAgICAgICAgICBkLl9jaGlsZHJlbi5mb3JFYWNoKGNvbGxhcHNlKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgZC5jaGlsZHJlbiA9IDA7XHJcbiAgICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgICAgLy8gZ2V0IHRoZSBhY3RpdmUgZGVuZHJvZ3JhbVxyXG4gICAgICAgbGV0IGlkID0gJCgnLnNob3ctZGVuZHJvZ3JhbS5idG4tcHJpbWFyeScpLmF0dHIoJ2RhdGEnKTtcclxuICAgICAgIC8vIGlmIGRhdGEgaXMgYXZhaWFibGUgZHJhdyBoaWVyYXJjaHkgY2x1c3RlcnMgYW5kIGEgYnV0dG9uIGlzIGFjdGl2ZSBzZWxjdGVkXHJcbiAgICAgICBpZiAoISQuaXNFbXB0eU9iamVjdChuZXR3b3JrSGllcmFyY2h5KSAmJiBpZCkge1xyXG4gICAgICAgICAgIC8vIGdldCB0aGUgZGF0YSBhbmQgdHJhbnNmb3JtIGl0XHJcbiAgICAgICAgICAgbGV0IHRyZWVEYXRhID0gbmV0d29ya0hpZXJhcmNoeVsnaCcgKyBpZF1bdGhpcy5pbmRleFRpbWVdO1xyXG5cclxuICAgICAgICAgICBsZXQgbm9kZXMgPSBkMy5oaWVyYXJjaHkodHJlZURhdGEsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgcmV0dXJuIGQuY2hpbGRyZW47XHJcbiAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgLy8gc2tpcCB0aGUgcm9vdCBub2RlXHJcbiAgICAgICAgICAgbm9kZXMgPSBub2Rlcy5jaGlsZHJlblswXTtcclxuICAgICAgICAgICAvLyBjb2xsYXBzZSB0aGUgdHJlZVxyXG4gICAgICAgICAgIG5vZGVzLmNoaWxkcmVuLmZvckVhY2goY29sbGFwc2UpO1xyXG5cclxuICAgICAgICAgICBsZXQgbWFyZ2luID0gMjAsXHJcbiAgICAgICAgICAgICAgIHdpZHRoID0gNTAwMCxcclxuICAgICAgICAgICAgICAgaGVpZ2h0ID0gNTAwMDtcclxuXHJcbiAgICAgICAgICAgLy8gZDMgdHJlZVxyXG4gICAgICAgICAgIGxldCB0cmVlbWFwID0gZDMudHJlZSgpIC8vZDMuY2x1c3RlcigpXHJcbiAgICAgICAgICAgICAgIC5zaXplKFsoaGVpZ2h0IC0gMTAgKiBtYXJnaW4pLCAod2lkdGggLSAxMCAqIG1hcmdpbildKTtcclxuXHJcbiAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgIC8vIG1hcHMgdGhlIG5vZGUgZGF0YSB0byB0aGUgdHJlZSBsYXlvdXRcclxuICAgICAgICAgICBub2RlcyA9IHRyZWVtYXAobm9kZXMpO1xyXG4gICAgICAgICAgIC8vY29uc29sZS5sb2cobm9kZXMpO1xyXG5cclxuICAgICAgICAgICAvLyBoaWRlIGlmIG5vIG5ldHdvcmsgaXMgY2hvb3NlblxyXG4gICAgICAgICAgIGlmICgkKCcuc2hvdy1kZW5kcm9ncmFtLmJ0bi1wcmltYXJ5JykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhoaWVyYXJjaHlMZXZlbHMpO1xyXG4gICAgICAgICAgICAgICAvLyBzZXQgdGhlIG5ldyBzbGlkZXIgbWF4XHJcbiAgICAgICAgICAgICAgICQoJyNkZW5kcm9ncmFtLXBhbmVsLWxldmVsLXNsaWRlcicpXHJcbiAgICAgICAgICAgICAgICAgICAuc2xpZGVyKCdvcHRpb24nLCAnbWF4JywgKG5vZGVzWydoZWlnaHQnXSAtIDEpKVxyXG4gICAgICAgICAgICAgICAgICAgLnNsaWRlcigndmFsdWUnLCB0aGlzLmhpZXJhcmNoeUxldmVsc1snaCcgKyBpZF0pO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gREFUQSBKT0lOIC0gbGlua3MgKGVkZ2VzKVxyXG4gICAgICAgICAgICAgICBsZXQgbGluayA9IHRoaXMuem9vbUdyb3VwXHJcbiAgICAgICAgICAgICAgICAgICAuc2VsZWN0QWxsKCdwYXRoLmxpbmsnKVxyXG4gICAgICAgICAgICAgICAgICAgLmRhdGEobm9kZXMuZGVzY2VuZGFudHMoKS5zbGljZSgxKSk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyBFTlRFUlxyXG4gICAgICAgICAgICAgICBsaW5rXHJcbiAgICAgICAgICAgICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgICAgICAgICAgLmFwcGVuZCgncGF0aCcpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGluaycpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignZCcsIGRpYWdvbmFsTGluZXMpO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gVHJhbnNpdGlvbiBsaW5rcyB0byB0aGVpciBuZXcgcG9zaXRpb24uXHJcbiAgICAgICAgICAgICAgIGxpbmtcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdkJywgZGlhZ29uYWxMaW5lcyk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyBFWElUXHJcbiAgICAgICAgICAgICAgIGxpbmsuZXhpdCgpXHJcbiAgICAgICAgICAgICAgICAgICAucmVtb3ZlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyBEQVRBIEpPSU4gLSBub2Rlc1xyXG4gICAgICAgICAgICAgICAvLyBhZGRzIGVhY2ggbm9kZSBhcyBhIGdyb3VwXHJcbiAgICAgICAgICAgICAgIGxldCBub2RlID0gdGhpcy56b29tR3JvdXBcclxuICAgICAgICAgICAgICAgICAgIC5zZWxlY3RBbGwoJy5ub2RlJylcclxuICAgICAgICAgICAgICAgICAgIC5kYXRhKG5vZGVzLmRlc2NlbmRhbnRzKCkpO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gYWRkIHRoZSBncm91cHMgdG8gdGhlIGRlbmRncm9ncmFtXHJcbiAgICAgICAgICAgICAgIHZhciBub2RlRW50ZXIgPSBub2RlLmVudGVyKClcclxuICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnbm9kZScgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAoZC5jaGlsZHJlbiA/ICcgbm9kZS0taW50ZXJuYWwnIDogJyBub2RlLS1sZWFmJyk7XHJcbiAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgnICsgZC54ICsgJywnICsgZC55ICsgJyknO1xyXG4gICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyBFTlRFUiAtIGFwcGVuZCBmb3IgZWFjaCBncm91cCBhIG5vZGUgKGNpcmNsZSlcclxuICAgICAgICAgICAgICAgLy8gd2l0aCBoaWdobGlnaHRpbmcgZm9yIHRoZSBhY3RpdmUgY2hvb3NlbiBsZXZlbFxyXG4gICAgICAgICAgICAgICBub2RlRW50ZXIuYXBwZW5kKCdjaXJjbGUnKVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ3InLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICBpZiAoZFsnZGVwdGgnXSA9PT0gdGhpcy5oaWVyYXJjaHlMZXZlbHNbJ2gnICsgaWRdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiA0MCArIGQuZGF0YS5uYW1lLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMjAgKyBkLmRhdGEubmFtZS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGlmIChkWydkZXB0aCddID09PSB0aGlzLmhpZXJhcmNoeUxldmVsc1snaCcgKyBpZF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdhY3RpdmUtbGV2ZWwnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignaWQnLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2gnICsgZFsnZGF0YSddWyduYW1lJ10udG9TdHJpbmcoKS5oYXNoQ29kZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgIC8vIFRPRE8gZmluZCBhIG5pY2UgZnVuY3Rpb24gZm9yIHRoZSBvbiBjbGljayBtZXRob2RcclxuICAgICAgICAgICAgICAgICAgIC5vbignY2xpY2snLCB0aGlzLmNsaWNrKVxyXG4gICAgICAgICAgICAgICAgICAgLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgLy8gdG9vbHRpcCBwb3NpdGlvbiBhbmQgdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXBEaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdsZWZ0JywgKGQzLmV2ZW50LnBhZ2VYICsgNSkgKyAncHgnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ3RvcCcsIChkMy5ldmVudC5wYWdlWSArIDUpICsgJ3B4JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgdG9vbHRpcERpdi5zZWxlY3QoJy50b29sdGlwLXNwYW4nKS5odG1sKGRbJ2RhdGEnXVsnbmFtZSddLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCBoaWdobGlnaHQgaW4gdGhlIHNwYXRpYWwgdmlld1xyXG4gICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSB1bmRpb24gb2YgdGhlIHBhdGhzIG1ha2VzIHRoaXMgY29tcGxpY2F0ZWRcclxuICAgICAgICAgICAgICAgICAgICAgICBhZGRIaWdobGlnaHRTcGF0aWFsVmlldyhkWydkYXRhJ11bJ25hbWUnXSk7XHJcbiAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgLm9uKCdtb3VzZW91dCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXBEaXYudHJhbnNpdGlvbigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC5kdXJhdGlvbig1MDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zdHlsZSgnb3BhY2l0eScsIDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBoaWdobGlnaHQgaW4gdGhlIHNwYXRpYWwgdmlld1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUhpZ2hsaWdodFNwYXRpYWxWaWV3KCk7XHJcbiAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIGFkZCB0aGUgdGV4dCAtICMgbnVtYmVyIG9mIGFuaW1hbHMgaW4gdGhlIGNsdXN0ZXJcclxuICAgICAgICAgICAgICAgbm9kZUVudGVyLmFwcGVuZCgndGV4dCcpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnZGVuZHJvZ3JhbS10ZXh0JylcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4JywgMTUwKVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ3knLCAtMTUwKVxyXG4gICAgICAgICAgICAgICAgICAgLnRleHQoKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuZGF0YS5uYW1lLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gVVBEQVRFIC0tIHVwZGF0ZSB0aGUgZ3JvdXBzXHJcbiAgICAgICAgICAgICAgIG5vZGVFbnRlclxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyBkLnggKyAnLCcgKyBkLnkgKyAnKSc7XHJcbiAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIHVwZGFlIHRoZSBub2RlIGFuZCBjaXJjbGVzXHJcbiAgICAgICAgICAgICAgIC8vIHdpdGggYWN0aXZlLWxldmVsIGZ1bmN0aW9uIHRvIGhpZ2hsaWdodCB3aGljaCBsZXZlbCBpcyBjaG9zZW5cclxuICAgICAgICAgICAgICAgbm9kZVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyBkLnggKyAnLCcgKyBkLnkgKyAnKSc7XHJcbiAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgLnNlbGVjdCgnY2lyY2xlJylcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdyJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRbJ2RlcHRoJ10gPT09IHRoaXMuaGllcmFyY2h5TGV2ZWxzWydoJyAraWRdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiA0MCArIGQuZGF0YS5uYW1lLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMjAgKyBkLmRhdGEubmFtZS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsIChkKT0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICBpZiAoZFsnZGVwdGgnXSA9PT0gdGhpcy5oaWVyYXJjaHlMZXZlbHNbJ2gnICsgaWRdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdhY3RpdmUtbGV2ZWwnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coKCdoJyArIGRbJ2RhdGEnXVsnbmFtZSddLnRvU3RyaW5nKCkuaGFzaENvZGUoKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2FjdGl2ZS1sZXZlbCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignaWQnLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2gnICsgZFsnZGF0YSddWyduYW1lJ10udG9TdHJpbmcoKS5oYXNoQ29kZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyB1cGRhdGUgdGhlIHRleHQgb2YgbnVtYmVyIG9mIGVudGl0aWVzXHJcbiAgICAgICAgICAgICAgIG5vZGUuc2VsZWN0KCd0ZXh0JylcclxuICAgICAgICAgICAgICAgICAgIC50ZXh0KChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLmRhdGEubmFtZS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIEVYSVRcclxuICAgICAgICAgICAgICAgbm9kZS5leGl0KClcclxuICAgICAgICAgICAgICAgICAgIC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGhpZXJhcmNoeUdyb3VwU3RkZXYpO1xyXG4gICAgICAgICAgICAgICAvLyBjb2xvciB0aGUgZGVuZHJvZ3JhbSBub2RlcyB1c2luZyB0aGUgc3RhbmRhcmREZXZpYXRpb24gaW4gdGhlIGNsdXN0ZXJcclxuICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMuaGllcmFyY2h5R3JvdXBTdGRldikubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncnVucycpO1xyXG4gICAgICAgICAgICAgICAgICAgLy8gc2hvdyB0aGUgbGVnZW5kIGZvciB0aGUgY29sb3JpbmdcclxuICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGhpZXJhcmNoeUdyb3VwU3RkZXYpO1xyXG4gICAgICAgICAgICAgICAgICAgLy8gVE9ETyBsZWdlbmQgaGVyZVxyXG4gICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ0pVTVBTIEhFUkUnKTtcclxuICAgICAgICAgICAgICAgICAgIGlmICgkKCcjZGVuZHJvZ3JhbS1sZWdlbmQnKS5jc3MoJ2Rpc3BsYXknKSA9PSAnbm9uZScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAkKCcjZGVuZHJvZ3JhbS1sZWdlbmQnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAvLyBJTVBPUlRBTlQgLSBhc3luYyBwcm9ibGVtc1xyXG4gICAgICAgICAgICAgICAgICAgLy8gVE9ETyBzb2x2ZSB0aGlzIC0gdmVyeSBzbG93XHJcbiAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5zZWxlY3QoJ2NpcmNsZScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zdHlsZSgnZmlsbCcsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGhpZXJhcmNoeUdyb3VwU3RkZXYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coKCdoJyArIGRbJ2RhdGEnXVsnbmFtZSddLnRvU3RyaW5nKCkuaGFzaENvZGUoKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coKCdoJyArIGRbJ2RhdGEnXVsnbmFtZSddLnRvU3RyaW5nKCkuaGFzaENvZGUoKSkgaW4gaGllcmFyY2h5R3JvdXBTdGRldilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbG9yIHRoZSBub2RlcyBieSBjYWxjdWxhdGluZyB0aGUgc3RhbmRhcmREZXZpYXRpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZvciBlYWNoIGNsdXN0ZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9ubHkgYWN0aXZlIGlzIHNob3cgaW4gY2x1c3RlciBpcyBjaG9vc2VuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKCdoJyArIGRbJ2RhdGEnXVsnbmFtZSddLnRvU3RyaW5nKCkuaGFzaENvZGUoKSkgaW4gaGllcmFyY2h5R3JvdXBTdGRldikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdoZWxsbycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHN0YW5kYXJkRGV2aWF0aW9uKGhpZXJhcmNoeUdyb3VwU3RkZXZbKCdoJyArIGRbJ2RhdGEnXVsnbmFtZSddLnRvU3RyaW5nKCkuaGFzaENvZGUoKSldKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0YW5kYXJkRGV2aWF0aW9uQ29sb3JTY2FsZShzdGFuZGFyZERldmlhdGlvbihoaWVyYXJjaHlHcm91cFN0ZGV2WygnaCcgKyBkWydkYXRhJ11bJ25hbWUnXS50b1N0cmluZygpLmhhc2hDb2RlKCkpXSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkWydkZXB0aCddICE9PSBoaWVyYXJjaHlMZXZlbHNbJ2gnICt0aGlzLmlkXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcjMDAwJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICB9LCAyNTApO1xyXG4gICAgICAgICAgICAgICB9IGVsc2UgaWYgKCQoJyNkZW5kcm9ncmFtLWxlZ2VuZCcpLmNzcygnZGlzcGxheScpICE9PSAnbm9uZScpIHtcclxuICAgICAgICAgICAgICAgICAgICQoJyNkZW5kcm9ncmFtLWxlZ2VuZCcpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgIH1cclxuICAgICAgIH1cclxuICAgICAgIGlmICghJC5pc0VtcHR5T2JqZWN0KG5ldHdvcmtIaWVyYXJjaHkpKSB7XHJcbiAgICAgICAgICAgLy8gZHJhdyB0aGUgaGllcmFyY2h5IGluIHNwYXRpYWwgdmlld1xyXG4gICAgICAgICAgIHRoaXMuZHJhd0hpZXJhcmNoeSgpO1xyXG4gICAgICAgfVxyXG4gICB9XHJcblxyXG5cclxuXHJcbiB9XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIFNwYXRpYWxWaWV3IGV4dGVuZHMgRHJhd2Vye1xyXG4gIGNvbnN0cnVjdG9yKGRhdGEpe1xyXG4gICAgc3VwZXIoZGF0YSk7XHJcblxyXG5cclxuICAgIHRoaXMuc3BhdGlhbFZpZXdJbml0KCk7XHJcbiAgICAvL3RoaXMuY3BfbGlzdGVuZXIoKTtcclxuICB9XHJcbiAgY3BfbGlzdGVuZXIoKSB7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogUGxheSBvciBzdG9wIHRoZSBhbmltYXRpb25cclxuICAgICAgICovXHJcbiAgICAgICQoJyNwbGF5LWJ1dHRvbicpLmNsaWNrKCgpPT57XHJcbiAgICAgICAgICBpZiAoJCgnI3BsYXktYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5wbGF5Qm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICQoJy5tZGktcGF1c2UnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgJCgnLm1kaS1wbGF5Jykuc2hvdygpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICB0aGlzLnBsYXlCb29sZWFuID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAkKCcubWRpLXBsYXknKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgJCgnLm1kaS1wYXVzZScpLnNob3coKTtcclxuICAgICAgICAgICAgICB0aGlzLnNldEluZGV4VGltZShzbGlkZXIuc2xpZGVyKCd2YWx1ZScpKTtcclxuICAgICAgICAgICAgICAkKCcuYnJ1c2gnKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICB0aGlzLmRyYXcoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogUGF1c2UgdGhlIGFuaW1hdGlvbiBhbmQgc2hvdyBvbmx5IHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjbmV4dC1mcmFtZS1idXR0b24nKS5jbGljaygoKT0+e1xyXG4gICAgICAgICAgaWYgKCQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgIHRoaXMucGxheUJvb2xlYW4gPSBmYWxzZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgICQoJyNwbGF5LWJ1dHRvbicpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBCcnVzaGluZyBidXR0b25cclxuICAgICAgICovXHJcbiAgICAgICQoJyNicnVzaGluZy1idXR0b24nKS5jbGljaygoKT0+e1xyXG4gICAgICAgICAgLy9zdG9wIHRoZSBhbmltYXRpb25cclxuXHJcbiAgICAgICAgICB0aGlzLnBsYXlCb29sZWFuID0gZmFsc2U7XHJcbiAgICAgICAgICAkKCcjcGxheS1idXR0b24nKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICBpZiAoISQoJyNicnVzaGluZy1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAvL2RlZmluZSB0aGUgYnJ1c2hcclxuICAgICAgICAgICAgICB0aGlzLmJydXNoID0gZDMuYnJ1c2goKVxyXG4gICAgICAgICAgICAgICAgICAuZXh0ZW50KFtcclxuICAgICAgICAgICAgICAgICAgICAgIFswLCAwXSxcclxuICAgICAgICAgICAgICAgICAgICAgIFt0aGlzLnRhbmtXaWR0aCwgdGhpcy50YW5rSGVpZ2h0XVxyXG4gICAgICAgICAgICAgICAgICBdKVxyXG4gICAgICAgICAgICAgICAgICAub24oJ2VuZCcsICgpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAvL2xldCBhcnJheUFuaW1hbHMgPSB0aGlzLmFycmF5QW5pbWFscztcclxuICAgICAgICAgICAgICAgICAgICAgICAgIC8vbGV0IGFjdGl2ZUFuaW1hbHMgPSB0aGlzLmFjdGl2ZUFuaW1hbHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVjdCA9IGQzLmV2ZW50LnNlbGVjdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlQW5pbWFscyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgIC8vaXRlcmF0ZSBvdmVyIHRoZSAxNTEgZmlzaCB0byBjaGVjayB3aGljaCBhcmUgaW4gdGhlIGJydXNoXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcnJheUFuaW1hbHMubWFwKChhbmltYWwpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb2ludCA9IFthbmltYWxbJ3AnXVswXSwgYW5pbWFsWydwJ11bMV1dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NoZWNrIHdoaWNoIGZpc2ggYXJlIGluICB0aGUgYnJ1c2hlZCBhcmVhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgocmVjdFswXVswXSA8PSBwb2ludFswXSkgJiYgKHBvaW50WzBdIDw9IHJlY3RbMV1bMF0pICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocmVjdFswXVsxXSA8PSBwb2ludFsxXSkgJiYgKHBvaW50WzFdIDw9IHJlY3RbMV1bMV0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQb2ludCBpcyBpbiB0aGUgYnJ1c2hcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlQW5pbWFscy5wdXNoKGFuaW1hbFsnYSddKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgIH19KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5hY3RpdmVBbmltYWxzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgIC8vc2V0QWN0aXZlQW5pbWFscyhhY3RpdmVBbmltYWxzKTtcclxuXHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhpcy5zZXRBY3RpdmVBbmltYWxzKHRoaXMuYWN0aXZlQW5pbWFscyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vZ28gYmFjayBvbmUgc2Vjb25kIGFuZCBkcmF3IHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhpcy5kZWNJbmRleFRpbWUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1NQVi5kcmF3KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjYnJ1c2hpbmctYnV0dG9uJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIHRoZSBicnVzaFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmJydXNoJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIC8vYWRkIHRoZSBicnVzaFxyXG4gICAgICAgICAgICAgIGQzLnNlbGVjdCgnI21haW4tdmlzLXN2ZycpXHJcbiAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnYnJ1c2gnKVxyXG4gICAgICAgICAgICAgICAgICAuY2FsbCh0aGlzLmJydXNoKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgLy8gcmVtb3ZlIHRoZSBicnVzaFxyXG4gICAgICAgICAgICAgICQoJy5icnVzaCcpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBVbnNlbGVjdCBhbGwgYnV0dG9uXHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjcmVtb3ZlLWFjdGl2ZS1zZWxlY3RlZC1idXR0b24nKS5jbGljaygoKT0+e1xyXG4gICAgICAgICAgaWYgKCEkKCcjcmVtb3ZlLWFjdGl2ZS1zZWxlY3RlZC1idXR0b24nKS5pcygnOmRpc2FibGVkJykpIHtcclxuICAgICAgICAgICAgICAkKCcjcmVtb3ZlLWFjdGl2ZS1zZWxlY3RlZC1idXR0b24nKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlQW5pbWFscyhbXSk7XHJcbiAgICAgICAgICAgICAgLy8gdHJhY2tpbmcgb2YgZGF0YSBmb3IgdmlzdWFsIHBhcmFtZXRlciBzdWdnZXN0aW9uXHJcbiAgICAgICAgICAgICAgcmVzZXRUcmFja2VkRGF0YSgpO1xyXG4gICAgICAgICAgICAgICQoJyN2aXN1YWwtcGFyYW1ldGVyLWJ1dHRvbicpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cclxuICAgICAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgICAgICAvL3RoaXMgYXBwbHlzIHRoZSBjaGFuZ2VzXHJcblxyXG4gICAgICAgICAgICAgICAgICB0aGlzLmRlY0luZGV4VGltZSgpO1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLmRyYXcoKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFRyYWNrIHZpc3VhbCBwYXJhbWV0ZXIgYnV0dG9uXHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjdmlzdWFsLXBhcmFtZXRlci1idXR0b24nKS5jbGljaygoKT0+e1xyXG4gICAgICAgICAgaWYgKCQoJyN2aXN1YWwtcGFyYW1ldGVyLWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgIHNldFRyYWNraW5nQm9vbGVhbihmYWxzZSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHNldFRyYWNraW5nQm9vbGVhbih0cnVlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogU2VuZCB0aGUgdHJhY2tlZCB2aWEgYSBhamF4IHF1ZXJ5IHRvIHRoZSBzZXJ2ZXIgdG8gY2FsY3VsYXRlIHRoZSBwYXJhbWV0ZXJzXHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjY2FsY3VsYXRlLXBhcmFtZXRlci1idXR0b24nKS5jbGljaygoKT0+e1xyXG4gICAgICAgICAgaWYgKCEkKCcjY2FsY3VsYXRlLXBhcmFtZXRlci1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICBzZXRUcmFja2luZ0Jvb2xlYW4oZmFsc2UpO1xyXG4gICAgICAgICAgICAgIHNlbmRUcmFja2VkRGF0YSgpO1xyXG5cclxuICAgICAgICAgICAgICAvLyBkaXNhYmxlIGJvdGggYnV0dG9ucyBhbmQgcmVtb3ZlIHRoZSBhY3RpdmUgb25lXHJcbiAgICAgICAgICAgICAgJCgnI2NhbGN1bGF0ZS1wYXJhbWV0ZXItYnV0dG9uJykucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICAgICAgICAgICAkKCcjY2FsY3VsYXRlLXBhcmFtZXRlci1idXR0b24nKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgJCgnI3Zpc3VhbC1wYXJhbWV0ZXItYnV0dG9uJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBTcGF0aWFsIHZpZXcgYmFja2dyb3VuZCBjb2xvclxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2JhY2tncm91bmQtY29sb3InKS5jaGFuZ2UoKCk9PntcclxuICAgICAgICAgIGxldCBjb2xvciA9ICQoJ2lucHV0W3R5cGU9XCJyYWRpb1wiXS5ncm91cC1iYWNrZ3JvdW5kOmNoZWNrZWQnKS52YWwoKTtcclxuICAgICAgICAgICQoJyNtYWluLXZpcy1zdmcnKS5jc3MoJ2JhY2tncm91bmQtY29sb3InLCBjb2xvcik7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFNob3cgdGhlIHNwYXRpYWwgdmlldyBheGlzIGJ1dHRvblxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2RyYXctYXhpcycpLm9uKCdjaGFuZ2UnLCAoKT0+IHtcclxuICAgICAgICAgIGlmICh0aGlzLmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAkKCcjbWFpbi12aXMgZy54LmF4aXMnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgJCgnI21haW4tdmlzIGcueS5heGlzJykuc2hvdygpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAkKCcjbWFpbi12aXMgZy54LmF4aXMnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgJCgnI21haW4tdmlzIGcueS5heGlzJykuaGlkZSgpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogU2hvdyB0aGUgZnJhbWUgKHRpbWUpIG51bWJlciBpbiB0aGUgc3BhdGlhbCB2aWV3IGJ1dHRvblxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2RyYXctdGltZScpLm9uKCdjaGFuZ2UnLCAoKT0+e1xyXG4gICAgICAgICAgaWYgKHRoaXMuY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICQoJyNtYWluLXZpcyAuZnJhbWUtdGV4dCcpLnNob3coKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgJCgnI21haW4tdmlzIC5mcmFtZS10ZXh0JykuaGlkZSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBEcmF3IHRoZSBuZXR3b3JrIGJhY2tncm91bmQgY29sb3JcclxuICAgICAgICovXHJcbiAgICAgICQoJyNuZXR3b3JrLWJhY2tncm91bmQnKS5vbignY2hhbmdlJywgKCk9PiB7XHJcbiAgICAgICAgICBpZiAodGhpcy5jaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgc2V0TmV0d29ya0JhY2tncm91bmQodHJ1ZSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHNldE5ldHdvcmtCYWNrZ3JvdW5kKGZhbHNlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogU2V0IHRoZSBuZXR3b3JrIGJhY2tncm91bmQgZWRnZSBsaW1pdFxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI25ldHdvcmstYmFja2dyb3VuZC1saW1pdCcpLnZhbCgxKTtcclxuICAgICAgJCgnI25ldHdvcmstYmFja2dyb3VuZC1saW1pdCcpLm9uKCdjaGFuZ2UnLCAoKT0+e1xyXG4gICAgICAgICAgbGV0IHZhbCA9ICQodGhpcykudmFsKCk7XHJcbiAgICAgICAgICBpZiAoJC5pc051bWVyaWModmFsKSAmJiB2YWwgPiAwKSB7XHJcbiAgICAgICAgICAgICAgc2V0TmV0d29ya0JhY2tncm91bmRMaW1pdCh2YWwpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAkKHRoaXMpLnZhbCgxKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQ29sb3IgU2NhbGUgRnVuY3Rpb24gUmFkaW8gYnV0dG9uc1xyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2NvbG9yLXNjYWxlLXJhZGlvLWZvcm0gaW5wdXQnKS5vbignY2hhbmdlJywgKCk9PntcclxuICAgICAgICAgIHRoaXMuY29sb3JTY2FsZVsndHlwZSddID0gJCgnaW5wdXRbbmFtZT1jb2xvci1zY2FsZS1yYWRpb106Y2hlY2tlZCcsICcjY29sb3Itc2NhbGUtcmFkaW8tZm9ybScpLnZhbCgpO1xyXG4gICAgICAgICAgaWYgKCEkKCcjcGxheS1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuICAgICAgICAgICAgICB0aGlzLmRlY0luZGV4VGltZSgpO1xyXG4gICAgICAgICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICB9XHJcbiAgc2ZfbGlzdGVuZXJzKCkge1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIERyYXcgZGlyZWN0aW9uIGFycm93IG9mIHRoZSBhbmltYWxcclxuICAgICAgICovXHJcbiAgICAgICQoJyNkcmF3LWRpcmVjdGlvbicpLmNsaWNrKCgpPT57XHJcbiAgICAgICAgICBpZiAoJCgnI2RyYXctZGlyZWN0aW9uJykuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICBpZiAoISgnZGlyZWN0aW9uJyBpbiBkYXRhc2V0WzBdKSkge1xyXG4gICAgICAgICAgICAgICAgICBkaXNhYmxlUGxheUJ1dHRvbigpO1xyXG4gICAgICAgICAgICAgICAgICAvLyBhamF4IHF1ZXJ5IHRvIGdldCBkaXJlY3Rpb24gZGF0YVxyXG4gICAgICAgICAgICAgICAgICBnZXREYXRhc2V0RmVhdHVyZSgnZGlyZWN0aW9uJyk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICQoJy5hcnJvdycpLnNob3coKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgJCgnLmFycm93JykuaGlkZSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKCEkKCcjcGxheS1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuICAgICAgICAgICAgICB0aGlzLmRlY0luZGV4VGltZSgpO1xyXG4gICAgICAgICAgICAgIC8vdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIERyYXcgbWVkb2lkIGluIGNvbG9yIGJ1dHRvblxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2RyYXctbWVkb2lkJykuY2xpY2soKCkgPT4ge1xyXG4gICAgICAgICAgaWYgKCQoJyNkcmF3LW1lZG9pZCcpLmlzKCc6Y2hlY2tlZCcpKSB7XHJcblxyXG4gICAgICAgICAgICAgIGlmICghKCdtZWRvaWQnIGluIHN3YXJtRGF0YVswXSkpIHtcclxuICAgICAgICAgICAgICAgICAgZ2V0U3dhcm1EYXRhc2V0RmVhdHVyZSgnbWVkb2lkJyk7XHJcblxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB0aGlzLnNldE1lZG9pZEFuaW1hbChzd2FybURhdGFbdGhpcy5pbmRleFRpbWVdWydtZWRvaWQnXSk7XHJcbiAgICAgICAgICAgICAgLy8gZGlzcGxheSB0aGUgbWVkb2lkXHJcbiAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCcjYW5pbWFsLScgKyB0aGlzLm1lZG9pZEFuaW1hbClcclxuICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ21lZG9pZCcsIHRydWUpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAvLyBkbyBub3QgZGlzcGxheSB0aGUgbWVkb2lkIGZpc2hcclxuICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoJyNhbmltYWwtJyArIHRoaXMubWVkb2lkQW5pbWFsKVxyXG4gICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnbWVkb2lkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgIHRoaXMuc2V0TWVkb2lkQW5pbWFsKC0xKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogRHJhdyBjZW50cm9pZCBidXR0b25cclxuICAgICAgICovXHJcbiAgICAgICQoJyNkcmF3LWNlbnRyb2lkJykuY2xpY2soKCk9PntcclxuICAgICAgICAgIGlmICgkKCcjZHJhdy1jZW50cm9pZCcpLmlzKCc6Y2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICAgaWYgKCEoJ2NlbnRyb2lkJyBpbiBzd2FybURhdGFbMF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgIGdldFN3YXJtRGF0YXNldEZlYXR1cmUoJ2NlbnRyb2lkJyk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIC8vIGRpc3BsYXkgdGhlIGNlbnRyb2lkXHJcbiAgICAgICAgICAgICAgJCgnI2ctY2VudHJvaWQnKS5zaG93KCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIC8vIGhpZGUgdGhlIGNlbnRyb2lkXHJcbiAgICAgICAgICAgICAgJCgnI2ctY2VudHJvaWQnKS5oaWRlKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBEcmF3IGNvbnZleCBodWxsIGluIGNvbG9yIGJ1dHRvblxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2RyYXctY29udmV4LWh1bGwnKS5jbGljaygoKT0+e1xyXG4gICAgICAgICAgaWYgKCQoJyNkcmF3LWNvbnZleC1odWxsJykuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICBpZiAoISgnaHVsbCcgaW4gc3dhcm1EYXRhWzBdKSkge1xyXG4gICAgICAgICAgICAgICAgICBnZXRTd2FybURhdGFzZXRGZWF0dXJlKCdjb252ZXhfaHVsbCcpO1xyXG5cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBEcmF3IHRyaWFuZ3VsYXRpb25cclxuICAgICAgICovXHJcbiAgICAgICQoJyNkcmF3LXRyaWFuZ3VsYXRpb24nKS5jbGljaygoKT0+e1xyXG4gICAgICAgICAgaWYgKCQoJyNkcmF3LXRyaWFuZ3VsYXRpb24nKS5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgIGlmICghKCd0cmlhbmd1bGF0aW9uJyBpbiBzd2FybURhdGFbMF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2VyZScpO1xyXG4gICAgICAgICAgICAgICAgICBnZXRTd2FybURhdGFzZXRGZWF0dXJlKCd0cmlhbmd1bGF0aW9uJyk7XHJcbiAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coc3dhcm1EYXRhW3RoaXMuaW5kZXhUaW1lXVsndHJpYW5ndWxhdGlvbiddKTtcclxuXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGlmICghJCgnI3BsYXktYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgIC8vZ28gYmFjayBvbmUgc2Vjb25kIGFuZCBkcmF3IHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAgICAgICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuICAgICAgICAgICAgICAgICAgdGhpcy5kZWNJbmRleFRpbWUoKTtcclxuICAgICAgICAgICAgICAgICAgLy90aGlzLmRyYXcoKTtcclxuXHJcblxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIERyYXcgdm9yb25vaVxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2RyYXctdm9yb25vaScpLmNsaWNrKCgpPT57XHJcbiAgICAgICAgICBpZiAoJCgnI2RyYXctdm9yb25vaScpLmlzKCc6Y2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICAgaWYgKCEoJ3Zvcm9ub2knIGluIHN3YXJtRGF0YVswXSkpIHtcclxuICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnZXJlJyk7XHJcbiAgICAgICAgICAgICAgICAgIGdldFN3YXJtRGF0YXNldEZlYXR1cmUoJ3Zvcm9ub2knKTtcclxuICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhzd2FybURhdGFbdGhpcy5pbmRleFRpbWVdWyd2b3Jvbm9pJ10pO1xyXG5cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgaWYgKCEkKCcjcGxheS1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAgICAgLy9nbyBiYWNrIG9uZSBzZWNvbmQgYW5kIGRyYXcgdGhlIG5leHQgZnJhbWVcclxuICAgICAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCd0aGVyZScpO1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLmRlY0luZGV4VGltZSgpO1xyXG4gICAgICAgICAgICAgICAgICAvL3RoaXMuZHJhdygpO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuXHJcbiAgfVxyXG4gIGFmX2xpc3RlbmVycygpIHtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBEcmF3IFNwZWVkIGJ1dHRvblxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2RyYXctc3BlZWQnKS5jbGljaygoKT0+e1xyXG4gICAgICAgICAgJCgnLmRyYXctZGV0YWlscycpLmhpZGUoKVxyXG4gICAgICAgICAgICAgIC5maW5kKCdpbnB1dDpjaGVja2JveCcpLnByb3AoJ2NoZWNrZWQnLCB0cnVlKS5jbGljaygpO1xyXG4gICAgICAgICAgaWYgKCQoJyNkcmF3LXNwZWVkJykuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICAvLyBsb2FkIGFic29sdXRlIGZlYXR1cmUgc3BlZWQgZGF0YSBvbmNlXHJcbiAgICAgICAgICAgICAgaWYgKCEoJ3NwZWVkJyBpbiBkYXRhc2V0WzBdKSkge1xyXG4gICAgICAgICAgICAgICAgICBkaXNhYmxlUGxheUJ1dHRvbigpO1xyXG4gICAgICAgICAgICAgICAgICAvLyBhamF4IHF1ZXJ5IHRvIGdldCB0aGUgYWJzb2x1dGUgZmVhdHVyZSBzcGVlZFxyXG4gICAgICAgICAgICAgICAgICBnZXREYXRhc2V0RmVhdHVyZSgnc3BlZWQnKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgLy8gJCgnLmRyYXctZGV0YWlscycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAkKCcjZHJhdy1zcGVlZC1kZXRhaWxzJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICQoJyNkcmF3LWFjY2VsZXJhdGlvbicpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgJCgnI2RyYXctZGlzdGFuY2VfY2VudHJvaWQnKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICQoJyNkcmF3LW1pZGxpbmVfb2Zmc2V0JykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICB0aGlzLnNldEFjdGl2ZVNjYWxlKCdzcGVlZCcpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAkKCcjZHJhdy1zcGVlZC1kZXRhaWxzJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlU2NhbGUoJ2JsYWNrJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvL2NoYW5nZSBjb2xvciBsZWdlbmRcclxuICAgICAgICAgIGQzLnNlbGVjdEFsbCgnLmNvbG9yTGVnZW5kIConKS5yZW1vdmUoKTtcclxuICAgICAgICAgIHRoaXMuY2hhbmdlbGVnZW5kKCk7XHJcblxyXG4gICAgICAgICAgaWYgKCEkKCcjcGxheS1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuICAgICAgICAgICAgICB0aGlzLmRlY0luZGV4VGltZSgpO1xyXG4gICAgICAgICAgICAgIC8vdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIERyYXcgYWNjZWxlcmF0aW9uIGJ1dHRvblxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2RyYXctYWNjZWxlcmF0aW9uJykuY2xpY2soKCk9PntcclxuICAgICAgICAgICQoJy5kcmF3LWRldGFpbHMnKS5oaWRlKClcclxuICAgICAgICAgICAgICAuZmluZCgnaW5wdXQ6Y2hlY2tib3gnKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSkuY2xpY2soKTtcclxuICAgICAgICAgIGlmICgkKCcjZHJhdy1hY2NlbGVyYXRpb24nKS5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgIC8vIGxvYWQgYWJzb2x1dGUgZmVhdHVyZSBhY2NlbGVyYXRpb24gZGF0YSBvbmNlXHJcbiAgICAgICAgICAgICAgaWYgKCEoJ2FjY2VsZXJhdGlvbicgaW4gZGF0YXNldFswXSkpIHtcclxuICAgICAgICAgICAgICAgICAgZGlzYWJsZVBsYXlCdXR0b24oKTtcclxuICAgICAgICAgICAgICAgICAgLy8gYWpheCBxdWVyeSB0byBnZXQgdGhlIGFic29sdXRlIGZlYXR1cmUgYWNjZWxlcmF0aW9uXHJcbiAgICAgICAgICAgICAgICAgIGdldERhdGFzZXRGZWF0dXJlKCdhY2NlbGVyYXRpb24nKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgJCgnI2RyYXctYWNjZWxlcmF0aW9uLWRldGFpbHMnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgJCgnI2RyYXctc3BlZWQnKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICQoJyNkcmF3LWRpc3RhbmNlX2NlbnRyb2lkJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAkKCcjZHJhdy1taWRsaW5lX29mZnNldCcpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVTY2FsZSgnYWNjZWxlcmF0aW9uJyk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICQoJyNkcmF3LWFjY2VsZXJhdGlvbi1kZXRhaWxzJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlU2NhbGUoJ2JsYWNrJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAkKCcuZHJhdy1kZXRhaWxzLmFjdGl2ZScpLmNsaWNrKCk7XHJcbiAgICAgICAgICAvL2NoYW5nZSBjb2xvciBsZWdlbmRcclxuICAgICAgICAgIGQzLnNlbGVjdEFsbCgnLmNvbG9yTGVnZW5kIConKS5yZW1vdmUoKTtcclxuICAgICAgICAgIHRoaXMuY2hhbmdlbGVnZW5kKCk7XHJcblxyXG4gICAgICAgICAgaWYgKCEkKCcjcGxheS1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuICAgICAgICAgICAgICB0aGlzLmRlY0luZGV4VGltZSgpO1xyXG4gICAgICAgICAgICAgIC8vdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIERyYXcgZGlzdGFuY2UgdG8gY2VudHJvaWQgYnV0dG9uXHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjZHJhdy1kaXN0YW5jZV9jZW50cm9pZCcpLmNsaWNrKCgpPT57XHJcbiAgICAgICAgICAkKCcuZHJhdy1kZXRhaWxzJykuaGlkZSgpXHJcbiAgICAgICAgICAgICAgLmZpbmQoJ2lucHV0OmNoZWNrYm94JykucHJvcCgnY2hlY2tlZCcsIHRydWUpLmNsaWNrKCk7XHJcbiAgICAgICAgICBpZiAoJCgnI2RyYXctZGlzdGFuY2VfY2VudHJvaWQnKS5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjaGVja2VkJyk7XHJcbiAgICAgICAgICAgICAgLy8gbG9hZCBhYnNvbHV0ZSBmZWF0dXJlIGRpc3RhbmNlX2NlbnRyb2lkIGRhdGEgb25jZVxyXG4gICAgICAgICAgICAgIGlmICghKCdkaXN0YW5jZV9jZW50cm9pZCcgaW4gZGF0YXNldFswXSkpIHtcclxuICAgICAgICAgICAgICAgICAgZGlzYWJsZVBsYXlCdXR0b24oKTtcclxuICAgICAgICAgICAgICAgICAgLy8gYWpheCBxdWVyeSB0byBnZXQgdGhlIGFic29sdXRlIGZlYXR1cmUgZGlzdGFuY2VfY2VudHJvaWRcclxuICAgICAgICAgICAgICAgICAgZ2V0RGF0YXNldEZlYXR1cmUoJ2Rpc3RhbmNlX2NlbnRyb2lkJyk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGFzZXQpO1xyXG4gICAgICAgICAgICAgICQoJyNkcmF3LWRpc3RhbmNlX2NlbnRyb2lkLWRldGFpbHMnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgJCgnI2RyYXctc3BlZWQnKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICQoJyNkcmF3LWFjY2VsZXJhdGlvbicpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgJCgnI2RyYXctbWlkbGluZV9vZmZzZXQnKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlU2NhbGUoJ2Rpc3RhbmNlX2NlbnRyb2lkJyk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnYmxhY2snKTtcclxuICAgICAgICAgICAgICAkKCcjZHJhdy1kaXN0YW5jZV9jZW50cm9pZC1kZXRhaWxzJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlU2NhbGUoJ2JsYWNrJyk7XHJcblxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgJCgnLmRyYXctZGV0YWlscy5hY3RpdmUnKS5jbGljaygpO1xyXG5cclxuICAgICAgICAgIC8vY2hhbmdlIGNvbG9yIGxlZ2VuZFxyXG4gICAgICAgICAgZDMuc2VsZWN0QWxsKCcuY29sb3JMZWdlbmQgKicpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgdGhpcy5jaGFuZ2VsZWdlbmQoKTtcclxuXHJcbiAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgIC8vZ28gYmFjayBvbmUgc2Vjb25kIGFuZCBkcmF3IHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgIHRoaXMuZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgICAgICAgLy90aGlzLmRyYXcoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogRHJhdyBtaWRsaW5lIG9mZnNldFxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2RyYXctbWlkbGluZV9vZmZzZXQnKS5jbGljaygoKT0+e1xyXG4gICAgICAgICAgJCgnLmRyYXctZGV0YWlscycpLmhpZGUoKVxyXG4gICAgICAgICAgICAgIC5maW5kKCdpbnB1dDpjaGVja2JveCcpLnByb3AoJ2NoZWNrZWQnLCB0cnVlKS5jbGljaygpO1xyXG4gICAgICAgICAgaWYgKCQoJyNkcmF3LW1pZGxpbmVfb2Zmc2V0JykuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICAvLyBsb2FkIGFic29sdXRlIGZlYXR1cmUgZHJhdy1taWRsaW5lX29mZnNldCBkYXRhIG9uY2VcclxuICAgICAgICAgICAgICBpZiAoISgnZHJhdy1taWRsaW5lX29mZnNldCcgaW4gZGF0YXNldFswXSkpIHtcclxuICAgICAgICAgICAgICAgICAgZGlzYWJsZVBsYXlCdXR0b24oKTtcclxuICAgICAgICAgICAgICAgICAgLy8gYWpheCBxdWVyeSB0byBnZXQgdGhlIGFic29sdXRlIGZlYXR1cmUgbWlkbGluZV9vZmZzZXRcclxuICAgICAgICAgICAgICAgICAgZ2V0RGF0YXNldEZlYXR1cmUoJ21pZGxpbmVfb2Zmc2V0Jyk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICQoJyNkcmF3LW1pZGxpbmVfb2Zmc2V0LWRldGFpbHMnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgJCgnI2RyYXctc3BlZWQnKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICQoJyNkcmF3LWFjY2VsZXJhdGlvbicpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgJCgnI2RyYXctZGlzdGFuY2VfY2VudHJvaWQnKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgIHNldEFjdGl2ZVNjYWxlKCdtaWRsaW5lX29mZnNldCcpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBzZXRBY3RpdmVTY2FsZSgnYmxhY2snKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgICQoJy5kcmF3LWRldGFpbHMuYWN0aXZlJykuY2xpY2soKTtcclxuICAgICAgICAgIC8vY2hhbmdlIGNvbG9yIGxlZ2VuZFxyXG4gICAgICAgICAgZDMuc2VsZWN0QWxsKCcuY29sb3JMZWdlbmQgKicpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgdGhpcy5jaGFuZ2VsZWdlbmQoKTtcclxuXHJcbiAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgIC8vZ28gYmFjayBvbmUgc2Vjb25kIGFuZCBkcmF3IHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgIHRoaXMuZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICB9XHJcbiAgbWRfbGlzdGVuZXJzKCkge1xyXG4gICAgICAvKipcclxuICAgICAgICogTWV0YWRhdGEgc3dhdGNoIGZ1bmN0aW9ucyBjb2xvcmluZyBpbmRpdmlkdWFsIGFuaW1hbHNcclxuICAgICAgICovXHJcbiAgICAgICQoJy5tZXRhZGF0YS1zd2F0Y2gubWV0YWRhdGEtc3dhdGNoLWNsaWNrYWJsZScpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgbGV0IGlkID0gJCh0aGlzKS5hdHRyKCd2YWx1ZScpO1xyXG4gICAgICAgICAgbGV0IGNvbG9yUkdCID0gJCh0aGlzKS5jc3MoJ2JhY2tncm91bmQtY29sb3InKTtcclxuICAgICAgICAgIC8vIHNldCB0aGUgY29sb3Igb2YgdGhlIHN3YXRjaCBwcmV2aWV3XHJcbiAgICAgICAgICAkKCcjbWV0YWRhdGEtcm93LScgKyBpZCArICcgI3ByZXZpZXcnKVxyXG4gICAgICAgICAgICAgIC5jc3MoJ2JhY2tncm91bmQtY29sb3InLCBjb2xvclJHQik7XHJcbiAgICAgICAgICAvLyBpZiB3aGl0ZSB0aGFuIHJlc2V0IHRoZSBjb2xvclxyXG4gICAgICAgICAgaWYgKGNvbG9yUkdCID09PSAncmdiKDI1NSwgMjU1LCAyNTUpJykge1xyXG4gICAgICAgICAgICAgIGlmIChtZXRhZGF0YUNvbG9yW2lkXSkge1xyXG4gICAgICAgICAgICAgICAgICBkZWxldGUgbWV0YWRhdGFDb2xvcltpZF07XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBtZXRhZGF0YUNvbG9yW2lkXSA9IGNvbG9yUkdCO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBNZXRhZGF0YSBncm91cCBtZXRhZGF0YSBmdW5jdGlvbnMgZm9yIGluc3RhbmNlIGNvbG9yIHNleFxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2dyb3VwLW1ldGFkYXRhIDppbnB1dCcpLmNoYW5nZShmdW5jdGlvbigpIHtcclxuICAgICAgICAgIC8vIHJlc2V0IHRoZSBtZXRhZGF0IGFjb2xvcmluZ1xyXG4gICAgICAgICAgcmVzZXRJbmRpdmlkdWFsTWV0YWRhdGEoKTtcclxuXHJcbiAgICAgICAgICBsZXQgdmFsdWUgPSAkKHRoaXMpLmF0dHIoJ3ZhbHVlJyk7XHJcbiAgICAgICAgICBsZXQgdG1wID0gW107XHJcblxyXG4gICAgICAgICAgLy8gbWV0YWRhdGEgc2V4IGlzIGNob29zZW4gLSBjb2xvcmluZyBiYXNlZCBvbiBtIGFuZCBmXHJcbiAgICAgICAgICBpZiAodmFsdWUgPT09ICdzZXgnKSB7XHJcbiAgICAgICAgICAgICAgJCgnI21ldGFkYXRhLWRpdicpLm1vZGFsKCd0b2dnbGUnKTtcclxuICAgICAgICAgICAgICAvLyBjbG9zZSBhbmQgY29sb3IgaGVyZVxyXG4gICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YXNldE1ldGFkYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgIHRtcC5wdXNoKGRhdGFzZXRNZXRhZGF0YVtpXVt2YWx1ZV0udG9Mb3dlckNhc2UoKSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIC8vIGNyZWF0ZSBhIHNldCBvZiBpbmRpdmlkdWFsIHN0cmluZ3MgaW4gc2V4XHJcbiAgICAgICAgICAgICAgdG1wID0gQXJyYXkuZnJvbShuZXcgU2V0KHRtcCkpO1xyXG4gICAgICAgICAgICAgIGxldCBjb2xvcnMgPSBbJyM3ZmM5N2YnLCAnIzM4NmNiMCddO1xyXG5cclxuICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGFzZXRNZXRhZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRtcC5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFzZXRNZXRhZGF0YVtpXVt2YWx1ZV0udG9Mb3dlckNhc2UoKSA9PT0gdG1wW2pdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIHRoZSBjb2xvcmluZyB0byB0aGUgbWV0YWRhdGFjb2xvciBvYmplY3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YUNvbG9yW2RhdGFzZXRNZXRhZGF0YVtpXVsnYW5pbWFsX2lkJ11dID0gY29sb3JzW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICQoJyNtZXRhZGF0YS1pbnB1dCcpLmhpZGUoKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgJCgnI21ldGFkYXRhLWlucHV0Jykuc2hvdygpO1xyXG4gICAgICAgICAgICAgIC8vIHNldCB2YWx1ZXMgb2YgaW5wdXRzXHJcbiAgICAgICAgICAgICAgLy8gaGVyZSBhcmUgYXV0b21hdGljYWxseSBpbnB1dCB2YWx1ZXMgY2FsY3VsYXRlZFxyXG4gICAgICAgICAgICAgIC8vIC4yNSBhbmQgLjc1IHBlcmNlbnRpbGVzIGFyZSB1c2VkXHJcbiAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhc2V0TWV0YWRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgdG1wLnB1c2goZGF0YXNldE1ldGFkYXRhW2ldW3ZhbHVlXSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGxldCBibEF2ZyA9IGQzLnF1YW50aWxlKHRtcCwgMC4yNSk7IC8vIGJlbG93IGF2ZXJhZ2UgdmFsdWVcclxuICAgICAgICAgICAgICBsZXQgYWJBdmcgPSBkMy5xdWFudGlsZSh0bXAsIDAuNzUpOyAvLyBhYm92ZSBhdmVyYWdlXHJcbiAgICAgICAgICAgICAgJCgnI2JsLWF2ZycpLnZhbChibEF2Zyk7XHJcbiAgICAgICAgICAgICAgJCgnI2FiLWF2ZycpLnZhbChhYkF2Zyk7XHJcbiAgICAgICAgICAgICAgLy8gY29sb3IgdGhlIGFuaW1hbHNcclxuICAgICAgICAgICAgICBjb2xvck1ldGFkYXRhKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIE1ldGFkYXRhIGdyb3VwIG1ldGFkYXRhIGlucHV0IHNwaW5uZXJcclxuICAgICAgICogKy8tIDAuMSB0byB0aGUgaW5wdXQgdmFsdWVcclxuICAgICAgICovXHJcbiAgICAgICQoJy5udW1iZXItc3Bpbm5lciBidXR0b24nKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGxldCBidG4gPSAkKHRoaXMpLFxyXG4gICAgICAgICAgICAgIG9sZFZhbHVlID0gYnRuLmNsb3Nlc3QoJy5udW1iZXItc3Bpbm5lcicpLmZpbmQoJ2lucHV0JykudmFsKCkudHJpbSgpLFxyXG4gICAgICAgICAgICAgIG5ld1ZhbCA9IDA7XHJcblxyXG4gICAgICAgICAgaWYgKGJ0bi5hdHRyKCdkYXRhLWRpcicpID09ICd1cCcpIHtcclxuICAgICAgICAgICAgICBuZXdWYWwgPSBwYXJzZUZsb2F0KG9sZFZhbHVlKSArIDAuMTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgaWYgKG9sZFZhbHVlID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICBuZXdWYWwgPSBwYXJzZUZsb2F0KG9sZFZhbHVlKSAtIDAuMTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICBuZXdWYWwgPSAwO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIG5ld1ZhbCA9IE1hdGgucm91bmQobmV3VmFsICogMTAwKSAvIDEwMDsgLVxyXG4gICAgICAgICAgYnRuLmNsb3Nlc3QoJy5udW1iZXItc3Bpbm5lcicpLmZpbmQoJ2lucHV0JykudmFsKG5ld1ZhbCk7XHJcbiAgICAgICAgICAvLyBjaGFuZ2UgdGhlIGNvbG9yaW5nXHJcbiAgICAgICAgICBjb2xvck1ldGFkYXRhKCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIE1ldGFkYXRhIGlucHV0IGZpZWxkcyBjaGFuZ2VcclxuICAgICAgICovXHJcbiAgICAgICQoJy5udW1iZXItc3Bpbm5lciBpbnB1dCcpLm9uKCdpbnB1dCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgY29sb3JNZXRhZGF0YSgpO1xyXG4gICAgICB9KTtcclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogUmVzZXQgYWxsIG1ldGFkYXRhIGlucHV0IHBhcmFtZXRlcnNcclxuICAgICAgICovXHJcbiAgICAgICQoJyNtZXRhZGF0YS1yZXNldCcpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgJCgnI21ldGFkYXRhLWlucHV0JykuaGlkZSgpO1xyXG4gICAgICAgICAgcmVzZXRJbmRpdmlkdWFsTWV0YWRhdGEoKTtcclxuICAgICAgfSk7XHJcblxyXG4gIH1cclxuICBpbml0U2hvd0RlbmRyb2dyYW1MaXN0ZW5lcihpZCkge1xyXG5cclxuICAgICAgJCgnI3Nob3ctZGVuZHJvZ3JhbS0nICsgaWQpLmNsaWNrKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICBsZXQgY2xpY2tlZEJ1dHRvbklEID0gJCh0aGlzKS5hdHRyKCdpZCcpO1xyXG4gICAgICAgICAgLy8gaXRlcmF0ZSBvdmVyIGFsbCBidXR0b25zIGFuZCBjdXN0b20gaGlnaGxpZ2h0IGp1c3Qgb25lIG9yIG5vbmVcclxuICAgICAgICAgICQoJy5zaG93LWRlbmRyb2dyYW0nKS5lYWNoKGZ1bmN0aW9uKGksIGJ1dHRvbil7XHJcbiAgICAgICAgICAgICAgLy8gYWN0aXZlIGZvdW5kIGJ1dHRvblxyXG4gICAgICAgICAgICAgIGlmICgkKGJ1dHRvbikuYXR0cignaWQnKSA9PT0gY2xpY2tlZEJ1dHRvbklEICYmICQoYnV0dG9uKS5oYXNDbGFzcygnYnRuLXByaW1hcnknKSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgJChidXR0b24pLmFkZENsYXNzKCdidG4tcHJpbWFyeScpO1xyXG4gICAgICAgICAgICAgICAgICAkKGJ1dHRvbikuZmluZCgnI2J0bi1sZWZ0JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAkKGJ1dHRvbikuZmluZCgnI2J0bi1yaWdodCcpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgLy8gVE9ETyBhZGQgaGVyZSBhIHJlc2l6ZSBvZiB0aGUgbWFpbiB2aXNcclxuICAgICAgICAgICAgICAgICAgLy8gJCgnI2RlbmRyb2dyYW0tcGFuZWwnKS5pbnNlcnRBZnRlcigkKHRoaXMpKTtcclxuICAgICAgICAgICAgICB9IC8vIHJlbW92ZSBoaWdobGlnaHRcclxuICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgJChidXR0b24pLnJlbW92ZUNsYXNzKCdidG4tcHJpbWFyeScpO1xyXG4gICAgICAgICAgICAgICAgICAkKGJ1dHRvbikuZmluZCgnI2J0bi1sZWZ0Jykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAkKGJ1dHRvbikuZmluZCgnI2J0bi1yaWdodCcpLmhpZGUoKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAvLyBzaG93IGRlbmRyb2dyYW1cclxuICAgICAgICAgIGlmICgkKCcuc2hvdy1kZW5kcm9ncmFtLmJ0bi1wcmltYXJ5JykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgJCgnI2RlbmRyb2dyYW0tcGFuZWwnKS5zaG93KCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICQoJyNkZW5kcm9ncmFtLXBhbmVsJykuaGlkZSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKCEkKCcjcGxheS1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuICAgICAgICAgICAgICB0aGlzLmRlY0luZGV4VGltZSgpO1xyXG4gICAgICAgICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICAgICAgICAgIHRoaXMuZHJhd0RlbmRyb2dyYW0oKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgfVxyXG4gIGhfbGlzdGVuZXJzKCkge1xyXG5cclxuICAgICAgJCgnLmhpZWFyY2h5LWNoZWNrYm94Jykub24oJ2NoYW5nZScsICgpPT4ge1xyXG4gICAgICAgICAgbGV0IGNoZWNrYm94ID0gJCgnLmhpZWFyY2h5LWNoZWNrYm94Jyk7XHJcblxyXG4gICAgICAgICAgbGV0IGlkID0gY2hlY2tib3guYXR0cignZGF0YScpO1xyXG4gICAgICAgICAgbGV0IG5hbWUgPSBjaGVja2JveC5hdHRyKCduYW1lJyk7XHJcbiAgICAgICAgICBsZXQgY2hlY2tlZCA9IGNoZWNrYm94LnByb3AoJ2NoZWNrZWQnKTtcclxuXHJcbiAgICAgICAgICBpZiAoY2hlY2tlZCAmJiAkKCcuc2hvdy1kZW5kcm9ncmFtJykubGVuZ3RoIDwgbWF4TnVtYmVySGllcmFyY2hpZXMpIHtcclxuICAgICAgICAgICAgICBkaXNhYmxlUGxheUJ1dHRvbigpO1xyXG4gICAgICAgICAgICAgIGdldE5ldHdvcmtIaWVyYXJjaHlEYXRhKGlkKTtcclxuXHJcbiAgICAgICAgICAgICAgYWRkSGllcmFyY2h5QnV0dG9uKGlkLCBuYW1lKTtcclxuICAgICAgICAgICAgICB0aGlzLmluaXRTaG93RGVuZHJvZ3JhbUxpc3RlbmVyKGlkKTtcclxuICAgICAgICAgICAgICAkKCcjZGVuZHJvZ3JhbS1idXR0b25zLWRpdicpLnNob3coKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC8vIGVsc2UgaWYgKCQoJy5zaG93LWRlbmRyb2dyYW0nKS5sZW5ndGggPT09IG1heE51bWJlckhpZXJhcmNoaWVzKSB7XHJcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZygnTWF4IG51bWJlciBvZiBoaWVyYXJjaGllcyBpczogJyArIG1heE51bWJlckhpZXJhcmNoaWVzKTtcclxuICAgICAgICAgIC8vVE9ETyBpbXBsZW1lbnQgdGhpcyBoZXJlXHJcbiAgICAgICAgICAvLyBub3RpY2UgdXNlciB0aGF0IGl0IGlzIG5vdCBwb3NzaWJsZSB0byBzaG93IG1vcmUgdGhhbiBuIGhpZXJhcmNoaWVzXHJcbiAgICAgICAgICAvLyAgICAgICAgICA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxyXG4gICAgICAgICAgLy8gICA8c3Ryb25nPkluZm8hPC9zdHJvbmc+IEF0dGVudGlvbiB1c2VyIC5cclxuICAgICAgICAgIC8vIDwvZGl2PlxyXG4gICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgLy8gdG1wIHZhcmlhYmxlIHRvIHNhdmUgaWYgdGhlIGJ1dHRvbiB3aGljaCBpcyBnb2luZyB0byBiZSByZW1vdmVkXHJcbiAgICAgICAgICAgICAgLy8gd2FzIGFjdGl2ZVxyXG4gICAgICAgICAgICAgIGxldCB0bXBBY3RpdmUgPSAkKCcjc2hvdy1kZW5kcm9ncmFtLScgKyBpZCkuaGFzQ2xhc3MoJ2J0bi1wcmltYXJ5Jyk7XHJcbiAgICAgICAgICAgICAgc2V0SGllcmFyY2h5RGF0YSh7fSwgaWQpO1xyXG5cclxuICAgICAgICAgICAgICByZW1vdmVIaWVyYXJjaHlCdXR0b24oaWQpO1xyXG4gICAgICAgICAgICAgIC8vIFRPRE8gZmluZCBiZXR0ZXIgd2F5IGhlcmVcclxuICAgICAgICAgICAgICBkMy5zZWxlY3QoJ2cuaCcgKyBpZCkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgLy8gcmVtb3ZlIHRoZSBkZW5kcm9ncmFtIGFuZCB0aGUgcGFuZWwgaWYgdGhlIHJlbW92ZWQgZWxlbWVudCB3YXMgY2hlY2tlZFxyXG4gICAgICAgICAgICAgIGlmICh0bXBBY3RpdmUgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgJCgnI2RlbmRyb2dyYW0tcGFuZWwnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGlmICgkKCcuc2hvdy1kZW5kcm9ncmFtJykubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICQoJyNkZW5kcm9ncmFtLWJ1dHRvbnMtZGl2JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyByZXNpemUgdGhlIG1haW4gc3ZnXHJcbiAgICAgICAgICBpZiAoJCgnLnNob3ctZGVuZHJvZ3JhbScpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICQoJyNtYWluLXZpcy1kaXYnKS5yZW1vdmVDbGFzcygnY29sLW1kLTEyJyk7XHJcbiAgICAgICAgICAgICAgJCgnI21haW4tdmlzLWRpdicpLmFkZENsYXNzKCdjb2wtbWQtOCcpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAkKCcjbWFpbi12aXMtZGl2JykucmVtb3ZlQ2xhc3MoJ2NvbC1tZC04Jyk7XHJcbiAgICAgICAgICAgICAgJCgnI21haW4tdmlzLWRpdicpLmFkZENsYXNzKCdjb2wtbWQtMTInKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogVmlzdWFsaXplIHRoZSBuZXR3b3JrIG9ubHkgaW4gdGhlIGNob29zZW4gaGllcmFyY2h5XHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcubmV0d29yay1oaWVyYXJjaHktY2hlY2tib3gnKS5vbignY2hhbmdlJywgKCk9PntcclxuICAgICAgICAgIC8vIGdldCB0aGUgaW5mbyBmb3IgdGhlIGNsaWNrZWQgYnV0dG9uXHJcbiAgICAgICAgICBsZXQgY2hlY2tib3ggPSAkKHRoaXMpO1xyXG5cclxuICAgICAgICAgIC8vIHJlc2V0IGFsbCB0aGUgb3RoZXIgYWN0aXZlIGNoZWNrYm94ZXNcclxuICAgICAgICAgICQoJy5uZXR3b3JrLWhpZXJhcmNoeS1jaGVja2JveCcpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICBjaGVja2JveC5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XHJcblxyXG4gICAgICAgICAgaWYgKGNoZWNrYm94LnByb3AoJ2NoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgIC8vIHNldCB0aGUgbmV0d29yayBpZFxyXG4gICAgICAgICAgICAgIHNldE5ldHdvcmtIaWVyYXJjaHkoY2hlY2tib3guYXR0cignZGF0YScpKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgc2V0TmV0d29ya0hpZXJhcmNoeSh1bmRlZmluZWQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbn1cclxuICBuX2xpc3RlbmVycygpIHtcclxuICAgIC8qKlxyXG4gICAgICogTmV0d29yayBidXR0b25zIGNsaWNrZWQgLSBnZXQgdGhlIGRhdGFcclxuICAgICAqL1xyXG4gICAgJCgnI25ldHdvcmtzLW1vZGFsLWJvZHkgYnV0dG9uJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgbGV0IG5ldHdvcmtfaWQgPSAkKHRoaXMpLmF0dHIoJ2RhdGEnKTtcclxuXHJcbiAgICAgICAgLy8gYWRkIHRoZSBuYW1lIG9mIHRoZSBjaG9vc2VuIG5ldHdvcmsgdG8gdGhlIE5ldHdvcmsgbW9kYWxcclxuICAgICAgICAkKCcjYWN0aXZlLW5ldHdvcmstbmFtZScpLnRleHQoJCh0aGlzKS5hdHRyKCduYW1lJykpO1xyXG5cclxuICAgICAgICBkaXNhYmxlUGxheUJ1dHRvbigpO1xyXG4gICAgICAgIGdldE5ldHdvcmtEYXRhKG5ldHdvcmtfaWQpO1xyXG4gICAgICAgIC8vIHNldCB0aGUgY29sb3Igb2YgdGhlIG5ldHdvcmtcclxuICAgICAgICBzZXRuZXR3b3JrQ29sb3IobmV0d29ya19pZCk7XHJcbiAgICAgICAgJCgnI25ldHdvcmstZGl2JykubW9kYWwoJ3RvZ2dsZScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBOZXR3b3JrIGJ1dHRvbnMgY2xpY2tlZCAtIGdldCB0aGUgZGF0YVxyXG4gICAgICovXHJcbiAgICAkKCcjbmV0d29yay1yZW1vdmUnKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICAgICBzZXROZXR3b3JrRGF0YSh7fSk7XHJcbiAgICAgICAgc2V0TmV0d29ya0lEKC0xKTtcclxuICAgICAgICAvLyByZW1vdmUgdGhlIG5ldHdvcmsgY29sb3JcclxuICAgICAgICBzZXRuZXR3b3JrQ29sb3IoLTEpO1xyXG4gICAgICAgICQoJyNhY3RpdmUtbmV0d29yay1uYW1lJykudGV4dCgnJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIE5ldHdvcmsgYXV0byBidXR0b24gc2V0IGFjaXZlIG9yIHJlbW92ZVxyXG4gICAgICovXHJcbiAgICAkKCcjbmV0d29yay1hdXRvLXN1Z2dlc3QnKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoISQoJyNuZXR3b3JrLWF1dG8tc3VnZ2VzdCcpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAkKCcjbmV0d29yay1saW1pdC1wJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKCcjbmV0d29yay1zbGlkZXInKS5oaWRlKCk7XHJcblxyXG4gICAgICAgICAgICBzZXROZXR3b3JrQXV0byh0cnVlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkKCcjbmV0d29yay1saW1pdC1wJykuc2hvdygpO1xyXG4gICAgICAgICAgICAkKCcjbmV0d29yay1zbGlkZXInKS5zaG93KCk7XHJcbiAgICAgICAgICAgIHNldE5ldHdvcmtBdXRvKGZhbHNlKTtcclxuICAgICAgICAgICAgbGV0IGxpbWl0ID0gJCgnI25ldHdvcmstc2xpZGVyJykuc2xpZGVyKCd2YWx1ZScpO1xyXG4gICAgICAgICAgICBzZXROZXR3b3JMaW1pdChsaW1pdCk7XHJcbiAgICAgICAgICAgICQoJyNuZXR3b3JrLWxpbWl0JykudmFsKGxpbWl0KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbn1cclxuXHJcblxyXG4gIHNwYXRpYWxWaWV3SW5pdCgpe1xyXG5cclxuXHJcblxyXG4gICAgICBsZXQgbWluUG9pbnQgPSBwYXJhbWV0ZXJzWydtaW4nXVsnZ2VvbWV0cnknXVsnY29vcmRpbmF0ZXMnXTtcclxuICAgICAgbGV0IG1heFBvaW50ID0gcGFyYW1ldGVyc1snbWF4J11bJ2dlb21ldHJ5J11bJ2Nvb3JkaW5hdGVzJ107XHJcbiAgICAgIC8vIGxldCBjb29yZGluYXRlT3JpZ2luID0gcGFyYW1ldGVyc1snY29vcmRpbmF0ZV9vcmlnaW4nXVsnZ2VvbWV0cnknXVsnY29vcmRpbmF0ZXMnXTtcclxuICAgICAgLy8gd2lkdGggPSB3aWR0aCAqMS4wMiAtLT4gc28gdGhlcmUgaXMgYSBtYXJnaW4gaW4gdGhlIHNwYXRpYWwgdmlldyB3aGVyZSBubyBhbmltYWwgaXMgZXZlclxyXG4gICAgICB0aGlzLnRhbmtXaWR0aCA9IChtYXhQb2ludFswXSAtIG1pblBvaW50WzBdKSAqIDEuMDI7XHJcbiAgICAgIHRoaXMudGFua0hlaWdodCA9IChtYXhQb2ludFsxXSAtIG1pblBvaW50WzFdKSAqIDEuMDI7XHJcbiAgICAgIC8vWCBhbmQgWSBheGlzXHJcbiAgICAgIGxldCB4ID0gZDMuc2NhbGVMaW5lYXIoKVxyXG4gICAgICAgICAgLmRvbWFpbihbbWluUG9pbnRbMF0sIG1heFBvaW50WzBdXSlcclxuICAgICAgICAgIC5yYW5nZShbbWluUG9pbnRbMF0sIG1heFBvaW50WzBdXSk7XHJcblxyXG4gICAgICBsZXQgeEF4aXMgPSBkMy5heGlzQm90dG9tKHgpXHJcbiAgICAgICAgICAudGlja3MoMTApXHJcbiAgICAgICAgICAudGlja1NpemUoMTApXHJcbiAgICAgICAgICAudGlja1BhZGRpbmcoNSk7XHJcblxyXG4gICAgICBsZXQgeSA9IGQzLnNjYWxlTGluZWFyKClcclxuICAgICAgICAgIC5kb21haW4oW21pblBvaW50WzFdLCBtYXhQb2ludFsxXV0pXHJcbiAgICAgICAgICAucmFuZ2UoW21pblBvaW50WzFdLCBtYXhQb2ludFsxXV0pO1xyXG5cclxuICAgICAgbGV0IHlBeGlzID0gZDMuYXhpc1JpZ2h0KHkpXHJcbiAgICAgICAgICAudGlja3MoNylcclxuICAgICAgICAgIC50aWNrU2l6ZSgxMClcclxuICAgICAgICAgIC50aWNrUGFkZGluZyg1KTtcclxuXHJcbiAgICAgIC8vIFpPT01JTkcgQU5EIFBBTk5JTkcgU1RVRkZcclxuXHJcbiAgICAgIGxldCB6b29tID0gZDMuem9vbSgpXHJcbiAgICAgICAgICAuc2NhbGVFeHRlbnQoWzEsIDZdKVxyXG4gICAgICAgICAgLm9uKCd6b29tJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgIC8vY29uc3RyYWluZWQgem9vbWluZ1xyXG4gICAgICAgICAgICAgIC8vIG1vZGlmeSB0aGUgdHJhbnNsYXRlIHNvIHRoYXQgaXQgbmV2ZXIgZXhpdHMgdGhlIHRhbmtcclxuICAgICAgICAgICAgICBkMy5ldmVudC50cmFuc2Zvcm0ueCA9IE1hdGgubWluKDAsIHRoaXMudGFua1dpZHRoICogKGQzLmV2ZW50LnRyYW5zZm9ybS5rIC0gMSksXHJcbiAgICAgICAgICAgICAgICAgIE1hdGgubWF4KHRoaXMudGFua1dpZHRoICogKDEgLSBkMy5ldmVudC50cmFuc2Zvcm0uayksIGQzLmV2ZW50LnRyYW5zZm9ybS54KSk7XHJcblxyXG4gICAgICAgICAgICAgIGQzLmV2ZW50LnRyYW5zZm9ybS55ID0gTWF0aC5taW4oMCwgdGhpcy50YW5rSGVpZ2h0ICogKGQzLmV2ZW50LnRyYW5zZm9ybS5rIC0gMSksXHJcbiAgICAgICAgICAgICAgICAgIE1hdGgubWF4KHRoaXMudGFua0hlaWdodCAqICgxIC0gZDMuZXZlbnQudHJhbnNmb3JtLmspLCBkMy5ldmVudC50cmFuc2Zvcm0ueSkpO1xyXG5cclxuICAgICAgICAgICAgICAvLyB0cmFuc2xhdGUgYW5kIHNjYWxlXHJcbiAgICAgICAgICAgICAgdGhpcy56b29tR3JvdXAuYXR0cigndHJhbnNmb3JtJywgZDMuZXZlbnQudHJhbnNmb3JtKTtcclxuXHJcbiAgICAgICAgICAgICAgLy8gcmVzY2FsZSB0aGUgYXhpc1xyXG4gICAgICAgICAgICAgIGdYYXhpcy5jYWxsKHhBeGlzLnNjYWxlKGQzLmV2ZW50LnRyYW5zZm9ybS5yZXNjYWxlWCh4KSkpO1xyXG4gICAgICAgICAgICAgIGdZYXhpcy5jYWxsKHlBeGlzLnNjYWxlKGQzLmV2ZW50LnRyYW5zZm9ybS5yZXNjYWxlWSh5KSkpO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAvL3RoZSBzdmcgY29udGFpbmVyXHJcbiAgICAgIHRoaXMuc3ZnQ29udGFpbmVyID0gZDMuc2VsZWN0KCcjbWFpbi12aXMnKVxyXG4gICAgICAgICAgICAuY2xhc3NlZCgnc3ZnLWNvbnRhaW5lcicsIHRydWUpXHJcbiAgICAgICAgICAgIC8vIHRvIG1ha2UgaXQgcmVzcG9uc2l2ZSB3aXRoIGNzc1xyXG4gICAgICAgICAgICAuYXBwZW5kKCdzdmcnKVxyXG4gICAgICAgICAgICAuYXR0cigncHJlc2VydmVBc3BlY3RSYXRpbycsICd4TWluWU1pbiBtZWV0JylcclxuICAgICAgICAgICAgLmF0dHIoJ3ZpZXdCb3gnLCAnMCAwICcgKyB0aGlzLnRhbmtXaWR0aCArICcgJyArIHRoaXMudGFua0hlaWdodClcclxuICAgICAgICAgICAgLy8gYWRkIHRoZSBjbGFzcyBzdmctY29udGVudFxyXG4gICAgICAgICAgICAuY2xhc3NlZCgnc3ZnLWNvbnRlbnQnLCB0cnVlKVxyXG4gICAgICAgICAgICAuYXR0cignaWQnLCAnbWFpbi12aXMtc3ZnJylcclxuICAgICAgICAgICAgLmNhbGwoem9vbSk7XHJcblxyXG4gICAgICAvKiBkZXBlbmRzIG9uIHN2ZyByYXRpbywgZm9yIGUuZyAxMjQwLzE5MDAgPSAwLjY1IHNvIHBhZGRpbmctYm90dG9tID0gNjUlICovXHJcbiAgICAgIGxldCBwZXJjZW50YWdlID0gTWF0aC5jZWlsKCh0aGlzLnRhbmtIZWlnaHQgLyB0aGlzLnRhbmtXaWR0aCkgKiAxMDApO1xyXG4gICAgICAkKCcjbWFpbi12aXMnKS5hcHBlbmQoJCgnPHN0eWxlPiNtYWluLXZpczo6YWZ0ZXIge3BhZGRpbmctdG9wOiAnICsgcGVyY2VudGFnZSArICclO2Rpc3BsYXk6IGJsb2NrO2NvbnRlbnQ6IFwiXCI7fTwvc3R5bGU+ICcpKTtcclxuXHJcbiAgICAgIHRoaXMuem9vbUdyb3VwID0gdGhpcy5zdmdDb250YWluZXIuYXBwZW5kKCdzdmc6ZycpO1xyXG5cclxuICAgICAgLy8gVmlzdWFsaXplIHRoZSBiYWNrZ3JvdW5kIGltYWdlIGlmIGl0IGlzIHVwbG9hZGVkXHJcbiAgICAgIGlmIChwYXJhbWV0ZXJzLmJhY2tncm91bmRfaW1hZ2UpIHtcclxuICAgICAgICAgIHRoaXMuem9vbUdyb3VwXHJcbiAgICAgICAgICAgICAgLmFwcGVuZCgnaW1hZ2UnKVxyXG4gICAgICAgICAgICAgIC5hdHRyKCd4bGluazpocmVmJywgJy8nICsgcGFyYW1ldGVycy5iYWNrZ3JvdW5kX2ltYWdlKVxyXG4gICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdiYWNrZ3JvdW5kLWltYWdlJylcclxuICAgICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgdGhpcy50YW5rSGVpZ2h0KVxyXG4gICAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIHRoaXMudGFua1dpZHRoKVxyXG4gICAgICAgICAgICAgIC5hdHRyKCd4JywgJzAnKVxyXG4gICAgICAgICAgICAgIC5hdHRyKCd5JywgJzAnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy9hcHBlbmQgdGhlIHRhbmsgZ3JvdXAgd2l0aCBhIHRyYW5zZm9ybWF0aW9uIHdoaWNoIHJvdGF0ZXMgdGhlIHkgYXhpc1xyXG4gICAgICB0aGlzLnRhbmsgPSB0aGlzLnpvb21Hcm91cC5hcHBlbmQoJ3N2ZzpnJylcclxuICAgICAgICAgIC5hdHRyKCdjbGFzcycsICd0YW5rJylcclxuICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAoKT0+e1xyXG4gICAgICAgICAgICAgIGxldCB4ID0gcGFyYW1ldGVycy5pbnZlcnRlZF94ID8gLTEgOiAxO1xyXG4gICAgICAgICAgICAgIGxldCB5ID0gcGFyYW1ldGVycy5pbnZlcnRlZF95ID8gLTEgOiAxO1xyXG4gICAgICAgICAgICAgIHJldHVybiAnc2NhbGUoJyArIHggKyAnLCcgKyB5ICsgJyknO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAvL2FkZCB0aGUgY2VudHJvaWRcclxuICAgICAgdGhpcy50YW5rLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAuYXR0cignaWQnLCAnZy1jZW50cm9pZCcpXHJcbiAgICAgICAgICAuYXBwZW5kKCdjaXJjbGUnKVxyXG4gICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2NlbnRyb2lkJylcclxuICAgICAgICAgIC5hdHRyKCdyJywgNilcclxuICAgICAgICAgIC5hdHRyKCdjeCcsIDApXHJcbiAgICAgICAgICAuYXR0cignY3knLCAwKTtcclxuXHJcbiAgICAgIC8vIGFycm93IGZvciB0aGUgY2VudHJvaWQgZGlyZWN0aW9uXHJcbiAgICAgIHRoaXMudGFuay5zZWxlY3QoJyNnLWNlbnRyb2lkJylcclxuICAgICAgICAgIC5hcHBlbmQoJ3N2ZzpkZWZzJylcclxuICAgICAgICAgIC5hcHBlbmQoJ3N2ZzptYXJrZXInKVxyXG4gICAgICAgICAgLmF0dHIoJ2lkJywgJ2NlbnRyb2lkLWFycm93JylcclxuICAgICAgICAgIC5hdHRyKCdyZWZYJywgMilcclxuICAgICAgICAgIC5hdHRyKCdyZWZZJywgNilcclxuICAgICAgICAgIC5hdHRyKCdtYXJrZXJXaWR0aCcsIDEzKVxyXG4gICAgICAgICAgLmF0dHIoJ21hcmtlckhlaWdodCcsIDEzKVxyXG4gICAgICAgICAgLmF0dHIoJ29yaWVudCcsICdhdXRvJylcclxuICAgICAgICAgIC5hcHBlbmQoJ3N2ZzpwYXRoJylcclxuICAgICAgICAgIC5hdHRyKCdkJywgJ00yLDIgTDIsMTEgTDEwLDYgTDIsMicpO1xyXG5cclxuICAgICAgLy8gQXBwZW5kIHRoZSBsaW5lIGZvciB0aGUgZGlyZWN0aW9uIGFycm93XHJcbiAgICAgIHRoaXMudGFuay5zZWxlY3QoJyNnLWNlbnRyb2lkJylcclxuICAgICAgICAgIC5hcHBlbmQoJ2xpbmUnKVxyXG4gICAgICAgICAgLmF0dHIoJ2lkJywgJ2NlbnRyb2lkLWxpbmUnKVxyXG4gICAgICAgICAgLmF0dHIoJ21hcmtlci1lbmQnLCAndXJsKCNjZW50cm9pZC1hcnJvdyknKTtcclxuXHJcbiAgICAgIC8vYXBwZW5kIG5ldHdvcmsgIGdyb3VwXHJcbiAgICAgIHRoaXMudGFuay5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgLmF0dHIoJ2lkJywgJ25ldHdvcmstZ3JvdXAnKTtcclxuXHJcbiAgICAgIC8vYXBwZW5kIGRlbGF1bmF5LXRyaWFuZ3VsYXRpb24gZ3JvdXBcclxuICAgICAgdGhpcy50YW5rLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAuYXR0cignaWQnLCAnZGVsYXVuYXktdHJpYW5ndWxhdGlvbi1ncm91cCcpO1xyXG5cclxuICAgICAgLy9hcHBlbmQgdm9yb25vaSBncm91cFxyXG4gICAgICB0aGlzLnRhbmsuYXBwZW5kKCdnJylcclxuICAgICAgICAgIC5hdHRyKCdpZCcsICd2b3Jub2ktZ3JvdXAnKTtcclxuXHJcbiAgICAgIC8vYXBwZW5kIHRoZSBmcmFtZSB0aW1lIHRleHRcclxuICAgICAgdGhpcy5zdmdDb250YWluZXIuYXBwZW5kKCd0ZXh0JylcclxuICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdmcmFtZS10ZXh0JylcclxuICAgICAgICAgIC5hdHRyKCd4JywgMzApXHJcbiAgICAgICAgICAuYXR0cigneScsIDMwKVxyXG4gICAgICAgICAgLnRleHQoJy0tIDogLS0gOiAtLSAnKTtcclxuXHJcbiAgICAgIC8vIGFkZCB0aGUgYXhpc1xyXG4gICAgICBsZXQgZ1hheGlzID0gdGhpcy5zdmdDb250YWluZXIuYXBwZW5kKCdnJylcclxuICAgICAgICAgIC5hdHRyKCdjbGFzcycsICd4IGF4aXMnKVxyXG4gICAgICAgICAgLmNhbGwoeEF4aXMpO1xyXG5cclxuICAgICAgbGV0IGdZYXhpcyA9IHRoaXMuc3ZnQ29udGFpbmVyLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAuYXR0cignY2xhc3MnLCAneSBheGlzJylcclxuICAgICAgICAgIC5jYWxsKHlBeGlzKTtcclxuXHJcbiAgICAgIC8vIGluaXQgc3R1ZmYgZnJvbSBvdGhlciBtb2R1bGVzXHJcbiAgICAgIGluaXRUb29sdGlwKCk7XHJcbiAgICAgIGluaXRTbGlkZXJzKCk7XHJcblxyXG4gICAgICB0aGlzLmluaXRDb2xvclBpY2tlcigpO1xyXG4gICAgICB2YXIgbGluZWNoYXJ0ID0gbmV3IExpbmVDaGFydChzd2FybURhdGEpO1xyXG4gICAgICB0aGlzLmNwX2xpc3RlbmVyKCk7XHJcbiAgICAgIHRoaXMuc2ZfbGlzdGVuZXJzKCk7XHJcbiAgICAgIHRoaXMuYWZfbGlzdGVuZXJzKCk7XHJcbiAgICAgIHRoaXMubWRfbGlzdGVuZXJzKCk7XHJcbiAgICAgIHRoaXMubl9saXN0ZW5lcnMoKTtcclxuICAgICAgdGhpcy5oX2xpc3RlbmVycygpO1xyXG4gICAgICB2YXIgZGVuZHJvZ3JhbSA9IG5ldyBEZW5kcm9ncmFtKCk7XHJcbiAgICAgIG1ha2VSZXNpemFibGUodGhpcy50YW5rSGVpZ2h0LCB0aGlzLnRhbmtXaWR0aCk7XHJcbiAgICAgIGRlZmF1bHRDb25maWcoKTtcclxuICAgICAgLy8gc3RhcnQgdGhlIGFuaW1hdGlvblxyXG4gICAgICB0aGlzLmRyYXcoKTtcclxuICB9O1xyXG4gIHNldE1lZG9pZEFuaW1hbCh2YWx1ZSkge1xyXG4gICAgICB0aGlzLm1lZG9pZEFuaW1hbCA9IHZhbHVlO1xyXG4gIH1cclxuXHJcbn1cclxuXHJcblxyXG5cclxuXHJcbmNsYXNzIENoYXJ0IGV4dGVuZHMgRHJhd2VyIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhKSB7XHJcbiAgICBzdXBlcigpXHJcbiAgICAgIC8vIGxvYWQgaW4gYXJndW1lbnRzIGZyb20gY29uZmlnIG9iamVjdFxyXG4gICAgdGhpcy5zd2FybURhdGEgPSBkYXRhO1xyXG4gICAgdGhpcy5zd2FybV9mZWF0dXJlcyA9IE9iamVjdC5rZXlzKHRoaXMuc3dhcm1EYXRhWzBdKTtcclxuICAgIHRoaXMubGluZUNoYXJ0V2lkdGggPSA1MDAwO1xyXG4gICAgdGhpcy50cmVuZENoYXJ0c0VsZW0gPSBbJ2xvd2VyLW91dGVyLWFyZWEnLCAnbG93ZXItaW5uZXItYXJlYScsICdtZWRpYW4tbGluZScsICd1cHBlci1pbm5lci1hcmVhJywgJ3VwcGVyLW91dGVyLWFyZWEnXTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICogaW5pdCB0aGUgbGluZSBjaGFydCBhbmQgYWxzbyB0aGUgdHJlbmQgY2hhcnRcclxuICAgICAqL1xyXG5cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBMaW5lQ2hhcnQgZXh0ZW5kcyBDaGFydCB7XHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhKXtcclxuICAgIHN1cGVyKGRhdGEpXHJcbiAgICB0aGlzLmxpbmVDaGFydCgpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBsaW5lQ2hhcnQoKSB7XHJcblxyXG4gICAgICByYXRpbyA9IE1hdGguY2VpbCh0aGlzLnN3YXJtRGF0YS5sZW5ndGggLyB0aGlzLmxpbmVDaGFydFdpZHRoKTtcclxuXHJcbiAgICAgIC8vIFN3YXJtIGZlYXR1cmVzIGxpbmUgY2hhcnRcclxuICAgICAgbGV0IGxpbmVDaGFydEhlaWdodCA9IDUwMDsgLy8gdGhlIGxpbmUgY2hhcnQgaGVpZ2h0XHJcbiAgICAgIGxldCBtYXJnaW4gPSB7XHJcbiAgICAgICAgICB0b3A6IDEwLFxyXG4gICAgICAgICAgcmlnaHQ6IDAsXHJcbiAgICAgICAgICBib3R0b206IDEwMCxcclxuICAgICAgICAgIGxlZnQ6IDEwXHJcbiAgICAgIH07XHJcbiAgICAgIGxldCBtYXJnaW5Ub0xlZ2VuZCA9IDUwO1xyXG5cclxuICAgICAgbGV0IHN3YXJtX2ZlYXR1cmVzID0gdGhpcy5zd2FybV9mZWF0dXJlcztcclxuICAgICAgLy8gcmVtb3ZlIHRoZSB0aW1lIGtleVxyXG4gICAgICBsZXQgaW5kZXggPSBzd2FybV9mZWF0dXJlcy5pbmRleE9mKCd0aW1lJyk7XHJcbiAgICAgIHN3YXJtX2ZlYXR1cmVzLnNwbGljZShpbmRleCwgMSk7XHJcblxyXG4gICAgICBsZXQgbGluZUNoYXJ0RGF0YSA9IFtdO1xyXG4gICAgICAvLyBhZ2dyZWdhdGUgYW5kIGF2ZXJhZ2UgdGhlIHN3YXJtIGRhdGEgdG8gdGhpcy5saW5lQ2hhcnRXaWR0aCBwb2ludHMgaW4gdGhlIGxpbmUgY2hhcnRcclxuICAgICAgaWYgKHRoaXMuc3dhcm1EYXRhLmxlbmd0aCA+IHRoaXMubGluZUNoYXJ0V2lkdGgpIHtcclxuICAgICAgICAgIC8vIHRtcCBhcnJheSBmb3IgdGhlIGFnZ3JlZ2F0ZWQgYW5kIGF2ZXJhZ2VkIGZlYXR1cmVzXHJcbiAgICAgICAgICBsZXQgdG1wID0gbmV3IEFycmF5KHN3YXJtX2ZlYXR1cmVzLmxlbmd0aCkuZmlsbCgwKTtcclxuXHJcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc3dhcm1EYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgLy8gYWdncmVnYXRlIHRoZSBmZWF0dXJlcyBpbiB0aGUgdGVtcCBhcnJheVxyXG4gICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgc3dhcm1fZmVhdHVyZXMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgdG1wW2pdICs9IHRoaXMuc3dhcm1EYXRhW2ldW3N3YXJtX2ZlYXR1cmVzW2pdXTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgLy8gaWYgdGhlIHJhdGlvIGlzIHplcm8gdGhlbiBhdmVyYWdlIGl0IGFuZCBzZXQgaXQgdG8gemVyb1xyXG4gICAgICAgICAgICAgIGlmIChpICUgcmF0aW8gPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgbGV0IHRtcF9vYmplY3QgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAndGltZSc6IGkgLyByYXRpb1xyXG4gICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzd2FybV9mZWF0dXJlcy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgdG1wW2pdID0gdG1wW2pdIC8gcmF0aW87XHJcbiAgICAgICAgICAgICAgICAgICAgICB0bXBfb2JqZWN0W3N3YXJtX2ZlYXR1cmVzW2pdXSA9IHRtcFtqXTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgbGluZUNoYXJ0RGF0YS5wdXNoKHRtcF9vYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgICB0bXAgPSBuZXcgQXJyYXkoc3dhcm1fZmVhdHVyZXMubGVuZ3RoKS5maWxsKDApO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGxpbmVDaGFydERhdGEgPSB0aGlzLnN3YXJtRGF0YTtcclxuICAgICAgfVxyXG4gICAgICAvL2NvbnNvbGUubG9nKGxpbmVDaGFydERhdGEpO1xyXG4gICAgICB6b29tRnVuY3Rpb24gPSBkMy5zY2FsZUxpbmVhcigpXHJcbiAgICAgICAgICAuZG9tYWluKFswLCBsaW5lQ2hhcnREYXRhLmxlbmd0aF0pXHJcbiAgICAgICAgICAucmFuZ2UoWzAsIHRoaXMubGluZUNoYXJ0V2lkdGhdKTtcclxuXHJcblxyXG4gICAgICAvLyB4IGF4aXMgc2NhbGUgLSBtaW51cyBtYXJnaW5MaW5lQ2hhcnQgIG5lZWRlZFxyXG4gICAgICB4ID0gZDMuc2NhbGVMaW5lYXIoKVxyXG4gICAgICAgICAgLmRvbWFpbihbMCwgbGluZUNoYXJ0RGF0YS5sZW5ndGhdKVxyXG4gICAgICAgICAgLnJhbmdlKFswLCB0aGlzLmxpbmVDaGFydFdpZHRoXSk7XHJcbiAgICAgIGxldCB4MiA9IGQzLnNjYWxlTGluZWFyKClcclxuICAgICAgICAgIC5kb21haW4oWzAsIGxpbmVDaGFydERhdGEubGVuZ3RoXSlcclxuICAgICAgICAgIC5yYW5nZShbMCwgdGhpcy5saW5lQ2hhcnRXaWR0aF0pO1xyXG4gICAgICAvLyBkZWZpbmUgd2hlcmUgdGhlIGF4aXMgaXMgZXRjXHJcbiAgICAgIGxldCB4QXhpcyA9IGQzLmF4aXNCb3R0b20oeClcclxuICAgICAgICAgIC50aWNrcygxMClcclxuICAgICAgICAgIC50aWNrU2l6ZSgxMClcclxuICAgICAgICAgIC50aWNrUGFkZGluZyg1KVxyXG4gICAgICAgICAgLnRpY2tGb3JtYXQoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKChkICogcmF0aW8pIC8gMTUwMCkgJSA2MCArICc6JyArIE1hdGguZmxvb3IoKGQgKiByYXRpbykgLyBwYXJhbWV0ZXJzWydmcHMnXSkgJSA2MCArICc6OicgKyAoZCAqIHJhdGlvKSAlIHBhcmFtZXRlcnNbJ2ZwcyddO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAvLyB5IGF4aXMgc2NhbGUgd2hpY2ggaXMgbm9ybWFsaXplZFxyXG4gICAgICB5ID0gZDMuc2NhbGVMaW5lYXIoKVxyXG4gICAgICAgICAgLmRvbWFpbihbMCwgMTAwXSlcclxuICAgICAgICAgIC5yYW5nZShbbGluZUNoYXJ0SGVpZ2h0LCAwXSk7XHJcbiAgICAgIC8vIGRlZmluZSB3aGVyZSB0aGUgYXhpcyBpcyBldGNcclxuICAgICAgbGV0IHlBeGlzID0gZDMuYXhpc0xlZnQoeSlcclxuICAgICAgICAgIC50aWNrcygwKVxyXG4gICAgICAgICAgLnRpY2tTaXplKDEwKVxyXG4gICAgICAgICAgLnRpY2tQYWRkaW5nKDUpO1xyXG5cclxuICAgICAgbGV0IGRyYWdnZWQgPSAoKT0+e1xyXG4gICAgICAgICAgLy8gZHJhZ2dlZCBmdW5jdGlvbiBnZXQgdGhlIGNvb3JkaW5hdGVzIGFuZCBjYWxjdWxhdGUgdGhlIHRpbWUgbW9tZW50IGZyb20gdGhpc1xyXG4gICAgICAgICAgbGV0IGNvb3JkcyA9IGQzLm1vdXNlKHRoaXMpO1xyXG4gICAgICAgICAgaWYgKGNvb3Jkc1swXSA8IG1hcmdpbi5sZWZ0IHx8IGNvb3Jkc1swXSA+IHRoaXMubGluZUNoYXJ0V2lkdGggfHwgY29vcmRzWzFdIDwgMCB8fCBjb29yZHNbMV0gPiBsaW5lQ2hhcnRIZWlnaHQpIHtcclxuICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyB0bXAgc2NhbGUgdG8gaW5jbHVkZSB0aGUgem9vbSBmYWN0b3JcclxuICAgICAgICAgIGxldCB0bXBTY2FsZSA9IGQzLnNjYWxlTGluZWFyKClcclxuICAgICAgICAgICAgICAuZG9tYWluKHpvb21GdW5jdGlvbi5yYW5nZSgpKVxyXG4gICAgICAgICAgICAgIC5yYW5nZSh6b29tRnVuY3Rpb24uZG9tYWluKCkpO1xyXG4gICAgICAgICAgLy8gc2V0IHRoZSBuZXcgdGltZVxyXG4gICAgICAgICAgdGhpcy5zZXRJbmRleFRpbWUoTWF0aC5mbG9vcigodG1wU2NhbGUoY29vcmRzWzBdIC0gbWFyZ2luLmxlZnQpKSAqIHJhdGlvKSk7XHJcbiAgICAgIH07XHJcbiAgICAgIGxldCB6b29tID0gZDMuem9vbSgpXHJcbiAgICAgICAgICAuc2NhbGVFeHRlbnQoWzEsIDIwXSlcclxuICAgICAgICAgIC50cmFuc2xhdGVFeHRlbnQoW1xyXG4gICAgICAgICAgICAgIFswLCAwXSxcclxuICAgICAgICAgICAgICBbdGhpcy5saW5lQ2hhcnRXaWR0aCwgbGluZUNoYXJ0SGVpZ2h0XVxyXG4gICAgICAgICAgXSlcclxuICAgICAgICAgIC5leHRlbnQoW1xyXG4gICAgICAgICAgICAgIFswLCAwXSxcclxuICAgICAgICAgICAgICBbdGhpcy5saW5lQ2hhcnRXaWR0aCwgbGluZUNoYXJ0SGVpZ2h0XVxyXG4gICAgICAgICAgXSlcclxuICAgICAgICAgIC5vbignem9vbScsICgpPT57XHJcbiAgICAgICAgICAgICAgLy8gZ2V0IHRoZSB0cmFuc2Zvcm0gZmFjdG9yXHJcbiAgICAgICAgICAgICAgbGV0IHQgPSBkMy5ldmVudC50cmFuc2Zvcm07XHJcbiAgICAgICAgICAgICAgLy8gY2hhbmdlIHNjYWxpbmcgZnVuY3Rpb25cclxuICAgICAgICAgICAgICB6b29tRnVuY3Rpb24gPSB4LmRvbWFpbih0LnJlc2NhbGVYKHgyKS5kb21haW4oKSk7XHJcbiAgICAgICAgICAgICAgLy8gem9vbSBlYWNoIGF2YWlhYmxlIGxpbmVcclxuICAgICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gbGluZXMpIHtcclxuICAgICAgICAgICAgICAgICAgaWYgKGxpbmVzLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHpvb21Hcm91cC5zZWxlY3QoKCcjJyArIGtleSArICdMaW5lJykpLmF0dHIoJ2QnLCBsaW5lc1trZXldKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAvLyB6b29tIHRoZSB0cmVuZCBjaGFydHNcclxuICAgICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gdHJlbmRDaGFydHNab29tKSB7XHJcbiAgICAgICAgICAgICAgICAgIGlmICh0cmVuZENoYXJ0c1pvb20uaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnRyZW5kQ2hhcnRzRWxlbS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHpvb21Hcm91cFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2VsZWN0KCgnIycgKyBrZXkgKyAnVHJlbmRDaGFydCAuJyArIHRoaXMudHJlbmRDaGFydHNFbGVtW2ldKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2QnLCB0cmVuZENoYXJ0c1pvb21ba2V5XVt0aGlzLnRyZW5kQ2hhcnRzRWxlbVtpXV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIC8vIHJlc2NhbGUgdGhlIGF4aXNcclxuICAgICAgICAgICAgICBnWGF4aXMuY2FsbCh4QXhpcyk7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgIC8vIG1ha2UgdGhlIHN2ZyByZXNpemFibGVcclxuICAgICAgbGV0IHN3YXJtTGluZUNoYXJ0ID0gZDMuc2VsZWN0KCcjc3dhcm0tdmlzJylcclxuICAgICAgICAgIC5jbGFzc2VkKCdzdmctbGluZS1jaGFydC1jb250YWluZXInLCB0cnVlKVxyXG4gICAgICAgICAgLy8gdG8gbWFrZSBpdCByZXNwb25zaXZlIHdpdGggY3NzXHJcbiAgICAgICAgICAuYXBwZW5kKCdzdmcnKVxyXG4gICAgICAgICAgLmF0dHIoJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLCAneE1pbllNaW4gbWVldCcpXHJcblxyXG4gICAgICAgICAgLmF0dHIoJ3ZpZXdCb3gnLCAnMCAwICcgKyB0aGlzLmxpbmVDaGFydFdpZHRoICsgJyAnICsgKGxpbmVDaGFydEhlaWdodCArIG1hcmdpbi5ib3R0b20pKVxyXG4gICAgICAgICAgLy8gYWRkIHRoZSBjbGFzcyBzdmctY29udGVudFxyXG4gICAgICAgICAgLmNsYXNzZWQoJ3N2Zy1jb250ZW50JywgdHJ1ZSk7XHJcblxyXG4gICAgICB6b29tR3JvdXAgPSBzd2FybUxpbmVDaGFydFxyXG4gICAgICAgICAgLmFwcGVuZCgnc3ZnOmcnKVxyXG4gICAgICAgICAgLmF0dHIoJ2lkJywgJ2xpbmVDaGFydFpvb20nKVxyXG4gICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIG1hcmdpbi5sZWZ0ICsgJywwKScpO1xyXG5cclxuICAgICAgLy8gYXBwZW5kIGEgZ3JvdXAgZm9yIHRoZSB4IGF4aXNcclxuICAgICAgLy8gYWRkIHRoZSBheGlzXHJcbiAgICAgIGxldCBnWGF4aXMgPSB6b29tR3JvdXAuYXBwZW5kKCdnJylcclxuICAgICAgICAgIC5hdHRyKCdjbGFzcycsICd4IGF4aXMtbGluZS1jaGFydCcpXHJcbiAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgwLCcgKyBsaW5lQ2hhcnRIZWlnaHQgKyAnKScpXHJcbiAgICAgICAgICAuY2FsbCh4QXhpcyk7XHJcblxyXG4gICAgICAvLyBhcHBlbmQgYSBncm91cCBmb3IgdGhlIHkgYXhpc1xyXG4gICAgICB6b29tR3JvdXAuYXBwZW5kKCdnJylcclxuICAgICAgICAgIC5hdHRyKCdjbGFzcycsICd5IGF4aXMtbGluZS1jaGFydCcpXHJcbiAgICAgICAgICAuY2FsbCh5QXhpcyk7XHJcblxyXG5cclxuICAgICAgLy8gdGhlIHRpbWUgbGluZSBhcHBlbmQgdGhlIGxpbmVcclxuICAgICAgem9vbUdyb3VwLmFwcGVuZCgnbGluZScpXHJcbiAgICAgICAgICAuYXR0cignY2xhc3MnLCAndGltZS1saW5lJylcclxuICAgICAgICAgIC5hdHRyKCdpZCcsICdsaW5lQ2hhcnRUaW1lTGluZScpXHJcbiAgICAgICAgICAuYXR0cigneDEnLCAwKVxyXG4gICAgICAgICAgLmF0dHIoJ3kxJywgMClcclxuICAgICAgICAgIC5hdHRyKCd4MicsIDApXHJcbiAgICAgICAgICAuYXR0cigneTInLCBsaW5lQ2hhcnRIZWlnaHQpO1xyXG5cclxuICAgICAgICAgIC8vIGNvbG9ycyBmb3IgdGhlIGxpbmVzXHJcbiAgICAgICAgICBsZXQgbGluZV9jb2xvcnMgPSBkMy5zY2FsZU9yZGluYWwoZDMuc2NoZW1lQ2F0ZWdvcnkxMCk7XHJcbiAgICAgICAgICBsZXQgbGluZXMgPSB7fTtcclxuICAgICAgICAgIC8vIGFkZCB0aGUgbGluZXMgdG8gdGhlIGxpbmUgY2hhcnRcclxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3dhcm1fZmVhdHVyZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICBsZXQgbWluID0gZDMubWluKGxpbmVDaGFydERhdGEsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGRbc3dhcm1fZmVhdHVyZXNbaV1dO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIGxldCBtYXggPSBkMy5tYXgobGluZUNoYXJ0RGF0YSwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gZFtzd2FybV9mZWF0dXJlc1tpXV07XHJcbiAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgIGxldCBub3JtYWxpemF0aW9uU2NhbGUgPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbbWluLCBtYXhdKS5yYW5nZShbMCwgMTAwXSk7XHJcbiAgICAgICAgICAgICAgbGV0IGxpbmUgPSBkMy5saW5lKClcclxuICAgICAgICAgICAgICAgICAgLngoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHgoZFsndGltZSddKTtcclxuICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgLnkoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHkobm9ybWFsaXphdGlvblNjYWxlKGRbc3dhcm1fZmVhdHVyZXNbaV1dKSk7XHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIGxpbmVzW3N3YXJtX2ZlYXR1cmVzW2ldXSA9IGxpbmU7XHJcbiAgICAgICAgICAgICAgLy9hcHBlbmQgdGhlIGxpbmUgdG8gdGhlIGxpbmUgY2hhcnRcclxuICAgICAgICAgICAgICB6b29tR3JvdXAuYXBwZW5kKCdwYXRoJylcclxuICAgICAgICAgICAgICAgICAgLmRhdGEoW2xpbmVDaGFydERhdGFdKVxyXG4gICAgICAgICAgICAgICAgICAuYXR0cignaWQnLCAoc3dhcm1fZmVhdHVyZXNbaV0gKyAnTGluZScpKVxyXG4gICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGluZSBsaW5lQ2hhcnRMaW5lJylcclxuICAgICAgICAgICAgICAgICAgLnN0eWxlKCdzdHJva2UnLCBsaW5lX2NvbG9ycyhpKSlcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ2QnLCBsaW5lKVxyXG4gICAgICAgICAgICAgICAgICAuYXR0cignbmFtZScsIHN3YXJtX2ZlYXR1cmVzW2ldKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAkKCcjbGluZUNoYXJ0VGltZUxpbmUnKS5hcHBlbmRUbygnI2xpbmVDaGFydFpvb20nKTtcclxuICAgICAgICAgIC8vIGFwcGVuZCB0aGUgem9vbSByZWN0YW5nbGVcclxuICAgICAgICAgIHpvb21Hcm91cC5hcHBlbmQoJ3JlY3QnKVxyXG4gICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICd6b29tJylcclxuICAgICAgICAgICAgICAuYXR0cignd2lkdGgnLCB0aGlzLmxpbmVDaGFydFdpZHRoKVxyXG4gICAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCBsaW5lQ2hhcnRIZWlnaHQpXHJcbiAgICAgICAgICAgICAgLmNhbGwoem9vbSlcclxuICAgICAgICAgICAgICAub24oJ2NsaWNrJywgZHJhZ2dlZClcclxuICAgICAgICAgICAgICAuY2FsbChkMy5kcmFnKClcclxuICAgICAgICAgICAgICAgICAgLm9uKCdkcmFnJywgZHJhZ2dlZClcclxuICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgLy8gYXBwZW5kIHRoZSBsZWdlbmQgZm9yIHRoZSBsaW5lIGNoYXJ0XHJcbiAgICAgIC8vIHZhcnMgZm9yIHRoZSBsZWdlbmRcclxuICAgICAgbGV0IGxlZ2VuZFdpZHRoID0gMTAwO1xyXG4gICAgICBsZXQgbGVnZW5kSGVpZ2h0ID0gNTA7XHJcblxyXG4gICAgICAvL3NlbGVjdCBhbGwgdGhlIGxpbmVzXHJcbiAgICAgIGxldCBjaGFydExpbmVzID0gZDMuc2VsZWN0QWxsKCcubGluZScpO1xyXG5cclxuICAgICAgLy9hcHBlbmQgYSBncm91cCBmb3IgdGhlIGxlZ2VuZFxyXG4gICAgICBzd2FybUxpbmVDaGFydFxyXG4gICAgICAgICAgLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAuYXR0cignaWQnLCAnbGluZUNoYXJ0TGVnZW5kJylcclxuICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyBtYXJnaW4uYm90dG9tICsgJywnICsgKGxpbmVDaGFydEhlaWdodCArIG1hcmdpblRvTGVnZW5kKSArICcpJylcclxuICAgICAgICAgIC5zZWxlY3RBbGwoJ3JlY3QubGVnZW5kJylcclxuICAgICAgICAgIC5kYXRhKGNoYXJ0TGluZXMuX2dyb3Vwc1swXSlcclxuICAgICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgICAvL2FwcGVuZCB0aGUgd2hvbGUgbGVnZW5kIGluIGEgZWFjaCBmdW5jdGlvblxyXG4gICAgICAgICAgLmVhY2goZnVuY3Rpb24oZCwgaSkge1xyXG4gICAgICAgICAgICAgIGxldCBzcGFjaW5nID0gNjAwO1xyXG4gICAgICAgICAgICAgIGxldCB0ZXh0U3BhY2UgPSA0MDtcclxuICAgICAgICAgICAgICAvLyBhcHBlbmQgdGhlIHJlY3RhbmdsZXMgZm9yIHRoZSBsZWdlbmRcclxuICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuYXBwZW5kKCdyZWN0JylcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xlZ2VuZCcpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIGxlZ2VuZFdpZHRoKVxyXG4gICAgICAgICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgbGVnZW5kSGVpZ2h0KVxyXG4gICAgICAgICAgICAgICAgICAuYXR0cigneCcsIChzcGFjaW5nICogaSkgKyAncHgnKVxyXG4gICAgICAgICAgICAgICAgICAuc3R5bGUoJ2ZpbGwnLCBkLnN0eWxlLnN0cm9rZSk7XHJcblxyXG4gICAgICAgICAgICAgIC8vIGFwcGVuZCB0aGUgdGV4dCBmb3IgdGhlIGxlZ2VuZFxyXG4gICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5hcHBlbmQoJ3RleHQnKVxyXG4gICAgICAgICAgICAgICAgICAuYXR0cignaWQnLCBkLmF0dHJpYnV0ZXMuaWQudmFsdWUgKyAnTGVnZW5kVGl0bGUnKVxyXG4gICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGluZS1jaGFydC1sZWdlbmQtdGV4dCcpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCd5JywgdGV4dFNwYWNlKVxyXG4gICAgICAgICAgICAgICAgICAuYXR0cigneCcsIChzcGFjaW5nICogaSArIGxlZ2VuZFdpZHRoICsgMTApICsgJ3B4JylcclxuICAgICAgICAgICAgICAgICAgLnRleHQoZC5hdHRyaWJ1dGVzLm5hbWUudmFsdWUgKyAnOiAnKTtcclxuXHJcbiAgICAgICAgICAgICAgLy9hcHBlbmQgdGhlIHRleHQgZm9yIHRoZSB2YWx1ZSBvZiB0aGUgbGluZVxyXG4gICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5hcHBlbmQoJ3RleHQnKVxyXG4gICAgICAgICAgICAgICAgICAuYXR0cignaWQnLCBkLmF0dHJpYnV0ZXMuaWQudmFsdWUgKyAnVmFsdWUnKVxyXG4gICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGluZS1jaGFydC1sZWdlbmQtdGV4dCcpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCd5JywgdGV4dFNwYWNlKVxyXG4gICAgICAgICAgICAgICAgICAuYXR0cigneCcsIChzcGFjaW5nICogaSArIGxlZ2VuZFdpZHRoICtcclxuICAgICAgICAgICAgICAgICAgICAgIC8vdGhlIG5leHQgZXhwcmVzc2lvbiBnZXRzIHRoZSB0ZXh0IGxlbmd0aFxyXG4gICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KCcjJyArIGQuYXR0cmlidXRlcy5pZC52YWx1ZSArICdMZWdlbmRUaXRsZScpLm5vZGUoKS5nZXRDb21wdXRlZFRleHRMZW5ndGgoKSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAxMCkgKyAncHgnKVxyXG4gICAgICAgICAgICAgICAgICAudGV4dCgnMC4wJyk7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgIC8vYXBwZW5kIGEgbGVnZW5kIGdyb3VwIGZvciB0aGUgdHJlbmQgY2hhcnRzXHJcbiAgICAgIHN3YXJtTGluZUNoYXJ0XHJcbiAgICAgICAgICAuYXBwZW5kKCdnJylcclxuICAgICAgICAgIC5hdHRyKCdpZCcsICd0cmVuZENoYXJ0TGVnZW5kJylcclxuICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyBtYXJnaW4uYm90dG9tICsgJywnICsgKGxpbmVDaGFydEhlaWdodCArIG1hcmdpblRvTGVnZW5kKSArICcpJylcclxuICAgICAgICAgIC5zZWxlY3RBbGwoJ3JlY3QubGVnZW5kJylcclxuICAgICAgICAgIC5kYXRhKFsnNSUgLSA5NSUnLCAnMjUlIC0gNzUlJywgJ01lZGlhbiddKVxyXG4gICAgICAgICAgLmVudGVyKClcclxuICAgICAgICAgIC8vYXBwZW5kIHRoZSB3aG9sZSBsZWdlbmQgaW4gYSBlYWNoIGZ1bmN0aW9uXHJcbiAgICAgICAgICAuZWFjaChmdW5jdGlvbihkLCBpKSB7XHJcbiAgICAgICAgICAgICAgbGV0IHNwYWNpbmcgPSA4MDA7XHJcbiAgICAgICAgICAgICAgbGV0IHRleHRTcGFjZSA9IDQwO1xyXG4gICAgICAgICAgICAgIC8vIGFwcGVuZCB0aGUgcmVjdGFuZ2xlcyBmb3IgdGhlIGxlZ2VuZFxyXG4gICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5hcHBlbmQoJ3JlY3QnKVxyXG4gICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGVnZW5kJylcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgbGVnZW5kV2lkdGgpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCBsZWdlbmRIZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCd4JywgKHNwYWNpbmcgKiBpKSArICdweCcpXHJcbiAgICAgICAgICAgICAgICAgIC5zdHlsZSgnZmlsbCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyM3NGE5Y2YnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcjMDQ1YThkJztcclxuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcjNTI1MjUyJztcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgIC8vIGFwcGVuZCB0aGUgdGV4dCBmb3IgdGhlIGxlZ2VuZFxyXG4gICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5hcHBlbmQoJ3RleHQnKVxyXG4gICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGluZS1jaGFydC1sZWdlbmQtdGV4dCcpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCd5JywgdGV4dFNwYWNlKVxyXG4gICAgICAgICAgICAgICAgICAuYXR0cigneCcsIChzcGFjaW5nICogaSArIGxlZ2VuZFdpZHRoICsgMTApICsgJ3B4JylcclxuICAgICAgICAgICAgICAgICAgLnRleHQoZCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgJCgnI3RyZW5kQ2hhcnRMZWdlbmQnKS5oaWRlKCk7XHJcblxyXG4gICAgICB0aGlzLmluaXRMaW5lQ2hhcnRCdXR0b25zKClcclxuXHJcblxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSW5pdCBsaW5lIGNoYXJ0IGJ1dHRvbiBsaXN0ZW5lcnNcclxuICAgKi9cclxuICBpbml0TGluZUNoYXJ0QnV0dG9ucygpIHtcclxuICAgICAgLy8gYWRkIHRoZSBMaW5lIGNoYXJ0IGJ1dHRvbnMgdG8gdGhlIGZlYXR1cmUgcGFuZWxcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnN3YXJtX2ZlYXR1cmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBsZXQgY2FwaXRhbGl6ZWRfZmVhdHVyZV9zdHJpbmcgPSB0aGlzLnN3YXJtX2ZlYXR1cmVzW2ldLnNwbGl0KCdfJykuam9pbignICcpO1xyXG4gICAgICAgICAgY2FwaXRhbGl6ZWRfZmVhdHVyZV9zdHJpbmcgPSBjYXBpdGFsaXplZF9mZWF0dXJlX3N0cmluZy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGNhcGl0YWxpemVkX2ZlYXR1cmVfc3RyaW5nLnNsaWNlKDEpO1xyXG5cclxuICAgICAgICAgICQoJyNsaW5lLWNoYXJ0LWZlYXR1cmUtY2hlY2tib3hlcycpXHJcbiAgICAgICAgICAgICAgLmFwcGVuZCgnPHRyPjx0aD4gPGRpdiBjbGFzcz1cInByZXR0eSBwLXN3aXRjaCBwLWZpbGwgcC1iaWdnZXJcIj48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgY2xhc3M9XCJsaW5lLWNoYXJ0LWNoZWNrLWJveFwiIGlkPVwiZHJhdy0nICtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5zd2FybV9mZWF0dXJlc1tpXSArICdcIiBkYXRhPVwiIycgKyB0aGlzLnN3YXJtX2ZlYXR1cmVzW2ldICsgJ0xpbmVcIiAvPjxkaXYgY2xhc3M9XCJzdGF0ZVwiPjxsYWJlbD4nICtcclxuICAgICAgICAgICAgICAgICAgY2FwaXRhbGl6ZWRfZmVhdHVyZV9zdHJpbmcgKyAnPC9sYWJlbD48L2Rpdj48L2Rpdj48L3RoPjwvdHI+Jyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgICQoJy5saW5lLWNoYXJ0LWNoZWNrLWJveCcpLmNoYW5nZShmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGxldCBjaGVja2JveCA9ICQodGhpcyk7XHJcbiAgICAgICAgICBpZiAoY2hlY2tib3gucHJvcCgnY2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICAgJChjaGVja2JveC5hdHRyKCdkYXRhJykpLnNob3coKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgJChjaGVja2JveC5hdHRyKCdkYXRhJykpLmhpZGUoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBZGQgYSB0cmVuZCBjaGFydCBzaG93aW5nIG1lZGlhbiBhbmQgcGVyY2VudGlsZXNcclxuICogLy8gLSB3aGljaCBmZWF0dXJlXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVHJlbmRDaGFydCBleHRlbmRzIENoYXJ0e1xyXG4gICAgY29uc3RydWN0b3IoZWxlbSwgc3dhcm1EYXRhKXtcclxuICAgICAgc3VwZXIoc3dhcm1EYXRhKTtcclxuICAgICAgdGhpcy5lbGVtID0gZWxlbTtcclxuXHJcbiAgICAgIHRoaXMudHJlbmRjaGFydCgpO1xyXG4gICAgICAvL3RoaXMuZGlzYWJsZUxpbmVDaGFydCgpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBkaXNhYmxlTGluZUNoYXJ0KCkge1xyXG4gICAgICAgICQoJy5saW5lQ2hhcnRCdXR0b24nKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcbiAgICAgICAgJCgnLmxpbmUtY2hhcnQtY2hlY2stYm94JykuYXR0cignZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICAgICAkKCcubGluZUNoYXJ0TGluZScpLmF0dHIoJ3Zpc2liaWxpdHknLCAnaGlkZGVuJyk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHRyZW5kY2hhcnQoKXtcclxuICAgIC8vIGNoZWNrIHdoaWNoIGZlYXR1cmUgdG8gZGlzcGxheSBpbiB0aGUgdHJlbmQgY2hhcnRcclxuICAgIGxldCBmZWF0dXJlID0gJyc7XHJcbiAgICBpZiAodGhpcy5lbGVtWydpZCddLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3NwZWVkJykpIHtcclxuICAgICAgICBmZWF0dXJlID0gJ3NwZWVkJztcclxuICAgIH0gZWxzZSBpZiAodGhpcy5lbGVtWydpZCddLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2FjY2VsZXJhdGlvbicpKSB7XHJcbiAgICAgICAgZmVhdHVyZSA9ICdhY2NlbGVyYXRpb24nO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmVsZW1bJ2lkJ10udG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZGlzdGFuY2VfY2VudHJvaWQnKSkge1xyXG4gICAgICAgIGZlYXR1cmUgPSAnZGlzdGFuY2VfY2VudHJvaWQnO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmVsZW1bJ2lkJ10udG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnbWlkbGluZV9vZmZzZXQnKSkge1xyXG4gICAgICAgIGZlYXR1cmUgPSAnbWlkbGluZV9vZmZzZXQnO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICAvLyBkYXRhIGlzIG5vdCBsb2FkZWQgZnVsbHkgLS0gcmV0dXJuXHJcbiAgICAvL2lmICghZGF0YXNldFswXVtmZWF0dXJlXSkge1xyXG4gICAgLy8gICAgcmV0dXJuO1xyXG4gICAgLy99XHJcbiAgICAvLyBjaGFuZ2UgdG8gdGhlIHRyZW5kIGNoYXJ0IGxlZ2VuZFxyXG4gICAgJCgnI2xpbmVDaGFydExlZ2VuZCcpLmhpZGUoKTtcclxuICAgICQoJyN0cmVuZENoYXJ0TGVnZW5kJykuc2hvdygpO1xyXG4gICAgLy8gY2hlY2sgaWYgYWxyZWFkeSBjb21wdXRlZCBhbmQgb25seSBoaWRkZW5cclxuICAgIGlmICghJCgoJyMnICsgZmVhdHVyZSArICdUcmVuZENoYXJ0JykpLmxlbmd0aCkge1xyXG4gICAgICAgIC8vIGdldCB0aGUgZGF0YSBmb3IgdGhlIHRyZW5kIGNoYXJ0XHJcbiAgICAgICAgbGV0IHRyZW5kQ2hhcnREYXRhID0gW107XHJcbiAgICAgICAgbGV0IG51bV9hbmltYWxzID0gYW5pbWFsSWRzLmxlbmd0aDtcclxuICAgICAgICAvLyBjYWxjdWxhdGUgdGhlIHBlcmNldGlsZXMgZm9yIGV2ZXJ5IHRpbWUgc3RlcFxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3dhcm1EYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCB0bXAgPSBbXTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBudW1fYW5pbWFsczsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YXNldFtpICogbnVtX2FuaW1hbHMgKyBqXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRtcC5wdXNoKGRhdGFzZXRbaSAqIG51bV9hbmltYWxzICsgal1bZmVhdHVyZV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRyZW5kQ2hhcnREYXRhLnB1c2gocGVyY2VudGlsZXNMaW5lQ2hhcnQodG1wKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vYWdncmVnYXRlIGFuZCBhdmVyYWdlIHRoZSB0cmVuZENoYXJ0RGF0YSB0byB0aGlzLmxpbmVDaGFydFdpZHRoIGRhdGEgcG9pbnRzXHJcbiAgICAgICAgaWYgKHRyZW5kQ2hhcnREYXRhLmxlbmd0aCA+IHRoaXMubGluZUNoYXJ0V2lkdGgpIHtcclxuICAgICAgICAgICAgbGV0IHRtcFRyZW5kQ2hhcnREYXRhID0gW107XHJcblxyXG4gICAgICAgICAgICAvLyBbcGVyYzA1LHBlcmMyNSxwZXJjNTAscGVyYzc1LHBlcmM5NV1cclxuICAgICAgICAgICAgbGV0IHRtcCA9IFswLCAwLCAwLCAwLCAwXTtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHJlbmRDaGFydERhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIC8vIGFnZ3JlZ2F0ZVxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0bXAubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB0bXBbal0gKz0gdHJlbmRDaGFydERhdGFbaV1bal07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBkaXZpZGVcclxuICAgICAgICAgICAgICAgIGlmIChpICUgcmF0aW8gPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRtcC5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0bXBbal0gKz0gdG1wW2pdIC8gcmF0aW87XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vYWRkIHRvIHRoZVxyXG4gICAgICAgICAgICAgICAgICAgIHRtcFRyZW5kQ2hhcnREYXRhLnB1c2godG1wKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBbcGVyYzA1LHBlcmMyNSxwZXJjNTAscGVyYzc1LHBlcmM5NV1cclxuICAgICAgICAgICAgICAgICAgICB0bXAgPSBbMCwgMCwgMCwgMCwgMF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdHJlbmRDaGFydERhdGEgPSB0bXBUcmVuZENoYXJ0RGF0YTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gZ2V0IG1pbiBhbmQgbWF4IGZvciB0aGUgbm9ybWFsaXphdGlvblxyXG4gICAgICAgIGxldCBtaW4gPSBkMy5taW4odHJlbmRDaGFydERhdGEsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGRbMF07XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbGV0IG1heCA9IGQzLm1heCh0cmVuZENoYXJ0RGF0YSwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZFs0XTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBsZXQgbm9ybWFsaXphdGlvblNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oW21pbiwgbWF4XSkucmFuZ2UoWzAsIDEwMF0pO1xyXG5cclxuICAgICAgICAvLyBhZGQgYSBncm91cCBmb3IgdGhlIHRyZW5kIGNoYXJ0XHJcbiAgICAgICAgbGV0IHRyZW5kQ2hhcnQgPSB6b29tR3JvdXAuYXBwZW5kKCdnJylcclxuICAgICAgICAgICAgLmF0dHIoJ2lkJywgKGZlYXR1cmUgKyAnVHJlbmRDaGFydCcpKVxyXG4gICAgICAgICAgICAuYXR0cignY2xhc3MnLCAndHJlbmRDaGFydERhdGEnKTtcclxuICAgICAgICAvLyBhcHBlbmQgdGhlIHpvb20gcmVjdGFuZ2xlIGFnYWluIHRvIHRoZSBlbmQgb2YgdGhlIGdyb3VwXHJcbiAgICAgICAgJCgnLnpvb20nKS5hcHBlbmRUbygnI2xpbmVDaGFydFpvb20nKTtcclxuICAgICAgICAkKCcjbGluZUNoYXJ0VGltZUxpbmUnKS5hcHBlbmRUbygnI2xpbmVDaGFydFpvb20nKTtcclxuICAgICAgICAvLyB2YXIgdG8gc2F2ZSB0aGUgZnVuY3Rpb25zIGZvciB0aGUgem9vbVxyXG4gICAgICAgIHRyZW5kQ2hhcnRzWm9vbVtmZWF0dXJlXSA9IHt9O1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudHJlbmRDaGFydHNFbGVtLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIC8vIGZ1bmN0aW9ucyBmb3IgdGhlIHVwcGVyIGFuZCBpbm5lciBhcmVhcyBhbmQgdGhlIG1lZGlhblxyXG4gICAgICAgICAgICBsZXQgdGVtcDtcclxuICAgICAgICAgICAgLy8gbG93ZXIgb3V0ZXIgYXJlYSBhbmQgbG93ZXIgaW5uZXIgYXJlYVxyXG4gICAgICAgICAgICBpZiAoaSA8IDIpIHtcclxuICAgICAgICAgICAgICAgIHRlbXAgPSBkMy5hcmVhKClcclxuICAgICAgICAgICAgICAgICAgICAueChmdW5jdGlvbihkLCBqKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB4KGopO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLnkwKGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHkobm9ybWFsaXphdGlvblNjYWxlKGRbKGkgKyAxKV0pKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC55MShmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB5KG5vcm1hbGl6YXRpb25TY2FsZShkW2ldKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gbWVkaWFuIGxpbmVcclxuICAgICAgICAgICAgZWxzZSBpZiAoaSA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgdGVtcCA9IGQzLmxpbmUoKVxyXG4gICAgICAgICAgICAgICAgICAgIC54KGZ1bmN0aW9uKGQsIGopIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHgoaik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAueShmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB5KG5vcm1hbGl6YXRpb25TY2FsZShkW2ldKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gdXBwZXIgaW5uZXIgYXJlYSBhbmQgdXBwZXIgb3V0ZXIgYXJlYVxyXG4gICAgICAgICAgICBlbHNlIGlmIChpID4gMikge1xyXG4gICAgICAgICAgICAgICAgdGVtcCA9IGQzLmFyZWEoKVxyXG4gICAgICAgICAgICAgICAgICAgIC54KGZ1bmN0aW9uKGQsIGopIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHgoaik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAueTAoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geShub3JtYWxpemF0aW9uU2NhbGUoZFtpXSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLnkxKGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHkobm9ybWFsaXphdGlvblNjYWxlKGRbKGkgLSAxKV0pKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBzYXZlIHRoaXMgZm9yIHRoZSBsYXRlciB6b29tXHJcbiAgICAgICAgICAgIHRyZW5kQ2hhcnRzWm9vbVtmZWF0dXJlXVt0aGlzLnRyZW5kQ2hhcnRzRWxlbVtpXV0gPSB0ZW1wO1xyXG4gICAgICAgICAgICAvLyBhcHBlbmQgaXQgdG8gdGhlIHBhdGhcclxuICAgICAgICAgICAgdHJlbmRDaGFydC5hcHBlbmQoJ3BhdGgnKVxyXG4gICAgICAgICAgICAgICAgLmRhdGEoW3RyZW5kQ2hhcnREYXRhXSlcclxuICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsIHRoaXMudHJlbmRDaGFydHNFbGVtW2ldKVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2QnLCB0ZW1wKTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIHNob3cgdGhlIHRyZW5kIGNoYXJ0XHJcbiAgICAgICAgJCgoJyMnICsgZmVhdHVyZSArICdUcmVuZENoYXJ0JykpLnNob3coKTtcclxuICAgIH1cclxufVxyXG59XHJcblxyXG4vKipcclxuICogVXBkYXRlIHRoZSBsaW5lIGNoYXJ0IGZpZWxkcyBhbmQgdGhlIGxpbmUgY2hhcnQgdGltZSBsaW5lXHJcbiAqL1xyXG5cclxuXHJcblxyXG4vKipcclxuICogRHJhd2luZyBmdW5jdGlvbiAtIGlzIGNhbGxlZCBmb3IgZWFjaCB0aW1lc3RlcFxyXG4gKiBpbmRleFRpbWUgc2F2ZXMgdGhlIGN1cnJlbnQgdGltZVxyXG4gKi9cclxuXHJcblxyXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICBTZXR0ZXJcclxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4vKipcclxuICogU2V0IHRoZSBpbmRleCB0aW1lIHRvIGEgbmV3IHZhbHVlXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSB2YWx1ZSAtIG5ldyB0aW1lIHN0ZXBcclxuICovXHJcblxyXG5cclxuLyoqXHJcbiAqIERlY3JlYXNlIHRpbWUgYnkgMVxyXG4gKi9cclxuXHJcblxyXG4vKipcclxuICogU2V0IHRoZSB0aGUgbmV3IGFjdGl2ZSBzY2FsZSAtIGUuZy4gc3BlZWQsIGFjY2VsZXJhdGlvbiwgYmxhY2sgZXRjLlxyXG4gKiBAcGFyYW0ge1N0cmluZ30gdmFsdWUgLSBhY3RpdmUgc2NhbGUgZm9yIHRoZSBpbmRpdmlkdWFsIGFuaW1hbHNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRBY3RpdmVTY2FsZSh2YWx1ZSkge1xyXG4gICAgYWN0aXZlU2NhbGUgPSB2YWx1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldCB0aGUgbmV3IG1lZG9pZCBhbmltYWxcclxuICogQHBhcmFtIHtOdW1iZXJ9IHZhbHVlIC0gVW5pcXVldGhpcy5pZCBvZiB0aGUgYW5pbWFsXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2V0TWVkb2lkQW5pbWFsKHZhbHVlKSB7XHJcbiAgICBtZWRvaWRBbmltYWwgPSB2YWx1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldCB0aGUgc2VsZWN0ZWQgYW5kIGhpZ2hsaWdodGVkIGFuaW1hbHNcclxuICogQHBhcmFtIHthcnJheX0gdmFsdWUgLSBhcnJheSBvZiB1bnFpdWV0aGlzLmlkIG9mIHRoZSBhbmltYWxzXHJcbiAqL1xyXG4iLCIvKmVzbGludC1kaXNhYmxlIG5vLXVudXNlZC1sZXRzKi9cclxuLypnbG9iYWwgd2luZG93LCQsIGQzLCBQb2x5Qm9vbCwgcGFyYW1ldGVycywgU2V0Ki9cclxuLy8gaW1wb3J0ICogYXMgc3B2IGZyb20gJy4vc3BhdGlhbF92aWV3LmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBuZXR3b3JrSGllcmFyY2h5XHJcbn0gZnJvbSAnLi9leHBsb3JlLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBpbmRleFRpbWUsXHJcbiAgICBhcnJheUFuaW1hbHMsXHJcbiAgICBzZXRBY3RpdmVBbmltYWxzLFxyXG4gICAgZGVjSW5kZXhUaW1lLFxyXG4gICAgRHJhd2VyXHJcbn0gZnJvbSAnLi9zcGF0aWFsX3ZpZXcvc3BhdGlhbF92aWV3LmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBzaG93TmV0d29ya0hpZXJhcmNoeSxcclxuICAgIG5ldHdvcmtDb2xvcixcclxuICAgIG5ldHdvcmtDb2xvclNjYWxlLFxyXG4gICAgbmV0d29ya0F1dG8sXHJcbiAgICBzZXROZXR3b3JMaW1pdCxcclxuICAgIG5ldHdvcmtMaW1pdCxcclxufSBmcm9tICcuL25ldHdvcmsuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIHN0YW5kYXJkRGV2aWF0aW9uXHJcbn0gZnJvbSAnLi9oZWxwZXJzLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBzZXRUaW1lU2xpZGVyLFxyXG4gICAgaW5pdFRvb2x0aXAsXHJcbiAgICB0b29sdGlwRnVuY3Rpb24sXHJcbiAgICBpbml0U2xpZGVycyxcclxuICAgIHRvb2x0aXBcclxufSBmcm9tICcuL3NwYXRpYWxfdmlldy9pbnRlcmFjdGlvbi5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgLy9saW5lQ2hhcnQsXHJcbiAgICB1cGRhdGVMaW5lQ2hhcnQsXHJcbiAgICBMaW5lQ2hhcnRcclxufSBmcm9tICcuL2xpbmVfY2hhcnQuanMnO1xyXG5cclxuLy9sZXQgem9vbUdyb3VwOyAvLyB6b29tIGdyb3VwIGZvciB0aGUgc3BlY2lmaWMgZGVuZHJvZ3JhbVxyXG5sZXQgdHJlZW1hcDsgLy8gYmVpZGVcclxubGV0IHRvb2x0aXBEaXY7XHJcbmxldCBzcGF0aWFsVmlldzsgLy8gZ2V0IHRoZSBzcGF0aWFsIHZpZXcgc3ZnIGZyb20gdGhlIG1haW4gdmlzXHJcbmxldCBzdmdMZWdlbmQ7XHJcbmxldCBoaWVyYXJjaHlMZXZlbHMgPSB7fTtcclxubGV0IHNldE9wZXJhdGlvbiA9ICd1bmlvbic7XHJcbmxldCBpZDsgLy8gbmVlZGVkIGZvciB0aGUgY29sbGFwc2UgZnVuY3Rpb25cclxuLy9TdGF0aWMgY29sb3Igc2NhbGUgZm9yIHRoZSBkZW5kcm9ncmFtIHZhcmlhY25lIGNvbG9yaW5nXHJcbmxldCBzdGFuZGFyZERldmlhdGlvbkNvbG9yU2NhbGUgPSBkMy5zY2FsZVRocmVzaG9sZCgpXHJcbiAgICAuZG9tYWluKFxyXG4gICAgICAgIFswLCAuMSwgLjIsIC4zLCAuNCwgLjUsIC42LCAuNywgLjgsIC45LCAxXVxyXG4gICAgKVxyXG4gICAgLnJhbmdlKFsnI2Y3ZmJmZicsICcjZGVlYmY3JywgJyNjNmRiZWYnLCAnIzllY2FlMScsICcjNmJhZWQ2JywgJyM0MjkyYzYnLCAnIzIxNzFiNScsICcjMDg1MTljJywgJyMwODMwNmInXSk7XHJcblxyXG5leHBvcnQgY29uc3QgbWF4TnVtYmVySGllcmFyY2hpZXMgPSA0O1xyXG5leHBvcnQgbGV0IG5ldHdvcmtIaWVyYXJjaHlJZHMgPSBbXTtcclxuZXhwb3J0IGxldCBoaWVyYXJjaHlDb2xvcnMgPSB7fTtcclxuZXhwb3J0IGxldCBoaWVyYXJjaHlHcm91cFN0ZGV2ID0ge307XHJcbi8vIFRPRE8gYWRkIG1vcmUgY29sb3JzXHJcbmV4cG9ydCBsZXQgY29sb3JzID0gWycjN2ZjOTdmJywgJyMzODZjYjAnLCAnI2U3Mjk4YScsICcjZmY5OTAwJ107XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBEZW5kcm9ncmFtIGV4dGVuZHMgRHJhd2Vye1xyXG4gIGNvbnN0cnVjdG9yKCl7XHJcbiAgICBzdXBlcigpO1xyXG4gICAgdGhpcy5pbml0RGVuZHJvZ3JhbSgpXHJcbiAgfVxyXG5cclxuICBpbml0RGVuZHJvZ3JhbSgpIHtcclxuICAgICAgLy8gY29uc3RhbmN0IGZhY3RvcnMgZm9yIHRoZSBkZW5kZ3JvZ3JhbVxyXG4gICAgICBsZXQgbWFyZ2luID0gMjAsXHJcbiAgICAgICAgICB3aWR0aCA9IDUwMDAsXHJcbiAgICAgICAgICBoZWlnaHQgPSA1MDAwO1xyXG5cclxuICAgICAgLy8gem9vbSBmdW5jdGlvbiBmb3IgdGhlIGRlbmRyb2dyYW1cclxuICAgICAgbGV0IHpvb20gPSBkMy56b29tKClcclxuICAgICAgICAgIC5zY2FsZUV4dGVudChbMSwgMTBdKVxyXG4gICAgICAgICAgLm9uKCd6b29tJywgKCk9PntcclxuICAgICAgICAgICAgICAvL2NvbnN0cmFpbmVkIHpvb21pbmdcclxuICAgICAgICAgICAgICBkMy5ldmVudC50cmFuc2Zvcm0ueCA9IE1hdGgubWluKDAsIHdpZHRoICogKGQzLmV2ZW50LnRyYW5zZm9ybS5rIC0gMSksXHJcbiAgICAgICAgICAgICAgICAgIE1hdGgubWF4KHdpZHRoICogKDEgLSBkMy5ldmVudC50cmFuc2Zvcm0uayksIGQzLmV2ZW50LnRyYW5zZm9ybS54KSk7XHJcblxyXG4gICAgICAgICAgICAgIGQzLmV2ZW50LnRyYW5zZm9ybS55ID0gTWF0aC5taW4oMCwgaGVpZ2h0ICogKGQzLmV2ZW50LnRyYW5zZm9ybS5rIC0gMSksXHJcbiAgICAgICAgICAgICAgICAgIE1hdGgubWF4KGhlaWdodCAqICgxIC0gZDMuZXZlbnQudHJhbnNmb3JtLmspLCBkMy5ldmVudC50cmFuc2Zvcm0ueSkpO1xyXG5cclxuICAgICAgICAgICAgICAvLyB0cmFuc2xhdGUgYW5kIHNjYWxlXHJcbiAgICAgICAgICAgICAgdGhpcy56b29tR3JvdXAuYXR0cigndHJhbnNmb3JtJywgZDMuZXZlbnQudHJhbnNmb3JtKTtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gc3ZnIGNvbnRhaW5lciBmb3IgdGhlIGRlbmRyb2dyYW1cclxuICAgICAgbGV0IHN2ZyA9IGQzLnNlbGVjdCgnI2RlbmRyb2dyYW0tcGFuZWwnKVxyXG4gICAgICAgICAgLmNsYXNzZWQoJ3N2Zy1kZW5kcm9ncmFtLWNvbnRhaW5lcicsIHRydWUpXHJcbiAgICAgICAgICAuYXBwZW5kKCdzdmcnKVxyXG4gICAgICAgICAgLmF0dHIoJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLCAneE1pbllNaW4gbWVldCcpXHJcbiAgICAgICAgICAuYXR0cigndmlld0JveCcsICcwIDAgJyArIHdpZHRoICsgJyAnICsgaGVpZ2h0KVxyXG4gICAgICAgICAgLy8gYWRkIHRoZSBjbGFzcyBzdmctY29udGVudFxyXG4gICAgICAgICAgLmNsYXNzZWQoJ3N2Zy1jb250ZW50LWRlbmRyb2dyYW0nLCB0cnVlKVxyXG4gICAgICAgICAgLmNhbGwoem9vbSk7XHJcblxyXG4gICAgICBpbml0RGVuZHJvZ3JhbUxlZ2VuZCgpO1xyXG5cclxuICAgICAgLy8gYXBwZW5kIHRoZSB6b29tIGdyb3VwIHRvIHRoZSBzdmdcclxuICAgICAgdGhpcy56b29tR3JvdXAgPSBzdmcuYXBwZW5kKCdnJylcclxuICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyBtYXJnaW4gKyAnLCcgKyBtYXJnaW4gKyAnKScpXHJcbiAgICAgICAgICAuYXBwZW5kKCdzdmc6ZycpO1xyXG5cclxuICAgICAgLy8gZDMgdHJlZVxyXG4gICAgICB0cmVlbWFwID0gZDMudHJlZSgpIC8vZDMuY2x1c3RlcigpXHJcbiAgICAgICAgICAuc2l6ZShbKGhlaWdodCAtIDEwICogbWFyZ2luKSwgKHdpZHRoIC0gMTAgKiBtYXJnaW4pXSk7XHJcblxyXG4gICAgICAvLyBzZXQgdGhlIHNwYXRpYWwgdmlldyAtIG5lZWRlZCB0byBhZGQgdGhlIGNsdXN0ZXJpbmcgdG8gdGhlIHNwYXRpYWwgdmlldyB3aW5kb3dcclxuICAgICAgc3BhdGlhbFZpZXcgPSBkMy5zZWxlY3QoJy50YW5rJyk7XHJcblxyXG4gICAgICAvLyBpbml0IGRlbmRyb2dyYW0gc2xpZGVyXHJcbiAgICAgIC8vIGluaXRpYWxpemUgdGhlIE5ldHdvcmsgc2xpZGVyXHJcbiAgICAgICQoJyNkZW5kcm9ncmFtLXBhbmVsLWxldmVsLXNsaWRlcicpXHJcbiAgICAgICAgICAuc2xpZGVyKHtcclxuICAgICAgICAgICAgICByYW5nZTogJ21heCcsXHJcbiAgICAgICAgICAgICAgbWluOiAyLFxyXG4gICAgICAgICAgICAgIG1heDogMixcclxuICAgICAgICAgICAgICBzdGVwOiAxLFxyXG4gICAgICAgICAgICAgIHZhbHVlOiB0aGlzLmhpZXJhcmNoeUxldmVsc1snaDAnXSxcclxuICAgICAgICAgICAgICBzbGlkZTogKGV2ZW50LCB1aSk9PntcclxuICAgICAgICAgICAgICAgICAgbGV0IGlkID0gJCgnLnNob3ctZGVuZHJvZ3JhbS5idG4tcHJpbWFyeScpLmF0dHIoJ2RhdGEnKTtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5zZXRIaWVyYXJjaHlMZXZlbChpZCwgdWkudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZURlbmRyb2dyYW0oKTtcclxuICAgICAgICAgICAgICAgICAgLy8gaWYgbm8gYW5pbWF0aW9uIGlzIGFjdGl2ZSBkcmF3IHRoZSBuZXcgY2x1c3RlcmluZyBhbmQgZGVuZHJvZ3JhbVxyXG4gICAgICAgICAgICAgICAgICAvLyBkcmF3RGVuZHJvZ3JhbSgpO1xyXG4gICAgICAgICAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgLy9nbyBiYWNrIG9uZSBzZWNvbmQgYW5kIGRyYXcgdGhlIG5leHQgZnJhbWVcclxuICAgICAgICAgICAgICAgICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhd0RlbmRyb2dyYW0oKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gaW5pdCB0aGUgdG9vbHRpcCBmb3IgdGhlIGRlbmRyb2dyYW1cclxuICAgICAgdG9vbHRpcERpdiA9IGQzLnNlbGVjdCgnI2RlbmRyb2dyYW0tdG9vbHRpcCcpXHJcbiAgICAgICAgICAuc3R5bGUoJ2xlZnQnLCAwICsgJ3B4JylcclxuICAgICAgICAgIC5zdHlsZSgndG9wJywgMCArICdweCcpXHJcbiAgICAgICAgICAub24oJ21vdXNlb3ZlcicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIHRvb2x0aXBEaXZcclxuICAgICAgICAgICAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgMSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgLy8gaW5pdCB0aGUgaGllcmFyY2h5IGxlZ2VuZFxyXG4gICAgICBsZXQgbGVnZW5kV2lkdGggPSBtYXhOdW1iZXJIaWVyYXJjaGllcyAqIDEwMDtcclxuICAgICAgbGV0IGxlZ2VuZEhlaWdodCA9IDYwO1xyXG5cclxuICAgICAgc3ZnTGVnZW5kID0gZDMuc2VsZWN0KCcjaGllcmFyY2h5LWxlZ2VuZC1kaXYnKVxyXG4gICAgICAgICAgLmFwcGVuZCgnc3ZnJylcclxuICAgICAgICAgIC5hdHRyKCdpZCcsICdoaWVyYXJjaHktbGVnZW5kJylcclxuICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIGxlZ2VuZFdpZHRoKVxyXG4gICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGxlZ2VuZEhlaWdodCk7XHJcblxyXG4gICAgICAvLyBhZGQgcGF0dGVybiBmb3Igc3RyaXBlZCBiYWNrZ3JvdW5kIG9mIGludGVyc2VjdGlvbnMgZXRjLlxyXG4gICAgICBzcGF0aWFsVmlldy5hcHBlbmQoJ2RlZnMnKVxyXG4gICAgICAgICAgLmFwcGVuZCgnc3ZnOnBhdHRlcm4nKVxyXG4gICAgICAgICAgLmF0dHIoJ2lkJywgJ3N0cmlwZWQnKVxyXG4gICAgICAgICAgLmF0dHIoJ3BhdHRlcm5Vbml0cycsICd1c2VyU3BhY2VPblVzZScpXHJcbiAgICAgICAgICAuYXR0cignd2lkdGgnLCAnMjAnKVxyXG4gICAgICAgICAgLmF0dHIoJ2hlaWdodCcsICc1JylcclxuICAgICAgICAgIC5hdHRyKCdwYXR0ZXJuVHJhbnNmb3JtJywgJ3JvdGF0ZSg2MCknKVxyXG4gICAgICAgICAgLmFwcGVuZCgncmVjdCcpXHJcbiAgICAgICAgICAuYXR0cignd2lkdGgnLCA1KVxyXG4gICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIDEwKVxyXG4gICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoMCwwKScpXHJcbiAgICAgICAgICAuc3R5bGUoJ2ZpbGwnLCAnIzY3MDAwZCcpO1xyXG5cclxuICB9O1xyXG5cclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBJbml0aWFsaXplIHRoZSBkZW5kcm9ncmFtXHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBEcmF3IHRoZSBkZW5kZ3JvZ3JhbSBmb3Igb25lIHN0ZXBcclxuICogRnVydGhlciBjYWxscyB0aGUgZHJhd0hpZXJhcmNoeSBmdW5jdGlvblxyXG4gKi9cclxuXHJcblxyXG4vKipcclxuICogQ29sbGFwc2UgZnVuY3Rpb24gLSBvbmx5IHNob3cgdGhlIGFjdGl2ZSBsZXZlbCBhbmQgb25lIHN1YiBsZXZlbFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbGxhcHNlKGQpIHtcclxuICAgIGlmIChkLmNoaWxkcmVuICYmIGQuZGVwdGggPD0gaGllcmFyY2h5TGV2ZWxzWydoJyArIGlkXSkge1xyXG4gICAgICAgIGQuX2NoaWxkcmVuID0gZC5jaGlsZHJlbjtcclxuICAgICAgICBkLl9jaGlsZHJlbi5mb3JFYWNoKGNvbGxhcHNlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZC5jaGlsZHJlbiA9IG51bGw7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEcmF3IHRoZSBhbGwgaGllcmFyY2hpZXMgaW4gdGhlIHNwYXRpYWwgdmlld1xyXG4gKiBhZGQgYSBncm91cCB3aXRoIHRoZSBpZHMgb2YgdGhlIGFuaW1hbHMgaW4gaXQgdG8gdGhlIHZpZXdcclxuICogd2l0aCBwYXRoIGNoaWxkIGVsZW1lbnRzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZHJhd0hpZXJhcmNoeSgpIHtcclxuICAgIC8vIGlkIG9mIHRoZSBoaWVyYXJjaHkgZS5nLiBbMSw1LDNdXHJcbiAgICBsZXQgaGllcmFyY2h5SWRzID0gT2JqZWN0LmtleXMobmV0d29ya0hpZXJhcmNoeSkubWFwKGZ1bmN0aW9uKHgpIHtcclxuICAgICAgICByZXR1cm4geC5yZXBsYWNlKCdoJywgJycpO1xyXG4gICAgfSk7XHJcbiAgICAvLyAgVGhlIGNsdXN0ZXJpbmcgaW4gYW4gMkQgYXJyYXkgd2l0aCB3aGljaCBhbmltYWwgaWQgYmVsb25ncyB0byB3aGljaCBncm91cFxyXG4gICAgbGV0IGhpZXJhcmNoeVZlcnRpY2VzID0gW107XHJcblxyXG4gICAgLy8gaXRlcmF0ZSBvdmVyIHRoZSBoaWVyYXJjaHkgZGF0YSB0byBnZXQgdGhlIGhpZXJhcmNoeSBhbmltYWwgaWRzIHBlciBjbHVzdGVyaW5nIGFuZCBncm91cGluZ1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBoaWVyYXJjaHlJZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBsZXQgdHJlZURhdGEgPSBuZXR3b3JrSGllcmFyY2h5WydoJyArIGhpZXJhcmNoeUlkc1tpXV1baW5kZXhUaW1lXTtcclxuICAgICAgICBjb25zb2xlLmxvZyh0cmVlRGF0YSk7XHJcbiAgICAgICAgbGV0IG5vZGVzID0gZDMuaGllcmFyY2h5KHRyZWVEYXRhLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkLmNoaWxkcmVuO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBub2RlcyA9IHRyZWVtYXAobm9kZXMpO1xyXG4gICAgICAgIGxldCByb290ID0gbm9kZXNbJ2NoaWxkcmVuJ11bMF07XHJcbiAgICAgICAgaWYgKHNob3dOZXR3b3JrSGllcmFyY2h5ID09PSBoaWVyYXJjaHlJZHNbaV0pIHtcclxuICAgICAgICAgICAgbmV0d29ya0hpZXJhcmNoeUlkcyA9IGdldEhpZXJhcmNoeUxldmVsKHJvb3QsIGhpZXJhcmNoeUlkc1tpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGFkZCB0aGUgdmVydGljZXMgaW50byB0aGUgYXJyYXlcclxuICAgICAgICBoaWVyYXJjaHlWZXJ0aWNlcy5wdXNoKGdldEhpZXJhcmNoeVZlcnRpY2VzKGdldEhpZXJhcmNoeUxldmVsKHJvb3QsIGhpZXJhcmNoeUlkc1tpXSkpKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBpZiBtb3JlIHRoYW4gMiBoaWVyYXJjaGllcyBhcmUgZHJhd25cclxuICAgIGlmIChoaWVyYXJjaHlWZXJ0aWNlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgLy8gdW5pb24gdGhlIGxpc3Qgb2YgcG9seWdvbnMgdG8gb25lIHBvbHlnb25cclxuICAgICAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IGhpZXJhcmNoeUlkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIC8vICAgICBoaWVyYXJjaHlWZXJ0aWNlc1tpXSA9IHVuaW9uUG9seWdvbnMoaGllcmFyY2h5VmVydGljZXNbaV0pO1xyXG4gICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgLy8gdHJhbnNmb3JtIGFuZCBjYWxjdWxhdGUgdGhlIGludGVyc2VjdGlvbiBwb2x5Z29ucyBvZiB0aGUgbiBoaWVyYXJjaGllc1xyXG4gICAgICAgIC8vIGlmIChzZXRPcGVyYXRpb24gPT09ICdpbnRlcnNlY3Rpb24nKSB7XHJcbiAgICAgICAgLy8gICAgIC8vIHRlbXAgc29sdXRpb24gb2YgdHdvIGludGVyc2VjdGlvbnNcclxuICAgICAgICAvLyAgICAgbGV0IHRtcEludGVyc2VjdGlvbiA9IGhpZXJhcmNoeVZlcnRpY2VzWzBdO1xyXG4gICAgICAgIC8vICAgICAvLyBpdGVyYXRlIG92ZXIgdGhlIGhpZXJhcmNoaWVzIGFuZCBpbnRlcnNlY3QgYWxsIG9mIHRoZW1cclxuICAgICAgICAvLyAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBoaWVyYXJjaHlWZXJ0aWNlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIC8vICAgICAgICAgLy8gaW50ZXJzZWN0aW9uXHJcbiAgICAgICAgLy8gICAgICAgICB0bXBJbnRlcnNlY3Rpb24gPSBQb2x5Qm9vbC5pbnRlcnNlY3Qoe1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIHJlZ2lvbnM6IHRtcEludGVyc2VjdGlvbiwgLy8gbGlzdCBvZiByZWdpb25zXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgaW52ZXJ0ZWQ6IGZhbHNlIC8vIGlzIHRoaXMgcG9seWdvbiBpbnZlcnRlZD9cclxuICAgICAgICAvLyAgICAgICAgIH0sIHtcclxuICAgICAgICAvLyAgICAgICAgICAgICByZWdpb25zOiBoaWVyYXJjaHlWZXJ0aWNlc1tpXSxcclxuICAgICAgICAvLyAgICAgICAgICAgICBpbnZlcnRlZDogZmFsc2VcclxuICAgICAgICAvLyAgICAgICAgIH0pO1xyXG4gICAgICAgIC8vICAgICAgICAgLy8gY29udmVydCBpdCBhZ2FpblxyXG4gICAgICAgIC8vICAgICAgICAgdG1wSW50ZXJzZWN0aW9uID0gdG1wSW50ZXJzZWN0aW9uWydyZWdpb25zJ107XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vICAgICAvLyByZXN1bHRcclxuICAgICAgICAvLyAgICAgaGllcmFyY2h5VmVydGljZXMgPSBbdG1wSW50ZXJzZWN0aW9uXTtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgLy8gLy8gdHJhbnNmb3JtIGFuZCBjYWxjdWxhdGUgdGhlIHN5bW1ldHJpYyBkaWZmZXJlbmNlIHBvbHlnb25zIG9mIHRoZSBuIGhpZXJhcmNoaWVzXHJcbiAgICAgICAgLy8gZWxzZSBpZiAoc2V0T3BlcmF0aW9uID09PSAnc3ltLWRpZmZlcmVuY2UnKSB7XHJcbiAgICAgICAgLy8gICAgIC8vIHhvciA9IFVuaW9uIG9mIGFsbCBoaWVyYXJjaGllcyAtIGludGVyc2VjdGlvbiBvZiBhbGwgaGllcmFyY2hpZXNcclxuICAgICAgICAvLyAgICAgLy8gdGVtcCBzb2x1dGlvbiBvZiB0d28gaW50ZXJzZWN0aW9uc1xyXG4gICAgICAgIC8vICAgICBsZXQgdG1wSW50ZXJzZWN0aW9uID0gaGllcmFyY2h5VmVydGljZXNbMF07XHJcbiAgICAgICAgLy8gICAgIC8vIGl0ZXJhdGUgb3ZlciB0aGUgaGllcmFyY2hpZXMgYW5kIGludGVyc2VjdCBhbGwgb2YgdGhlbVxyXG4gICAgICAgIC8vICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGhpZXJhcmNoeVZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgLy8gICAgICAgICAvLyBpbnRlcnNlY3Rpb25cclxuICAgICAgICAvLyAgICAgICAgIHRtcEludGVyc2VjdGlvbiA9IFBvbHlCb29sLmludGVyc2VjdCh7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgcmVnaW9uczogdG1wSW50ZXJzZWN0aW9uLCAvLyBsaXN0IG9mIHJlZ2lvbnNcclxuICAgICAgICAvLyAgICAgICAgICAgICBpbnZlcnRlZDogZmFsc2UgLy8gaXMgdGhpcyBwb2x5Z29uIGludmVydGVkP1xyXG4gICAgICAgIC8vICAgICAgICAgfSwge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIHJlZ2lvbnM6IGhpZXJhcmNoeVZlcnRpY2VzW2ldLFxyXG4gICAgICAgIC8vICAgICAgICAgICAgIGludmVydGVkOiBmYWxzZVxyXG4gICAgICAgIC8vICAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gICAgICAgICAvLyBjb252ZXJ0IGl0IGFnYWluXHJcbiAgICAgICAgLy8gICAgICAgICB0bXBJbnRlcnNlY3Rpb24gPSB0bXBJbnRlcnNlY3Rpb25bJ3JlZ2lvbnMnXTtcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vICAgICAvLyBpbnRlcnNlY3Rpb24gcmVzdWx0XHJcbiAgICAgICAgLy8gICAgIGxldCBpbnRlcnNlY3Rpb25IaWVyYXJjaHlQb2x5Z29ucyA9IHRtcEludGVyc2VjdGlvbjtcclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vICAgICAvLyB1bmlvblxyXG4gICAgICAgIC8vICAgICBsZXQgdG1wVW5pb24gPSBoaWVyYXJjaHlWZXJ0aWNlc1swXTtcclxuICAgICAgICAvLyAgICAgLy8gaXRlcmF0ZSBvdmVyIHRoZSBoaWVyYXJjaGllcyBhbmQgaW50ZXJzZWN0IGFsbCBvZiB0aGVtXHJcbiAgICAgICAgLy8gICAgIGZvciAobGV0IGkgPSAxOyBpIDwgaGllcmFyY2h5VmVydGljZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAvLyAgICAgICAgIC8vIGludGVyc2VjdGlvblxyXG4gICAgICAgIC8vICAgICAgICAgdG1wVW5pb24gPSBQb2x5Qm9vbC51bmlvbih7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgcmVnaW9uczogdG1wVW5pb24sIC8vIGxpc3Qgb2YgcmVnaW9uc1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIGludmVydGVkOiBmYWxzZSAvLyBpcyB0aGlzIHBvbHlnb24gaW52ZXJ0ZWQ/XHJcbiAgICAgICAgLy8gICAgICAgICB9LCB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgcmVnaW9uczogaGllcmFyY2h5VmVydGljZXNbaV0sXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgaW52ZXJ0ZWQ6IGZhbHNlXHJcbiAgICAgICAgLy8gICAgICAgICB9KTtcclxuICAgICAgICAvLyAgICAgICAgIC8vIGNvbnZlcnQgaXQgYWdhaW5cclxuICAgICAgICAvLyAgICAgICAgIHRtcFVuaW9uID0gdG1wVW5pb25bJ3JlZ2lvbnMnXTtcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vICAgICBsZXQgdW5pb25IaWVyYXJjaHlQb2x5Z29ucyA9IHRtcFVuaW9uO1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyAgICAgLy8gc3ltbWV0cmljIGRpZmZlcmVuY2VcclxuICAgICAgICAvLyAgICAgbGV0IHRtcERpZmZlcmVuY2UgPSBQb2x5Qm9vbC54b3Ioe1xyXG4gICAgICAgIC8vICAgICAgICAgcmVnaW9uczogdW5pb25IaWVyYXJjaHlQb2x5Z29ucywgLy8gbGlzdCBvZiByZWdpb25zXHJcbiAgICAgICAgLy8gICAgICAgICBpbnZlcnRlZDogZmFsc2UgLy8gaXMgdGhpcyBwb2x5Z29uIGludmVydGVkP1xyXG4gICAgICAgIC8vICAgICB9LCB7XHJcbiAgICAgICAgLy8gICAgICAgICByZWdpb25zOiBpbnRlcnNlY3Rpb25IaWVyYXJjaHlQb2x5Z29ucyxcclxuICAgICAgICAvLyAgICAgICAgIGludmVydGVkOiBmYWxzZVxyXG4gICAgICAgIC8vICAgICB9KTtcclxuICAgICAgICAvLyAgICAgLy8gY29udmVydCBpdCBhZ2FpblxyXG4gICAgICAgIC8vICAgICB0bXBEaWZmZXJlbmNlID0gdG1wRGlmZmVyZW5jZVsncmVnaW9ucyddO1xyXG4gICAgICAgIC8vICAgICAvLyByZXN1bHRcclxuICAgICAgICAvLyAgICAgaGllcmFyY2h5VmVydGljZXMgPSBbdG1wRGlmZmVyZW5jZV07XHJcbiAgICAgICAgLy8gfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIERBVEEgSm9pblxyXG4gICAgbGV0IGhpZXJhcmNoaWVzID0gc3BhdGlhbFZpZXdcclxuICAgICAgICAuc2VsZWN0QWxsKCdnLmhpZXJhcmNoeS1ncm91cCcpXHJcbiAgICAgICAgLmRhdGEoaGllcmFyY2h5VmVydGljZXMpO1xyXG5cclxuICAgIC8vIEVOVEVSIHRoZSBncm91cHMgLSBhZGRzIGEgc3BlY2lmaWMgaWQgYW5kIGNvbG9yXHJcbiAgICBoaWVyYXJjaGllc1xyXG4gICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgLmFwcGVuZCgnZycpXHJcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgZnVuY3Rpb24oZCwgaSkge1xyXG4gICAgICAgICAgICBpZiAoc2V0T3BlcmF0aW9uID09PSAnaW50ZXJzZWN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdoaWVyYXJjaHktZ3JvdXAgaW50ZXJzZWN0aW9uJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChzZXRPcGVyYXRpb24gPT09ICdzeW0tZGlmZmVyZW5jZScpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnaGllcmFyY2h5LWdyb3VwIHN5bS1kaWZmZXJlbmNlJztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnaGllcmFyY2h5LWdyb3VwIGgnICsgaGllcmFyY2h5SWRzW2ldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuc3R5bGUoJ2ZpbGwnLCBmdW5jdGlvbihkLCBpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBoaWVyYXJjaHlDb2xvcnNbJ2gnICsgaGllcmFyY2h5SWRzW2ldXTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5hdHRyKCdzdHJva2UnLCBmdW5jdGlvbihkLCBpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBoaWVyYXJjaHlDb2xvcnNbJ2gnICsgaGllcmFyY2h5SWRzW2ldXTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5tb3ZlVG9CYWNrKCk7XHJcblxyXG4gICAgLy8gVVBEQVRFIC0gdGhlIGNsYXNzIG5lZWRlZCBmb3IgaW50ZXJzZWN0aW9uIGFuZCBzeW1tZXRyaWMgZGlmZmVyZW5jZVxyXG4gICAgaGllcmFyY2hpZXMuYXR0cignY2xhc3MnLCBmdW5jdGlvbihkLCBpKSB7XHJcbiAgICAgICAgaWYgKHNldE9wZXJhdGlvbiA9PT0gJ2ludGVyc2VjdGlvbicpIHtcclxuICAgICAgICAgICAgcmV0dXJuICdoaWVyYXJjaHktZ3JvdXAgaW50ZXJzZWN0aW9uJztcclxuICAgICAgICB9IGVsc2UgaWYgKHNldE9wZXJhdGlvbiA9PT0gJ3N5bS1kaWZmZXJlbmNlJykge1xyXG4gICAgICAgICAgICByZXR1cm4gJ2hpZXJhcmNoeS1ncm91cCBzeW0tZGlmZmVyZW5jZSc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuICdoaWVyYXJjaHktZ3JvdXAgaCcgKyBoaWVyYXJjaHlJZHNbaV07XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gRVhJVFxyXG4gICAgaGllcmFyY2hpZXMuZXhpdCgpXHJcbiAgICAgICAgLnJlbW92ZSgpO1xyXG5cclxuICAgIC8vIEhpZXJhY2h5IGh1bGxzIGFkZGVkIHRvIHRoZSBzcGF0aWFsIHZpZXcgLSBnZXQgdGhlIHBvaW50cyBmb3IgZWFjaCBhbmltYWwgaW4gdGhlXHJcbiAgICAvLyBzcGF0aWFsIHZpZXcgc28gdGhhdCBhIGNvbnZleCBodWxsIGNhbiBiZSBjYWxjdWxhdGVkXHJcbiAgICBsZXQgaGllcmFyeUh1bGxzID0gaGllcmFyY2hpZXMuc2VsZWN0QWxsKCdwYXRoLmhpZXJhcmNoeS1odWxsLXBhdGgnKVxyXG4gICAgICAgIC5kYXRhKGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgLy8gRU5URVIgYW5kIGNhbGN1bGF0ZSB0aGUgY29udmV4IGh1bGxcclxuICAgIGhpZXJhcnlIdWxsc1xyXG4gICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgLmFwcGVuZCgncGF0aCcpXHJcbiAgICAgICAgLy8gLmF0dHIoJ2lkJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgIC8vICAgICByZXR1cm4gJ2hwJyArIGQuam9pbignJykucmVwbGFjZSgvLC9nLCAnJyk7XHJcbiAgICAgICAgLy8gfSlcclxuICAgICAgICAuYXR0cignY2xhc3MnLCAnaGllcmFyY2h5LWh1bGwtcGF0aCcpXHJcbiAgICAgICAgLmF0dHIoJ2QnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgIC8vIHJldHVybiBkcmF3TGluZShkKTtcclxuICAgICAgICAgICAgcmV0dXJuICdNJyArIGQuam9pbignTCcpICsgJ1onO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIC8vIFVQREFURSB0aGUgY29udmV4IGh1bGxcclxuICAgIGhpZXJhcnlIdWxsc1xyXG4gICAgICAgIC5hdHRyKCdkJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAvLyByZXR1cm4gZHJhd0xpbmUoZCk7XHJcbiAgICAgICAgICAgIHJldHVybiAnTScgKyBkLmpvaW4oJ0wnKSArICdaJztcclxuICAgICAgICB9KTtcclxuICAgIC8vIC5hdHRyKCdpZCcsIGZ1bmN0aW9uKGQpIHtcclxuICAgIC8vIHJldHVybiAnaHAnICsgZC5qb2luKCcnKS5yZXBsYWNlKC8sL2csICcnKTtcclxuICAgIC8vIH0pO1xyXG4gICAgLy8gRVhJVFxyXG4gICAgaGllcmFyeUh1bGxzLmV4aXQoKVxyXG4gICAgICAgIC5yZW1vdmUoKTtcclxuXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBVbmlvbiBtdWx0aXBsZSBwb2x5Z29ucyB0b2dldGhlciAtIG5lZWRlZCBvciBlbHNlIHRoZXJlIHdpbGwgYmUgaG9sZXMgaW4gdGhlIGludGVyc2VjdGlvbnNcclxuICogQHBhcmFtIHthcnJheX0gcG9seWdvbnMgLSBhcnJheSBvZiBhcnJheSBvZiBwb2ludHNcclxuICovXHJcbi8vIGZ1bmN0aW9uIHVuaW9uUG9seWdvbnMocG9seWdvbnMpIHtcclxuLy8gICAgIC8vIGNvbnNvbGUubG9nKHBvbHlnb25zKTtcclxuLy8gICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9seWdvbnMubGVuZ3RoOyBpKyspIHtcclxuLy8gICAgICAgICBwb2x5Z29uc1tpXSA9IHtcclxuLy8gICAgICAgICAgICAgcmVnaW9uczogW3BvbHlnb25zW2ldXSxcclxuLy8gICAgICAgICAgICAgaW52ZXJ0ZWQ6IGZhbHNlIC8vIGlzIHRoaXMgcG9seWdvbiBpbnZlcnRlZD9cclxuLy8gICAgICAgICB9O1xyXG4vLyAgICAgfVxyXG4vLyAgICAgLy8gdW5pb24gYSBsaXN0IG9mIHBvbHlnb25zIHRvZ2V0aGVyXHJcbi8vICAgICBsZXQgc2VnbWVudHMgPSBQb2x5Qm9vbC5zZWdtZW50cyhwb2x5Z29uc1swXSk7XHJcbi8vICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHBvbHlnb25zLmxlbmd0aDsgaSsrKSB7XHJcbi8vICAgICAgICAgbGV0IHNlZzIgPSBQb2x5Qm9vbC5zZWdtZW50cyhwb2x5Z29uc1tpXSk7XHJcbi8vICAgICAgICAgbGV0IGNvbWIgPSBQb2x5Qm9vbC5jb21iaW5lKHNlZ21lbnRzLCBzZWcyKTtcclxuLy8gICAgICAgICBzZWdtZW50cyA9IFBvbHlCb29sLnNlbGVjdFVuaW9uKGNvbWIpO1xyXG4vLyAgICAgfVxyXG4vLyAgICAgcmV0dXJuIFBvbHlCb29sLnBvbHlnb24oc2VnbWVudHMpWydyZWdpb25zJ107XHJcbi8vIH1cclxuXHJcbi8qKlxyXG4gKiBFZGdlIGRyYXdpbmcgbWV0aG9kIG9mIHRoZSBkZW5kcm9ncmFtXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSBkIC0gVHJlZW1hcCBlbGVtZW50XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZGlhZ29uYWxMaW5lcyhkKSB7XHJcbiAgICByZXR1cm4gJ00nICsgZC54ICsgJywnICsgZC55ICtcclxuICAgICAgICAnVicgKyBkLnBhcmVudC55ICsgJ0gnICsgZC5wYXJlbnQueDtcclxufVxyXG5cclxuLyoqXHJcbiAqIE9uIGNsaWNrIGZ1bmN0aW9uIC0gaGlnaGxpZ2h0IHRoZSBlbGVtZW50cyBpbiB0aGUgc3BhdGlhbCB2aWV3XHJcbiAqIEBwYXJhbSB7b2JqZWN0fSBkIC0gVHJlZW1hcCBlbGVtZW50XHJcbiAqL1xyXG5mdW5jdGlvbiBjbGljayhkKSB7XHJcbiAgICBzZXRBY3RpdmVBbmltYWxzKGRbJ2RhdGEnXVsnbmFtZSddKTtcclxuICAgIC8vIGlmIG5vIGFuaW1hdGlvbiBpcyBhY3RpdmUgZHJhdyB0aGUgZHJhdyBvbmUgc3RlcFxyXG4gICAgaWYgKCEkKCcjcGxheS1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICBkZWNJbmRleFRpbWUoKTtcclxuICAgICAgICBkcmF3KCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgYWxsIHRoZSBjbHVzdGVyaW5nIG9mIGEgc3BlY2lmaWMgbGV2ZWwgaW4gdGhlIGRlbmRyb2dyYW0gdHJlZVxyXG4gKiBGb3IgaW5zdGFuY2UgYWxsIGNsdXN0ZXJzIGZyb20gbGV2ZWwgNVxyXG4gKiBAcGFyYW0ge29iamVjdH0gcm9vdCAtIFJvb3Qgb2YgdGhlIHRyZWVtYXBcclxuICogQHBhcmFtIHtudW1iZXJ9IGhpZWFyY2h5IC0gTnVtYmVyIG9mIGhpZXJhcmNoeSBmcm9tIFswLTNdXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0SGllcmFyY2h5TGV2ZWwocm9vdCwgaGllcmFyY2h5KSB7XHJcbiAgICBsZXQgcmVzdWx0ID0gW107XHJcbiAgICBsZXQgbGV2ZWwgPSBoaWVyYXJjaHlMZXZlbHNbJ2gnICsgaGllcmFyY2h5XTtcclxuXHJcbiAgICAvLyBzZWNvbmQgbGV2ZWwgb2YgdGhlIGFycmF5XHJcbiAgICBsZXQgdG1wX25vZGVzID0gcm9vdFsnY2hpbGRyZW4nXTtcclxuICAgIC8vIGl0ZXJhdGUgdGhyb3VnaCB0aGUgdHJlZVxyXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCByb290WydoZWlnaHQnXTsgaSsrKSB7XHJcbiAgICAgICAgLy8gY2hlY2sgaWYgd2UgYXJlIGF0IHRoZSBzZWFyY2hlZCBsZXZlbFxyXG4gICAgICAgIGlmICh0bXBfbm9kZXNbMF0gJiYgdG1wX25vZGVzWzBdWydkZXB0aCddID09PSBsZXZlbCkge1xyXG4gICAgICAgICAgICAvLyBhZGQgZWFjaCBjbHVzdGVyIHRvIHRoZSByZXN1bHQgc2V0XHJcbiAgICAgICAgICAgIHRtcF9ub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uKG5vZGUpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygbm9kZVsnZGF0YSddWyduYW1lJ10gIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobm9kZVsnZGF0YSddWyduYW1lJ10pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGdldCBhbGwgY2hpbGRyZW4gb2YgYSBzcGVjaWZpYyBsZXZlbCBpbiB0aGUgdHJlZVxyXG4gICAgICAgIGxldCB0bXAgPSBbXTtcclxuICAgICAgICB0bXBfbm9kZXMuZm9yRWFjaChmdW5jdGlvbihub2RlKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygbm9kZVsnY2hpbGRyZW4nXSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgIHRtcCA9IHRtcC5jb25jYXQobm9kZVsnY2hpbGRyZW4nXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0bXBfbm9kZXMgPSB0bXA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG4vKipcclxuICogUmV0dXJuIHRoZSBzcGVjaWZpYyB2ZXJ0aWNlcyBvZiBhIGNsdXN0ZXJpbmcgaW4gdGhlIHNwYXRpYWwgdmlld1xyXG4gKiBSZXR1cm4gYW4gYXJyYXkgb2YgcG9pbnRzIFtbeCx5XVt4LHldLi4uXVxyXG4gKiBAcGFyYW0ge0FycmF5fSBoaWVyYXJjaGllcyAtIEFycmF5IG9mIGFycmF5cyB3aXRoIGVhY2ggYXJyYXkgY29udGFpbnMgYWxsIHRoZSBpZHMgZm9yIGEgc3BlY2lmaWMgY2x1c3RlcmluZ1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEhpZXJhcmNoeVZlcnRpY2VzKGhpZXJhcmNoaWVzKSB7XHJcbiAgICBsZXQgcmVzdWx0ID0gW107IC8vIHJlc3VsdCBzZXRcclxuICAgIGhpZXJhcmNoaWVzLmZvckVhY2goZnVuY3Rpb24oY2x1c3Rlcikge1xyXG4gICAgICAgIGxldCB2ZXJ0aWNlcyA9IFtdOyAvLyB2ZXJ0aWNlcyBvZiB0aGUgY2x1c3RlcnMgaW4gdGhlIHNwYXRpYWwgdmlld1xyXG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgY2x1c3Rlci5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICBsZXQgZ3JvdXBNZW1iZXIgPSBhcnJheUFuaW1hbHMuZmluZChkID0+IGRbJ2EnXSA9PT0gY2x1c3RlcltqXSk7XHJcbiAgICAgICAgICAgIGlmIChncm91cE1lbWJlcikge1xyXG4gICAgICAgICAgICAgICAgdmVydGljZXMucHVzaChbZ3JvdXBNZW1iZXJbJ3AnXVswXSwgLWdyb3VwTWVtYmVyWydwJ11bMV1dKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBBbmRyZXcgbW9udG9uZSBjaGFpbiBhbGdvcml0aG0gcmV1dHJucyBmb3IgcG9pbnRzIGZld2VyIHRoYW4gMyBudWxsXHJcbiAgICAgICAgaWYgKHZlcnRpY2VzLmxlbmd0aCA+PSAzKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGQzLnBvbHlnb25IdWxsKHZlcnRpY2VzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IHRoZSBhY3RpdmUgbGV2ZWwgZm9yIGEgc3BlY2lmaWMgZGVuZHJvZ3JhbVxyXG4gKiBAcGFyYW0ge251bWJlcn0gaGllcmFyY2h5IC0gSGllcmFyY2h5IGNhbiBiZSBmcm9tIFswLTNdXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBsZXZlbCAtIE5ldyBhY3RpdmUgbGV2ZWxcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRIaWVyYXJjaHlMZXZlbChoaWVyYXJjaHksIGxldmVsKSB7XHJcbiAgICAvLyBUT0RPIGNhdGNoIGNhc2VzIDwgMCBhbmQgYmlnZ2VyIHRoYW4gb3ZlcmFsbCBoZWlnaHRcclxuICAgIGhpZXJhcmNoeUxldmVsc1snaCcgKyBoaWVyYXJjaHldID0gbGV2ZWw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZW1vdmUgdGhlIGVudHJ5IGZvciB0aGUgaGllcmFyY2ggbGV2ZWxcclxuICogQHBhcmFtIHtudW1iZXJ9IGhpZXJhcmNoeSAtIEhpZXJhcmNoeVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUhpZXJhcmNoeUxldmVsKGhpZXJhcmNoeSkge1xyXG4gICAgLy8gVE9ETyBjYXRjaCBjYXNlcyA8IDAgYW5kIGJpZ2dlciB0aGFuIG92ZXJhbGwgaGVpZ2h0XHJcbiAgICBkZWxldGUgaGllcmFyY2h5TGV2ZWxzWydoJyArIGhpZXJhcmNoeV07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXQgdGhlIGFjdGl2ZSBjb2xvciBmb3IgYSBzcGVjaWZpYyBkZW5kcm9ncmFtXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBoaWVyYXJjaHkgLSBIaWVyYXJjaHkgY2FuIGJlIGZyb20gWzAtM11cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRIaWVyYXJjaHlDb2xvcihoaWVyYXJjaHkpIHtcclxuICAgIC8vIGNoZWNrIGlmIHRoZSBoaWVyYXJjaHkgaXMgYWxyZWFkeSBzaG93biBhcyBuZXR3b3JrXHJcbiAgICAvLyB0YWtlIHRoZSBzYW1lIGNvbG9yXHJcbiAgICBmb3IgKGxldCBrZXkgaW4gbmV0d29ya0NvbG9yKSB7XHJcbiAgICAgICAgaWYgKGtleSA9PT0gKCdoJyArIGhpZXJhcmNoeSkpIHtcclxuICAgICAgICAgICAgaGllcmFyY2h5Q29sb3JzWydoJyArIGhpZXJhcmNoeV0gPSBuZXR3b3JrQ29sb3Jba2V5XTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIGhpZXJhcmNoeSBpcyBub3QgdmlzdWFsaXplZCBhbHJlYWR5IGFzIGEgbmV0d29ya1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2xvcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBsZXQgdG1wX2Jvb2xlYW4gPSB0cnVlO1xyXG4gICAgICAgIGZvciAobGV0IGtleSBpbiBoaWVyYXJjaHlDb2xvcnMpIHtcclxuICAgICAgICAgICAgaWYgKGhpZXJhcmNoeUNvbG9ycy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaGllcmFyY2h5Q29sb3JzW2tleV0gPT09IGNvbG9yc1tpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRtcF9ib29sZWFuID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRtcF9ib29sZWFuKSB7XHJcbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIGEgbmV0d29yayBpcyBkZXBpY3RlZFxyXG4gICAgICAgICAgICAvLyBpZiBzbyBza2lwIHRoZSBjb2xvciB3aGljaCBpcyBhbHJlYWR5IGNob29zZW4gZm9yIHRoZSBuZXR3b3JrXHJcbiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhuZXR3b3JrQ29sb3IpLmxlbmd0aCAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIG5ldHdvcmtDb2xvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXR3b3JrQ29sb3Jba2V5XSAhPT0gY29sb3JzW2ldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZXJhcmNoeUNvbG9yc1snaCcgKyBoaWVyYXJjaHldID0gY29sb3JzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaGllcmFyY2h5Q29sb3JzWydoJyArIGhpZXJhcmNoeV0gPSBjb2xvcnNbaV07XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogUmVtb3ZlIHRoZSBjb2xvciBmb3IgdGhlIGhpZXJhcmNoIGxldmVsXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBoaWVyYXJjaHkgLSBIaWVyYXJjaHlcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVIaWVyYXJjaHlDb2xvcihoaWVyYXJjaHkpIHtcclxuICAgIGRlbGV0ZSBoaWVyYXJjaHlDb2xvcnNbJ2gnICsgaGllcmFyY2h5XTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEFkZCB0aGUgaGllcmFyY2h5IGJ1dHRvbiB0byB0aGUgZGl2XHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBpZCAtIEhpZXJhcmNoeSBvZiB0aGUgaWRcclxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgLSBOZXcgYWN0aXZlIGxldmVsXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gYWRkSGllcmFyY2h5QnV0dG9uKGlkLCBuYW1lKSB7XHJcbiAgICBpZiAoJCgnLnNob3ctZGVuZHJvZ3JhbScpLmxlbmd0aCA8IG1heE51bWJlckhpZXJhcmNoaWVzKSB7XHJcbiAgICAgICAgJCgnI2RlbmRyb2dyYW0tYnV0dG9ucy1kaXYnKS5hcHBlbmQoJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGlkPVwic2hvdy1kZW5kcm9ncmFtLScgKyBpZCArICdcIiBkYXRhPScgKyBpZCArICcgbmFtZT0nICsgbmFtZSArXHJcbiAgICAgICAgICAgICcgY2xhc3M9XCJzaG93LWRlbmRyb2dyYW0gYnRuIGJ0bi1ibG9ja1wiIGRhdGEtdG9nZ2xlPVwiYnV0dG9uXCIgYXJpYS1wcmVzc2VkPVwiZmFsc2VcIiBhdXRvY29tcGxldGU9XCJvZmZcIj4nICtcclxuICAgICAgICAgICAgJyA8c3BhbiBjbGFzcz1cImJ0bi1sYWJlbFwiIGlkPVwiYnRuLWxlZnRcIj4gPGkgY2xhc3M9XCJtZGkgbWRpLWFycm93LWNvbGxhcHNlLWxlZnRcIj48L2k+Jm5ic3AmbmJzcCBTaG93ICcgKyBuYW1lICsgJzwvc3Bhbj4nICtcclxuICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwiYnRuLWxhYmVsXCIgaWQ9XCJidG4tcmlnaHRcIj4gPGkgY2xhc3M9XCJtZGkgbWRpLWFycm93LWNvbGxhcHNlLXJpZ2h0XCI+PC9pPiZuYnNwJm5ic3AgSGlkZSAnICsgbmFtZSArICcgPC9zcGFuPjwvYnV0dG9uPiA8YnI+J1xyXG4gICAgICAgICk7XHJcbiAgICAgICAgJCgnI3Nob3ctZGVuZHJvZ3JhbS0nICsgaWQpLmZpbmQoJyNidG4tcmlnaHQnKS5oaWRlKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZW1vdmUgYSBzcGVjaWZpYyBoaWVyYXJjaHkgYnV0dG9uIHRvIHRoZSBkaXZcclxuICogQHBhcmFtIHtudW1iZXJ9IGlkIC0gSGllcmFyY2h5IG9mIHRoZSBpZFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUhpZXJhcmNoeUJ1dHRvbihpZCkge1xyXG4gICAgLy8gcmVtb3ZlIHRoZSBmb2xsb3dpbmcgbGluZSBicmVhayBhbmQgZWxlbWVudFxyXG4gICAgJCgnI3Nob3ctZGVuZHJvZ3JhbS0nICsgaWQpLm5leHQoKS5yZW1vdmUoKTtcclxuICAgICQoJyNzaG93LWRlbmRyb2dyYW0tJyArIGlkKS5yZW1vdmUoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZSBzbGlkZXIgYW5kIHRleHQgaW4gdGhlIGRlbmRyb2dyYW0gcGFuZWxcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVEZW5kcm9ncmFtKCkge1xyXG4gICAgLy8gZ2V0IHRoZSBpbXBvcnRhbnQgaW5mb1xyXG4gICAgbGV0IGlkID0gJCgnLnNob3ctZGVuZHJvZ3JhbS5idG4tcHJpbWFyeScpLmF0dHIoJ2RhdGEnKTtcclxuICAgIGxldCBuYW1lID0gJCgnLnNob3ctZGVuZHJvZ3JhbS5idG4tcHJpbWFyeScpLmF0dHIoJ25hbWUnKTtcclxuICAgIC8vIHNldCB0aGUgbmFtZSBvZiB0aGUgZGlzcGxheWVkIGhpZXJhcmNoeVxyXG4gICAgJCgnI2RlbmRyb2dyYW0tcGFuZWwtbmFtZScpLnRleHQobmFtZSk7XHJcblxyXG4gICAgLy8gc2V0IHNsaWRlciBhbmQgIHRleHQgdmFsdWVcclxuICAgICQoJyNkZW5kcm9ncmFtLXBhbmVsLWxldmVsLXNsaWRlcicpLnZhbChoaWVyYXJjaHlMZXZlbHNbJ2gnICsgaWRdKTtcclxuICAgICQoJyNkZW5kcm9ncmFtLXBhbmVsLWxldmVsLXRleHQnKS50ZXh0KGhpZXJhcmNoeUxldmVsc1snaCcgKyBpZF0pO1xyXG5cclxufVxyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZSBoaWVyYXJjaHkgbGVnZW5kXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY2hhbmdlSGllcmFyY2h5TGVnZW5kKCkge1xyXG4gICAgbGV0IGxlZ2VuZDsgLy8gdGhlIGNvbG9yIGxlZ2VuZFxyXG4gICAgbGV0IGxlZ2VuZFRleHQ7IC8vIGNvbG9yIGxlZ2VuZCB0ZXh0XHJcbiAgICAvLyB2YXJzIGZvciB0aGUgbGVnZW5kXHJcbiAgICBsZXQgbGVnZW5kU3dhdGNoV2lkdGggPSA1MDtcclxuICAgIGxldCBsZWdlbmRTd2F0Y2hIZWlnaHQgPSAyMDtcclxuXHJcbiAgICAvLyBTaG93IG9yIGhpZGUgdGhlIHN2ZyBlbGVtZW50XHJcbiAgICBpZiAoT2JqZWN0LmtleXMoaGllcmFyY2h5Q29sb3JzKS5sZW5ndGggIT09IDAgfHwgT2JqZWN0LmtleXMobmV0d29ya0NvbG9yKS5sZW5ndGggIT09IDApIHtcclxuICAgICAgICAkKCcjaGllcmFyY2h5LWxlZ2VuZC1kaXYnKS5zaG93KCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgICQoJyNoaWVyYXJjaHktbGVnZW5kLWRpdicpLmhpZGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgbGVnZW5kRGF0YSA9IFtdO1xyXG4gICAgbGV0IGxlZ2VuZFRleHREYXRhID0gW107XHJcbiAgICAvLyBnZXQgdGhlIHJlcXVpcmVkIGRhdGFcclxuICAgICQoJy5zaG93LWRlbmRyb2dyYW0nKS5lYWNoKGZ1bmN0aW9uKGksIG9iaikge1xyXG4gICAgICAgIC8vIGNoZWNrIGlmIGRhdGEgaXMgbm90IHVuZGVmaW5lZFxyXG4gICAgICAgIGlmIChoaWVyYXJjaHlDb2xvcnNbJ2gnICsgJChvYmopLmF0dHIoJ2RhdGEnKV0gIT0gbnVsbCAmJiAkKG9iaikuYXR0cignbmFtZScpICE9IG51bGwpIHtcclxuICAgICAgICAgICAgbGVnZW5kRGF0YS5wdXNoKGhpZXJhcmNoeUNvbG9yc1snaCcgKyAkKG9iaikuYXR0cignZGF0YScpXSk7XHJcbiAgICAgICAgICAgIGxlZ2VuZFRleHREYXRhLnB1c2goJChvYmopLmF0dHIoJ25hbWUnKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAvLyBhZGQgdGhlIG5ldHdvcmsgY29sb3JcclxuICAgIGlmIChPYmplY3Qua2V5cyhuZXR3b3JrQ29sb3IpLmxlbmd0aCAhPT0gMCkge1xyXG4gICAgICAgIGZvciAobGV0IGtleSBpbiBuZXR3b3JrQ29sb3IpIHtcclxuICAgICAgICAgICAgaWYgKGxlZ2VuZERhdGEuaW5kZXhPZihuZXR3b3JrQ29sb3Jba2V5XSkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBsZWdlbmREYXRhLnB1c2gobmV0d29ya0NvbG9yW2tleV0pO1xyXG4gICAgICAgICAgICAgICAgbGVnZW5kVGV4dERhdGEucHVzaCgnTmV0d29yaycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gREFUQSBKT0lOXHJcbiAgICBsZWdlbmQgPSBzdmdMZWdlbmQuc2VsZWN0QWxsKCdyZWN0LmxlZ2VuZCcpXHJcbiAgICAgICAgLmRhdGEobGVnZW5kRGF0YSk7XHJcbiAgICBsZWdlbmRUZXh0ID0gc3ZnTGVnZW5kLnNlbGVjdEFsbCgndGV4dC5sZWdlbmQtdGV4dCcpXHJcbiAgICAgICAgLmRhdGEobGVnZW5kVGV4dERhdGEpO1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLSBMZWdlbmQgc3dhdGNoZXMgIC0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIFVQREFURSAtIGxlZ2VuZFxyXG4gICAgbGVnZW5kLnN0eWxlKCdmaWxsJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgIHJldHVybiBkO1xyXG4gICAgfSk7XHJcbiAgICAvLyBFTlRFUiAtIGxlZ2VuZFxyXG4gICAgbGVnZW5kXHJcbiAgICAgICAgLmVudGVyKClcclxuICAgICAgICAuYXBwZW5kKCdyZWN0JylcclxuICAgICAgICAuYXR0cignY2xhc3MnLCAnbGVnZW5kJylcclxuICAgICAgICAuYXR0cignd2lkdGgnLCBsZWdlbmRTd2F0Y2hXaWR0aClcclxuICAgICAgICAuYXR0cignaGVpZ2h0JywgbGVnZW5kU3dhdGNoSGVpZ2h0KVxyXG4gICAgICAgIC5hdHRyKCd5JywgMClcclxuICAgICAgICAuYXR0cigneCcsIGZ1bmN0aW9uKGQsIGkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChsZWdlbmRTd2F0Y2hXaWR0aCArIDIuNSAqIGkgKiBsZWdlbmRTd2F0Y2hXaWR0aCkgKyAncHgnO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnN0eWxlKCdmaWxsJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgICB9KTtcclxuICAgIC8vIEVYSVQgLSBsZWdlbmRcclxuICAgIGxlZ2VuZC5leGl0KClcclxuICAgICAgICAucmVtb3ZlKCk7XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tIFRleHQgIC0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIFVQREFURSAtIGxlZ2VuZCB0ZXh0XHJcbiAgICBsZWdlbmRUZXh0LnRleHQoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgIHJldHVybiBkO1xyXG4gICAgfSk7XHJcbiAgICAvLyBFTlRFUiAtIGxlZ2VuZCB0ZXh0XHJcbiAgICBsZWdlbmRUZXh0XHJcbiAgICAgICAgLmVudGVyKClcclxuICAgICAgICAuYXBwZW5kKCd0ZXh0JylcclxuICAgICAgICAuYXR0cignY2xhc3MnLCAnbGVnZW5kLXRleHQnKVxyXG4gICAgICAgIC5hdHRyKCd5JywgMiAqIGxlZ2VuZFN3YXRjaEhlaWdodClcclxuICAgICAgICAuYXR0cigneCcsIGZ1bmN0aW9uKGQsIGkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChsZWdlbmRTd2F0Y2hXaWR0aCArIDIuNSAqIGkgKiBsZWdlbmRTd2F0Y2hXaWR0aCkgKyAncHgnO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRleHQoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAvLyBFWElUIC0gbGVnZW5kIHRleHRcclxuICAgIGxlZ2VuZFRleHQuZXhpdCgpXHJcbiAgICAgICAgLnJlbW92ZSgpO1xyXG5cclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBJbml0aWFsaXplIHRoZSBkZW5kcm9ncmFtIGxlZ2VuZFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGluaXREZW5kcm9ncmFtTGVnZW5kKCkge1xyXG4gICAgbGV0IGxlZ2VuZFdpZHRoID0gNTUwO1xyXG4gICAgbGV0IGxlZ2VuZEhlaWdodCA9IDYwO1xyXG5cclxuICAgIGxldCBkZW5kcm9ncmFtTGVnZW5kID0gZDMuc2VsZWN0KCcjZGVuZHJvZ3JhbS1wYW5lbCcpXHJcbiAgICAgICAgLmFwcGVuZCgnc3ZnJylcclxuICAgICAgICAuYXR0cignaWQnLCAnZGVuZHJvZ3JhbS1sZWdlbmQnKVxyXG4gICAgICAgIC5hdHRyKCd3aWR0aCcsIGxlZ2VuZFdpZHRoKVxyXG4gICAgICAgIC5hdHRyKCdoZWlnaHQnLCBsZWdlbmRIZWlnaHQpO1xyXG5cclxuICAgICQoJyNkZW5kcm9ncmFtLWxlZ2VuZCcpLmhpZGUoKTtcclxuXHJcbiAgICBsZXQgbGVnZW5kOyAvLyB0aGUgY29sb3IgbGVnZW5kXHJcbiAgICBsZXQgbGVnZW5kVGV4dDsgLy8gY29sb3IgbGVnZW5kIHRleHRcclxuICAgIC8vIHZhcnMgZm9yIHRoZSBsZWdlbmRcclxuICAgIGxldCBsZWdlbmRTd2F0Y2hXaWR0aCA9IDUwO1xyXG4gICAgbGV0IGxlZ2VuZFN3YXRjaEhlaWdodCA9IDIwO1xyXG5cclxuICAgIGxldCBsZWdlbmREYXRhID0gc3RhbmRhcmREZXZpYXRpb25Db2xvclNjYWxlLnJhbmdlKCk7XHJcbiAgICAvL1RPRE8gY2hhbmdlIHRoaXMgdG8gYmV0dGVyIHNvbHV0aW9uXHJcbiAgICBsZXQgbGVnZW5kVGV4dERhdGEgPSBbJ2xvdycsICcnLCAnJywgJycsICcnLCAnJywgJycsICcnLCAnaGlnaCddO1xyXG5cclxuICAgIGxlZ2VuZCA9IGRlbmRyb2dyYW1MZWdlbmQuc2VsZWN0QWxsKCdyZWN0LmxlZ2VuZCcpXHJcbiAgICAgICAgLmRhdGEobGVnZW5kRGF0YSk7XHJcbiAgICBsZWdlbmRUZXh0ID0gZGVuZHJvZ3JhbUxlZ2VuZC5zZWxlY3RBbGwoJ3RleHQubGVnZW5kLXRleHQnKVxyXG4gICAgICAgIC5kYXRhKGxlZ2VuZFRleHREYXRhKTtcclxuXHJcbiAgICAvLyBFTlRFUiAtIGxlZ2VuZFxyXG4gICAgbGVnZW5kXHJcbiAgICAgICAgLmVudGVyKClcclxuICAgICAgICAuYXBwZW5kKCdyZWN0JylcclxuICAgICAgICAuYXR0cignY2xhc3MnLCAnbGVnZW5kJylcclxuICAgICAgICAuYXR0cignd2lkdGgnLCBsZWdlbmRTd2F0Y2hXaWR0aClcclxuICAgICAgICAuYXR0cignaGVpZ2h0JywgbGVnZW5kU3dhdGNoSGVpZ2h0KVxyXG4gICAgICAgIC5hdHRyKCd5JywgMClcclxuICAgICAgICAuYXR0cigneCcsIGZ1bmN0aW9uKGQsIGkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChpICogbGVnZW5kU3dhdGNoV2lkdGgpICsgJ3B4JztcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5zdHlsZSgnZmlsbCcsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tIFRleHQgIC0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIEVOVEVSIC0gbGVnZW5kIHRleHRcclxuICAgIGxlZ2VuZFRleHRcclxuICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgIC5hcHBlbmQoJ3RleHQnKVxyXG4gICAgICAgIC5hdHRyKCdjbGFzcycsICdsZWdlbmQtdGV4dCcpXHJcbiAgICAgICAgLmF0dHIoJ3knLCAyICogbGVnZW5kU3dhdGNoSGVpZ2h0KVxyXG4gICAgICAgIC5hdHRyKCd4JywgZnVuY3Rpb24oZCwgaSkge1xyXG4gICAgICAgICAgICByZXR1cm4gKGkgKiBsZWdlbmRTd2F0Y2hXaWR0aCkgKyAncHgnO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRleHQoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldCB0aGUgc2V0IG9wZXJhdGlvblxyXG4gKiBAcGFyYW0ge3N0cmluZ30gb3BlcmF0aW9uIC0gZS5nLiBcInVuaW9uXCIgXCJpbnRlcnNlY3Rpb25cIiBcInN5bS1kaWZmZXJlbmNlXCJcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRTZXRPcGVyYXRpb24odmFsdWUpIHtcclxuICAgIHNldE9wZXJhdGlvbiA9IHZhbHVlO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IHRoZSBoaWVyYXJjaHkgZ3JvdXAgc3RhbmRhcmQgZGV2aWF0aW9uXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXkgLSB1bmlxdWUgaGFzaCBpZCBmb3IgdGhlIGdyb3VwXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSAtIHVuaXF1ZSBoYXNoIGlkIGZvciB0aGUgZ3JvdXBcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRoaWVyYXJjaHlHcm91cFN0ZGV2KGtleSwgdmFsdWUpIHtcclxuICAgIGlmIChrZXkgaW4gaGllcmFyY2h5R3JvdXBTdGRldikge1xyXG4gICAgICAgIGhpZXJhcmNoeUdyb3VwU3RkZXZba2V5XS5wdXNoKHZhbHVlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaGllcmFyY2h5R3JvdXBTdGRldltrZXldID0gW3ZhbHVlXTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFJlc2V0IGhpZXJhcmNoeSBncm91cCBzdGFuZGFyZCBkZXZpYXRpb25cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiByZXNldGhpZXJhcmNoeUdyb3VwU3RkZXYoKSB7XHJcbiAgICBoaWVyYXJjaHlHcm91cFN0ZGV2ID0ge307XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBIaWdobGlnaHQgYSBzdWJzZXQgb2YgYW5pbWFscyBpbiB0aGUgc3BhdGlhbCB2aWV3XHJcbiAqIEBwYXJhbSB7YXJyYXl9IGFuaW1hbHMgLSBhcnJheSBvZiBhbmltYWwgaWRzIHdoaWNoIGhhdmUgdG8gYmUgaGlnaGxpZ2h0ZWRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRIaWdobGlnaHRTcGF0aWFsVmlldyhhbmltYWxzKSB7XHJcbiAgICAvLyBwb2ludHMgdG8gY2FsY3VsYXRlIHRoZSBjb252ZXggaHVsbCBvZiB0aGUgaGlnaGxpZ2h0IGNsdXN0ZXJcclxuICAgIGxldCB2ZXJ0aWNlcyA9IFtdO1xyXG4gICAgLy8gaXRlcmF0ZSB0aHJvdWdoIHRoZSBvYmplY3RzIGluIHRoZSBjbHVzdGVyXHJcbiAgICAvLyBnZXQgdGhlIHBvaW50cyBhbmQgaGlnaGxpZ2h0IHRoZSBhbmltYWxzXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFuaW1hbHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBsZXQgdG1wQW5pbWFsID0gc3BhdGlhbFZpZXcuc2VsZWN0KCcjYW5pbWFsLScgKyBhbmltYWxzW2ldKTtcclxuICAgICAgICBsZXQgcG9pbnQgPSB0bXBBbmltYWwuZGF0YSgpWzBdWydwJ107XHJcbiAgICAgICAgdmVydGljZXMucHVzaChbcG9pbnRbMF0sIC1wb2ludFsxXV0pO1xyXG5cclxuICAgICAgICB0bXBBbmltYWwuY2xhc3NlZCgnYW5pbWFsLWhpZ2hsaWdodCcsIHRydWUpO1xyXG4gICAgfVxyXG4gICAgLy8gYWRkIGEgcG9seWdvbiBodWxsIGluIHRoZSBzcGF0aWFsIHZpZXdcclxuICAgIHNwYXRpYWxWaWV3LmFwcGVuZCgncGF0aCcpXHJcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2hpZ2hsaWdodC1oaWVyYXJjaHknKVxyXG4gICAgICAgIC5hdHRyKCdkJywgKCdNJyArIGQzLnBvbHlnb25IdWxsKHZlcnRpY2VzKS5qb2luKCdMJykgKyAnWicpKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlbW92ZSB0aGUgaGlnaGxpZ2h0IGluIHRoZSBzcGF0aWFsIHZpZXdcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVIaWdobGlnaHRTcGF0aWFsVmlldygpIHtcclxuICAgIC8vIHJlbW92ZSB0aGUgY29sb3JpbmcgYW5kIHRoZSBoaWVyYXJjaHkgaGlnaGxpZ2h0IGh1bGxcclxuICAgIGQzLnNlbGVjdEFsbCgnLmFuaW1hbCcpLmNsYXNzZWQoJ2FuaW1hbC1oaWdobGlnaHQnLCBmYWxzZSk7XHJcbiAgICBkMy5zZWxlY3RBbGwoJy5oaWdobGlnaHQtaGllcmFyY2h5JykucmVtb3ZlKCk7XHJcbn1cclxuIiwiLyplc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtbGV0cyovXHJcbi8qZ2xvYmFsIHdpbmRvdywgJCwgcGFyYW1ldGVycyAqL1xyXG5cclxubGV0IEpTT05BUElfTUlNRVRZUEUgPSAnYXBwbGljYXRpb24vdm5kLmFwaStqc29uJztcclxudmFyIHNvdXJjZTtcclxuXHJcbmltcG9ydCB7XHJcbiAgICBhZGRUb0RhdGFzZXQsXHJcbiAgICBzZXREYXRhU2V0UGVyY2VudGlsZSxcclxuICAgIHNldFN3YXJtRGF0YSxcclxuICAgIHNldE1ldGFEYXRhLFxyXG4gICAgc2V0RGF0YXNldEZlYXR1cmUsXHJcbiAgICBzZXROZXR3b3JrRGF0YSxcclxuICAgIHNldEhpZXJhcmNoeURhdGEsXHJcbiAgICBzZXRBbmltYWxJZHNcclxufSBmcm9tICcuL2V4cGxvcmUuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGFkZE5ldHdvcmtCdXR0b25zLFxyXG4gICAgc2V0TmV0d29ya0lEXHJcbn0gZnJvbSAnLi9uZXR3b3JrLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBlbmFibGVQbGF5QnV0dG9uLFxyXG4gICAgZGlzYWJsZVBsYXlCdXR0b24sXHJcbiAgICBhZGRBYnNvbHV0ZUZlYXR1cmVCdXR0b25zXHJcbn0gZnJvbSAnLi9oZWxwZXJzLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBTcGF0aWFsVmlld1xyXG59IGZyb20gJy4vc3BhdGlhbF92aWV3L3NwYXRpYWxfdmlldy5qcyc7XHJcblxyXG4vLyBpbXBvcnQge1xyXG4vLyAgICAgcmVzcG9uc2VQYXJhbWV0ZXJzXHJcbi8vIH0gZnJvbSAnLi92aXN1YWxfcGFyYW1ldGVyLmpzJztcclxuXHJcblxyXG4vKipcclxuICogU3RyZWFtIHRoZSBtb3ZlbWVudCBkYXRhIGZyb20gdGhlIEFQSVxyXG4gKiBMb2FkcyBvbmx5IHRoZSBleHBsaWNpdCBtb3ZlbWVudCBkYXRhXHJcbiAqL1xyXG4vL2NvbnNvbGUubG9nKGRhdGEpO1xyXG5leHBvcnQgZnVuY3Rpb24gc3RyZWFtTW92ZW1lbnREYXRhKCkge1xyXG4gICAgaWYgKHdpbmRvdy5FdmVudFNvdXJjZSkge1xyXG4gICAgICAgIHNvdXJjZSA9IG5ldyBFdmVudFNvdXJjZSgnL2FwaS9tb3ZlbWVudF9vbmx5LycgKyBwYXJhbWV0ZXJzWydpZCddKTtcclxuICAgICAgICBzb3VyY2Uub25tZXNzYWdlID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICBpZiAoZS5kYXRhID09PSAnY2xvc2UnKSB7XHJcbiAgICAgICAgICAgICAgICBzb3VyY2UuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIC8vIGlmIGFsbCBhamF4IHF1ZXJpZXMgYXJlIGNvbXBlbHRlIGluaXRpYWxpemVcclxuICAgICAgICAgICAgICAgIChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBjaGVja1BlbmRpbmdSZXF1ZXN0KCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJC5hY3RpdmUgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChjaGVja1BlbmRpbmdSZXF1ZXN0LCAxMDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2aWV3ID0gbmV3IFNwYXRpYWxWaWV3KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoY2hlY2tQZW5kaW5nUmVxdWVzdCwgMTAwKTtcclxuICAgICAgICAgICAgICAgIH0pKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhZGRUb0RhdGFzZXQoSlNPTi5wYXJzZShlLmRhdGEpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHNvdXJjZS5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgaWYgKGUucmVhZHlTdGF0ZSA9PSBFdmVudFNvdXJjZS5DTE9TRUQpIHtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KCdTdHJlYW1pbmcgZXJyb3InKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIGZhbHNlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYWxlcnQoJ1dlYmJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBzdHJlYW1pbmcnKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCB0aGUgcGVyY2VudGlsZSBkYXRhIGZyb20gdGhlIGFwaSBleHBvcnQgdG8gZXhwbG9yZS5qc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFBlcmNlbnRpbGUoKSB7XHJcbiAgICBsZXQgZGF0YVNldFBlcmNlbnRpbGUgPSBbXTtcclxuICAgICQuYWpheCh7XHJcbiAgICAgICAgdXJsOiAnL2FwaS9wZXJjZW50aWxlLycgKyBwYXJhbWV0ZXJzWydpZCddLFxyXG4gICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgdHlwZTogJ0dFVCcsXHJcbiAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICdBY2NlcHQnOiBKU09OQVBJX01JTUVUWVBFXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnZlcnQgdGhlIGRhdGFTZXRQZXJjZW50aWxlIGludG8gYW4gYXJyYXlcclxuICAgICAgICAgICAgLy8gW21pbiwgcGVyY2VudGlsZV8xLC4uLixwZXJjZW50aWxlXzksbWF4XVxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGRhdGFTZXRQZXJjZW50aWxlW2RhdGFbaV1bJ2ZlYXR1cmUnXV0gPSBbZGF0YVtpXVsnbWluJ10sIGRhdGFbaV1bJ3AxJ10sIGRhdGFbaV1bJ3AyJ10sIGRhdGFbaV1bJ3AzJ10sIGRhdGFbaV1bJ3A1J10sIGRhdGFbaV1bJ3A3J10sIGRhdGFbaV1bJ3A4J10sIGRhdGFbaV1bJ3A5J10sIGRhdGFbaV1bJ21heCddXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXREYXRhU2V0UGVyY2VudGlsZShkYXRhU2V0UGVyY2VudGlsZSk7XHJcbiAgICAgICAgICAgIGFkZEFic29sdXRlRmVhdHVyZUJ1dHRvbnMoZGF0YVNldFBlcmNlbnRpbGUpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IHRoZSBzd2FybSBmZWF0dXJlcyBmb3IgdGhlIGxpbmUgY2hhcnQgZnJvbSB0aGUgYXBpXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3dhcm1GZWF0dXJlcygpIHtcclxuICAgIGNvbnN0IHN3YXJtX2ZlYXR1cmVzID0gWydzd2FybV90aW1lJywgJ3N3YXJtX3NwZWVkJywgJ3N3YXJtX2FjY2VsZXJhdGlvbicsICdzd2FybV9jb252ZXhfaHVsbF9hcmVhJyxcclxuICAgICAgICAnc3dhcm1fZGlzdGFuY2VfY2VudHJvaWQnLCAnc3dhcm1fZGlyZWN0aW9uJywgJ3N3YXJtX3BvbGFyaXNhdGlvbidcclxuICAgIF07XHJcblxyXG4gICAgLy8gZ2V0IGFsbCB0aGUgb3RoZXIgc3dhcm0gZmVhdHVyZXMgZm9yIHRoZSBsaW5lIGNoYXJ0XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN3YXJtX2ZlYXR1cmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiAnL2FwaS9kYXRhc2V0LycgKyBwYXJhbWV0ZXJzWydpZCddICsgJy8nICsgc3dhcm1fZmVhdHVyZXNbaV0sXHJcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgICAgIHR5cGU6ICdHRVQnLFxyXG4gICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAnQWNjZXB0JzogSlNPTkFQSV9NSU1FVFlQRVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZmVhdHVyZSA9IHN3YXJtX2ZlYXR1cmVzW2ldLnJlcGxhY2UoJ3N3YXJtXycsICcnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzZXRTd2FybURhdGEoZGF0YSwgZmVhdHVyZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCB0aGUgbWVhZGF0YSBpbmZvcm1hdGlvblxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldE1ldGFEYXRhKCkge1xyXG4gICAgJC5hamF4KHtcclxuICAgICAgICB1cmw6ICcvYXBpL21ldGFkYXRhLycgKyBwYXJhbWV0ZXJzWydpZCddLFxyXG4gICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgdHlwZTogJ0dFVCcsXHJcbiAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICdBY2NlcHQnOiBKU09OQVBJX01JTUVUWVBFXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgIHNldE1ldGFEYXRhKGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IHRoZSBuZXR3b3JrIGRhdGFzZXRzIGZvciB0aGUgYnV0dG9uc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldE5ldHdvcmtEYXRhQnV0dG9uKCkge1xyXG4gICAgJC5hamF4KHtcclxuICAgICAgICB1cmw6ICcvYXBpL2RhdGFzZXQvbmV0d29ya3MvJyArIHBhcmFtZXRlcnNbJ2lkJ10sXHJcbiAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICB0eXBlOiAnR0VUJyxcclxuICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgJ0FjY2VwdCc6IEpTT05BUElfTUlNRVRZUEVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgYWRkTmV0d29ya0J1dHRvbnMoZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIHNwZWNpZmMgZmVhdHVyZVxyXG4gKiBAcGFyYW0ge1N0cmluZ30gZmVhdHVyZSAtIGZvciBpbnN0YW5jZSBzcGVlZCwgYWNjZWxlcmF0aW9uIGV0Yy5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXREYXRhc2V0RmVhdHVyZShmZWF0dXJlKSB7XHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICAgIHVybDogJy9hcGkvZGF0YXNldC8nICsgcGFyYW1ldGVyc1snaWQnXSArICcvJyArIGZlYXR1cmUsXHJcbiAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICB0eXBlOiAnR0VUJyxcclxuICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgJ0FjY2VwdCc6IEpTT05BUElfTUlNRVRZUEVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgLy8gYWRkIHRoZSBzcGVlZCBmZWF0dXJlIHRvIHRoZSBkYXRhc2V0XHJcbiAgICAgICAgICAgIHNldERhdGFzZXRGZWF0dXJlKGRhdGEsIGZlYXR1cmUpO1xyXG4gICAgICAgICAgICBlbmFibGVQbGF5QnV0dG9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIHNwZWNpZmMgc3dhcm0gZmVhdHVyZVxyXG4gKiBAcGFyYW0ge1N0cmluZ30gZmVhdHVyZSAtIGZvciBpbnN0YW5jZSBjZW50cm9pZCwgbWVkb2lkIGV0Yy5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRTd2FybURhdGFzZXRGZWF0dXJlKGZlYXR1cmUpIHtcclxuICAgIGRpc2FibGVQbGF5QnV0dG9uKCk7XHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICAgIHVybDogJy9hcGkvZGF0YXNldC8nICsgcGFyYW1ldGVyc1snaWQnXSArICcvJyArIGZlYXR1cmUsXHJcbiAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICB0eXBlOiAnR0VUJyxcclxuICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgJ0FjY2VwdCc6IEpTT05BUElfTUlNRVRZUEVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgLy8gYWRkIHRoZSBzcGVlZCBmZWF0dXJlIHRvIHRoZSBkYXRhc2V0XHJcbiAgICAgICAgICAgIHNldFN3YXJtRGF0YShkYXRhLCBmZWF0dXJlKTtcclxuICAgICAgICAgICAgZW5hYmxlUGxheUJ1dHRvbigpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IHRoZSBuZXR3b3JrIGZvciB0aGUgc3BlY2lmaWMgbmV0d29ya19pZFxyXG4gKiBAcGFyYW0ge1N0cmluZ30gbmV0d29ya19pZCAtIHVuaXF1ZSBuZXR3b3JrIGlkIG9mIGEgZGF0YXNldC5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXROZXR3b3JrRGF0YShuZXR3b3JrX2lkKSB7XHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICAgIHVybDogJy9hcGkvZGF0YXNldC9uZXR3b3JrLycgKyBwYXJhbWV0ZXJzWydpZCddICsgJy8nICsgbmV0d29ya19pZCxcclxuICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgIHR5cGU6ICdHRVQnLFxyXG4gICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAnQWNjZXB0JzogSlNPTkFQSV9NSU1FVFlQRVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHNldE5ldHdvcmtEYXRhKEpTT04ucGFyc2UoZGF0YVswXVsnZGF0YSddKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZW5hYmxlUGxheUJ1dHRvbigpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgLy8gbmVlZGVkIGZvciBzdGFuZGFyZCBEZXZpYXRpb24gaW4gZGVuZHJvZ3JhbVxyXG4gICAgc2V0TmV0d29ya0lEKG5ldHdvcmtfaWQpO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IHRoZSBuZXR3b3JrIGhpZXJhcmNoeSBmb3IgdGhlIHNwZWNpZmljIG5ldHdvcmtfaWRcclxuICogQHBhcmFtIHtTdHJpbmd9IG5ldHdvcmtfaWQgLSB1bmlxdWUgbmV0d29yayBpZCBvZiBhIGRhdGFzZXQuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0TmV0d29ya0hpZXJhcmNoeURhdGEobmV0d29ya19pZCkge1xyXG4gICAgJC5hamF4KHtcclxuICAgICAgICB1cmw6ICcvYXBpL2RhdGFzZXQvbmV0d29yay9oaWVyYXJjaHkvJyArIHBhcmFtZXRlcnNbJ2lkJ10gKyAnLycgKyBuZXR3b3JrX2lkLFxyXG4gICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgdHlwZTogJ0dFVCcsXHJcbiAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICdBY2NlcHQnOiBKU09OQVBJX01JTUVUWVBFXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgc2V0SGllcmFyY2h5RGF0YShKU09OLnBhcnNlKGRhdGFbMF1bJ2hpZXJhcmNoeSddKSwgbmV0d29ya19pZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZW5hYmxlUGxheUJ1dHRvbigpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IHRoZSBkaXN0aW5jdCBhbmltYWwgaWRzIGZvciBhIHNwZWNpZmMgZGF0YXNldFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEFuaW1hbElkcygpIHtcclxuICAgICQuYWpheCh7XHJcbiAgICAgICAgdXJsOiAnL2FwaS9kYXRhc2V0LycgKyBwYXJhbWV0ZXJzWydpZCddICsgJy9hbmltYWxfaWRzJyxcclxuICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgIHR5cGU6ICdHRVQnLFxyXG4gICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAnQWNjZXB0JzogSlNPTkFQSV9NSU1FVFlQRVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICBzZXRBbmltYWxJZHMoZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8vIC8qKlxyXG4vLyAgKiBWaXN1YWwgcGFyYW1ldGVyIHN1Z2dlc3Rpb24gYWpheCBxdWVyeVxyXG4vLyAgKiBAcGFyYW0ge0FycmF5fSB0cmFja2VkRGF0YSAtIHRyYWNrZWQgZGF0YSB3aXRoIC5cclxuLy8gICovXHJcbi8vIGV4cG9ydCBmdW5jdGlvbiBnZXRTdWdnZXN0ZWRQYXJhbWV0ZXJzKHRyYWNrZWREYXRhKSB7XHJcbi8vICAgICAkLmFqYXgoe1xyXG4vLyAgICAgICAgIHVybDogJy9hcGkvZGF0YXNldC92aXN1YWxfcGFyYW1ldGVyLycgKyBwYXJhbWV0ZXJzWydpZCddLFxyXG4vLyAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbi8vICAgICAgICAgdHlwZTogJ1BPU1QnLFxyXG4vLyAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcsXHJcbi8vICAgICAgICAgaGVhZGVyczoge1xyXG4vLyAgICAgICAgICAgICAnQWNjZXB0JzogSlNPTkFQSV9NSU1FVFlQRVxyXG4vLyAgICAgICAgIH0sXHJcbi8vICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xyXG4vLyAgICAgICAgICAgICByZXNwb25zZVBhcmFtZXRlcnMoZGF0YSk7XHJcbi8vICAgICAgICAgfSxcclxuLy8gICAgICAgICBkYXRhOiB0cmFja2VkRGF0YVxyXG4vLyAgICAgfSk7XHJcbi8vXHJcbi8vIH1cclxuIiwiLyplc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtbGV0cyovXHJcbi8qZ2xvYmFsIHdpbmRvdywgJCwgZDMgKi9cclxuaW1wb3J0IHtcclxuICAgIGhpZXJhcmNoeUNvbG9ycyxcclxuICAgIGNvbG9ycyxcclxuICAgIGNoYW5nZUhpZXJhcmNoeUxlZ2VuZFxyXG59IGZyb20gJy4vaGllcmFyY2h5LmpzJztcclxuXHJcblxyXG5cclxuZXhwb3J0IGxldCBuZXR3b3JrQXV0byA9IGZhbHNlOyAvLyBpZiB0cnVlIHRoZSBuZXR3b3JrIGVkZ2UgbGltaXQgaXMgYXV0b21hdGljYWxseSBzdWdnZXN0ZWRcclxuZXhwb3J0IGxldCBuZXR3b3JrTGltaXQgPSAwLjU7XHJcbmV4cG9ydCBsZXQgc2hvd05ldHdvcmtIaWVyYXJjaHk7XHJcbmV4cG9ydCBsZXQgbmV0d29ya0NvbG9yID0ge307XHJcbmV4cG9ydCBsZXQgbmV0d29ya0lEO1xyXG5leHBvcnQgbGV0IG5ldHdvcmtCYWNrZ3JvdW5kID0gdHJ1ZTtcclxuZXhwb3J0IGxldCBuZXR3b3JrQmFja2dyb3VuZExpbWl0ID0gMTsgLy9kcmF3IGJhY2tncm91bmQgbGluZSBpZiBsaW1pdCBpcyBleGNlZWRlZFxyXG4vLyBmaXhlZCBjb2xvciBzY2FsZSBmb3IgdGhlIG5ldHdvcmtcclxuXHJcbi8qKlxyXG4gKiBjb2xvciBzY2FsZSBmb3IgbmV0d29yayAtIHJhbmdlIGlzIGRlZmluZWQgZHluYW1pYyBiYXNlZCBvbiB0aGUgaGllcmFyaGN5IGNvbG9yXHJcbiAqL1xyXG5leHBvcnQgbGV0IG5ldHdvcmtDb2xvclNjYWxlID0gZDMuc2NhbGVUaHJlc2hvbGQoKVxyXG4gICAgLmRvbWFpbihcclxuICAgICAgICBbMCwgLjEsIC4yLCAuMywgLjQsIC41LCAuNiwgLjcsIC44LCAuOSwgMV1cclxuICAgICkucmFuZ2UoWycjZjdmYmZmJywgJyNkZWViZjcnLCAnI2M2ZGJlZicsICcjOWVjYWUxJywgJyM2YmFlZDYnLCAnIzQyOTJjNicsICcjMjE3MWI1JywgJyMwODUxOWMnLCAnIzA4MzA2YiddKTtcclxuXHJcblxyXG4vKipcclxuICogQWRkIHRoZSBuZXR3b3JrICBzZWxlY3QgYnV0dG9ucyBhbmQgaGllcmFyY2h5IGNoZWNrYm94ZXMgdG8gdGhlIG5ldHdvcmsgbW9kYWxcclxuICogQHBhcmFtIHthcnJheX0gZGF0YSAtIEFycmF5IG9mIG5ldHdvcmsgZGF0YVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGFkZE5ldHdvcmtCdXR0b25zKGRhdGEpIHtcclxuICAgIGlmIChkYXRhLmxlbmd0aCkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZGF0YVtpXVsnZmluaXNoZWQnXSkge1xyXG4gICAgICAgICAgICAgICAgJCgnI25ldHdvcmtzLWhpZXJhcmNoaWVzLXRhYmxlIHRib2R5JylcclxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCc8dHI+PHRkPicgKyBkYXRhW2ldWyduYW1lJ10gKyAnPC90ZD4gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8dGQ+IDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0XCIgZGF0YT0nICsgZGF0YVtpXVsnbmV0d29ya19pZCddICsgJyBuYW1lPScgKyBkYXRhW2ldWyduYW1lJ10gK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPjxzcGFuIGNsYXNzPVwibWRpIG1kaS1ncmFwaHFsXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9zcGFuPjwvYnV0dG9uPjwvdGQ+ICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPHRkPjxkaXYgY2xhc3M9XCJwcmV0dHkgcC1zd2l0Y2ggcC1maWxsXCI+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGNsYXNzPVwiaGllYXJjaHktY2hlY2tib3hcIiBkYXRhPVwiJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbaV1bJ25ldHdvcmtfaWQnXSArICdcIiBuYW1lPVwiJyArIGRhdGFbaV1bJ25hbWUnXSArICdcIj48ZGl2IGNsYXNzPVwic3RhdGUgcC1zdWNjZXNzXCI+PGxhYmVsPjwvbGFiZWw+PC9kaXY+PC9kaXY+PC90ZD4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzx0ZD4tLS08L3RkPidcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gJzx0ZD48ZGl2IGNsYXNzPVwicHJldHR5IHAtc3dpdGNoIHAtZmlsbFwiPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBjbGFzcz1cIm5ldHdvcmstaGllcmFyY2h5LWNoZWNrYm94XCIgZGF0YT1cIicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkYXRhW2ldWyduZXR3b3JrX2lkJ10gKyAnXCI+PGRpdiBjbGFzcz1cInN0YXRlIHAtc3VjY2Vzc1wiPjxsYWJlbD48L2xhYmVsPjwvZGl2PjwvZGl2PjwvdGQ+J1xyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgICQoJyNuZXR3b3Jrcy1oaWVyYXJjaGllcy10YWJsZScpXHJcbiAgICAgICAgICAgIC5hcHBlbmQoJ1RoZXJlIGlzIG5vIG5ldHdvcmsgZGF0YSBmb3IgdGhpcyBkYXRhc2V0Jyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgU2V0dGVyXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuLyoqXHJcbiAqIFNldCB0aGUgbmV0d29yayBhdXRvIHZhbHVlIC0gaWYgdHJ1ZSB0aGFuIHRoZSBuZXR3b3JrIGxpbWl0IGlzIHNldCB0byB0aGUgMC45NSBwZXJjZW50aWxlIG9mIGFsbCB2YWx1ZXNcclxuICogQHBhcmFtIHtCb29sZWFufSB2YWx1ZVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldE5ldHdvcmtBdXRvKHZhbHVlKSB7XHJcbiAgICBuZXR3b3JrQXV0byA9IHZhbHVlO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IHRoZSBuZXR3b3JrIGxpbWl0IHdpdGggdGhlIHNwZWNpZmljIG5ldHdvcmsgc2xpZGVyIC0gY3VzdG9tXHJcbiAqIDAgPSBzaW1pbGFyIGFuZCAxIHVuc2ltaWxhciBmb3IgdGhlIHNwZWNpZmljIHRpbWUgbW9tZW50XHJcbiAqIEBwYXJhbSB7TnVtYmVyfSB2YWx1ZSAtIGJldHdlZW4gMCBhbmQgMVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldE5ldHdvckxpbWl0KHZhbHVlKSB7XHJcbiAgICBuZXR3b3JrTGltaXQgPSB2YWx1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldCB0aGUgbmV0d29yayBpbiBoaWVyYXJjaHkgKGUuZy4gaDApIGZpbHRlclxyXG4gKiBAcGFyYW0ge051bWJlcn0gaGllcmFyY2h5IC0gZS5nLiAwLW5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXROZXR3b3JrSGllcmFyY2h5KHZhbHVlKSB7XHJcbiAgICBzaG93TmV0d29ya0hpZXJhcmNoeSA9IHZhbHVlO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IHRoZSBuZXR3b3JrIG5ldHdvcmsgaWQgLSBuZWVkZWQgZm9yIGhpZXJhcmNoeSBzdGFuZGFyZCBkZXZpYXRpb24gY29sb3JpbmdcclxuICogQHBhcmFtIHtOdW1iZXJ9IHZhbHVlIC0gZS5nLiAwLW5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXROZXR3b3JrSUQodmFsdWUpIHtcclxuICAgIG5ldHdvcmtJRCA9IHZhbHVlO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IG5ldHdvcmsgY29sb3Igc2NhbGUgcmFuZ2VcclxuICogQHBhcmFtIHtOdW1iZXJ9IGlkIC0gaWQgb2YgdGhlIG5ldHdvcmtcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRuZXR3b3JrQ29sb3IobmV0d29ya19pZCkge1xyXG4gICAgLy8gaWYgaWQgPSAtMSBzZXQgdGhlIGNvbG9yIHRvIG5vdGhpbmdcclxuICAgIGlmIChuZXR3b3JrX2lkID49IDApIHtcclxuICAgICAgICBuZXR3b3JrQ29sb3JbJ2gnICsgbmV0d29ya19pZF0gPSAnIzA4MzA2Yic7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIG5ldHdvcmtDb2xvciA9IHt9O1xyXG4gICAgfVxyXG4gICAgY2hhbmdlSGllcmFyY2h5TGVnZW5kKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXQgdGhlIGJvb2xlYW4gdmFsdWUgZm9yIHRoZSBuZXR3b3JrIGJhY2tncm91bmQgY29sb3JcclxuICogQHBhcmFtIHtCb29sZWFufSB2YWx1ZSAtIHRydWUgb3IgZmFsc2VcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXROZXR3b3JrQmFja2dyb3VuZCh2YWx1ZSkge1xyXG4gICAgbmV0d29ya0JhY2tncm91bmQgPSB2YWx1ZTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBTZXQgdGhlIG5ldHdvcmsgYmFja2dyb3VuZCBjb2xvciBsaW1pdCAtIGRyYXcgYmFja2dyb3VuZCBsaW5lIGlmIGxpbWl0IGlzIGV4Y2VlZGVkXHJcbiAqIEBwYXJhbSB7SW50ZWdlcn0gdmFsdWUgLSBuZXcgbGltaXRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXROZXR3b3JrQmFja2dyb3VuZExpbWl0KHZhbHVlKSB7XHJcbiAgICBuZXR3b3JrQmFja2dyb3VuZExpbWl0ID0gdmFsdWU7XHJcbn0iLCIvKmVzbGludC1kaXNhYmxlIG5vLXVudXNlZC1sZXRzKi9cclxuLypnbG9iYWwgd2luZG93LCBkMywgJCwgcGFyYW1ldGVycyovXHJcbmltcG9ydCB7XHJcbiAgICBzZXRJbmRleFRpbWUsXHJcbiAgICBEcmF3ZXJcclxufSBmcm9tICcuL3NwYXRpYWxfdmlldy9zcGF0aWFsX3ZpZXcuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIHN3YXJtRGF0YSxcclxuICAgIGRhdGFzZXQsXHJcbiAgICBhbmltYWxJZHNcclxufSBmcm9tICcuL2V4cGxvcmUuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIHBlcmNlbnRpbGVzTGluZUNoYXJ0XHJcbn0gZnJvbSAnLi9oZWxwZXJzLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBpbmRleFRpbWUsXHJcbn0gZnJvbSAnLi9zcGF0aWFsX3ZpZXcvc3BhdGlhbF92aWV3JztcclxuXHJcblxyXG5cclxuXHJcbmV4cG9ydCBsZXQgem9vbUZ1bmN0aW9uO1xyXG5cclxubGV0IHRyZW5kQ2hhcnRzWm9vbSA9IHt9O1xyXG4vL2xldCB0aGlzLnRyZW5kQ2hhcnRzRWxlbSA9IFsnbG93ZXItb3V0ZXItYXJlYScsICdsb3dlci1pbm5lci1hcmVhJywgJ21lZGlhbi1saW5lJywgJ3VwcGVyLWlubmVyLWFyZWEnLCAndXBwZXItb3V0ZXItYXJlYSddO1xyXG4vL2xldCBsaW5lQ2hhcnRXaWR0aCA9IDUwMDA7XHJcbmxldCByYXRpbyA9IDE7XHJcbmxldCB6b29tR3JvdXA7XHJcbmxldCB4O1xyXG5sZXQgeTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbi8vcmF0aW8gPSBNYXRoLmNlaWwoc3dhcm1EYXRhLmxlbmd0aCAvIHRoaXMubGluZUNoYXJ0V2lkdGgpO1xyXG4gICAgLy9jb25zb2xlLmxvZyhzd2FybURhdGEpO1xyXG4gICAgLy9sZXQgcmVzdWx0ID0gc3dhcm1EYXRhLm1hcChvYmogPT4gKHt0aW1lOm9iai50aW1lLCBkaXN0X2NlbjpvYmouZGlzdGFuY2VfY2VudHJvaWR9KSk7XHJcbiAgICAvL2NvbnNvbGUubG9nKHJlc3VsdCk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuLy9saW5lY2hhcnQuZHJhdygpO1xyXG4vL2xldCBzd2FybURhdCA9IG5ldyBzd2FybURhdGEoKTtcclxuIiwiLyplc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtbGV0cyovXHJcbi8qZ2xvYmFsIHdpbmRvdywgJCAqL1xyXG4vLyBpbXBvcnQgYWxsIGpzXHJcbmltcG9ydCAqIGFzIHF1ZXJpZXMgZnJvbSAnLi9hamF4X3F1ZXJpZXMuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGluaXRpYWxpemVNZXRhZGRhdGFcclxufSBmcm9tICcuL21ldGFkYXRhLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBzZXRIaWVyYXJjaHlMZXZlbCxcclxuICAgIHJlbW92ZUhpZXJhcmNoeUxldmVsLFxyXG4gICAgc2V0SGllcmFyY2h5Q29sb3IsXHJcbiAgICByZW1vdmVIaWVyYXJjaHlDb2xvcixcclxuICAgIGNoYW5nZUhpZXJhcmNoeUxlZ2VuZFxyXG59IGZyb20gJy4vaGllcmFyY2h5LmpzJztcclxuXHJcbi8vIGltcG9ydCBjc3NcclxuaW1wb3J0ICcuL2V4cGxvcmUuY3NzJztcclxuXHJcbmltcG9ydCBDaGFydCBmcm9tICcuL2xpbmVfY2hhcnQuanMnO1xyXG5cclxuZXhwb3J0IGxldCBkYXRhc2V0ID0gW107IC8vIG1haW4gZGF0YXNldCB3aXRoIHZhbHVlcyBmb3IgZWFjaCBpbmRpdmlkdWFsIGFuaW1hbFxyXG5leHBvcnQgbGV0IGRhdGFzZXRNZXRhZGF0YSA9IFtdOyAvLyBtZXRhZGF0YXNldCBmb3IgZWFjaCBpbmRpdmlkdWFsIGZpc2hcclxuZXhwb3J0IGxldCBzd2FybURhdGEgPSBbXTsgLy8gc3dhcm1kYXRhIGZvciBsaW5lY2hhcnQgYW5kIGFsc28gb3RoZXIgc3dhcm0gZmVhdHVyZXNcclxuZXhwb3J0IGxldCBkYXRhU2V0UGVyY2VudGlsZSA9IHt9OyAvLyBwZWNlbnRpbGVzIG5lZWRlZCBmb3IgdGhlIGNvbG9yIG1hcHBpbmdcclxuZXhwb3J0IGxldCBuZXR3b3JrRGF0YSA9IHt9OyAvLyBuZXR3b3JrIGRhdGFcclxuZXhwb3J0IGxldCBuZXR3b3JrSGllcmFyY2h5ID0ge307IC8vIG5ldHdvcmsgaGllcmFyY2h5IGRhdGFcclxuZXhwb3J0IGxldCBhbmltYWxJZHMgPSB7fTsgLy8gZGlzdGluY3QgYW5pbWFsIGlkc1xyXG5cclxuXHJcblxyXG4vKipcclxuICogR2V0IHRoZSBiYXNpYyBkYXRhIHRvIGdldCB0aGUgdG9vbCBydW5uaW5nLlxyXG4gKiBhZnRlciB0aGUgcGVuZGluZyBhamF4IHF1ZXJpZXMgYXJlIGZpbmlzaGVkXHJcbiAqIHRoZSB0b29sIGlzIGRyYXduXHJcbiAqL1xyXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcclxuICAgIC8vIGNvbnNvbGUubG9nKHBhcmFtZXRlcnMpO1xyXG5cclxuICAgIC8vIGdldCB0aGUgbW92ZW1lbnQgZGF0YVxyXG4gICAgcXVlcmllcy5zdHJlYW1Nb3ZlbWVudERhdGEoKTtcclxuXHJcbiAgICAvLyBnZXQgdGhlIGRhdGFTZXRQZXJjZW50aWxlXHJcbiAgICBxdWVyaWVzLmdldFBlcmNlbnRpbGUoKTtcclxuXHJcbiAgICAvLyBnZXQgdGhlIGRpc3RpbmN0IGFuaW1hbCBpZHMgZm9yIHRoZSB3aG9sZSBkYXRhc2V0XHJcbiAgICBxdWVyaWVzLmdldEFuaW1hbElkcygpO1xyXG5cclxuICAgIC8vIGdldCB0aGUgc3dhcm0gZmVhdHVyZXMgZm9yIHRoZSBsaW5lIGNoYXJ0XHJcbiAgICBxdWVyaWVzLmdldFN3YXJtRmVhdHVyZXMoKTtcclxuXHJcbiAgICAvLyBnZXQgdGhlIG1ldGFkYXRhIGFuZCBpbml0aWFsaXplIHRoZSBtZXRhZGEgd2luZG93XHJcbiAgICBxdWVyaWVzLmdldE1ldGFEYXRhKCk7XHJcblxyXG4gICAgLy8gZ2V0IHRoZSBpbmZvcm1hdGlvbiBpZiB0aGVyZSBhcmUgYWxyZWFkeSBuZXR3b3JrcyBjcmVhdGVkIGZvciB0aGlzIGRhc3Rhc2V0XHJcbiAgICBxdWVyaWVzLmdldE5ldHdvcmtEYXRhQnV0dG9uKCk7XHJcbn0pO1xyXG5cclxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgR2V0dGVyIGFuZCBzZXR0ZXJcclxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4vKipcclxuICogQ29uY2FjdCB0byB0aGUgbWFpbiBkYXRhc2V0XHJcbiAqIHRoZSBpZGVhIGlzIHRvIHVzZSB0aGlzIG9uZSBkYXkgZm9yIGxhenkgbG9hZGluZ1xyXG4gKiBAcGFyYW0ge2FycmF5fSB2YWx1ZSAtIGFycmF5IG9mIG1vdmVtZW50IGRhdGFzZXRzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gYWRkVG9EYXRhc2V0KHZhbHVlKSB7XHJcbiAgICBkYXRhc2V0ID0gZGF0YXNldC5jb25jYXQodmFsdWUpO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IGRhdGFzZXQgcGVyY2VudGlsZVxyXG4gKiBAcGFyYW0ge2FycmF5fSB2YWx1ZSAtIGFycmF5IG9mIGFycmFyeXNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXREYXRhU2V0UGVyY2VudGlsZSh2YWx1ZSkge1xyXG4gICAgZGF0YVNldFBlcmNlbnRpbGUgPSB2YWx1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldCBkYXRhc2V0IG1ldGFkYXRhXHJcbiAqIEBwYXJhbSB7YXJyYXl9IHZhbHVlIC0gYXJyYXlcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRNZXRhRGF0YSh2YWx1ZSkge1xyXG4gICAgZGF0YXNldE1ldGFkYXRhID0gdmFsdWU7XHJcbiAgICAvLyBpbml0aWFsaXplIHRoZSBtZXRhZGF0YSBtb2RhbFxyXG4gICAgaW5pdGlhbGl6ZU1ldGFkZGF0YSgpO1xyXG59XHJcblxyXG4vKipcclxuICogQWRkIGEgbmV3IGZlYXR1cmUgZGltZW5zaW9uIHRvIHRoZSBzd2FybSBkYXRhc2V0XHJcbiAqIEBwYXJhbSB7YXJyYXl9IGRhdGEgLSBBcnJheSBvZiBzd2FybSB2YWx1ZXMgY29uc2lzdGluZyBvZiBbZmVhdHVyZV8wLGZlYXR1cmVfMSwuLi5dXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBmZWF0dXJlIC0gc3RyaW5nIGFycmF5IG9mIHRoZSBmZWF0dXJlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2V0U3dhcm1EYXRhKGRhdGEsIGZlYXR1cmUpIHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIC8vIGFkZCB0aGUgdGhlIG9iamVjdCB0byB0aGUgYXJyYXkgaWYgdGhlcmUgaXMgbm8gZWxlbWVudCB5ZXRcclxuICAgICAgICBpZiAodHlwZW9mIHN3YXJtRGF0YVtpXSA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgc3dhcm1EYXRhLnB1c2goe30pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gY2hlY2sgaWYgaW50ZWdlciBvciBmbG9hdFxyXG4gICAgICAgIGlmIChkYXRhW2ldICYmICEoaXNOYU4oZGF0YVtpXSkpKSB7XHJcbiAgICAgICAgICAgIHN3YXJtRGF0YVtpXVtmZWF0dXJlXSA9ICtkYXRhW2ldO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGlzIHN0cmluZ1xyXG4gICAgICAgICAgICBzd2FybURhdGFbaV1bZmVhdHVyZV0gPSBkYXRhW2ldO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBZGQgYSBuZXcgZmVhdHVyZSBkaW1lbnNpb24gdG8gdGhlIGRhdGFzZXRcclxuICogQHBhcmFtIHthcnJheX0gZGF0YSAtIEFycmF5IG9mIGZlYXR1cmVzIHZhbHVlcyBjb25zaXN0aW5nIG9mIFtmZWF0dXJlXzAsIGZlYXR1cmVfMSwuLi5dXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBmZWF0dXJlIC0gc3RyaW5nIGFycmF5IG9mIHRoZSBmZWF0dXJlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2V0RGF0YXNldEZlYXR1cmUoZGF0YSwgZmVhdHVyZSkge1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgLy8gYWRkIHRoZSB0aGUgb2JqZWN0IHRvIHRoZSBhcnJheSBpZiB0aGVyZSBpcyBubyBlbGVtZW50IHlldFxyXG4gICAgICAgIGlmICh0eXBlb2YgZGF0YXNldFtpXSA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgZGF0YXNldC5wdXNoKHt9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gcGFyc2UgdGhlIGludFxyXG4gICAgICAgIGRhdGFzZXRbaV1bZmVhdHVyZV0gPSArZGF0YVtpXTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFNldCB0aGUgbmV0d29yayB2YWx1ZVxyXG4gKiBAcGFyYW0ge2FycmF5fSB2YWx1ZSAtIEFycmF5IG9mIG9mIGFycmF5cyB3aXRoIGFsbCB2YWx1ZXNcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tIHRoZSBjYWxjdWxhdGVkIGFkamFjZW5jeSBtYXRyaXhcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXROZXR3b3JrRGF0YSh2YWx1ZSkge1xyXG4gICAgbmV0d29ya0RhdGEgPSB2YWx1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldCB0aGUgbmV0d29yayBoaWVhcmhjeSB2YWx1ZVxyXG4gKiBAcGFyYW0ge2FycmF5fSB2YWx1ZSAtIEFycmF5IG9mIG9mIGFycmF5cyB3aXRoIGFsbCB2YWx1ZXNcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICB3aXRoIGhpZXJhcmNoeVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldEhpZXJhcmNoeURhdGEodmFsdWUsIG5ldHdvcmtfaWQpIHtcclxuICAgIC8vIGlmIHRoZSBlbGVtZW50IGlzIGVtcHR5IHJlbW92ZSB0aGUgZWxlbWVudCBmcm9tIHRoZSBuZXR3cm9rSGllcmFyY2h5IG9iamVjdFxyXG4gICAgaWYgKE9iamVjdC5rZXlzKHZhbHVlKS5sZW5ndGggPT09IDAgJiYgdmFsdWUuY29uc3RydWN0b3IgPT09IE9iamVjdCkge1xyXG4gICAgICAgIGRlbGV0ZSBuZXR3b3JrSGllcmFyY2h5WydoJyArIG5ldHdvcmtfaWRdO1xyXG4gICAgICAgIHJlbW92ZUhpZXJhcmNoeUxldmVsKG5ldHdvcmtfaWQpO1xyXG4gICAgICAgIHJlbW92ZUhpZXJhcmNoeUNvbG9yKG5ldHdvcmtfaWQpO1xyXG4gICAgfSAvLyBhZGQgaXQgdG8gdGhlIG5ldHdvcmsgaGllcmFyY2h5XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBuZXR3b3JrSGllcmFyY2h5WydoJyArIG5ldHdvcmtfaWRdID0gdmFsdWU7XHJcbiAgICAgICAgc2V0SGllcmFyY2h5TGV2ZWwobmV0d29ya19pZCwgMik7XHJcbiAgICAgICAgc2V0SGllcmFyY2h5Q29sb3IobmV0d29ya19pZCk7XHJcbiAgICB9IC8vIHRvbyBtYW55IGVsZW1lbnRzIGNhbnQgYmUgYWRkZWRcclxuXHJcbiAgICBjaGFuZ2VIaWVyYXJjaHlMZWdlbmQoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldCBhbmltYWwgaWRzIGRhdGFzZXRcclxuICogQHBhcmFtIHthcnJheX0gaWRzIC0gQXJyYXkgb2YgYWxsIGRpc3RpbmN0IGFuaW1hbCBpZHNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRBbmltYWxJZHModmFsdWUpIHtcclxuICAgIGFuaW1hbElkcyA9IHZhbHVlO1xyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=