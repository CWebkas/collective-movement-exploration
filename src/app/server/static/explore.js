!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=6)}([function(e,t){},function(e,t,r){var n=r(2);"string"==typeof n&&(n=[[e.i,n,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};r(4)(n,a);n.locals&&(e.exports=n.locals)},function(e,t,r){(t=r(3)(!1)).push([e.i,"/* Icons for bootstrap 4 */\r\n\r\n.mdi::before {\r\n    font-size: 24px;\r\n    line-height: 14px;\r\n}\r\n\r\n.btn .mdi::before {\r\n    position: relative;\r\n    top: 4px;\r\n}\r\n\r\n.btn-xs .mdi::before {\r\n    font-size: 18px;\r\n    top: 3px;\r\n}\r\n\r\n.btn-sm .mdi::before {\r\n    font-size: 18px;\r\n    top: 3px;\r\n}\r\n\r\n.dropdown-menu .mdi {\r\n    width: 18px;\r\n}\r\n\r\n.dropdown-menu .mdi::before {\r\n    position: relative;\r\n    top: 4px;\r\n    left: -8px;\r\n}\r\n\r\n.nav .mdi::before {\r\n    position: relative;\r\n    top: 4px;\r\n}\r\n\r\n.navbar .navbar-toggle .mdi::before {\r\n    position: relative;\r\n    top: 4px;\r\n    color: #FFF;\r\n}\r\n\r\n.breadcrumb .mdi::before {\r\n    position: relative;\r\n    top: 4px;\r\n}\r\n\r\n.breadcrumb a:hover {\r\n    text-decoration: none;\r\n}\r\n\r\n.breadcrumb a:hover span {\r\n    text-decoration: underline;\r\n}\r\n\r\n.alert .mdi::before {\r\n    position: relative;\r\n    top: 4px;\r\n    margin-right: 2px;\r\n}\r\n\r\n.input-group-addon .mdi::before {\r\n    position: relative;\r\n    top: 3px;\r\n}\r\n\r\n.navbar-brand .mdi::before {\r\n    position: relative;\r\n    top: 2px;\r\n    margin-right: 2px;\r\n}\r\n\r\n.list-group-item .mdi::before {\r\n    position: relative;\r\n    top: 3px;\r\n    left: -3px\r\n}\r\n\r\n/* SVG elements and text */\r\n\r\n#main-vis {\r\n    margin-bottom: 10px;\r\n}\r\n\r\n.svg-container {\r\n    display: inline-block;\r\n    position: relative;\r\n    width: 100%;\r\n    /* aspect ratio */\r\n    vertical-align: top;\r\n    overflow: visible;\r\n}\r\n\r\n.svg-content {\r\n    display: inline-block;\r\n    position: absolute;\r\n    border: 1px solid #000;\r\n}\r\n\r\n#main-vis-legend-div {\r\n    display: none;\r\n}\r\n\r\n#hierarchy-legend-div {\r\n    display: none;\r\n}\r\n\r\n#main-vis-legend {\r\n    float: right;\r\n    display: inline-block;\r\n    position: relative;\r\n    overflow: visible;\r\n    top: 10px;\r\n    left: 10px;\r\n}\r\n\r\n#hierarchy-legend {\r\n    float: left;\r\n    display: inline-block;\r\n    position: relative;\r\n    overflow: visible;\r\n    top: 10px;\r\n    left: 10px;\r\n}\r\n\r\n.svg-content-dendrogram {\r\n    display: inline-block;\r\n    border: 1px solid #000;\r\n}\r\n\r\n.svg-line-chart-container {\r\n    display: inline-block;\r\n    position: relative;\r\n    width: 100%;\r\n    height: auto;\r\n    /* depends on svg ratio */\r\n    padding-bottom: 17%;\r\n    /* aspect ratio */\r\n    vertical-align: top;\r\n    overflow: visible;\r\n}\r\n\r\n.svg-dendrogram-container {\r\n    display: inline-block;\r\n    position: relative;\r\n    height: auto;\r\n    vertical-align: top;\r\n    overflow: visible;\r\n}\r\n\r\n.axis path {\r\n    display: none;\r\n}\r\n\r\n.axis line {\r\n    stroke-opacity: 0.3;\r\n    shape-rendering: crispEdges;\r\n}\r\n\r\n.x {\r\n    font-size: 1em;\r\n}\r\n\r\n.y {\r\n    font-size: 1em;\r\n}\r\n\r\n.axis-line-chart path line {\r\n    fill: none;\r\n    stroke: #000;\r\n    shape-rendering: crispEdges;\r\n}\r\n\r\n.line {\r\n    fill: none;\r\n    stroke-width: 5px;\r\n}\r\n\r\n/* Time  */\r\n\r\n.frame-text {\r\n    margin-top: 0;\r\n    margin-bottom: 0;\r\n    font-size: 2em;\r\n    color: inherit;\r\n    font-weight: 500;\r\n    line-height: 1.1;\r\n}\r\n\r\n/* Slider ticks  */\r\n\r\n.ui-slider-tick {\r\n    display: inline-block;\r\n    width: 3px;\r\n    background: #337ab7;\r\n    height: 0.8em;\r\n    position: absolute;\r\n}\r\n\r\n/* Laoding gif   */\r\n\r\n#loading {\r\n    display: block;\r\n    text-align: center;\r\n}\r\n\r\n/* Color legend    */\r\n\r\n.legend {\r\n    font-size: 12px;\r\n    stroke: #000;\r\n}\r\n\r\n.legend-text {\r\n    font-size: 1.2em;\r\n    color: inherit;\r\n    line-height: 1.1;\r\n}\r\n\r\n.line-chart-legend-text {\r\n    font-size: 2em;\r\n    color: inherit;\r\n    line-height: 1.1;\r\n}\r\n\r\n.time-line {\r\n    fill: none;\r\n    stroke-width: 5px;\r\n    stroke: #000;\r\n}\r\n\r\n/*swarm features */\r\n\r\n.centroid {\r\n    fill-opacity: 0;\r\n    stroke: #e7298a;\r\n    stroke-width: 3px;\r\n}\r\n\r\n.medoid {\r\n    fill: #e7298a !important;\r\n    stroke: #e7298a !important;\r\n}\r\n\r\n.hull-path {\r\n    fill: #fff;\r\n    fill-opacity: 0;\r\n    stroke-width: 3;\r\n    stroke: #252525;\r\n    stroke-opacity: 0.5;\r\n}\r\n\r\n.hierarchy-group {\r\n    stroke-width: 10;\r\n    stroke-linejoin: round;\r\n    opacity: 0.2;\r\n}\r\n\r\n.delaunay-triangulation {\r\n    fill-opacity: 0;\r\n    stroke-width: 2;\r\n    stroke: #000;\r\n    stroke-opacity: 0.4;\r\n}\r\n\r\n/* Color brewer picker div */\r\n\r\n.palette {\r\n    cursor: pointer;\r\n    display: table;\r\n    vertical-align: bottom;\r\n    margin: 4px 0 4px 4px;\r\n    background: #fff;\r\n    border: solid 1px #aaa;\r\n}\r\n\r\n.swatch {\r\n    display: inline-block;\r\n    vertical-align: middle;\r\n    width: 22px;\r\n    height: 22px;\r\n}\r\n\r\n.voronoi {\r\n    fill-opacity: 0;\r\n    stroke-width: 3;\r\n    stroke: #000;\r\n    stroke-opacity: 0.2;\r\n}\r\n\r\n/* Tooltip */\r\n\r\ndiv.tooltip {\r\n    pointer-events: none;\r\n    opacity: 0;\r\n    background: rgb(255, 255, 255) !important;\r\n    border-left-color: #1b809e !important;\r\n    border: 1px solid #eee;\r\n    border-left-width: 5px;\r\n    border-radius: 3px;\r\n    position: absolute;\r\n}\r\n\r\ndiv.tooltip table td:nth-child(2) {\r\n    text-align: center;\r\n    font-weight: bold;\r\n}\r\n\r\n.tooltip-span {\r\n    display: block;\r\n    width: 150px;\r\n    word-wrap: break-word;\r\n    font-size: 1.5em;\r\n}\r\n\r\n.upper-outer-area, .lower-outer-area {\r\n    stroke-width: 1;\r\n    fill: #74a9cf;\r\n    stroke: #3690c0;\r\n}\r\n\r\n.upper-inner-area, .lower-inner-area {\r\n    stroke-width: 1;\r\n    fill: #045a8d;\r\n    stroke: #023858;\r\n}\r\n\r\n.median-line {\r\n    fill: none;\r\n    stroke: #525252;\r\n    stroke-width: 5;\r\n}\r\n\r\n.selected {\r\n    background: #999;\r\n    border: 4px solid #4d4d4d;\r\n    -moz-border-radius: 5px;\r\n    -webkit-border-radius: 5px;\r\n    box-shadow: 1px 2px 4px rgba(0, 0, 0, .4);\r\n}\r\n\r\n.zoom {\r\n    fill: none;\r\n    pointer-events: all;\r\n}\r\n\r\n.x.axis-line-chart>g>text {\r\n    font-size: 3em;\r\n    color: inherit;\r\n    line-height: 1.1;\r\n}\r\n\r\n.arrow {\r\n    stroke-width: 1;\r\n}\r\n\r\n#centroid-line {\r\n    stroke-width: 1;\r\n    stroke: #e7298a;\r\n}\r\n\r\n#centroid-arrow {\r\n    fill: #e7298a;\r\n}\r\n\r\n.metadata-swatch {\r\n    width: 30px;\r\n    height: 30px;\r\n    border-radius: 3px;\r\n    border: 2px solid #666;\r\n}\r\n\r\n.metadata-swatch-clickable:hover {\r\n    border: 2px solid #000;\r\n    cursor: pointer;\r\n}\r\n\r\n.dropdown-menu {\r\n    min-width: 40px;\r\n    padding: 5px;\r\n}\r\n\r\n.metadata-legend {\r\n    list-style: none;\r\n    margin-top: 10px;\r\n}\r\n\r\n.metadata-legend li {\r\n    float: left;\r\n    margin-right: 10px;\r\n}\r\n\r\n.metadata-legend span {\r\n    border: 2px solid #666;\r\n    float: left;\r\n    width: 30px;\r\n    height: 30px;\r\n}\r\n\r\n.metadata-legend .bl-avg {\r\n    background-color: #7fc97f;\r\n}\r\n\r\n.metadata-legend .avg {\r\n    background-color: #fdc086;\r\n}\r\n\r\n.metadata-legend .ab-avg {\r\n    background-color: #386cb0;\r\n}\r\n\r\n.network-edges {\r\n    fill-opacity: 0;\r\n    stroke-width: 2;\r\n}\r\n\r\n.network-background-edges {\r\n    fill-opacity: 0;\r\n    stroke-opacity: 0.25;\r\n    stroke: #737373;\r\n}\r\n\r\n.node text {\r\n    font: 12px sans-serif;\r\n}\r\n\r\n.node--internal text {\r\n    text-shadow: 0 1px 0 #fff, 0 -1px 0 #fff, 1px 0 0 #fff, -1px 0 0 #fff;\r\n}\r\n\r\n.link {\r\n    fill: none;\r\n    stroke: #636363;\r\n    stroke-width: 5px;\r\n}\r\n\r\n#active-network-name {\r\n    font-weight: bold;\r\n    color: #296292;\r\n}\r\n\r\n.active-level {\r\n    fill: #386cb0;\r\n}\r\n\r\n#dendrogram-panel {\r\n    position: initial;\r\n}\r\n\r\n#dendrogram-panel {\r\n    display: none\r\n}\r\n\r\n.show-dendrogram {\r\n    float: right;\r\n    border-radius: 3px;\r\n    border: 1px solid #D1D3D4;\r\n    font-weight: normal;\r\n}\r\n\r\n.show-dendrogram:hover {\r\n    background: #D1D3D4;\r\n}\r\n\r\n.dendrogram-text {\r\n    font-size: 10em !important;\r\n}\r\n\r\n.highlight-hierarchy {\r\n    fill: #252525;\r\n    stroke: #252525;\r\n    stroke-width: 10;\r\n    stroke-linejoin: round;\r\n    opacity: 0.3;\r\n}\r\n\r\n.animal-highlight {\r\n    fill: #c51b7d !important;\r\n}\r\n\r\n#dendrogram-buttons-div .btn span.glyphicon {\r\n    opacity: 0;\r\n}\r\n\r\n#dendrogram-buttons-div .btn.active span.glyphicon {\r\n    opacity: 1;\r\n}\r\n\r\n#dendrogram-buttons-div {\r\n    border: 2px solid #D1D3D4;\r\n    border-radius: 5px;\r\n}\r\n\r\n#dendrogram-legend {\r\n    margin-left: 20px;\r\n}\r\n\r\n.intersection {\r\n    fill: url(#striped) !important;\r\n    stroke: #67000d;\r\n}\r\n\r\n.sym-difference {\r\n    fill: url(#striped) !important;\r\n    stroke: #67000d;\r\n}\r\n\r\n.modal-lg {\r\n    max-width: 80%;\r\n}\r\n\r\n.background-image {\r\n    background: #fff;\r\n}",""]),e.exports=t},function(e,t,r){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r=e[1]||"",n=e[3];if(!n)return r;if(t&&"function"==typeof btoa){var a=(o=n,s=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(l," */")),i=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[r].concat(i).concat([a]).join("\n")}var o,s,l;return[r].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(r,"}"):r})).join("")},t.i=function(e,r,n){"string"==typeof e&&(e=[[null,e,""]]);var a={};if(n)for(var i=0;i<this.length;i++){var o=this[i][0];null!=o&&(a[o]=!0)}for(var s=0;s<e.length;s++){var l=[].concat(e[s]);n&&a[l[0]]||(r&&(l[2]?l[2]="".concat(r," and ").concat(l[2]):l[2]=r),t.push(l))}},t}},function(e,t,r){var n,a,i={},o=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===a&&(a=n.apply(this,arguments)),a}),s=function(e){return document.querySelector(e)},l=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var r=s.call(this,e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}}(),d=null,c=0,h=[],p=r(5);function u(e,t){for(var r=0;r<e.length;r++){var n=e[r],a=i[n.id];if(a){a.refs++;for(var o=0;o<a.parts.length;o++)a.parts[o](n.parts[o]);for(;o<n.parts.length;o++)a.parts.push(b(n.parts[o],t))}else{var s=[];for(o=0;o<n.parts.length;o++)s.push(b(n.parts[o],t));i[n.id]={id:n.id,refs:1,parts:s}}}}function m(e,t){for(var r=[],n={},a=0;a<e.length;a++){var i=e[a],o=t.base?i[0]+t.base:i[0],s={css:i[1],media:i[2],sourceMap:i[3]};n[o]?n[o].parts.push(s):r.push(n[o]={id:o,parts:[s]})}return r}function f(e,t){var r=l(e.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=h[h.length-1];if("top"===e.insertAt)n?n.nextSibling?r.insertBefore(t,n.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),h.push(t);else if("bottom"===e.insertAt)r.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var a=l(e.insertInto+" "+e.insertAt.before);r.insertBefore(t,a)}}function g(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=h.indexOf(e);t>=0&&h.splice(t,1)}function v(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),y(t,e.attrs),f(e,t),t}function y(e,t){Object.keys(t).forEach((function(r){e.setAttribute(r,t[r])}))}function b(e,t){var r,n,a,i;if(t.transform&&e.css){if(!(i=t.transform(e.css)))return function(){};e.css=i}if(t.singleton){var o=c++;r=d||(d=v(t)),n=w.bind(null,r,o,!1),a=w.bind(null,r,o,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",y(t,e.attrs),f(e,t),t}(t),n=C.bind(null,r,t),a=function(){g(r),r.href&&URL.revokeObjectURL(r.href)}):(r=v(t),n=$.bind(null,r),a=function(){g(r)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else a()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=o()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var r=m(e,t);return u(r,t),function(e){for(var n=[],a=0;a<r.length;a++){var o=r[a];(s=i[o.id]).refs--,n.push(s)}e&&u(m(e,t),t);for(a=0;a<n.length;a++){var s;if(0===(s=n[a]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete i[s.id]}}}};var k,x=(k=[],function(e,t){return k[e]=t,k.filter(Boolean).join("\n")});function w(e,t,r,n){var a=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=x(t,a);else{var i=document.createTextNode(a),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(i,o[t]):e.appendChild(i)}}function $(e,t){var r=t.css,n=t.media;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}function C(e,t,r){var n=r.css,a=r.sourceMap,i=void 0===t.convertToAbsoluteUrls&&a;(t.convertToAbsoluteUrls||i)&&(n=p(n)),a&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");var o=new Blob([n],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var r=t.protocol+"//"+t.host,n=r+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var a,i=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?e:(a=0===i.indexOf("//")?i:0===i.indexOf("/")?r+i:n+i.replace(/^\.\//,""),"url("+JSON.stringify(a)+")")}))}},function(e,t,r){"use strict";let n,a;r.r(t),r.d(t,"dataset",(function(){return X})),r.d(t,"datasetMetadata",(function(){return Z})),r.d(t,"swarmData",(function(){return J})),r.d(t,"dataSetPercentile",(function(){return q})),r.d(t,"networkData",(function(){return K})),r.d(t,"networkHierarchy",(function(){return Q})),r.d(t,"animalIds",(function(){return ee})),r.d(t,"addToDataset",(function(){return te})),r.d(t,"setDataSetPercentile",(function(){return re})),r.d(t,"setMetaData",(function(){return ne})),r.d(t,"setSwarmData",(function(){return ae})),r.d(t,"setDatasetFeature",(function(){return ie})),r.d(t,"setNetworkData",(function(){return oe})),r.d(t,"setHierarchyData",(function(){return se})),r.d(t,"setAnimalIds",(function(){return le}));colorbrewer.BuYlBu;let i={};var o=r(0);let s=!0;function l(e){s="boolean"==typeof e&&e}function d(){l(!1),$("#play-button").removeClass("active"),$("#play-button").prop("disabled",!0),$("#play-icons").hide(),$("#play-loading").show()}function c(){l(!0),$("#play-button").addClass("active"),$("#play-button").prop("disabled",!1),$("#play-loading").hide(),$("#play-icons").show()}function h(e){let t=[.05,.25,.5,.75,.95],r=[];if(0===e.length)return 0;e.sort((function(e,t){return e-t}));for(let n=0;n<t.length;n++){let a=(e.length-1)*t[n],i=Math.floor(a),o=i+1,s=a%1;o>=e.length?r.push(e[i]):r.push(e[i]*(1-s)+e[o]*s)}return r}function p(){$(".draw-details").click((function(){$(this).find("input:checkbox").prop("checked")?new C(this,J).disableLineChart():($(".trendChartData").hide(),$("#trendChartLegend").hide(),$("#lineChartLegend").show(),$(".lineChartButton").prop("checked",!0).prop("disabled",!1),$(".line-chart-check-box").attr("disabled",!1),$(".lineChartLine").attr("visibility","visible"))}))}String.prototype.hashCode=function(){var e,t=0;if(0===this.length)return t;for(e=0;e<this.length;e++)t=(t<<5)-t+this.charCodeAt(e),t|=0;return t},d3.selection.prototype.moveToBack=function(){return this.each((function(){var e=this.parentNode.firstChild;e&&this.parentNode.insertBefore(this,e)}))};let u,m,f,g,v={},y=1;class b{constructor(){this.indexTime=0,this.svgContainer=d3.select("#main-vis"),this.zoom=d3.zoom().scaleExtent([1,6]).on("zoom",()=>{d3.event.transform.x=Math.min(0,this.tankWidth*(d3.event.transform.k-1),Math.max(this.tankWidth*(1-d3.event.transform.k),d3.event.transform.x)),d3.event.transform.y=Math.min(0,this.tankHeight*(d3.event.transform.k-1),Math.max(this.tankHeight*(1-d3.event.transform.k),d3.event.transform.y)),this.zoomGroup.attr("transform",d3.event.transform),gXaxis.call(xAxis.scale(d3.event.transform.rescaleX(m))),gYaxis.call(yAxis.scale(d3.event.transform.rescaleY(f)))}),this.zoomGroup=this.svgContainer.append("svg:g"),this.tank=this.zoomGroup.append("svg:g").attr("class","tank").attr("transform",()=>"scale("+(parameters.inverted_x?-1:1)+","+(parameters.inverted_y?-1:1)+")"),this.activeScale="black",this.colorScale={type:"Linear",color:colorbrewer.BuYlBu},this.legendWidth=550,this.legendHeight=60,this.svgLegend=d3.select("#main-vis-legend-div").append("svg").attr("id","main-vis-legend").attr("width",this.legendWidth).attr("height",this.legendHeight),this.medoidAnimal=-1,this.activeAnimals=[],this.arrayAnimals=X.filter(e=>e.t===this.indexTime),this.id=$(".show-dendrogram.btn-primary").attr("data"),this.playBoolean=!0,this.hierarchyLevels={},this.hierarchyGroupStdev={},this.brush=d3.brush().extent([[0,0],[this.tankWidth,this.tankHeight]]),this.svgLegend_netw=d3.select("#hierarchy-legend-div"),this.dendrozoom=this.zoomGroup,this.networkColor={},this.hierarchyColors={},this.networkHierarchy=Q,this.spatialView=d3.select(".tank")}setIndexTime(e){"number"==typeof e&&this.indexTime<=J.length?this.indexTime=e:this.indexTime=0}setActiveScale(e){this.activeScale=e}setActiveAnimals(e){this.activeAnimals=e}decIndexTime(){this.indexTime=this.indexTime-1}updateLineChart(){if(d3.select("#lineChartTimeLine")&&J[Math.ceil(this.indexTime/y)]){let e=Math.ceil(this.indexTime/y);this.indexTime%25==0&&(d3.select("#convex_hull_areaLineValue").text(J[e].convex_hull_area+"mm²"),d3.select("#speedLineValue").text(J[e].speed+"mm/s"),d3.select("#accelerationLineValue").text(J[e].acceleration+"mm/s²"),d3.select("#distance_centroidLineValue").text(J[e].distance_centroid+"mm"),d3.select("#directionLineValue").text(J[e].direction+"°"),d3.select("#polarisationLineValue").text(J[e].polarisation)),d3.select("#lineChartTimeLine").attr("transform","translate("+g(e)+",0)")}}returnColorScale(){return"Linear"===this.colorScale.type?d3.scaleLinear().domain(q[this.activeScale]).range(this.colorScale.color):"Threshold"===this.colorScale.type?d3.scaleThreshold().domain(q[this.activeScale]).range(this.colorScale.color):void 0}initColorPicker(){d3.select(".colors-body").selectAll(".palette").data(d3.entries(colorbrewer)).enter().append("span").attr("class","palette").attr("title",e=>e.key).on("click",e=>{$(".palette").removeClass("selected"),$('.palette[title="'+e.key+'"]').addClass("selected"),this.colorScale.color=colorbrewer[e.key],this.changelegend(),$("#play-button").hasClass("active")||(this.decIndexTime(),this.draw())}).selectAll(".swatch").data(e=>e.value).enter().append("span").attr("class","swatch").style("background-color",e=>e),$('.palette[title="BuYlBu"]').addClass("selected")}changelegend(){let e,t;if($("#main-vis-legend-div").show(),"black"!==this.activeScale){var r=this.returnColorScale();e=this.svgLegend.selectAll("rect.legend").data(r.range()),t=this.svgLegend.selectAll("text.legend-text").data(r.domain())}else e=this.svgLegend.selectAll("rect.legend").data([]),t=this.svgLegend.selectAll("text.legend-text").data([]),$("#main-vis-legend-div").hide();e.style("fill",(function(e){return e})),e.enter().append("rect").attr("class","legend").attr("width",50).attr("height",20).attr("y",0).attr("x",(function(e,t){return 50+50*t+"px"})).style("fill",(function(e){return e})),e.exit().remove(),t.text((function(e){return Math.ceil(2*e)/2})),t.enter().append("text").attr("class","legend-text").attr("y",40).attr("x",(function(e,t){return 50+50*t+5+"px"})).text((function(e){return Math.ceil(2*e)/2})),t.exit().remove()}draw(){let e=$('input[type="radio"].group-playback-rate:checked').val(),t=$('input[type="radio"].group-size:checked').val();this.arrayAnimals=X.filter(e=>e.t===this.indexTime),setTimeout(()=>{var e;this.drawDendrogram(),this.svgContainer.select(".frame-text").text(Math.floor(this.indexTime/1500)%60+":"+Math.floor(this.indexTime/parameters.fps)%60+"::"+this.indexTime%parameters.fps),this.indexTime%parameters.fps==0&&(e=this.indexTime,n.slider("value",e));let r,s=this.tank.selectAll("g.animal").data(this.arrayAnimals);if(this.indexTime in K){let e=K[this.indexTime];if(M={},e=e.map(e=>{let t=this.arrayAnimals.filter((function(t){return t.a===e.s}))[0],r=this.arrayAnimals.filter((function(t){return t.a===e.e}))[0];return{node1:t.a,node2:r.a,start:t.p,end:r.p,val:e.v}}),e.forEach((function(e){$("#mc-"+e.node1+"-"+e.node2).css("fill",G(e.val)),$("#mc-"+e.node2+"-"+e.node1).css("fill",G(e.val))})),I){let t=[];for(let r=0;r<e.length;r++)t.push(e[r].val);U(function(e){if(0===e.length)return 0;e.sort((function(e,t){return e-t}));let t=.05*(e.length-1),r=Math.floor(t),n=r+1,a=t%1;return n>=e.length?1-e[r]:1-(e[r]*(1-a)+e[n]*a)}(t))}e=e.filter((function(e){return e.val<=1-W})),r=this.tank.select("#network-group").selectAll("line.network-edges").data(e),r.attr("x1",(function(e){return e.start[0]})).attr("y1",(function(e){return-e.start[1]})).attr("x2",(function(e){return e.end[0]})).attr("y2",(function(e){return-e.end[1]})).attr("stroke",(function(e){return G(1-e.val)})).attr("stroke-opacity",(function(e){return 1-e.val})),r.enter().append("line").attr("class","network-edges").attr("x1",(function(e){return e.start[0]})).attr("y1",(function(e){return-e.start[1]})).attr("x2",(function(e){return e.end[0]})).attr("y2",(function(e){return-e.end[1]})).attr("stroke",(function(e){return G(e.val)})).attr("stroke-opacity",(function(e){return e.val}))}else r=this.tank.selectAll("line.network-edges").data([]);var l,d;r.exit().remove(),$("#draw-triangulation").is(":checked")?((l=this.tank.select("#delaunay-triangulation-group").selectAll("path.delaunay-triangulation").data([J[this.indexTime].triangulation])).attr("d",e=>e),l.enter().append("path").attr("class","delaunay-triangulation").attr("d",e=>e)):l=this.tank.selectAll("path.delaunay-triangulation").data([]),l.exit().remove(),$("#draw-voronoi").is(":checked")?((d="voronoi"in J[0]?this.tank.select("#vornoi-group").selectAll("path.voronoi").data(J[this.indexTime].voronoi.split(";")):this.tank.select("#vornoi-group").selectAll("path.voronoi").data([J[this.indexTime].voronoi])).attr("d",e=>e),d.enter().append("path").attr("class","voronoi").attr("d",e=>e)):d=this.tank.select("#vornoi-group").selectAll("path.voronoi").data([]),d.exit().remove();let c=s.enter().append("g").attr("class","animal").attr("id",e=>"animal-"+e.a);if(c.append("circle").attr("r",1.5*t).attr("cx",e=>e.p[0]).attr("cy",e=>-e.p[1]).on("mouseover",e=>{!function(e){for(let t=0;t<Z.length;t++)e.a===Z[t].animal_id&&(a.style("left",d3.event.pageX+5+"px").style("top",d3.event.pageY-100+"px").style("opacity",1),a.select("#tooltip-animal-id").html(Z[t].animal_id),a.select("#tooltip-species").html(Z[t].species),a.select("#tooltip-sex").html(Z[t].sex),a.select("#tooltip-size").html(Z[t].size),a.select("#tooltip-weight").html(Z[t].weight))}(e)}).on("mouseout",()=>{a.transition().duration(500).style("opacity",0)}).on("click",e=>{this.activeAnimals.includes(e.a)?this.activeAnimals=this.activeAnimals.filter(t=>t!==e.a):this.activeAnimals.push(e.a),$("#play-button").hasClass("active")||(this.indexTime--,this.draw())}),s.select("circle").attr("cx",e=>e.p[0]).attr("cy",e=>-e.p[1]).attr("r",t),c.append("svg:defs").append("svg:marker").attr("id",e=>"arrow-marker-"+e.a).attr("refX",2).attr("refY",6).attr("markerWidth",13).attr("markerHeight",13).attr("orient","auto").append("svg:path").attr("d","M2,2 L2,11 L10,6 L2,2"),c.append("line").attr("class","arrow").attr("marker-end",e=>"url(#arrow-marker-"+e.a+")"),$("#draw-direction").is(":checked")?s.select("line").attr("x1",e=>e.p[0]).attr("y1",e=>-e.p[1]).attr("x2",e=>e.p[0]+2*t).attr("y2",e=>-e.p[1]).attr("transform",e=>"rotate("+-e.direction+" "+e.p[0]+" "+-e.p[1]+")"):$(".arrow").hide(),s.exit().remove(),$("#draw-convex-hull").is(":checked")){var h=this.tank.selectAll("path.hull-path").data([J[this.indexTime].convex_hull]);h.attr("d",e=>e),h.enter().append("path").attr("class","hull-path").attr("d",e=>e)}else h=this.tank.select("path.hull-path").data([]);if(h.exit().remove(),"black"!==this.activeScale){var p=this.returnColorScale();s.transition().duration(10).style("fill",e=>p(e[this.activeScale])).attr("stroke",e=>p(e[this.activeScale]))}else s.style("fill","#000").attr("stroke","#000"),$.isEmptyObject(i)||Object.keys(i).forEach((function(e){d3.select("#animal-"+e).style("fill",i[e]).attr("stroke",i[e])}));this.activeAnimals.length?(s.style("opacity",e=>this.activeAnimals.includes(e.a)?1:.25),$("#remove-active-selected-button").is(":disabled")&&($("#remove-active-selected-button").prop("disabled",!1),$("#visual-parameter-button").prop("disabled",!1)),o.trackingBoolean&&Object(o.addTrackedData)(this.arrayAnimals[0].t,this.activeAnimals)):($("#remove-active-selected-button").is(":disabled")||($("#remove-active-selected-button").prop("disabled",!0),$("#visual-parameter-button").prop("disabled",!0)),s.style("opacity",1)),d3.select(".centroid").attr("cx",()=>"centroid"in J[0]?J[this.indexTime].centroid[0]:0).attr("cy",()=>"centroid"in J[0]?-J[this.indexTime].centroid[1]:0),$("#draw-direction").is(":checked")&&J[this.indexTime].centroid&&$("#draw-centroid").is(":checked")?(d3.select("#centroid-line").classed("hidden",!1),d3.select("#centroid-line").attr("x1",()=>J[this.indexTime].centroid[0]).attr("y1",()=>-J[this.indexTime].centroid[1]).attr("x2",()=>J[this.indexTime].centroid[0]+2*t).attr("y2",()=>-J[this.indexTime].centroid[1]).attr("transform",()=>"rotate("+-J[this.indexTime].direction+" "+J[this.indexTime].centroid[0]+" "+-J[this.indexTime].centroid[1]+")")):d3.select("#centroid-line").attr("class","hidden"),-1!==this.medoidAnimal&&(d3.selectAll("#animal-"+this.medoidAnimal).classed("medoid",!1),this.medoidAnimal=J[this.indexTime].medoid,d3.selectAll("#animal-"+this.medoidAnimal).classed("medoid",!0)),this.indexTime++,this.updateLineChart(),this.indexTime>=J.length?(this.indexTime=0,this.draw()):this.playBoolean&&this.draw()},e)}initDendrogram(){let e=d3.zoom().scaleExtent([1,10]).on("zoom",()=>{d3.event.transform.x=Math.min(0,5e3*(d3.event.transform.k-1),Math.max(5e3*(1-d3.event.transform.k),d3.event.transform.x)),d3.event.transform.y=Math.min(0,5e3*(d3.event.transform.k-1),Math.max(5e3*(1-d3.event.transform.k),d3.event.transform.y)),this.dendrozoom.attr("transform",d3.event.transform)}),t=d3.select("#dendrogram-panel").classed("svg-dendrogram-container",!0).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 5000 5000").classed("svg-content-dendrogram",!0).call(e);z(),this.dendrozoom=t.append("g").attr("transform","translate(20,20)").append("svg:g");let r;d3.tree().size([4800,4800]);this.spatialView=d3.select(".tank"),$("#dendrogram-panel-level-slider").slider({range:"max",min:2,max:2,step:1,value:this.hierarchyLevels.h0,slide:(e,t)=>{let r=$(".show-dendrogram.btn-primary").attr("data");this.setHierarchyLevel(r,t.value),this.updateDendrogram(),$("#play-button").hasClass("active")||(this.decIndexTime(),this.draw(),this.drawDendrogram())}}),r=d3.select("#dendrogram-tooltip").style("left","0px").style("top","0px").on("mouseover",(function(){r.style("opacity",1)}));let n=100*j;this.svgLegend_netw=d3.select("#hierarchy-legend-div").append("svg").attr("id","hierarchy-legend").attr("width",n).attr("height",60),this.spatialView.append("defs").append("svg:pattern").attr("id","striped").attr("patternUnits","userSpaceOnUse").attr("width","20").attr("height","5").attr("patternTransform","rotate(60)").append("rect").attr("width",5).attr("height",10).attr("transform","translate(0,0)").style("fill","#67000d")}click(e){setActiveAnimals(e.data.name),$("#play-button").hasClass("active")||(this.decIndexTime(),this.draw())}sethierarchyGroupStdev(e,t){e in this.hierarchyGroupStdev?this.hierarchyGroupStdev[e].push(t):this.hierarchyGroupStdev[e]=[t]}resethierarchyGroupStdev(){this.hierarchyGroupStdev={}}getHierarchyLevel(e,t){let r=[],n=this.hierarchyLevels["h"+t],a=e.children;for(let t=1;t<e.height;t++){if(a[0]&&a[0].depth===n){a.forEach((function(e){void 0!==e.data.name&&r.push(e.data.name)}));break}let e=[];a.forEach((function(t){void 0!==t.children&&(e=e.concat(t.children))})),a=e}return r}setHierarchyLevel(e,t){this.hierarchyLevels["h"+e]=t}setHierarchyColor(e){console.log("sets color");for(let t in this.networkColor)if(t==="h"+e)return console.log("same color"),void(this.hierarchyColors["h"+e]=this.networkColor[t]);console.log(this.hierarchyColors);for(let t=0;t<H.length;t++){let r=!0;for(let e in this.hierarchyColors)this.hierarchyColors.hasOwnProperty(e)&&this.hierarchyColors[e]===H[t]&&(r=!1);if(r){if(0===Object.keys(this.networkColor).length)return void(this.hierarchyColors["h"+e]=H[t]);for(let r in this.networkColor)if(this.networkColor[r]!==H[t])return void(this.hierarchyColors["h"+e]=H[t])}}}removeHierarchyColor(e){delete this.hierarchyColors["h"+e]}removeHierarchyLevel(e){delete this.hierarchyLevels["h"+e]}updateDendrogram(){let e=$(".show-dendrogram.btn-primary").attr("data"),t=$(".show-dendrogram.btn-primary").attr("name");$("#dendrogram-panel-name").text(t),$("#dendrogram-panel-level-slider").val(this.hierarchyLevels["h"+e]),$("#dendrogram-panel-level-text").text(this.hierarchyLevels["h"+e])}getHierarchyVertices(e){let t=[];return e.forEach(e=>{let r=[];for(let t=0;t<e.length;t++){let n=this.arrayAnimals.find(r=>r.a===e[t]);n&&r.push([n.p[0],-n.p[1]])}r.length>=3&&t.push(d3.polygonHull(r))}),t}drawHierarchy(){console.log("hierarchy drawn");let e=Object.keys(this.networkHierarchy).map((function(e){return e.replace("h","")})),t=[];for(let r=0;r<e.length;r++){let n=this.networkHierarchy["h"+e[r]][this.indexTime],a=d3.hierarchy(n,(function(e){return e.children})),i=20,o=5e3,s=5e3;a=d3.tree().size([s-10*i,o-10*i])(a);let l=a.children[0];E===e[r]&&(networkHierarchyIds=this.getHierarchyLevel(l,e[r])),t.push(this.getHierarchyVertices(this.getHierarchyLevel(l,e[r])))}t.length,this.spatialView=d3.select(".tank");let r=this.spatialView.selectAll("g.hierarchy-group").data(t);r.enter().append("g").attr("class",(function(t,r){return"hierarchy-group h"+e[r]})).style("fill",(t,r)=>this.hierarchyColors["h"+e[r]]).attr("stroke",(t,r)=>this.hierarchyColors["h"+e[r]]).moveToBack(),r.attr("class",(function(t,r){return"hierarchy-group h"+e[r]})),r.exit().remove();let n=r.selectAll("path.hierarchy-hull-path").data((function(e){return e}));n.enter().append("path").attr("class","hierarchy-hull-path").attr("d",(function(e){return"M"+e.join("L")+"Z"})),n.attr("d",(function(e){return"M"+e.join("L")+"Z"})),n.exit().remove()}addHighlightSpatialView(e){console.log("highlights");let t=[];for(let r=0;r<e.length;r++){let n=this.spatialView.select("#animal-"+e[r]),a=n.data()[0].p;t.push([a[0],-a[1]]),n.classed("animal-highlight",!0)}this.spatialView.append("path").attr("class","highlight-hierarchy").attr("d","M"+d3.polygonHull(t).join("L")+"Z")}removeHighlightSpatialView(){d3.selectAll(".animal").classed("animal-highlight",!1),d3.selectAll(".highlight-hierarchy").remove()}drawDendrogram(){var e=t=>{t.children&&t.depth<=2?(t._children=t.children,t._children.forEach(e)):t.children=0};let t=$(".show-dendrogram.btn-primary").attr("data");if(!$.isEmptyObject(this.networkHierarchy)&&t){let n=this.networkHierarchy["h"+t][this.indexTime],a=d3.hierarchy(n,(function(e){return e.children}));a=a.children[0],a.children.forEach(e);let i=20,o=5e3,s=5e3;if(a=d3.tree().size([s-10*i,o-10*i])(a),$(".show-dendrogram.btn-primary").length){$("#dendrogram-panel-level-slider").slider("option","max",a.height-1).slider("value",this.hierarchyLevels["h"+t]);let e=this.dendrozoom.selectAll("path.link").data(a.descendants().slice(1));e.enter().append("path").attr("class","link").attr("d",D),e.attr("d",D),e.exit().remove();let n=this.dendrozoom.selectAll(".node").data(a.descendants());var r=n.enter().append("g").attr("class",(function(e){return"node"+(e.children?" node--internal":" node--leaf")})).attr("transform",(function(e){return"translate("+e.x+","+e.y+")"}));r.append("circle").attr("r",e=>e.depth===this.hierarchyLevels["h"+t]?40+e.data.name.length:20+e.data.name.length).attr("class",e=>{if(e.depth===this.hierarchyLevels["h"+t])return"active-level"}).attr("id",e=>"h"+e.data.name.toString().hashCode()).on("click",this.click).on("mouseover",e=>{tooltipDiv.style("left",d3.event.pageX+5+"px").style("top",d3.event.pageY+5+"px").style("opacity",1),tooltipDiv.select(".tooltip-span").html(e.data.name.toString()),this.addHighlightSpatialView(e.data.name)}).on("mouseout",(function(){tooltipDiv.transition().duration(500).style("opacity",0),this.removeHighlightSpatialView()})),r.append("text").attr("class","dendrogram-text").attr("x",150).attr("y",-150).text(e=>e.data.name.length),r.attr("transform",e=>"translate("+e.x+","+e.y+")"),n.attr("transform",e=>"translate("+e.x+","+e.y+")").select("circle").attr("r",e=>e.depth===this.hierarchyLevels["h"+t]?40+e.data.name.length:20+e.data.name.length).attr("class",e=>e.depth===this.hierarchyLevels["h"+t]?"active-level":"").attr("id",e=>"h"+e.data.name.toString().hashCode()),n.select("text").text(e=>e.data.name.length),n.exit().remove(),Object.keys(this.hierarchyGroupStdev).length?(console.log("runs"),"none"==$("#dendrogram-legend").css("display")&&$("#dendrogram-legend").show(),setTimeout(()=>{n.select("circle").style("fill",(function(e){return"h"+e.data.name.toString().hashCode()in M?standardDeviationColorScale(standardDeviation(M["h"+e.data.name.toString().hashCode()])):e.depth!==(void 0)["h"+this.id]?"":"#000"}))},250)):"none"!==$("#dendrogram-legend").css("display")&&$("#dendrogram-legend").hide()}}$.isEmptyObject(this.networkHierarchy)||this.drawHierarchy()}changeHierarchyLegend(){let e,t;console.log(Object.keys(this.hierarchyColors).length),0!==Object.keys(this.hierarchyColors).length||0!==Object.keys(this.networkColor).length?(console.log("applys"),$("#hierarchy-legend-div").show()):$("#hierarchy-legend-div").hide();let r=[],n=[];if($(".show-dendrogram").each((e,t)=>{null!=this.hierarchyColors["h"+$(t).attr("data")]&&null!=$(t).attr("name")&&(r.push(this.hierarchyColors["h"+$(t).attr("data")]),n.push($(t).attr("name")))}),0!==Object.keys(this.networkColor).length)for(let e in this.networkColor)-1===r.indexOf(this.networkColor[e])&&(r.push(this.networkColor[e]),n.push("Network"));e=this.svgLegend_netw.selectAll("rect.legend").data(r),t=this.svgLegend_netw.selectAll("text.legend-text").data(n),e.style("fill",(function(e){return e})),e.enter().append("rect").attr("class","legend").attr("width",50).attr("height",20).attr("y",0).attr("x",(function(e,t){return 50+2.5*t*50+"px"})).style("fill",(function(e){return e})),e.exit().remove(),t.text((function(e){return e})),t.enter().append("text").attr("class","legend-text").attr("y",40).attr("x",(function(e,t){return 50+2.5*t*50+"px"})).text((function(e){return e})),t.exit().remove()}setnetworkColor(e){e>=0?this.networkColor["h"+e]="#08306b":(console.log("color nothing"),this.networkColor={}),this.changeHierarchyLegend()}setHierarchyData(e,t){0===Object.keys(e).length&&e.constructor===Object?(delete this.networkHierarchy["h"+t],this.removeHierarchyLevel(t),this.removeHierarchyColor(t)):(this.networkHierarchy["h"+t]=e,this.setHierarchyLevel(t,2),this.setHierarchyColor(t)),this.changeHierarchyLegend()}getNetworkHierarchyData(e){$.ajax({url:"/api/dataset/network/hierarchy/"+parameters.id+"/"+e,dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:"application/vnd.api+json"},success:t=>{t.length&&this.setHierarchyData(JSON.parse(t[0].hierarchy),e),c()}})}}class k extends b{constructor(e){super(e),this.spatialViewInit()}cp_listener(){$("#play-button").click(()=>{!0===$("#play-button").hasClass("active")?(this.playBoolean=!1,$(".mdi-pause").hide(),$(".mdi-play").show()):(this.playBoolean=!0,$(".mdi-play").hide(),$(".mdi-pause").show(),this.setIndexTime(n.slider("value")),$(".brush").remove(),this.draw())}),$("#next-frame-button").click(()=>{!0===$("#play-button").hasClass("active")&&(this.playBoolean=!1),$("#play-button").removeClass("active"),this.draw()}),$("#brushing-button").click(()=>{this.playBoolean=!1,$("#play-button").removeClass("active"),$("#brushing-button").hasClass("active")?$(".brush").remove():(this.brush=d3.brush().extent([[0,0],[this.tankWidth,this.tankHeight]]).on("end",()=>{var e=d3.event.selection;this.activeAnimals=[],this.arrayAnimals.map(t=>{var r=[t.p[0],t.p[1]];e[0][0]<=r[0]&&r[0]<=e[1][0]&&e[0][1]<=r[1]&&r[1]<=e[1][1]&&this.activeAnimals.push(t.a)}),console.log(this.activeAnimals),$("#play-button").hasClass("active"),$("#brushing-button").removeClass("active"),$(".brush").remove()}),d3.select("#main-vis-svg").append("g").attr("class","brush").call(this.brush))}),$("#remove-active-selected-button").click(()=>{$("#remove-active-selected-button").is(":disabled")||($("#remove-active-selected-button").prop("disabled",!0),this.setActiveAnimals([]),resetTrackedData(),$("#visual-parameter-button").prop("disabled",!0).removeClass("active"),$("#play-button").hasClass("active")||(this.decIndexTime(),this.draw()))}),$("#visual-parameter-button").click(()=>{!0===$("#visual-parameter-button").hasClass("active")?setTrackingBoolean(!1):setTrackingBoolean(!0)}),$("#calculate-parameter-button").click(()=>{$("#calculate-parameter-button").hasClass("active")||(setTrackingBoolean(!1),sendTrackedData(),$("#calculate-parameter-button").prop("disabled",!0),$("#calculate-parameter-button").removeClass("active"),$("#visual-parameter-button").removeClass("active"))}),$("#background-color").change(()=>{let e=$('input[type="radio"].group-background:checked').val();$("#main-vis-svg").css("background-color",e)}),$("#draw-axis").on("change",()=>{this.checked?($("#main-vis g.x.axis").show(),$("#main-vis g.y.axis").show()):($("#main-vis g.x.axis").hide(),$("#main-vis g.y.axis").hide())}),$("#draw-time").on("change",()=>{this.checked?$("#main-vis .frame-text").show():$("#main-vis .frame-text").hide()}),$("#network-background").on("change",()=>{this.checked?setNetworkBackground(!0):setNetworkBackground(!1)}),$("#network-background-limit").val(1),$("#network-background-limit").on("change",()=>{let e=$(this).val();$.isNumeric(e)&&e>0?setNetworkBackgroundLimit(e):$(this).val(1)}),$("#color-scale-radio-form input").on("change",()=>{this.colorScale.type=$("input[name=color-scale-radio]:checked","#color-scale-radio-form").val(),$("#play-button").hasClass("active")||(this.decIndexTime(),this.draw())})}sf_listeners(){$("#draw-direction").click(()=>{$("#draw-direction").is(":checked")?("direction"in X[0]||(d(),Y("direction")),$(".arrow").show()):$(".arrow").hide(),$("#play-button").hasClass("active")||this.decIndexTime()}),$("#draw-medoid").click(()=>{$("#draw-medoid").is(":checked")?("medoid"in J[0]||F("medoid"),this.setMedoidAnimal(J[this.indexTime].medoid),d3.selectAll("#animal-"+this.medoidAnimal).classed("medoid",!0)):(d3.selectAll("#animal-"+this.medoidAnimal).classed("medoid",!1),this.setMedoidAnimal(-1))}),$("#draw-centroid").click(()=>{$("#draw-centroid").is(":checked")?("centroid"in J[0]||F("centroid"),$("#g-centroid").show()):$("#g-centroid").hide()}),$("#draw-convex-hull").click(()=>{$("#draw-convex-hull").is(":checked")&&("hull"in J[0]||F("convex_hull"))}),$("#draw-triangulation").click(()=>{$("#draw-triangulation").is(":checked")&&("triangulation"in J[0]||F("triangulation"),$("#play-button").hasClass("active")||this.decIndexTime())}),$("#draw-voronoi").click(()=>{$("#draw-voronoi").is(":checked")&&("voronoi"in J[0]||F("voronoi"),$("#play-button").hasClass("active")||this.decIndexTime())})}af_listeners(){$("#draw-speed").click(()=>{$(".draw-details").hide().find("input:checkbox").prop("checked",!0).click(),$("#draw-speed").is(":checked")?("speed"in X[0]||(d(),Y("speed")),$("#draw-speed-details").show(),$("#draw-acceleration").prop("checked",!1),$("#draw-distance_centroid").prop("checked",!1),$("#draw-midline_offset").prop("checked",!1),this.setActiveScale("speed")):($("#draw-speed-details").hide(),this.setActiveScale("black")),d3.selectAll(".colorLegend *").remove(),this.changelegend(),$("#play-button").hasClass("active")||this.decIndexTime()}),$("#draw-acceleration").click(()=>{$(".draw-details").hide().find("input:checkbox").prop("checked",!0).click(),$("#draw-acceleration").is(":checked")?("acceleration"in X[0]||(d(),Y("acceleration")),$("#draw-acceleration-details").show(),$("#draw-speed").prop("checked",!1),$("#draw-distance_centroid").prop("checked",!1),$("#draw-midline_offset").prop("checked",!1),this.setActiveScale("acceleration")):($("#draw-acceleration-details").hide(),this.setActiveScale("black")),$(".draw-details.active").click(),d3.selectAll(".colorLegend *").remove(),this.changelegend(),$("#play-button").hasClass("active")||this.decIndexTime()}),$("#draw-distance_centroid").click(()=>{$(".draw-details").hide().find("input:checkbox").prop("checked",!0).click(),$("#draw-distance_centroid").is(":checked")?(console.log("checked"),"distance_centroid"in X[0]||(d(),Y("distance_centroid")),console.log(X),$("#draw-distance_centroid-details").show(),$("#draw-speed").prop("checked",!1),$("#draw-acceleration").prop("checked",!1),$("#draw-midline_offset").prop("checked",!1),this.setActiveScale("distance_centroid")):(console.log("black"),$("#draw-distance_centroid-details").hide(),this.setActiveScale("black")),$(".draw-details.active").click(),d3.selectAll(".colorLegend *").remove(),this.changelegend(),$("#play-button").hasClass("active")||this.decIndexTime()}),$("#draw-midline_offset").click(()=>{$(".draw-details").hide().find("input:checkbox").prop("checked",!0).click(),$("#draw-midline_offset").is(":checked")?("draw-midline_offset"in X[0]||(d(),Y("midline_offset")),$("#draw-midline_offset-details").show(),$("#draw-speed").prop("checked",!1),$("#draw-acceleration").prop("checked",!1),$("#draw-distance_centroid").prop("checked",!1),T("midline_offset")):T("black"),$(".draw-details.active").click(),d3.selectAll(".colorLegend *").remove(),this.changelegend(),$("#play-button").hasClass("active")||(this.decIndexTime(),this.draw())})}md_listeners(){$(".metadata-swatch.metadata-swatch-clickable").click((function(){let e=$(this).attr("value"),t=$(this).css("background-color");$("#metadata-row-"+e+" #preview").css("background-color",t),"rgb(255, 255, 255)"===t?i[e]&&delete i[e]:i[e]=t})),$("#group-metadata :input").change((function(){resetIndividualMetadata();let e=$(this).attr("value"),t=[];if("sex"===e){$("#metadata-div").modal("toggle");for(let r=0;r<Z.length;r++)t.push(Z[r][e].toLowerCase());t=Array.from(new Set(t));let r=["#7fc97f","#386cb0"];for(let n=0;n<Z.length;n++)for(let a=0;a<t.length;a++)Z[n][e].toLowerCase()===t[a]&&(i[Z[n].animal_id]=r[a]);$("#metadata-input").hide()}else{$("#metadata-input").show();for(let r=0;r<Z.length;r++)t.push(Z[r][e]);let r=d3.quantile(t,.25),n=d3.quantile(t,.75);$("#bl-avg").val(r),$("#ab-avg").val(n),colorMetadata()}})),$(".number-spinner button").click((function(){let e=$(this),t=e.closest(".number-spinner").find("input").val().trim(),r=0;r="up"==e.attr("data-dir")?parseFloat(t)+.1:t>0?parseFloat(t)-.1:0,r=Math.round(100*r)/100,e.closest(".number-spinner").find("input").val(r),colorMetadata()})),$(".number-spinner input").on("input",(function(){colorMetadata()})),$("#metadata-reset").click((function(){$("#metadata-input").hide(),resetIndividualMetadata()}))}initShowDendrogramListener(e){$("#show-dendrogram-"+e).click((function(){let e=$(this).attr("id");$(".show-dendrogram").each((function(t,r){$(r).attr("id")===e&&!1===$(r).hasClass("btn-primary")?($(r).addClass("btn-primary"),$(r).find("#btn-left").hide(),$(r).find("#btn-right").show()):($(r).removeClass("btn-primary"),$(r).find("#btn-left").show(),$(r).find("#btn-right").hide())})),$(".show-dendrogram.btn-primary").length?$("#dendrogram-panel").show():$("#dendrogram-panel").hide(),$("#play-button").hasClass("active")||(this.decIndexTime(),this.draw(),this.drawDendrogram())}))}h_listeners(){var e;$(".hiearchy-checkbox").on("change",(function(){e=$(this)})),$(".hiearchy-checkbox").on("change",()=>{console.log("jumps");let t=e.attr("data"),r=e.attr("name"),n=e.prop("checked");if(console.log(n),n&&$(".show-dendrogram").length<j)d(),this.getNetworkHierarchyData(t),function(e,t){$(".show-dendrogram").length<j&&($("#dendrogram-buttons-div").append('<button type="button" id="show-dendrogram-'+e+'" data='+e+" name="+t+' class="show-dendrogram btn btn-block" data-toggle="button" aria-pressed="false" autocomplete="off"> <span class="btn-label" id="btn-left"> <i class="mdi mdi-arrow-collapse-left"></i>&nbsp&nbsp Show '+t+'</span><span class="btn-label" id="btn-right"> <i class="mdi mdi-arrow-collapse-right"></i>&nbsp&nbsp Hide '+t+" </span></button> <br>"),$("#show-dendrogram-"+e).find("#btn-right").hide())}(t,r),this.initShowDendrogramListener(t),$("#dendrogram-buttons-div").show();else{let e=$("#show-dendrogram-"+t).hasClass("btn-primary");this.setHierarchyData({},t),function(e){$("#show-dendrogram-"+e).next().remove(),$("#show-dendrogram-"+e).remove()}(t),d3.select("g.h"+t).remove(),!0===e&&$("#dendrogram-panel").hide(),0===$(".show-dendrogram").length&&$("#dendrogram-buttons-div").hide()}$(".show-dendrogram").length?($("#main-vis-div").removeClass("col-md-12"),$("#main-vis-div").addClass("col-md-8")):($("#main-vis-div").removeClass("col-md-8"),$("#main-vis-div").addClass("col-md-12"))}),$(".network-hierarchy-checkbox").on("change",()=>{let e=$(this);$(".network-hierarchy-checkbox").prop("checked",!1),e.prop("checked",!0),e.prop("checked")?setNetworkHierarchy(e.attr("data")):setNetworkHierarchy(void 0)})}n_listeners(){var e;$("#networks-modal-body button").click((function(){e=$(this).attr("data")})),$("#networks-modal-body button").click(()=>{$("#active-network-name").text($(this).attr("name")),d(),function(e){$.ajax({url:"/api/dataset/network/"+parameters.id+"/"+e,dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:"application/vnd.api+json"},success:function(e){e.length&&oe(JSON.parse(e[0].data)),c()}}),t=e,B=t;var t}(e),this.setnetworkColor(e),$("#network-div").modal("toggle")}),$("#network-remove").click(()=>{oe({}),setNetworkID(-1),this.setnetworkColor(-1),$("#active-network-name").text("")}),$("#network-auto-suggest").click((function(){if($("#network-auto-suggest").hasClass("active")){$("#network-limit-p").show(),$("#network-slider").show(),setNetworkAuto(!1);let e=$("#network-slider").slider("value");U(e),$("#network-limit").val(e)}else $("#network-limit-p").hide(),$("#network-slider").hide(),setNetworkAuto(!0)}))}spatialViewInit(){let e=parameters.min.geometry.coordinates,t=parameters.max.geometry.coordinates;this.tankWidth=1.02*(t[0]-e[0]),this.tankHeight=1.02*(t[1]-e[1]);let r=d3.scaleLinear().domain([e[0],t[0]]).range([e[0],t[0]]),i=d3.axisBottom(r).ticks(10).tickSize(10).tickPadding(5),o=d3.scaleLinear().domain([e[1],t[1]]).range([e[1],t[1]]),s=d3.axisRight(o).ticks(7).tickSize(10).tickPadding(5),l=d3.zoom().scaleExtent([1,6]).on("zoom",()=>{d3.event.transform.x=Math.min(0,this.tankWidth*(d3.event.transform.k-1),Math.max(this.tankWidth*(1-d3.event.transform.k),d3.event.transform.x)),d3.event.transform.y=Math.min(0,this.tankHeight*(d3.event.transform.k-1),Math.max(this.tankHeight*(1-d3.event.transform.k),d3.event.transform.y)),this.zoomGroup.attr("transform",d3.event.transform),c.call(i.scale(d3.event.transform.rescaleX(r))),h.call(s.scale(d3.event.transform.rescaleY(o)))});this.svgContainer=d3.select("#main-vis").classed("svg-container",!0).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 "+this.tankWidth+" "+this.tankHeight).classed("svg-content",!0).attr("id","main-vis-svg").call(l);let d=Math.ceil(this.tankHeight/this.tankWidth*100);$("#main-vis").append($("<style>#main-vis::after {padding-top: "+d+'%;display: block;content: "";}</style> ')),this.zoomGroup=this.svgContainer.append("svg:g"),parameters.background_image&&this.zoomGroup.append("image").attr("xlink:href","/"+parameters.background_image).attr("class","background-image").attr("height",this.tankHeight).attr("width",this.tankWidth).attr("x","0").attr("y","0"),this.tank=this.zoomGroup.append("svg:g").attr("class","tank").attr("transform",()=>"scale("+(parameters.inverted_x?-1:1)+","+(parameters.inverted_y?-1:1)+")"),this.tank.append("g").attr("id","g-centroid").append("circle").attr("class","centroid").attr("r",6).attr("cx",0).attr("cy",0),this.tank.select("#g-centroid").append("svg:defs").append("svg:marker").attr("id","centroid-arrow").attr("refX",2).attr("refY",6).attr("markerWidth",13).attr("markerHeight",13).attr("orient","auto").append("svg:path").attr("d","M2,2 L2,11 L10,6 L2,2"),this.tank.select("#g-centroid").append("line").attr("id","centroid-line").attr("marker-end","url(#centroid-arrow)"),this.tank.append("g").attr("id","network-group"),this.tank.append("g").attr("id","delaunay-triangulation-group"),this.tank.append("g").attr("id","vornoi-group"),this.svgContainer.append("text").attr("class","frame-text").attr("x",30).attr("y",30).text("-- : -- : -- ");let c=this.svgContainer.append("g").attr("class","x axis").call(i),h=this.svgContainer.append("g").attr("class","y axis").call(s);a=d3.select("div.tooltip").style("left","0px").style("top","0px").on("mouseover",(function(){a.style("opacity",1)})),function(){n=$("#slider").slider({min:0,max:J.length,step:25,slide:function(e,t){(void 0)(t.value),$("#play-button").hasClass("active")||(void 0)()}}),$("#network-slider").slider({range:"max",min:0,max:1,step:.01,value:.5,slide:function(e,t){U(t.value),$("#network-limit").val(t.value)}}),$("#network-limit").val(.5);let e=n.slider("option","max"),t=100/e;for(let r=0;r<e;r+=1500)$('<span class="ui-slider-tick"></span>').css("left",t*r+"%").appendTo(n)}(),this.initColorPicker();var p,u;new w(J);this.cp_listener(),this.sf_listeners(),this.af_listeners(),this.md_listeners(),this.n_listeners(),this.h_listeners(),this.initDendrogram(),p=this.tankHeight,u=this.tankWidth,$((function(){$("#main-vis").draggable({containment:"parent"}).resizable({aspectRatio:!0,maxWidth:$("#main-vis-div").width()}).height(.6*p).width(.6*u)})),$("input[type=checkbox]").prop("checked",!1),$("#color-scale-linear").prop("checked",!0),$("#group-size-m").prop("checked",!0),$("#background-white").prop("checked",!0),$("#settings-div input[type=checkbox]").prop("checked",!0),$("#loading").hide(),$("#play-loading").hide(),$(".mdi-play").hide(),$("#metadata-input").hide(),$("#dendrogram-buttons-div").hide(),$("#g-centroid").hide(),$("#line-chart-feature-checkboxes input[type=checkbox]").prop("checked",!0),this.draw()}setMedoidAnimal(e){this.medoidAnimal=e}}class x extends b{constructor(e){super(),this.swarmData=e,this.swarm_features=Object.keys(this.swarmData[0]),this.lineChartWidth=5e3,this.trendChartsElem=["lower-outer-area","lower-inner-area","median-line","upper-inner-area","upper-outer-area"]}}class w extends x{constructor(e){super(e),this.lineChart()}lineChart(){y=Math.ceil(this.swarmData.length/this.lineChartWidth);let e=100,t=10,r=this.swarm_features,n=r.indexOf("time");r.splice(n,1);let a=[];if(this.swarmData.length>this.lineChartWidth){let e=new Array(r.length).fill(0);for(let t=0;t<this.swarmData.length;t++){for(let n=0;n<r.length;n++)e[n]+=this.swarmData[t][r[n]];if(t%y==0){let n={time:t/y};for(let t=0;t<r.length;t++)e[t]=e[t]/y,n[r[t]]=e[t];a.push(n),e=new Array(r.length).fill(0)}}}else a=this.swarmData;g=d3.scaleLinear().domain([0,a.length]).range([0,this.lineChartWidth]),m=d3.scaleLinear().domain([0,a.length]).range([0,this.lineChartWidth]);let i=d3.scaleLinear().domain([0,a.length]).range([0,this.lineChartWidth]),o=d3.axisBottom(m).ticks(10).tickSize(10).tickPadding(5).tickFormat((function(e){return Math.floor(e*y/1500)%60+":"+Math.floor(e*y/parameters.fps)%60+"::"+e*y%parameters.fps}));f=d3.scaleLinear().domain([0,100]).range([500,0]);let s=d3.axisLeft(f).ticks(0).tickSize(10).tickPadding(5),l=()=>{let e=d3.mouse(this);if(e[0]<t||e[0]>this.lineChartWidth||e[1]<0||e[1]>500)return;let r=d3.scaleLinear().domain(g.range()).range(g.domain());this.setIndexTime(Math.floor(r(e[0]-t)*y))},d=d3.zoom().scaleExtent([1,20]).translateExtent([[0,0],[this.lineChartWidth,500]]).extent([[0,0],[this.lineChartWidth,500]]).on("zoom",()=>{let e=d3.event.transform;g=m.domain(e.rescaleX(i).domain());for(let e in b)b.hasOwnProperty(e)&&u.select("#"+e+"Line").attr("d",b[e]);for(let e in v)if(v.hasOwnProperty(e))for(let t=0;t<this.trendChartsElem.length;t++)u.select("#"+e+"TrendChart ."+this.trendChartsElem[t]).attr("d",v[e][this.trendChartsElem[t]]);h.call(o)}),c=d3.select("#swarm-vis").classed("svg-line-chart-container",!0).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 "+this.lineChartWidth+" "+(500+e)).classed("svg-content",!0);u=c.append("svg:g").attr("id","lineChartZoom").attr("transform","translate("+t+",0)");let h=u.append("g").attr("class","x axis-line-chart").attr("transform","translate(0,500)").call(o);u.append("g").attr("class","y axis-line-chart").call(s),u.append("line").attr("class","time-line").attr("id","lineChartTimeLine").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",500);let p=d3.scaleOrdinal(d3.schemeCategory10),b={};for(let e=0;e<r.length;e++){let t=d3.min(a,(function(t){return t[r[e]]})),n=d3.max(a,(function(t){return t[r[e]]})),i=d3.scaleLinear().domain([t,n]).range([0,100]),o=d3.line().x((function(e){return m(e.time)})).y((function(t){return f(i(t[r[e]]))}));b[r[e]]=o,u.append("path").data([a]).attr("id",r[e]+"Line").attr("class","line lineChartLine").style("stroke",p(e)).attr("d",o).attr("name",r[e])}$("#lineChartTimeLine").appendTo("#lineChartZoom"),u.append("rect").attr("class","zoom").attr("width",this.lineChartWidth).attr("height",500).call(d).on("click",l).call(d3.drag().on("drag",l));let k=d3.selectAll(".line");c.append("g").attr("id","lineChartLegend").attr("transform","translate("+e+",550)").selectAll("rect.legend").data(k._groups[0]).enter().each((function(e,t){d3.select(this).append("rect").attr("class","legend").attr("width",100).attr("height",50).attr("x",600*t+"px").style("fill",e.style.stroke),d3.select(this).append("text").attr("id",e.attributes.id.value+"LegendTitle").attr("class","line-chart-legend-text").attr("y",40).attr("x",600*t+100+10+"px").text(e.attributes.name.value+": "),d3.select(this).append("text").attr("id",e.attributes.id.value+"Value").attr("class","line-chart-legend-text").attr("y",40).attr("x",600*t+100+d3.select("#"+e.attributes.id.value+"LegendTitle").node().getComputedTextLength()+10+"px").text("0.0")})),c.append("g").attr("id","trendChartLegend").attr("transform","translate("+e+",550)").selectAll("rect.legend").data(["5% - 95%","25% - 75%","Median"]).enter().each((function(e,t){d3.select(this).append("rect").attr("class","legend").attr("width",100).attr("height",50).attr("x",800*t+"px").style("fill",(function(){return 0===t?"#74a9cf":1===t?"#045a8d":"#525252"})),d3.select(this).append("text").attr("class","line-chart-legend-text").attr("y",40).attr("x",800*t+100+10+"px").text(e)})),$("#trendChartLegend").hide(),this.initLineChartButtons()}initLineChartButtons(){for(let e=0;e<this.swarm_features.length;e++){let t=this.swarm_features[e].split("_").join(" ");t=t.charAt(0).toUpperCase()+t.slice(1),$("#line-chart-feature-checkboxes").append('<tr><th> <div class="pretty p-switch p-fill p-bigger"><input type="checkbox" class="line-chart-check-box" id="draw-'+this.swarm_features[e]+'" data="#'+this.swarm_features[e]+'Line" /><div class="state"><label>'+t+"</label></div></div></th></tr>")}$(".line-chart-check-box").change((function(){let e=$(this);e.prop("checked")?$(e.attr("data")).show():$(e.attr("data")).hide()}))}}class C extends x{constructor(e,t){super(t),this.elem=e,this.trendchart()}disableLineChart(){$(".lineChartButton").prop("checked",!1).prop("disabled",!0),$(".line-chart-check-box").attr("disabled",!0),$(".lineChartLine").attr("visibility","hidden")}trendchart(){let e="";if(this.elem.id.toLowerCase().includes("speed"))e="speed";else if(this.elem.id.toLowerCase().includes("acceleration"))e="acceleration";else if(this.elem.id.toLowerCase().includes("distance_centroid"))e="distance_centroid";else{if(!this.elem.id.toLowerCase().includes("midline_offset"))return;e="midline_offset"}if($("#lineChartLegend").hide(),$("#trendChartLegend").show(),$("#"+e+"TrendChart").length)$("#"+e+"TrendChart").show();else{let t=[],r=ee.length;for(let n=0;n<J.length;n++){let a=[];for(let t=0;t<r;t++)X[n*r+t]&&a.push(X[n*r+t][e]);t.push(h(a))}if(t.length>this.lineChartWidth){let e=[],r=[0,0,0,0,0];for(let n=0;n<t.length;n++){for(let e=0;e<r.length;e++)r[e]+=t[n][e];if(n%y==0){for(let e=0;e<r.length;e++)r[e]+=r[e]/y;e.push(r),r=[0,0,0,0,0]}}t=e}let n=d3.min(t,(function(e){return e[0]})),a=d3.max(t,(function(e){return e[4]})),i=d3.scaleLinear().domain([n,a]).range([0,100]),o=u.append("g").attr("id",e+"TrendChart").attr("class","trendChartData");$(".zoom").appendTo("#lineChartZoom"),$("#lineChartTimeLine").appendTo("#lineChartZoom"),v[e]={};for(let r=0;r<this.trendChartsElem.length;r++){let n;r<2?n=d3.area().x((function(e,t){return m(t)})).y0((function(e){return f(i(e[r+1]))})).y1((function(e){return f(i(e[r]))})):2===r?n=d3.line().x((function(e,t){return m(t)})).y((function(e){return f(i(e[r]))})):r>2&&(n=d3.area().x((function(e,t){return m(t)})).y0((function(e){return f(i(e[r]))})).y1((function(e){return f(i(e[r-1]))}))),v[e][this.trendChartsElem[r]]=n,o.append("path").data([t]).attr("class",this.trendChartsElem[r]).attr("d",n)}}}}function T(e){activeScale=e}let L,A={},_=d3.scaleThreshold().domain([0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]).range(["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"]);const j=4;let S={},M={},H=["#7fc97f","#386cb0","#e7298a","#ff9900"];function D(e){return"M"+e.x+","+e.y+"V"+e.parent.y+"H"+e.parent.x}function O(){let e,t;0!==Object.keys(S).length||0!==Object.keys(N).length?$("#hierarchy-legend-div").show():$("#hierarchy-legend-div").hide();let r=[],n=[];if($(".show-dendrogram").each((function(e,t){null!=S["h"+$(t).attr("data")]&&null!=$(t).attr("name")&&(r.push(S["h"+$(t).attr("data")]),n.push($(t).attr("name")))})),0!==Object.keys(N).length)for(let e in N)-1===r.indexOf(N[e])&&(r.push(N[e]),n.push("Network"));e=L.selectAll("rect.legend").data(r),t=L.selectAll("text.legend-text").data(n),e.style("fill",(function(e){return e})),e.enter().append("rect").attr("class","legend").attr("width",50).attr("height",20).attr("y",0).attr("x",(function(e,t){return 50+2.5*t*50+"px"})).style("fill",(function(e){return e})),e.exit().remove(),t.text((function(e){return e})),t.enter().append("text").attr("class","legend-text").attr("y",40).attr("x",(function(e,t){return 50+2.5*t*50+"px"})).text((function(e){return e})),t.exit().remove()}function z(){let e,t,r=d3.select("#dendrogram-panel").append("svg").attr("id","dendrogram-legend").attr("width",550).attr("height",60);$("#dendrogram-legend").hide();let n=_.range();e=r.selectAll("rect.legend").data(n),t=r.selectAll("text.legend-text").data(["low","","","","","","","","high"]),e.enter().append("rect").attr("class","legend").attr("width",50).attr("height",20).attr("y",0).attr("x",(function(e,t){return 50*t+"px"})).style("fill",(function(e){return e})),t.enter().append("text").attr("class","legend-text").attr("y",40).attr("x",(function(e,t){return 50*t+"px"})).text((function(e){return e}))}let E,B,I=!1,W=.5,N={},G=d3.scaleThreshold().domain([0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]).range(["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"]);function U(e){W=e}var V;function R(){let e=[];$.ajax({url:"/api/percentile/"+parameters.id,dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:"application/vnd.api+json"},success:function(t){for(let r=0;r<t.length;r++)e[t[r].feature]=[t[r].min,t[r].p1,t[r].p2,t[r].p3,t[r].p5,t[r].p7,t[r].p8,t[r].p9,t[r].max];re(e),function(e){for(var t in e)if(e.hasOwnProperty(t)){let e=t.split("_").join(" ");e=e.charAt(0).toUpperCase()+e.slice(1),$("#absolute-feature-checkboxes").append('<tr><th> <div class="pretty p-switch p-fill p-bigger"><input type="checkbox" id="draw-'+t+'"/><div class="state"><label>'+e+'</label></div></div><div class="float-right draw-details" id="draw-'+t+'-details"><div class="pretty p-icon p-toggle p-plain"><input type="checkbox" id="draw-'+t+'-input" /><div class="state p-success-o p-on"><i class="mdi mdi-image-area"></i><label></label></div><div class="state p-off"><i class="mdi mdi-image-off"></i><label></label></div></div></div></th></tr>')}$(".draw-details").hide(),p()}(e)}})}function P(){$.ajax({url:"/api/dataset/networks/"+parameters.id,dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:"application/vnd.api+json"},success:function(e){!function(e){if(e.length)for(let t=0;t<e.length;t++)e[t].finished&&$("#networks-hierarchies-table tbody").append("<tr><td>"+e[t].name+'</td> <td> <button type="button" class="btn btn-default" data='+e[t].network_id+" name="+e[t].name+'><span class="mdi mdi-graphql" aria-hidden="true"></span></button></td> <td><div class="pretty p-switch p-fill"><input type="checkbox" class="hiearchy-checkbox" data="'+e[t].network_id+'" name="'+e[t].name+'"><div class="state p-success"><label></label></div></div></td><td>---</td>');else $("#networks-hierarchies-table").append("There is no network data for this dataset")}(e)}})}function Y(e){$.ajax({url:"/api/dataset/"+parameters.id+"/"+e,dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:"application/vnd.api+json"},success:function(t){ie(t,e),c()}})}function F(e){d(),$.ajax({url:"/api/dataset/"+parameters.id+"/"+e,dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:"application/vnd.api+json"},success:function(t){ae(t,e),c()}})}r(1);let X=[],Z=[],J=[],q={},K={},Q={},ee={};function te(e){X=X.concat(e)}function re(e){q=e}function ne(e){Z=e,function(){let e=["#fff","#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628"];if(Z.length)for(let t=0;t<Z.length;t++)$("#metadata-table").find("tbody").append($('<tr id="metadata-row-'+Z[t].animal_id+'">').append($("<td>").append(Z[t].animal_id)).append($("<td>").append(Z[t].species)).append($("<td>").append(Z[t].sex)).append($("<td>").append(Z[t].size)).append($("<td>").append(Z[t].weight)).append($("<td>").append('<div class="dropdown">\n                                              <a class="dropdown-toggle btn btn-default btn-color" data-toggle="dropdown" href="#">\n                                              <div id="preview" class="metadata-swatch" style="background-color:#fff"></div>\n                                              <input class="color-field" value="White" style="display:none;">\n                                              </a>\n                                              <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel"> '+function(t){let r="";for(let n=0;n<e.length;n++)r+='<div class="metadata-swatch metadata-swatch-clickable" style="background-color:'+e[n]+'" value="'+t+'"></div>';return r}(Z[t].animal_id)+"</ul></div>")));else $("#metadata-table").find("tbody").append("There is no metadata for this dataset")}()}function ae(e,t){for(let r=0;r<e.length;r++)void 0===J[r]&&J.push({}),e[r]&&!isNaN(e[r])?J[r][t]=+e[r]:J[r][t]=e[r]}function ie(e,t){for(let r=0;r<e.length;r++)void 0===X[r]&&X.push({}),X[r][t]=+e[r]}function oe(e){K=e}function se(e,t){0===Object.keys(e).length&&e.constructor===Object?(delete Q["h"+t],(void 0)(t),delete S["h"+t]):(Q["h"+t]=e,function(e,t){A["h"+e]=t}(t,2),function(e){for(let t in N)if(t==="h"+e)return void(S["h"+e]=N[t]);for(let t=0;t<H.length;t++){let r=!0;for(let e in S)S.hasOwnProperty(e)&&S[e]===H[t]&&(r=!1);if(r){if(0===Object.keys(N).length)return void(S["h"+e]=H[t]);for(let r in N)if(N[r]!==H[t])return void(S["h"+e]=H[t])}}}(t)),O()}function le(e){ee=e}$(document).ready((function(){window.EventSource?((V=new EventSource("/api/movement_only/"+parameters.id)).onmessage=function(e){"close"===e.data?(V.close(),window.setTimeout((function e(){$.active>0?window.setTimeout(e,100):new k}),100)):te(JSON.parse(e.data))},V.addEventListener("error",(function(e){e.readyState==EventSource.CLOSED&&alert("Streaming error")}),!1)):alert("Webbrowser does not support streaming"),R(),$.ajax({url:"/api/dataset/"+parameters.id+"/animal_ids",dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:"application/vnd.api+json"},success:function(e){le(e)}}),function(){const e=["swarm_time","swarm_speed","swarm_acceleration","swarm_convex_hull_area","swarm_distance_centroid","swarm_direction","swarm_polarisation"];for(let t=0;t<e.length;t++)$.ajax({url:"/api/dataset/"+parameters.id+"/"+e[t],dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:"application/vnd.api+json"},success:function(r){ae(r,e[t].replace("swarm_",""))}})}(),$.ajax({url:"/api/metadata/"+parameters.id,dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:"application/vnd.api+json"},success:function(e){ne(e)}}),P()}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vZXhwbG9yZS9leHBsb3JlLmNzcz9lNzJlIiwid2VicGFjazovLy8uL2V4cGxvcmUvZXhwbG9yZS5jc3MiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9saWIvdXJscy5qcyIsIndlYnBhY2s6Ly8vLi9leHBsb3JlL3NwYXRpYWxfdmlldy9pbnRlcmFjdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9leHBsb3JlL3NwYXRpYWxfdmlldy9jb2xvcl9waWNrZXIuanMiLCJ3ZWJwYWNrOi8vLy4vZXhwbG9yZS9tZXRhZGF0YS5qcyIsIndlYnBhY2s6Ly8vLi9leHBsb3JlL2xpc3RlbmVyLmpzIiwid2VicGFjazovLy8uL2V4cGxvcmUvaGVscGVycy5qcyIsIndlYnBhY2s6Ly8vLi9leHBsb3JlL3NwYXRpYWxfdmlldy9zcGF0aWFsX3ZpZXcuanMiLCJ3ZWJwYWNrOi8vLy4vZXhwbG9yZS9oaWVyYXJjaHkuanMiLCJ3ZWJwYWNrOi8vLy4vZXhwbG9yZS9hamF4X3F1ZXJpZXMuanMiLCJ3ZWJwYWNrOi8vLy4vZXhwbG9yZS9uZXR3b3JrLmpzIiwid2VicGFjazovLy8uL2V4cGxvcmUvbGluZV9jaGFydC5qcyIsIndlYnBhY2s6Ly8vLi9leHBsb3JlL2V4cGxvcmUuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJjb250ZW50Iiwib3B0aW9ucyIsInRyYW5zZm9ybSIsInVuZGVmaW5lZCIsImxvY2FscyIsIl9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyIsInB1c2giLCJ1c2VTb3VyY2VNYXAiLCJsaXN0IiwidG9TdHJpbmciLCJ0aGlzIiwibWFwIiwiaXRlbSIsImNzc01hcHBpbmciLCJidG9hIiwic291cmNlTWFwcGluZyIsInNvdXJjZU1hcCIsImJhc2U2NCIsInVuZXNjYXBlIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiSlNPTiIsInN0cmluZ2lmeSIsImRhdGEiLCJjb25jYXQiLCJzb3VyY2VVUkxzIiwic291cmNlcyIsInNvdXJjZSIsInNvdXJjZVJvb3QiLCJqb2luIiwiY3NzV2l0aE1hcHBpbmdUb1N0cmluZyIsIm1lZGlhUXVlcnkiLCJkZWR1cGUiLCJhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzIiwibGVuZ3RoIiwiaWQiLCJfaSIsImZuIiwibWVtbyIsInN0eWxlc0luRG9tIiwiaXNPbGRJRSIsIndpbmRvdyIsImRvY3VtZW50IiwiYWxsIiwiYXRvYiIsImFwcGx5IiwiYXJndW1lbnRzIiwiZ2V0VGFyZ2V0IiwidGFyZ2V0IiwicXVlcnlTZWxlY3RvciIsImdldEVsZW1lbnQiLCJzdHlsZVRhcmdldCIsIkhUTUxJRnJhbWVFbGVtZW50IiwiY29udGVudERvY3VtZW50IiwiaGVhZCIsImUiLCJzaW5nbGV0b24iLCJzaW5nbGV0b25Db3VudGVyIiwic3R5bGVzSW5zZXJ0ZWRBdFRvcCIsImZpeFVybHMiLCJhZGRTdHlsZXNUb0RvbSIsInN0eWxlcyIsImRvbVN0eWxlIiwicmVmcyIsImoiLCJwYXJ0cyIsImFkZFN0eWxlIiwibGlzdFRvU3R5bGVzIiwibmV3U3R5bGVzIiwiYmFzZSIsInBhcnQiLCJjc3MiLCJtZWRpYSIsImluc2VydFN0eWxlRWxlbWVudCIsInN0eWxlIiwiaW5zZXJ0SW50byIsIkVycm9yIiwibGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AiLCJpbnNlcnRBdCIsIm5leHRTaWJsaW5nIiwiaW5zZXJ0QmVmb3JlIiwiYXBwZW5kQ2hpbGQiLCJmaXJzdENoaWxkIiwiYmVmb3JlIiwicmVtb3ZlU3R5bGVFbGVtZW50IiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwiaWR4IiwiaW5kZXhPZiIsInNwbGljZSIsImNyZWF0ZVN0eWxlRWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJhdHRycyIsInR5cGUiLCJhZGRBdHRycyIsImVsIiwia2V5cyIsImZvckVhY2giLCJzZXRBdHRyaWJ1dGUiLCJvYmoiLCJ1cGRhdGUiLCJyZW1vdmUiLCJyZXN1bHQiLCJzdHlsZUluZGV4IiwiYXBwbHlUb1NpbmdsZXRvblRhZyIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsInJldm9rZU9iamVjdFVSTCIsIkJsb2IiLCJsaW5rIiwicmVsIiwiY3JlYXRlTGlua0VsZW1lbnQiLCJ1cGRhdGVMaW5rIiwiaHJlZiIsImFwcGx5VG9UYWciLCJuZXdPYmoiLCJERUJVRyIsIm5ld0xpc3QiLCJtYXlSZW1vdmUiLCJ0ZXh0U3RvcmUiLCJyZXBsYWNlVGV4dCIsImluZGV4IiwicmVwbGFjZW1lbnQiLCJmaWx0ZXIiLCJCb29sZWFuIiwic3R5bGVTaGVldCIsImNzc1RleHQiLCJjc3NOb2RlIiwiY3JlYXRlVGV4dE5vZGUiLCJjaGlsZE5vZGVzIiwiYXV0b0ZpeFVybHMiLCJjb252ZXJ0VG9BYnNvbHV0ZVVybHMiLCJibG9iIiwib2xkU3JjIiwibG9jYXRpb24iLCJiYXNlVXJsIiwicHJvdG9jb2wiLCJob3N0IiwiY3VycmVudERpciIsInBhdGhuYW1lIiwicmVwbGFjZSIsImZ1bGxNYXRjaCIsIm9yaWdVcmwiLCJuZXdVcmwiLCJ1bnF1b3RlZE9yaWdVcmwiLCJ0cmltIiwiJDEiLCJ0ZXN0Iiwic2xpZGVyIiwidG9vbHRpcCIsImNvbG9yYnJld2VyIiwiQnVZbEJ1IiwibWV0YWRhdGFDb2xvciIsInBsYXlCb29sZWFuIiwic2V0UGxheUJvb2xlYW4iLCJkaXNhYmxlUGxheUJ1dHRvbiIsIiQiLCJyZW1vdmVDbGFzcyIsInByb3AiLCJoaWRlIiwic2hvdyIsImVuYWJsZVBsYXlCdXR0b24iLCJhZGRDbGFzcyIsInBlcmNlbnRpbGVzTGluZUNoYXJ0IiwiYXJyIiwic29ydCIsImEiLCJiIiwibG93ZXIiLCJNYXRoIiwiZmxvb3IiLCJ1cHBlciIsIndlaWdodCIsImluaXRUcmVuZENoYXJ0TGlzdGVuZXIiLCJjbGljayIsImZpbmQiLCJzd2FybURhdGEiLCJkaXNhYmxlTGluZUNoYXJ0IiwiYXR0ciIsIlN0cmluZyIsImhhc2hDb2RlIiwiaGFzaCIsImNoYXJDb2RlQXQiLCJkMyIsInNlbGVjdGlvbiIsIm1vdmVUb0JhY2siLCJlYWNoIiwiem9vbUdyb3VwIiwiem9vbUZ1bmN0aW9uIiwidHJlbmRDaGFydHNab29tIiwicmF0aW8iLCJpbmRleFRpbWUiLCJzdmdDb250YWluZXIiLCJzZWxlY3QiLCJ6b29tIiwic2NhbGVFeHRlbnQiLCJvbiIsImV2ZW50IiwieCIsIm1pbiIsInRhbmtXaWR0aCIsImsiLCJtYXgiLCJ5IiwidGFua0hlaWdodCIsImdYYXhpcyIsInhBeGlzIiwic2NhbGUiLCJyZXNjYWxlWCIsImdZYXhpcyIsInlBeGlzIiwicmVzY2FsZVkiLCJhcHBlbmQiLCJ0YW5rIiwicGFyYW1ldGVycyIsImludmVydGVkX3giLCJpbnZlcnRlZF95IiwiYWN0aXZlU2NhbGUiLCJjb2xvclNjYWxlIiwiY29sb3IiLCJsZWdlbmRXaWR0aCIsImxlZ2VuZEhlaWdodCIsInN2Z0xlZ2VuZCIsIm1lZG9pZEFuaW1hbCIsImFjdGl2ZUFuaW1hbHMiLCJhcnJheUFuaW1hbHMiLCJkYXRhc2V0IiwiaGllcmFyY2h5TGV2ZWxzIiwiaGllcmFyY2h5R3JvdXBTdGRldiIsImJydXNoIiwiZXh0ZW50Iiwic3ZnTGVnZW5kX25ldHciLCJkZW5kcm96b29tIiwibmV0d29ya0NvbG9yIiwiaGllcmFyY2h5Q29sb3JzIiwibmV0d29ya0hpZXJhcmNoeSIsInNwYXRpYWxWaWV3IiwiY2VpbCIsInRtcCIsInRleHQiLCJzY2FsZUxpbmVhciIsImRvbWFpbiIsInJhbmdlIiwic2NhbGVUaHJlc2hvbGQiLCJzZWxlY3RBbGwiLCJlbnRyaWVzIiwiZW50ZXIiLCJjaGFuZ2VsZWdlbmQiLCJoYXNDbGFzcyIsImRlY0luZGV4VGltZSIsImRyYXciLCJsZWdlbmQiLCJsZWdlbmRUZXh0IiwidG1wU2NhbGUiLCJyZXR1cm5Db2xvclNjYWxlIiwiZXhpdCIsInRpbWVUb1dhaXQiLCJ2YWwiLCJhbmltYWxTY2FsZSIsInNldFRpbWVvdXQiLCJkcmF3RGVuZHJvZ3JhbSIsIm5ldHdvcmtWaXMiLCJzdmdBbmltYWxzIiwibmV0d29ya0RhdGEiLCJuZXR3b3JrIiwiYW5pbWFsMSIsImFuaW1hbDIiLCJuZXR3b3JrQ29sb3JTY2FsZSIsIm5ldHdvcmtBdXRvIiwidG1wQXJyYXkiLCJzZXROZXR3b3JMaW1pdCIsInBlcmNlbnRpbGVzIiwibmV0d29ya0xpbWl0IiwidHJpYW5ndWxhdGlvbiIsInZvcm9ub2kiLCJpcyIsInNwbGl0IiwiYW5pbWFsR3JvdXBpbmdzIiwiZGF0YXNldE1ldGFkYXRhIiwicGFnZVgiLCJwYWdlWSIsImh0bWwiLCJ0b29sdGlwRnVuY3Rpb24iLCJ0cmFuc2l0aW9uIiwiZHVyYXRpb24iLCJpbmNsdWRlcyIsImh1bGxQYXRoIiwiaXNFbXB0eU9iamVjdCIsImNlbnRyb2lkIiwiY2xhc3NlZCIsInVwZGF0ZUxpbmVDaGFydCIsInN2ZyIsImluaXREZW5kcm9ncmFtTGVnZW5kIiwidG9vbHRpcERpdiIsInRyZWUiLCJzaXplIiwic3RlcCIsInNsaWRlIiwidWkiLCJzZXRIaWVyYXJjaHlMZXZlbCIsInVwZGF0ZURlbmRyb2dyYW0iLCJtYXhOdW1iZXJIaWVyYXJjaGllcyIsInNldEFjdGl2ZUFuaW1hbHMiLCJyb290IiwiaGllcmFyY2h5IiwibGV2ZWwiLCJ0bXBfbm9kZXMiLCJub2RlIiwiY29uc29sZSIsImxvZyIsInRtcF9ib29sZWFuIiwiaGllcmFyY2hpZXMiLCJjbHVzdGVyIiwidmVydGljZXMiLCJncm91cE1lbWJlciIsInBvbHlnb25IdWxsIiwiaGllcmFyY2h5SWRzIiwiaGllcmFyY2h5VmVydGljZXMiLCJ0cmVlRGF0YSIsIm5vZGVzIiwiY2hpbGRyZW4iLCJtYXJnaW4iLCJ3aWR0aCIsImhlaWdodCIsInRyZWVtYXAiLCJzaG93TmV0d29ya0hpZXJhcmNoeSIsIm5ldHdvcmtIaWVyYXJjaHlJZHMiLCJnZXRIaWVyYXJjaHlMZXZlbCIsImdldEhpZXJhcmNoeVZlcnRpY2VzIiwiaGllcmFyeUh1bGxzIiwiYW5pbWFscyIsInRtcEFuaW1hbCIsInBvaW50IiwiY29sbGFwc2UiLCJkZXB0aCIsIl9jaGlsZHJlbiIsImRlc2NlbmRhbnRzIiwic2xpY2UiLCJkaWFnb25hbExpbmVzIiwibm9kZUVudGVyIiwiYWRkSGlnaGxpZ2h0U3BhdGlhbFZpZXciLCJyZW1vdmVIaWdobGlnaHRTcGF0aWFsVmlldyIsInN0YW5kYXJkRGV2aWF0aW9uQ29sb3JTY2FsZSIsInN0YW5kYXJkRGV2aWF0aW9uIiwiZHJhd0hpZXJhcmNoeSIsImxlZ2VuZERhdGEiLCJsZWdlbmRUZXh0RGF0YSIsIm5ldHdvcmtfaWQiLCJjaGFuZ2VIaWVyYXJjaHlMZWdlbmQiLCJjb25zdHJ1Y3RvciIsInJlbW92ZUhpZXJhcmNoeUxldmVsIiwicmVtb3ZlSGllcmFyY2h5Q29sb3IiLCJzZXRIaWVyYXJjaHlDb2xvciIsImFqYXgiLCJ1cmwiLCJkYXRhVHlwZSIsImNvbnRlbnRUeXBlIiwiaGVhZGVycyIsInN1Y2Nlc3MiLCJzZXRIaWVyYXJjaHlEYXRhIiwicGFyc2UiLCJzdXBlciIsInNwYXRpYWxWaWV3SW5pdCIsInNldEluZGV4VGltZSIsInJlY3QiLCJhbmltYWwiLCJyZXNldFRyYWNrZWREYXRhIiwic2V0VHJhY2tpbmdCb29sZWFuIiwic2VuZFRyYWNrZWREYXRhIiwiY2hhbmdlIiwiY2hlY2tlZCIsInNldE5ldHdvcmtCYWNrZ3JvdW5kIiwiaXNOdW1lcmljIiwic2V0TmV0d29ya0JhY2tncm91bmRMaW1pdCIsImdldERhdGFzZXRGZWF0dXJlIiwiZ2V0U3dhcm1EYXRhc2V0RmVhdHVyZSIsInNldE1lZG9pZEFuaW1hbCIsInNldEFjdGl2ZVNjYWxlIiwiY29sb3JSR0IiLCJyZXNldEluZGl2aWR1YWxNZXRhZGF0YSIsIm1vZGFsIiwidG9Mb3dlckNhc2UiLCJBcnJheSIsImZyb20iLCJTZXQiLCJjb2xvcnMiLCJibEF2ZyIsInF1YW50aWxlIiwiYWJBdmciLCJjb2xvck1ldGFkYXRhIiwiYnRuIiwib2xkVmFsdWUiLCJjbG9zZXN0IiwibmV3VmFsIiwicGFyc2VGbG9hdCIsInJvdW5kIiwiY2xpY2tlZEJ1dHRvbklEIiwiYnV0dG9uIiwiY2hlY2tib3giLCJnZXROZXR3b3JrSGllcmFyY2h5RGF0YSIsImFkZEhpZXJhcmNoeUJ1dHRvbiIsImluaXRTaG93RGVuZHJvZ3JhbUxpc3RlbmVyIiwidG1wQWN0aXZlIiwibmV4dCIsInJlbW92ZUhpZXJhcmNoeUJ1dHRvbiIsInNldE5ldHdvcmtIaWVyYXJjaHkiLCJzZXROZXR3b3JrRGF0YSIsIm5ldHdvcmtJRCIsImdldE5ldHdvcmtEYXRhIiwic2V0bmV0d29ya0NvbG9yIiwic2V0TmV0d29ya0lEIiwic2V0TmV0d29ya0F1dG8iLCJsaW1pdCIsIm1pblBvaW50IiwibWF4UG9pbnQiLCJheGlzQm90dG9tIiwidGlja3MiLCJ0aWNrU2l6ZSIsInRpY2tQYWRkaW5nIiwiYXhpc1JpZ2h0IiwicGVyY2VudGFnZSIsImJhY2tncm91bmRfaW1hZ2UiLCJzcGFjZSIsImFwcGVuZFRvIiwiaW5pdFNsaWRlcnMiLCJpbml0Q29sb3JQaWNrZXIiLCJMaW5lQ2hhcnQiLCJjcF9saXN0ZW5lciIsInNmX2xpc3RlbmVycyIsImFmX2xpc3RlbmVycyIsIm1kX2xpc3RlbmVycyIsIm5fbGlzdGVuZXJzIiwiaF9saXN0ZW5lcnMiLCJpbml0RGVuZHJvZ3JhbSIsImRyYWdnYWJsZSIsImNvbnRhaW5tZW50IiwicmVzaXphYmxlIiwiYXNwZWN0UmF0aW8iLCJtYXhXaWR0aCIsIkNoYXJ0Iiwic3dhcm1fZmVhdHVyZXMiLCJsaW5lQ2hhcnRXaWR0aCIsInRyZW5kQ2hhcnRzRWxlbSIsImxpbmVDaGFydCIsImxpbmVDaGFydERhdGEiLCJmaWxsIiwidG1wX29iamVjdCIsIngyIiwidGlja0Zvcm1hdCIsImF4aXNMZWZ0IiwiZHJhZ2dlZCIsImNvb3JkcyIsIm1vdXNlIiwidHJhbnNsYXRlRXh0ZW50IiwibGluZXMiLCJzd2FybUxpbmVDaGFydCIsImxpbmVfY29sb3JzIiwic2NhbGVPcmRpbmFsIiwic2NoZW1lQ2F0ZWdvcnkxMCIsIm5vcm1hbGl6YXRpb25TY2FsZSIsImxpbmUiLCJkcmFnIiwiY2hhcnRMaW5lcyIsIl9ncm91cHMiLCJzdHJva2UiLCJhdHRyaWJ1dGVzIiwiZ2V0Q29tcHV0ZWRUZXh0TGVuZ3RoIiwiaW5pdExpbmVDaGFydEJ1dHRvbnMiLCJjYXBpdGFsaXplZF9mZWF0dXJlX3N0cmluZyIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwiZWxlbSIsInRyZW5kY2hhcnQiLCJmZWF0dXJlIiwidHJlbmRDaGFydERhdGEiLCJudW1fYW5pbWFscyIsImFuaW1hbElkcyIsInRtcFRyZW5kQ2hhcnREYXRhIiwidHJlbmRDaGFydCIsInRlbXAiLCJhcmVhIiwieTAiLCJ5MSIsInBhcmVudCIsImRlbmRyb2dyYW1MZWdlbmQiLCJnZXRQZXJjZW50aWxlIiwiZGF0YVNldFBlcmNlbnRpbGUiLCJzZXREYXRhU2V0UGVyY2VudGlsZSIsImFkZEFic29sdXRlRmVhdHVyZUJ1dHRvbnMiLCJnZXROZXR3b3JrRGF0YUJ1dHRvbiIsImFkZE5ldHdvcmtCdXR0b25zIiwic2V0RGF0YXNldEZlYXR1cmUiLCJzZXRTd2FybURhdGEiLCJhZGRUb0RhdGFzZXQiLCJzZXRNZXRhRGF0YSIsInJlc3VsdFN0cmluZyIsImluaXRpYWxpemVNZXRhZGRhdGEiLCJpc05hTiIsInNldEFuaW1hbElkcyIsInJlYWR5IiwiRXZlbnRTb3VyY2UiLCJvbm1lc3NhZ2UiLCJjbG9zZSIsImNoZWNrUGVuZGluZ1JlcXVlc3QiLCJhY3RpdmUiLCJhZGRFdmVudExpc3RlbmVyIiwicmVhZHlTdGF0ZSIsIkNMT1NFRCIsImFsZXJ0Il0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlYixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sS0FRdkRyQixFQUFvQnNCLEVBQUksU0FBU0QsRUFBT0UsR0FFdkMsR0FEVSxFQUFQQSxJQUFVRixFQUFRckIsRUFBb0JxQixJQUMvQixFQUFQRSxFQUFVLE9BQU9GLEVBQ3BCLEdBQVcsRUFBUEUsR0FBOEIsaUJBQVZGLEdBQXNCQSxHQUFTQSxFQUFNRyxXQUFZLE9B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QUNMLE9BdElXLDRCQXdJZkMsUUFBUyxTQUFTL1UsR0FDZHVkLEdBQVl2ZCxNR3BGcEIiLCJmaWxlIjoiZXhwbG9yZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA2KTtcbiIsIlxudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL2V4cGxvcmUuY3NzXCIpO1xuXG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblxudmFyIHRyYW5zZm9ybTtcbnZhciBpbnNlcnRJbnRvO1xuXG5cblxudmFyIG9wdGlvbnMgPSB7XCJobXJcIjp0cnVlfVxuXG5vcHRpb25zLnRyYW5zZm9ybSA9IHRyYW5zZm9ybVxub3B0aW9ucy5pbnNlcnRJbnRvID0gdW5kZWZpbmVkO1xuXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXMuanNcIikoY29udGVudCwgb3B0aW9ucyk7XG5cbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuXG5pZihtb2R1bGUuaG90KSB7XG5cdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL2V4cGxvcmUuY3NzXCIsIGZ1bmN0aW9uKCkge1xuXHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9leHBsb3JlLmNzc1wiKTtcblxuXHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXG5cdFx0dmFyIGxvY2FscyA9IChmdW5jdGlvbihhLCBiKSB7XG5cdFx0XHR2YXIga2V5LCBpZHggPSAwO1xuXG5cdFx0XHRmb3Ioa2V5IGluIGEpIHtcblx0XHRcdFx0aWYoIWIgfHwgYVtrZXldICE9PSBiW2tleV0pIHJldHVybiBmYWxzZTtcblx0XHRcdFx0aWR4Kys7XG5cdFx0XHR9XG5cblx0XHRcdGZvcihrZXkgaW4gYikgaWR4LS07XG5cblx0XHRcdHJldHVybiBpZHggPT09IDA7XG5cdFx0fShjb250ZW50LmxvY2FscywgbmV3Q29udGVudC5sb2NhbHMpKTtcblxuXHRcdGlmKCFsb2NhbHMpIHRocm93IG5ldyBFcnJvcignQWJvcnRpbmcgQ1NTIEhNUiBkdWUgdG8gY2hhbmdlZCBjc3MtbW9kdWxlcyBsb2NhbHMuJyk7XG5cblx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdH0pO1xuXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufSIsIi8vIEltcG9ydHNcbnZhciBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gPSByZXF1aXJlKFwiLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiKTtcbmV4cG9ydHMgPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oZmFsc2UpO1xuLy8gTW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIvKiBJY29ucyBmb3IgYm9vdHN0cmFwIDQgKi9cXHJcXG5cXHJcXG4ubWRpOjpiZWZvcmUge1xcclxcbiAgICBmb250LXNpemU6IDI0cHg7XFxyXFxuICAgIGxpbmUtaGVpZ2h0OiAxNHB4O1xcclxcbn1cXHJcXG5cXHJcXG4uYnRuIC5tZGk6OmJlZm9yZSB7XFxyXFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXHJcXG4gICAgdG9wOiA0cHg7XFxyXFxufVxcclxcblxcclxcbi5idG4teHMgLm1kaTo6YmVmb3JlIHtcXHJcXG4gICAgZm9udC1zaXplOiAxOHB4O1xcclxcbiAgICB0b3A6IDNweDtcXHJcXG59XFxyXFxuXFxyXFxuLmJ0bi1zbSAubWRpOjpiZWZvcmUge1xcclxcbiAgICBmb250LXNpemU6IDE4cHg7XFxyXFxuICAgIHRvcDogM3B4O1xcclxcbn1cXHJcXG5cXHJcXG4uZHJvcGRvd24tbWVudSAubWRpIHtcXHJcXG4gICAgd2lkdGg6IDE4cHg7XFxyXFxufVxcclxcblxcclxcbi5kcm9wZG93bi1tZW51IC5tZGk6OmJlZm9yZSB7XFxyXFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXHJcXG4gICAgdG9wOiA0cHg7XFxyXFxuICAgIGxlZnQ6IC04cHg7XFxyXFxufVxcclxcblxcclxcbi5uYXYgLm1kaTo6YmVmb3JlIHtcXHJcXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xcclxcbiAgICB0b3A6IDRweDtcXHJcXG59XFxyXFxuXFxyXFxuLm5hdmJhciAubmF2YmFyLXRvZ2dsZSAubWRpOjpiZWZvcmUge1xcclxcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XFxyXFxuICAgIHRvcDogNHB4O1xcclxcbiAgICBjb2xvcjogI0ZGRjtcXHJcXG59XFxyXFxuXFxyXFxuLmJyZWFkY3J1bWIgLm1kaTo6YmVmb3JlIHtcXHJcXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xcclxcbiAgICB0b3A6IDRweDtcXHJcXG59XFxyXFxuXFxyXFxuLmJyZWFkY3J1bWIgYTpob3ZlciB7XFxyXFxuICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcXHJcXG59XFxyXFxuXFxyXFxuLmJyZWFkY3J1bWIgYTpob3ZlciBzcGFuIHtcXHJcXG4gICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XFxyXFxufVxcclxcblxcclxcbi5hbGVydCAubWRpOjpiZWZvcmUge1xcclxcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XFxyXFxuICAgIHRvcDogNHB4O1xcclxcbiAgICBtYXJnaW4tcmlnaHQ6IDJweDtcXHJcXG59XFxyXFxuXFxyXFxuLmlucHV0LWdyb3VwLWFkZG9uIC5tZGk6OmJlZm9yZSB7XFxyXFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXHJcXG4gICAgdG9wOiAzcHg7XFxyXFxufVxcclxcblxcclxcbi5uYXZiYXItYnJhbmQgLm1kaTo6YmVmb3JlIHtcXHJcXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xcclxcbiAgICB0b3A6IDJweDtcXHJcXG4gICAgbWFyZ2luLXJpZ2h0OiAycHg7XFxyXFxufVxcclxcblxcclxcbi5saXN0LWdyb3VwLWl0ZW0gLm1kaTo6YmVmb3JlIHtcXHJcXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xcclxcbiAgICB0b3A6IDNweDtcXHJcXG4gICAgbGVmdDogLTNweFxcclxcbn1cXHJcXG5cXHJcXG4vKiBTVkcgZWxlbWVudHMgYW5kIHRleHQgKi9cXHJcXG5cXHJcXG4jbWFpbi12aXMge1xcclxcbiAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xcclxcbn1cXHJcXG5cXHJcXG4uc3ZnLWNvbnRhaW5lciB7XFxyXFxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXHJcXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xcclxcbiAgICB3aWR0aDogMTAwJTtcXHJcXG4gICAgLyogYXNwZWN0IHJhdGlvICovXFxyXFxuICAgIHZlcnRpY2FsLWFsaWduOiB0b3A7XFxyXFxuICAgIG92ZXJmbG93OiB2aXNpYmxlO1xcclxcbn1cXHJcXG5cXHJcXG4uc3ZnLWNvbnRlbnQge1xcclxcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxyXFxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXHJcXG4gICAgYm9yZGVyOiAxcHggc29saWQgIzAwMDtcXHJcXG59XFxyXFxuXFxyXFxuI21haW4tdmlzLWxlZ2VuZC1kaXYge1xcclxcbiAgICBkaXNwbGF5OiBub25lO1xcclxcbn1cXHJcXG5cXHJcXG4jaGllcmFyY2h5LWxlZ2VuZC1kaXYge1xcclxcbiAgICBkaXNwbGF5OiBub25lO1xcclxcbn1cXHJcXG5cXHJcXG4jbWFpbi12aXMtbGVnZW5kIHtcXHJcXG4gICAgZmxvYXQ6IHJpZ2h0O1xcclxcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxyXFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXHJcXG4gICAgb3ZlcmZsb3c6IHZpc2libGU7XFxyXFxuICAgIHRvcDogMTBweDtcXHJcXG4gICAgbGVmdDogMTBweDtcXHJcXG59XFxyXFxuXFxyXFxuI2hpZXJhcmNoeS1sZWdlbmQge1xcclxcbiAgICBmbG9hdDogbGVmdDtcXHJcXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcclxcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XFxyXFxuICAgIG92ZXJmbG93OiB2aXNpYmxlO1xcclxcbiAgICB0b3A6IDEwcHg7XFxyXFxuICAgIGxlZnQ6IDEwcHg7XFxyXFxufVxcclxcblxcclxcbi5zdmctY29udGVudC1kZW5kcm9ncmFtIHtcXHJcXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcclxcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjMDAwO1xcclxcbn1cXHJcXG5cXHJcXG4uc3ZnLWxpbmUtY2hhcnQtY29udGFpbmVyIHtcXHJcXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcclxcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XFxyXFxuICAgIHdpZHRoOiAxMDAlO1xcclxcbiAgICBoZWlnaHQ6IGF1dG87XFxyXFxuICAgIC8qIGRlcGVuZHMgb24gc3ZnIHJhdGlvICovXFxyXFxuICAgIHBhZGRpbmctYm90dG9tOiAxNyU7XFxyXFxuICAgIC8qIGFzcGVjdCByYXRpbyAqL1xcclxcbiAgICB2ZXJ0aWNhbC1hbGlnbjogdG9wO1xcclxcbiAgICBvdmVyZmxvdzogdmlzaWJsZTtcXHJcXG59XFxyXFxuXFxyXFxuLnN2Zy1kZW5kcm9ncmFtLWNvbnRhaW5lciB7XFxyXFxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXHJcXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xcclxcbiAgICBoZWlnaHQ6IGF1dG87XFxyXFxuICAgIHZlcnRpY2FsLWFsaWduOiB0b3A7XFxyXFxuICAgIG92ZXJmbG93OiB2aXNpYmxlO1xcclxcbn1cXHJcXG5cXHJcXG4uYXhpcyBwYXRoIHtcXHJcXG4gICAgZGlzcGxheTogbm9uZTtcXHJcXG59XFxyXFxuXFxyXFxuLmF4aXMgbGluZSB7XFxyXFxuICAgIHN0cm9rZS1vcGFjaXR5OiAwLjM7XFxyXFxuICAgIHNoYXBlLXJlbmRlcmluZzogY3Jpc3BFZGdlcztcXHJcXG59XFxyXFxuXFxyXFxuLngge1xcclxcbiAgICBmb250LXNpemU6IDFlbTtcXHJcXG59XFxyXFxuXFxyXFxuLnkge1xcclxcbiAgICBmb250LXNpemU6IDFlbTtcXHJcXG59XFxyXFxuXFxyXFxuLmF4aXMtbGluZS1jaGFydCBwYXRoIGxpbmUge1xcclxcbiAgICBmaWxsOiBub25lO1xcclxcbiAgICBzdHJva2U6ICMwMDA7XFxyXFxuICAgIHNoYXBlLXJlbmRlcmluZzogY3Jpc3BFZGdlcztcXHJcXG59XFxyXFxuXFxyXFxuLmxpbmUge1xcclxcbiAgICBmaWxsOiBub25lO1xcclxcbiAgICBzdHJva2Utd2lkdGg6IDVweDtcXHJcXG59XFxyXFxuXFxyXFxuLyogVGltZSAgKi9cXHJcXG5cXHJcXG4uZnJhbWUtdGV4dCB7XFxyXFxuICAgIG1hcmdpbi10b3A6IDA7XFxyXFxuICAgIG1hcmdpbi1ib3R0b206IDA7XFxyXFxuICAgIGZvbnQtc2l6ZTogMmVtO1xcclxcbiAgICBjb2xvcjogaW5oZXJpdDtcXHJcXG4gICAgZm9udC13ZWlnaHQ6IDUwMDtcXHJcXG4gICAgbGluZS1oZWlnaHQ6IDEuMTtcXHJcXG59XFxyXFxuXFxyXFxuLyogU2xpZGVyIHRpY2tzICAqL1xcclxcblxcclxcbi51aS1zbGlkZXItdGljayB7XFxyXFxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXHJcXG4gICAgd2lkdGg6IDNweDtcXHJcXG4gICAgYmFja2dyb3VuZDogIzMzN2FiNztcXHJcXG4gICAgaGVpZ2h0OiAwLjhlbTtcXHJcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcclxcbn1cXHJcXG5cXHJcXG4vKiBMYW9kaW5nIGdpZiAgICovXFxyXFxuXFxyXFxuI2xvYWRpbmcge1xcclxcbiAgICBkaXNwbGF5OiBibG9jaztcXHJcXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xcclxcbn1cXHJcXG5cXHJcXG4vKiBDb2xvciBsZWdlbmQgICAgKi9cXHJcXG5cXHJcXG4ubGVnZW5kIHtcXHJcXG4gICAgZm9udC1zaXplOiAxMnB4O1xcclxcbiAgICBzdHJva2U6ICMwMDA7XFxyXFxufVxcclxcblxcclxcbi5sZWdlbmQtdGV4dCB7XFxyXFxuICAgIGZvbnQtc2l6ZTogMS4yZW07XFxyXFxuICAgIGNvbG9yOiBpbmhlcml0O1xcclxcbiAgICBsaW5lLWhlaWdodDogMS4xO1xcclxcbn1cXHJcXG5cXHJcXG4ubGluZS1jaGFydC1sZWdlbmQtdGV4dCB7XFxyXFxuICAgIGZvbnQtc2l6ZTogMmVtO1xcclxcbiAgICBjb2xvcjogaW5oZXJpdDtcXHJcXG4gICAgbGluZS1oZWlnaHQ6IDEuMTtcXHJcXG59XFxyXFxuXFxyXFxuLnRpbWUtbGluZSB7XFxyXFxuICAgIGZpbGw6IG5vbmU7XFxyXFxuICAgIHN0cm9rZS13aWR0aDogNXB4O1xcclxcbiAgICBzdHJva2U6ICMwMDA7XFxyXFxufVxcclxcblxcclxcbi8qc3dhcm0gZmVhdHVyZXMgKi9cXHJcXG5cXHJcXG4uY2VudHJvaWQge1xcclxcbiAgICBmaWxsLW9wYWNpdHk6IDA7XFxyXFxuICAgIHN0cm9rZTogI2U3Mjk4YTtcXHJcXG4gICAgc3Ryb2tlLXdpZHRoOiAzcHg7XFxyXFxufVxcclxcblxcclxcbi5tZWRvaWQge1xcclxcbiAgICBmaWxsOiAjZTcyOThhICFpbXBvcnRhbnQ7XFxyXFxuICAgIHN0cm9rZTogI2U3Mjk4YSAhaW1wb3J0YW50O1xcclxcbn1cXHJcXG5cXHJcXG4uaHVsbC1wYXRoIHtcXHJcXG4gICAgZmlsbDogI2ZmZjtcXHJcXG4gICAgZmlsbC1vcGFjaXR5OiAwO1xcclxcbiAgICBzdHJva2Utd2lkdGg6IDM7XFxyXFxuICAgIHN0cm9rZTogIzI1MjUyNTtcXHJcXG4gICAgc3Ryb2tlLW9wYWNpdHk6IDAuNTtcXHJcXG59XFxyXFxuXFxyXFxuLmhpZXJhcmNoeS1ncm91cCB7XFxyXFxuICAgIHN0cm9rZS13aWR0aDogMTA7XFxyXFxuICAgIHN0cm9rZS1saW5lam9pbjogcm91bmQ7XFxyXFxuICAgIG9wYWNpdHk6IDAuMjtcXHJcXG59XFxyXFxuXFxyXFxuLmRlbGF1bmF5LXRyaWFuZ3VsYXRpb24ge1xcclxcbiAgICBmaWxsLW9wYWNpdHk6IDA7XFxyXFxuICAgIHN0cm9rZS13aWR0aDogMjtcXHJcXG4gICAgc3Ryb2tlOiAjMDAwO1xcclxcbiAgICBzdHJva2Utb3BhY2l0eTogMC40O1xcclxcbn1cXHJcXG5cXHJcXG4vKiBDb2xvciBicmV3ZXIgcGlja2VyIGRpdiAqL1xcclxcblxcclxcbi5wYWxldHRlIHtcXHJcXG4gICAgY3Vyc29yOiBwb2ludGVyO1xcclxcbiAgICBkaXNwbGF5OiB0YWJsZTtcXHJcXG4gICAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcXHJcXG4gICAgbWFyZ2luOiA0cHggMCA0cHggNHB4O1xcclxcbiAgICBiYWNrZ3JvdW5kOiAjZmZmO1xcclxcbiAgICBib3JkZXI6IHNvbGlkIDFweCAjYWFhO1xcclxcbn1cXHJcXG5cXHJcXG4uc3dhdGNoIHtcXHJcXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcclxcbiAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xcclxcbiAgICB3aWR0aDogMjJweDtcXHJcXG4gICAgaGVpZ2h0OiAyMnB4O1xcclxcbn1cXHJcXG5cXHJcXG4udm9yb25vaSB7XFxyXFxuICAgIGZpbGwtb3BhY2l0eTogMDtcXHJcXG4gICAgc3Ryb2tlLXdpZHRoOiAzO1xcclxcbiAgICBzdHJva2U6ICMwMDA7XFxyXFxuICAgIHN0cm9rZS1vcGFjaXR5OiAwLjI7XFxyXFxufVxcclxcblxcclxcbi8qIFRvb2x0aXAgKi9cXHJcXG5cXHJcXG5kaXYudG9vbHRpcCB7XFxyXFxuICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xcclxcbiAgICBvcGFjaXR5OiAwO1xcclxcbiAgICBiYWNrZ3JvdW5kOiByZ2IoMjU1LCAyNTUsIDI1NSkgIWltcG9ydGFudDtcXHJcXG4gICAgYm9yZGVyLWxlZnQtY29sb3I6ICMxYjgwOWUgIWltcG9ydGFudDtcXHJcXG4gICAgYm9yZGVyOiAxcHggc29saWQgI2VlZTtcXHJcXG4gICAgYm9yZGVyLWxlZnQtd2lkdGg6IDVweDtcXHJcXG4gICAgYm9yZGVyLXJhZGl1czogM3B4O1xcclxcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxyXFxufVxcclxcblxcclxcbmRpdi50b29sdGlwIHRhYmxlIHRkOm50aC1jaGlsZCgyKSB7XFxyXFxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcXHJcXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XFxyXFxufVxcclxcblxcclxcbi50b29sdGlwLXNwYW4ge1xcclxcbiAgICBkaXNwbGF5OiBibG9jaztcXHJcXG4gICAgd2lkdGg6IDE1MHB4O1xcclxcbiAgICB3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7XFxyXFxuICAgIGZvbnQtc2l6ZTogMS41ZW07XFxyXFxufVxcclxcblxcclxcbi51cHBlci1vdXRlci1hcmVhLCAubG93ZXItb3V0ZXItYXJlYSB7XFxyXFxuICAgIHN0cm9rZS13aWR0aDogMTtcXHJcXG4gICAgZmlsbDogIzc0YTljZjtcXHJcXG4gICAgc3Ryb2tlOiAjMzY5MGMwO1xcclxcbn1cXHJcXG5cXHJcXG4udXBwZXItaW5uZXItYXJlYSwgLmxvd2VyLWlubmVyLWFyZWEge1xcclxcbiAgICBzdHJva2Utd2lkdGg6IDE7XFxyXFxuICAgIGZpbGw6ICMwNDVhOGQ7XFxyXFxuICAgIHN0cm9rZTogIzAyMzg1ODtcXHJcXG59XFxyXFxuXFxyXFxuLm1lZGlhbi1saW5lIHtcXHJcXG4gICAgZmlsbDogbm9uZTtcXHJcXG4gICAgc3Ryb2tlOiAjNTI1MjUyO1xcclxcbiAgICBzdHJva2Utd2lkdGg6IDU7XFxyXFxufVxcclxcblxcclxcbi5zZWxlY3RlZCB7XFxyXFxuICAgIGJhY2tncm91bmQ6ICM5OTk7XFxyXFxuICAgIGJvcmRlcjogNHB4IHNvbGlkICM0ZDRkNGQ7XFxyXFxuICAgIC1tb3otYm9yZGVyLXJhZGl1czogNXB4O1xcclxcbiAgICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDVweDtcXHJcXG4gICAgYm94LXNoYWRvdzogMXB4IDJweCA0cHggcmdiYSgwLCAwLCAwLCAuNCk7XFxyXFxufVxcclxcblxcclxcbi56b29tIHtcXHJcXG4gICAgZmlsbDogbm9uZTtcXHJcXG4gICAgcG9pbnRlci1ldmVudHM6IGFsbDtcXHJcXG59XFxyXFxuXFxyXFxuLnguYXhpcy1saW5lLWNoYXJ0Pmc+dGV4dCB7XFxyXFxuICAgIGZvbnQtc2l6ZTogM2VtO1xcclxcbiAgICBjb2xvcjogaW5oZXJpdDtcXHJcXG4gICAgbGluZS1oZWlnaHQ6IDEuMTtcXHJcXG59XFxyXFxuXFxyXFxuLmFycm93IHtcXHJcXG4gICAgc3Ryb2tlLXdpZHRoOiAxO1xcclxcbn1cXHJcXG5cXHJcXG4jY2VudHJvaWQtbGluZSB7XFxyXFxuICAgIHN0cm9rZS13aWR0aDogMTtcXHJcXG4gICAgc3Ryb2tlOiAjZTcyOThhO1xcclxcbn1cXHJcXG5cXHJcXG4jY2VudHJvaWQtYXJyb3cge1xcclxcbiAgICBmaWxsOiAjZTcyOThhO1xcclxcbn1cXHJcXG5cXHJcXG4ubWV0YWRhdGEtc3dhdGNoIHtcXHJcXG4gICAgd2lkdGg6IDMwcHg7XFxyXFxuICAgIGhlaWdodDogMzBweDtcXHJcXG4gICAgYm9yZGVyLXJhZGl1czogM3B4O1xcclxcbiAgICBib3JkZXI6IDJweCBzb2xpZCAjNjY2O1xcclxcbn1cXHJcXG5cXHJcXG4ubWV0YWRhdGEtc3dhdGNoLWNsaWNrYWJsZTpob3ZlciB7XFxyXFxuICAgIGJvcmRlcjogMnB4IHNvbGlkICMwMDA7XFxyXFxuICAgIGN1cnNvcjogcG9pbnRlcjtcXHJcXG59XFxyXFxuXFxyXFxuLmRyb3Bkb3duLW1lbnUge1xcclxcbiAgICBtaW4td2lkdGg6IDQwcHg7XFxyXFxuICAgIHBhZGRpbmc6IDVweDtcXHJcXG59XFxyXFxuXFxyXFxuLm1ldGFkYXRhLWxlZ2VuZCB7XFxyXFxuICAgIGxpc3Qtc3R5bGU6IG5vbmU7XFxyXFxuICAgIG1hcmdpbi10b3A6IDEwcHg7XFxyXFxufVxcclxcblxcclxcbi5tZXRhZGF0YS1sZWdlbmQgbGkge1xcclxcbiAgICBmbG9hdDogbGVmdDtcXHJcXG4gICAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xcclxcbn1cXHJcXG5cXHJcXG4ubWV0YWRhdGEtbGVnZW5kIHNwYW4ge1xcclxcbiAgICBib3JkZXI6IDJweCBzb2xpZCAjNjY2O1xcclxcbiAgICBmbG9hdDogbGVmdDtcXHJcXG4gICAgd2lkdGg6IDMwcHg7XFxyXFxuICAgIGhlaWdodDogMzBweDtcXHJcXG59XFxyXFxuXFxyXFxuLm1ldGFkYXRhLWxlZ2VuZCAuYmwtYXZnIHtcXHJcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzdmYzk3ZjtcXHJcXG59XFxyXFxuXFxyXFxuLm1ldGFkYXRhLWxlZ2VuZCAuYXZnIHtcXHJcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2ZkYzA4NjtcXHJcXG59XFxyXFxuXFxyXFxuLm1ldGFkYXRhLWxlZ2VuZCAuYWItYXZnIHtcXHJcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzM4NmNiMDtcXHJcXG59XFxyXFxuXFxyXFxuLm5ldHdvcmstZWRnZXMge1xcclxcbiAgICBmaWxsLW9wYWNpdHk6IDA7XFxyXFxuICAgIHN0cm9rZS13aWR0aDogMjtcXHJcXG59XFxyXFxuXFxyXFxuLm5ldHdvcmstYmFja2dyb3VuZC1lZGdlcyB7XFxyXFxuICAgIGZpbGwtb3BhY2l0eTogMDtcXHJcXG4gICAgc3Ryb2tlLW9wYWNpdHk6IDAuMjU7XFxyXFxuICAgIHN0cm9rZTogIzczNzM3MztcXHJcXG59XFxyXFxuXFxyXFxuLm5vZGUgdGV4dCB7XFxyXFxuICAgIGZvbnQ6IDEycHggc2Fucy1zZXJpZjtcXHJcXG59XFxyXFxuXFxyXFxuLm5vZGUtLWludGVybmFsIHRleHQge1xcclxcbiAgICB0ZXh0LXNoYWRvdzogMCAxcHggMCAjZmZmLCAwIC0xcHggMCAjZmZmLCAxcHggMCAwICNmZmYsIC0xcHggMCAwICNmZmY7XFxyXFxufVxcclxcblxcclxcbi5saW5rIHtcXHJcXG4gICAgZmlsbDogbm9uZTtcXHJcXG4gICAgc3Ryb2tlOiAjNjM2MzYzO1xcclxcbiAgICBzdHJva2Utd2lkdGg6IDVweDtcXHJcXG59XFxyXFxuXFxyXFxuI2FjdGl2ZS1uZXR3b3JrLW5hbWUge1xcclxcbiAgICBmb250LXdlaWdodDogYm9sZDtcXHJcXG4gICAgY29sb3I6ICMyOTYyOTI7XFxyXFxufVxcclxcblxcclxcbi5hY3RpdmUtbGV2ZWwge1xcclxcbiAgICBmaWxsOiAjMzg2Y2IwO1xcclxcbn1cXHJcXG5cXHJcXG4jZGVuZHJvZ3JhbS1wYW5lbCB7XFxyXFxuICAgIHBvc2l0aW9uOiBpbml0aWFsO1xcclxcbn1cXHJcXG5cXHJcXG4jZGVuZHJvZ3JhbS1wYW5lbCB7XFxyXFxuICAgIGRpc3BsYXk6IG5vbmVcXHJcXG59XFxyXFxuXFxyXFxuLnNob3ctZGVuZHJvZ3JhbSB7XFxyXFxuICAgIGZsb2F0OiByaWdodDtcXHJcXG4gICAgYm9yZGVyLXJhZGl1czogM3B4O1xcclxcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjRDFEM0Q0O1xcclxcbiAgICBmb250LXdlaWdodDogbm9ybWFsO1xcclxcbn1cXHJcXG5cXHJcXG4uc2hvdy1kZW5kcm9ncmFtOmhvdmVyIHtcXHJcXG4gICAgYmFja2dyb3VuZDogI0QxRDNENDtcXHJcXG59XFxyXFxuXFxyXFxuLmRlbmRyb2dyYW0tdGV4dCB7XFxyXFxuICAgIGZvbnQtc2l6ZTogMTBlbSAhaW1wb3J0YW50O1xcclxcbn1cXHJcXG5cXHJcXG4uaGlnaGxpZ2h0LWhpZXJhcmNoeSB7XFxyXFxuICAgIGZpbGw6ICMyNTI1MjU7XFxyXFxuICAgIHN0cm9rZTogIzI1MjUyNTtcXHJcXG4gICAgc3Ryb2tlLXdpZHRoOiAxMDtcXHJcXG4gICAgc3Ryb2tlLWxpbmVqb2luOiByb3VuZDtcXHJcXG4gICAgb3BhY2l0eTogMC4zO1xcclxcbn1cXHJcXG5cXHJcXG4uYW5pbWFsLWhpZ2hsaWdodCB7XFxyXFxuICAgIGZpbGw6ICNjNTFiN2QgIWltcG9ydGFudDtcXHJcXG59XFxyXFxuXFxyXFxuI2RlbmRyb2dyYW0tYnV0dG9ucy1kaXYgLmJ0biBzcGFuLmdseXBoaWNvbiB7XFxyXFxuICAgIG9wYWNpdHk6IDA7XFxyXFxufVxcclxcblxcclxcbiNkZW5kcm9ncmFtLWJ1dHRvbnMtZGl2IC5idG4uYWN0aXZlIHNwYW4uZ2x5cGhpY29uIHtcXHJcXG4gICAgb3BhY2l0eTogMTtcXHJcXG59XFxyXFxuXFxyXFxuI2RlbmRyb2dyYW0tYnV0dG9ucy1kaXYge1xcclxcbiAgICBib3JkZXI6IDJweCBzb2xpZCAjRDFEM0Q0O1xcclxcbiAgICBib3JkZXItcmFkaXVzOiA1cHg7XFxyXFxufVxcclxcblxcclxcbiNkZW5kcm9ncmFtLWxlZ2VuZCB7XFxyXFxuICAgIG1hcmdpbi1sZWZ0OiAyMHB4O1xcclxcbn1cXHJcXG5cXHJcXG4uaW50ZXJzZWN0aW9uIHtcXHJcXG4gICAgZmlsbDogdXJsKCNzdHJpcGVkKSAhaW1wb3J0YW50O1xcclxcbiAgICBzdHJva2U6ICM2NzAwMGQ7XFxyXFxufVxcclxcblxcclxcbi5zeW0tZGlmZmVyZW5jZSB7XFxyXFxuICAgIGZpbGw6IHVybCgjc3RyaXBlZCkgIWltcG9ydGFudDtcXHJcXG4gICAgc3Ryb2tlOiAjNjcwMDBkO1xcclxcbn1cXHJcXG5cXHJcXG4ubW9kYWwtbGcge1xcclxcbiAgICBtYXgtd2lkdGg6IDgwJTtcXHJcXG59XFxyXFxuXFxyXFxuLmJhY2tncm91bmQtaW1hZ2Uge1xcclxcbiAgICBiYWNrZ3JvdW5kOiAjZmZmO1xcclxcbn1cIiwgXCJcIl0pO1xuLy8gRXhwb3J0c1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qXG4gIE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG4gIEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcbiovXG4vLyBjc3MgYmFzZSBjb2RlLCBpbmplY3RlZCBieSB0aGUgY3NzLWxvYWRlclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHVzZVNvdXJjZU1hcCkge1xuICB2YXIgbGlzdCA9IFtdOyAvLyByZXR1cm4gdGhlIGxpc3Qgb2YgbW9kdWxlcyBhcyBjc3Mgc3RyaW5nXG5cbiAgbGlzdC50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgdmFyIGNvbnRlbnQgPSBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0sIHVzZVNvdXJjZU1hcCk7XG5cbiAgICAgIGlmIChpdGVtWzJdKSB7XG4gICAgICAgIHJldHVybiBcIkBtZWRpYSBcIi5jb25jYXQoaXRlbVsyXSwgXCIge1wiKS5jb25jYXQoY29udGVudCwgXCJ9XCIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY29udGVudDtcbiAgICB9KS5qb2luKCcnKTtcbiAgfTsgLy8gaW1wb3J0IGEgbGlzdCBvZiBtb2R1bGVzIGludG8gdGhlIGxpc3RcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcblxuXG4gIGxpc3QuaSA9IGZ1bmN0aW9uIChtb2R1bGVzLCBtZWRpYVF1ZXJ5LCBkZWR1cGUpIHtcbiAgICBpZiAodHlwZW9mIG1vZHVsZXMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgIG1vZHVsZXMgPSBbW251bGwsIG1vZHVsZXMsICcnXV07XG4gICAgfVxuXG4gICAgdmFyIGFscmVhZHlJbXBvcnRlZE1vZHVsZXMgPSB7fTtcblxuICAgIGlmIChkZWR1cGUpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWRlc3RydWN0dXJpbmdcbiAgICAgICAgdmFyIGlkID0gdGhpc1tpXVswXTtcblxuICAgICAgICBpZiAoaWQgIT0gbnVsbCkge1xuICAgICAgICAgIGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaWRdID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBtb2R1bGVzLmxlbmd0aDsgX2krKykge1xuICAgICAgdmFyIGl0ZW0gPSBbXS5jb25jYXQobW9kdWxlc1tfaV0pO1xuXG4gICAgICBpZiAoZGVkdXBlICYmIGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaXRlbVswXV0pIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRpbnVlXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAobWVkaWFRdWVyeSkge1xuICAgICAgICBpZiAoIWl0ZW1bMl0pIHtcbiAgICAgICAgICBpdGVtWzJdID0gbWVkaWFRdWVyeTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtWzJdID0gXCJcIi5jb25jYXQobWVkaWFRdWVyeSwgXCIgYW5kIFwiKS5jb25jYXQoaXRlbVsyXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbGlzdC5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gbGlzdDtcbn07XG5cbmZ1bmN0aW9uIGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSwgdXNlU291cmNlTWFwKSB7XG4gIHZhciBjb250ZW50ID0gaXRlbVsxXSB8fCAnJzsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1kZXN0cnVjdHVyaW5nXG5cbiAgdmFyIGNzc01hcHBpbmcgPSBpdGVtWzNdO1xuXG4gIGlmICghY3NzTWFwcGluZykge1xuICAgIHJldHVybiBjb250ZW50O1xuICB9XG5cbiAgaWYgKHVzZVNvdXJjZU1hcCAmJiB0eXBlb2YgYnRvYSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHZhciBzb3VyY2VNYXBwaW5nID0gdG9Db21tZW50KGNzc01hcHBpbmcpO1xuICAgIHZhciBzb3VyY2VVUkxzID0gY3NzTWFwcGluZy5zb3VyY2VzLm1hcChmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICByZXR1cm4gXCIvKiMgc291cmNlVVJMPVwiLmNvbmNhdChjc3NNYXBwaW5nLnNvdXJjZVJvb3QgfHwgJycpLmNvbmNhdChzb3VyY2UsIFwiICovXCIpO1xuICAgIH0pO1xuICAgIHJldHVybiBbY29udGVudF0uY29uY2F0KHNvdXJjZVVSTHMpLmNvbmNhdChbc291cmNlTWFwcGluZ10pLmpvaW4oJ1xcbicpO1xuICB9XG5cbiAgcmV0dXJuIFtjb250ZW50XS5qb2luKCdcXG4nKTtcbn0gLy8gQWRhcHRlZCBmcm9tIGNvbnZlcnQtc291cmNlLW1hcCAoTUlUKVxuXG5cbmZ1bmN0aW9uIHRvQ29tbWVudChzb3VyY2VNYXApIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG4gIHZhciBiYXNlNjQgPSBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpO1xuICB2YXIgZGF0YSA9IFwic291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsXCIuY29uY2F0KGJhc2U2NCk7XG4gIHJldHVybiBcIi8qIyBcIi5jb25jYXQoZGF0YSwgXCIgKi9cIik7XG59IiwiLypcblx0TUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcblx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cblxudmFyIHN0eWxlc0luRG9tID0ge307XG5cbnZhclx0bWVtb2l6ZSA9IGZ1bmN0aW9uIChmbikge1xuXHR2YXIgbWVtbztcblxuXHRyZXR1cm4gZnVuY3Rpb24gKCkge1xuXHRcdGlmICh0eXBlb2YgbWVtbyA9PT0gXCJ1bmRlZmluZWRcIikgbWVtbyA9IGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdFx0cmV0dXJuIG1lbW87XG5cdH07XG59O1xuXG52YXIgaXNPbGRJRSA9IG1lbW9pemUoZnVuY3Rpb24gKCkge1xuXHQvLyBUZXN0IGZvciBJRSA8PSA5IGFzIHByb3Bvc2VkIGJ5IEJyb3dzZXJoYWNrc1xuXHQvLyBAc2VlIGh0dHA6Ly9icm93c2VyaGFja3MuY29tLyNoYWNrLWU3MWQ4NjkyZjY1MzM0MTczZmVlNzE1YzIyMmNiODA1XG5cdC8vIFRlc3RzIGZvciBleGlzdGVuY2Ugb2Ygc3RhbmRhcmQgZ2xvYmFscyBpcyB0byBhbGxvdyBzdHlsZS1sb2FkZXJcblx0Ly8gdG8gb3BlcmF0ZSBjb3JyZWN0bHkgaW50byBub24tc3RhbmRhcmQgZW52aXJvbm1lbnRzXG5cdC8vIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3dlYnBhY2stY29udHJpYi9zdHlsZS1sb2FkZXIvaXNzdWVzLzE3N1xuXHRyZXR1cm4gd2luZG93ICYmIGRvY3VtZW50ICYmIGRvY3VtZW50LmFsbCAmJiAhd2luZG93LmF0b2I7XG59KTtcblxudmFyIGdldFRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KTtcbn07XG5cbnZhciBnZXRFbGVtZW50ID0gKGZ1bmN0aW9uIChmbikge1xuXHR2YXIgbWVtbyA9IHt9O1xuXG5cdHJldHVybiBmdW5jdGlvbih0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiBwYXNzaW5nIGZ1bmN0aW9uIGluIG9wdGlvbnMsIHRoZW4gdXNlIGl0IGZvciByZXNvbHZlIFwiaGVhZFwiIGVsZW1lbnQuXG4gICAgICAgICAgICAgICAgLy8gVXNlZnVsIGZvciBTaGFkb3cgUm9vdCBzdHlsZSBpLmVcbiAgICAgICAgICAgICAgICAvLyB7XG4gICAgICAgICAgICAgICAgLy8gICBpbnNlcnRJbnRvOiBmdW5jdGlvbiAoKSB7IHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Zvb1wiKS5zaGFkb3dSb290IH1cbiAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0YXJnZXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZW1vW3RhcmdldF0gPT09IFwidW5kZWZpbmVkXCIpIHtcblx0XHRcdHZhciBzdHlsZVRhcmdldCA9IGdldFRhcmdldC5jYWxsKHRoaXMsIHRhcmdldCk7XG5cdFx0XHQvLyBTcGVjaWFsIGNhc2UgdG8gcmV0dXJuIGhlYWQgb2YgaWZyYW1lIGluc3RlYWQgb2YgaWZyYW1lIGl0c2VsZlxuXHRcdFx0aWYgKHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCAmJiBzdHlsZVRhcmdldCBpbnN0YW5jZW9mIHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCkge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdC8vIFRoaXMgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgYWNjZXNzIHRvIGlmcmFtZSBpcyBibG9ja2VkXG5cdFx0XHRcdFx0Ly8gZHVlIHRvIGNyb3NzLW9yaWdpbiByZXN0cmljdGlvbnNcblx0XHRcdFx0XHRzdHlsZVRhcmdldCA9IHN0eWxlVGFyZ2V0LmNvbnRlbnREb2N1bWVudC5oZWFkO1xuXHRcdFx0XHR9IGNhdGNoKGUpIHtcblx0XHRcdFx0XHRzdHlsZVRhcmdldCA9IG51bGw7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdG1lbW9bdGFyZ2V0XSA9IHN0eWxlVGFyZ2V0O1xuXHRcdH1cblx0XHRyZXR1cm4gbWVtb1t0YXJnZXRdXG5cdH07XG59KSgpO1xuXG52YXIgc2luZ2xldG9uID0gbnVsbDtcbnZhclx0c2luZ2xldG9uQ291bnRlciA9IDA7XG52YXJcdHN0eWxlc0luc2VydGVkQXRUb3AgPSBbXTtcblxudmFyXHRmaXhVcmxzID0gcmVxdWlyZShcIi4vdXJsc1wiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihsaXN0LCBvcHRpb25zKSB7XG5cdGlmICh0eXBlb2YgREVCVUcgIT09IFwidW5kZWZpbmVkXCIgJiYgREVCVUcpIHtcblx0XHRpZiAodHlwZW9mIGRvY3VtZW50ICE9PSBcIm9iamVjdFwiKSB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgc3R5bGUtbG9hZGVyIGNhbm5vdCBiZSB1c2VkIGluIGEgbm9uLWJyb3dzZXIgZW52aXJvbm1lbnRcIik7XG5cdH1cblxuXHRvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuXHRvcHRpb25zLmF0dHJzID0gdHlwZW9mIG9wdGlvbnMuYXR0cnMgPT09IFwib2JqZWN0XCIgPyBvcHRpb25zLmF0dHJzIDoge307XG5cblx0Ly8gRm9yY2Ugc2luZ2xlLXRhZyBzb2x1dGlvbiBvbiBJRTYtOSwgd2hpY2ggaGFzIGEgaGFyZCBsaW1pdCBvbiB0aGUgIyBvZiA8c3R5bGU+XG5cdC8vIHRhZ3MgaXQgd2lsbCBhbGxvdyBvbiBhIHBhZ2Vcblx0aWYgKCFvcHRpb25zLnNpbmdsZXRvbiAmJiB0eXBlb2Ygb3B0aW9ucy5zaW5nbGV0b24gIT09IFwiYm9vbGVhblwiKSBvcHRpb25zLnNpbmdsZXRvbiA9IGlzT2xkSUUoKTtcblxuXHQvLyBCeSBkZWZhdWx0LCBhZGQgPHN0eWxlPiB0YWdzIHRvIHRoZSA8aGVhZD4gZWxlbWVudFxuICAgICAgICBpZiAoIW9wdGlvbnMuaW5zZXJ0SW50bykgb3B0aW9ucy5pbnNlcnRJbnRvID0gXCJoZWFkXCI7XG5cblx0Ly8gQnkgZGVmYXVsdCwgYWRkIDxzdHlsZT4gdGFncyB0byB0aGUgYm90dG9tIG9mIHRoZSB0YXJnZXRcblx0aWYgKCFvcHRpb25zLmluc2VydEF0KSBvcHRpb25zLmluc2VydEF0ID0gXCJib3R0b21cIjtcblxuXHR2YXIgc3R5bGVzID0gbGlzdFRvU3R5bGVzKGxpc3QsIG9wdGlvbnMpO1xuXG5cdGFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucyk7XG5cblx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZSAobmV3TGlzdCkge1xuXHRcdHZhciBtYXlSZW1vdmUgPSBbXTtcblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgaXRlbSA9IHN0eWxlc1tpXTtcblx0XHRcdHZhciBkb21TdHlsZSA9IHN0eWxlc0luRG9tW2l0ZW0uaWRdO1xuXG5cdFx0XHRkb21TdHlsZS5yZWZzLS07XG5cdFx0XHRtYXlSZW1vdmUucHVzaChkb21TdHlsZSk7XG5cdFx0fVxuXG5cdFx0aWYobmV3TGlzdCkge1xuXHRcdFx0dmFyIG5ld1N0eWxlcyA9IGxpc3RUb1N0eWxlcyhuZXdMaXN0LCBvcHRpb25zKTtcblx0XHRcdGFkZFN0eWxlc1RvRG9tKG5ld1N0eWxlcywgb3B0aW9ucyk7XG5cdFx0fVxuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBtYXlSZW1vdmUubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBkb21TdHlsZSA9IG1heVJlbW92ZVtpXTtcblxuXHRcdFx0aWYoZG9tU3R5bGUucmVmcyA9PT0gMCkge1xuXHRcdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKSBkb21TdHlsZS5wYXJ0c1tqXSgpO1xuXG5cdFx0XHRcdGRlbGV0ZSBzdHlsZXNJbkRvbVtkb21TdHlsZS5pZF07XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xufTtcblxuZnVuY3Rpb24gYWRkU3R5bGVzVG9Eb20gKHN0eWxlcywgb3B0aW9ucykge1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBpdGVtID0gc3R5bGVzW2ldO1xuXHRcdHZhciBkb21TdHlsZSA9IHN0eWxlc0luRG9tW2l0ZW0uaWRdO1xuXG5cdFx0aWYoZG9tU3R5bGUpIHtcblx0XHRcdGRvbVN0eWxlLnJlZnMrKztcblxuXHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdGRvbVN0eWxlLnBhcnRzW2pdKGl0ZW0ucGFydHNbal0pO1xuXHRcdFx0fVxuXG5cdFx0XHRmb3IoOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRkb21TdHlsZS5wYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0sIG9wdGlvbnMpKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0dmFyIHBhcnRzID0gW107XG5cblx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdHBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xuXHRcdFx0fVxuXG5cdFx0XHRzdHlsZXNJbkRvbVtpdGVtLmlkXSA9IHtpZDogaXRlbS5pZCwgcmVmczogMSwgcGFydHM6IHBhcnRzfTtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gbGlzdFRvU3R5bGVzIChsaXN0LCBvcHRpb25zKSB7XG5cdHZhciBzdHlsZXMgPSBbXTtcblx0dmFyIG5ld1N0eWxlcyA9IHt9O1xuXG5cdGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBpdGVtID0gbGlzdFtpXTtcblx0XHR2YXIgaWQgPSBvcHRpb25zLmJhc2UgPyBpdGVtWzBdICsgb3B0aW9ucy5iYXNlIDogaXRlbVswXTtcblx0XHR2YXIgY3NzID0gaXRlbVsxXTtcblx0XHR2YXIgbWVkaWEgPSBpdGVtWzJdO1xuXHRcdHZhciBzb3VyY2VNYXAgPSBpdGVtWzNdO1xuXHRcdHZhciBwYXJ0ID0ge2NzczogY3NzLCBtZWRpYTogbWVkaWEsIHNvdXJjZU1hcDogc291cmNlTWFwfTtcblxuXHRcdGlmKCFuZXdTdHlsZXNbaWRdKSBzdHlsZXMucHVzaChuZXdTdHlsZXNbaWRdID0ge2lkOiBpZCwgcGFydHM6IFtwYXJ0XX0pO1xuXHRcdGVsc2UgbmV3U3R5bGVzW2lkXS5wYXJ0cy5wdXNoKHBhcnQpO1xuXHR9XG5cblx0cmV0dXJuIHN0eWxlcztcbn1cblxuZnVuY3Rpb24gaW5zZXJ0U3R5bGVFbGVtZW50IChvcHRpb25zLCBzdHlsZSkge1xuXHR2YXIgdGFyZ2V0ID0gZ2V0RWxlbWVudChvcHRpb25zLmluc2VydEludG8pXG5cblx0aWYgKCF0YXJnZXQpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCBmaW5kIGEgc3R5bGUgdGFyZ2V0LiBUaGlzIHByb2JhYmx5IG1lYW5zIHRoYXQgdGhlIHZhbHVlIGZvciB0aGUgJ2luc2VydEludG8nIHBhcmFtZXRlciBpcyBpbnZhbGlkLlwiKTtcblx0fVxuXG5cdHZhciBsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCA9IHN0eWxlc0luc2VydGVkQXRUb3Bbc3R5bGVzSW5zZXJ0ZWRBdFRvcC5sZW5ndGggLSAxXTtcblxuXHRpZiAob3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJ0b3BcIikge1xuXHRcdGlmICghbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3ApIHtcblx0XHRcdHRhcmdldC5pbnNlcnRCZWZvcmUoc3R5bGUsIHRhcmdldC5maXJzdENoaWxkKTtcblx0XHR9IGVsc2UgaWYgKGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wLm5leHRTaWJsaW5nKSB7XG5cdFx0XHR0YXJnZXQuaW5zZXJ0QmVmb3JlKHN0eWxlLCBsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcC5uZXh0U2libGluZyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XG5cdFx0fVxuXHRcdHN0eWxlc0luc2VydGVkQXRUb3AucHVzaChzdHlsZSk7XG5cdH0gZWxzZSBpZiAob3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJib3R0b21cIikge1xuXHRcdHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XG5cdH0gZWxzZSBpZiAodHlwZW9mIG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwib2JqZWN0XCIgJiYgb3B0aW9ucy5pbnNlcnRBdC5iZWZvcmUpIHtcblx0XHR2YXIgbmV4dFNpYmxpbmcgPSBnZXRFbGVtZW50KG9wdGlvbnMuaW5zZXJ0SW50byArIFwiIFwiICsgb3B0aW9ucy5pbnNlcnRBdC5iZWZvcmUpO1xuXHRcdHRhcmdldC5pbnNlcnRCZWZvcmUoc3R5bGUsIG5leHRTaWJsaW5nKTtcblx0fSBlbHNlIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJbU3R5bGUgTG9hZGVyXVxcblxcbiBJbnZhbGlkIHZhbHVlIGZvciBwYXJhbWV0ZXIgJ2luc2VydEF0JyAoJ29wdGlvbnMuaW5zZXJ0QXQnKSBmb3VuZC5cXG4gTXVzdCBiZSAndG9wJywgJ2JvdHRvbScsIG9yIE9iamVjdC5cXG4gKGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrLWNvbnRyaWIvc3R5bGUtbG9hZGVyI2luc2VydGF0KVxcblwiKTtcblx0fVxufVxuXG5mdW5jdGlvbiByZW1vdmVTdHlsZUVsZW1lbnQgKHN0eWxlKSB7XG5cdGlmIChzdHlsZS5wYXJlbnROb2RlID09PSBudWxsKSByZXR1cm4gZmFsc2U7XG5cdHN0eWxlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGUpO1xuXG5cdHZhciBpZHggPSBzdHlsZXNJbnNlcnRlZEF0VG9wLmluZGV4T2Yoc3R5bGUpO1xuXHRpZihpZHggPj0gMCkge1xuXHRcdHN0eWxlc0luc2VydGVkQXRUb3Auc3BsaWNlKGlkeCwgMSk7XG5cdH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlU3R5bGVFbGVtZW50IChvcHRpb25zKSB7XG5cdHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcblxuXHRpZihvcHRpb25zLmF0dHJzLnR5cGUgPT09IHVuZGVmaW5lZCkge1xuXHRcdG9wdGlvbnMuYXR0cnMudHlwZSA9IFwidGV4dC9jc3NcIjtcblx0fVxuXG5cdGFkZEF0dHJzKHN0eWxlLCBvcHRpb25zLmF0dHJzKTtcblx0aW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIHN0eWxlKTtcblxuXHRyZXR1cm4gc3R5bGU7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUxpbmtFbGVtZW50IChvcHRpb25zKSB7XG5cdHZhciBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XG5cblx0aWYob3B0aW9ucy5hdHRycy50eXBlID09PSB1bmRlZmluZWQpIHtcblx0XHRvcHRpb25zLmF0dHJzLnR5cGUgPSBcInRleHQvY3NzXCI7XG5cdH1cblx0b3B0aW9ucy5hdHRycy5yZWwgPSBcInN0eWxlc2hlZXRcIjtcblxuXHRhZGRBdHRycyhsaW5rLCBvcHRpb25zLmF0dHJzKTtcblx0aW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIGxpbmspO1xuXG5cdHJldHVybiBsaW5rO1xufVxuXG5mdW5jdGlvbiBhZGRBdHRycyAoZWwsIGF0dHJzKSB7XG5cdE9iamVjdC5rZXlzKGF0dHJzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0XHRlbC5zZXRBdHRyaWJ1dGUoa2V5LCBhdHRyc1trZXldKTtcblx0fSk7XG59XG5cbmZ1bmN0aW9uIGFkZFN0eWxlIChvYmosIG9wdGlvbnMpIHtcblx0dmFyIHN0eWxlLCB1cGRhdGUsIHJlbW92ZSwgcmVzdWx0O1xuXG5cdC8vIElmIGEgdHJhbnNmb3JtIGZ1bmN0aW9uIHdhcyBkZWZpbmVkLCBydW4gaXQgb24gdGhlIGNzc1xuXHRpZiAob3B0aW9ucy50cmFuc2Zvcm0gJiYgb2JqLmNzcykge1xuXHQgICAgcmVzdWx0ID0gb3B0aW9ucy50cmFuc2Zvcm0ob2JqLmNzcyk7XG5cblx0ICAgIGlmIChyZXN1bHQpIHtcblx0ICAgIFx0Ly8gSWYgdHJhbnNmb3JtIHJldHVybnMgYSB2YWx1ZSwgdXNlIHRoYXQgaW5zdGVhZCBvZiB0aGUgb3JpZ2luYWwgY3NzLlxuXHQgICAgXHQvLyBUaGlzIGFsbG93cyBydW5uaW5nIHJ1bnRpbWUgdHJhbnNmb3JtYXRpb25zIG9uIHRoZSBjc3MuXG5cdCAgICBcdG9iai5jc3MgPSByZXN1bHQ7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgXHQvLyBJZiB0aGUgdHJhbnNmb3JtIGZ1bmN0aW9uIHJldHVybnMgYSBmYWxzeSB2YWx1ZSwgZG9uJ3QgYWRkIHRoaXMgY3NzLlxuXHQgICAgXHQvLyBUaGlzIGFsbG93cyBjb25kaXRpb25hbCBsb2FkaW5nIG9mIGNzc1xuXHQgICAgXHRyZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICBcdFx0Ly8gbm9vcFxuXHQgICAgXHR9O1xuXHQgICAgfVxuXHR9XG5cblx0aWYgKG9wdGlvbnMuc2luZ2xldG9uKSB7XG5cdFx0dmFyIHN0eWxlSW5kZXggPSBzaW5nbGV0b25Db3VudGVyKys7XG5cblx0XHRzdHlsZSA9IHNpbmdsZXRvbiB8fCAoc2luZ2xldG9uID0gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpKTtcblxuXHRcdHVwZGF0ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgZmFsc2UpO1xuXHRcdHJlbW92ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgdHJ1ZSk7XG5cblx0fSBlbHNlIGlmIChcblx0XHRvYmouc291cmNlTWFwICYmXG5cdFx0dHlwZW9mIFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIFVSTC5jcmVhdGVPYmplY3RVUkwgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBVUkwucmV2b2tlT2JqZWN0VVJMID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgQmxvYiA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIGJ0b2EgPT09IFwiZnVuY3Rpb25cIlxuXHQpIHtcblx0XHRzdHlsZSA9IGNyZWF0ZUxpbmtFbGVtZW50KG9wdGlvbnMpO1xuXHRcdHVwZGF0ZSA9IHVwZGF0ZUxpbmsuYmluZChudWxsLCBzdHlsZSwgb3B0aW9ucyk7XG5cdFx0cmVtb3ZlID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0cmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKTtcblxuXHRcdFx0aWYoc3R5bGUuaHJlZikgVVJMLnJldm9rZU9iamVjdFVSTChzdHlsZS5ocmVmKTtcblx0XHR9O1xuXHR9IGVsc2Uge1xuXHRcdHN0eWxlID0gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpO1xuXHRcdHVwZGF0ZSA9IGFwcGx5VG9UYWcuYmluZChudWxsLCBzdHlsZSk7XG5cdFx0cmVtb3ZlID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0cmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKTtcblx0XHR9O1xuXHR9XG5cblx0dXBkYXRlKG9iaik7XG5cblx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlIChuZXdPYmopIHtcblx0XHRpZiAobmV3T2JqKSB7XG5cdFx0XHRpZiAoXG5cdFx0XHRcdG5ld09iai5jc3MgPT09IG9iai5jc3MgJiZcblx0XHRcdFx0bmV3T2JqLm1lZGlhID09PSBvYmoubWVkaWEgJiZcblx0XHRcdFx0bmV3T2JqLnNvdXJjZU1hcCA9PT0gb2JqLnNvdXJjZU1hcFxuXHRcdFx0KSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0dXBkYXRlKG9iaiA9IG5ld09iaik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJlbW92ZSgpO1xuXHRcdH1cblx0fTtcbn1cblxudmFyIHJlcGxhY2VUZXh0ID0gKGZ1bmN0aW9uICgpIHtcblx0dmFyIHRleHRTdG9yZSA9IFtdO1xuXG5cdHJldHVybiBmdW5jdGlvbiAoaW5kZXgsIHJlcGxhY2VtZW50KSB7XG5cdFx0dGV4dFN0b3JlW2luZGV4XSA9IHJlcGxhY2VtZW50O1xuXG5cdFx0cmV0dXJuIHRleHRTdG9yZS5maWx0ZXIoQm9vbGVhbikuam9pbignXFxuJyk7XG5cdH07XG59KSgpO1xuXG5mdW5jdGlvbiBhcHBseVRvU2luZ2xldG9uVGFnIChzdHlsZSwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XG5cdHZhciBjc3MgPSByZW1vdmUgPyBcIlwiIDogb2JqLmNzcztcblxuXHRpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuXHRcdHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IHJlcGxhY2VUZXh0KGluZGV4LCBjc3MpO1xuXHR9IGVsc2Uge1xuXHRcdHZhciBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKTtcblx0XHR2YXIgY2hpbGROb2RlcyA9IHN0eWxlLmNoaWxkTm9kZXM7XG5cblx0XHRpZiAoY2hpbGROb2Rlc1tpbmRleF0pIHN0eWxlLnJlbW92ZUNoaWxkKGNoaWxkTm9kZXNbaW5kZXhdKTtcblxuXHRcdGlmIChjaGlsZE5vZGVzLmxlbmd0aCkge1xuXHRcdFx0c3R5bGUuaW5zZXJ0QmVmb3JlKGNzc05vZGUsIGNoaWxkTm9kZXNbaW5kZXhdKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0c3R5bGUuYXBwZW5kQ2hpbGQoY3NzTm9kZSk7XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIGFwcGx5VG9UYWcgKHN0eWxlLCBvYmopIHtcblx0dmFyIGNzcyA9IG9iai5jc3M7XG5cdHZhciBtZWRpYSA9IG9iai5tZWRpYTtcblxuXHRpZihtZWRpYSkge1xuXHRcdHN0eWxlLnNldEF0dHJpYnV0ZShcIm1lZGlhXCIsIG1lZGlhKVxuXHR9XG5cblx0aWYoc3R5bGUuc3R5bGVTaGVldCkge1xuXHRcdHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcblx0fSBlbHNlIHtcblx0XHR3aGlsZShzdHlsZS5maXJzdENoaWxkKSB7XG5cdFx0XHRzdHlsZS5yZW1vdmVDaGlsZChzdHlsZS5maXJzdENoaWxkKTtcblx0XHR9XG5cblx0XHRzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcblx0fVxufVxuXG5mdW5jdGlvbiB1cGRhdGVMaW5rIChsaW5rLCBvcHRpb25zLCBvYmopIHtcblx0dmFyIGNzcyA9IG9iai5jc3M7XG5cdHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuXG5cdC8qXG5cdFx0SWYgY29udmVydFRvQWJzb2x1dGVVcmxzIGlzbid0IGRlZmluZWQsIGJ1dCBzb3VyY2VtYXBzIGFyZSBlbmFibGVkXG5cdFx0YW5kIHRoZXJlIGlzIG5vIHB1YmxpY1BhdGggZGVmaW5lZCB0aGVuIGxldHMgdHVybiBjb252ZXJ0VG9BYnNvbHV0ZVVybHNcblx0XHRvbiBieSBkZWZhdWx0LiAgT3RoZXJ3aXNlIGRlZmF1bHQgdG8gdGhlIGNvbnZlcnRUb0Fic29sdXRlVXJscyBvcHRpb25cblx0XHRkaXJlY3RseVxuXHQqL1xuXHR2YXIgYXV0b0ZpeFVybHMgPSBvcHRpb25zLmNvbnZlcnRUb0Fic29sdXRlVXJscyA9PT0gdW5kZWZpbmVkICYmIHNvdXJjZU1hcDtcblxuXHRpZiAob3B0aW9ucy5jb252ZXJ0VG9BYnNvbHV0ZVVybHMgfHwgYXV0b0ZpeFVybHMpIHtcblx0XHRjc3MgPSBmaXhVcmxzKGNzcyk7XG5cdH1cblxuXHRpZiAoc291cmNlTWFwKSB7XG5cdFx0Ly8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjY2MDM4NzVcblx0XHRjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiICsgYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSArIFwiICovXCI7XG5cdH1cblxuXHR2YXIgYmxvYiA9IG5ldyBCbG9iKFtjc3NdLCB7IHR5cGU6IFwidGV4dC9jc3NcIiB9KTtcblxuXHR2YXIgb2xkU3JjID0gbGluay5ocmVmO1xuXG5cdGxpbmsuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG5cblx0aWYob2xkU3JjKSBVUkwucmV2b2tlT2JqZWN0VVJMKG9sZFNyYyk7XG59XG4iLCJcbi8qKlxuICogV2hlbiBzb3VyY2UgbWFwcyBhcmUgZW5hYmxlZCwgYHN0eWxlLWxvYWRlcmAgdXNlcyBhIGxpbmsgZWxlbWVudCB3aXRoIGEgZGF0YS11cmkgdG9cbiAqIGVtYmVkIHRoZSBjc3Mgb24gdGhlIHBhZ2UuIFRoaXMgYnJlYWtzIGFsbCByZWxhdGl2ZSB1cmxzIGJlY2F1c2Ugbm93IHRoZXkgYXJlIHJlbGF0aXZlIHRvIGFcbiAqIGJ1bmRsZSBpbnN0ZWFkIG9mIHRoZSBjdXJyZW50IHBhZ2UuXG4gKlxuICogT25lIHNvbHV0aW9uIGlzIHRvIG9ubHkgdXNlIGZ1bGwgdXJscywgYnV0IHRoYXQgbWF5IGJlIGltcG9zc2libGUuXG4gKlxuICogSW5zdGVhZCwgdGhpcyBmdW5jdGlvbiBcImZpeGVzXCIgdGhlIHJlbGF0aXZlIHVybHMgdG8gYmUgYWJzb2x1dGUgYWNjb3JkaW5nIHRvIHRoZSBjdXJyZW50IHBhZ2UgbG9jYXRpb24uXG4gKlxuICogQSBydWRpbWVudGFyeSB0ZXN0IHN1aXRlIGlzIGxvY2F0ZWQgYXQgYHRlc3QvZml4VXJscy5qc2AgYW5kIGNhbiBiZSBydW4gdmlhIHRoZSBgbnBtIHRlc3RgIGNvbW1hbmQuXG4gKlxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGNzcykge1xuICAvLyBnZXQgY3VycmVudCBsb2NhdGlvblxuICB2YXIgbG9jYXRpb24gPSB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHdpbmRvdy5sb2NhdGlvbjtcblxuICBpZiAoIWxvY2F0aW9uKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiZml4VXJscyByZXF1aXJlcyB3aW5kb3cubG9jYXRpb25cIik7XG4gIH1cblxuXHQvLyBibGFuayBvciBudWxsP1xuXHRpZiAoIWNzcyB8fCB0eXBlb2YgY3NzICE9PSBcInN0cmluZ1wiKSB7XG5cdCAgcmV0dXJuIGNzcztcbiAgfVxuXG4gIHZhciBiYXNlVXJsID0gbG9jYXRpb24ucHJvdG9jb2wgKyBcIi8vXCIgKyBsb2NhdGlvbi5ob3N0O1xuICB2YXIgY3VycmVudERpciA9IGJhc2VVcmwgKyBsb2NhdGlvbi5wYXRobmFtZS5yZXBsYWNlKC9cXC9bXlxcL10qJC8sIFwiL1wiKTtcblxuXHQvLyBjb252ZXJ0IGVhY2ggdXJsKC4uLilcblx0Lypcblx0VGhpcyByZWd1bGFyIGV4cHJlc3Npb24gaXMganVzdCBhIHdheSB0byByZWN1cnNpdmVseSBtYXRjaCBicmFja2V0cyB3aXRoaW5cblx0YSBzdHJpbmcuXG5cblx0IC91cmxcXHMqXFwoICA9IE1hdGNoIG9uIHRoZSB3b3JkIFwidXJsXCIgd2l0aCBhbnkgd2hpdGVzcGFjZSBhZnRlciBpdCBhbmQgdGhlbiBhIHBhcmVuc1xuXHQgICAoICA9IFN0YXJ0IGEgY2FwdHVyaW5nIGdyb3VwXG5cdCAgICAgKD86ICA9IFN0YXJ0IGEgbm9uLWNhcHR1cmluZyBncm91cFxuXHQgICAgICAgICBbXikoXSAgPSBNYXRjaCBhbnl0aGluZyB0aGF0IGlzbid0IGEgcGFyZW50aGVzZXNcblx0ICAgICAgICAgfCAgPSBPUlxuXHQgICAgICAgICBcXCggID0gTWF0Y2ggYSBzdGFydCBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgKD86ICA9IFN0YXJ0IGFub3RoZXIgbm9uLWNhcHR1cmluZyBncm91cHNcblx0ICAgICAgICAgICAgICAgICBbXikoXSsgID0gTWF0Y2ggYW55dGhpbmcgdGhhdCBpc24ndCBhIHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICAgICAgfCAgPSBPUlxuXHQgICAgICAgICAgICAgICAgIFxcKCAgPSBNYXRjaCBhIHN0YXJ0IHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICAgICAgICAgIFteKShdKiAgPSBNYXRjaCBhbnl0aGluZyB0aGF0IGlzbid0IGEgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICAgICBcXCkgID0gTWF0Y2ggYSBlbmQgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICkgID0gRW5kIEdyb3VwXG4gICAgICAgICAgICAgICpcXCkgPSBNYXRjaCBhbnl0aGluZyBhbmQgdGhlbiBhIGNsb3NlIHBhcmVuc1xuICAgICAgICAgICkgID0gQ2xvc2Ugbm9uLWNhcHR1cmluZyBncm91cFxuICAgICAgICAgICogID0gTWF0Y2ggYW55dGhpbmdcbiAgICAgICApICA9IENsb3NlIGNhcHR1cmluZyBncm91cFxuXHQgXFwpICA9IE1hdGNoIGEgY2xvc2UgcGFyZW5zXG5cblx0IC9naSAgPSBHZXQgYWxsIG1hdGNoZXMsIG5vdCB0aGUgZmlyc3QuICBCZSBjYXNlIGluc2Vuc2l0aXZlLlxuXHQgKi9cblx0dmFyIGZpeGVkQ3NzID0gY3NzLnJlcGxhY2UoL3VybFxccypcXCgoKD86W14pKF18XFwoKD86W14pKF0rfFxcKFteKShdKlxcKSkqXFwpKSopXFwpL2dpLCBmdW5jdGlvbihmdWxsTWF0Y2gsIG9yaWdVcmwpIHtcblx0XHQvLyBzdHJpcCBxdW90ZXMgKGlmIHRoZXkgZXhpc3QpXG5cdFx0dmFyIHVucXVvdGVkT3JpZ1VybCA9IG9yaWdVcmxcblx0XHRcdC50cmltKClcblx0XHRcdC5yZXBsYWNlKC9eXCIoLiopXCIkLywgZnVuY3Rpb24obywgJDEpeyByZXR1cm4gJDE7IH0pXG5cdFx0XHQucmVwbGFjZSgvXicoLiopJyQvLCBmdW5jdGlvbihvLCAkMSl7IHJldHVybiAkMTsgfSk7XG5cblx0XHQvLyBhbHJlYWR5IGEgZnVsbCB1cmw/IG5vIGNoYW5nZVxuXHRcdGlmICgvXigjfGRhdGE6fGh0dHA6XFwvXFwvfGh0dHBzOlxcL1xcL3xmaWxlOlxcL1xcL1xcL3xcXHMqJCkvaS50ZXN0KHVucXVvdGVkT3JpZ1VybCkpIHtcblx0XHQgIHJldHVybiBmdWxsTWF0Y2g7XG5cdFx0fVxuXG5cdFx0Ly8gY29udmVydCB0aGUgdXJsIHRvIGEgZnVsbCB1cmxcblx0XHR2YXIgbmV3VXJsO1xuXG5cdFx0aWYgKHVucXVvdGVkT3JpZ1VybC5pbmRleE9mKFwiLy9cIikgPT09IDApIHtcblx0XHQgIFx0Ly9UT0RPOiBzaG91bGQgd2UgYWRkIHByb3RvY29sP1xuXHRcdFx0bmV3VXJsID0gdW5xdW90ZWRPcmlnVXJsO1xuXHRcdH0gZWxzZSBpZiAodW5xdW90ZWRPcmlnVXJsLmluZGV4T2YoXCIvXCIpID09PSAwKSB7XG5cdFx0XHQvLyBwYXRoIHNob3VsZCBiZSByZWxhdGl2ZSB0byB0aGUgYmFzZSB1cmxcblx0XHRcdG5ld1VybCA9IGJhc2VVcmwgKyB1bnF1b3RlZE9yaWdVcmw7IC8vIGFscmVhZHkgc3RhcnRzIHdpdGggJy8nXG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIHBhdGggc2hvdWxkIGJlIHJlbGF0aXZlIHRvIGN1cnJlbnQgZGlyZWN0b3J5XG5cdFx0XHRuZXdVcmwgPSBjdXJyZW50RGlyICsgdW5xdW90ZWRPcmlnVXJsLnJlcGxhY2UoL15cXC5cXC8vLCBcIlwiKTsgLy8gU3RyaXAgbGVhZGluZyAnLi8nXG5cdFx0fVxuXG5cdFx0Ly8gc2VuZCBiYWNrIHRoZSBmaXhlZCB1cmwoLi4uKVxuXHRcdHJldHVybiBcInVybChcIiArIEpTT04uc3RyaW5naWZ5KG5ld1VybCkgKyBcIilcIjtcblx0fSk7XG5cblx0Ly8gc2VuZCBiYWNrIHRoZSBmaXhlZCBjc3Ncblx0cmV0dXJuIGZpeGVkQ3NzO1xufTtcbiIsIi8qZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLWxldHMqL1xyXG4vKmdsb2JhbCB3aW5kb3csIGQzLCAkKi9cclxuaW1wb3J0IHtcclxuICAgIGRhdGFzZXRNZXRhZGF0YSxcclxuICAgIHN3YXJtRGF0YSxcclxuICAgIGFuaW1hbElkc1xyXG59IGZyb20gJy4uL2V4cGxvcmUuanMnO1xyXG5cclxuaW1wb3J0ICogYXMgU1BWIGZyb20gJy4vc3BhdGlhbF92aWV3LmpzJztcclxuXHJcbmltcG9ydCAqIGFzIE5ldHdvcmsgZnJvbSAnLi4vbmV0d29yay5qcyc7XHJcblxyXG5leHBvcnQgbGV0IHNsaWRlcjsgLy8gdGltZSBzbGlkZXIgb2YgdGhlIGFwcFxyXG5leHBvcnQgbGV0IHRvb2x0aXA7IC8vIHRvb2x0aXAgZnVuY3Rpb25cclxuXHJcbi8qKlxyXG4gKiBCcnVzaCBlbmQgZnVuY3Rpb25cclxuICogYWRkIGFjdGl2ZSBhbmltYWxzIHRvIHRoZSBhcnJheSBvciByZW1vdmUgdGhlbVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGJydXNoZW5kKCkge1xyXG4gICAgbGV0IGFycmF5QW5pbWFscyA9IFNQVi5hcnJheUFuaW1hbHM7XHJcbiAgICBsZXQgYWN0aXZlQW5pbWFscyA9IFNQVi5hY3RpdmVBbmltYWxzO1xyXG4gICAgdmFyIHJlY3QgPSBkMy5ldmVudC5zZWxlY3Rpb247XHJcbiAgICAvL2l0ZXJhdGUgb3ZlciB0aGUgMTUxIGZpc2ggdG8gY2hlY2sgd2hpY2ggYXJlIGluIHRoZSBicnVzaFxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhbmltYWxJZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2YXIgcG9pbnQgPSBbYXJyYXlBbmltYWxzW2ldWydwJ11bMF0sIGFycmF5QW5pbWFsc1tpXVsncCddWzFdXTtcclxuICAgICAgICAvL2NoZWNrIHdoaWNoIGZpc2ggYXJlIGluICB0aGUgYnJ1c2hlZCBhcmVhXHJcbiAgICAgICAgaWYgKChyZWN0WzBdWzBdIDw9IHBvaW50WzBdKSAmJiAocG9pbnRbMF0gPD0gcmVjdFsxXVswXSkgJiZcclxuICAgICAgICAgICAgKHJlY3RbMF1bMV0gPD0gcG9pbnRbMV0pICYmIChwb2ludFsxXSA8PSByZWN0WzFdWzFdKSkge1xyXG4gICAgICAgICAgICAvLyBQb2ludCBpcyBpbiB0aGUgYnJ1c2hcclxuICAgICAgICAgICAgYWN0aXZlQW5pbWFscy5wdXNoKGFycmF5QW5pbWFsc1tpXVsnYSddKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBTUFYuc2V0QWN0aXZlQW5pbWFscyhhY3RpdmVBbmltYWxzKTtcclxuICAgIGlmICghJCgnI3BsYXktYnV0dG9uJylcclxuICAgICAgICAuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgLy9nbyBiYWNrIG9uZSBzZWNvbmQgYW5kIGRyYXcgdGhlIG5leHQgZnJhbWVcclxuICAgICAgICAvL3RoaXMgYXBwbHlzIHRoZSBjaGFuZ2VzXHJcbiAgICAgICAgU1BWLmRlY0luZGV4VGltZSgpO1xyXG4gICAgICAgIFNQVi5kcmF3KCk7XHJcbiAgICB9XHJcbiAgICAkKCcjYnJ1c2hpbmctYnV0dG9uJylcclxuICAgICAgICAucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgLy8gcmVtb3ZlIHRoZSBicnVzaFxyXG4gICAgJCgnLmJydXNoJylcclxuICAgICAgICAucmVtb3ZlKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbml0aWFsaXplIHRoZSB0b29sdGlwXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaW5pdFRvb2x0aXAoKSB7XHJcbiAgICB0b29sdGlwID0gZDMuc2VsZWN0KCdkaXYudG9vbHRpcCcpXHJcbiAgICAgICAgLnN0eWxlKCdsZWZ0JywgMCArICdweCcpXHJcbiAgICAgICAgLnN0eWxlKCd0b3AnLCAwICsgJ3B4JylcclxuICAgICAgICAub24oJ21vdXNlb3ZlcicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB0b29sdGlwXHJcbiAgICAgICAgICAgICAgICAuc3R5bGUoJ29wYWNpdHknLCAxKTtcclxuICAgICAgICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFRvb2x0aXAgZnVuY3Rpb25cclxuICogQHBhcmFtIHtPYmplY3R9IGQgLSBkMyBkYXRhIG9iamVjdCB3aXRoIHRoZSBtZXRhZGF0YSBpbmZvcm1hdGlvblxyXG4gKlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHRvb2x0aXBGdW5jdGlvbihkKSB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGFzZXRNZXRhZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmIChkWydhJ10gPT09IGRhdGFzZXRNZXRhZGF0YVtpXVsnYW5pbWFsX2lkJ10pIHtcclxuICAgICAgICAgICAgdG9vbHRpcFxyXG4gICAgICAgICAgICAgICAgLnN0eWxlKCdsZWZ0JywgKGQzLmV2ZW50LnBhZ2VYICsgNSkgKyAncHgnKVxyXG4gICAgICAgICAgICAgICAgLnN0eWxlKCd0b3AnLCAoZDMuZXZlbnQucGFnZVkgLSAxMDApICsgJ3B4JylcclxuICAgICAgICAgICAgICAgIC5zdHlsZSgnb3BhY2l0eScsIDEpO1xyXG4gICAgICAgICAgICAvLyBzZXQgdGhlIHZhbHVlc1xyXG4gICAgICAgICAgICAvLyBUT0RPIG1ha2UgdGhpcyBtb2R1bGFyXHJcbiAgICAgICAgICAgIHRvb2x0aXAuc2VsZWN0KCcjdG9vbHRpcC1hbmltYWwtaWQnKVxyXG4gICAgICAgICAgICAgICAgLmh0bWwoZGF0YXNldE1ldGFkYXRhW2ldWydhbmltYWxfaWQnXSk7XHJcbiAgICAgICAgICAgIHRvb2x0aXAuc2VsZWN0KCcjdG9vbHRpcC1zcGVjaWVzJylcclxuICAgICAgICAgICAgICAgIC5odG1sKGRhdGFzZXRNZXRhZGF0YVtpXVsnc3BlY2llcyddKTtcclxuICAgICAgICAgICAgdG9vbHRpcC5zZWxlY3QoJyN0b29sdGlwLXNleCcpXHJcbiAgICAgICAgICAgICAgICAuaHRtbChkYXRhc2V0TWV0YWRhdGFbaV1bJ3NleCddKTtcclxuICAgICAgICAgICAgdG9vbHRpcC5zZWxlY3QoJyN0b29sdGlwLXNpemUnKVxyXG4gICAgICAgICAgICAgICAgLmh0bWwoZGF0YXNldE1ldGFkYXRhW2ldWydzaXplJ10pO1xyXG4gICAgICAgICAgICB0b29sdGlwLnNlbGVjdCgnI3Rvb2x0aXAtd2VpZ2h0JylcclxuICAgICAgICAgICAgICAgIC5odG1sKGRhdGFzZXRNZXRhZGF0YVtpXVsnd2VpZ2h0J10pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbml0aWFsaXplIHRoZSB0aW1lIHNsaWRlciBhbmQgdGhlIGR5bmFtaWMgbmV0d29yayBzbGlkZXJcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpbml0U2xpZGVycygpIHtcclxuICAgIC8vIHRpbWUgc2xpZGVyXHJcbiAgICBzbGlkZXIgPSAkKCcjc2xpZGVyJylcclxuICAgICAgICAuc2xpZGVyKHtcclxuICAgICAgICAgICAgbWluOiAwLFxyXG4gICAgICAgICAgICBtYXg6IHN3YXJtRGF0YS5sZW5ndGgsXHJcbiAgICAgICAgICAgIHN0ZXA6IDI1LFxyXG4gICAgICAgICAgICBzbGlkZTogZnVuY3Rpb24oZXZlbnQsIHVpKSB7XHJcbiAgICAgICAgICAgICAgICBTUFYuc2V0SW5kZXhUaW1lKHVpLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIC8vIGlmIHBhdXNlZCBhcHBseSBjaGFuZ2VzXHJcbiAgICAgICAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuICAgICAgICAgICAgICAgICAgICBTUFYuZHJhdygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAvLyBpbml0aWFsaXplIHRoZSBOZXR3b3JrIHNsaWRlclxyXG4gICAgJCgnI25ldHdvcmstc2xpZGVyJylcclxuICAgICAgICAuc2xpZGVyKHtcclxuICAgICAgICAgICAgcmFuZ2U6ICdtYXgnLFxyXG4gICAgICAgICAgICBtaW46IDAsXHJcbiAgICAgICAgICAgIG1heDogMSxcclxuICAgICAgICAgICAgc3RlcDogMC4wMSxcclxuICAgICAgICAgICAgdmFsdWU6IDAuNSxcclxuICAgICAgICAgICAgc2xpZGU6IGZ1bmN0aW9uKGV2ZW50LCB1aSkge1xyXG4gICAgICAgICAgICAgICAgTmV0d29yay5zZXROZXR3b3JMaW1pdCh1aS52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAkKCcjbmV0d29yay1saW1pdCcpLnZhbCh1aS52YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIC8vIHNldCB0ZXh0IGZvciB0aGUgZmlyc3QgaW5pdGlhbGl6YXRpb25cclxuICAgICQoJyNuZXR3b3JrLWxpbWl0JykudmFsKDAuNSk7XHJcblxyXG4gICAgLy8gZ2V0IHRoZSBtYXggZnJvbSB0aGUgc2xpZGVyIHRoaXMgaXMgbmVlZGVkIHRvIGNhbGN1bGF0ZSB0aGUgdGlja3NcclxuICAgIGxldCBtYXggPSBzbGlkZXIuc2xpZGVyKCdvcHRpb24nLCAnbWF4Jyk7XHJcbiAgICBsZXQgc3BhY2UgPSAxMDAgLyBtYXg7XHJcbiAgICAvL2FwcGVuZCB0aGUgbWludXRlIHRpY2tzXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1heDsgaSA9IGkgKyAxNTAwKSB7XHJcbiAgICAgICAgJCgnPHNwYW4gY2xhc3M9XCJ1aS1zbGlkZXItdGlja1wiPjwvc3Bhbj4nKVxyXG4gICAgICAgICAgICAuY3NzKCdsZWZ0JywgKHNwYWNlICogaSkgKyAnJScpXHJcbiAgICAgICAgICAgIC5hcHBlbmRUbyhzbGlkZXIpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICBTZXR0ZXJcclxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4vKipcclxuICogU2V0IHRoZSB0aW1lIHNsaWRlciB0byBhIG5ldyB2YWx1ZVxyXG4gKiBAcGFyYW0ge051bWJlcn0gdmFsdWUgLSBuZXcgdmFsdWUgZm9yIHRoZSB0aW1lIHNsaWRlclxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldFRpbWVTbGlkZXIodmFsdWUpIHtcclxuICAgIHNsaWRlci5zbGlkZXIoJ3ZhbHVlJywgdmFsdWUpO1xyXG59IiwiLyplc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtbGV0cyovXHJcbi8qZ2xvYmFsIHdpbmRvdywgZDMsICQsIGNvbG9yYnJld2VyKi9cclxuaW1wb3J0ICogYXMgU1BWIGZyb20gJy4vc3BhdGlhbF92aWV3LmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBjaGFuZ2VMZWdlbmRcclxufSBmcm9tICcuL2xlZ2VuZC5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgZGF0YVNldFBlcmNlbnRpbGVcclxufSBmcm9tICcuLi9leHBsb3JlLmpzJztcclxuXHJcbmV4cG9ydCBsZXQgY29sb3JTY2FsZSA9IHtcclxuICAgIHR5cGU6ICdMaW5lYXInLFxyXG4gICAgY29sb3I6IGNvbG9yYnJld2VyLkJ1WWxCdVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIFJldHVybnMgdGhlIGNvbG9yIHNjYWxlXHJcbiAqIEByZXR1cm4ge2NvbG9yU2NhbGV9IGFjdGl2ZSBjb2xvciBzY2FsZSBpcyBpbiBsaW5lYXIgb3IgdGhyZXNob2xkXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcmV0dXJuQ29sb3JTY2FsZSgpIHtcclxuICAgIC8vaWYgbGluZWFyIGlzIGNob29zZW5cclxuICAgIGlmIChjb2xvclNjYWxlWyd0eXBlJ10gPT09ICdMaW5lYXInKSB7XHJcbiAgICAgICAgcmV0dXJuIGQzLnNjYWxlTGluZWFyKClcclxuICAgICAgICAgICAgLmRvbWFpbihcclxuICAgICAgICAgICAgICAgIGRhdGFTZXRQZXJjZW50aWxlW1NQVi5hY3RpdmVTY2FsZV1cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAucmFuZ2UoY29sb3JTY2FsZVsnY29sb3InXSk7XHJcbiAgICB9IC8vVGhyZXNob2xkIGNvbG9yIHNjYWxlXHJcbiAgICBlbHNlIGlmIChjb2xvclNjYWxlWyd0eXBlJ10gPT09ICdUaHJlc2hvbGQnKSB7XHJcbiAgICAgICAgcmV0dXJuIGQzLnNjYWxlVGhyZXNob2xkKClcclxuICAgICAgICAgICAgLmRvbWFpbihcclxuICAgICAgICAgICAgICAgIGRhdGFTZXRQZXJjZW50aWxlW1NQVi5hY3RpdmVTY2FsZV1cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAucmFuZ2UoY29sb3JTY2FsZVsnY29sb3InXSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbml0aWFsaXplIHRoZSBjb2xvciBwaWNrZXJcclxuICogd2l0aCBhbGwgbGlzdGVuZXJzIGluY2x1ZGVkXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaW5pdENvbG9yUGlja2VyKCkge1xyXG4gICAgZDMuc2VsZWN0KCcuY29sb3JzLWJvZHknKVxyXG4gICAgICAgIC5zZWxlY3RBbGwoJy5wYWxldHRlJylcclxuICAgICAgICAuZGF0YShkMy5lbnRyaWVzKGNvbG9yYnJld2VyKSlcclxuICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgIC5hcHBlbmQoJ3NwYW4nKVxyXG4gICAgICAgIC5hdHRyKCdjbGFzcycsICdwYWxldHRlJylcclxuICAgICAgICAuYXR0cigndGl0bGUnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkLmtleTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5vbignY2xpY2snLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgIC8vIGhpZ2h0bGlnaHQgdGhlIHJpZ2h0IHBhbGV0dGVcclxuICAgICAgICAgICAgJCgnLnBhbGV0dGUnKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgJCgnLnBhbGV0dGVbdGl0bGU9XCInICsgZC5rZXkgKyAnXCJdJykuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgIGNvbG9yU2NhbGUuY29sb3IgPSBjb2xvcmJyZXdlcltkLmtleV07XHJcbiAgICAgICAgICAgIGNoYW5nZUxlZ2VuZCgpO1xyXG4gICAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpXHJcbiAgICAgICAgICAgICAgICAuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgICAgU1BWLmRlY0luZGV4VGltZSgpO1xyXG4gICAgICAgICAgICAgICAgU1BWLmRyYXcoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnNlbGVjdEFsbCgnLnN3YXRjaCcpXHJcbiAgICAgICAgLmRhdGEoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZC52YWx1ZTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgLmFwcGVuZCgnc3BhbicpXHJcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3N3YXRjaCcpXHJcbiAgICAgICAgLnN0eWxlKCdiYWNrZ3JvdW5kLWNvbG9yJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAvLyBoaWdobGlnaHQgdGhlIHNlbGVjdGVkIGNvbG9yIHNjaGVtZVxyXG4gICAgJCgnLnBhbGV0dGVbdGl0bGU9XCJCdVlsQnVcIl0nKS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcclxufVxyXG4iLCIvKmVzbGludC1kaXNhYmxlIG5vLXVudXNlZC1sZXRzKi9cclxuLypnbG9iYWwgd2luZG93LCAkLCAqL1xyXG4vLyBpbXBvcnQgKiBhcyBzcHYgZnJvbSAnLi9zcGF0aWFsX3ZpZXcuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGRhdGFzZXRNZXRhZGF0YVxyXG59IGZyb20gJy4vZXhwbG9yZS5qcyc7XHJcblxyXG5cclxuZXhwb3J0IGxldCBtZXRhZGF0YUNvbG9yID0ge307IC8vIHNhdmUgdGhlIG1ldGFkYXRhIGNvbG9yaW5nXHJcblxyXG4vKipcclxuICogSW5pdCBNZXRhZGF0YSBidXR0b25zIFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGluaXRpYWxpemVNZXRhZGRhdGEoKSB7XHJcbiAgICBsZXQgY29sb3JzID0gWycjZmZmJywgJyNlNDFhMWMnLCAnIzM3N2ViOCcsICcjNGRhZjRhJywgJyM5ODRlYTMnLCAnI2ZmN2YwMCcsICcjZmZmZjMzJywgJyNhNjU2MjgnXTtcclxuICAgIC8vIGFkZCB0aGUgZGF0YSB0byB0aGUgbWV0YWRhdGEgbW9kYWxcclxuICAgIGlmIChkYXRhc2V0TWV0YWRhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhc2V0TWV0YWRhdGEubGVuZ3RoOyBpKyspIHtcclxuXHJcbiAgICAgICAgICAgICQoJyNtZXRhZGF0YS10YWJsZScpLmZpbmQoJ3Rib2R5JylcclxuICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPHRyIGlkPVwibWV0YWRhdGEtcm93LScgKyBkYXRhc2V0TWV0YWRhdGFbaV1bJ2FuaW1hbF9pZCddICsgJ1wiPicpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8dGQ+JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChkYXRhc2V0TWV0YWRhdGFbaV1bJ2FuaW1hbF9pZCddKSlcclxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzx0ZD4nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGRhdGFzZXRNZXRhZGF0YVtpXVsnc3BlY2llcyddKSlcclxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzx0ZD4nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGRhdGFzZXRNZXRhZGF0YVtpXVsnc2V4J10pKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPHRkPicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoZGF0YXNldE1ldGFkYXRhW2ldWydzaXplJ10pKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPHRkPicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoZGF0YXNldE1ldGFkYXRhW2ldWyd3ZWlnaHQnXSkpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8dGQ+JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChgPGRpdiBjbGFzcz1cImRyb3Bkb3duXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBjbGFzcz1cImRyb3Bkb3duLXRvZ2dsZSBidG4gYnRuLWRlZmF1bHQgYnRuLWNvbG9yXCIgZGF0YS10b2dnbGU9XCJkcm9wZG93blwiIGhyZWY9XCIjXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPVwicHJldmlld1wiIGNsYXNzPVwibWV0YWRhdGEtc3dhdGNoXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiNmZmZcIj48L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImNvbG9yLWZpZWxkXCIgdmFsdWU9XCJXaGl0ZVwiIHN0eWxlPVwiZGlzcGxheTpub25lO1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzPVwiZHJvcGRvd24tbWVudVwiIHJvbGU9XCJtZW51XCIgYXJpYS1sYWJlbGxlZGJ5PVwiZExhYmVsXCI+IGAgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzdWx0U3RyaW5nID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2xvcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0U3RyaW5nICs9ICc8ZGl2IGNsYXNzPVwibWV0YWRhdGEtc3dhdGNoIG1ldGFkYXRhLXN3YXRjaC1jbGlja2FibGVcIiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6JyArIGNvbG9yc1tpXSArICdcIiB2YWx1ZT1cIicgKyBpZCArICdcIj48L2Rpdj4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0U3RyaW5nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfShkYXRhc2V0TWV0YWRhdGFbaV1bJ2FuaW1hbF9pZCddKSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC91bD48L2Rpdj4nKVxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAkKCcjbWV0YWRhdGEtdGFibGUnKS5maW5kKCd0Ym9keScpXHJcbiAgICAgICAgICAgIC5hcHBlbmQoJ1RoZXJlIGlzIG5vIG1ldGFkYXRhIGZvciB0aGlzIGRhdGFzZXQnKTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTaXplIGFuZCB3ZWlnaHQgY29sb3JpbmcgZm9yIHRoZSBtZXRhZGF0YVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbG9yTWV0YWRhdGEoKSB7XHJcbiAgICByZXNldEluZGl2aWR1YWxNZXRhZGF0YSgpO1xyXG4gICAgLy8gZ2V0IHRoZSBpbnB1dCB2YWx1ZXNcclxuICAgIGxldCB2YWx1ZSA9ICQoJyNncm91cC1tZXRhZGF0YSAuYnRuLmJ0bi1kZWZhdWx0LmFjdGl2ZSBpbnB1dCcpXHJcbiAgICAgICAgLmF0dHIoJ3ZhbHVlJyk7XHJcbiAgICBsZXQgYmxBdmcgPSAkKCcjYmwtYXZnJykudmFsKCk7XHJcbiAgICBsZXQgYWJBdmcgPSAkKCcjYWItYXZnJykudmFsKCk7XHJcbiAgICAvLyBjb2xvciBzY2hlbWUgZm9yIHRoZSBpbnB1dHNcclxuICAgIGxldCBjb2xvcnMgPSBbJyM3ZmM5N2YnLCAnI2ZkYzA4NicsICcjMzg2Y2IwJ107XHJcbiAgICAvLyBjb2xvciB0aGUgYW5pbWFsc1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhc2V0TWV0YWRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAoZGF0YXNldE1ldGFkYXRhW2ldW3ZhbHVlXSA8IGJsQXZnKSB7XHJcbiAgICAgICAgICAgIG1ldGFkYXRhQ29sb3JbZGF0YXNldE1ldGFkYXRhW2ldWydhbmltYWxfaWQnXV0gPSBjb2xvcnNbMF07XHJcbiAgICAgICAgfSBlbHNlIGlmIChkYXRhc2V0TWV0YWRhdGFbaV1bdmFsdWVdID4gYWJBdmcpIHtcclxuICAgICAgICAgICAgbWV0YWRhdGFDb2xvcltkYXRhc2V0TWV0YWRhdGFbaV1bJ2FuaW1hbF9pZCddXSA9IGNvbG9yc1syXTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBtZXRhZGF0YUNvbG9yW2RhdGFzZXRNZXRhZGF0YVtpXVsnYW5pbWFsX2lkJ11dID0gY29sb3JzWzFdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBNZXRhZGF0YSByZXNldCBhbGwgaW5kaXZpZHVhbCBtZXRhZGF0YSBpbnB1dCBmaWVsZHNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiByZXNldEluZGl2aWR1YWxNZXRhZGF0YSgpIHtcclxuICAgIG1ldGFkYXRhQ29sb3IgPSB7fTtcclxuICAgICQoJy5kcm9wZG93biAjcHJldmlldycpXHJcbiAgICAgICAgLmNzcygnYmFja2dyb3VuZC1jb2xvcicsICdyZ2IoMjU1LCAyNTUsIDI1NSknKTtcclxufVxyXG4iLCIvKmVzbGludC1kaXNhYmxlIG5vLXVudXNlZC1sZXRzKi9cclxuLypnbG9iYWwgd2luZG93LCBkMywgJCwgU2V0Ki9cclxuXHJcbmltcG9ydCAqIGFzIFNQViBmcm9tICcuL3NwYXRpYWxfdmlldy9zcGF0aWFsX3ZpZXcuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGRpc2FibGVQbGF5QnV0dG9uXHJcbn0gZnJvbSAnLi9oZWxwZXJzLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBicnVzaGVuZCxcclxuICAgIHNsaWRlclxyXG59IGZyb20gJy4vc3BhdGlhbF92aWV3L2ludGVyYWN0aW9uLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBjaGFuZ2VMZWdlbmQsXHJcbn0gZnJvbSAnLi9zcGF0aWFsX3ZpZXcvbGVnZW5kLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBtZXRhZGF0YUNvbG9yLFxyXG4gICAgcmVzZXRJbmRpdmlkdWFsTWV0YWRhdGEsXHJcbiAgICBjb2xvck1ldGFkYXRhXHJcbn0gZnJvbSAnLi9tZXRhZGF0YS5qcyc7XHJcblxyXG5cclxuaW1wb3J0IHtcclxuICAgIHNldE5ldHdvcmtBdXRvLFxyXG4gICAgc2V0TmV0d29yTGltaXQsXHJcbiAgICBzZXROZXR3b3JrSGllcmFyY2h5LFxyXG4gICAgc2V0bmV0d29ya0NvbG9yLFxyXG4gICAgc2V0TmV0d29ya0lELFxyXG4gICAgc2V0TmV0d29ya0JhY2tncm91bmQsXHJcbiAgICBzZXROZXR3b3JrQmFja2dyb3VuZExpbWl0XHJcbn0gZnJvbSAnLi9uZXR3b3JrLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBkYXRhc2V0LFxyXG4gICAgc3dhcm1EYXRhLFxyXG4gICAgZGF0YXNldE1ldGFkYXRhLFxyXG4gICAgc2V0TmV0d29ya0RhdGEsXHJcbiAgICBzZXRIaWVyYXJjaHlEYXRhXHJcbn0gZnJvbSAnLi9leHBsb3JlLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBnZXREYXRhc2V0RmVhdHVyZSxcclxuICAgIGdldE5ldHdvcmtEYXRhLFxyXG4gICAgZ2V0U3dhcm1EYXRhc2V0RmVhdHVyZSxcclxuICAgIGdldE5ldHdvcmtIaWVyYXJjaHlEYXRhXHJcbn0gZnJvbSAnLi9hamF4X3F1ZXJpZXMuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGNvbG9yU2NhbGVcclxufSBmcm9tICcuL3NwYXRpYWxfdmlldy9jb2xvcl9waWNrZXInO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGFkZEhpZXJhcmNoeUJ1dHRvbixcclxuICAgIHJlbW92ZUhpZXJhcmNoeUJ1dHRvbixcclxuICAgIG1heE51bWJlckhpZXJhcmNoaWVzLFxyXG4gICAgc2V0U2V0T3BlcmF0aW9uLFxyXG4gICAgLy9EcmF3ZXJcclxufSBmcm9tICcuL2hpZXJhcmNoeS5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgc2V0VHJhY2tpbmdCb29sZWFuLFxyXG4gICAgcmVzZXRUcmFja2VkRGF0YSxcclxuICAgIHNlbmRUcmFja2VkRGF0YVxyXG59IGZyb20gJy4vdmlzdWFsX3BhcmFtZXRlci5qcyc7XHJcblxyXG5sZXQgYnJ1c2g7IC8vIGJydXNoaW5nIHZhcmlhYmxlXHJcbmV4cG9ydCBsZXQgcGxheUJvb2xlYW4gPSB0cnVlOyAvLyBwYXVzZSBhbmQgcGxheSBib29sZWFuXHJcblxyXG5cclxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgR2V0dGVyIGFuZCBzZXR0ZXJcclxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4vKipcclxuICogU2V0IHBsYXkgYm9vbGVhblxyXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHZhbHVlIC0gcGF1c2UgKGZhbHNlKSBvciBwbGF5ICh0cnVlKVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldFBsYXlCb29sZWFuKHZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgICBwbGF5Qm9vbGVhbiA9IHZhbHVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBwbGF5Qm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgfVxyXG59XHJcbiIsIi8qZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLWxldHMqL1xyXG4vKmdsb2JhbCB3aW5kb3csJCwgZDMsKi9cclxuLy8gaW1wb3J0ICogYXMgc3B2IGZyb20gJy4vc3BhdGlhbF92aWV3LmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBkcmF3LFxyXG4gICAgVHJlbmRDaGFydFxyXG59IGZyb20gJy4vc3BhdGlhbF92aWV3L3NwYXRpYWxfdmlldy5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgc2V0UGxheUJvb2xlYW5cclxufSBmcm9tICcuL2xpc3RlbmVyLmpzJztcclxuXHJcblxyXG5pbXBvcnQge1xyXG4gICAgc3dhcm1EYXRhXHJcbn0gZnJvbSAnLi9leHBsb3JlLmpzJztcclxuLyoqXHJcbiAqIERpc2FibGUgdGhlIHBsYXkgYnV0dG9uIC0tPiBMb2FkaW5nIHN5bWJvbFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGRpc2FibGVQbGF5QnV0dG9uKCkge1xyXG4gICAgc2V0UGxheUJvb2xlYW4oZmFsc2UpO1xyXG4gICAgJCgnI3BsYXktYnV0dG9uJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgJCgnI3BsYXktYnV0dG9uJykucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICQoJyNwbGF5LWljb25zJykuaGlkZSgpO1xyXG4gICAgJCgnI3BsYXktbG9hZGluZycpLnNob3coKTtcclxuXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBFbmFibGUgdGhlIHBsYXkgYnV0dG9uIHJlbW92ZSBsb2FkaW5nIHN5bWJvbFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGVuYWJsZVBsYXlCdXR0b24oKSB7XHJcbiAgICBzZXRQbGF5Qm9vbGVhbih0cnVlKTtcclxuICAgICQoJyNwbGF5LWJ1dHRvbicpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICQoJyNwbGF5LWJ1dHRvbicpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xyXG4gICAgJCgnI3BsYXktbG9hZGluZycpLmhpZGUoKTtcclxuICAgICQoJyNwbGF5LWljb25zJykuc2hvdygpO1xyXG4gICAgLy9kcmF3KCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXR1cm4gIC4wNSBwZXJjZW50aWxlcyBvZiB0aGUgYXJyYXlcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBwZXJjZW50aWxlcyhhcnIpIHtcclxuICAgIGxldCBwID0gMC4wNTtcclxuICAgIGlmIChhcnIubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICB9XHJcbiAgICBhcnIuc29ydChmdW5jdGlvbihhLCBiKSB7XHJcbiAgICAgICAgcmV0dXJuIGEgLSBiO1xyXG4gICAgfSk7XHJcbiAgICBsZXQgaW5kZXggPSAoYXJyLmxlbmd0aCAtIDEpICogcDtcclxuICAgIGxldCBsb3dlciA9IE1hdGguZmxvb3IoaW5kZXgpO1xyXG4gICAgbGV0IHVwcGVyID0gbG93ZXIgKyAxO1xyXG4gICAgbGV0IHdlaWdodCA9IGluZGV4ICUgMTtcclxuICAgIGlmICh1cHBlciA+PSBhcnIubGVuZ3RoKSB7XHJcbiAgICAgICAgcmV0dXJuIDEgLSBhcnJbbG93ZXJdO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gMSAtIChhcnJbbG93ZXJdICogKDEgLSB3ZWlnaHQpICsgYXJyW3VwcGVyXSAqIHdlaWdodCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXR1cm4gdGhlIDA1LCAyNSwgNTAsIDc1LCA5NSBwZXJjZW50aWxlcyBvZiB0aGUgYXJyYXlcclxuICpcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBwZXJjZW50aWxlc0xpbmVDaGFydChhcnIpIHtcclxuICAgIGxldCBwID0gWzAuMDUsIDAuMjUsIDAuNSwgMC43NSwgMC45NV07XHJcbiAgICBsZXQgcmVzdWx0ID0gW107XHJcbiAgICBpZiAoYXJyLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG4gICAgYXJyLnNvcnQoZnVuY3Rpb24oYSwgYikge1xyXG4gICAgICAgIHJldHVybiBhIC0gYjtcclxuICAgIH0pO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IGluZGV4ID0gKGFyci5sZW5ndGggLSAxKSAqIHBbaV07XHJcbiAgICAgICAgbGV0IGxvd2VyID0gTWF0aC5mbG9vcihpbmRleCk7XHJcbiAgICAgICAgbGV0IHVwcGVyID0gbG93ZXIgKyAxO1xyXG4gICAgICAgIGxldCB3ZWlnaHQgPSBpbmRleCAlIDE7XHJcbiAgICAgICAgaWYgKHVwcGVyID49IGFyci5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmVzdWx0LnB1c2goYXJyW2xvd2VyXSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVzdWx0LnB1c2goYXJyW2xvd2VyXSAqICgxIC0gd2VpZ2h0KSArIGFyclt1cHBlcl0gKiB3ZWlnaHQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBMaW5lIGNoYXJ0IGRldGFpbHMgY2xpY2sgbGlzdGVuZXJcclxuICovXHJcbmZ1bmN0aW9uIGluaXRUcmVuZENoYXJ0TGlzdGVuZXIoKSB7XHJcbiAgICAkKCcuZHJhdy1kZXRhaWxzJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKCQodGhpcykuZmluZCgnaW5wdXQ6Y2hlY2tib3gnKS5wcm9wKCdjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgLy9kaXNhYmxlTGluZUNoYXJ0KCk7XHJcbiAgICAgICAgICAgIHZhciB0cmVuZGNoYXJ0ID0gbmV3IFRyZW5kQ2hhcnQodGhpcywgc3dhcm1EYXRhKTtcclxuICAgICAgICAgICAgdHJlbmRjaGFydC5kaXNhYmxlTGluZUNoYXJ0KCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVtb3ZlVHJlbmRDaGFydCgpO1xyXG4gICAgICAgICAgICBlbmFibGVMaW5lQ2hhcnQoKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIExpbmUgY2hhcnQgZGV0YWlscyBjbGljayBsaXN0ZW5lclxyXG4gKi9cclxuZnVuY3Rpb24gZGlzYWJsZUxpbmVDaGFydCgpIHtcclxuICAgICQoJy5saW5lQ2hhcnRCdXR0b24nKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcbiAgICAkKCcubGluZS1jaGFydC1jaGVjay1ib3gnKS5hdHRyKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgJCgnLmxpbmVDaGFydExpbmUnKS5hdHRyKCd2aXNpYmlsaXR5JywgJ2hpZGRlbicpO1xyXG59XHJcblxyXG4vKipcclxuICogTGluZSBjaGFydCBkZXRhaWxzIGNsaWNrIGxpc3RlbmVyXHJcbiAqL1xyXG5mdW5jdGlvbiBlbmFibGVMaW5lQ2hhcnQoKSB7XHJcbiAgICAkKCcubGluZUNoYXJ0QnV0dG9uJykucHJvcCgnY2hlY2tlZCcsIHRydWUpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xyXG4gICAgJCgnLmxpbmUtY2hhcnQtY2hlY2stYm94JykuYXR0cignZGlzYWJsZWQnLCBmYWxzZSk7XHJcbiAgICAkKCcubGluZUNoYXJ0TGluZScpLmF0dHIoJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpO1xyXG59XHJcblxyXG4vKipcclxuICogSGlkZSB0aGUgdHJlbmQgY2hhcnRcclxuICovXHJcbmZ1bmN0aW9uIHJlbW92ZVRyZW5kQ2hhcnQoKSB7XHJcbiAgICAkKCcudHJlbmRDaGFydERhdGEnKS5oaWRlKCk7XHJcbiAgICAkKCcjdHJlbmRDaGFydExlZ2VuZCcpLmhpZGUoKTtcclxuICAgICQoJyNsaW5lQ2hhcnRMZWdlbmQnKS5zaG93KCk7XHJcbn1cclxuXHJcblxyXG5cclxuLyoqXHJcbiAqIEFkZCB0aGUgYWJzb2x1dGUgZmVhdHVyZSBjaGVja2JveGVzIGluIHRoZSBmZWF0dXJlIHBhbmVsIGV4cG9ydCB0byBhamF4XHJcbiAqXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gYWRkQWJzb2x1dGVGZWF0dXJlQnV0dG9ucyhkYXRhU2V0UGVyY2VudGlsZSkge1xyXG4gICAgLy8gaXRlcmF0ZSBvdmVyIHRoZSBvYmplY3RcclxuICAgIGZvciAodmFyIGtleSBpbiBkYXRhU2V0UGVyY2VudGlsZSkge1xyXG4gICAgICAgIGlmIChkYXRhU2V0UGVyY2VudGlsZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgIC8vIGdlbmVyYXRlIHRleHQgZm9yIHRoZSBkaXNwbGF5ZWQgYnV0dG9uXHJcbiAgICAgICAgICAgIGxldCBjYXBpdGFsaXplZF9mZWF0dXJlX3N0cmluZyA9IGtleS5zcGxpdCgnXycpLmpvaW4oJyAnKTtcclxuICAgICAgICAgICAgY2FwaXRhbGl6ZWRfZmVhdHVyZV9zdHJpbmcgPSBjYXBpdGFsaXplZF9mZWF0dXJlX3N0cmluZy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGNhcGl0YWxpemVkX2ZlYXR1cmVfc3RyaW5nLnNsaWNlKDEpO1xyXG4gICAgICAgICAgICAvLyBhZGQgdGhlIGJ1dHRvblxyXG4gICAgICAgICAgICAkKCcjYWJzb2x1dGUtZmVhdHVyZS1jaGVja2JveGVzJykuYXBwZW5kKCc8dHI+PHRoPicgK1xyXG4gICAgICAgICAgICAgICAgJyA8ZGl2IGNsYXNzPVwicHJldHR5IHAtc3dpdGNoIHAtZmlsbCBwLWJpZ2dlclwiPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBpZD1cImRyYXctJyArIGtleSArXHJcbiAgICAgICAgICAgICAgICAnXCIvPjxkaXYgY2xhc3M9XCJzdGF0ZVwiPjxsYWJlbD4nICsgY2FwaXRhbGl6ZWRfZmVhdHVyZV9zdHJpbmcgKyAnPC9sYWJlbD48L2Rpdj48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgIC8vIHF1YW50aWxlIGdyYXBoXHJcbiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImZsb2F0LXJpZ2h0IGRyYXctZGV0YWlsc1wiIGlkPVwiZHJhdy0nICsga2V5ICsgJy1kZXRhaWxzXCI+PGRpdiBjbGFzcz1cInByZXR0eSBwLWljb24gcC10b2dnbGUgcC1wbGFpblwiPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBpZD1cImRyYXctJyArIGtleSArICctaW5wdXRcIiAvPicgK1xyXG4gICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJzdGF0ZSBwLXN1Y2Nlc3MtbyBwLW9uXCI+PGkgY2xhc3M9XCJtZGkgbWRpLWltYWdlLWFyZWFcIj48L2k+PGxhYmVsPjwvbGFiZWw+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cInN0YXRlIHAtb2ZmXCI+PGkgY2xhc3M9XCJtZGkgbWRpLWltYWdlLW9mZlwiPjwvaT48bGFiZWw+PC9sYWJlbD48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICc8L2Rpdj48L2Rpdj48L3RoPjwvdHI+Jyk7XHJcblxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIGhpZGUgdGhlIGVsZW1lbnRzXHJcbiAgICAkKCcuZHJhdy1kZXRhaWxzJykuaGlkZSgpO1xyXG4gICAgLy8gaW5pdCB0aGUgbGlzdGVybmVyc1xyXG4gIGluaXRUcmVuZENoYXJ0TGlzdGVuZXIoKTtcclxuXHJcbn1cclxuXHJcbi8vIGdlbmVyYXRlIGhhc2ggY29kZXMgZnJvbSBzdHJpbmdzXHJcbi8vIHNvdXJjZTogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNzYxNjQ2MS9nZW5lcmF0ZS1hLWhhc2gtZnJvbS1zdHJpbmctaW4tamF2YXNjcmlwdC1qcXVlcnlcclxuU3RyaW5nLnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGhhc2ggPSAwLFxyXG4gICAgICAgIGksIGNocjtcclxuICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIGhhc2g7XHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNociA9IHRoaXMuY2hhckNvZGVBdChpKTtcclxuICAgICAgICBoYXNoID0gKChoYXNoIDw8IDUpIC0gaGFzaCkgKyBjaHI7XHJcbiAgICAgICAgaGFzaCB8PSAwOyAvLyBDb252ZXJ0IHRvIDMyYml0IGludGVnZXJcclxuICAgIH1cclxuICAgIHJldHVybiBoYXNoO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIENhbGN1bGF0ZSB0aGUgc3RhbmRhcmREZXZpYXRpb24gb2YgYW4gYXJyYXkgb2YgbnVtYmVyc1xyXG4gKiBAcGFyYW0ge0FycmF5fSBhcnIgLSBhcnJheSBvZiBudW1iZXJzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc3RhbmRhcmREZXZpYXRpb24oYXJyKSB7XHJcbiAgICBpZiAoYXJyIGluc3RhbmNlb2YgQXJyYXkpIHtcclxuICAgICAgICBsZXQgbWVhbiA9IGFyci5yZWR1Y2UoZnVuY3Rpb24ocHYsIGN2KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwdiArIGN2O1xyXG4gICAgICAgIH0sIDApIC8gYXJyLmxlbmd0aDtcclxuICAgICAgICBsZXQgdG1wID0gYXJyLm1hcChmdW5jdGlvbihudW0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIE1hdGgucG93KG51bSAtIG1lYW4sIDIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQodG1wLnJlZHVjZShmdW5jdGlvbihwdiwgY3YpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHB2ICsgY3Y7XHJcbiAgICAgICAgfSwgMCkgLyB0bXAubGVuZ3RoKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIE1vdmUgZWxlbWVudCBpbiBTVkcgaW50byBiYWNrZ3JvdW5kIGRvbmUgYnkgbW92aW5nIGl0IHRvIGZpcnN0IGVsZW1lbnRcclxuICovXHJcbmQzLnNlbGVjdGlvbi5wcm90b3R5cGUubW92ZVRvQmFjayA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgZmlyc3RDaGlsZCA9IHRoaXMucGFyZW50Tm9kZS5maXJzdENoaWxkO1xyXG4gICAgICAgIGlmIChmaXJzdENoaWxkKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcywgZmlyc3RDaGlsZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn07XHJcblxyXG4vKipcclxuICogTWFrZSB0aGUgbWFpbiB2aXMgc3BhdGlhbCB2aWV3IHJlc2l6YWJsZVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VSZXNpemFibGUoaGVpZ2h0LCB3aWR0aCkge1xyXG4gICAgJChmdW5jdGlvbigpIHtcclxuICAgICAgICAkKCcjbWFpbi12aXMnKVxyXG4gICAgICAgICAgICAuZHJhZ2dhYmxlKHtcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5tZW50OiAncGFyZW50J1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAucmVzaXphYmxlKHtcclxuICAgICAgICAgICAgICAgIGFzcGVjdFJhdGlvOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgbWF4V2lkdGg6ICQoJyNtYWluLXZpcy1kaXYnKS53aWR0aCgpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5oZWlnaHQoaGVpZ2h0ICogMC42KVxyXG4gICAgICAgICAgICAud2lkdGgod2lkdGggKiAwLjYpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXNldCB0aGUgYnV0dG9ucyBhbmQgY2hlY2tib3hlc1xyXG4gKiBIaWRlIGljb25zIC0gbmVlZGVkIGJlY2F1c2Ugb2YgYm9vdHN0cmFwIGJ1Z1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRDb25maWcoKSB7XHJcbiAgICAkKCdpbnB1dFt0eXBlPWNoZWNrYm94XScpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAvL3NldCB0aGUgY29sb3Igc2NhbGUgZnVuY3Rpb24gdG8gbGluZWFyXHJcbiAgICAkKCcjY29sb3Itc2NhbGUtbGluZWFyJylcclxuICAgICAgICAucHJvcCgnY2hlY2tlZCcsIHRydWUpO1xyXG4gICAgJCgnI2dyb3VwLXNpemUtbScpXHJcbiAgICAgICAgLnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcclxuICAgICQoJyNiYWNrZ3JvdW5kLXdoaXRlJylcclxuICAgICAgICAucHJvcCgnY2hlY2tlZCcsIHRydWUpO1xyXG4gICAgJCgnI3NldHRpbmdzLWRpdiBpbnB1dFt0eXBlPWNoZWNrYm94XScpXHJcbiAgICAgICAgLnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcclxuICAgIC8vaGlkZSB0aGUgbG9hZGluZyBnaWZcclxuICAgICQoJyNsb2FkaW5nJylcclxuICAgICAgICAuaGlkZSgpO1xyXG4gICAgLy8gbmVlZGVkIGR1ZSB0byBqUXVlcnkgaW5jb21wYXRpYmlsaXR5XHJcbiAgICAkKCcjcGxheS1sb2FkaW5nJykuaGlkZSgpO1xyXG4gICAgJCgnLm1kaS1wbGF5JykuaGlkZSgpO1xyXG4gICAgJCgnI21ldGFkYXRhLWlucHV0JykuaGlkZSgpO1xyXG4gICAgJCgnI2RlbmRyb2dyYW0tYnV0dG9ucy1kaXYnKS5oaWRlKCk7XHJcbiAgICAkKCcjZy1jZW50cm9pZCcpLmhpZGUoKTtcclxuICAgIC8vY2hlY2sgbGluZSBjaGFydCBkcmF3IGFsbCBsaW5lc1xyXG4gICAgJCgnI2xpbmUtY2hhcnQtZmVhdHVyZS1jaGVja2JveGVzIGlucHV0W3R5cGU9Y2hlY2tib3hdJylcclxuICAgICAgICAucHJvcCgnY2hlY2tlZCcsIHRydWUpO1xyXG59XHJcbiIsIi8qZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLWxldHMqL1xyXG4vKmdsb2JhbCB3aW5kb3csICQsZDMsIHBhcmFtZXRlcnMsIGNvbG9yYnJld2VyLCBTZXQgKi9cclxuJ3VzZSBzdHJpY3QnO1xyXG5pbXBvcnQge1xyXG4gICAgZGF0YXNldCxcclxuICAgIG5ldHdvcmtEYXRhLFxyXG4gICAgc3dhcm1EYXRhLFxyXG4gICAgYW5pbWFsSWRzLFxyXG4gICAgZGF0YXNldE1ldGFkYXRhLFxyXG4gICAgc2V0TmV0d29ya0RhdGEsXHJcbiAgICAvL3NldEhpZXJhcmNoeURhdGEsXHJcbiAgICBkYXRhU2V0UGVyY2VudGlsZSxcclxuICAgIG5ldHdvcmtIaWVyYXJjaHlcclxufSBmcm9tICcuLi9leHBsb3JlLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBuZXR3b3JrQ29sb3JTY2FsZSxcclxuICAgIG5ldHdvcmtBdXRvLFxyXG4gICAgc2V0TmV0d29yTGltaXQsXHJcbiAgICBuZXR3b3JrTGltaXQsXHJcbiAgICBzaG93TmV0d29ya0hpZXJhcmNoeSxcclxuICAgIHNldG5ldHdvcmtDb2xvclxyXG4gICAgLy8gbmV0d29ya0lELFxyXG4gICAgLy8gbmV0d29ya0JhY2tncm91bmQsXHJcbiAgICAvLyBuZXR3b3JrQmFja2dyb3VuZExpbWl0XHJcbn0gZnJvbSAnLi4vbmV0d29yay5qcyc7XHJcblxyXG5cclxuXHJcbmltcG9ydCB7XHJcbiAgICBwZXJjZW50aWxlcyxcclxuICAgIG1ha2VSZXNpemFibGUsXHJcbiAgICBkZWZhdWx0Q29uZmlnLFxyXG4gICAgZGlzYWJsZVBsYXlCdXR0b24sXHJcbiAgICBlbmFibGVQbGF5QnV0dG9uLFxyXG4gICAgcGVyY2VudGlsZXNMaW5lQ2hhcnRcclxufSBmcm9tICcuLi9oZWxwZXJzLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBzZXRUaW1lU2xpZGVyLFxyXG4gICAgaW5pdFRvb2x0aXAsXHJcbiAgICB0b29sdGlwRnVuY3Rpb24sXHJcbiAgICBpbml0U2xpZGVycyxcclxuICAgIHRvb2x0aXAsXHJcbiAgICBzbGlkZXJcclxufSBmcm9tICcuL2ludGVyYWN0aW9uLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBtZXRhZGF0YUNvbG9yXHJcbn0gZnJvbSAnLi4vbWV0YWRhdGEuanMnO1xyXG5cclxuXHJcblxyXG5pbXBvcnQge1xyXG4gICAgaW5pdExpc3RlbmVycyxcclxuXHJcbn0gZnJvbSAnLi4vbGlzdGVuZXIuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGFkZFNwYXRpYWxWaWV3R3JvdXBcclxufSBmcm9tICcuL2xlZ2VuZC5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgLy91cGRhdGVEZW5kcm9ncmFtLFxyXG4gICAgLy9zZXRIaWVyYXJjaHlMZXZlbCxcclxuICAgIC8vZ2V0SGllcmFyY2h5TGV2ZWwsXHJcbiAgICAvL2RyYXdIaWVyYXJjaHksXHJcbiAgICBpbml0RGVuZHJvZ3JhbUxlZ2VuZCxcclxuICAgIGFkZEhpZXJhcmNoeUJ1dHRvbixcclxuICAgIHJlbW92ZUhpZXJhcmNoeUJ1dHRvbixcclxuICAgIC8vaGllcmFyY2h5Q29sb3JzLFxyXG4gICAgY29sb3JzLFxyXG4gICAgLy8gbmV0d29ya0hpZXJhcmNoeUlkcyxcclxuICAgIC8vIHNldGhpZXJhcmNoeUdyb3VwU3RkZXYsXHJcbiAgICByZXNldGhpZXJhcmNoeUdyb3VwU3RkZXYsXHJcbiAgICBoaWVyYXJjaHlHcm91cFN0ZGV2LFxyXG4gICAgbWF4TnVtYmVySGllcmFyY2hpZXMsXHJcbiAgICB0cmVlbWFwLFxyXG4gICAgc2V0T3BlcmF0aW9uLFxyXG4gICAgLy9jb2xsYXBzZSxcclxuICAgIGhpZXJhcmNoeUxldmVscyxcclxuICAgIGRpYWdvbmFsTGluZXMsXHJcbiAgICAvL2NsaWNrLFxyXG4gICAgLy9nZXRIaWVyYXJjaHlWZXJ0aWNlcyxcclxuICAgIERlbmRyb2dyYW1cclxufSBmcm9tICcuLi9oaWVyYXJjaHkuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIHRyYWNraW5nQm9vbGVhbixcclxuICAgIGFkZFRyYWNrZWREYXRhXHJcbn0gZnJvbSAnLi4vdmlzdWFsX3BhcmFtZXRlci5qcyc7XHJcblxyXG5cclxuaW1wb3J0IHtcclxuICAgIGdldERhdGFzZXRGZWF0dXJlLFxyXG4gICAgZ2V0TmV0d29ya0RhdGEsXHJcbiAgICBnZXRTd2FybURhdGFzZXRGZWF0dXJlLFxyXG4gICAgLy9nZXROZXR3b3JrSGllcmFyY2h5RGF0YVxyXG59IGZyb20gJy4uL2FqYXhfcXVlcmllcy5qcyc7XHJcblxyXG5cclxuIC8vIHN2ZyBjb250YWluZXIgZm9yIHRoZSBzcGF0aWFsIHZpZXdcclxuIC8vIHN2ZyBncm91cCBmb3IgdGhlIHNwYXRpYWwgdmlldyB0YW5rXHJcbi8vIGxldCBuZXR3b3JrQmFrRGF0YSA9IHt9O1xyXG5cclxuLy9leHBvcnQgbGV0IGluZGV4VGltZSA9IDA7IC8vIGFjdHVhbCB0aW1lIG1vbWVudCBpbiB0aGUgYW5pbWF0aW9uXHJcblxyXG4vLyBhcnJheSBvZiBhbmltYWxzIGZvciB0aGUgc3BlY2lmaWMgdGltZSBmcmFtZVxyXG5cclxuXHJcbi8vIERyYXdlciBTZXR1cFxyXG5cclxuXHJcblxyXG5sZXQgSlNPTkFQSV9NSU1FVFlQRSA9ICdhcHBsaWNhdGlvbi92bmQuYXBpK2pzb24nO1xyXG5sZXQgdHJlbmRDaGFydHNab29tID0ge307XHJcbi8vbGV0IHRoaXMudHJlbmRDaGFydHNFbGVtID0gWydsb3dlci1vdXRlci1hcmVhJywgJ2xvd2VyLWlubmVyLWFyZWEnLCAnbWVkaWFuLWxpbmUnLCAndXBwZXItaW5uZXItYXJlYScsICd1cHBlci1vdXRlci1hcmVhJ107XHJcbi8vbGV0IGxpbmVDaGFydFdpZHRoID0gNTAwMDtcclxuXHJcblxyXG4vLyBMaXN0ZW5lciBTZXR1cFxyXG4vLyBicnVzaGluZyB2YXJpYWJsZVxyXG5leHBvcnQgbGV0IHBsYXlCb29sZWFuID0gdHJ1ZTtcclxuXHJcblxyXG4vLyBMaW5lY2hhcnQgU2V0dXBcclxubGV0IHJhdGlvID0gMTtcclxubGV0IHpvb21Hcm91cDtcclxubGV0IHg7XHJcbmxldCB5O1xyXG5leHBvcnQgbGV0IHpvb21GdW5jdGlvbjtcclxuXHJcblxyXG5cclxuXHJcblxyXG4vKipcclxuKiBCYXNlIGNsYXNzIGRyYXdlclxyXG4qL1xyXG5cclxuLyoqXHJcbiAqIEluaXRpYWxpemUgdGhlIHNwYXRpYWwgdmlldyB3aXRoIGFsbCB0aGUgaW1wb3J0YW50IGZhY3RvcnNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBEcmF3ZXIge1xyXG4gICBjb25zdHJ1Y3Rvcigpe1xyXG4gICAgIHRoaXMuaW5kZXhUaW1lPTA7XHJcbiAgICAgLy8gVGFuayBCYXNlXHJcbiAgICAgdGhpcy5zdmdDb250YWluZXIgPSBkMy5zZWxlY3QoJyNtYWluLXZpcycpXHJcblxyXG5cclxuICAgICB0aGlzLnpvb20gPSBkMy56b29tKClcclxuICAgICAgICAgLnNjYWxlRXh0ZW50KFsxLCA2XSlcclxuICAgICAgICAgLm9uKCd6b29tJywgKCk9PntcclxuICAgICAgICAgICAgIC8vY29uc3RyYWluZWQgem9vbWluZ1xyXG4gICAgICAgICAgICAgLy8gbW9kaWZ5IHRoZSB0cmFuc2xhdGUgc28gdGhhdCBpdCBuZXZlciBleGl0cyB0aGUgdGFua1xyXG4gICAgICAgICAgICAgZDMuZXZlbnQudHJhbnNmb3JtLnggPSBNYXRoLm1pbigwLCB0aGlzLnRhbmtXaWR0aCAqIChkMy5ldmVudC50cmFuc2Zvcm0uayAtIDEpLFxyXG4gICAgICAgICAgICAgICAgIE1hdGgubWF4KHRoaXMudGFua1dpZHRoICogKDEgLSBkMy5ldmVudC50cmFuc2Zvcm0uayksIGQzLmV2ZW50LnRyYW5zZm9ybS54KSk7XHJcblxyXG4gICAgICAgICAgICAgZDMuZXZlbnQudHJhbnNmb3JtLnkgPSBNYXRoLm1pbigwLCB0aGlzLnRhbmtIZWlnaHQgKiAoZDMuZXZlbnQudHJhbnNmb3JtLmsgLSAxKSxcclxuICAgICAgICAgICAgICAgICBNYXRoLm1heCh0aGlzLnRhbmtIZWlnaHQgKiAoMSAtIGQzLmV2ZW50LnRyYW5zZm9ybS5rKSwgZDMuZXZlbnQudHJhbnNmb3JtLnkpKTtcclxuXHJcbiAgICAgICAgICAgICAvLyB0cmFuc2xhdGUgYW5kIHNjYWxlXHJcbiAgICAgICAgICAgICB0aGlzLnpvb21Hcm91cC5hdHRyKCd0cmFuc2Zvcm0nLCBkMy5ldmVudC50cmFuc2Zvcm0pO1xyXG5cclxuICAgICAgICAgICAgIC8vIHJlc2NhbGUgdGhlIGF4aXNcclxuICAgICAgICAgICAgIGdYYXhpcy5jYWxsKHhBeGlzLnNjYWxlKGQzLmV2ZW50LnRyYW5zZm9ybS5yZXNjYWxlWCh4KSkpO1xyXG4gICAgICAgICAgICAgZ1lheGlzLmNhbGwoeUF4aXMuc2NhbGUoZDMuZXZlbnQudHJhbnNmb3JtLnJlc2NhbGVZKHkpKSk7XHJcbiAgICAgICAgIH0pO1xyXG4gICAgIHRoaXMuem9vbUdyb3VwID0gdGhpcy5zdmdDb250YWluZXIuYXBwZW5kKCdzdmc6ZycpO1xyXG4gICAgIHRoaXMudGFuayA9IHRoaXMuem9vbUdyb3VwLmFwcGVuZCgnc3ZnOmcnKVxyXG4gICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAndGFuaycpXHJcbiAgICAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgbGV0IHggPSBwYXJhbWV0ZXJzLmludmVydGVkX3ggPyAtMSA6IDE7XHJcbiAgICAgICAgICAgICAgICAgICBsZXQgeSA9IHBhcmFtZXRlcnMuaW52ZXJ0ZWRfeSA/IC0xIDogMTtcclxuICAgICAgICAgICAgICAgICAgIHJldHVybiAnc2NhbGUoJyArIHggKyAnLCcgKyB5ICsgJyknO1xyXG4gICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAvLyBhY3R1YWwgdGltZSBtb21lbnQgaW4gdGhlIGFuaW1hdGlvblxyXG5cclxuICAgICB0aGlzLmFjdGl2ZVNjYWxlID0gJ2JsYWNrJzsgLy8gY2FuIGJlIHNwZWVkLCBhY2NlbGVyYXRpb24sIC4uIGFuZCBibGFjayAobWVhbmluZyBubyBhY3RpdmUgc2NhbGUpXHJcbiAgICAgdGhpcy5jb2xvclNjYWxlID0ge1xyXG4gICAgICAgICB0eXBlOiAnTGluZWFyJyxcclxuICAgICAgICAgY29sb3I6IGNvbG9yYnJld2VyLkJ1WWxCdVxyXG4gICAgIH07XHJcbiAgICAgdGhpcy5sZWdlbmRXaWR0aCA9IDU1MDtcclxuICAgICB0aGlzLmxlZ2VuZEhlaWdodCA9IDYwO1xyXG5cclxuICAgICB0aGlzLnN2Z0xlZ2VuZCA9IGQzLnNlbGVjdCgnI21haW4tdmlzLWxlZ2VuZC1kaXYnKVxyXG4gICAgICAgICAuYXBwZW5kKCdzdmcnKVxyXG4gICAgICAgICAuYXR0cignaWQnLCAnbWFpbi12aXMtbGVnZW5kJylcclxuICAgICAgICAgLmF0dHIoJ3dpZHRoJywgdGhpcy5sZWdlbmRXaWR0aClcclxuICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIHRoaXMubGVnZW5kSGVpZ2h0KTtcclxuXHJcbiAgICAgdGhpcy5tZWRvaWRBbmltYWwgPSAtMTsgLy8gd2hpY2ggYW5pbWFsIGlzIHRoZSBtZWRvaWQgKC0xIGlzIG5vIGFuaW1hbClcclxuICAgICB0aGlzLmFjdGl2ZUFuaW1hbHMgPSBbXTsgLy8gYWN0aXZlIHNlbGVjdGVkIGFuaW1hbHNcclxuICAgICB0aGlzLmFycmF5QW5pbWFscyA9IGRhdGFzZXQuZmlsdGVyKChkKT0+e1xyXG4gICAgICAgICByZXR1cm4gZFsndCddID09PSB0aGlzLmluZGV4VGltZTtcclxuICAgICB9KTsvLyBhcnJheSBvZiBhbmltYWxzIGZvciB0aGUgc3BlY2lmaWMgdGltZSBmcmFtZVxyXG4gICAgIHRoaXMuaWQgPSAkKCcuc2hvdy1kZW5kcm9ncmFtLmJ0bi1wcmltYXJ5JykuYXR0cignZGF0YScpO1xyXG4gICAgIHRoaXMucGxheUJvb2xlYW4gPSB0cnVlO1xyXG4gICAgIHRoaXMuaGllcmFyY2h5TGV2ZWxzID0ge307XHJcbiAgICAgdGhpcy5oaWVyYXJjaHlHcm91cFN0ZGV2ID0ge307XHJcbiAgICAgdGhpcy5icnVzaCA9IGQzLmJydXNoKClcclxuICAgICAgICAgLmV4dGVudChbXHJcbiAgICAgICAgICAgICBbMCwgMF0sXHJcbiAgICAgICAgICAgICBbdGhpcy50YW5rV2lkdGgsIHRoaXMudGFua0hlaWdodF1cclxuICAgICAgICAgXSk7XHJcbiAgICAgdGhpcy5zdmdMZWdlbmRfbmV0dyA9IGQzLnNlbGVjdCgnI2hpZXJhcmNoeS1sZWdlbmQtZGl2Jyk7XHJcbiAgICAgdGhpcy5kZW5kcm96b29tID0gdGhpcy56b29tR3JvdXA7XHJcbiAgICAgdGhpcy5uZXR3b3JrQ29sb3IgPSB7fTtcclxuICAgICB0aGlzLmhpZXJhcmNoeUNvbG9ycyA9IHt9O1xyXG4gICAgIHRoaXMubmV0d29ya0hpZXJhcmNoeSA9IG5ldHdvcmtIaWVyYXJjaHk7XHJcbiAgICAgdGhpcy5zcGF0aWFsVmlldyA9IGQzLnNlbGVjdCgnLnRhbmsnKTtcclxuXHJcblxyXG5cclxuXHJcbiAgIH1cclxuICAgc2V0SW5kZXhUaW1lKHZhbHVlKSB7XHJcbiAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyAmJiAodGhpcy5pbmRleFRpbWUgPD0gc3dhcm1EYXRhLmxlbmd0aCkpIHtcclxuICAgICAgICAgICB0aGlzLmluZGV4VGltZSA9IHZhbHVlO1xyXG4gICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICB0aGlzLmluZGV4VGltZSA9IDA7XHJcbiAgICAgICB9XHJcbiAgIH1cclxuICAgc2V0QWN0aXZlU2NhbGUodmFsdWUpIHtcclxuICAgICAgIHRoaXMuYWN0aXZlU2NhbGUgPSB2YWx1ZTtcclxuICB9XHJcbiAgIHNldEFjdGl2ZUFuaW1hbHModmFsdWUpIHtcclxuICAgICAgdGhpcy5hY3RpdmVBbmltYWxzID0gdmFsdWU7XHJcbiAgfVxyXG4gICBkZWNJbmRleFRpbWUoKSB7XHJcbiAgICAgICB0aGlzLmluZGV4VGltZSA9IHRoaXMuaW5kZXhUaW1lIC0gMTtcclxuICAgfVxyXG4gICB1cGRhdGVMaW5lQ2hhcnQoKSB7XHJcbiAgICAgICBpZiAoZDMuc2VsZWN0KCcjbGluZUNoYXJ0VGltZUxpbmUnKSAmJiBzd2FybURhdGFbTWF0aC5jZWlsKHRoaXMuaW5kZXhUaW1lIC8gcmF0aW8pXSkge1xyXG4gICAgICAgICAgIGxldCB0bXAgPSBNYXRoLmNlaWwodGhpcy5pbmRleFRpbWUgLyByYXRpbyk7XHJcbiAgICAgICAgICAgLy91cGRhdGUgdGhlIGxpbmUgY2hhcnQgbGVnZW5kIHRleHQgdmFsdWVzIHBlciBzZWNvbmRcclxuICAgICAgICAgICBpZiAodGhpcy5pbmRleFRpbWUgJSAyNSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAvLyBUT0RPIGNoYW5nZSB0aGlzIHRvIGEgbW9yZSBtb2R1bGFyIHdheVxyXG4gICAgICAgICAgICAgICBkMy5zZWxlY3QoJyNjb252ZXhfaHVsbF9hcmVhTGluZVZhbHVlJylcclxuICAgICAgICAgICAgICAgICAgIC50ZXh0KChzd2FybURhdGFbdG1wXVsnY29udmV4X2h1bGxfYXJlYSddKSArICdtbcKyJyk7XHJcbiAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnI3NwZWVkTGluZVZhbHVlJylcclxuICAgICAgICAgICAgICAgICAgIC50ZXh0KHN3YXJtRGF0YVt0bXBdWydzcGVlZCddICsgJ21tL3MnKTtcclxuICAgICAgICAgICAgICAgZDMuc2VsZWN0KCcjYWNjZWxlcmF0aW9uTGluZVZhbHVlJylcclxuICAgICAgICAgICAgICAgICAgIC50ZXh0KHN3YXJtRGF0YVt0bXBdWydhY2NlbGVyYXRpb24nXSArICdtbS9zwrInKTtcclxuICAgICAgICAgICAgICAgZDMuc2VsZWN0KCcjZGlzdGFuY2VfY2VudHJvaWRMaW5lVmFsdWUnKVxyXG4gICAgICAgICAgICAgICAgICAgLnRleHQoc3dhcm1EYXRhW3RtcF1bJ2Rpc3RhbmNlX2NlbnRyb2lkJ10gKyAnbW0nKTtcclxuICAgICAgICAgICAgICAgZDMuc2VsZWN0KCcjZGlyZWN0aW9uTGluZVZhbHVlJylcclxuICAgICAgICAgICAgICAgICAgIC50ZXh0KHN3YXJtRGF0YVt0bXBdWydkaXJlY3Rpb24nXSArICfCsCcpO1xyXG4gICAgICAgICAgICAgICBkMy5zZWxlY3QoJyNwb2xhcmlzYXRpb25MaW5lVmFsdWUnKVxyXG4gICAgICAgICAgICAgICAgICAgLnRleHQoc3dhcm1EYXRhW3RtcF1bJ3BvbGFyaXNhdGlvbiddKTtcclxuICAgICAgICAgICB9XHJcbiAgICAgICAgICAgZDMuc2VsZWN0KCcjbGluZUNoYXJ0VGltZUxpbmUnKVxyXG4gICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgem9vbUZ1bmN0aW9uKHRtcCkgKyAnLDApJyk7XHJcbiAgICAgICB9XHJcbiAgIH1cclxuICAgcmV0dXJuQ29sb3JTY2FsZSgpIHtcclxuICAgICAgIC8vaWYgbGluZWFyIGlzIGNob29zZW5cclxuICAgICAgIGlmICh0aGlzLmNvbG9yU2NhbGVbJ3R5cGUnXSA9PT0gJ0xpbmVhcicpIHtcclxuICAgICAgICAgICByZXR1cm4gZDMuc2NhbGVMaW5lYXIoKVxyXG4gICAgICAgICAgICAgICAuZG9tYWluKFxyXG4gICAgICAgICAgICAgICAgICAgZGF0YVNldFBlcmNlbnRpbGVbdGhpcy5hY3RpdmVTY2FsZV1cclxuICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAucmFuZ2UodGhpcy5jb2xvclNjYWxlWydjb2xvciddKTtcclxuICAgICAgIH0gLy9UaHJlc2hvbGQgY29sb3Igc2NhbGVcclxuICAgICAgIGVsc2UgaWYgKHRoaXMuY29sb3JTY2FsZVsndHlwZSddID09PSAnVGhyZXNob2xkJykge1xyXG4gICAgICAgICAgIHJldHVybiBkMy5zY2FsZVRocmVzaG9sZCgpXHJcbiAgICAgICAgICAgICAgIC5kb21haW4oXHJcbiAgICAgICAgICAgICAgICAgICBkYXRhU2V0UGVyY2VudGlsZVt0aGlzLmFjdGl2ZVNjYWxlXVxyXG4gICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgIC5yYW5nZSh0aGlzLmNvbG9yU2NhbGVbJ2NvbG9yJ10pO1xyXG4gICAgICAgfVxyXG4gICB9XHJcbiAgIGluaXRDb2xvclBpY2tlcigpIHtcclxuICAgICAgIGQzLnNlbGVjdCgnLmNvbG9ycy1ib2R5JylcclxuICAgICAgICAgICAuc2VsZWN0QWxsKCcucGFsZXR0ZScpXHJcbiAgICAgICAgICAgLmRhdGEoZDMuZW50cmllcyhjb2xvcmJyZXdlcikpXHJcbiAgICAgICAgICAgLmVudGVyKClcclxuICAgICAgICAgICAuYXBwZW5kKCdzcGFuJylcclxuICAgICAgICAgICAuYXR0cignY2xhc3MnLCAncGFsZXR0ZScpXHJcbiAgICAgICAgICAgLmF0dHIoJ3RpdGxlJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgIHJldHVybiBkLmtleTtcclxuICAgICAgICAgICB9KVxyXG4gICAgICAgICAgIC5vbignY2xpY2snLCAoZCk9PntcclxuICAgICAgICAgICAgICAgLy8gaGlnaHRsaWdodCB0aGUgcmlnaHQgcGFsZXR0ZVxyXG4gICAgICAgICAgICAgICAkKCcucGFsZXR0ZScpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAkKCcucGFsZXR0ZVt0aXRsZT1cIicgKyBkLmtleSArICdcIl0nKS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgdGhpcy5jb2xvclNjYWxlLmNvbG9yID0gY29sb3JicmV3ZXJbZC5rZXldO1xyXG4gICAgICAgICAgICAgICB0aGlzLmNoYW5nZWxlZ2VuZCgpO1xyXG4gICAgICAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpXHJcbiAgICAgICAgICAgICAgICAgICAuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgICAgICAgdGhpcy5kZWNJbmRleFRpbWUoKTtcclxuICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgfSlcclxuICAgICAgICAgICAuc2VsZWN0QWxsKCcuc3dhdGNoJylcclxuICAgICAgICAgICAuZGF0YSgoZCk9PntcclxuICAgICAgICAgICAgICAgcmV0dXJuIGQudmFsdWU7XHJcbiAgICAgICAgICAgfSlcclxuICAgICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgIC5hcHBlbmQoJ3NwYW4nKVxyXG4gICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdzd2F0Y2gnKVxyXG4gICAgICAgICAgIC5zdHlsZSgnYmFja2dyb3VuZC1jb2xvcicsIChkKT0+e1xyXG4gICAgICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAvLyBoaWdobGlnaHQgdGhlIHNlbGVjdGVkIGNvbG9yIHNjaGVtZVxyXG4gICAgICAgJCgnLnBhbGV0dGVbdGl0bGU9XCJCdVlsQnVcIl0nKS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcclxuICAgfVxyXG4gICBjaGFuZ2VsZWdlbmQoKSB7XHJcbiAgICAgICBsZXQgbGVnZW5kOyAvLyB0aGUgY29sb3IgbGVnZW5kXHJcbiAgICAgICBsZXQgbGVnZW5kVGV4dDsgLy8gY29sb3IgbGVnZW5kIHRleHRcclxuICAgICAgIC8vIHZhcnMgZm9yIHRoZSBsZWdlbmRcclxuICAgICAgIGxldCBsZWdlbmRTd2F0Y2hXaWR0aCA9IDUwO1xyXG4gICAgICAgbGV0IGxlZ2VuZFN3YXRjaEhlaWdodCA9IDIwO1xyXG4gICAgICAgLy8gbGV0IGRpZmZlcmVudENvbG9ycyA9IDA7XHJcblxyXG5cclxuICAgICAgIC8vIFNob3cgdGhlIHN2ZyBmaXJzdCBvZiBhbGxcclxuICAgICAgICQoJyNtYWluLXZpcy1sZWdlbmQtZGl2JylcclxuICAgICAgICAgICAuc2hvdygpO1xyXG5cclxuICAgICAgIC8vY2hhbmdlIHRoZSBjb2xvcnMgb2YgdGhlIGFuaW1hbHNcclxuICAgICAgIGlmICh0aGlzLmFjdGl2ZVNjYWxlICE9PSAnYmxhY2snKSB7XHJcbiAgICAgICAgICAgdmFyIHRtcFNjYWxlID0gdGhpcy5yZXR1cm5Db2xvclNjYWxlKCk7XHJcbiAgICAgICAgICAgLy8gb25jZSB0aGUgZmlsbCBmb3IgdGhlIGhlYWRzIGFuZCB0aGUgc3Ryb2tlIGZvciB0aGUgcGF0aFxyXG4gICAgICAgICAgIGxlZ2VuZCA9IHRoaXMuc3ZnTGVnZW5kLnNlbGVjdEFsbCgncmVjdC5sZWdlbmQnKVxyXG4gICAgICAgICAgICAgICAuZGF0YSh0bXBTY2FsZS5yYW5nZSgpKTtcclxuXHJcbiAgICAgICAgICAgbGVnZW5kVGV4dCA9IHRoaXMuc3ZnTGVnZW5kLnNlbGVjdEFsbCgndGV4dC5sZWdlbmQtdGV4dCcpXHJcbiAgICAgICAgICAgICAgIC5kYXRhKHRtcFNjYWxlLmRvbWFpbigpKTtcclxuICAgICAgICAgICAvLyBkaWZmZXJlbnRDb2xvcnMgPSB0bXBTY2FsZS5yYW5nZSgpXHJcbiAgICAgICAgICAgLy8gLmxlbmd0aDtcclxuICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgbGVnZW5kID0gdGhpcy5zdmdMZWdlbmQuc2VsZWN0QWxsKCdyZWN0LmxlZ2VuZCcpXHJcbiAgICAgICAgICAgICAgIC5kYXRhKFtdKTtcclxuICAgICAgICAgICBsZWdlbmRUZXh0ID0gdGhpcy5zdmdMZWdlbmQuc2VsZWN0QWxsKCd0ZXh0LmxlZ2VuZC10ZXh0JylcclxuICAgICAgICAgICAgICAgLmRhdGEoW10pO1xyXG4gICAgICAgICAgIC8vIGhpZGUgdGhlIGRpdiBhZ2FpblxyXG4gICAgICAgICAgICQoJyNtYWluLXZpcy1sZWdlbmQtZGl2JylcclxuICAgICAgICAgICAgICAgLmhpZGUoKTtcclxuICAgICAgIH1cclxuXHJcbiAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0gTGVnZW5kIHN3YXRjaGVzICAtLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAvLyBVUERBVEUgLSBsZWdlbmRcclxuICAgICAgIGxlZ2VuZC5zdHlsZSgnZmlsbCcsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgIH0pO1xyXG4gICAgICAgLy8gRU5URVIgLSBsZWdlbmRcclxuICAgICAgIGxlZ2VuZFxyXG4gICAgICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgICAgLmFwcGVuZCgncmVjdCcpXHJcbiAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xlZ2VuZCcpXHJcbiAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgbGVnZW5kU3dhdGNoV2lkdGgpXHJcbiAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGxlZ2VuZFN3YXRjaEhlaWdodClcclxuICAgICAgICAgICAuYXR0cigneScsIDApXHJcbiAgICAgICAgICAgLmF0dHIoJ3gnLCBmdW5jdGlvbihkLCBpKSB7XHJcbiAgICAgICAgICAgICAgIHJldHVybiAobGVnZW5kU3dhdGNoV2lkdGggKyBpICogbGVnZW5kU3dhdGNoV2lkdGgpICsgJ3B4JztcclxuICAgICAgICAgICB9KVxyXG4gICAgICAgICAgIC5zdHlsZSgnZmlsbCcsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICAgICAgICAgfSk7XHJcbiAgICAgICAvLyBFWElUIC0gbGVnZW5kXHJcbiAgICAgICBsZWdlbmQuZXhpdCgpXHJcbiAgICAgICAgICAgLnJlbW92ZSgpO1xyXG5cclxuICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLSBUZXh0ICAtLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAvLyBVUERBVEUgLSBsZWdlbmQgdGV4dFxyXG4gICAgICAgbGVnZW5kVGV4dC50ZXh0KGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICByZXR1cm4gTWF0aC5jZWlsKGQgKiAyKSAvIDI7XHJcbiAgICAgICB9KTtcclxuICAgICAgIC8vIEVOVEVSIC0gbGVnZW5kIHRleHRcclxuICAgICAgIGxlZ2VuZFRleHRcclxuICAgICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgIC5hcHBlbmQoJ3RleHQnKVxyXG4gICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsZWdlbmQtdGV4dCcpXHJcbiAgICAgICAgICAgLmF0dHIoJ3knLCAyICogbGVnZW5kU3dhdGNoSGVpZ2h0KVxyXG4gICAgICAgICAgIC5hdHRyKCd4JywgZnVuY3Rpb24oZCwgaSkge1xyXG4gICAgICAgICAgICAgICAvLyBwbHVzIDUgaGFzIHRvIGJlIGNoYW5nZWRcclxuICAgICAgICAgICAgICAgcmV0dXJuIChsZWdlbmRTd2F0Y2hXaWR0aCArIGkgKiBsZWdlbmRTd2F0Y2hXaWR0aCArIDUpICsgJ3B4JztcclxuICAgICAgICAgICB9KVxyXG4gICAgICAgICAgIC50ZXh0KGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguY2VpbChkICogMikgLyAyO1xyXG4gICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgIC8vIEVYSVQgLSBsZWdlbmQgdGV4dFxyXG4gICAgICAgbGVnZW5kVGV4dC5leGl0KClcclxuICAgICAgICAgICAucmVtb3ZlKCk7XHJcbiAgIH1cclxuXHJcbiAgIGRyYXcoKSB7XHJcblxyXG4gICAgICAgLy91cGRhdGUgdGltZSB0byB3YWl0IGFrYSBzcGVlZCBvZiByZXBsYXlcclxuICAgICAgIGxldCB0aW1lVG9XYWl0ID0gJCgnaW5wdXRbdHlwZT1cInJhZGlvXCJdLmdyb3VwLXBsYXliYWNrLXJhdGU6Y2hlY2tlZCcpXHJcbiAgICAgICAgICAgLnZhbCgpO1xyXG4gICAgICAgLy9zY2FsZSB0aGUgc2l6ZSBieSB0aGlzIG51bWJlclxyXG4gICAgICAgbGV0IGFuaW1hbFNjYWxlID0gJCgnaW5wdXRbdHlwZT1cInJhZGlvXCJdLmdyb3VwLXNpemU6Y2hlY2tlZCcpXHJcbiAgICAgICAgICAgLnZhbCgpO1xyXG5cclxuICAgICAgIC8vZ2V0IHRoZSBuZXh0IGFuaW1hbHNcclxuICAgICAgIHRoaXMuYXJyYXlBbmltYWxzID0gZGF0YXNldC5maWx0ZXIoKGQpPT57XHJcbiAgICAgICAgICAgcmV0dXJuIGRbJ3QnXSA9PT0gdGhpcy5pbmRleFRpbWU7XHJcbiAgICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAvL3RoZSB0aW1lb3V0IGlzIHNldCBhZnRlciBvbmUgdXBkYXRlIDMwIG1zXHJcbiAgICAgICBzZXRUaW1lb3V0KCgpPT57XHJcbiAgICAgICAgICAgICAgIC8vIGRyYXcgaGllcmFyY2h5XHJcbiAgICAgICAgICAgICAgIHRoaXMuZHJhd0RlbmRyb2dyYW0oKTtcclxuICAgICAgICAgICAgICAgLy9jaGFuZ2UgdGhlIHRpbWUgZnJhbWUgdGV4dFxyXG4gICAgICAgICAgICAgICB0aGlzLnN2Z0NvbnRhaW5lci5zZWxlY3QoJy5mcmFtZS10ZXh0JylcclxuICAgICAgICAgICAgICAgICAgIC50ZXh0KE1hdGguZmxvb3IodGhpcy5pbmRleFRpbWUgLyAxNTAwKSAlIDYwICsgJzonICsgTWF0aC5mbG9vcih0aGlzLmluZGV4VGltZSAvIHBhcmFtZXRlcnNbJ2ZwcyddKSAlIDYwICsgJzo6JyArIHRoaXMuaW5kZXhUaW1lICUgcGFyYW1ldGVyc1snZnBzJ10pO1xyXG4gICAgICAgICAgICAgICAvLyBpZiBhIHNlY29uZCBoYXMgY2hhbmdlZCBtb3ZlIHRoZSBzbGlkZXJcclxuICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5kZXhUaW1lICUgcGFyYW1ldGVyc1snZnBzJ10gPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgIHNldFRpbWVTbGlkZXIodGhpcy5pbmRleFRpbWUpO1xyXG4gICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICBsZXQgc3ZnQW5pbWFscyA9IHRoaXMudGFuay5zZWxlY3RBbGwoJ2cuYW5pbWFsJylcclxuICAgICAgICAgICAgICAgICAgIC5kYXRhKHRoaXMuYXJyYXlBbmltYWxzKTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIE5ldHdvcmsgdmlzXHJcbiAgICAgICAgICAgICAgIGxldCBuZXR3b3JrVmlzO1xyXG4gICAgICAgICAgICAgICAvLyBsZXQgbmV0d29ya1Zpc0JhaztcclxuICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5kZXhUaW1lIGluIG5ldHdvcmtEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICBsZXQgbmV0d29yayA9IG5ldHdvcmtEYXRhW3RoaXMuaW5kZXhUaW1lXTtcclxuICAgICAgICAgICAgICAgICAgIC8vIHJlc2V0IHRoZSBncm91cCBzdGFuZGFyZCBkZXZpYXRpb24gZm9yIHRoZSBoaWVyYXJoY3lcclxuICAgICAgICAgICAgICAgICAgIC8vIG5lZWRlZCBmb3IgY29sb3Jpbmcgb2YgdGhlIGRlbmRyb2dyYW0gbm9kZXMgKHZhcmlhY25lKVxyXG4gICAgICAgICAgICAgICAgICAgcmVzZXRoaWVyYXJjaHlHcm91cFN0ZGV2KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgLy8gZGlzcGxheSB0aGUgd2hvbGUgbmV0d29ya1xyXG4gICAgICAgICAgICAgICAgICAgbmV0d29yayA9IG5ldHdvcmsubWFwKChpdGVtKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGxldCBhbmltYWwxID0gdGhpcy5hcnJheUFuaW1hbHMuZmlsdGVyKGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqWydhJ10gPT09IGl0ZW1bJ3MnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICBsZXQgYW5pbWFsMiA9IHRoaXMuYXJyYXlBbmltYWxzLmZpbHRlcihmdW5jdGlvbihvYmopIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9ialsnYSddID09PSBpdGVtWydlJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgJ25vZGUxJzogYW5pbWFsMVsnYSddLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAnbm9kZTInOiBhbmltYWwyWydhJ10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICdzdGFydCc6IGFuaW1hbDFbJ3AnXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2VuZCc6IGFuaW1hbDJbJ3AnXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3ZhbCc6IGl0ZW1bJ3YnXVxyXG4gICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICBuZXR3b3JrLmZvckVhY2goZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICQoKCcjbWMtJyArIGRbJ25vZGUxJ10gKyAnLScgKyBkWydub2RlMiddKSkuY3NzKCdmaWxsJywgbmV0d29ya0NvbG9yU2NhbGUoZFsndmFsJ10pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAkKCgnI21jLScgKyBkWydub2RlMiddICsgJy0nICsgZFsnbm9kZTEnXSkpLmNzcygnZmlsbCcsIG5ldHdvcmtDb2xvclNjYWxlKGRbJ3ZhbCddKSk7XHJcbiAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICBpZiAobmV0d29ya0F1dG8pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICBsZXQgdG1wQXJyYXkgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5ldHdvcmsubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wQXJyYXkucHVzaChuZXR3b3JrW2ldWyd2YWwnXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgIHNldE5ldHdvckxpbWl0KHBlcmNlbnRpbGVzKHRtcEFycmF5KSk7XHJcbiAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICBuZXR3b3JrID0gbmV0d29yay5maWx0ZXIoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkWyd2YWwnXSA8PSAoMSAtIG5ldHdvcmtMaW1pdCk7XHJcbiAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgIC8vIERBVEEgSk9JTlxyXG4gICAgICAgICAgICAgICAgICAgbmV0d29ya1ZpcyA9IHRoaXMudGFuay5zZWxlY3QoJyNuZXR3b3JrLWdyb3VwJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuc2VsZWN0QWxsKCdsaW5lLm5ldHdvcmstZWRnZXMnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5kYXRhKG5ldHdvcmspO1xyXG4gICAgICAgICAgICAgICAgICAgLy8gVVBEQVRFXHJcbiAgICAgICAgICAgICAgICAgICBuZXR3b3JrVmlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gxJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZFsnc3RhcnQnXVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd5MScsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC1kWydzdGFydCddWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gyJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZFsnZW5kJ11bMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneTInLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtZFsnZW5kJ11bMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV0d29ya0NvbG9yU2NhbGUoKDEgLSBkWyd2YWwnXSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZS1vcGFjaXR5JywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMSAtIGRbJ3ZhbCddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgLy9FTlRFUlxyXG5cclxuICAgICAgICAgICAgICAgICAgIG5ldHdvcmtWaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJ2xpbmUnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICduZXR3b3JrLWVkZ2VzJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneDEnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkWydzdGFydCddWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3kxJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLWRbJ3N0YXJ0J11bMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneDInLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkWydlbmQnXVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd5MicsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC1kWydlbmQnXVsxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2UnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXR3b3JrQ29sb3JTY2FsZShkWyd2YWwnXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlLW9wYWNpdHknLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkWyd2YWwnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICBuZXR3b3JrVmlzID0gdGhpcy50YW5rLnNlbGVjdEFsbCgnbGluZS5uZXR3b3JrLWVkZ2VzJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuZGF0YShbXSk7XHJcblxyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIC8vIEVYSVQgLSBuZXR3b3JrXHJcbiAgICAgICAgICAgICAgIG5ldHdvcmtWaXMuZXhpdCgpXHJcbiAgICAgICAgICAgICAgICAgICAucmVtb3ZlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyBkZWxhdW5heSB0cmlhbmd1bGF0aW9uXHJcbiAgICAgICAgICAgICAgIC8vIERBVEEgSk9JTiAgLSB0cmlhbmd1bGF0aW9uXHJcbiAgICAgICAgICAgICAgIHZhciB0cmlhbmd1bGF0aW9uO1xyXG4gICAgICAgICAgICAgICBpZiAoJCgnI2RyYXctdHJpYW5ndWxhdGlvbicpXHJcbiAgICAgICAgICAgICAgICAgICAuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coW3N3YXJtRGF0YVt0aGlzLmluZGV4VGltZV1bJ3RyaWFuZ3VsYXRpb24nXV0pO1xyXG4gICAgICAgICAgICAgICAgICAgdHJpYW5ndWxhdGlvbiA9IHRoaXMudGFuay5zZWxlY3QoJyNkZWxhdW5heS10cmlhbmd1bGF0aW9uLWdyb3VwJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuc2VsZWN0QWxsKCdwYXRoLmRlbGF1bmF5LXRyaWFuZ3VsYXRpb24nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5kYXRhKFtzd2FybURhdGFbdGhpcy5pbmRleFRpbWVdWyd0cmlhbmd1bGF0aW9uJ11dKTtcclxuICAgICAgICAgICAgICAgICAgIC8vIFVQREFURSAtIHRyaWFuZ3VsYXRpb25cclxuICAgICAgICAgICAgICAgICAgIHRyaWFuZ3VsYXRpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignZCcsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgIC8vRU5URVIgLSB0cmlhbmd1bGF0aW9uXHJcbiAgICAgICAgICAgICAgICAgICB0cmlhbmd1bGF0aW9uLmVudGVyKClcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCdwYXRoJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnZGVsYXVuYXktdHJpYW5ndWxhdGlvbicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2QnLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICB0cmlhbmd1bGF0aW9uID0gdGhpcy50YW5rLnNlbGVjdEFsbCgncGF0aC5kZWxhdW5heS10cmlhbmd1bGF0aW9uJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuZGF0YShbXSk7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgLy8gRVhJVCAtIHRyaWFuZ3VsYXRpb25cclxuICAgICAgICAgICAgICAgdHJpYW5ndWxhdGlvbi5leGl0KClcclxuICAgICAgICAgICAgICAgICAgIC5yZW1vdmUoKTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIFZvcm9ub2lcclxuICAgICAgICAgICAgICAgLy8gREFUQSBKT0lOICAtIHZvcm9ub2lcclxuICAgICAgICAgICAgICAgdmFyIHZvcm9ub2k7XHJcbiAgICAgICAgICAgICAgIGlmICgkKCcjZHJhdy12b3Jvbm9pJylcclxuICAgICAgICAgICAgICAgICAgIC5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLmluZGV4VGltZSk7XHJcbiAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdobycpO1xyXG4gICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhbc3dhcm1EYXRhW3RoaXMuaW5kZXhUaW1lXVsndm9yb25vaSddXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy9hcHBlbmQgdGhlIGdyb3VwIGZvciB0aGUgdm9yb25vaSBwYXRoc1xyXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBhIHdvcmthcm91bmQgdG8gYXZvaWQgdm9yb25vaSBzdG9wcGluZyBhdCBzcGxpdCBpZiBlbXB0eSB2YWx1ZS5cclxuICAgICAgICAgICAgICAgIGlmICghKCd2b3Jvbm9pJyBpbiBzd2FybURhdGFbMF0pKXtcclxuICAgICAgICAgICAgICAgICAgIHZvcm9ub2kgPSB0aGlzLnRhbmtcclxuICAgICAgICAgICAgICAgICAgICAgICAuc2VsZWN0KCcjdm9ybm9pLWdyb3VwJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuc2VsZWN0QWxsKCdwYXRoLnZvcm9ub2knKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5kYXRhKFtzd2FybURhdGFbdGhpcy5pbmRleFRpbWVdWyd2b3Jvbm9pJ11dKVxyXG4gICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgdm9yb25vaSA9IHRoaXMudGFua1xyXG4gICAgICAgICAgICAgICAgICAgICAgIC5zZWxlY3QoJyN2b3Jub2ktZ3JvdXAnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5zZWxlY3RBbGwoJ3BhdGgudm9yb25vaScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmRhdGEoc3dhcm1EYXRhW3RoaXMuaW5kZXhUaW1lXVsndm9yb25vaSddLnNwbGl0KCc7JykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coc3dhcm1EYXRhW3RoaXMuaW5kZXhUaW1lXVsndm9yb25vaSddKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAvLyBVUERBVEUgLSB2b3Jvbm9pXHJcbiAgICAgICAgICAgICAgICAgICB2b3Jvbm9pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2QnLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAvL0VOVEVSIC0gdm9yb25vaVxyXG4gICAgICAgICAgICAgICAgICAgdm9yb25vaS5lbnRlcigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgncGF0aCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3Zvcm9ub2knKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdkJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgIHZvcm9ub2kgPSB0aGlzLnRhbmsuc2VsZWN0KCcjdm9ybm9pLWdyb3VwJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuc2VsZWN0QWxsKCdwYXRoLnZvcm9ub2knKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5kYXRhKFtdKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAvLyBFWElUIC0gdm9yb25vaVxyXG4gICAgICAgICAgICAgICB2b3Jvbm9pLmV4aXQoKVxyXG4gICAgICAgICAgICAgICAgICAgLnJlbW92ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgLy9FTlRFUiAtIGFwcGVuZCB0aGUgYW5pbWFsIGdyb3Vwc1xyXG4gICAgICAgICAgICAgICBsZXQgYW5pbWFsR3JvdXBpbmdzID0gc3ZnQW5pbWFsc1xyXG4gICAgICAgICAgICAgICAgICAgLmVudGVyKClcclxuICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2FuaW1hbCcpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignaWQnLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2FuaW1hbC0nICsgZFsnYSddO1xyXG4gICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyBBcHBlbmQgdGhlIGNpcmNsZXMgZm9yIGVhY2ggYW5pbWFsIHRvIHRoZSBhbmltYWxncm91cFxyXG4gICAgICAgICAgICAgICBhbmltYWxHcm91cGluZ3MuYXBwZW5kKCdjaXJjbGUnKVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ3InLCAxLjUgKiBhbmltYWxTY2FsZSlcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjeCcsIChkKT0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZFsncCddWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjeScsIChkKT0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLWRbJ3AnXVsxXTtcclxuICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAub24oJ21vdXNlb3ZlcicsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXBGdW5jdGlvbihkKTtcclxuICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAub24oJ21vdXNlb3V0JywgKCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICB0b29sdGlwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC50cmFuc2l0aW9uKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLmR1cmF0aW9uKDUwMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgMCk7XHJcbiAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgLy8gYWRkIG9uIGNsaWNrIGZvciB0aGUgYWN0aXZlIGZpc2hzXHJcbiAgICAgICAgICAgICAgICAgICAub24oJ2NsaWNrJywgKGQpPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZUFuaW1hbHMuaW5jbHVkZXMoZFsnYSddKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUFuaW1hbHMgPSB0aGlzLmFjdGl2ZUFuaW1hbHMuZmlsdGVyKGl0ZW0gPT4gaXRlbSAhPT0gZFsnYSddKTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUFuaW1hbHMucHVzaChkWydhJ10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9nbyBiYWNrIG9uZSBzZWNvbmQgYW5kIGRyYXcgdGhlIG5leHQgZnJhbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4VGltZS0tO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIFVQREFURSAtIGFuaW1hbHMgY2lyY2xlc1xyXG4gICAgICAgICAgICAgICBzdmdBbmltYWxzLnNlbGVjdCgnY2lyY2xlJylcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjeCcsIChkKT0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZFsncCddWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjeScsIChkKT0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLWRbJ3AnXVsxXTtcclxuICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cigncicsIGFuaW1hbFNjYWxlKTtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coc3ZnQW5pbWFscy5zZWxlY3QoJ2NpcmNsZScpKTtcclxuICAgICAgICAgICAgICAgLy8gQXBwZW5kIGZvciBlYWNoIGdyb3VwIHRoZSBhcnJvdywgbmVlZGVkIGZvciBjb2xvcmluZ1xyXG4gICAgICAgICAgICAgICBhbmltYWxHcm91cGluZ3MuYXBwZW5kKCdzdmc6ZGVmcycpXHJcbiAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCdzdmc6bWFya2VyJylcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnYXJyb3ctbWFya2VyLScgKyBkWydhJ107XHJcbiAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ3JlZlgnLCAyKVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ3JlZlknLCA2KVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ21hcmtlcldpZHRoJywgMTMpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignbWFya2VySGVpZ2h0JywgMTMpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignb3JpZW50JywgJ2F1dG8nKVxyXG4gICAgICAgICAgICAgICAgICAgLmFwcGVuZCgnc3ZnOnBhdGgnKVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2QnLCAnTTIsMiBMMiwxMSBMMTAsNiBMMiwyJyk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyBBcHBlbmQgdGhlIGxpbmUgZm9yIHRoZSBkaXJlY3Rpb24gYXJyb3dcclxuICAgICAgICAgICAgICAgYW5pbWFsR3JvdXBpbmdzXHJcbiAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCdsaW5lJylcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdhcnJvdycpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignbWFya2VyLWVuZCcsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAndXJsKCNhcnJvdy1tYXJrZXItJyArIGRbJ2EnXSArICcpJztcclxuICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgLy9leGVjdXRlIG9ubHkgd2hlbiBkcmF3IGRpcmVjdGlvbiBidXR0b24gaXMgY2hlY2tlZFxyXG4gICAgICAgICAgICAgICBpZiAoJCgnI2RyYXctZGlyZWN0aW9uJylcclxuICAgICAgICAgICAgICAgICAgIC5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgLy8gVVBEQVRFIGFuaW1hbCBkaXJlY3Rpb24gYXJyb3dcclxuICAgICAgICAgICAgICAgICAgIHN2Z0FuaW1hbHMuc2VsZWN0KCdsaW5lJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneDEnLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRbJ3AnXVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd5MScsIChkKT0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC1kWydwJ11bMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneDInLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChkWydwJ11bMF0gKyAyICogYW5pbWFsU2NhbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3kyJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoLWRbJ3AnXVsxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAncm90YXRlKCcgKyAtZFsnZGlyZWN0aW9uJ10gKyAnICcgKyBkWydwJ11bMF0gKyAnICcgKyAtZFsncCddWzFdICsgJyknO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgLy8gaGlkZSB0aGUgYXJyb3dzXHJcbiAgICAgICAgICAgICAgICAgICAkKCcuYXJyb3cnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgIC8vIEVYSVQgLSB0aGUgZ3JvdXBzXHJcbiAgICAgICAgICAgICAgIHN2Z0FuaW1hbHMuZXhpdCgpXHJcbiAgICAgICAgICAgICAgICAgICAucmVtb3ZlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAvL0NvbnZleCBodWxsXHJcbiAgICAgICAgICAgICAgIGlmICgkKCcjZHJhdy1jb252ZXgtaHVsbCcpXHJcbiAgICAgICAgICAgICAgICAgICAuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICAgICAgIC8vIERBVEEgSk9JTiAtIHBhdGhzXHJcbiAgICAgICAgICAgICAgICAgICB2YXIgaHVsbFBhdGggPSB0aGlzLnRhbmsuc2VsZWN0QWxsKCdwYXRoLmh1bGwtcGF0aCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmRhdGEoW3N3YXJtRGF0YVt0aGlzLmluZGV4VGltZV1bJ2NvbnZleF9odWxsJ11dKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAvLyBVUERBVEUgLSBodWxsIHBhdGhcclxuICAgICAgICAgICAgICAgICAgIGh1bGxQYXRoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2QnLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgLy8gRU5URVIgLSBodWxsIHBhdGhzXHJcbiAgICAgICAgICAgICAgICAgICBodWxsUGF0aC5lbnRlcigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgncGF0aCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2h1bGwtcGF0aCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2QnLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgLy8gZHJhdyBubyBodWxsXHJcbiAgICAgICAgICAgICAgICAgICBodWxsUGF0aCA9IHRoaXMudGFuay5zZWxlY3QoJ3BhdGguaHVsbC1wYXRoJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuZGF0YShbXSk7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgLy8gRVhJVCAtIGh1bGwgcGF0aHNcclxuICAgICAgICAgICAgICAgaHVsbFBhdGguZXhpdCgpXHJcbiAgICAgICAgICAgICAgICAgICAucmVtb3ZlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAvL2NoYW5nZSB0aGUgY29sb3JzIG9mIHRoZSBmaXNoXHJcbiAgICAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZVNjYWxlICE9PSAnYmxhY2snKSB7XHJcbiAgICAgICAgICAgICAgICAgICAvLyBvbmNlIHRoZSBmaWxsIGZvciB0aGUgaGVhZHMgYW5kIHRoZSBzdHJva2UgZm9yIHRoZSBwYXRoXHJcbiAgICAgICAgICAgICAgICAgICB2YXIgdG1wU2NhbGUgPSB0aGlzLnJldHVybkNvbG9yU2NhbGUoKTtcclxuICAgICAgICAgICAgICAgICAgIHN2Z0FuaW1hbHNcclxuICAgICAgICAgICAgICAgICAgICAgICAudHJhbnNpdGlvbigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmR1cmF0aW9uKDEwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5zdHlsZSgnZmlsbCcsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG1wU2NhbGUoZFt0aGlzLmFjdGl2ZVNjYWxlXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0bXBTY2FsZShkW3RoaXMuYWN0aXZlU2NhbGVdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgIC8vY29sb3IgZXZlcnkgZmlzaCBibGFja1xyXG4gICAgICAgICAgICAgICAgICAgc3ZnQW5pbWFsc1xyXG4gICAgICAgICAgICAgICAgICAgICAgIC5zdHlsZSgnZmlsbCcsICcjMDAwJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlJywgJyMwMDAnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICBpZiAoISQuaXNFbXB0eU9iamVjdChtZXRhZGF0YUNvbG9yKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKG1ldGFkYXRhQ29sb3IpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGQzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2VsZWN0KCcjYW5pbWFsLScgKyBrZXkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ2ZpbGwnLCBtZXRhZGF0YUNvbG9yW2tleV0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlJywgbWV0YWRhdGFDb2xvcltrZXldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgLy9jaGFuZ2Ugb3BhY3RpeSBpZiB0aGUgZmlzaCBpcyBzZWxlY3RlZFxyXG4gICAgICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVBbmltYWxzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgc3ZnQW5pbWFsc1xyXG4gICAgICAgICAgICAgICAgICAgICAgIC5zdHlsZSgnb3BhY2l0eScsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVBbmltYWxzLmluY2x1ZGVzKGRbJ2EnXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDAuMjU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgIGlmICgkKCcjcmVtb3ZlLWFjdGl2ZS1zZWxlY3RlZC1idXR0b24nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5pcygnOmRpc2FibGVkJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAkKCcjcmVtb3ZlLWFjdGl2ZS1zZWxlY3RlZC1idXR0b24nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgJCgnI3Zpc3VhbC1wYXJhbWV0ZXItYnV0dG9uJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgLy8gaWYgdHJhY2tpbmcgaXMgb25cclxuICAgICAgICAgICAgICAgICAgIGlmICh0cmFja2luZ0Jvb2xlYW4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICBhZGRUcmFja2VkRGF0YSh0aGlzLmFycmF5QW5pbWFsc1swXVsndCddLCB0aGlzLmFjdGl2ZUFuaW1hbHMpO1xyXG4gICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgaWYgKCEkKCcjcmVtb3ZlLWFjdGl2ZS1zZWxlY3RlZC1idXR0b24nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5pcygnOmRpc2FibGVkJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAkKCcjcmVtb3ZlLWFjdGl2ZS1zZWxlY3RlZC1idXR0b24nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAkKCcjdmlzdWFsLXBhcmFtZXRlci1idXR0b24nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgIC8vIG5vcm1hbCBvcGFjaXR5XHJcbiAgICAgICAgICAgICAgICAgICBzdmdBbmltYWxzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgMSk7XHJcbiAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgIC8vZHJhdyBjZW50cm9pZFxyXG4gICAgICAgICAgICAgICBkMy5zZWxlY3QoJy5jZW50cm9pZCcpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignY3gnLCAoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGlmICgnY2VudHJvaWQnIGluIHN3YXJtRGF0YVswXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3dhcm1EYXRhW3RoaXMuaW5kZXhUaW1lXVsnY2VudHJvaWQnXVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2N5JywgKCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICBpZiAoJ2NlbnRyb2lkJyBpbiBzd2FybURhdGFbMF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC1zd2FybURhdGFbdGhpcy5pbmRleFRpbWVdWydjZW50cm9pZCddWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICBpZiAoJCgnI2RyYXctZGlyZWN0aW9uJykuaXMoJzpjaGVja2VkJykgJiZcclxuICAgICAgICAgICAgICAgICAgIHN3YXJtRGF0YVt0aGlzLmluZGV4VGltZV0uY2VudHJvaWQgJiZcclxuICAgICAgICAgICAgICAgICAgICQoJyNkcmF3LWNlbnRyb2lkJykuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnI2NlbnRyb2lkLWxpbmUnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdoaWRkZW4nLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAvLyBVUERBVEUgYW5pbWFsIGRpcmVjdGlvbiBhcnJvd1xyXG4gICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KCcjY2VudHJvaWQtbGluZScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gxJywgKCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN3YXJtRGF0YVt0aGlzLmluZGV4VGltZV1bJ2NlbnRyb2lkJ11bMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneTEnLCAoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLXN3YXJtRGF0YVt0aGlzLmluZGV4VGltZV1bJ2NlbnRyb2lkJ11bMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneDInLCAoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHN3YXJtRGF0YVt0aGlzLmluZGV4VGltZV1bJ2NlbnRyb2lkJ11bMF0gKyAyICogYW5pbWFsU2NhbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3kyJywgKCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC1zd2FybURhdGFbdGhpcy5pbmRleFRpbWVdWydjZW50cm9pZCddWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICgpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAncm90YXRlKCcgKyAtc3dhcm1EYXRhW3RoaXMuaW5kZXhUaW1lXVsnZGlyZWN0aW9uJ10gKyAnICcgKyBzd2FybURhdGFbdGhpcy5pbmRleFRpbWVdWydjZW50cm9pZCddWzBdICsgJyAnICsgLXN3YXJtRGF0YVt0aGlzLmluZGV4VGltZV1bJ2NlbnRyb2lkJ11bMV0gKyAnKSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAvLyBoaWRlIHRoZSBhcnJvd3NcclxuICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnI2NlbnRyb2lkLWxpbmUnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdoaWRkZW4nKTtcclxuICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgLy8gbWVkb2lkXHJcbiAgICAgICAgICAgICAgIGlmICh0aGlzLm1lZG9pZEFuaW1hbCAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgnI2FuaW1hbC0nICsgdGhpcy5tZWRvaWRBbmltYWwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ21lZG9pZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgIHRoaXMubWVkb2lkQW5pbWFsID0gc3dhcm1EYXRhW3RoaXMuaW5kZXhUaW1lXVsnbWVkb2lkJ107XHJcbiAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoJyNhbmltYWwtJyArIHRoaXMubWVkb2lkQW5pbWFsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdtZWRvaWQnLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgLy9uZXh0IGZyYW1lXHJcbiAgICAgICAgICAgICAgIHRoaXMuaW5kZXhUaW1lKys7XHJcblxyXG4gICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUxpbmVDaGFydCgpO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgIC8vY2hlY2sgaWYgcGxheSBidXR0b24gaXMgYWN0aXZlIGFuZCBpZiB0aGUgYW5pbWF0aW9uIGlzIG5vdCBmaW5pc2hlZFxyXG4gICAgICAgICAgICAgICBpZiAodGhpcy5pbmRleFRpbWUgPj0gc3dhcm1EYXRhLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgLy9zdGFydCBhZ2FpbiBmcm9tIHRoZSBzdGFydFxyXG4gICAgICAgICAgICAgICAgICAgdGhpcy5pbmRleFRpbWUgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wbGF5Qm9vbGVhbikge1xyXG4gICAgICAgICAgICAgICAgICAgLy9tZWFzdXJlIGV4ZWN1dGlvbiB0aW1lXHJcbiAgICAgICAgICAgICAgICAgICAvLyAgIGxldCB0MSA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG4gICAgICAgICAgICAgICAgICAgLy8gICBjb25zb2xlLmxvZyh0MSAtIHQwKTsgLy8gaW4gbWlsbGlzZWNvbmRzXHJcbiAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXcoKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgdGltZVRvV2FpdCk7XHJcbiAgIH1cclxuXHJcbiAgIGluaXREZW5kcm9ncmFtKCkge1xyXG4gICAgICAgLy8gY29uc3RhbmN0IGZhY3RvcnMgZm9yIHRoZSBkZW5kZ3JvZ3JhbVxyXG4gICAgICAgbGV0IG1hcmdpbiA9IDIwLFxyXG4gICAgICAgICAgIHdpZHRoID0gNTAwMCxcclxuICAgICAgICAgICBoZWlnaHQgPSA1MDAwO1xyXG5cclxuICAgICAgIC8vIHpvb20gZnVuY3Rpb24gZm9yIHRoZSBkZW5kcm9ncmFtXHJcbiAgICAgICBsZXQgem9vbSA9IGQzLnpvb20oKVxyXG4gICAgICAgICAgIC5zY2FsZUV4dGVudChbMSwgMTBdKVxyXG4gICAgICAgICAgIC5vbignem9vbScsICgpPT57XHJcbiAgICAgICAgICAgICAgIC8vY29uc3RyYWluZWQgem9vbWluZ1xyXG4gICAgICAgICAgICAgICBkMy5ldmVudC50cmFuc2Zvcm0ueCA9IE1hdGgubWluKDAsIHdpZHRoICogKGQzLmV2ZW50LnRyYW5zZm9ybS5rIC0gMSksXHJcbiAgICAgICAgICAgICAgICAgICBNYXRoLm1heCh3aWR0aCAqICgxIC0gZDMuZXZlbnQudHJhbnNmb3JtLmspLCBkMy5ldmVudC50cmFuc2Zvcm0ueCkpO1xyXG5cclxuICAgICAgICAgICAgICAgZDMuZXZlbnQudHJhbnNmb3JtLnkgPSBNYXRoLm1pbigwLCBoZWlnaHQgKiAoZDMuZXZlbnQudHJhbnNmb3JtLmsgLSAxKSxcclxuICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KGhlaWdodCAqICgxIC0gZDMuZXZlbnQudHJhbnNmb3JtLmspLCBkMy5ldmVudC50cmFuc2Zvcm0ueSkpO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gdHJhbnNsYXRlIGFuZCBzY2FsZVxyXG4gICAgICAgICAgICAgICB0aGlzLmRlbmRyb3pvb20uYXR0cigndHJhbnNmb3JtJywgZDMuZXZlbnQudHJhbnNmb3JtKTtcclxuICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAvLyBzdmcgY29udGFpbmVyIGZvciB0aGUgZGVuZHJvZ3JhbVxyXG4gICAgICAgbGV0IHN2ZyA9IGQzLnNlbGVjdCgnI2RlbmRyb2dyYW0tcGFuZWwnKVxyXG4gICAgICAgICAgIC5jbGFzc2VkKCdzdmctZGVuZHJvZ3JhbS1jb250YWluZXInLCB0cnVlKVxyXG4gICAgICAgICAgIC5hcHBlbmQoJ3N2ZycpXHJcbiAgICAgICAgICAgLmF0dHIoJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLCAneE1pbllNaW4gbWVldCcpXHJcbiAgICAgICAgICAgLmF0dHIoJ3ZpZXdCb3gnLCAnMCAwICcgKyB3aWR0aCArICcgJyArIGhlaWdodClcclxuICAgICAgICAgICAvLyBhZGQgdGhlIGNsYXNzIHN2Zy1jb250ZW50XHJcbiAgICAgICAgICAgLmNsYXNzZWQoJ3N2Zy1jb250ZW50LWRlbmRyb2dyYW0nLCB0cnVlKVxyXG4gICAgICAgICAgIC5jYWxsKHpvb20pO1xyXG5cclxuICAgICAgIGluaXREZW5kcm9ncmFtTGVnZW5kKCk7XHJcblxyXG4gICAgICAgLy8gYXBwZW5kIHRoZSB6b29tIGdyb3VwIHRvIHRoZSBzdmdcclxuICAgICAgIHRoaXMuZGVuZHJvem9vbSA9IHN2Zy5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyBtYXJnaW4gKyAnLCcgKyBtYXJnaW4gKyAnKScpXHJcbiAgICAgICAgICAgLmFwcGVuZCgnc3ZnOmcnKTtcclxuXHJcbiAgICAgICAvLyBkMyB0cmVlXHJcbiAgICAgICBsZXQgdHJlZW1hcCA9IGQzLnRyZWUoKSAvL2QzLmNsdXN0ZXIoKVxyXG4gICAgICAgICAgIC5zaXplKFsoaGVpZ2h0IC0gMTAgKiBtYXJnaW4pLCAod2lkdGggLSAxMCAqIG1hcmdpbildKTtcclxuXHJcbiAgICAgICAvLyBzZXQgdGhlIHNwYXRpYWwgdmlldyAtIG5lZWRlZCB0byBhZGQgdGhlIGNsdXN0ZXJpbmcgdG8gdGhlIHNwYXRpYWwgdmlldyB3aW5kb3dcclxuICAgICAgIHRoaXMuc3BhdGlhbFZpZXcgPSBkMy5zZWxlY3QoJy50YW5rJyk7XHJcblxyXG4gICAgICAgLy8gaW5pdCBkZW5kcm9ncmFtIHNsaWRlclxyXG4gICAgICAgLy8gaW5pdGlhbGl6ZSB0aGUgTmV0d29yayBzbGlkZXJcclxuICAgICAgICQoJyNkZW5kcm9ncmFtLXBhbmVsLWxldmVsLXNsaWRlcicpXHJcbiAgICAgICAgICAgLnNsaWRlcih7XHJcbiAgICAgICAgICAgICAgIHJhbmdlOiAnbWF4JyxcclxuICAgICAgICAgICAgICAgbWluOiAyLFxyXG4gICAgICAgICAgICAgICBtYXg6IDIsXHJcbiAgICAgICAgICAgICAgIHN0ZXA6IDEsXHJcbiAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLmhpZXJhcmNoeUxldmVsc1snaDAnXSxcclxuICAgICAgICAgICAgICAgc2xpZGU6IChldmVudCwgdWkpPT57XHJcbiAgICAgICAgICAgICAgICAgICBsZXQgaWQgPSAkKCcuc2hvdy1kZW5kcm9ncmFtLmJ0bi1wcmltYXJ5JykuYXR0cignZGF0YScpO1xyXG4gICAgICAgICAgICAgICAgICAgdGhpcy5zZXRIaWVyYXJjaHlMZXZlbChpZCwgdWkudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVEZW5kcm9ncmFtKCk7XHJcbiAgICAgICAgICAgICAgICAgICAvLyBpZiBubyBhbmltYXRpb24gaXMgYWN0aXZlIGRyYXcgdGhlIG5ldyBjbHVzdGVyaW5nIGFuZCBkZW5kcm9ncmFtXHJcbiAgICAgICAgICAgICAgICAgICAvLyBkcmF3RGVuZHJvZ3JhbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgaWYgKCEkKCcjcGxheS1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlY0luZGV4VGltZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhd0RlbmRyb2dyYW0oKTtcclxuICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgIH0pO1xyXG4gICAgICAgbGV0IHRvb2x0aXBEaXY7XHJcbiAgICAgICAvLyBpbml0IHRoZSB0b29sdGlwIGZvciB0aGUgZGVuZHJvZ3JhbVxyXG4gICAgICAgdG9vbHRpcERpdiA9IGQzLnNlbGVjdCgnI2RlbmRyb2dyYW0tdG9vbHRpcCcpXHJcbiAgICAgICAgICAgLnN0eWxlKCdsZWZ0JywgMCArICdweCcpXHJcbiAgICAgICAgICAgLnN0eWxlKCd0b3AnLCAwICsgJ3B4JylcclxuICAgICAgICAgICAub24oJ21vdXNlb3ZlcicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICB0b29sdGlwRGl2XHJcbiAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ29wYWNpdHknLCAxKTtcclxuICAgICAgICAgICB9KTtcclxuICAgICAgIC8vIGluaXQgdGhlIGhpZXJhcmNoeSBsZWdlbmRcclxuICAgICAgIGxldCBsZWdlbmRXaWR0aCA9IG1heE51bWJlckhpZXJhcmNoaWVzICogMTAwO1xyXG4gICAgICAgbGV0IGxlZ2VuZEhlaWdodCA9IDYwO1xyXG5cclxuICAgICAgIHRoaXMuc3ZnTGVnZW5kX25ldHcgPSBkMy5zZWxlY3QoJyNoaWVyYXJjaHktbGVnZW5kLWRpdicpXHJcbiAgICAgICAgICAgLmFwcGVuZCgnc3ZnJylcclxuICAgICAgICAgICAuYXR0cignaWQnLCAnaGllcmFyY2h5LWxlZ2VuZCcpXHJcbiAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgbGVnZW5kV2lkdGgpXHJcbiAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGxlZ2VuZEhlaWdodCk7XHJcblxyXG4gICAgICAgLy8gYWRkIHBhdHRlcm4gZm9yIHN0cmlwZWQgYmFja2dyb3VuZCBvZiBpbnRlcnNlY3Rpb25zIGV0Yy5cclxuICAgICAgIHRoaXMuc3BhdGlhbFZpZXcuYXBwZW5kKCdkZWZzJylcclxuICAgICAgICAgICAuYXBwZW5kKCdzdmc6cGF0dGVybicpXHJcbiAgICAgICAgICAgLmF0dHIoJ2lkJywgJ3N0cmlwZWQnKVxyXG4gICAgICAgICAgIC5hdHRyKCdwYXR0ZXJuVW5pdHMnLCAndXNlclNwYWNlT25Vc2UnKVxyXG4gICAgICAgICAgIC5hdHRyKCd3aWR0aCcsICcyMCcpXHJcbiAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsICc1JylcclxuICAgICAgICAgICAuYXR0cigncGF0dGVyblRyYW5zZm9ybScsICdyb3RhdGUoNjApJylcclxuICAgICAgICAgICAuYXBwZW5kKCdyZWN0JylcclxuICAgICAgICAgICAuYXR0cignd2lkdGgnLCA1KVxyXG4gICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCAxMClcclxuICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgwLDApJylcclxuICAgICAgICAgICAuc3R5bGUoJ2ZpbGwnLCAnIzY3MDAwZCcpO1xyXG5cclxuICAgfTtcclxuICAgY2xpY2soZCkge1xyXG4gICAgICAgc2V0QWN0aXZlQW5pbWFscyhkWydkYXRhJ11bJ25hbWUnXSk7XHJcbiAgICAgICAvLyBpZiBubyBhbmltYXRpb24gaXMgYWN0aXZlIGRyYXcgdGhlIGRyYXcgb25lIHN0ZXBcclxuICAgICAgIGlmICghJCgnI3BsYXktYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgdGhpcy5kZWNJbmRleFRpbWUoKTtcclxuICAgICAgICAgICB0aGlzLmRyYXcoKTtcclxuICAgICAgIH1cclxuICAgfVxyXG4gICBzZXRoaWVyYXJjaHlHcm91cFN0ZGV2KGtleSwgdmFsdWUpIHtcclxuICAgICAgIGlmIChrZXkgaW4gdGhpcy5oaWVyYXJjaHlHcm91cFN0ZGV2KSB7XHJcbiAgICAgICAgICAgdGhpcy5oaWVyYXJjaHlHcm91cFN0ZGV2W2tleV0ucHVzaCh2YWx1ZSk7XHJcbiAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgIHRoaXMuaGllcmFyY2h5R3JvdXBTdGRldltrZXldID0gW3ZhbHVlXTtcclxuICAgICAgIH1cclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIFJlc2V0IGhpZXJhcmNoeSBncm91cCBzdGFuZGFyZCBkZXZpYXRpb25cclxuICAgICovXHJcbiAgIHJlc2V0aGllcmFyY2h5R3JvdXBTdGRldigpIHtcclxuICAgICAgIHRoaXMuaGllcmFyY2h5R3JvdXBTdGRldiA9IHt9O1xyXG4gICB9XHJcbiAgIGdldEhpZXJhcmNoeUxldmVsKHJvb3QsIGhpZXJhcmNoeSkge1xyXG4gICAgbGV0IHJlc3VsdCA9IFtdO1xyXG4gICAgbGV0IGxldmVsID0gdGhpcy5oaWVyYXJjaHlMZXZlbHNbJ2gnICsgaGllcmFyY2h5XTtcclxuXHJcbiAgICAvLyBzZWNvbmQgbGV2ZWwgb2YgdGhlIGFycmF5XHJcbiAgICBsZXQgdG1wX25vZGVzID0gcm9vdFsnY2hpbGRyZW4nXTtcclxuICAgIC8vIGl0ZXJhdGUgdGhyb3VnaCB0aGUgdHJlZVxyXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCByb290WydoZWlnaHQnXTsgaSsrKSB7XHJcbiAgICAgICAgLy8gY2hlY2sgaWYgd2UgYXJlIGF0IHRoZSBzZWFyY2hlZCBsZXZlbFxyXG4gICAgICAgIGlmICh0bXBfbm9kZXNbMF0gJiYgdG1wX25vZGVzWzBdWydkZXB0aCddID09PSBsZXZlbCkge1xyXG4gICAgICAgICAgICAvLyBhZGQgZWFjaCBjbHVzdGVyIHRvIHRoZSByZXN1bHQgc2V0XHJcbiAgICAgICAgICAgIHRtcF9ub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uKG5vZGUpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygbm9kZVsnZGF0YSddWyduYW1lJ10gIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobm9kZVsnZGF0YSddWyduYW1lJ10pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGdldCBhbGwgY2hpbGRyZW4gb2YgYSBzcGVjaWZpYyBsZXZlbCBpbiB0aGUgdHJlZVxyXG4gICAgICAgIGxldCB0bXAgPSBbXTtcclxuICAgICAgICB0bXBfbm9kZXMuZm9yRWFjaChmdW5jdGlvbihub2RlKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygbm9kZVsnY2hpbGRyZW4nXSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgIHRtcCA9IHRtcC5jb25jYXQobm9kZVsnY2hpbGRyZW4nXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0bXBfbm9kZXMgPSB0bXA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbiAgIHNldEhpZXJhcmNoeUxldmVsKGhpZXJhcmNoeSwgbGV2ZWwpIHtcclxuICAgICAvLyBUT0RPIGNhdGNoIGNhc2VzIDwgMCBhbmQgYmlnZ2VyIHRoYW4gb3ZlcmFsbCBoZWlnaHRcclxuICAgICB0aGlzLmhpZXJhcmNoeUxldmVsc1snaCcgKyBoaWVyYXJjaHldID0gbGV2ZWw7XHJcbiAgICB9XHJcbiAgIHNldEhpZXJhcmNoeUNvbG9yKGhpZXJhcmNoeSkge1xyXG4gICAgICAgIC8vIGNoZWNrIGlmIHRoZSBoaWVyYXJjaHkgaXMgYWxyZWFkeSBzaG93biBhcyBuZXR3b3JrXHJcbiAgICAgICAgLy8gdGFrZSB0aGUgc2FtZSBjb2xvclxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdzZXRzIGNvbG9yJyk7XHJcbiAgICAgICAgZm9yIChsZXQga2V5IGluIHRoaXMubmV0d29ya0NvbG9yKSB7XHJcbiAgICAgICAgICAgIGlmIChrZXkgPT09ICgnaCcgKyBoaWVyYXJjaHkpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc2FtZSBjb2xvcicpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oaWVyYXJjaHlDb2xvcnNbJ2gnICsgaGllcmFyY2h5XSA9IHRoaXMubmV0d29ya0NvbG9yW2tleV07XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuaGllcmFyY2h5Q29sb3JzKTtcclxuICAgICAgICAvLyBoaWVyYXJjaHkgaXMgbm90IHZpc3VhbGl6ZWQgYWxyZWFkeSBhcyBhIG5ldHdvcmtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbG9ycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgdG1wX2Jvb2xlYW4gPSB0cnVlO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gdGhpcy5oaWVyYXJjaHlDb2xvcnMpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5oaWVyYXJjaHlDb2xvcnMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhpZXJhcmNoeUNvbG9yc1trZXldID09PSBjb2xvcnNbaV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG1wX2Jvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0bXBfYm9vbGVhbikge1xyXG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgYSBuZXR3b3JrIGlzIGRlcGljdGVkXHJcbiAgICAgICAgICAgICAgICAvLyBpZiBzbyBza2lwIHRoZSBjb2xvciB3aGljaCBpcyBhbHJlYWR5IGNob29zZW4gZm9yIHRoZSBuZXR3b3JrXHJcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5uZXR3b3JrQ29sb3IpLmxlbmd0aCAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiB0aGlzLm5ldHdvcmtDb2xvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5uZXR3b3JrQ29sb3Jba2V5XSAhPT0gY29sb3JzW2ldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZXJhcmNoeUNvbG9yc1snaCcgKyBoaWVyYXJjaHldID0gY29sb3JzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZXJhcmNoeUNvbG9yc1snaCcgKyBoaWVyYXJjaHldID0gY29sb3JzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgIHJlbW92ZUhpZXJhcmNoeUNvbG9yKGhpZXJhcmNoeSkge1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLmhpZXJhcmNoeUNvbG9yc1snaCcgKyBoaWVyYXJjaHldO1xyXG4gICAgfVxyXG4gICByZW1vdmVIaWVyYXJjaHlMZXZlbChoaWVyYXJjaHkpIHtcclxuICAgICAgLy8gVE9ETyBjYXRjaCBjYXNlcyA8IDAgYW5kIGJpZ2dlciB0aGFuIG92ZXJhbGwgaGVpZ2h0XHJcbiAgICAgIGRlbGV0ZSB0aGlzLmhpZXJhcmNoeUxldmVsc1snaCcgKyBoaWVyYXJjaHldO1xyXG4gIH1cclxuICAgdXBkYXRlRGVuZHJvZ3JhbSgpIHtcclxuICAgICAvLyBnZXQgdGhlIGltcG9ydGFudCBpbmZvXHJcbiAgICAgbGV0IGlkID0gJCgnLnNob3ctZGVuZHJvZ3JhbS5idG4tcHJpbWFyeScpLmF0dHIoJ2RhdGEnKTtcclxuICAgICBsZXQgbmFtZSA9ICQoJy5zaG93LWRlbmRyb2dyYW0uYnRuLXByaW1hcnknKS5hdHRyKCduYW1lJyk7XHJcbiAgICAgLy8gc2V0IHRoZSBuYW1lIG9mIHRoZSBkaXNwbGF5ZWQgaGllcmFyY2h5XHJcbiAgICAgJCgnI2RlbmRyb2dyYW0tcGFuZWwtbmFtZScpLnRleHQobmFtZSk7XHJcblxyXG4gICAgIC8vIHNldCBzbGlkZXIgYW5kICB0ZXh0IHZhbHVlXHJcbiAgICAgJCgnI2RlbmRyb2dyYW0tcGFuZWwtbGV2ZWwtc2xpZGVyJykudmFsKHRoaXMuaGllcmFyY2h5TGV2ZWxzWydoJyArIGlkXSk7XHJcbiAgICAgJCgnI2RlbmRyb2dyYW0tcGFuZWwtbGV2ZWwtdGV4dCcpLnRleHQodGhpcy5oaWVyYXJjaHlMZXZlbHNbJ2gnICsgaWRdKTtcclxuXHJcbn1cclxuICAgZ2V0SGllcmFyY2h5VmVydGljZXMoaGllcmFyY2hpZXMpIHtcclxuICAgICAgIGxldCByZXN1bHQgPSBbXTsgLy8gcmVzdWx0IHNldFxyXG4gICAgICAgaGllcmFyY2hpZXMuZm9yRWFjaCgoY2x1c3Rlcik9PntcclxuICAgICAgICAgICBsZXQgdmVydGljZXMgPSBbXTsgLy8gdmVydGljZXMgb2YgdGhlIGNsdXN0ZXJzIGluIHRoZSBzcGF0aWFsIHZpZXdcclxuICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGNsdXN0ZXIubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgbGV0IGdyb3VwTWVtYmVyID0gdGhpcy5hcnJheUFuaW1hbHMuZmluZChkID0+IGRbJ2EnXSA9PT0gY2x1c3RlcltqXSk7XHJcbiAgICAgICAgICAgICAgIGlmIChncm91cE1lbWJlcikge1xyXG4gICAgICAgICAgICAgICAgICAgdmVydGljZXMucHVzaChbZ3JvdXBNZW1iZXJbJ3AnXVswXSwgLWdyb3VwTWVtYmVyWydwJ11bMV1dKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgIH1cclxuICAgICAgICAgICAvLyBBbmRyZXcgbW9udG9uZSBjaGFpbiBhbGdvcml0aG0gcmV1dHJucyBmb3IgcG9pbnRzIGZld2VyIHRoYW4gMyBudWxsXHJcbiAgICAgICAgICAgaWYgKHZlcnRpY2VzLmxlbmd0aCA+PSAzKSB7XHJcbiAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGQzLnBvbHlnb25IdWxsKHZlcnRpY2VzKSk7XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgfSk7XHJcbiAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICB9XHJcbiAgIGRyYXdIaWVyYXJjaHkoKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdoaWVyYXJjaHkgZHJhd24nKTtcclxuXHJcbiAgICAgICAvLyBpZCBvZiB0aGUgaGllcmFyY2h5IGUuZy4gWzEsNSwzXVxyXG4gICAgICAgbGV0IGhpZXJhcmNoeUlkcyA9IE9iamVjdC5rZXlzKHRoaXMubmV0d29ya0hpZXJhcmNoeSkubWFwKGZ1bmN0aW9uKHgpIHtcclxuICAgICAgICAgICByZXR1cm4geC5yZXBsYWNlKCdoJywgJycpO1xyXG4gICAgICAgfSk7XHJcbiAgICAgICAvLyAgVGhlIGNsdXN0ZXJpbmcgaW4gYW4gMkQgYXJyYXkgd2l0aCB3aGljaCBhbmltYWwgaWQgYmVsb25ncyB0byB3aGljaCBncm91cFxyXG4gICAgICAgbGV0IGhpZXJhcmNoeVZlcnRpY2VzID0gW107XHJcblxyXG4gICAgICAgLy8gaXRlcmF0ZSBvdmVyIHRoZSBoaWVyYXJjaHkgZGF0YSB0byBnZXQgdGhlIGhpZXJhcmNoeSBhbmltYWwgaWRzIHBlciBjbHVzdGVyaW5nIGFuZCBncm91cGluZ1xyXG4gICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBoaWVyYXJjaHlJZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICBsZXQgdHJlZURhdGEgPSB0aGlzLm5ldHdvcmtIaWVyYXJjaHlbJ2gnICsgaGllcmFyY2h5SWRzW2ldXVt0aGlzLmluZGV4VGltZV07XHJcbiAgICAgICAgICAgLy9jb25zb2xlLmxvZyh0cmVlRGF0YSk7XHJcbiAgICAgICAgICAgbGV0IG5vZGVzID0gZDMuaGllcmFyY2h5KHRyZWVEYXRhLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgIHJldHVybiBkLmNoaWxkcmVuO1xyXG4gICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgIGxldCBtYXJnaW4gPSAyMCxcclxuICAgICAgICAgICAgICAgd2lkdGggPSA1MDAwLFxyXG4gICAgICAgICAgICAgICBoZWlnaHQgPSA1MDAwO1xyXG5cclxuICAgICAgICAgICAvLyBkMyB0cmVlXHJcbiAgICAgICAgICAgbGV0IHRyZWVtYXAgPSBkMy50cmVlKCkgLy9kMy5jbHVzdGVyKClcclxuICAgICAgICAgICAgICAgLnNpemUoWyhoZWlnaHQgLSAxMCAqIG1hcmdpbiksICh3aWR0aCAtIDEwICogbWFyZ2luKV0pO1xyXG4gICAgICAgICAgIG5vZGVzID0gdHJlZW1hcChub2Rlcyk7XHJcbiAgICAgICAgICAgbGV0IHJvb3QgPSBub2Rlc1snY2hpbGRyZW4nXVswXTtcclxuICAgICAgICAgICBpZiAoc2hvd05ldHdvcmtIaWVyYXJjaHkgPT09IGhpZXJhcmNoeUlkc1tpXSkge1xyXG4gICAgICAgICAgICAgICBuZXR3b3JrSGllcmFyY2h5SWRzID0gdGhpcy5nZXRIaWVyYXJjaHlMZXZlbChyb290LCBoaWVyYXJjaHlJZHNbaV0pO1xyXG4gICAgICAgICAgIH1cclxuICAgICAgICAgICAvLyBhZGQgdGhlIHZlcnRpY2VzIGludG8gdGhlIGFycmF5XHJcbiAgICAgICAgICAgaGllcmFyY2h5VmVydGljZXMucHVzaCh0aGlzLmdldEhpZXJhcmNoeVZlcnRpY2VzKHRoaXMuZ2V0SGllcmFyY2h5TGV2ZWwocm9vdCwgaGllcmFyY2h5SWRzW2ldKSkpO1xyXG4gICAgICAgfVxyXG5cclxuICAgICAgIC8vIGlmIG1vcmUgdGhhbiAyIGhpZXJhcmNoaWVzIGFyZSBkcmF3blxyXG4gICAgICAgaWYgKGhpZXJhcmNoeVZlcnRpY2VzLmxlbmd0aCA+IDApIHtcclxuXHJcbiAgICAgICB9XHJcbiAgICAgICAvL2NvbnNvbGUubG9nKGhpZXJhcmNoeVZlcnRpY2VzKTtcclxuICAgICAgIHRoaXMuc3BhdGlhbFZpZXcgPSBkMy5zZWxlY3QoJy50YW5rJyk7XHJcbiAgICAgICAvLyBEQVRBIEpvaW5cclxuICAgICAgIGxldCBoaWVyYXJjaGllcyA9IHRoaXMuc3BhdGlhbFZpZXdcclxuICAgICAgICAgICAuc2VsZWN0QWxsKCdnLmhpZXJhcmNoeS1ncm91cCcpXHJcbiAgICAgICAgICAgLmRhdGEoaGllcmFyY2h5VmVydGljZXMpO1xyXG4gICAgICAgLy9jb25zb2xlLmxvZyhoaWVyYXJjaHlJZHMpO1xyXG4gICAgICAgLy8gRU5URVIgdGhlIGdyb3VwcyAtIGFkZHMgYSBzcGVjaWZpYyBpZCBhbmQgY29sb3JcclxuICAgICAgIGhpZXJhcmNoaWVzXHJcbiAgICAgICAgICAgLmVudGVyKClcclxuICAgICAgICAgICAuYXBwZW5kKCdnJylcclxuICAgICAgICAgICAuYXR0cignY2xhc3MnLCBmdW5jdGlvbihkLCBpKSB7XHJcbiAgICAgICAgICAgICAgIGlmIChzZXRPcGVyYXRpb24gPT09ICdpbnRlcnNlY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2hpZXJhcmNoeS1ncm91cCBpbnRlcnNlY3Rpb24nO1xyXG4gICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNldE9wZXJhdGlvbiA9PT0gJ3N5bS1kaWZmZXJlbmNlJykge1xyXG4gICAgICAgICAgICAgICAgICAgcmV0dXJuICdoaWVyYXJjaHktZ3JvdXAgc3ltLWRpZmZlcmVuY2UnO1xyXG4gICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgcmV0dXJuICdoaWVyYXJjaHktZ3JvdXAgaCcgKyBoaWVyYXJjaHlJZHNbaV07XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICB9KVxyXG4gICAgICAgICAgIC5zdHlsZSgnZmlsbCcsIChkLCBpKT0+e1xyXG4gICAgICAgICAgICAgICByZXR1cm4gdGhpcy5oaWVyYXJjaHlDb2xvcnNbJ2gnICsgaGllcmFyY2h5SWRzW2ldXTtcclxuICAgICAgICAgICB9KVxyXG4gICAgICAgICAgIC5hdHRyKCdzdHJva2UnLCAoZCwgaSk9PntcclxuICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGllcmFyY2h5Q29sb3JzWydoJyArIGhpZXJhcmNoeUlkc1tpXV07XHJcbiAgICAgICAgICAgfSlcclxuICAgICAgICAgICAubW92ZVRvQmFjaygpO1xyXG5cclxuICAgICAgIC8vIFVQREFURSAtIHRoZSBjbGFzcyBuZWVkZWQgZm9yIGludGVyc2VjdGlvbiBhbmQgc3ltbWV0cmljIGRpZmZlcmVuY2VcclxuICAgICAgIGhpZXJhcmNoaWVzLmF0dHIoJ2NsYXNzJywgZnVuY3Rpb24oZCwgaSkge1xyXG4gICAgICAgICAgIGlmIChzZXRPcGVyYXRpb24gPT09ICdpbnRlcnNlY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgIHJldHVybiAnaGllcmFyY2h5LWdyb3VwIGludGVyc2VjdGlvbic7XHJcbiAgICAgICAgICAgfSBlbHNlIGlmIChzZXRPcGVyYXRpb24gPT09ICdzeW0tZGlmZmVyZW5jZScpIHtcclxuICAgICAgICAgICAgICAgcmV0dXJuICdoaWVyYXJjaHktZ3JvdXAgc3ltLWRpZmZlcmVuY2UnO1xyXG4gICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgIHJldHVybiAnaGllcmFyY2h5LWdyb3VwIGgnICsgaGllcmFyY2h5SWRzW2ldO1xyXG4gICAgICAgICAgIH1cclxuICAgICAgIH0pO1xyXG5cclxuICAgICAgIC8vIEVYSVRcclxuICAgICAgIGhpZXJhcmNoaWVzLmV4aXQoKVxyXG4gICAgICAgICAgIC5yZW1vdmUoKTtcclxuXHJcbiAgICAgICAvLyBIaWVyYWNoeSBodWxscyBhZGRlZCB0byB0aGUgc3BhdGlhbCB2aWV3IC0gZ2V0IHRoZSBwb2ludHMgZm9yIGVhY2ggYW5pbWFsIGluIHRoZVxyXG4gICAgICAgLy8gc3BhdGlhbCB2aWV3IHNvIHRoYXQgYSBjb252ZXggaHVsbCBjYW4gYmUgY2FsY3VsYXRlZFxyXG4gICAgICAgbGV0IGhpZXJhcnlIdWxscyA9IGhpZXJhcmNoaWVzLnNlbGVjdEFsbCgncGF0aC5oaWVyYXJjaHktaHVsbC1wYXRoJylcclxuICAgICAgICAgICAuZGF0YShmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgIHJldHVybiBkO1xyXG4gICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgIC8vIEVOVEVSIGFuZCBjYWxjdWxhdGUgdGhlIGNvbnZleCBodWxsXHJcbiAgICAgICBoaWVyYXJ5SHVsbHNcclxuICAgICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgIC5hcHBlbmQoJ3BhdGgnKVxyXG4gICAgICAgICAgIC8vIC5hdHRyKCdpZCcsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAvLyAgICAgcmV0dXJuICdocCcgKyBkLmpvaW4oJycpLnJlcGxhY2UoLywvZywgJycpO1xyXG4gICAgICAgICAgIC8vIH0pXHJcbiAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2hpZXJhcmNoeS1odWxsLXBhdGgnKVxyXG4gICAgICAgICAgIC5hdHRyKCdkJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAvLyByZXR1cm4gZHJhd0xpbmUoZCk7XHJcbiAgICAgICAgICAgICAgIHJldHVybiAnTScgKyBkLmpvaW4oJ0wnKSArICdaJztcclxuICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAvLyBVUERBVEUgdGhlIGNvbnZleCBodWxsXHJcbiAgICAgICBoaWVyYXJ5SHVsbHNcclxuICAgICAgICAgICAuYXR0cignZCcsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgLy8gcmV0dXJuIGRyYXdMaW5lKGQpO1xyXG4gICAgICAgICAgICAgICByZXR1cm4gJ00nICsgZC5qb2luKCdMJykgKyAnWic7XHJcbiAgICAgICAgICAgfSk7XHJcbiAgICAgICAvLyAuYXR0cignaWQnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAvLyByZXR1cm4gJ2hwJyArIGQuam9pbignJykucmVwbGFjZSgvLC9nLCAnJyk7XHJcbiAgICAgICAvLyB9KTtcclxuICAgICAgIC8vIEVYSVRcclxuICAgICAgIGhpZXJhcnlIdWxscy5leGl0KClcclxuICAgICAgICAgICAucmVtb3ZlKCk7XHJcblxyXG4gICB9XHJcbiAgIGFkZEhpZ2hsaWdodFNwYXRpYWxWaWV3KGFuaW1hbHMpIHtcclxuICAgICAgIGNvbnNvbGUubG9nKCdoaWdobGlnaHRzJyk7XHJcbiAgICAgICAvLyBwb2ludHMgdG8gY2FsY3VsYXRlIHRoZSBjb252ZXggaHVsbCBvZiB0aGUgaGlnaGxpZ2h0IGNsdXN0ZXJcclxuICAgICAgIGxldCB2ZXJ0aWNlcyA9IFtdO1xyXG4gICAgICAgLy8gaXRlcmF0ZSB0aHJvdWdoIHRoZSBvYmplY3RzIGluIHRoZSBjbHVzdGVyXHJcbiAgICAgICAvLyBnZXQgdGhlIHBvaW50cyBhbmQgaGlnaGxpZ2h0IHRoZSBhbmltYWxzXHJcbiAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFuaW1hbHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICBsZXQgdG1wQW5pbWFsID0gdGhpcy5zcGF0aWFsVmlldy5zZWxlY3QoJyNhbmltYWwtJyArIGFuaW1hbHNbaV0pO1xyXG4gICAgICAgICAgIGxldCBwb2ludCA9IHRtcEFuaW1hbC5kYXRhKClbMF1bJ3AnXTtcclxuICAgICAgICAgICB2ZXJ0aWNlcy5wdXNoKFtwb2ludFswXSwgLXBvaW50WzFdXSk7XHJcblxyXG4gICAgICAgICAgIHRtcEFuaW1hbC5jbGFzc2VkKCdhbmltYWwtaGlnaGxpZ2h0JywgdHJ1ZSk7XHJcbiAgICAgICB9XHJcbiAgICAgICAvLyBhZGQgYSBwb2x5Z29uIGh1bGwgaW4gdGhlIHNwYXRpYWwgdmlld1xyXG4gICAgICAgdGhpcy5zcGF0aWFsVmlldy5hcHBlbmQoJ3BhdGgnKVxyXG4gICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdoaWdobGlnaHQtaGllcmFyY2h5JylcclxuICAgICAgICAgICAuYXR0cignZCcsICgnTScgKyBkMy5wb2x5Z29uSHVsbCh2ZXJ0aWNlcykuam9pbignTCcpICsgJ1onKSk7XHJcbiAgIH1cclxuXHJcbiAgIHJlbW92ZUhpZ2hsaWdodFNwYXRpYWxWaWV3KCkge1xyXG4gICAgICAgLy8gcmVtb3ZlIHRoZSBjb2xvcmluZyBhbmQgdGhlIGhpZXJhcmNoeSBoaWdobGlnaHQgaHVsbFxyXG4gICAgICAgZDMuc2VsZWN0QWxsKCcuYW5pbWFsJykuY2xhc3NlZCgnYW5pbWFsLWhpZ2hsaWdodCcsIGZhbHNlKTtcclxuICAgICAgIGQzLnNlbGVjdEFsbCgnLmhpZ2hsaWdodC1oaWVyYXJjaHknKS5yZW1vdmUoKTtcclxuICAgfVxyXG4gICBkcmF3RGVuZHJvZ3JhbSgpIHtcclxuXHJcblxyXG4gICAgICAgICB2YXIgY29sbGFwc2UgPSAoZCk9PntcclxuICAgICAgICAgIC8vY29uc29sZS5sb2codGhpcy5oaWVyYXJjaHlMZXZlbHMpO1xyXG4gICAgICAgICAgLy9jb25zb2xlLmxvZyhkLmNoaWxkcmVuKTtcclxuICAgICAgICAgIC8vaWYgKGQuY2hpbGRyZW4gJiYgZC5kZXB0aCA8PSB0aGlzLmhpZXJhcmNoeUxldmVsc1snaCcgKyB0aGlzLmlkXSlcclxuICAgICAgICAgIGlmIChkLmNoaWxkcmVuICYmIGQuZGVwdGggPD0gMikge1xyXG4gICAgICAgICAgICAgIGQuX2NoaWxkcmVuID0gZC5jaGlsZHJlbjtcclxuICAgICAgICAgICAgICBkLl9jaGlsZHJlbi5mb3JFYWNoKGNvbGxhcHNlKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgZC5jaGlsZHJlbiA9IDA7XHJcbiAgICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgICAgLy8gZ2V0IHRoZSBhY3RpdmUgZGVuZHJvZ3JhbVxyXG4gICAgICAgbGV0IGlkID0gJCgnLnNob3ctZGVuZHJvZ3JhbS5idG4tcHJpbWFyeScpLmF0dHIoJ2RhdGEnKTtcclxuICAgICAgIC8vIGlmIGRhdGEgaXMgYXZhaWFibGUgZHJhdyBoaWVyYXJjaHkgY2x1c3RlcnMgYW5kIGEgYnV0dG9uIGlzIGFjdGl2ZSBzZWxjdGVkXHJcbiAgICAgICBpZiAoISQuaXNFbXB0eU9iamVjdCh0aGlzLm5ldHdvcmtIaWVyYXJjaHkpICYmIGlkKSB7XHJcbiAgICAgICAgICAgLy8gZ2V0IHRoZSBkYXRhIGFuZCB0cmFuc2Zvcm0gaXRcclxuICAgICAgICAgICBsZXQgdHJlZURhdGEgPSB0aGlzLm5ldHdvcmtIaWVyYXJjaHlbJ2gnICsgaWRdW3RoaXMuaW5kZXhUaW1lXTtcclxuXHJcbiAgICAgICAgICAgbGV0IG5vZGVzID0gZDMuaGllcmFyY2h5KHRyZWVEYXRhLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgIHJldHVybiBkLmNoaWxkcmVuO1xyXG4gICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgIC8vIHNraXAgdGhlIHJvb3Qgbm9kZVxyXG4gICAgICAgICAgIG5vZGVzID0gbm9kZXMuY2hpbGRyZW5bMF07XHJcbiAgICAgICAgICAgLy8gY29sbGFwc2UgdGhlIHRyZWVcclxuICAgICAgICAgICBub2Rlcy5jaGlsZHJlbi5mb3JFYWNoKGNvbGxhcHNlKTtcclxuXHJcbiAgICAgICAgICAgbGV0IG1hcmdpbiA9IDIwLFxyXG4gICAgICAgICAgICAgICB3aWR0aCA9IDUwMDAsXHJcbiAgICAgICAgICAgICAgIGhlaWdodCA9IDUwMDA7XHJcblxyXG4gICAgICAgICAgIC8vIGQzIHRyZWVcclxuICAgICAgICAgICBsZXQgdHJlZW1hcCA9IGQzLnRyZWUoKSAvL2QzLmNsdXN0ZXIoKVxyXG4gICAgICAgICAgICAgICAuc2l6ZShbKGhlaWdodCAtIDEwICogbWFyZ2luKSwgKHdpZHRoIC0gMTAgKiBtYXJnaW4pXSk7XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgLy8gbWFwcyB0aGUgbm9kZSBkYXRhIHRvIHRoZSB0cmVlIGxheW91dFxyXG4gICAgICAgICAgIG5vZGVzID0gdHJlZW1hcChub2Rlcyk7XHJcbiAgICAgICAgICAgLy9jb25zb2xlLmxvZyhub2Rlcyk7XHJcblxyXG4gICAgICAgICAgIC8vIGhpZGUgaWYgbm8gbmV0d29yayBpcyBjaG9vc2VuXHJcbiAgICAgICAgICAgaWYgKCQoJy5zaG93LWRlbmRyb2dyYW0uYnRuLXByaW1hcnknKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGhpZXJhcmNoeUxldmVscyk7XHJcbiAgICAgICAgICAgICAgIC8vIHNldCB0aGUgbmV3IHNsaWRlciBtYXhcclxuICAgICAgICAgICAgICAgJCgnI2RlbmRyb2dyYW0tcGFuZWwtbGV2ZWwtc2xpZGVyJylcclxuICAgICAgICAgICAgICAgICAgIC5zbGlkZXIoJ29wdGlvbicsICdtYXgnLCAobm9kZXNbJ2hlaWdodCddIC0gMSkpXHJcbiAgICAgICAgICAgICAgICAgICAuc2xpZGVyKCd2YWx1ZScsIHRoaXMuaGllcmFyY2h5TGV2ZWxzWydoJyArIGlkXSk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyBEQVRBIEpPSU4gLSBsaW5rcyAoZWRnZXMpXHJcbiAgICAgICAgICAgICAgIGxldCBsaW5rID0gdGhpcy5kZW5kcm96b29tXHJcbiAgICAgICAgICAgICAgICAgICAuc2VsZWN0QWxsKCdwYXRoLmxpbmsnKVxyXG4gICAgICAgICAgICAgICAgICAgLmRhdGEobm9kZXMuZGVzY2VuZGFudHMoKS5zbGljZSgxKSk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyBFTlRFUlxyXG4gICAgICAgICAgICAgICBsaW5rXHJcbiAgICAgICAgICAgICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgICAgICAgICAgLmFwcGVuZCgncGF0aCcpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGluaycpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignZCcsIGRpYWdvbmFsTGluZXMpO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gVHJhbnNpdGlvbiBsaW5rcyB0byB0aGVpciBuZXcgcG9zaXRpb24uXHJcbiAgICAgICAgICAgICAgIGxpbmtcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdkJywgZGlhZ29uYWxMaW5lcyk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyBFWElUXHJcbiAgICAgICAgICAgICAgIGxpbmsuZXhpdCgpXHJcbiAgICAgICAgICAgICAgICAgICAucmVtb3ZlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyBEQVRBIEpPSU4gLSBub2Rlc1xyXG4gICAgICAgICAgICAgICAvLyBhZGRzIGVhY2ggbm9kZSBhcyBhIGdyb3VwXHJcbiAgICAgICAgICAgICAgIGxldCBub2RlID0gdGhpcy5kZW5kcm96b29tXHJcbiAgICAgICAgICAgICAgICAgICAuc2VsZWN0QWxsKCcubm9kZScpXHJcbiAgICAgICAgICAgICAgICAgICAuZGF0YShub2Rlcy5kZXNjZW5kYW50cygpKTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIGFkZCB0aGUgZ3JvdXBzIHRvIHRoZSBkZW5kZ3JvZ3JhbVxyXG4gICAgICAgICAgICAgICB2YXIgbm9kZUVudGVyID0gbm9kZS5lbnRlcigpXHJcbiAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCdnJylcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ25vZGUnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgKGQuY2hpbGRyZW4gPyAnIG5vZGUtLWludGVybmFsJyA6ICcgbm9kZS0tbGVhZicpO1xyXG4gICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoJyArIGQueCArICcsJyArIGQueSArICcpJztcclxuICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gRU5URVIgLSBhcHBlbmQgZm9yIGVhY2ggZ3JvdXAgYSBub2RlIChjaXJjbGUpXHJcbiAgICAgICAgICAgICAgIC8vIHdpdGggaGlnaGxpZ2h0aW5nIGZvciB0aGUgYWN0aXZlIGNob29zZW4gbGV2ZWxcclxuICAgICAgICAgICAgICAgbm9kZUVudGVyLmFwcGVuZCgnY2lyY2xlJylcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdyJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRbJ2RlcHRoJ10gPT09IHRoaXMuaGllcmFyY2h5TGV2ZWxzWydoJyArIGlkXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gNDAgKyBkLmRhdGEubmFtZS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDIwICsgZC5kYXRhLm5hbWUubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICBpZiAoZFsnZGVwdGgnXSA9PT0gdGhpcy5oaWVyYXJjaHlMZXZlbHNbJ2gnICsgaWRdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnYWN0aXZlLWxldmVsJztcclxuICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2lkJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdoJyArIGRbJ2RhdGEnXVsnbmFtZSddLnRvU3RyaW5nKCkuaGFzaENvZGUoKTtcclxuICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAvLyBUT0RPIGZpbmQgYSBuaWNlIGZ1bmN0aW9uIGZvciB0aGUgb24gY2xpY2sgbWV0aG9kXHJcbiAgICAgICAgICAgICAgICAgICAub24oJ2NsaWNrJywgdGhpcy5jbGljaylcclxuICAgICAgICAgICAgICAgICAgIC5vbignbW91c2VvdmVyJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgLy8gdG9vbHRpcCBwb3NpdGlvbiBhbmQgdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXBEaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdsZWZ0JywgKGQzLmV2ZW50LnBhZ2VYICsgNSkgKyAncHgnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ3RvcCcsIChkMy5ldmVudC5wYWdlWSArIDUpICsgJ3B4JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgdG9vbHRpcERpdi5zZWxlY3QoJy50b29sdGlwLXNwYW4nKS5odG1sKGRbJ2RhdGEnXVsnbmFtZSddLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCBoaWdobGlnaHQgaW4gdGhlIHNwYXRpYWwgdmlld1xyXG4gICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSB1bmRpb24gb2YgdGhlIHBhdGhzIG1ha2VzIHRoaXMgY29tcGxpY2F0ZWRcclxuICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEhpZ2hsaWdodFNwYXRpYWxWaWV3KGRbJ2RhdGEnXVsnbmFtZSddKTtcclxuICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAub24oJ21vdXNlb3V0JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgdG9vbHRpcERpdi50cmFuc2l0aW9uKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLmR1cmF0aW9uKDUwMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGhpZ2hsaWdodCBpbiB0aGUgc3BhdGlhbCB2aWV3XHJcbiAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVIaWdobGlnaHRTcGF0aWFsVmlldygpO1xyXG4gICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyBhZGQgdGhlIHRleHQgLSAjIG51bWJlciBvZiBhbmltYWxzIGluIHRoZSBjbHVzdGVyXHJcbiAgICAgICAgICAgICAgIG5vZGVFbnRlci5hcHBlbmQoJ3RleHQnKVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2RlbmRyb2dyYW0tdGV4dCcpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cigneCcsIDE1MClcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCd5JywgLTE1MClcclxuICAgICAgICAgICAgICAgICAgIC50ZXh0KChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLmRhdGEubmFtZS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIFVQREFURSAtLSB1cGRhdGUgdGhlIGdyb3Vwc1xyXG4gICAgICAgICAgICAgICBub2RlRW50ZXJcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgnICsgZC54ICsgJywnICsgZC55ICsgJyknO1xyXG4gICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyB1cGRhZSB0aGUgbm9kZSBhbmQgY2lyY2xlc1xyXG4gICAgICAgICAgICAgICAvLyB3aXRoIGFjdGl2ZS1sZXZlbCBmdW5jdGlvbiB0byBoaWdobGlnaHQgd2hpY2ggbGV2ZWwgaXMgY2hvc2VuXHJcbiAgICAgICAgICAgICAgIG5vZGVcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgnICsgZC54ICsgJywnICsgZC55ICsgJyknO1xyXG4gICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgIC5zZWxlY3QoJ2NpcmNsZScpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cigncicsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGlmIChkWydkZXB0aCddID09PSB0aGlzLmhpZXJhcmNoeUxldmVsc1snaCcgK2lkXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gNDAgKyBkLmRhdGEubmFtZS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDIwICsgZC5kYXRhLm5hbWUubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAoZCk9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRbJ2RlcHRoJ10gPT09IHRoaXMuaGllcmFyY2h5TGV2ZWxzWydoJyArIGlkXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnYWN0aXZlLWxldmVsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCgnaCcgKyBkWydkYXRhJ11bJ25hbWUnXS50b1N0cmluZygpLmhhc2hDb2RlKCkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdhY3RpdmUtbGV2ZWwnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2lkJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdoJyArIGRbJ2RhdGEnXVsnbmFtZSddLnRvU3RyaW5nKCkuaGFzaENvZGUoKTtcclxuICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSB0ZXh0IG9mIG51bWJlciBvZiBlbnRpdGllc1xyXG4gICAgICAgICAgICAgICBub2RlLnNlbGVjdCgndGV4dCcpXHJcbiAgICAgICAgICAgICAgICAgICAudGV4dCgoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5kYXRhLm5hbWUubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyBFWElUXHJcbiAgICAgICAgICAgICAgIG5vZGUuZXhpdCgpXHJcbiAgICAgICAgICAgICAgICAgICAucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhoaWVyYXJjaHlHcm91cFN0ZGV2KTtcclxuICAgICAgICAgICAgICAgLy8gY29sb3IgdGhlIGRlbmRyb2dyYW0gbm9kZXMgdXNpbmcgdGhlIHN0YW5kYXJkRGV2aWF0aW9uIGluIHRoZSBjbHVzdGVyXHJcbiAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLmhpZXJhcmNoeUdyb3VwU3RkZXYpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3J1bnMnKTtcclxuICAgICAgICAgICAgICAgICAgIC8vIHNob3cgdGhlIGxlZ2VuZCBmb3IgdGhlIGNvbG9yaW5nXHJcbiAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhoaWVyYXJjaHlHcm91cFN0ZGV2KTtcclxuICAgICAgICAgICAgICAgICAgIC8vIFRPRE8gbGVnZW5kIGhlcmVcclxuICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdKVU1QUyBIRVJFJyk7XHJcbiAgICAgICAgICAgICAgICAgICBpZiAoJCgnI2RlbmRyb2dyYW0tbGVnZW5kJykuY3NzKCdkaXNwbGF5JykgPT0gJ25vbmUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgJCgnI2RlbmRyb2dyYW0tbGVnZW5kJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgLy8gSU1QT1JUQU5UIC0gYXN5bmMgcHJvYmxlbXNcclxuICAgICAgICAgICAgICAgICAgIC8vIFRPRE8gc29sdmUgdGhpcyAtIHZlcnkgc2xvd1xyXG4gICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIG5vZGUuc2VsZWN0KCdjaXJjbGUnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ2ZpbGwnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhoaWVyYXJjaHlHcm91cFN0ZGV2KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCgnaCcgKyBkWydkYXRhJ11bJ25hbWUnXS50b1N0cmluZygpLmhhc2hDb2RlKCkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCgnaCcgKyBkWydkYXRhJ11bJ25hbWUnXS50b1N0cmluZygpLmhhc2hDb2RlKCkpIGluIGhpZXJhcmNoeUdyb3VwU3RkZXYpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb2xvciB0aGUgbm9kZXMgYnkgY2FsY3VsYXRpbmcgdGhlIHN0YW5kYXJkRGV2aWF0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmb3IgZWFjaCBjbHVzdGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvbmx5IGFjdGl2ZSBpcyBzaG93IGluIGNsdXN0ZXIgaXMgY2hvb3NlblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCgnaCcgKyBkWydkYXRhJ11bJ25hbWUnXS50b1N0cmluZygpLmhhc2hDb2RlKCkpIGluIGhpZXJhcmNoeUdyb3VwU3RkZXYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnaGVsbG8nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhzdGFuZGFyZERldmlhdGlvbihoaWVyYXJjaHlHcm91cFN0ZGV2WygnaCcgKyBkWydkYXRhJ11bJ25hbWUnXS50b1N0cmluZygpLmhhc2hDb2RlKCkpXSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdGFuZGFyZERldmlhdGlvbkNvbG9yU2NhbGUoc3RhbmRhcmREZXZpYXRpb24oaGllcmFyY2h5R3JvdXBTdGRldlsoJ2gnICsgZFsnZGF0YSddWyduYW1lJ10udG9TdHJpbmcoKS5oYXNoQ29kZSgpKV0pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZFsnZGVwdGgnXSAhPT0gaGllcmFyY2h5TGV2ZWxzWydoJyArdGhpcy5pZF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnIzAwMCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgfSwgMjUwKTtcclxuICAgICAgICAgICAgICAgfSBlbHNlIGlmICgkKCcjZGVuZHJvZ3JhbS1sZWdlbmQnKS5jc3MoJ2Rpc3BsYXknKSAhPT0gJ25vbmUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAkKCcjZGVuZHJvZ3JhbS1sZWdlbmQnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICB9XHJcbiAgICAgICB9XHJcbiAgICAgICBpZiAoISQuaXNFbXB0eU9iamVjdCh0aGlzLm5ldHdvcmtIaWVyYXJjaHkpKSB7XHJcbiAgICAgICAgICAgLy8gZHJhdyB0aGUgaGllcmFyY2h5IGluIHNwYXRpYWwgdmlld1xyXG4gICAgICAgICAgIHRoaXMuZHJhd0hpZXJhcmNoeSgpO1xyXG4gICAgICAgfVxyXG4gICAgICAgLy90aGlzLmRyYXdIaWVyYXJjaHkoKTtcclxuICAgfVxyXG5cclxuICAgY2hhbmdlSGllcmFyY2h5TGVnZW5kKCkge1xyXG4gICAgICAgbGV0IGxlZ2VuZDsgLy8gdGhlIGNvbG9yIGxlZ2VuZFxyXG4gICAgICAgbGV0IGxlZ2VuZFRleHQ7IC8vIGNvbG9yIGxlZ2VuZCB0ZXh0XHJcbiAgICAgICAvLyB2YXJzIGZvciB0aGUgbGVnZW5kXHJcbiAgICAgICBsZXQgbGVnZW5kU3dhdGNoV2lkdGggPSA1MDtcclxuICAgICAgIGxldCBsZWdlbmRTd2F0Y2hIZWlnaHQgPSAyMDtcclxuICAgICAgIGNvbnNvbGUubG9nKE9iamVjdC5rZXlzKHRoaXMuaGllcmFyY2h5Q29sb3JzKS5sZW5ndGgpO1xyXG4gICAgICAgLy8gU2hvdyBvciBoaWRlIHRoZSBzdmcgZWxlbWVudFxyXG4gICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMuaGllcmFyY2h5Q29sb3JzKS5sZW5ndGggIT09IDAgfHwgT2JqZWN0LmtleXModGhpcy5uZXR3b3JrQ29sb3IpLmxlbmd0aCAhPT0gMCkge1xyXG4gICAgICAgICAgIGNvbnNvbGUubG9nKCdhcHBseXMnKTtcclxuICAgICAgICAgICAkKCcjaGllcmFyY2h5LWxlZ2VuZC1kaXYnKS5zaG93KCk7XHJcbiAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICQoJyNoaWVyYXJjaHktbGVnZW5kLWRpdicpLmhpZGUoKTtcclxuICAgICAgIH1cclxuXHJcbiAgICAgICBsZXQgbGVnZW5kRGF0YSA9IFtdO1xyXG4gICAgICAgbGV0IGxlZ2VuZFRleHREYXRhID0gW107XHJcbiAgICAgICAvLyBnZXQgdGhlIHJlcXVpcmVkIGRhdGFcclxuICAgICAgICQoJy5zaG93LWRlbmRyb2dyYW0nKS5lYWNoKChpLCBvYmopPT57XHJcbiAgICAgICAgICAgLy8gY2hlY2sgaWYgZGF0YSBpcyBub3QgdW5kZWZpbmVkXHJcbiAgICAgICAgICAgaWYgKHRoaXMuaGllcmFyY2h5Q29sb3JzWydoJyArICQob2JqKS5hdHRyKCdkYXRhJyldICE9IG51bGwgJiYgJChvYmopLmF0dHIoJ25hbWUnKSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgIGxlZ2VuZERhdGEucHVzaCh0aGlzLmhpZXJhcmNoeUNvbG9yc1snaCcgKyAkKG9iaikuYXR0cignZGF0YScpXSk7XHJcbiAgICAgICAgICAgICAgIGxlZ2VuZFRleHREYXRhLnB1c2goJChvYmopLmF0dHIoJ25hbWUnKSk7XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgfSk7XHJcbiAgICAgICAvLyBhZGQgdGhlIG5ldHdvcmsgY29sb3JcclxuICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLm5ldHdvcmtDb2xvcikubGVuZ3RoICE9PSAwKSB7XHJcbiAgICAgICAgICAgZm9yIChsZXQga2V5IGluIHRoaXMubmV0d29ya0NvbG9yKSB7XHJcbiAgICAgICAgICAgICAgIGlmIChsZWdlbmREYXRhLmluZGV4T2YodGhpcy5uZXR3b3JrQ29sb3Jba2V5XSkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICBsZWdlbmREYXRhLnB1c2godGhpcy5uZXR3b3JrQ29sb3Jba2V5XSk7XHJcbiAgICAgICAgICAgICAgICAgICBsZWdlbmRUZXh0RGF0YS5wdXNoKCdOZXR3b3JrJyk7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICB9XHJcbiAgICAgICB9XHJcbiAgICAgICAvLyBEQVRBIEpPSU5cclxuICAgICAgIGxlZ2VuZCA9IHRoaXMuc3ZnTGVnZW5kX25ldHcuc2VsZWN0QWxsKCdyZWN0LmxlZ2VuZCcpXHJcbiAgICAgICAgICAgLmRhdGEobGVnZW5kRGF0YSk7XHJcbiAgICAgICBsZWdlbmRUZXh0ID0gdGhpcy5zdmdMZWdlbmRfbmV0dy5zZWxlY3RBbGwoJ3RleHQubGVnZW5kLXRleHQnKVxyXG4gICAgICAgICAgIC5kYXRhKGxlZ2VuZFRleHREYXRhKTtcclxuXHJcbiAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0gTGVnZW5kIHN3YXRjaGVzICAtLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAvLyBVUERBVEUgLSBsZWdlbmRcclxuICAgICAgIGxlZ2VuZC5zdHlsZSgnZmlsbCcsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgIH0pO1xyXG4gICAgICAgLy8gRU5URVIgLSBsZWdlbmRcclxuICAgICAgIGxlZ2VuZFxyXG4gICAgICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgICAgLmFwcGVuZCgncmVjdCcpXHJcbiAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xlZ2VuZCcpXHJcbiAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgbGVnZW5kU3dhdGNoV2lkdGgpXHJcbiAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGxlZ2VuZFN3YXRjaEhlaWdodClcclxuICAgICAgICAgICAuYXR0cigneScsIDApXHJcbiAgICAgICAgICAgLmF0dHIoJ3gnLCBmdW5jdGlvbihkLCBpKSB7XHJcbiAgICAgICAgICAgICAgIHJldHVybiAobGVnZW5kU3dhdGNoV2lkdGggKyAyLjUgKiBpICogbGVnZW5kU3dhdGNoV2lkdGgpICsgJ3B4JztcclxuICAgICAgICAgICB9KVxyXG4gICAgICAgICAgIC5zdHlsZSgnZmlsbCcsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICAgICAgICAgfSk7XHJcbiAgICAgICAvLyBFWElUIC0gbGVnZW5kXHJcbiAgICAgICBsZWdlbmQuZXhpdCgpXHJcbiAgICAgICAgICAgLnJlbW92ZSgpO1xyXG5cclxuICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLSBUZXh0ICAtLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAvLyBVUERBVEUgLSBsZWdlbmQgdGV4dFxyXG4gICAgICAgbGVnZW5kVGV4dC50ZXh0KGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgIH0pO1xyXG4gICAgICAgLy8gRU5URVIgLSBsZWdlbmQgdGV4dFxyXG4gICAgICAgbGVnZW5kVGV4dFxyXG4gICAgICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgICAgLmFwcGVuZCgndGV4dCcpXHJcbiAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xlZ2VuZC10ZXh0JylcclxuICAgICAgICAgICAuYXR0cigneScsIDIgKiBsZWdlbmRTd2F0Y2hIZWlnaHQpXHJcbiAgICAgICAgICAgLmF0dHIoJ3gnLCBmdW5jdGlvbihkLCBpKSB7XHJcbiAgICAgICAgICAgICAgIHJldHVybiAobGVnZW5kU3dhdGNoV2lkdGggKyAyLjUgKiBpICogbGVnZW5kU3dhdGNoV2lkdGgpICsgJ3B4JztcclxuICAgICAgICAgICB9KVxyXG4gICAgICAgICAgIC50ZXh0KGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgLy8gRVhJVCAtIGxlZ2VuZCB0ZXh0XHJcbiAgICAgICBsZWdlbmRUZXh0LmV4aXQoKVxyXG4gICAgICAgICAgIC5yZW1vdmUoKTtcclxuXHJcbiAgIH1cclxuXHJcblxyXG4gICBzZXRuZXR3b3JrQ29sb3IobmV0d29ya19pZCkge1xyXG4gICAgICAgLy8gaWYgaWQgPSAtMSBzZXQgdGhlIGNvbG9yIHRvIG5vdGhpbmdcclxuICAgICAgIGlmIChuZXR3b3JrX2lkID49IDApIHtcclxuICAgICAgICAgICB0aGlzLm5ldHdvcmtDb2xvclsnaCcgKyBuZXR3b3JrX2lkXSA9ICcjMDgzMDZiJztcclxuICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgY29uc29sZS5sb2coJ2NvbG9yIG5vdGhpbmcnKTtcclxuICAgICAgICAgICB0aGlzLm5ldHdvcmtDb2xvciA9IHt9O1xyXG4gICAgICAgfVxyXG4gICAgICAgdGhpcy5jaGFuZ2VIaWVyYXJjaHlMZWdlbmQoKTtcclxuICAgfVxyXG5cclxuICAgc2V0SGllcmFyY2h5RGF0YSh2YWx1ZSwgbmV0d29ya19pZCkge1xyXG4gICAgICAgLy8gaWYgdGhlIGVsZW1lbnQgaXMgZW1wdHkgcmVtb3ZlIHRoZSBlbGVtZW50IGZyb20gdGhlIG5ldHdyb2tIaWVyYXJjaHkgb2JqZWN0XHJcbiAgICAgICBpZiAoT2JqZWN0LmtleXModmFsdWUpLmxlbmd0aCA9PT0gMCAmJiB2YWx1ZS5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0KSB7XHJcbiAgICAgICAgICAgZGVsZXRlIHRoaXMubmV0d29ya0hpZXJhcmNoeVsnaCcgKyBuZXR3b3JrX2lkXTtcclxuICAgICAgICAgICB0aGlzLnJlbW92ZUhpZXJhcmNoeUxldmVsKG5ldHdvcmtfaWQpO1xyXG4gICAgICAgICAgIHRoaXMucmVtb3ZlSGllcmFyY2h5Q29sb3IobmV0d29ya19pZCk7XHJcbiAgICAgICB9IC8vIGFkZCBpdCB0byB0aGUgbmV0d29yayBoaWVyYXJjaHlcclxuICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgIHRoaXMubmV0d29ya0hpZXJhcmNoeVsnaCcgKyBuZXR3b3JrX2lkXSA9IHZhbHVlO1xyXG4gICAgICAgICAgdGhpcy5zZXRIaWVyYXJjaHlMZXZlbChuZXR3b3JrX2lkLCAyKTtcclxuICAgICAgICAgIHRoaXMuc2V0SGllcmFyY2h5Q29sb3IobmV0d29ya19pZCk7XHJcbiAgICAgICB9IC8vIHRvbyBtYW55IGVsZW1lbnRzIGNhbnQgYmUgYWRkZWRcclxuXHJcbiAgICAgICB0aGlzLmNoYW5nZUhpZXJhcmNoeUxlZ2VuZCgpO1xyXG4gICB9XHJcblxyXG4gICBnZXROZXR3b3JrSGllcmFyY2h5RGF0YShuZXR3b3JrX2lkKSB7XHJcbiAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgIHVybDogJy9hcGkvZGF0YXNldC9uZXR3b3JrL2hpZXJhcmNoeS8nICsgcGFyYW1ldGVyc1snaWQnXSArICcvJyArIG5ldHdvcmtfaWQsXHJcbiAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICAgICB0eXBlOiAnR0VUJyxcclxuICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxyXG4gICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgJ0FjY2VwdCc6IEpTT05BUElfTUlNRVRZUEVcclxuICAgICAgICAgICB9LFxyXG4gICAgICAgICAgIHN1Y2Nlc3M6IChkYXRhKT0+e1xyXG4gICAgICAgICAgICAgICBpZiAoZGF0YS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0SGllcmFyY2h5RGF0YShKU09OLnBhcnNlKGRhdGFbMF1bJ2hpZXJhcmNoeSddKSwgbmV0d29ya19pZCk7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgZW5hYmxlUGxheUJ1dHRvbigpO1xyXG4gICAgICAgICAgIH1cclxuICAgICAgIH0pO1xyXG4gICB9XHJcblxyXG5cclxuXHJcbiB9XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIFNwYXRpYWxWaWV3IGV4dGVuZHMgRHJhd2Vye1xyXG4gIGNvbnN0cnVjdG9yKGRhdGEpe1xyXG4gICAgc3VwZXIoZGF0YSk7XHJcblxyXG5cclxuICAgIHRoaXMuc3BhdGlhbFZpZXdJbml0KCk7XHJcbiAgICAvL3RoaXMuY3BfbGlzdGVuZXIoKTtcclxuICB9XHJcbiAgY3BfbGlzdGVuZXIoKSB7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogUGxheSBvciBzdG9wIHRoZSBhbmltYXRpb25cclxuICAgICAgICovXHJcbiAgICAgICQoJyNwbGF5LWJ1dHRvbicpLmNsaWNrKCgpPT57XHJcbiAgICAgICAgICBpZiAoJCgnI3BsYXktYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5wbGF5Qm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICQoJy5tZGktcGF1c2UnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgJCgnLm1kaS1wbGF5Jykuc2hvdygpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICB0aGlzLnBsYXlCb29sZWFuID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAkKCcubWRpLXBsYXknKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgJCgnLm1kaS1wYXVzZScpLnNob3coKTtcclxuICAgICAgICAgICAgICB0aGlzLnNldEluZGV4VGltZShzbGlkZXIuc2xpZGVyKCd2YWx1ZScpKTtcclxuICAgICAgICAgICAgICAkKCcuYnJ1c2gnKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICB0aGlzLmRyYXcoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogUGF1c2UgdGhlIGFuaW1hdGlvbiBhbmQgc2hvdyBvbmx5IHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjbmV4dC1mcmFtZS1idXR0b24nKS5jbGljaygoKT0+e1xyXG4gICAgICAgICAgaWYgKCQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgIHRoaXMucGxheUJvb2xlYW4gPSBmYWxzZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgICQoJyNwbGF5LWJ1dHRvbicpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBCcnVzaGluZyBidXR0b25cclxuICAgICAgICovXHJcbiAgICAgICQoJyNicnVzaGluZy1idXR0b24nKS5jbGljaygoKT0+e1xyXG4gICAgICAgICAgLy9zdG9wIHRoZSBhbmltYXRpb25cclxuXHJcbiAgICAgICAgICB0aGlzLnBsYXlCb29sZWFuID0gZmFsc2U7XHJcbiAgICAgICAgICAkKCcjcGxheS1idXR0b24nKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICBpZiAoISQoJyNicnVzaGluZy1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAvL2RlZmluZSB0aGUgYnJ1c2hcclxuICAgICAgICAgICAgICB0aGlzLmJydXNoID0gZDMuYnJ1c2goKVxyXG4gICAgICAgICAgICAgICAgICAuZXh0ZW50KFtcclxuICAgICAgICAgICAgICAgICAgICAgIFswLCAwXSxcclxuICAgICAgICAgICAgICAgICAgICAgIFt0aGlzLnRhbmtXaWR0aCwgdGhpcy50YW5rSGVpZ2h0XVxyXG4gICAgICAgICAgICAgICAgICBdKVxyXG4gICAgICAgICAgICAgICAgICAub24oJ2VuZCcsICgpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAvL2xldCBhcnJheUFuaW1hbHMgPSB0aGlzLmFycmF5QW5pbWFscztcclxuICAgICAgICAgICAgICAgICAgICAgICAgIC8vbGV0IGFjdGl2ZUFuaW1hbHMgPSB0aGlzLmFjdGl2ZUFuaW1hbHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVjdCA9IGQzLmV2ZW50LnNlbGVjdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlQW5pbWFscyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgIC8vaXRlcmF0ZSBvdmVyIHRoZSAxNTEgZmlzaCB0byBjaGVjayB3aGljaCBhcmUgaW4gdGhlIGJydXNoXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcnJheUFuaW1hbHMubWFwKChhbmltYWwpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb2ludCA9IFthbmltYWxbJ3AnXVswXSwgYW5pbWFsWydwJ11bMV1dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NoZWNrIHdoaWNoIGZpc2ggYXJlIGluICB0aGUgYnJ1c2hlZCBhcmVhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgocmVjdFswXVswXSA8PSBwb2ludFswXSkgJiYgKHBvaW50WzBdIDw9IHJlY3RbMV1bMF0pICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocmVjdFswXVsxXSA8PSBwb2ludFsxXSkgJiYgKHBvaW50WzFdIDw9IHJlY3RbMV1bMV0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQb2ludCBpcyBpbiB0aGUgYnJ1c2hcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlQW5pbWFscy5wdXNoKGFuaW1hbFsnYSddKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgIH19KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5hY3RpdmVBbmltYWxzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgIC8vc2V0QWN0aXZlQW5pbWFscyhhY3RpdmVBbmltYWxzKTtcclxuXHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhpcy5zZXRBY3RpdmVBbmltYWxzKHRoaXMuYWN0aXZlQW5pbWFscyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vZ28gYmFjayBvbmUgc2Vjb25kIGFuZCBkcmF3IHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhpcy5kZWNJbmRleFRpbWUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1NQVi5kcmF3KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjYnJ1c2hpbmctYnV0dG9uJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIHRoZSBicnVzaFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmJydXNoJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIC8vYWRkIHRoZSBicnVzaFxyXG4gICAgICAgICAgICAgIGQzLnNlbGVjdCgnI21haW4tdmlzLXN2ZycpXHJcbiAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnYnJ1c2gnKVxyXG4gICAgICAgICAgICAgICAgICAuY2FsbCh0aGlzLmJydXNoKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgLy8gcmVtb3ZlIHRoZSBicnVzaFxyXG4gICAgICAgICAgICAgICQoJy5icnVzaCcpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBVbnNlbGVjdCBhbGwgYnV0dG9uXHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjcmVtb3ZlLWFjdGl2ZS1zZWxlY3RlZC1idXR0b24nKS5jbGljaygoKT0+e1xyXG4gICAgICAgICAgaWYgKCEkKCcjcmVtb3ZlLWFjdGl2ZS1zZWxlY3RlZC1idXR0b24nKS5pcygnOmRpc2FibGVkJykpIHtcclxuICAgICAgICAgICAgICAkKCcjcmVtb3ZlLWFjdGl2ZS1zZWxlY3RlZC1idXR0b24nKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlQW5pbWFscyhbXSk7XHJcbiAgICAgICAgICAgICAgLy8gdHJhY2tpbmcgb2YgZGF0YSBmb3IgdmlzdWFsIHBhcmFtZXRlciBzdWdnZXN0aW9uXHJcbiAgICAgICAgICAgICAgcmVzZXRUcmFja2VkRGF0YSgpO1xyXG4gICAgICAgICAgICAgICQoJyN2aXN1YWwtcGFyYW1ldGVyLWJ1dHRvbicpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cclxuICAgICAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgICAgICAvL3RoaXMgYXBwbHlzIHRoZSBjaGFuZ2VzXHJcblxyXG4gICAgICAgICAgICAgICAgICB0aGlzLmRlY0luZGV4VGltZSgpO1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLmRyYXcoKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFRyYWNrIHZpc3VhbCBwYXJhbWV0ZXIgYnV0dG9uXHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjdmlzdWFsLXBhcmFtZXRlci1idXR0b24nKS5jbGljaygoKT0+e1xyXG4gICAgICAgICAgaWYgKCQoJyN2aXN1YWwtcGFyYW1ldGVyLWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgIHNldFRyYWNraW5nQm9vbGVhbihmYWxzZSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHNldFRyYWNraW5nQm9vbGVhbih0cnVlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogU2VuZCB0aGUgdHJhY2tlZCB2aWEgYSBhamF4IHF1ZXJ5IHRvIHRoZSBzZXJ2ZXIgdG8gY2FsY3VsYXRlIHRoZSBwYXJhbWV0ZXJzXHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjY2FsY3VsYXRlLXBhcmFtZXRlci1idXR0b24nKS5jbGljaygoKT0+e1xyXG4gICAgICAgICAgaWYgKCEkKCcjY2FsY3VsYXRlLXBhcmFtZXRlci1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICBzZXRUcmFja2luZ0Jvb2xlYW4oZmFsc2UpO1xyXG4gICAgICAgICAgICAgIHNlbmRUcmFja2VkRGF0YSgpO1xyXG5cclxuICAgICAgICAgICAgICAvLyBkaXNhYmxlIGJvdGggYnV0dG9ucyBhbmQgcmVtb3ZlIHRoZSBhY3RpdmUgb25lXHJcbiAgICAgICAgICAgICAgJCgnI2NhbGN1bGF0ZS1wYXJhbWV0ZXItYnV0dG9uJykucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICAgICAgICAgICAkKCcjY2FsY3VsYXRlLXBhcmFtZXRlci1idXR0b24nKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgJCgnI3Zpc3VhbC1wYXJhbWV0ZXItYnV0dG9uJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBTcGF0aWFsIHZpZXcgYmFja2dyb3VuZCBjb2xvclxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2JhY2tncm91bmQtY29sb3InKS5jaGFuZ2UoKCk9PntcclxuICAgICAgICAgIGxldCBjb2xvciA9ICQoJ2lucHV0W3R5cGU9XCJyYWRpb1wiXS5ncm91cC1iYWNrZ3JvdW5kOmNoZWNrZWQnKS52YWwoKTtcclxuICAgICAgICAgICQoJyNtYWluLXZpcy1zdmcnKS5jc3MoJ2JhY2tncm91bmQtY29sb3InLCBjb2xvcik7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFNob3cgdGhlIHNwYXRpYWwgdmlldyBheGlzIGJ1dHRvblxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2RyYXctYXhpcycpLm9uKCdjaGFuZ2UnLCAoKT0+IHtcclxuICAgICAgICAgIGlmICh0aGlzLmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAkKCcjbWFpbi12aXMgZy54LmF4aXMnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgJCgnI21haW4tdmlzIGcueS5heGlzJykuc2hvdygpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAkKCcjbWFpbi12aXMgZy54LmF4aXMnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgJCgnI21haW4tdmlzIGcueS5heGlzJykuaGlkZSgpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogU2hvdyB0aGUgZnJhbWUgKHRpbWUpIG51bWJlciBpbiB0aGUgc3BhdGlhbCB2aWV3IGJ1dHRvblxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2RyYXctdGltZScpLm9uKCdjaGFuZ2UnLCAoKT0+e1xyXG4gICAgICAgICAgaWYgKHRoaXMuY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICQoJyNtYWluLXZpcyAuZnJhbWUtdGV4dCcpLnNob3coKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgJCgnI21haW4tdmlzIC5mcmFtZS10ZXh0JykuaGlkZSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBEcmF3IHRoZSBuZXR3b3JrIGJhY2tncm91bmQgY29sb3JcclxuICAgICAgICovXHJcbiAgICAgICQoJyNuZXR3b3JrLWJhY2tncm91bmQnKS5vbignY2hhbmdlJywgKCk9PiB7XHJcbiAgICAgICAgICBpZiAodGhpcy5jaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgc2V0TmV0d29ya0JhY2tncm91bmQodHJ1ZSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHNldE5ldHdvcmtCYWNrZ3JvdW5kKGZhbHNlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogU2V0IHRoZSBuZXR3b3JrIGJhY2tncm91bmQgZWRnZSBsaW1pdFxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI25ldHdvcmstYmFja2dyb3VuZC1saW1pdCcpLnZhbCgxKTtcclxuICAgICAgJCgnI25ldHdvcmstYmFja2dyb3VuZC1saW1pdCcpLm9uKCdjaGFuZ2UnLCAoKT0+e1xyXG4gICAgICAgICAgbGV0IHZhbCA9ICQodGhpcykudmFsKCk7XHJcbiAgICAgICAgICBpZiAoJC5pc051bWVyaWModmFsKSAmJiB2YWwgPiAwKSB7XHJcbiAgICAgICAgICAgICAgc2V0TmV0d29ya0JhY2tncm91bmRMaW1pdCh2YWwpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAkKHRoaXMpLnZhbCgxKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQ29sb3IgU2NhbGUgRnVuY3Rpb24gUmFkaW8gYnV0dG9uc1xyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2NvbG9yLXNjYWxlLXJhZGlvLWZvcm0gaW5wdXQnKS5vbignY2hhbmdlJywgKCk9PntcclxuICAgICAgICAgIHRoaXMuY29sb3JTY2FsZVsndHlwZSddID0gJCgnaW5wdXRbbmFtZT1jb2xvci1zY2FsZS1yYWRpb106Y2hlY2tlZCcsICcjY29sb3Itc2NhbGUtcmFkaW8tZm9ybScpLnZhbCgpO1xyXG4gICAgICAgICAgaWYgKCEkKCcjcGxheS1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuICAgICAgICAgICAgICB0aGlzLmRlY0luZGV4VGltZSgpO1xyXG4gICAgICAgICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICB9XHJcbiAgc2ZfbGlzdGVuZXJzKCkge1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIERyYXcgZGlyZWN0aW9uIGFycm93IG9mIHRoZSBhbmltYWxcclxuICAgICAgICovXHJcbiAgICAgICQoJyNkcmF3LWRpcmVjdGlvbicpLmNsaWNrKCgpPT57XHJcbiAgICAgICAgICBpZiAoJCgnI2RyYXctZGlyZWN0aW9uJykuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICBpZiAoISgnZGlyZWN0aW9uJyBpbiBkYXRhc2V0WzBdKSkge1xyXG4gICAgICAgICAgICAgICAgICBkaXNhYmxlUGxheUJ1dHRvbigpO1xyXG4gICAgICAgICAgICAgICAgICAvLyBhamF4IHF1ZXJ5IHRvIGdldCBkaXJlY3Rpb24gZGF0YVxyXG4gICAgICAgICAgICAgICAgICBnZXREYXRhc2V0RmVhdHVyZSgnZGlyZWN0aW9uJyk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICQoJy5hcnJvdycpLnNob3coKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgJCgnLmFycm93JykuaGlkZSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKCEkKCcjcGxheS1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuICAgICAgICAgICAgICB0aGlzLmRlY0luZGV4VGltZSgpO1xyXG4gICAgICAgICAgICAgIC8vdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIERyYXcgbWVkb2lkIGluIGNvbG9yIGJ1dHRvblxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2RyYXctbWVkb2lkJykuY2xpY2soKCkgPT4ge1xyXG4gICAgICAgICAgaWYgKCQoJyNkcmF3LW1lZG9pZCcpLmlzKCc6Y2hlY2tlZCcpKSB7XHJcblxyXG4gICAgICAgICAgICAgIGlmICghKCdtZWRvaWQnIGluIHN3YXJtRGF0YVswXSkpIHtcclxuICAgICAgICAgICAgICAgICAgZ2V0U3dhcm1EYXRhc2V0RmVhdHVyZSgnbWVkb2lkJyk7XHJcblxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB0aGlzLnNldE1lZG9pZEFuaW1hbChzd2FybURhdGFbdGhpcy5pbmRleFRpbWVdWydtZWRvaWQnXSk7XHJcbiAgICAgICAgICAgICAgLy8gZGlzcGxheSB0aGUgbWVkb2lkXHJcbiAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCcjYW5pbWFsLScgKyB0aGlzLm1lZG9pZEFuaW1hbClcclxuICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ21lZG9pZCcsIHRydWUpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAvLyBkbyBub3QgZGlzcGxheSB0aGUgbWVkb2lkIGZpc2hcclxuICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoJyNhbmltYWwtJyArIHRoaXMubWVkb2lkQW5pbWFsKVxyXG4gICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnbWVkb2lkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgIHRoaXMuc2V0TWVkb2lkQW5pbWFsKC0xKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogRHJhdyBjZW50cm9pZCBidXR0b25cclxuICAgICAgICovXHJcbiAgICAgICQoJyNkcmF3LWNlbnRyb2lkJykuY2xpY2soKCk9PntcclxuICAgICAgICAgIGlmICgkKCcjZHJhdy1jZW50cm9pZCcpLmlzKCc6Y2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICAgaWYgKCEoJ2NlbnRyb2lkJyBpbiBzd2FybURhdGFbMF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgIGdldFN3YXJtRGF0YXNldEZlYXR1cmUoJ2NlbnRyb2lkJyk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIC8vIGRpc3BsYXkgdGhlIGNlbnRyb2lkXHJcbiAgICAgICAgICAgICAgJCgnI2ctY2VudHJvaWQnKS5zaG93KCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIC8vIGhpZGUgdGhlIGNlbnRyb2lkXHJcbiAgICAgICAgICAgICAgJCgnI2ctY2VudHJvaWQnKS5oaWRlKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBEcmF3IGNvbnZleCBodWxsIGluIGNvbG9yIGJ1dHRvblxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2RyYXctY29udmV4LWh1bGwnKS5jbGljaygoKT0+e1xyXG4gICAgICAgICAgaWYgKCQoJyNkcmF3LWNvbnZleC1odWxsJykuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICBpZiAoISgnaHVsbCcgaW4gc3dhcm1EYXRhWzBdKSkge1xyXG4gICAgICAgICAgICAgICAgICBnZXRTd2FybURhdGFzZXRGZWF0dXJlKCdjb252ZXhfaHVsbCcpO1xyXG5cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBEcmF3IHRyaWFuZ3VsYXRpb25cclxuICAgICAgICovXHJcbiAgICAgICQoJyNkcmF3LXRyaWFuZ3VsYXRpb24nKS5jbGljaygoKT0+e1xyXG4gICAgICAgICAgaWYgKCQoJyNkcmF3LXRyaWFuZ3VsYXRpb24nKS5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgIGlmICghKCd0cmlhbmd1bGF0aW9uJyBpbiBzd2FybURhdGFbMF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2VyZScpO1xyXG4gICAgICAgICAgICAgICAgICBnZXRTd2FybURhdGFzZXRGZWF0dXJlKCd0cmlhbmd1bGF0aW9uJyk7XHJcbiAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coc3dhcm1EYXRhW3RoaXMuaW5kZXhUaW1lXVsndHJpYW5ndWxhdGlvbiddKTtcclxuXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGlmICghJCgnI3BsYXktYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgIC8vZ28gYmFjayBvbmUgc2Vjb25kIGFuZCBkcmF3IHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAgICAgICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuICAgICAgICAgICAgICAgICAgdGhpcy5kZWNJbmRleFRpbWUoKTtcclxuICAgICAgICAgICAgICAgICAgLy90aGlzLmRyYXcoKTtcclxuXHJcblxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIERyYXcgdm9yb25vaVxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2RyYXctdm9yb25vaScpLmNsaWNrKCgpPT57XHJcbiAgICAgICAgICBpZiAoJCgnI2RyYXctdm9yb25vaScpLmlzKCc6Y2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICAgaWYgKCEoJ3Zvcm9ub2knIGluIHN3YXJtRGF0YVswXSkpIHtcclxuICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnZXJlJyk7XHJcbiAgICAgICAgICAgICAgICAgIGdldFN3YXJtRGF0YXNldEZlYXR1cmUoJ3Zvcm9ub2knKTtcclxuICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhzd2FybURhdGFbdGhpcy5pbmRleFRpbWVdWyd2b3Jvbm9pJ10pO1xyXG5cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgaWYgKCEkKCcjcGxheS1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAgICAgLy9nbyBiYWNrIG9uZSBzZWNvbmQgYW5kIGRyYXcgdGhlIG5leHQgZnJhbWVcclxuICAgICAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCd0aGVyZScpO1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLmRlY0luZGV4VGltZSgpO1xyXG4gICAgICAgICAgICAgICAgICAvL3RoaXMuZHJhdygpO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuXHJcbiAgfVxyXG4gIGFmX2xpc3RlbmVycygpIHtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBEcmF3IFNwZWVkIGJ1dHRvblxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2RyYXctc3BlZWQnKS5jbGljaygoKT0+e1xyXG4gICAgICAgICAgJCgnLmRyYXctZGV0YWlscycpLmhpZGUoKVxyXG4gICAgICAgICAgICAgIC5maW5kKCdpbnB1dDpjaGVja2JveCcpLnByb3AoJ2NoZWNrZWQnLCB0cnVlKS5jbGljaygpO1xyXG4gICAgICAgICAgaWYgKCQoJyNkcmF3LXNwZWVkJykuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICAvLyBsb2FkIGFic29sdXRlIGZlYXR1cmUgc3BlZWQgZGF0YSBvbmNlXHJcbiAgICAgICAgICAgICAgaWYgKCEoJ3NwZWVkJyBpbiBkYXRhc2V0WzBdKSkge1xyXG4gICAgICAgICAgICAgICAgICBkaXNhYmxlUGxheUJ1dHRvbigpO1xyXG4gICAgICAgICAgICAgICAgICAvLyBhamF4IHF1ZXJ5IHRvIGdldCB0aGUgYWJzb2x1dGUgZmVhdHVyZSBzcGVlZFxyXG4gICAgICAgICAgICAgICAgICBnZXREYXRhc2V0RmVhdHVyZSgnc3BlZWQnKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgLy8gJCgnLmRyYXctZGV0YWlscycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAkKCcjZHJhdy1zcGVlZC1kZXRhaWxzJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICQoJyNkcmF3LWFjY2VsZXJhdGlvbicpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgJCgnI2RyYXctZGlzdGFuY2VfY2VudHJvaWQnKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICQoJyNkcmF3LW1pZGxpbmVfb2Zmc2V0JykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICB0aGlzLnNldEFjdGl2ZVNjYWxlKCdzcGVlZCcpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAkKCcjZHJhdy1zcGVlZC1kZXRhaWxzJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlU2NhbGUoJ2JsYWNrJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvL2NoYW5nZSBjb2xvciBsZWdlbmRcclxuICAgICAgICAgIGQzLnNlbGVjdEFsbCgnLmNvbG9yTGVnZW5kIConKS5yZW1vdmUoKTtcclxuICAgICAgICAgIHRoaXMuY2hhbmdlbGVnZW5kKCk7XHJcblxyXG4gICAgICAgICAgaWYgKCEkKCcjcGxheS1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuICAgICAgICAgICAgICB0aGlzLmRlY0luZGV4VGltZSgpO1xyXG4gICAgICAgICAgICAgIC8vdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIERyYXcgYWNjZWxlcmF0aW9uIGJ1dHRvblxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2RyYXctYWNjZWxlcmF0aW9uJykuY2xpY2soKCk9PntcclxuICAgICAgICAgICQoJy5kcmF3LWRldGFpbHMnKS5oaWRlKClcclxuICAgICAgICAgICAgICAuZmluZCgnaW5wdXQ6Y2hlY2tib3gnKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSkuY2xpY2soKTtcclxuICAgICAgICAgIGlmICgkKCcjZHJhdy1hY2NlbGVyYXRpb24nKS5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgIC8vIGxvYWQgYWJzb2x1dGUgZmVhdHVyZSBhY2NlbGVyYXRpb24gZGF0YSBvbmNlXHJcbiAgICAgICAgICAgICAgaWYgKCEoJ2FjY2VsZXJhdGlvbicgaW4gZGF0YXNldFswXSkpIHtcclxuICAgICAgICAgICAgICAgICAgZGlzYWJsZVBsYXlCdXR0b24oKTtcclxuICAgICAgICAgICAgICAgICAgLy8gYWpheCBxdWVyeSB0byBnZXQgdGhlIGFic29sdXRlIGZlYXR1cmUgYWNjZWxlcmF0aW9uXHJcbiAgICAgICAgICAgICAgICAgIGdldERhdGFzZXRGZWF0dXJlKCdhY2NlbGVyYXRpb24nKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgJCgnI2RyYXctYWNjZWxlcmF0aW9uLWRldGFpbHMnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgJCgnI2RyYXctc3BlZWQnKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICQoJyNkcmF3LWRpc3RhbmNlX2NlbnRyb2lkJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAkKCcjZHJhdy1taWRsaW5lX29mZnNldCcpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVTY2FsZSgnYWNjZWxlcmF0aW9uJyk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICQoJyNkcmF3LWFjY2VsZXJhdGlvbi1kZXRhaWxzJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlU2NhbGUoJ2JsYWNrJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAkKCcuZHJhdy1kZXRhaWxzLmFjdGl2ZScpLmNsaWNrKCk7XHJcbiAgICAgICAgICAvL2NoYW5nZSBjb2xvciBsZWdlbmRcclxuICAgICAgICAgIGQzLnNlbGVjdEFsbCgnLmNvbG9yTGVnZW5kIConKS5yZW1vdmUoKTtcclxuICAgICAgICAgIHRoaXMuY2hhbmdlbGVnZW5kKCk7XHJcblxyXG4gICAgICAgICAgaWYgKCEkKCcjcGxheS1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuICAgICAgICAgICAgICB0aGlzLmRlY0luZGV4VGltZSgpO1xyXG4gICAgICAgICAgICAgIC8vdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIERyYXcgZGlzdGFuY2UgdG8gY2VudHJvaWQgYnV0dG9uXHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjZHJhdy1kaXN0YW5jZV9jZW50cm9pZCcpLmNsaWNrKCgpPT57XHJcbiAgICAgICAgICAkKCcuZHJhdy1kZXRhaWxzJykuaGlkZSgpXHJcbiAgICAgICAgICAgICAgLmZpbmQoJ2lucHV0OmNoZWNrYm94JykucHJvcCgnY2hlY2tlZCcsIHRydWUpLmNsaWNrKCk7XHJcbiAgICAgICAgICBpZiAoJCgnI2RyYXctZGlzdGFuY2VfY2VudHJvaWQnKS5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjaGVja2VkJyk7XHJcbiAgICAgICAgICAgICAgLy8gbG9hZCBhYnNvbHV0ZSBmZWF0dXJlIGRpc3RhbmNlX2NlbnRyb2lkIGRhdGEgb25jZVxyXG4gICAgICAgICAgICAgIGlmICghKCdkaXN0YW5jZV9jZW50cm9pZCcgaW4gZGF0YXNldFswXSkpIHtcclxuICAgICAgICAgICAgICAgICAgZGlzYWJsZVBsYXlCdXR0b24oKTtcclxuICAgICAgICAgICAgICAgICAgLy8gYWpheCBxdWVyeSB0byBnZXQgdGhlIGFic29sdXRlIGZlYXR1cmUgZGlzdGFuY2VfY2VudHJvaWRcclxuICAgICAgICAgICAgICAgICAgZ2V0RGF0YXNldEZlYXR1cmUoJ2Rpc3RhbmNlX2NlbnRyb2lkJyk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGFzZXQpO1xyXG4gICAgICAgICAgICAgICQoJyNkcmF3LWRpc3RhbmNlX2NlbnRyb2lkLWRldGFpbHMnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgJCgnI2RyYXctc3BlZWQnKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICQoJyNkcmF3LWFjY2VsZXJhdGlvbicpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgJCgnI2RyYXctbWlkbGluZV9vZmZzZXQnKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlU2NhbGUoJ2Rpc3RhbmNlX2NlbnRyb2lkJyk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnYmxhY2snKTtcclxuICAgICAgICAgICAgICAkKCcjZHJhdy1kaXN0YW5jZV9jZW50cm9pZC1kZXRhaWxzJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlU2NhbGUoJ2JsYWNrJyk7XHJcblxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgJCgnLmRyYXctZGV0YWlscy5hY3RpdmUnKS5jbGljaygpO1xyXG5cclxuICAgICAgICAgIC8vY2hhbmdlIGNvbG9yIGxlZ2VuZFxyXG4gICAgICAgICAgZDMuc2VsZWN0QWxsKCcuY29sb3JMZWdlbmQgKicpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgdGhpcy5jaGFuZ2VsZWdlbmQoKTtcclxuXHJcbiAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgIC8vZ28gYmFjayBvbmUgc2Vjb25kIGFuZCBkcmF3IHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgIHRoaXMuZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgICAgICAgLy90aGlzLmRyYXcoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogRHJhdyBtaWRsaW5lIG9mZnNldFxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2RyYXctbWlkbGluZV9vZmZzZXQnKS5jbGljaygoKT0+e1xyXG4gICAgICAgICAgJCgnLmRyYXctZGV0YWlscycpLmhpZGUoKVxyXG4gICAgICAgICAgICAgIC5maW5kKCdpbnB1dDpjaGVja2JveCcpLnByb3AoJ2NoZWNrZWQnLCB0cnVlKS5jbGljaygpO1xyXG4gICAgICAgICAgaWYgKCQoJyNkcmF3LW1pZGxpbmVfb2Zmc2V0JykuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICAvLyBsb2FkIGFic29sdXRlIGZlYXR1cmUgZHJhdy1taWRsaW5lX29mZnNldCBkYXRhIG9uY2VcclxuICAgICAgICAgICAgICBpZiAoISgnZHJhdy1taWRsaW5lX29mZnNldCcgaW4gZGF0YXNldFswXSkpIHtcclxuICAgICAgICAgICAgICAgICAgZGlzYWJsZVBsYXlCdXR0b24oKTtcclxuICAgICAgICAgICAgICAgICAgLy8gYWpheCBxdWVyeSB0byBnZXQgdGhlIGFic29sdXRlIGZlYXR1cmUgbWlkbGluZV9vZmZzZXRcclxuICAgICAgICAgICAgICAgICAgZ2V0RGF0YXNldEZlYXR1cmUoJ21pZGxpbmVfb2Zmc2V0Jyk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICQoJyNkcmF3LW1pZGxpbmVfb2Zmc2V0LWRldGFpbHMnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgJCgnI2RyYXctc3BlZWQnKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICQoJyNkcmF3LWFjY2VsZXJhdGlvbicpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgJCgnI2RyYXctZGlzdGFuY2VfY2VudHJvaWQnKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgIHNldEFjdGl2ZVNjYWxlKCdtaWRsaW5lX29mZnNldCcpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBzZXRBY3RpdmVTY2FsZSgnYmxhY2snKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgICQoJy5kcmF3LWRldGFpbHMuYWN0aXZlJykuY2xpY2soKTtcclxuICAgICAgICAgIC8vY2hhbmdlIGNvbG9yIGxlZ2VuZFxyXG4gICAgICAgICAgZDMuc2VsZWN0QWxsKCcuY29sb3JMZWdlbmQgKicpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgdGhpcy5jaGFuZ2VsZWdlbmQoKTtcclxuXHJcbiAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgIC8vZ28gYmFjayBvbmUgc2Vjb25kIGFuZCBkcmF3IHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgIHRoaXMuZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICB9XHJcbiAgbWRfbGlzdGVuZXJzKCkge1xyXG4gICAgICAvKipcclxuICAgICAgICogTWV0YWRhdGEgc3dhdGNoIGZ1bmN0aW9ucyBjb2xvcmluZyBpbmRpdmlkdWFsIGFuaW1hbHNcclxuICAgICAgICovXHJcbiAgICAgICQoJy5tZXRhZGF0YS1zd2F0Y2gubWV0YWRhdGEtc3dhdGNoLWNsaWNrYWJsZScpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgbGV0IGlkID0gJCh0aGlzKS5hdHRyKCd2YWx1ZScpO1xyXG4gICAgICAgICAgbGV0IGNvbG9yUkdCID0gJCh0aGlzKS5jc3MoJ2JhY2tncm91bmQtY29sb3InKTtcclxuICAgICAgICAgIC8vIHNldCB0aGUgY29sb3Igb2YgdGhlIHN3YXRjaCBwcmV2aWV3XHJcbiAgICAgICAgICAkKCcjbWV0YWRhdGEtcm93LScgKyBpZCArICcgI3ByZXZpZXcnKVxyXG4gICAgICAgICAgICAgIC5jc3MoJ2JhY2tncm91bmQtY29sb3InLCBjb2xvclJHQik7XHJcbiAgICAgICAgICAvLyBpZiB3aGl0ZSB0aGFuIHJlc2V0IHRoZSBjb2xvclxyXG4gICAgICAgICAgaWYgKGNvbG9yUkdCID09PSAncmdiKDI1NSwgMjU1LCAyNTUpJykge1xyXG4gICAgICAgICAgICAgIGlmIChtZXRhZGF0YUNvbG9yW2lkXSkge1xyXG4gICAgICAgICAgICAgICAgICBkZWxldGUgbWV0YWRhdGFDb2xvcltpZF07XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBtZXRhZGF0YUNvbG9yW2lkXSA9IGNvbG9yUkdCO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBNZXRhZGF0YSBncm91cCBtZXRhZGF0YSBmdW5jdGlvbnMgZm9yIGluc3RhbmNlIGNvbG9yIHNleFxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2dyb3VwLW1ldGFkYXRhIDppbnB1dCcpLmNoYW5nZShmdW5jdGlvbigpIHtcclxuICAgICAgICAgIC8vIHJlc2V0IHRoZSBtZXRhZGF0IGFjb2xvcmluZ1xyXG4gICAgICAgICAgcmVzZXRJbmRpdmlkdWFsTWV0YWRhdGEoKTtcclxuXHJcbiAgICAgICAgICBsZXQgdmFsdWUgPSAkKHRoaXMpLmF0dHIoJ3ZhbHVlJyk7XHJcbiAgICAgICAgICBsZXQgdG1wID0gW107XHJcblxyXG4gICAgICAgICAgLy8gbWV0YWRhdGEgc2V4IGlzIGNob29zZW4gLSBjb2xvcmluZyBiYXNlZCBvbiBtIGFuZCBmXHJcbiAgICAgICAgICBpZiAodmFsdWUgPT09ICdzZXgnKSB7XHJcbiAgICAgICAgICAgICAgJCgnI21ldGFkYXRhLWRpdicpLm1vZGFsKCd0b2dnbGUnKTtcclxuICAgICAgICAgICAgICAvLyBjbG9zZSBhbmQgY29sb3IgaGVyZVxyXG4gICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YXNldE1ldGFkYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgIHRtcC5wdXNoKGRhdGFzZXRNZXRhZGF0YVtpXVt2YWx1ZV0udG9Mb3dlckNhc2UoKSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIC8vIGNyZWF0ZSBhIHNldCBvZiBpbmRpdmlkdWFsIHN0cmluZ3MgaW4gc2V4XHJcbiAgICAgICAgICAgICAgdG1wID0gQXJyYXkuZnJvbShuZXcgU2V0KHRtcCkpO1xyXG4gICAgICAgICAgICAgIGxldCBjb2xvcnMgPSBbJyM3ZmM5N2YnLCAnIzM4NmNiMCddO1xyXG5cclxuICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGFzZXRNZXRhZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRtcC5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFzZXRNZXRhZGF0YVtpXVt2YWx1ZV0udG9Mb3dlckNhc2UoKSA9PT0gdG1wW2pdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIHRoZSBjb2xvcmluZyB0byB0aGUgbWV0YWRhdGFjb2xvciBvYmplY3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YUNvbG9yW2RhdGFzZXRNZXRhZGF0YVtpXVsnYW5pbWFsX2lkJ11dID0gY29sb3JzW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICQoJyNtZXRhZGF0YS1pbnB1dCcpLmhpZGUoKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgJCgnI21ldGFkYXRhLWlucHV0Jykuc2hvdygpO1xyXG4gICAgICAgICAgICAgIC8vIHNldCB2YWx1ZXMgb2YgaW5wdXRzXHJcbiAgICAgICAgICAgICAgLy8gaGVyZSBhcmUgYXV0b21hdGljYWxseSBpbnB1dCB2YWx1ZXMgY2FsY3VsYXRlZFxyXG4gICAgICAgICAgICAgIC8vIC4yNSBhbmQgLjc1IHBlcmNlbnRpbGVzIGFyZSB1c2VkXHJcbiAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhc2V0TWV0YWRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgdG1wLnB1c2goZGF0YXNldE1ldGFkYXRhW2ldW3ZhbHVlXSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGxldCBibEF2ZyA9IGQzLnF1YW50aWxlKHRtcCwgMC4yNSk7IC8vIGJlbG93IGF2ZXJhZ2UgdmFsdWVcclxuICAgICAgICAgICAgICBsZXQgYWJBdmcgPSBkMy5xdWFudGlsZSh0bXAsIDAuNzUpOyAvLyBhYm92ZSBhdmVyYWdlXHJcbiAgICAgICAgICAgICAgJCgnI2JsLWF2ZycpLnZhbChibEF2Zyk7XHJcbiAgICAgICAgICAgICAgJCgnI2FiLWF2ZycpLnZhbChhYkF2Zyk7XHJcbiAgICAgICAgICAgICAgLy8gY29sb3IgdGhlIGFuaW1hbHNcclxuICAgICAgICAgICAgICBjb2xvck1ldGFkYXRhKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIE1ldGFkYXRhIGdyb3VwIG1ldGFkYXRhIGlucHV0IHNwaW5uZXJcclxuICAgICAgICogKy8tIDAuMSB0byB0aGUgaW5wdXQgdmFsdWVcclxuICAgICAgICovXHJcbiAgICAgICQoJy5udW1iZXItc3Bpbm5lciBidXR0b24nKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGxldCBidG4gPSAkKHRoaXMpLFxyXG4gICAgICAgICAgICAgIG9sZFZhbHVlID0gYnRuLmNsb3Nlc3QoJy5udW1iZXItc3Bpbm5lcicpLmZpbmQoJ2lucHV0JykudmFsKCkudHJpbSgpLFxyXG4gICAgICAgICAgICAgIG5ld1ZhbCA9IDA7XHJcblxyXG4gICAgICAgICAgaWYgKGJ0bi5hdHRyKCdkYXRhLWRpcicpID09ICd1cCcpIHtcclxuICAgICAgICAgICAgICBuZXdWYWwgPSBwYXJzZUZsb2F0KG9sZFZhbHVlKSArIDAuMTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgaWYgKG9sZFZhbHVlID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICBuZXdWYWwgPSBwYXJzZUZsb2F0KG9sZFZhbHVlKSAtIDAuMTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICBuZXdWYWwgPSAwO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIG5ld1ZhbCA9IE1hdGgucm91bmQobmV3VmFsICogMTAwKSAvIDEwMDsgLVxyXG4gICAgICAgICAgYnRuLmNsb3Nlc3QoJy5udW1iZXItc3Bpbm5lcicpLmZpbmQoJ2lucHV0JykudmFsKG5ld1ZhbCk7XHJcbiAgICAgICAgICAvLyBjaGFuZ2UgdGhlIGNvbG9yaW5nXHJcbiAgICAgICAgICBjb2xvck1ldGFkYXRhKCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIE1ldGFkYXRhIGlucHV0IGZpZWxkcyBjaGFuZ2VcclxuICAgICAgICovXHJcbiAgICAgICQoJy5udW1iZXItc3Bpbm5lciBpbnB1dCcpLm9uKCdpbnB1dCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgY29sb3JNZXRhZGF0YSgpO1xyXG4gICAgICB9KTtcclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogUmVzZXQgYWxsIG1ldGFkYXRhIGlucHV0IHBhcmFtZXRlcnNcclxuICAgICAgICovXHJcbiAgICAgICQoJyNtZXRhZGF0YS1yZXNldCcpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgJCgnI21ldGFkYXRhLWlucHV0JykuaGlkZSgpO1xyXG4gICAgICAgICAgcmVzZXRJbmRpdmlkdWFsTWV0YWRhdGEoKTtcclxuICAgICAgfSk7XHJcblxyXG4gIH1cclxuICBpbml0U2hvd0RlbmRyb2dyYW1MaXN0ZW5lcihpZCkge1xyXG5cclxuICAgICAgJCgnI3Nob3ctZGVuZHJvZ3JhbS0nICsgaWQpLmNsaWNrKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICBsZXQgY2xpY2tlZEJ1dHRvbklEID0gJCh0aGlzKS5hdHRyKCdpZCcpO1xyXG4gICAgICAgICAgLy8gaXRlcmF0ZSBvdmVyIGFsbCBidXR0b25zIGFuZCBjdXN0b20gaGlnaGxpZ2h0IGp1c3Qgb25lIG9yIG5vbmVcclxuICAgICAgICAgICQoJy5zaG93LWRlbmRyb2dyYW0nKS5lYWNoKGZ1bmN0aW9uKGksIGJ1dHRvbil7XHJcbiAgICAgICAgICAgICAgLy8gYWN0aXZlIGZvdW5kIGJ1dHRvblxyXG4gICAgICAgICAgICAgIGlmICgkKGJ1dHRvbikuYXR0cignaWQnKSA9PT0gY2xpY2tlZEJ1dHRvbklEICYmICQoYnV0dG9uKS5oYXNDbGFzcygnYnRuLXByaW1hcnknKSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgJChidXR0b24pLmFkZENsYXNzKCdidG4tcHJpbWFyeScpO1xyXG4gICAgICAgICAgICAgICAgICAkKGJ1dHRvbikuZmluZCgnI2J0bi1sZWZ0JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAkKGJ1dHRvbikuZmluZCgnI2J0bi1yaWdodCcpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgLy8gVE9ETyBhZGQgaGVyZSBhIHJlc2l6ZSBvZiB0aGUgbWFpbiB2aXNcclxuICAgICAgICAgICAgICAgICAgLy8gJCgnI2RlbmRyb2dyYW0tcGFuZWwnKS5pbnNlcnRBZnRlcigkKHRoaXMpKTtcclxuICAgICAgICAgICAgICB9IC8vIHJlbW92ZSBoaWdobGlnaHRcclxuICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgJChidXR0b24pLnJlbW92ZUNsYXNzKCdidG4tcHJpbWFyeScpO1xyXG4gICAgICAgICAgICAgICAgICAkKGJ1dHRvbikuZmluZCgnI2J0bi1sZWZ0Jykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAkKGJ1dHRvbikuZmluZCgnI2J0bi1yaWdodCcpLmhpZGUoKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAvLyBzaG93IGRlbmRyb2dyYW1cclxuICAgICAgICAgIGlmICgkKCcuc2hvdy1kZW5kcm9ncmFtLmJ0bi1wcmltYXJ5JykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgJCgnI2RlbmRyb2dyYW0tcGFuZWwnKS5zaG93KCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICQoJyNkZW5kcm9ncmFtLXBhbmVsJykuaGlkZSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKCEkKCcjcGxheS1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuICAgICAgICAgICAgICB0aGlzLmRlY0luZGV4VGltZSgpO1xyXG4gICAgICAgICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICAgICAgICAgIHRoaXMuZHJhd0RlbmRyb2dyYW0oKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgfVxyXG4gIGhfbGlzdGVuZXJzKCkge1xyXG4gICAgICB2YXIgY2hlY2tib3g7XHJcblxyXG4gICAgICAvLyBTdG9yZSBnaXZlbiBjaGVja2JveCBpbiB2YXJpYWJsZVxyXG4gICAgICAkKCcuaGllYXJjaHktY2hlY2tib3gnKS5vbignY2hhbmdlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBjaGVja2JveCA9ICQodGhpcyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBVc2UgY2hlY2tib3ggdG8gZHJhdyBkZW5kcm9ncmFtXHJcbiAgICAgICQoJy5oaWVhcmNoeS1jaGVja2JveCcpLm9uKCdjaGFuZ2UnLCAoKT0+e1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ2p1bXBzJyk7XHJcblxyXG4gICAgICAgICAgbGV0IGlkID0gY2hlY2tib3guYXR0cignZGF0YScpO1xyXG4gICAgICAgICAgbGV0IG5hbWUgPSBjaGVja2JveC5hdHRyKCduYW1lJyk7XHJcbiAgICAgICAgICBsZXQgY2hlY2tlZCA9IGNoZWNrYm94LnByb3AoJ2NoZWNrZWQnKTtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGNoZWNrZWQpO1xyXG5cclxuICAgICAgICAgIGlmIChjaGVja2VkICYmICQoJy5zaG93LWRlbmRyb2dyYW0nKS5sZW5ndGggPCBtYXhOdW1iZXJIaWVyYXJjaGllcykge1xyXG4gICAgICAgICAgICAgIGRpc2FibGVQbGF5QnV0dG9uKCk7XHJcbiAgICAgICAgICAgICAgdGhpcy5nZXROZXR3b3JrSGllcmFyY2h5RGF0YShpZCk7XHJcblxyXG4gICAgICAgICAgICAgIGFkZEhpZXJhcmNoeUJ1dHRvbihpZCwgbmFtZSk7XHJcbiAgICAgICAgICAgICAgdGhpcy5pbml0U2hvd0RlbmRyb2dyYW1MaXN0ZW5lcihpZCk7XHJcbiAgICAgICAgICAgICAgJCgnI2RlbmRyb2dyYW0tYnV0dG9ucy1kaXYnKS5zaG93KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyBlbHNlIGlmICgkKCcuc2hvdy1kZW5kcm9ncmFtJykubGVuZ3RoID09PSBtYXhOdW1iZXJIaWVyYXJjaGllcykge1xyXG4gICAgICAgICAgLy8gY29uc29sZS5sb2coJ01heCBudW1iZXIgb2YgaGllcmFyY2hpZXMgaXM6ICcgKyBtYXhOdW1iZXJIaWVyYXJjaGllcyk7XHJcbiAgICAgICAgICAvL1RPRE8gaW1wbGVtZW50IHRoaXMgaGVyZVxyXG4gICAgICAgICAgLy8gbm90aWNlIHVzZXIgdGhhdCBpdCBpcyBub3QgcG9zc2libGUgdG8gc2hvdyBtb3JlIHRoYW4gbiBoaWVyYXJjaGllc1xyXG4gICAgICAgICAgLy8gICAgICAgICAgPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cclxuICAgICAgICAgIC8vICAgPHN0cm9uZz5JbmZvITwvc3Ryb25nPiBBdHRlbnRpb24gdXNlciAuXHJcbiAgICAgICAgICAvLyA8L2Rpdj5cclxuICAgICAgICAgIC8vIH1cclxuICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgIC8vIHRtcCB2YXJpYWJsZSB0byBzYXZlIGlmIHRoZSBidXR0b24gd2hpY2ggaXMgZ29pbmcgdG8gYmUgcmVtb3ZlZFxyXG4gICAgICAgICAgICAgIC8vIHdhcyBhY3RpdmVcclxuICAgICAgICAgICAgICBsZXQgdG1wQWN0aXZlID0gJCgnI3Nob3ctZGVuZHJvZ3JhbS0nICsgaWQpLmhhc0NsYXNzKCdidG4tcHJpbWFyeScpO1xyXG4gICAgICAgICAgICAgIHRoaXMuc2V0SGllcmFyY2h5RGF0YSh7fSwgaWQpO1xyXG5cclxuICAgICAgICAgICAgICByZW1vdmVIaWVyYXJjaHlCdXR0b24oaWQpO1xyXG4gICAgICAgICAgICAgIC8vIFRPRE8gZmluZCBiZXR0ZXIgd2F5IGhlcmVcclxuICAgICAgICAgICAgICBkMy5zZWxlY3QoJ2cuaCcgKyBpZCkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgLy8gcmVtb3ZlIHRoZSBkZW5kcm9ncmFtIGFuZCB0aGUgcGFuZWwgaWYgdGhlIHJlbW92ZWQgZWxlbWVudCB3YXMgY2hlY2tlZFxyXG4gICAgICAgICAgICAgIGlmICh0bXBBY3RpdmUgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgJCgnI2RlbmRyb2dyYW0tcGFuZWwnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGlmICgkKCcuc2hvdy1kZW5kcm9ncmFtJykubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICQoJyNkZW5kcm9ncmFtLWJ1dHRvbnMtZGl2JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyByZXNpemUgdGhlIG1haW4gc3ZnXHJcbiAgICAgICAgICBpZiAoJCgnLnNob3ctZGVuZHJvZ3JhbScpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICQoJyNtYWluLXZpcy1kaXYnKS5yZW1vdmVDbGFzcygnY29sLW1kLTEyJyk7XHJcbiAgICAgICAgICAgICAgJCgnI21haW4tdmlzLWRpdicpLmFkZENsYXNzKCdjb2wtbWQtOCcpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAkKCcjbWFpbi12aXMtZGl2JykucmVtb3ZlQ2xhc3MoJ2NvbC1tZC04Jyk7XHJcbiAgICAgICAgICAgICAgJCgnI21haW4tdmlzLWRpdicpLmFkZENsYXNzKCdjb2wtbWQtMTInKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogVmlzdWFsaXplIHRoZSBuZXR3b3JrIG9ubHkgaW4gdGhlIGNob29zZW4gaGllcmFyY2h5XHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcubmV0d29yay1oaWVyYXJjaHktY2hlY2tib3gnKS5vbignY2hhbmdlJywgKCk9PntcclxuICAgICAgICAgIC8vIGdldCB0aGUgaW5mbyBmb3IgdGhlIGNsaWNrZWQgYnV0dG9uXHJcbiAgICAgICAgICBsZXQgY2hlY2tib3ggPSAkKHRoaXMpO1xyXG5cclxuICAgICAgICAgIC8vIHJlc2V0IGFsbCB0aGUgb3RoZXIgYWN0aXZlIGNoZWNrYm94ZXNcclxuICAgICAgICAgICQoJy5uZXR3b3JrLWhpZXJhcmNoeS1jaGVja2JveCcpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICBjaGVja2JveC5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XHJcblxyXG4gICAgICAgICAgaWYgKGNoZWNrYm94LnByb3AoJ2NoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgIC8vIHNldCB0aGUgbmV0d29yayBpZFxyXG4gICAgICAgICAgICAgIHNldE5ldHdvcmtIaWVyYXJjaHkoY2hlY2tib3guYXR0cignZGF0YScpKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgc2V0TmV0d29ya0hpZXJhcmNoeSh1bmRlZmluZWQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbn1cclxuICBuX2xpc3RlbmVycygpIHtcclxuICAgIC8qKlxyXG4gICAgICogTmV0d29yayBidXR0b25zIGNsaWNrZWQgLSBnZXQgdGhlIGRhdGFcclxuICAgICAqL1xyXG4gICAgdmFyIG5ldHdvcmtfaWQ7XHJcblxyXG4gICAgJCgnI25ldHdvcmtzLW1vZGFsLWJvZHkgYnV0dG9uJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgbmV0d29ya19pZCA9ICQodGhpcykuYXR0cignZGF0YScpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAkKCcjbmV0d29ya3MtbW9kYWwtYm9keSBidXR0b24nKS5jbGljaygoKT0+e1xyXG4gICAgICAgIC8vIGFkZCB0aGUgbmFtZSBvZiB0aGUgY2hvb3NlbiBuZXR3b3JrIHRvIHRoZSBOZXR3b3JrIG1vZGFsXHJcbiAgICAgICAgJCgnI2FjdGl2ZS1uZXR3b3JrLW5hbWUnKS50ZXh0KCQodGhpcykuYXR0cignbmFtZScpKTtcclxuXHJcbiAgICAgICAgZGlzYWJsZVBsYXlCdXR0b24oKTtcclxuICAgICAgICBnZXROZXR3b3JrRGF0YShuZXR3b3JrX2lkKTtcclxuICAgICAgICAvLyBzZXQgdGhlIGNvbG9yIG9mIHRoZSBuZXR3b3JrXHJcbiAgICAgICAgdGhpcy5zZXRuZXR3b3JrQ29sb3IobmV0d29ya19pZCk7XHJcbiAgICAgICAgJCgnI25ldHdvcmstZGl2JykubW9kYWwoJ3RvZ2dsZScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBOZXR3b3JrIGJ1dHRvbnMgY2xpY2tlZCAtIGdldCB0aGUgZGF0YVxyXG4gICAgICovXHJcbiAgICAkKCcjbmV0d29yay1yZW1vdmUnKS5jbGljaygoKT0+e1xyXG4gICAgICAgIHNldE5ldHdvcmtEYXRhKHt9KTtcclxuICAgICAgICBzZXROZXR3b3JrSUQoLTEpO1xyXG4gICAgICAgIC8vIHJlbW92ZSB0aGUgbmV0d29yayBjb2xvclxyXG4gICAgICAgIHRoaXMuc2V0bmV0d29ya0NvbG9yKC0xKTtcclxuICAgICAgICAkKCcjYWN0aXZlLW5ldHdvcmstbmFtZScpLnRleHQoJycpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBOZXR3b3JrIGF1dG8gYnV0dG9uIHNldCBhY2l2ZSBvciByZW1vdmVcclxuICAgICAqL1xyXG4gICAgJCgnI25ldHdvcmstYXV0by1zdWdnZXN0JykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKCEkKCcjbmV0d29yay1hdXRvLXN1Z2dlc3QnKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgJCgnI25ldHdvcmstbGltaXQtcCcpLmhpZGUoKTtcclxuICAgICAgICAgICAgJCgnI25ldHdvcmstc2xpZGVyJykuaGlkZSgpO1xyXG5cclxuICAgICAgICAgICAgc2V0TmV0d29ya0F1dG8odHJ1ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJCgnI25ldHdvcmstbGltaXQtcCcpLnNob3coKTtcclxuICAgICAgICAgICAgJCgnI25ldHdvcmstc2xpZGVyJykuc2hvdygpO1xyXG4gICAgICAgICAgICBzZXROZXR3b3JrQXV0byhmYWxzZSk7XHJcbiAgICAgICAgICAgIGxldCBsaW1pdCA9ICQoJyNuZXR3b3JrLXNsaWRlcicpLnNsaWRlcigndmFsdWUnKTtcclxuICAgICAgICAgICAgc2V0TmV0d29yTGltaXQobGltaXQpO1xyXG4gICAgICAgICAgICAkKCcjbmV0d29yay1saW1pdCcpLnZhbChsaW1pdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG59XHJcblxyXG5cclxuICBzcGF0aWFsVmlld0luaXQoKXtcclxuXHJcblxyXG5cclxuICAgICAgbGV0IG1pblBvaW50ID0gcGFyYW1ldGVyc1snbWluJ11bJ2dlb21ldHJ5J11bJ2Nvb3JkaW5hdGVzJ107XHJcbiAgICAgIGxldCBtYXhQb2ludCA9IHBhcmFtZXRlcnNbJ21heCddWydnZW9tZXRyeSddWydjb29yZGluYXRlcyddO1xyXG4gICAgICAvLyBsZXQgY29vcmRpbmF0ZU9yaWdpbiA9IHBhcmFtZXRlcnNbJ2Nvb3JkaW5hdGVfb3JpZ2luJ11bJ2dlb21ldHJ5J11bJ2Nvb3JkaW5hdGVzJ107XHJcbiAgICAgIC8vIHdpZHRoID0gd2lkdGggKjEuMDIgLS0+IHNvIHRoZXJlIGlzIGEgbWFyZ2luIGluIHRoZSBzcGF0aWFsIHZpZXcgd2hlcmUgbm8gYW5pbWFsIGlzIGV2ZXJcclxuICAgICAgdGhpcy50YW5rV2lkdGggPSAobWF4UG9pbnRbMF0gLSBtaW5Qb2ludFswXSkgKiAxLjAyO1xyXG4gICAgICB0aGlzLnRhbmtIZWlnaHQgPSAobWF4UG9pbnRbMV0gLSBtaW5Qb2ludFsxXSkgKiAxLjAyO1xyXG4gICAgICAvL1ggYW5kIFkgYXhpc1xyXG4gICAgICBsZXQgeCA9IGQzLnNjYWxlTGluZWFyKClcclxuICAgICAgICAgIC5kb21haW4oW21pblBvaW50WzBdLCBtYXhQb2ludFswXV0pXHJcbiAgICAgICAgICAucmFuZ2UoW21pblBvaW50WzBdLCBtYXhQb2ludFswXV0pO1xyXG5cclxuICAgICAgbGV0IHhBeGlzID0gZDMuYXhpc0JvdHRvbSh4KVxyXG4gICAgICAgICAgLnRpY2tzKDEwKVxyXG4gICAgICAgICAgLnRpY2tTaXplKDEwKVxyXG4gICAgICAgICAgLnRpY2tQYWRkaW5nKDUpO1xyXG5cclxuICAgICAgbGV0IHkgPSBkMy5zY2FsZUxpbmVhcigpXHJcbiAgICAgICAgICAuZG9tYWluKFttaW5Qb2ludFsxXSwgbWF4UG9pbnRbMV1dKVxyXG4gICAgICAgICAgLnJhbmdlKFttaW5Qb2ludFsxXSwgbWF4UG9pbnRbMV1dKTtcclxuXHJcbiAgICAgIGxldCB5QXhpcyA9IGQzLmF4aXNSaWdodCh5KVxyXG4gICAgICAgICAgLnRpY2tzKDcpXHJcbiAgICAgICAgICAudGlja1NpemUoMTApXHJcbiAgICAgICAgICAudGlja1BhZGRpbmcoNSk7XHJcblxyXG4gICAgICAvLyBaT09NSU5HIEFORCBQQU5OSU5HIFNUVUZGXHJcblxyXG4gICAgICBsZXQgem9vbSA9IGQzLnpvb20oKVxyXG4gICAgICAgICAgLnNjYWxlRXh0ZW50KFsxLCA2XSlcclxuICAgICAgICAgIC5vbignem9vbScsICgpID0+IHtcclxuICAgICAgICAgICAgICAvL2NvbnN0cmFpbmVkIHpvb21pbmdcclxuICAgICAgICAgICAgICAvLyBtb2RpZnkgdGhlIHRyYW5zbGF0ZSBzbyB0aGF0IGl0IG5ldmVyIGV4aXRzIHRoZSB0YW5rXHJcbiAgICAgICAgICAgICAgZDMuZXZlbnQudHJhbnNmb3JtLnggPSBNYXRoLm1pbigwLCB0aGlzLnRhbmtXaWR0aCAqIChkMy5ldmVudC50cmFuc2Zvcm0uayAtIDEpLFxyXG4gICAgICAgICAgICAgICAgICBNYXRoLm1heCh0aGlzLnRhbmtXaWR0aCAqICgxIC0gZDMuZXZlbnQudHJhbnNmb3JtLmspLCBkMy5ldmVudC50cmFuc2Zvcm0ueCkpO1xyXG5cclxuICAgICAgICAgICAgICBkMy5ldmVudC50cmFuc2Zvcm0ueSA9IE1hdGgubWluKDAsIHRoaXMudGFua0hlaWdodCAqIChkMy5ldmVudC50cmFuc2Zvcm0uayAtIDEpLFxyXG4gICAgICAgICAgICAgICAgICBNYXRoLm1heCh0aGlzLnRhbmtIZWlnaHQgKiAoMSAtIGQzLmV2ZW50LnRyYW5zZm9ybS5rKSwgZDMuZXZlbnQudHJhbnNmb3JtLnkpKTtcclxuXHJcbiAgICAgICAgICAgICAgLy8gdHJhbnNsYXRlIGFuZCBzY2FsZVxyXG4gICAgICAgICAgICAgIHRoaXMuem9vbUdyb3VwLmF0dHIoJ3RyYW5zZm9ybScsIGQzLmV2ZW50LnRyYW5zZm9ybSk7XHJcblxyXG4gICAgICAgICAgICAgIC8vIHJlc2NhbGUgdGhlIGF4aXNcclxuICAgICAgICAgICAgICBnWGF4aXMuY2FsbCh4QXhpcy5zY2FsZShkMy5ldmVudC50cmFuc2Zvcm0ucmVzY2FsZVgoeCkpKTtcclxuICAgICAgICAgICAgICBnWWF4aXMuY2FsbCh5QXhpcy5zY2FsZShkMy5ldmVudC50cmFuc2Zvcm0ucmVzY2FsZVkoeSkpKTtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgLy90aGUgc3ZnIGNvbnRhaW5lclxyXG4gICAgICB0aGlzLnN2Z0NvbnRhaW5lciA9IGQzLnNlbGVjdCgnI21haW4tdmlzJylcclxuICAgICAgICAgICAgLmNsYXNzZWQoJ3N2Zy1jb250YWluZXInLCB0cnVlKVxyXG4gICAgICAgICAgICAvLyB0byBtYWtlIGl0IHJlc3BvbnNpdmUgd2l0aCBjc3NcclxuICAgICAgICAgICAgLmFwcGVuZCgnc3ZnJylcclxuICAgICAgICAgICAgLmF0dHIoJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLCAneE1pbllNaW4gbWVldCcpXHJcbiAgICAgICAgICAgIC5hdHRyKCd2aWV3Qm94JywgJzAgMCAnICsgdGhpcy50YW5rV2lkdGggKyAnICcgKyB0aGlzLnRhbmtIZWlnaHQpXHJcbiAgICAgICAgICAgIC8vIGFkZCB0aGUgY2xhc3Mgc3ZnLWNvbnRlbnRcclxuICAgICAgICAgICAgLmNsYXNzZWQoJ3N2Zy1jb250ZW50JywgdHJ1ZSlcclxuICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ21haW4tdmlzLXN2ZycpXHJcbiAgICAgICAgICAgIC5jYWxsKHpvb20pO1xyXG5cclxuICAgICAgLyogZGVwZW5kcyBvbiBzdmcgcmF0aW8sIGZvciBlLmcgMTI0MC8xOTAwID0gMC42NSBzbyBwYWRkaW5nLWJvdHRvbSA9IDY1JSAqL1xyXG4gICAgICBsZXQgcGVyY2VudGFnZSA9IE1hdGguY2VpbCgodGhpcy50YW5rSGVpZ2h0IC8gdGhpcy50YW5rV2lkdGgpICogMTAwKTtcclxuICAgICAgJCgnI21haW4tdmlzJykuYXBwZW5kKCQoJzxzdHlsZT4jbWFpbi12aXM6OmFmdGVyIHtwYWRkaW5nLXRvcDogJyArIHBlcmNlbnRhZ2UgKyAnJTtkaXNwbGF5OiBibG9jaztjb250ZW50OiBcIlwiO308L3N0eWxlPiAnKSk7XHJcblxyXG4gICAgICB0aGlzLnpvb21Hcm91cCA9IHRoaXMuc3ZnQ29udGFpbmVyLmFwcGVuZCgnc3ZnOmcnKTtcclxuXHJcbiAgICAgIC8vIFZpc3VhbGl6ZSB0aGUgYmFja2dyb3VuZCBpbWFnZSBpZiBpdCBpcyB1cGxvYWRlZFxyXG4gICAgICBpZiAocGFyYW1ldGVycy5iYWNrZ3JvdW5kX2ltYWdlKSB7XHJcbiAgICAgICAgICB0aGlzLnpvb21Hcm91cFxyXG4gICAgICAgICAgICAgIC5hcHBlbmQoJ2ltYWdlJylcclxuICAgICAgICAgICAgICAuYXR0cigneGxpbms6aHJlZicsICcvJyArIHBhcmFtZXRlcnMuYmFja2dyb3VuZF9pbWFnZSlcclxuICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnYmFja2dyb3VuZC1pbWFnZScpXHJcbiAgICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIHRoaXMudGFua0hlaWdodClcclxuICAgICAgICAgICAgICAuYXR0cignd2lkdGgnLCB0aGlzLnRhbmtXaWR0aClcclxuICAgICAgICAgICAgICAuYXR0cigneCcsICcwJylcclxuICAgICAgICAgICAgICAuYXR0cigneScsICcwJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vYXBwZW5kIHRoZSB0YW5rIGdyb3VwIHdpdGggYSB0cmFuc2Zvcm1hdGlvbiB3aGljaCByb3RhdGVzIHRoZSB5IGF4aXNcclxuICAgICAgdGhpcy50YW5rID0gdGhpcy56b29tR3JvdXAuYXBwZW5kKCdzdmc6ZycpXHJcbiAgICAgICAgICAuYXR0cignY2xhc3MnLCAndGFuaycpXHJcbiAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgKCk9PntcclxuICAgICAgICAgICAgICBsZXQgeCA9IHBhcmFtZXRlcnMuaW52ZXJ0ZWRfeCA/IC0xIDogMTtcclxuICAgICAgICAgICAgICBsZXQgeSA9IHBhcmFtZXRlcnMuaW52ZXJ0ZWRfeSA/IC0xIDogMTtcclxuICAgICAgICAgICAgICByZXR1cm4gJ3NjYWxlKCcgKyB4ICsgJywnICsgeSArICcpJztcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgLy9hZGQgdGhlIGNlbnRyb2lkXHJcbiAgICAgIHRoaXMudGFuay5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgLmF0dHIoJ2lkJywgJ2ctY2VudHJvaWQnKVxyXG4gICAgICAgICAgLmFwcGVuZCgnY2lyY2xlJylcclxuICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdjZW50cm9pZCcpXHJcbiAgICAgICAgICAuYXR0cigncicsIDYpXHJcbiAgICAgICAgICAuYXR0cignY3gnLCAwKVxyXG4gICAgICAgICAgLmF0dHIoJ2N5JywgMCk7XHJcblxyXG4gICAgICAvLyBhcnJvdyBmb3IgdGhlIGNlbnRyb2lkIGRpcmVjdGlvblxyXG4gICAgICB0aGlzLnRhbmsuc2VsZWN0KCcjZy1jZW50cm9pZCcpXHJcbiAgICAgICAgICAuYXBwZW5kKCdzdmc6ZGVmcycpXHJcbiAgICAgICAgICAuYXBwZW5kKCdzdmc6bWFya2VyJylcclxuICAgICAgICAgIC5hdHRyKCdpZCcsICdjZW50cm9pZC1hcnJvdycpXHJcbiAgICAgICAgICAuYXR0cigncmVmWCcsIDIpXHJcbiAgICAgICAgICAuYXR0cigncmVmWScsIDYpXHJcbiAgICAgICAgICAuYXR0cignbWFya2VyV2lkdGgnLCAxMylcclxuICAgICAgICAgIC5hdHRyKCdtYXJrZXJIZWlnaHQnLCAxMylcclxuICAgICAgICAgIC5hdHRyKCdvcmllbnQnLCAnYXV0bycpXHJcbiAgICAgICAgICAuYXBwZW5kKCdzdmc6cGF0aCcpXHJcbiAgICAgICAgICAuYXR0cignZCcsICdNMiwyIEwyLDExIEwxMCw2IEwyLDInKTtcclxuXHJcbiAgICAgIC8vIEFwcGVuZCB0aGUgbGluZSBmb3IgdGhlIGRpcmVjdGlvbiBhcnJvd1xyXG4gICAgICB0aGlzLnRhbmsuc2VsZWN0KCcjZy1jZW50cm9pZCcpXHJcbiAgICAgICAgICAuYXBwZW5kKCdsaW5lJylcclxuICAgICAgICAgIC5hdHRyKCdpZCcsICdjZW50cm9pZC1saW5lJylcclxuICAgICAgICAgIC5hdHRyKCdtYXJrZXItZW5kJywgJ3VybCgjY2VudHJvaWQtYXJyb3cpJyk7XHJcblxyXG4gICAgICAvL2FwcGVuZCBuZXR3b3JrICBncm91cFxyXG4gICAgICB0aGlzLnRhbmsuYXBwZW5kKCdnJylcclxuICAgICAgICAgIC5hdHRyKCdpZCcsICduZXR3b3JrLWdyb3VwJyk7XHJcblxyXG4gICAgICAvL2FwcGVuZCBkZWxhdW5heS10cmlhbmd1bGF0aW9uIGdyb3VwXHJcbiAgICAgIHRoaXMudGFuay5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgLmF0dHIoJ2lkJywgJ2RlbGF1bmF5LXRyaWFuZ3VsYXRpb24tZ3JvdXAnKTtcclxuXHJcbiAgICAgIC8vYXBwZW5kIHZvcm9ub2kgZ3JvdXBcclxuICAgICAgdGhpcy50YW5rLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAuYXR0cignaWQnLCAndm9ybm9pLWdyb3VwJyk7XHJcblxyXG4gICAgICAvL2FwcGVuZCB0aGUgZnJhbWUgdGltZSB0ZXh0XHJcbiAgICAgIHRoaXMuc3ZnQ29udGFpbmVyLmFwcGVuZCgndGV4dCcpXHJcbiAgICAgICAgICAuYXR0cignY2xhc3MnLCAnZnJhbWUtdGV4dCcpXHJcbiAgICAgICAgICAuYXR0cigneCcsIDMwKVxyXG4gICAgICAgICAgLmF0dHIoJ3knLCAzMClcclxuICAgICAgICAgIC50ZXh0KCctLSA6IC0tIDogLS0gJyk7XHJcblxyXG4gICAgICAvLyBhZGQgdGhlIGF4aXNcclxuICAgICAgbGV0IGdYYXhpcyA9IHRoaXMuc3ZnQ29udGFpbmVyLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAuYXR0cignY2xhc3MnLCAneCBheGlzJylcclxuICAgICAgICAgIC5jYWxsKHhBeGlzKTtcclxuXHJcbiAgICAgIGxldCBnWWF4aXMgPSB0aGlzLnN2Z0NvbnRhaW5lci5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3kgYXhpcycpXHJcbiAgICAgICAgICAuY2FsbCh5QXhpcyk7XHJcblxyXG4gICAgICAvLyBpbml0IHN0dWZmIGZyb20gb3RoZXIgbW9kdWxlc1xyXG4gICAgICBpbml0VG9vbHRpcCgpO1xyXG4gICAgICBpbml0U2xpZGVycygpO1xyXG5cclxuICAgICAgdGhpcy5pbml0Q29sb3JQaWNrZXIoKTtcclxuICAgICAgdmFyIGxpbmVjaGFydCA9IG5ldyBMaW5lQ2hhcnQoc3dhcm1EYXRhKTtcclxuICAgICAgdGhpcy5jcF9saXN0ZW5lcigpO1xyXG4gICAgICB0aGlzLnNmX2xpc3RlbmVycygpO1xyXG4gICAgICB0aGlzLmFmX2xpc3RlbmVycygpO1xyXG4gICAgICB0aGlzLm1kX2xpc3RlbmVycygpO1xyXG4gICAgICB0aGlzLm5fbGlzdGVuZXJzKCk7XHJcbiAgICAgIHRoaXMuaF9saXN0ZW5lcnMoKTtcclxuICAgICAgLy92YXIgZGVuZHJvZ3JhbSA9IG5ldyBEZW5kcm9ncmFtKCk7XHJcbi8vZmluZGluaXRcclxuICAgICAgdGhpcy5pbml0RGVuZHJvZ3JhbSgpO1xyXG4gICAgICBtYWtlUmVzaXphYmxlKHRoaXMudGFua0hlaWdodCwgdGhpcy50YW5rV2lkdGgpO1xyXG4gICAgICBkZWZhdWx0Q29uZmlnKCk7XHJcbiAgICAgIC8vIHN0YXJ0IHRoZSBhbmltYXRpb25cclxuICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgfTtcclxuICBzZXRNZWRvaWRBbmltYWwodmFsdWUpIHtcclxuICAgICAgdGhpcy5tZWRvaWRBbmltYWwgPSB2YWx1ZTtcclxuICB9XHJcblxyXG59XHJcblxyXG5cclxuXHJcblxyXG5jbGFzcyBDaGFydCBleHRlbmRzIERyYXdlciB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoZGF0YSkge1xyXG4gICAgc3VwZXIoKVxyXG4gICAgICAvLyBsb2FkIGluIGFyZ3VtZW50cyBmcm9tIGNvbmZpZyBvYmplY3RcclxuICAgIHRoaXMuc3dhcm1EYXRhID0gZGF0YTtcclxuICAgIHRoaXMuc3dhcm1fZmVhdHVyZXMgPSBPYmplY3Qua2V5cyh0aGlzLnN3YXJtRGF0YVswXSk7XHJcbiAgICB0aGlzLmxpbmVDaGFydFdpZHRoID0gNTAwMDtcclxuICAgIHRoaXMudHJlbmRDaGFydHNFbGVtID0gWydsb3dlci1vdXRlci1hcmVhJywgJ2xvd2VyLWlubmVyLWFyZWEnLCAnbWVkaWFuLWxpbmUnLCAndXBwZXItaW5uZXItYXJlYScsICd1cHBlci1vdXRlci1hcmVhJ107XHJcbiAgICB9XHJcblxyXG5cclxuICAgICAgICAvKipcclxuICAgICAqIGluaXQgdGhlIGxpbmUgY2hhcnQgYW5kIGFsc28gdGhlIHRyZW5kIGNoYXJ0XHJcbiAgICAgKi9cclxuXHJcblxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgTGluZUNoYXJ0IGV4dGVuZHMgQ2hhcnQge1xyXG4gICAgY29uc3RydWN0b3IoZGF0YSl7XHJcbiAgICBzdXBlcihkYXRhKVxyXG4gICAgdGhpcy5saW5lQ2hhcnQoKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgbGluZUNoYXJ0KCkge1xyXG5cclxuICAgICAgcmF0aW8gPSBNYXRoLmNlaWwodGhpcy5zd2FybURhdGEubGVuZ3RoIC8gdGhpcy5saW5lQ2hhcnRXaWR0aCk7XHJcblxyXG4gICAgICAvLyBTd2FybSBmZWF0dXJlcyBsaW5lIGNoYXJ0XHJcbiAgICAgIGxldCBsaW5lQ2hhcnRIZWlnaHQgPSA1MDA7IC8vIHRoZSBsaW5lIGNoYXJ0IGhlaWdodFxyXG4gICAgICBsZXQgbWFyZ2luID0ge1xyXG4gICAgICAgICAgdG9wOiAxMCxcclxuICAgICAgICAgIHJpZ2h0OiAwLFxyXG4gICAgICAgICAgYm90dG9tOiAxMDAsXHJcbiAgICAgICAgICBsZWZ0OiAxMFxyXG4gICAgICB9O1xyXG4gICAgICBsZXQgbWFyZ2luVG9MZWdlbmQgPSA1MDtcclxuXHJcbiAgICAgIGxldCBzd2FybV9mZWF0dXJlcyA9IHRoaXMuc3dhcm1fZmVhdHVyZXM7XHJcbiAgICAgIC8vIHJlbW92ZSB0aGUgdGltZSBrZXlcclxuICAgICAgbGV0IGluZGV4ID0gc3dhcm1fZmVhdHVyZXMuaW5kZXhPZigndGltZScpO1xyXG4gICAgICBzd2FybV9mZWF0dXJlcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG5cclxuICAgICAgbGV0IGxpbmVDaGFydERhdGEgPSBbXTtcclxuICAgICAgLy8gYWdncmVnYXRlIGFuZCBhdmVyYWdlIHRoZSBzd2FybSBkYXRhIHRvIHRoaXMubGluZUNoYXJ0V2lkdGggcG9pbnRzIGluIHRoZSBsaW5lIGNoYXJ0XHJcbiAgICAgIGlmICh0aGlzLnN3YXJtRGF0YS5sZW5ndGggPiB0aGlzLmxpbmVDaGFydFdpZHRoKSB7XHJcbiAgICAgICAgICAvLyB0bXAgYXJyYXkgZm9yIHRoZSBhZ2dyZWdhdGVkIGFuZCBhdmVyYWdlZCBmZWF0dXJlc1xyXG4gICAgICAgICAgbGV0IHRtcCA9IG5ldyBBcnJheShzd2FybV9mZWF0dXJlcy5sZW5ndGgpLmZpbGwoMCk7XHJcblxyXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnN3YXJtRGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgIC8vIGFnZ3JlZ2F0ZSB0aGUgZmVhdHVyZXMgaW4gdGhlIHRlbXAgYXJyYXlcclxuICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHN3YXJtX2ZlYXR1cmVzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgIHRtcFtqXSArPSB0aGlzLnN3YXJtRGF0YVtpXVtzd2FybV9mZWF0dXJlc1tqXV07XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIC8vIGlmIHRoZSByYXRpbyBpcyB6ZXJvIHRoZW4gYXZlcmFnZSBpdCBhbmQgc2V0IGl0IHRvIHplcm9cclxuICAgICAgICAgICAgICBpZiAoaSAlIHJhdGlvID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgIGxldCB0bXBfb2JqZWN0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgJ3RpbWUnOiBpIC8gcmF0aW9cclxuICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgc3dhcm1fZmVhdHVyZXMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHRtcFtqXSA9IHRtcFtqXSAvIHJhdGlvO1xyXG4gICAgICAgICAgICAgICAgICAgICAgdG1wX29iamVjdFtzd2FybV9mZWF0dXJlc1tqXV0gPSB0bXBbal07XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgIGxpbmVDaGFydERhdGEucHVzaCh0bXBfb2JqZWN0KTtcclxuICAgICAgICAgICAgICAgICAgdG1wID0gbmV3IEFycmF5KHN3YXJtX2ZlYXR1cmVzLmxlbmd0aCkuZmlsbCgwKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBsaW5lQ2hhcnREYXRhID0gdGhpcy5zd2FybURhdGE7XHJcbiAgICAgIH1cclxuICAgICAgLy9jb25zb2xlLmxvZyhsaW5lQ2hhcnREYXRhKTtcclxuICAgICAgem9vbUZ1bmN0aW9uID0gZDMuc2NhbGVMaW5lYXIoKVxyXG4gICAgICAgICAgLmRvbWFpbihbMCwgbGluZUNoYXJ0RGF0YS5sZW5ndGhdKVxyXG4gICAgICAgICAgLnJhbmdlKFswLCB0aGlzLmxpbmVDaGFydFdpZHRoXSk7XHJcblxyXG5cclxuICAgICAgLy8geCBheGlzIHNjYWxlIC0gbWludXMgbWFyZ2luTGluZUNoYXJ0ICBuZWVkZWRcclxuICAgICAgeCA9IGQzLnNjYWxlTGluZWFyKClcclxuICAgICAgICAgIC5kb21haW4oWzAsIGxpbmVDaGFydERhdGEubGVuZ3RoXSlcclxuICAgICAgICAgIC5yYW5nZShbMCwgdGhpcy5saW5lQ2hhcnRXaWR0aF0pO1xyXG4gICAgICBsZXQgeDIgPSBkMy5zY2FsZUxpbmVhcigpXHJcbiAgICAgICAgICAuZG9tYWluKFswLCBsaW5lQ2hhcnREYXRhLmxlbmd0aF0pXHJcbiAgICAgICAgICAucmFuZ2UoWzAsIHRoaXMubGluZUNoYXJ0V2lkdGhdKTtcclxuICAgICAgLy8gZGVmaW5lIHdoZXJlIHRoZSBheGlzIGlzIGV0Y1xyXG4gICAgICBsZXQgeEF4aXMgPSBkMy5heGlzQm90dG9tKHgpXHJcbiAgICAgICAgICAudGlja3MoMTApXHJcbiAgICAgICAgICAudGlja1NpemUoMTApXHJcbiAgICAgICAgICAudGlja1BhZGRpbmcoNSlcclxuICAgICAgICAgIC50aWNrRm9ybWF0KGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcigoZCAqIHJhdGlvKSAvIDE1MDApICUgNjAgKyAnOicgKyBNYXRoLmZsb29yKChkICogcmF0aW8pIC8gcGFyYW1ldGVyc1snZnBzJ10pICUgNjAgKyAnOjonICsgKGQgKiByYXRpbykgJSBwYXJhbWV0ZXJzWydmcHMnXTtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgLy8geSBheGlzIHNjYWxlIHdoaWNoIGlzIG5vcm1hbGl6ZWRcclxuICAgICAgeSA9IGQzLnNjYWxlTGluZWFyKClcclxuICAgICAgICAgIC5kb21haW4oWzAsIDEwMF0pXHJcbiAgICAgICAgICAucmFuZ2UoW2xpbmVDaGFydEhlaWdodCwgMF0pO1xyXG4gICAgICAvLyBkZWZpbmUgd2hlcmUgdGhlIGF4aXMgaXMgZXRjXHJcbiAgICAgIGxldCB5QXhpcyA9IGQzLmF4aXNMZWZ0KHkpXHJcbiAgICAgICAgICAudGlja3MoMClcclxuICAgICAgICAgIC50aWNrU2l6ZSgxMClcclxuICAgICAgICAgIC50aWNrUGFkZGluZyg1KTtcclxuXHJcbiAgICAgIGxldCBkcmFnZ2VkID0gKCk9PntcclxuICAgICAgICAgIC8vIGRyYWdnZWQgZnVuY3Rpb24gZ2V0IHRoZSBjb29yZGluYXRlcyBhbmQgY2FsY3VsYXRlIHRoZSB0aW1lIG1vbWVudCBmcm9tIHRoaXNcclxuICAgICAgICAgIGxldCBjb29yZHMgPSBkMy5tb3VzZSh0aGlzKTtcclxuICAgICAgICAgIGlmIChjb29yZHNbMF0gPCBtYXJnaW4ubGVmdCB8fCBjb29yZHNbMF0gPiB0aGlzLmxpbmVDaGFydFdpZHRoIHx8IGNvb3Jkc1sxXSA8IDAgfHwgY29vcmRzWzFdID4gbGluZUNoYXJ0SGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLy8gdG1wIHNjYWxlIHRvIGluY2x1ZGUgdGhlIHpvb20gZmFjdG9yXHJcbiAgICAgICAgICBsZXQgdG1wU2NhbGUgPSBkMy5zY2FsZUxpbmVhcigpXHJcbiAgICAgICAgICAgICAgLmRvbWFpbih6b29tRnVuY3Rpb24ucmFuZ2UoKSlcclxuICAgICAgICAgICAgICAucmFuZ2Uoem9vbUZ1bmN0aW9uLmRvbWFpbigpKTtcclxuICAgICAgICAgIC8vIHNldCB0aGUgbmV3IHRpbWVcclxuICAgICAgICAgIHRoaXMuc2V0SW5kZXhUaW1lKE1hdGguZmxvb3IoKHRtcFNjYWxlKGNvb3Jkc1swXSAtIG1hcmdpbi5sZWZ0KSkgKiByYXRpbykpO1xyXG4gICAgICB9O1xyXG4gICAgICBsZXQgem9vbSA9IGQzLnpvb20oKVxyXG4gICAgICAgICAgLnNjYWxlRXh0ZW50KFsxLCAyMF0pXHJcbiAgICAgICAgICAudHJhbnNsYXRlRXh0ZW50KFtcclxuICAgICAgICAgICAgICBbMCwgMF0sXHJcbiAgICAgICAgICAgICAgW3RoaXMubGluZUNoYXJ0V2lkdGgsIGxpbmVDaGFydEhlaWdodF1cclxuICAgICAgICAgIF0pXHJcbiAgICAgICAgICAuZXh0ZW50KFtcclxuICAgICAgICAgICAgICBbMCwgMF0sXHJcbiAgICAgICAgICAgICAgW3RoaXMubGluZUNoYXJ0V2lkdGgsIGxpbmVDaGFydEhlaWdodF1cclxuICAgICAgICAgIF0pXHJcbiAgICAgICAgICAub24oJ3pvb20nLCAoKT0+e1xyXG4gICAgICAgICAgICAgIC8vIGdldCB0aGUgdHJhbnNmb3JtIGZhY3RvclxyXG4gICAgICAgICAgICAgIGxldCB0ID0gZDMuZXZlbnQudHJhbnNmb3JtO1xyXG4gICAgICAgICAgICAgIC8vIGNoYW5nZSBzY2FsaW5nIGZ1bmN0aW9uXHJcbiAgICAgICAgICAgICAgem9vbUZ1bmN0aW9uID0geC5kb21haW4odC5yZXNjYWxlWCh4MikuZG9tYWluKCkpO1xyXG4gICAgICAgICAgICAgIC8vIHpvb20gZWFjaCBhdmFpYWJsZSBsaW5lXHJcbiAgICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIGxpbmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgIGlmIChsaW5lcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICB6b29tR3JvdXAuc2VsZWN0KCgnIycgKyBrZXkgKyAnTGluZScpKS5hdHRyKCdkJywgbGluZXNba2V5XSk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgLy8gem9vbSB0aGUgdHJlbmQgY2hhcnRzXHJcbiAgICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIHRyZW5kQ2hhcnRzWm9vbSkge1xyXG4gICAgICAgICAgICAgICAgICBpZiAodHJlbmRDaGFydHNab29tLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy50cmVuZENoYXJ0c0VsZW0ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB6b29tR3JvdXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNlbGVjdCgoJyMnICsga2V5ICsgJ1RyZW5kQ2hhcnQgLicgKyB0aGlzLnRyZW5kQ2hhcnRzRWxlbVtpXSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdkJywgdHJlbmRDaGFydHNab29tW2tleV1bdGhpcy50cmVuZENoYXJ0c0VsZW1baV1dKTtcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAvLyByZXNjYWxlIHRoZSBheGlzXHJcbiAgICAgICAgICAgICAgZ1hheGlzLmNhbGwoeEF4aXMpO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBtYWtlIHRoZSBzdmcgcmVzaXphYmxlXHJcbiAgICAgIGxldCBzd2FybUxpbmVDaGFydCA9IGQzLnNlbGVjdCgnI3N3YXJtLXZpcycpXHJcbiAgICAgICAgICAuY2xhc3NlZCgnc3ZnLWxpbmUtY2hhcnQtY29udGFpbmVyJywgdHJ1ZSlcclxuICAgICAgICAgIC8vIHRvIG1ha2UgaXQgcmVzcG9uc2l2ZSB3aXRoIGNzc1xyXG4gICAgICAgICAgLmFwcGVuZCgnc3ZnJylcclxuICAgICAgICAgIC5hdHRyKCdwcmVzZXJ2ZUFzcGVjdFJhdGlvJywgJ3hNaW5ZTWluIG1lZXQnKVxyXG5cclxuICAgICAgICAgIC5hdHRyKCd2aWV3Qm94JywgJzAgMCAnICsgdGhpcy5saW5lQ2hhcnRXaWR0aCArICcgJyArIChsaW5lQ2hhcnRIZWlnaHQgKyBtYXJnaW4uYm90dG9tKSlcclxuICAgICAgICAgIC8vIGFkZCB0aGUgY2xhc3Mgc3ZnLWNvbnRlbnRcclxuICAgICAgICAgIC5jbGFzc2VkKCdzdmctY29udGVudCcsIHRydWUpO1xyXG5cclxuICAgICAgem9vbUdyb3VwID0gc3dhcm1MaW5lQ2hhcnRcclxuICAgICAgICAgIC5hcHBlbmQoJ3N2ZzpnJylcclxuICAgICAgICAgIC5hdHRyKCdpZCcsICdsaW5lQ2hhcnRab29tJylcclxuICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyBtYXJnaW4ubGVmdCArICcsMCknKTtcclxuXHJcbiAgICAgIC8vIGFwcGVuZCBhIGdyb3VwIGZvciB0aGUgeCBheGlzXHJcbiAgICAgIC8vIGFkZCB0aGUgYXhpc1xyXG4gICAgICBsZXQgZ1hheGlzID0gem9vbUdyb3VwLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAuYXR0cignY2xhc3MnLCAneCBheGlzLWxpbmUtY2hhcnQnKVxyXG4gICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoMCwnICsgbGluZUNoYXJ0SGVpZ2h0ICsgJyknKVxyXG4gICAgICAgICAgLmNhbGwoeEF4aXMpO1xyXG5cclxuICAgICAgLy8gYXBwZW5kIGEgZ3JvdXAgZm9yIHRoZSB5IGF4aXNcclxuICAgICAgem9vbUdyb3VwLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAuYXR0cignY2xhc3MnLCAneSBheGlzLWxpbmUtY2hhcnQnKVxyXG4gICAgICAgICAgLmNhbGwoeUF4aXMpO1xyXG5cclxuXHJcbiAgICAgIC8vIHRoZSB0aW1lIGxpbmUgYXBwZW5kIHRoZSBsaW5lXHJcbiAgICAgIHpvb21Hcm91cC5hcHBlbmQoJ2xpbmUnKVxyXG4gICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3RpbWUtbGluZScpXHJcbiAgICAgICAgICAuYXR0cignaWQnLCAnbGluZUNoYXJ0VGltZUxpbmUnKVxyXG4gICAgICAgICAgLmF0dHIoJ3gxJywgMClcclxuICAgICAgICAgIC5hdHRyKCd5MScsIDApXHJcbiAgICAgICAgICAuYXR0cigneDInLCAwKVxyXG4gICAgICAgICAgLmF0dHIoJ3kyJywgbGluZUNoYXJ0SGVpZ2h0KTtcclxuXHJcbiAgICAgICAgICAvLyBjb2xvcnMgZm9yIHRoZSBsaW5lc1xyXG4gICAgICAgICAgbGV0IGxpbmVfY29sb3JzID0gZDMuc2NhbGVPcmRpbmFsKGQzLnNjaGVtZUNhdGVnb3J5MTApO1xyXG4gICAgICAgICAgbGV0IGxpbmVzID0ge307XHJcbiAgICAgICAgICAvLyBhZGQgdGhlIGxpbmVzIHRvIHRoZSBsaW5lIGNoYXJ0XHJcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN3YXJtX2ZlYXR1cmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgbGV0IG1pbiA9IGQzLm1pbihsaW5lQ2hhcnREYXRhLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBkW3N3YXJtX2ZlYXR1cmVzW2ldXTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICBsZXQgbWF4ID0gZDMubWF4KGxpbmVDaGFydERhdGEsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGRbc3dhcm1fZmVhdHVyZXNbaV1dO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICBsZXQgbm9ybWFsaXphdGlvblNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oW21pbiwgbWF4XSkucmFuZ2UoWzAsIDEwMF0pO1xyXG4gICAgICAgICAgICAgIGxldCBsaW5lID0gZDMubGluZSgpXHJcbiAgICAgICAgICAgICAgICAgIC54KGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB4KGRbJ3RpbWUnXSk7XHJcbiAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgIC55KGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB5KG5vcm1hbGl6YXRpb25TY2FsZShkW3N3YXJtX2ZlYXR1cmVzW2ldXSkpO1xyXG4gICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICBsaW5lc1tzd2FybV9mZWF0dXJlc1tpXV0gPSBsaW5lO1xyXG4gICAgICAgICAgICAgIC8vYXBwZW5kIHRoZSBsaW5lIHRvIHRoZSBsaW5lIGNoYXJ0XHJcbiAgICAgICAgICAgICAgem9vbUdyb3VwLmFwcGVuZCgncGF0aCcpXHJcbiAgICAgICAgICAgICAgICAgIC5kYXRhKFtsaW5lQ2hhcnREYXRhXSlcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ2lkJywgKHN3YXJtX2ZlYXR1cmVzW2ldICsgJ0xpbmUnKSlcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xpbmUgbGluZUNoYXJ0TGluZScpXHJcbiAgICAgICAgICAgICAgICAgIC5zdHlsZSgnc3Ryb2tlJywgbGluZV9jb2xvcnMoaSkpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCdkJywgbGluZSlcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ25hbWUnLCBzd2FybV9mZWF0dXJlc1tpXSk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgJCgnI2xpbmVDaGFydFRpbWVMaW5lJykuYXBwZW5kVG8oJyNsaW5lQ2hhcnRab29tJyk7XHJcbiAgICAgICAgICAvLyBhcHBlbmQgdGhlIHpvb20gcmVjdGFuZ2xlXHJcbiAgICAgICAgICB6b29tR3JvdXAuYXBwZW5kKCdyZWN0JylcclxuICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnem9vbScpXHJcbiAgICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgdGhpcy5saW5lQ2hhcnRXaWR0aClcclxuICAgICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgbGluZUNoYXJ0SGVpZ2h0KVxyXG4gICAgICAgICAgICAgIC5jYWxsKHpvb20pXHJcbiAgICAgICAgICAgICAgLm9uKCdjbGljaycsIGRyYWdnZWQpXHJcbiAgICAgICAgICAgICAgLmNhbGwoZDMuZHJhZygpXHJcbiAgICAgICAgICAgICAgICAgIC5vbignZHJhZycsIGRyYWdnZWQpXHJcbiAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgIC8vIGFwcGVuZCB0aGUgbGVnZW5kIGZvciB0aGUgbGluZSBjaGFydFxyXG4gICAgICAvLyB2YXJzIGZvciB0aGUgbGVnZW5kXHJcbiAgICAgIGxldCBsZWdlbmRXaWR0aCA9IDEwMDtcclxuICAgICAgbGV0IGxlZ2VuZEhlaWdodCA9IDUwO1xyXG5cclxuICAgICAgLy9zZWxlY3QgYWxsIHRoZSBsaW5lc1xyXG4gICAgICBsZXQgY2hhcnRMaW5lcyA9IGQzLnNlbGVjdEFsbCgnLmxpbmUnKTtcclxuXHJcbiAgICAgIC8vYXBwZW5kIGEgZ3JvdXAgZm9yIHRoZSBsZWdlbmRcclxuICAgICAgc3dhcm1MaW5lQ2hhcnRcclxuICAgICAgICAgIC5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgLmF0dHIoJ2lkJywgJ2xpbmVDaGFydExlZ2VuZCcpXHJcbiAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgbWFyZ2luLmJvdHRvbSArICcsJyArIChsaW5lQ2hhcnRIZWlnaHQgKyBtYXJnaW5Ub0xlZ2VuZCkgKyAnKScpXHJcbiAgICAgICAgICAuc2VsZWN0QWxsKCdyZWN0LmxlZ2VuZCcpXHJcbiAgICAgICAgICAuZGF0YShjaGFydExpbmVzLl9ncm91cHNbMF0pXHJcbiAgICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgLy9hcHBlbmQgdGhlIHdob2xlIGxlZ2VuZCBpbiBhIGVhY2ggZnVuY3Rpb25cclxuICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uKGQsIGkpIHtcclxuICAgICAgICAgICAgICBsZXQgc3BhY2luZyA9IDYwMDtcclxuICAgICAgICAgICAgICBsZXQgdGV4dFNwYWNlID0gNDA7XHJcbiAgICAgICAgICAgICAgLy8gYXBwZW5kIHRoZSByZWN0YW5nbGVzIGZvciB0aGUgbGVnZW5kXHJcbiAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmFwcGVuZCgncmVjdCcpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsZWdlbmQnKVxyXG4gICAgICAgICAgICAgICAgICAuYXR0cignd2lkdGgnLCBsZWdlbmRXaWR0aClcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGxlZ2VuZEhlaWdodClcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gnLCAoc3BhY2luZyAqIGkpICsgJ3B4JylcclxuICAgICAgICAgICAgICAgICAgLnN0eWxlKCdmaWxsJywgZC5zdHlsZS5zdHJva2UpO1xyXG5cclxuICAgICAgICAgICAgICAvLyBhcHBlbmQgdGhlIHRleHQgZm9yIHRoZSBsZWdlbmRcclxuICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuYXBwZW5kKCd0ZXh0JylcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ2lkJywgZC5hdHRyaWJ1dGVzLmlkLnZhbHVlICsgJ0xlZ2VuZFRpdGxlJylcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xpbmUtY2hhcnQtbGVnZW5kLXRleHQnKVxyXG4gICAgICAgICAgICAgICAgICAuYXR0cigneScsIHRleHRTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gnLCAoc3BhY2luZyAqIGkgKyBsZWdlbmRXaWR0aCArIDEwKSArICdweCcpXHJcbiAgICAgICAgICAgICAgICAgIC50ZXh0KGQuYXR0cmlidXRlcy5uYW1lLnZhbHVlICsgJzogJyk7XHJcblxyXG4gICAgICAgICAgICAgIC8vYXBwZW5kIHRoZSB0ZXh0IGZvciB0aGUgdmFsdWUgb2YgdGhlIGxpbmVcclxuICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuYXBwZW5kKCd0ZXh0JylcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ2lkJywgZC5hdHRyaWJ1dGVzLmlkLnZhbHVlICsgJ1ZhbHVlJylcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xpbmUtY2hhcnQtbGVnZW5kLXRleHQnKVxyXG4gICAgICAgICAgICAgICAgICAuYXR0cigneScsIHRleHRTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gnLCAoc3BhY2luZyAqIGkgKyBsZWdlbmRXaWR0aCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAvL3RoZSBuZXh0IGV4cHJlc3Npb24gZ2V0cyB0aGUgdGV4dCBsZW5ndGhcclxuICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnIycgKyBkLmF0dHJpYnV0ZXMuaWQudmFsdWUgKyAnTGVnZW5kVGl0bGUnKS5ub2RlKCkuZ2V0Q29tcHV0ZWRUZXh0TGVuZ3RoKCkgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgMTApICsgJ3B4JylcclxuICAgICAgICAgICAgICAgICAgLnRleHQoJzAuMCcpO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAvL2FwcGVuZCBhIGxlZ2VuZCBncm91cCBmb3IgdGhlIHRyZW5kIGNoYXJ0c1xyXG4gICAgICBzd2FybUxpbmVDaGFydFxyXG4gICAgICAgICAgLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAuYXR0cignaWQnLCAndHJlbmRDaGFydExlZ2VuZCcpXHJcbiAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgbWFyZ2luLmJvdHRvbSArICcsJyArIChsaW5lQ2hhcnRIZWlnaHQgKyBtYXJnaW5Ub0xlZ2VuZCkgKyAnKScpXHJcbiAgICAgICAgICAuc2VsZWN0QWxsKCdyZWN0LmxlZ2VuZCcpXHJcbiAgICAgICAgICAuZGF0YShbJzUlIC0gOTUlJywgJzI1JSAtIDc1JScsICdNZWRpYW4nXSlcclxuICAgICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgICAvL2FwcGVuZCB0aGUgd2hvbGUgbGVnZW5kIGluIGEgZWFjaCBmdW5jdGlvblxyXG4gICAgICAgICAgLmVhY2goZnVuY3Rpb24oZCwgaSkge1xyXG4gICAgICAgICAgICAgIGxldCBzcGFjaW5nID0gODAwO1xyXG4gICAgICAgICAgICAgIGxldCB0ZXh0U3BhY2UgPSA0MDtcclxuICAgICAgICAgICAgICAvLyBhcHBlbmQgdGhlIHJlY3RhbmdsZXMgZm9yIHRoZSBsZWdlbmRcclxuICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuYXBwZW5kKCdyZWN0JylcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xlZ2VuZCcpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIGxlZ2VuZFdpZHRoKVxyXG4gICAgICAgICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgbGVnZW5kSGVpZ2h0KVxyXG4gICAgICAgICAgICAgICAgICAuYXR0cigneCcsIChzcGFjaW5nICogaSkgKyAncHgnKVxyXG4gICAgICAgICAgICAgICAgICAuc3R5bGUoJ2ZpbGwnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGlmIChpID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcjNzRhOWNmJztcclxuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaSA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnIzA0NWE4ZCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnIzUyNTI1Mic7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAvLyBhcHBlbmQgdGhlIHRleHQgZm9yIHRoZSBsZWdlbmRcclxuICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuYXBwZW5kKCd0ZXh0JylcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xpbmUtY2hhcnQtbGVnZW5kLXRleHQnKVxyXG4gICAgICAgICAgICAgICAgICAuYXR0cigneScsIHRleHRTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gnLCAoc3BhY2luZyAqIGkgKyBsZWdlbmRXaWR0aCArIDEwKSArICdweCcpXHJcbiAgICAgICAgICAgICAgICAgIC50ZXh0KGQpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICQoJyN0cmVuZENoYXJ0TGVnZW5kJykuaGlkZSgpO1xyXG5cclxuICAgICAgdGhpcy5pbml0TGluZUNoYXJ0QnV0dG9ucygpXHJcblxyXG5cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEluaXQgbGluZSBjaGFydCBidXR0b24gbGlzdGVuZXJzXHJcbiAgICovXHJcbiAgaW5pdExpbmVDaGFydEJ1dHRvbnMoKSB7XHJcbiAgICAgIC8vIGFkZCB0aGUgTGluZSBjaGFydCBidXR0b25zIHRvIHRoZSBmZWF0dXJlIHBhbmVsXHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zd2FybV9mZWF0dXJlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgbGV0IGNhcGl0YWxpemVkX2ZlYXR1cmVfc3RyaW5nID0gdGhpcy5zd2FybV9mZWF0dXJlc1tpXS5zcGxpdCgnXycpLmpvaW4oJyAnKTtcclxuICAgICAgICAgIGNhcGl0YWxpemVkX2ZlYXR1cmVfc3RyaW5nID0gY2FwaXRhbGl6ZWRfZmVhdHVyZV9zdHJpbmcuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBjYXBpdGFsaXplZF9mZWF0dXJlX3N0cmluZy5zbGljZSgxKTtcclxuXHJcbiAgICAgICAgICAkKCcjbGluZS1jaGFydC1mZWF0dXJlLWNoZWNrYm94ZXMnKVxyXG4gICAgICAgICAgICAgIC5hcHBlbmQoJzx0cj48dGg+IDxkaXYgY2xhc3M9XCJwcmV0dHkgcC1zd2l0Y2ggcC1maWxsIHAtYmlnZ2VyXCI+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGNsYXNzPVwibGluZS1jaGFydC1jaGVjay1ib3hcIiBpZD1cImRyYXctJyArXHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuc3dhcm1fZmVhdHVyZXNbaV0gKyAnXCIgZGF0YT1cIiMnICsgdGhpcy5zd2FybV9mZWF0dXJlc1tpXSArICdMaW5lXCIgLz48ZGl2IGNsYXNzPVwic3RhdGVcIj48bGFiZWw+JyArXHJcbiAgICAgICAgICAgICAgICAgIGNhcGl0YWxpemVkX2ZlYXR1cmVfc3RyaW5nICsgJzwvbGFiZWw+PC9kaXY+PC9kaXY+PC90aD48L3RyPicpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAkKCcubGluZS1jaGFydC1jaGVjay1ib3gnKS5jaGFuZ2UoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBsZXQgY2hlY2tib3ggPSAkKHRoaXMpO1xyXG4gICAgICAgICAgaWYgKGNoZWNrYm94LnByb3AoJ2NoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgICQoY2hlY2tib3guYXR0cignZGF0YScpKS5zaG93KCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICQoY2hlY2tib3guYXR0cignZGF0YScpKS5oaWRlKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcblxyXG59XHJcblxyXG4vKipcclxuICogQWRkIGEgdHJlbmQgY2hhcnQgc2hvd2luZyBtZWRpYW4gYW5kIHBlcmNlbnRpbGVzXHJcbiAqIC8vIC0gd2hpY2ggZmVhdHVyZVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFRyZW5kQ2hhcnQgZXh0ZW5kcyBDaGFydHtcclxuICAgIGNvbnN0cnVjdG9yKGVsZW0sIHN3YXJtRGF0YSl7XHJcbiAgICAgIHN1cGVyKHN3YXJtRGF0YSk7XHJcbiAgICAgIHRoaXMuZWxlbSA9IGVsZW07XHJcblxyXG4gICAgICB0aGlzLnRyZW5kY2hhcnQoKTtcclxuICAgICAgLy90aGlzLmRpc2FibGVMaW5lQ2hhcnQoKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZGlzYWJsZUxpbmVDaGFydCgpIHtcclxuICAgICAgICAkKCcubGluZUNoYXJ0QnV0dG9uJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgICAgICQoJy5saW5lLWNoYXJ0LWNoZWNrLWJveCcpLmF0dHIoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcbiAgICAgICAgJCgnLmxpbmVDaGFydExpbmUnKS5hdHRyKCd2aXNpYmlsaXR5JywgJ2hpZGRlbicpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICB0cmVuZGNoYXJ0KCl7XHJcbiAgICAvLyBjaGVjayB3aGljaCBmZWF0dXJlIHRvIGRpc3BsYXkgaW4gdGhlIHRyZW5kIGNoYXJ0XHJcbiAgICBsZXQgZmVhdHVyZSA9ICcnO1xyXG4gICAgaWYgKHRoaXMuZWxlbVsnaWQnXS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdzcGVlZCcpKSB7XHJcbiAgICAgICAgZmVhdHVyZSA9ICdzcGVlZCc7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuZWxlbVsnaWQnXS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdhY2NlbGVyYXRpb24nKSkge1xyXG4gICAgICAgIGZlYXR1cmUgPSAnYWNjZWxlcmF0aW9uJztcclxuICAgIH0gZWxzZSBpZiAodGhpcy5lbGVtWydpZCddLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2Rpc3RhbmNlX2NlbnRyb2lkJykpIHtcclxuICAgICAgICBmZWF0dXJlID0gJ2Rpc3RhbmNlX2NlbnRyb2lkJztcclxuICAgIH0gZWxzZSBpZiAodGhpcy5lbGVtWydpZCddLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ21pZGxpbmVfb2Zmc2V0JykpIHtcclxuICAgICAgICBmZWF0dXJlID0gJ21pZGxpbmVfb2Zmc2V0JztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgLy8gZGF0YSBpcyBub3QgbG9hZGVkIGZ1bGx5IC0tIHJldHVyblxyXG4gICAgLy9pZiAoIWRhdGFzZXRbMF1bZmVhdHVyZV0pIHtcclxuICAgIC8vICAgIHJldHVybjtcclxuICAgIC8vfVxyXG4gICAgLy8gY2hhbmdlIHRvIHRoZSB0cmVuZCBjaGFydCBsZWdlbmRcclxuICAgICQoJyNsaW5lQ2hhcnRMZWdlbmQnKS5oaWRlKCk7XHJcbiAgICAkKCcjdHJlbmRDaGFydExlZ2VuZCcpLnNob3coKTtcclxuICAgIC8vIGNoZWNrIGlmIGFscmVhZHkgY29tcHV0ZWQgYW5kIG9ubHkgaGlkZGVuXHJcbiAgICBpZiAoISQoKCcjJyArIGZlYXR1cmUgKyAnVHJlbmRDaGFydCcpKS5sZW5ndGgpIHtcclxuICAgICAgICAvLyBnZXQgdGhlIGRhdGEgZm9yIHRoZSB0cmVuZCBjaGFydFxyXG4gICAgICAgIGxldCB0cmVuZENoYXJ0RGF0YSA9IFtdO1xyXG4gICAgICAgIGxldCBudW1fYW5pbWFscyA9IGFuaW1hbElkcy5sZW5ndGg7XHJcbiAgICAgICAgLy8gY2FsY3VsYXRlIHRoZSBwZXJjZXRpbGVzIGZvciBldmVyeSB0aW1lIHN0ZXBcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN3YXJtRGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgdG1wID0gW107XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgbnVtX2FuaW1hbHM7IGorKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGFzZXRbaSAqIG51bV9hbmltYWxzICsgal0pIHtcclxuICAgICAgICAgICAgICAgICAgICB0bXAucHVzaChkYXRhc2V0W2kgKiBudW1fYW5pbWFscyArIGpdW2ZlYXR1cmVdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0cmVuZENoYXJ0RGF0YS5wdXNoKHBlcmNlbnRpbGVzTGluZUNoYXJ0KHRtcCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL2FnZ3JlZ2F0ZSBhbmQgYXZlcmFnZSB0aGUgdHJlbmRDaGFydERhdGEgdG8gdGhpcy5saW5lQ2hhcnRXaWR0aCBkYXRhIHBvaW50c1xyXG4gICAgICAgIGlmICh0cmVuZENoYXJ0RGF0YS5sZW5ndGggPiB0aGlzLmxpbmVDaGFydFdpZHRoKSB7XHJcbiAgICAgICAgICAgIGxldCB0bXBUcmVuZENoYXJ0RGF0YSA9IFtdO1xyXG5cclxuICAgICAgICAgICAgLy8gW3BlcmMwNSxwZXJjMjUscGVyYzUwLHBlcmM3NSxwZXJjOTVdXHJcbiAgICAgICAgICAgIGxldCB0bXAgPSBbMCwgMCwgMCwgMCwgMF07XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRyZW5kQ2hhcnREYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBhZ2dyZWdhdGVcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdG1wLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG1wW2pdICs9IHRyZW5kQ2hhcnREYXRhW2ldW2pdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gZGl2aWRlXHJcbiAgICAgICAgICAgICAgICBpZiAoaSAlIHJhdGlvID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0bXAubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG1wW2pdICs9IHRtcFtqXSAvIHJhdGlvO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvL2FkZCB0byB0aGVcclxuICAgICAgICAgICAgICAgICAgICB0bXBUcmVuZENoYXJ0RGF0YS5wdXNoKHRtcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gW3BlcmMwNSxwZXJjMjUscGVyYzUwLHBlcmM3NSxwZXJjOTVdXHJcbiAgICAgICAgICAgICAgICAgICAgdG1wID0gWzAsIDAsIDAsIDAsIDBdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRyZW5kQ2hhcnREYXRhID0gdG1wVHJlbmRDaGFydERhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGdldCBtaW4gYW5kIG1heCBmb3IgdGhlIG5vcm1hbGl6YXRpb25cclxuICAgICAgICBsZXQgbWluID0gZDMubWluKHRyZW5kQ2hhcnREYXRhLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkWzBdO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGxldCBtYXggPSBkMy5tYXgodHJlbmRDaGFydERhdGEsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGRbNF07XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbGV0IG5vcm1hbGl6YXRpb25TY2FsZSA9IGQzLnNjYWxlTGluZWFyKCkuZG9tYWluKFttaW4sIG1heF0pLnJhbmdlKFswLCAxMDBdKTtcclxuXHJcbiAgICAgICAgLy8gYWRkIGEgZ3JvdXAgZm9yIHRoZSB0cmVuZCBjaGFydFxyXG4gICAgICAgIGxldCB0cmVuZENoYXJ0ID0gem9vbUdyb3VwLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAgIC5hdHRyKCdpZCcsIChmZWF0dXJlICsgJ1RyZW5kQ2hhcnQnKSlcclxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3RyZW5kQ2hhcnREYXRhJyk7XHJcbiAgICAgICAgLy8gYXBwZW5kIHRoZSB6b29tIHJlY3RhbmdsZSBhZ2FpbiB0byB0aGUgZW5kIG9mIHRoZSBncm91cFxyXG4gICAgICAgICQoJy56b29tJykuYXBwZW5kVG8oJyNsaW5lQ2hhcnRab29tJyk7XHJcbiAgICAgICAgJCgnI2xpbmVDaGFydFRpbWVMaW5lJykuYXBwZW5kVG8oJyNsaW5lQ2hhcnRab29tJyk7XHJcbiAgICAgICAgLy8gdmFyIHRvIHNhdmUgdGhlIGZ1bmN0aW9ucyBmb3IgdGhlIHpvb21cclxuICAgICAgICB0cmVuZENoYXJ0c1pvb21bZmVhdHVyZV0gPSB7fTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnRyZW5kQ2hhcnRzRWxlbS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAvLyBmdW5jdGlvbnMgZm9yIHRoZSB1cHBlciBhbmQgaW5uZXIgYXJlYXMgYW5kIHRoZSBtZWRpYW5cclxuICAgICAgICAgICAgbGV0IHRlbXA7XHJcbiAgICAgICAgICAgIC8vIGxvd2VyIG91dGVyIGFyZWEgYW5kIGxvd2VyIGlubmVyIGFyZWFcclxuICAgICAgICAgICAgaWYgKGkgPCAyKSB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wID0gZDMuYXJlYSgpXHJcbiAgICAgICAgICAgICAgICAgICAgLngoZnVuY3Rpb24oZCwgaikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geChqKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC55MChmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB5KG5vcm1hbGl6YXRpb25TY2FsZShkWyhpICsgMSldKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAueTEoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geShub3JtYWxpemF0aW9uU2NhbGUoZFtpXSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIG1lZGlhbiBsaW5lXHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGkgPT09IDIpIHtcclxuICAgICAgICAgICAgICAgIHRlbXAgPSBkMy5saW5lKClcclxuICAgICAgICAgICAgICAgICAgICAueChmdW5jdGlvbihkLCBqKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB4KGopO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLnkoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geShub3JtYWxpemF0aW9uU2NhbGUoZFtpXSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHVwcGVyIGlubmVyIGFyZWEgYW5kIHVwcGVyIG91dGVyIGFyZWFcclxuICAgICAgICAgICAgZWxzZSBpZiAoaSA+IDIpIHtcclxuICAgICAgICAgICAgICAgIHRlbXAgPSBkMy5hcmVhKClcclxuICAgICAgICAgICAgICAgICAgICAueChmdW5jdGlvbihkLCBqKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB4KGopO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLnkwKGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHkobm9ybWFsaXphdGlvblNjYWxlKGRbaV0pKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC55MShmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB5KG5vcm1hbGl6YXRpb25TY2FsZShkWyhpIC0gMSldKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gc2F2ZSB0aGlzIGZvciB0aGUgbGF0ZXIgem9vbVxyXG4gICAgICAgICAgICB0cmVuZENoYXJ0c1pvb21bZmVhdHVyZV1bdGhpcy50cmVuZENoYXJ0c0VsZW1baV1dID0gdGVtcDtcclxuICAgICAgICAgICAgLy8gYXBwZW5kIGl0IHRvIHRoZSBwYXRoXHJcbiAgICAgICAgICAgIHRyZW5kQ2hhcnQuYXBwZW5kKCdwYXRoJylcclxuICAgICAgICAgICAgICAgIC5kYXRhKFt0cmVuZENoYXJ0RGF0YV0pXHJcbiAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCB0aGlzLnRyZW5kQ2hhcnRzRWxlbVtpXSlcclxuICAgICAgICAgICAgICAgIC5hdHRyKCdkJywgdGVtcCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBzaG93IHRoZSB0cmVuZCBjaGFydFxyXG4gICAgICAgICQoKCcjJyArIGZlYXR1cmUgKyAnVHJlbmRDaGFydCcpKS5zaG93KCk7XHJcbiAgICB9XHJcbn1cclxufVxyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZSB0aGUgbGluZSBjaGFydCBmaWVsZHMgYW5kIHRoZSBsaW5lIGNoYXJ0IHRpbWUgbGluZVxyXG4gKi9cclxuXHJcblxyXG5cclxuLyoqXHJcbiAqIERyYXdpbmcgZnVuY3Rpb24gLSBpcyBjYWxsZWQgZm9yIGVhY2ggdGltZXN0ZXBcclxuICogaW5kZXhUaW1lIHNhdmVzIHRoZSBjdXJyZW50IHRpbWVcclxuICovXHJcblxyXG5cclxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgU2V0dGVyXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuLyoqXHJcbiAqIFNldCB0aGUgaW5kZXggdGltZSB0byBhIG5ldyB2YWx1ZVxyXG4gKiBAcGFyYW0ge051bWJlcn0gdmFsdWUgLSBuZXcgdGltZSBzdGVwXHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBEZWNyZWFzZSB0aW1lIGJ5IDFcclxuICovXHJcblxyXG5cclxuLyoqXHJcbiAqIFNldCB0aGUgdGhlIG5ldyBhY3RpdmUgc2NhbGUgLSBlLmcuIHNwZWVkLCBhY2NlbGVyYXRpb24sIGJsYWNrIGV0Yy5cclxuICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlIC0gYWN0aXZlIHNjYWxlIGZvciB0aGUgaW5kaXZpZHVhbCBhbmltYWxzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2V0QWN0aXZlU2NhbGUodmFsdWUpIHtcclxuICAgIGFjdGl2ZVNjYWxlID0gdmFsdWU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXQgdGhlIG5ldyBtZWRvaWQgYW5pbWFsXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSB2YWx1ZSAtIFVuaXF1ZXRoaXMuaWQgb2YgdGhlIGFuaW1hbFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldE1lZG9pZEFuaW1hbCh2YWx1ZSkge1xyXG4gICAgbWVkb2lkQW5pbWFsID0gdmFsdWU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXQgdGhlIHNlbGVjdGVkIGFuZCBoaWdobGlnaHRlZCBhbmltYWxzXHJcbiAqIEBwYXJhbSB7YXJyYXl9IHZhbHVlIC0gYXJyYXkgb2YgdW5xaXVldGhpcy5pZCBvZiB0aGUgYW5pbWFsc1xyXG4gKi9cclxuIiwiLyplc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtbGV0cyovXHJcbi8qZ2xvYmFsIHdpbmRvdywkLCBkMywgUG9seUJvb2wsIHBhcmFtZXRlcnMsIFNldCovXHJcbi8vIGltcG9ydCAqIGFzIHNwdiBmcm9tICcuL3NwYXRpYWxfdmlldy5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgbmV0d29ya0hpZXJhcmNoeVxyXG59IGZyb20gJy4vZXhwbG9yZS5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgaW5kZXhUaW1lLFxyXG4gICAgYXJyYXlBbmltYWxzLFxyXG4gICAgc2V0QWN0aXZlQW5pbWFscyxcclxuICAgIGRlY0luZGV4VGltZSxcclxuICAgIERyYXdlclxyXG59IGZyb20gJy4vc3BhdGlhbF92aWV3L3NwYXRpYWxfdmlldy5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgc2hvd05ldHdvcmtIaWVyYXJjaHksXHJcbiAgICBuZXR3b3JrQ29sb3IsXHJcbiAgICBuZXR3b3JrQ29sb3JTY2FsZSxcclxuICAgIG5ldHdvcmtBdXRvLFxyXG4gICAgc2V0TmV0d29yTGltaXQsXHJcbiAgICBuZXR3b3JrTGltaXQsXHJcbn0gZnJvbSAnLi9uZXR3b3JrLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBzdGFuZGFyZERldmlhdGlvblxyXG59IGZyb20gJy4vaGVscGVycy5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgc2V0VGltZVNsaWRlcixcclxuICAgIGluaXRUb29sdGlwLFxyXG4gICAgdG9vbHRpcEZ1bmN0aW9uLFxyXG4gICAgaW5pdFNsaWRlcnMsXHJcbiAgICB0b29sdGlwXHJcbn0gZnJvbSAnLi9zcGF0aWFsX3ZpZXcvaW50ZXJhY3Rpb24uanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIC8vbGluZUNoYXJ0LFxyXG4gICAgdXBkYXRlTGluZUNoYXJ0LFxyXG4gICAgTGluZUNoYXJ0XHJcbn0gZnJvbSAnLi9saW5lX2NoYXJ0LmpzJztcclxuXHJcbi8vbGV0IHpvb21Hcm91cDsgLy8gem9vbSBncm91cCBmb3IgdGhlIHNwZWNpZmljIGRlbmRyb2dyYW1cclxubGV0IHRyZWVtYXA7IC8vIGJlaWRlXHJcbmxldCB0b29sdGlwRGl2O1xyXG5sZXQgc3BhdGlhbFZpZXc7IC8vIGdldCB0aGUgc3BhdGlhbCB2aWV3IHN2ZyBmcm9tIHRoZSBtYWluIHZpc1xyXG5sZXQgc3ZnTGVnZW5kO1xyXG5sZXQgaGllcmFyY2h5TGV2ZWxzID0ge307XHJcbmxldCBzZXRPcGVyYXRpb24gPSAndW5pb24nO1xyXG5sZXQgaWQ7IC8vIG5lZWRlZCBmb3IgdGhlIGNvbGxhcHNlIGZ1bmN0aW9uXHJcbi8vU3RhdGljIGNvbG9yIHNjYWxlIGZvciB0aGUgZGVuZHJvZ3JhbSB2YXJpYWNuZSBjb2xvcmluZ1xyXG5sZXQgc3RhbmRhcmREZXZpYXRpb25Db2xvclNjYWxlID0gZDMuc2NhbGVUaHJlc2hvbGQoKVxyXG4gICAgLmRvbWFpbihcclxuICAgICAgICBbMCwgLjEsIC4yLCAuMywgLjQsIC41LCAuNiwgLjcsIC44LCAuOSwgMV1cclxuICAgIClcclxuICAgIC5yYW5nZShbJyNmN2ZiZmYnLCAnI2RlZWJmNycsICcjYzZkYmVmJywgJyM5ZWNhZTEnLCAnIzZiYWVkNicsICcjNDI5MmM2JywgJyMyMTcxYjUnLCAnIzA4NTE5YycsICcjMDgzMDZiJ10pO1xyXG5cclxuZXhwb3J0IGNvbnN0IG1heE51bWJlckhpZXJhcmNoaWVzID0gNDtcclxuZXhwb3J0IGxldCBuZXR3b3JrSGllcmFyY2h5SWRzID0gW107XHJcbmV4cG9ydCBsZXQgaGllcmFyY2h5Q29sb3JzID0ge307XHJcbmV4cG9ydCBsZXQgaGllcmFyY2h5R3JvdXBTdGRldiA9IHt9O1xyXG4vLyBUT0RPIGFkZCBtb3JlIGNvbG9yc1xyXG5leHBvcnQgbGV0IGNvbG9ycyA9IFsnIzdmYzk3ZicsICcjMzg2Y2IwJywgJyNlNzI5OGEnLCAnI2ZmOTkwMCddO1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5leHBvcnQgY2xhc3MgRGVuZHJvZ3JhbSBleHRlbmRzIERyYXdlcntcclxuICBjb25zdHJ1Y3Rvcigpe1xyXG4gICAgc3VwZXIoKTtcclxuICAgIHRoaXMuaW5pdERlbmRyb2dyYW0oKVxyXG4gIH1cclxuXHJcbiAgaW5pdERlbmRyb2dyYW0oKSB7XHJcbiAgICAgIC8vIGNvbnN0YW5jdCBmYWN0b3JzIGZvciB0aGUgZGVuZGdyb2dyYW1cclxuICAgICAgbGV0IG1hcmdpbiA9IDIwLFxyXG4gICAgICAgICAgd2lkdGggPSA1MDAwLFxyXG4gICAgICAgICAgaGVpZ2h0ID0gNTAwMDtcclxuXHJcbiAgICAgIC8vIHpvb20gZnVuY3Rpb24gZm9yIHRoZSBkZW5kcm9ncmFtXHJcbiAgICAgIGxldCB6b29tID0gZDMuem9vbSgpXHJcbiAgICAgICAgICAuc2NhbGVFeHRlbnQoWzEsIDEwXSlcclxuICAgICAgICAgIC5vbignem9vbScsICgpPT57XHJcbiAgICAgICAgICAgICAgLy9jb25zdHJhaW5lZCB6b29taW5nXHJcbiAgICAgICAgICAgICAgZDMuZXZlbnQudHJhbnNmb3JtLnggPSBNYXRoLm1pbigwLCB3aWR0aCAqIChkMy5ldmVudC50cmFuc2Zvcm0uayAtIDEpLFxyXG4gICAgICAgICAgICAgICAgICBNYXRoLm1heCh3aWR0aCAqICgxIC0gZDMuZXZlbnQudHJhbnNmb3JtLmspLCBkMy5ldmVudC50cmFuc2Zvcm0ueCkpO1xyXG5cclxuICAgICAgICAgICAgICBkMy5ldmVudC50cmFuc2Zvcm0ueSA9IE1hdGgubWluKDAsIGhlaWdodCAqIChkMy5ldmVudC50cmFuc2Zvcm0uayAtIDEpLFxyXG4gICAgICAgICAgICAgICAgICBNYXRoLm1heChoZWlnaHQgKiAoMSAtIGQzLmV2ZW50LnRyYW5zZm9ybS5rKSwgZDMuZXZlbnQudHJhbnNmb3JtLnkpKTtcclxuXHJcbiAgICAgICAgICAgICAgLy8gdHJhbnNsYXRlIGFuZCBzY2FsZVxyXG4gICAgICAgICAgICAgIHRoaXMuem9vbUdyb3VwLmF0dHIoJ3RyYW5zZm9ybScsIGQzLmV2ZW50LnRyYW5zZm9ybSk7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgIC8vIHN2ZyBjb250YWluZXIgZm9yIHRoZSBkZW5kcm9ncmFtXHJcbiAgICAgIGxldCBzdmcgPSBkMy5zZWxlY3QoJyNkZW5kcm9ncmFtLXBhbmVsJylcclxuICAgICAgICAgIC5jbGFzc2VkKCdzdmctZGVuZHJvZ3JhbS1jb250YWluZXInLCB0cnVlKVxyXG4gICAgICAgICAgLmFwcGVuZCgnc3ZnJylcclxuICAgICAgICAgIC5hdHRyKCdwcmVzZXJ2ZUFzcGVjdFJhdGlvJywgJ3hNaW5ZTWluIG1lZXQnKVxyXG4gICAgICAgICAgLmF0dHIoJ3ZpZXdCb3gnLCAnMCAwICcgKyB3aWR0aCArICcgJyArIGhlaWdodClcclxuICAgICAgICAgIC8vIGFkZCB0aGUgY2xhc3Mgc3ZnLWNvbnRlbnRcclxuICAgICAgICAgIC5jbGFzc2VkKCdzdmctY29udGVudC1kZW5kcm9ncmFtJywgdHJ1ZSlcclxuICAgICAgICAgIC5jYWxsKHpvb20pO1xyXG5cclxuICAgICAgaW5pdERlbmRyb2dyYW1MZWdlbmQoKTtcclxuXHJcbiAgICAgIC8vIGFwcGVuZCB0aGUgem9vbSBncm91cCB0byB0aGUgc3ZnXHJcbiAgICAgIHRoaXMuem9vbUdyb3VwID0gc3ZnLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgbWFyZ2luICsgJywnICsgbWFyZ2luICsgJyknKVxyXG4gICAgICAgICAgLmFwcGVuZCgnc3ZnOmcnKTtcclxuXHJcbiAgICAgIC8vIGQzIHRyZWVcclxuICAgICAgdHJlZW1hcCA9IGQzLnRyZWUoKSAvL2QzLmNsdXN0ZXIoKVxyXG4gICAgICAgICAgLnNpemUoWyhoZWlnaHQgLSAxMCAqIG1hcmdpbiksICh3aWR0aCAtIDEwICogbWFyZ2luKV0pO1xyXG5cclxuICAgICAgLy8gc2V0IHRoZSBzcGF0aWFsIHZpZXcgLSBuZWVkZWQgdG8gYWRkIHRoZSBjbHVzdGVyaW5nIHRvIHRoZSBzcGF0aWFsIHZpZXcgd2luZG93XHJcbiAgICAgIHNwYXRpYWxWaWV3ID0gZDMuc2VsZWN0KCcudGFuaycpO1xyXG5cclxuICAgICAgLy8gaW5pdCBkZW5kcm9ncmFtIHNsaWRlclxyXG4gICAgICAvLyBpbml0aWFsaXplIHRoZSBOZXR3b3JrIHNsaWRlclxyXG4gICAgICAkKCcjZGVuZHJvZ3JhbS1wYW5lbC1sZXZlbC1zbGlkZXInKVxyXG4gICAgICAgICAgLnNsaWRlcih7XHJcbiAgICAgICAgICAgICAgcmFuZ2U6ICdtYXgnLFxyXG4gICAgICAgICAgICAgIG1pbjogMixcclxuICAgICAgICAgICAgICBtYXg6IDIsXHJcbiAgICAgICAgICAgICAgc3RlcDogMSxcclxuICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5oaWVyYXJjaHlMZXZlbHNbJ2gwJ10sXHJcbiAgICAgICAgICAgICAgc2xpZGU6IChldmVudCwgdWkpPT57XHJcbiAgICAgICAgICAgICAgICAgIGxldCBpZCA9ICQoJy5zaG93LWRlbmRyb2dyYW0uYnRuLXByaW1hcnknKS5hdHRyKCdkYXRhJyk7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuc2V0SGllcmFyY2h5TGV2ZWwoaWQsIHVpLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVEZW5kcm9ncmFtKCk7XHJcbiAgICAgICAgICAgICAgICAgIC8vIGlmIG5vIGFuaW1hdGlvbiBpcyBhY3RpdmUgZHJhdyB0aGUgbmV3IGNsdXN0ZXJpbmcgYW5kIGRlbmRyb2dyYW1cclxuICAgICAgICAgICAgICAgICAgLy8gZHJhd0RlbmRyb2dyYW0oKTtcclxuICAgICAgICAgICAgICAgICAgaWYgKCEkKCcjcGxheS1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIC8vZ28gYmFjayBvbmUgc2Vjb25kIGFuZCBkcmF3IHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAvL3RoaXMgYXBwbHlzIHRoZSBjaGFuZ2VzXHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlY0luZGV4VGltZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXdEZW5kcm9ncmFtKCk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgIC8vIGluaXQgdGhlIHRvb2x0aXAgZm9yIHRoZSBkZW5kcm9ncmFtXHJcbiAgICAgIHRvb2x0aXBEaXYgPSBkMy5zZWxlY3QoJyNkZW5kcm9ncmFtLXRvb2x0aXAnKVxyXG4gICAgICAgICAgLnN0eWxlKCdsZWZ0JywgMCArICdweCcpXHJcbiAgICAgICAgICAuc3R5bGUoJ3RvcCcsIDAgKyAncHgnKVxyXG4gICAgICAgICAgLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICB0b29sdGlwRGl2XHJcbiAgICAgICAgICAgICAgICAgIC5zdHlsZSgnb3BhY2l0eScsIDEpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIC8vIGluaXQgdGhlIGhpZXJhcmNoeSBsZWdlbmRcclxuICAgICAgbGV0IGxlZ2VuZFdpZHRoID0gbWF4TnVtYmVySGllcmFyY2hpZXMgKiAxMDA7XHJcbiAgICAgIGxldCBsZWdlbmRIZWlnaHQgPSA2MDtcclxuXHJcbiAgICAgIHN2Z0xlZ2VuZCA9IGQzLnNlbGVjdCgnI2hpZXJhcmNoeS1sZWdlbmQtZGl2JylcclxuICAgICAgICAgIC5hcHBlbmQoJ3N2ZycpXHJcbiAgICAgICAgICAuYXR0cignaWQnLCAnaGllcmFyY2h5LWxlZ2VuZCcpXHJcbiAgICAgICAgICAuYXR0cignd2lkdGgnLCBsZWdlbmRXaWR0aClcclxuICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCBsZWdlbmRIZWlnaHQpO1xyXG5cclxuICAgICAgLy8gYWRkIHBhdHRlcm4gZm9yIHN0cmlwZWQgYmFja2dyb3VuZCBvZiBpbnRlcnNlY3Rpb25zIGV0Yy5cclxuICAgICAgc3BhdGlhbFZpZXcuYXBwZW5kKCdkZWZzJylcclxuICAgICAgICAgIC5hcHBlbmQoJ3N2ZzpwYXR0ZXJuJylcclxuICAgICAgICAgIC5hdHRyKCdpZCcsICdzdHJpcGVkJylcclxuICAgICAgICAgIC5hdHRyKCdwYXR0ZXJuVW5pdHMnLCAndXNlclNwYWNlT25Vc2UnKVxyXG4gICAgICAgICAgLmF0dHIoJ3dpZHRoJywgJzIwJylcclxuICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCAnNScpXHJcbiAgICAgICAgICAuYXR0cigncGF0dGVyblRyYW5zZm9ybScsICdyb3RhdGUoNjApJylcclxuICAgICAgICAgIC5hcHBlbmQoJ3JlY3QnKVxyXG4gICAgICAgICAgLmF0dHIoJ3dpZHRoJywgNSlcclxuICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCAxMClcclxuICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKDAsMCknKVxyXG4gICAgICAgICAgLnN0eWxlKCdmaWxsJywgJyM2NzAwMGQnKTtcclxuXHJcbiAgfTtcclxuXHJcbn1cclxuXHJcblxyXG4vKipcclxuICogSW5pdGlhbGl6ZSB0aGUgZGVuZHJvZ3JhbVxyXG4gKi9cclxuXHJcblxyXG4vKipcclxuICogRHJhdyB0aGUgZGVuZGdyb2dyYW0gZm9yIG9uZSBzdGVwXHJcbiAqIEZ1cnRoZXIgY2FsbHMgdGhlIGRyYXdIaWVyYXJjaHkgZnVuY3Rpb25cclxuICovXHJcblxyXG5cclxuLyoqXHJcbiAqIENvbGxhcHNlIGZ1bmN0aW9uIC0gb25seSBzaG93IHRoZSBhY3RpdmUgbGV2ZWwgYW5kIG9uZSBzdWIgbGV2ZWxcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjb2xsYXBzZShkKSB7XHJcbiAgICBpZiAoZC5jaGlsZHJlbiAmJiBkLmRlcHRoIDw9IGhpZXJhcmNoeUxldmVsc1snaCcgKyBpZF0pIHtcclxuICAgICAgICBkLl9jaGlsZHJlbiA9IGQuY2hpbGRyZW47XHJcbiAgICAgICAgZC5fY2hpbGRyZW4uZm9yRWFjaChjb2xsYXBzZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGQuY2hpbGRyZW4gPSBudWxsO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogRHJhdyB0aGUgYWxsIGhpZXJhcmNoaWVzIGluIHRoZSBzcGF0aWFsIHZpZXdcclxuICogYWRkIGEgZ3JvdXAgd2l0aCB0aGUgaWRzIG9mIHRoZSBhbmltYWxzIGluIGl0IHRvIHRoZSB2aWV3XHJcbiAqIHdpdGggcGF0aCBjaGlsZCBlbGVtZW50c1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGRyYXdIaWVyYXJjaHkoKSB7XHJcbiAgICAvLyBpZCBvZiB0aGUgaGllcmFyY2h5IGUuZy4gWzEsNSwzXVxyXG4gICAgbGV0IGhpZXJhcmNoeUlkcyA9IE9iamVjdC5rZXlzKG5ldHdvcmtIaWVyYXJjaHkpLm1hcChmdW5jdGlvbih4KSB7XHJcbiAgICAgICAgcmV0dXJuIHgucmVwbGFjZSgnaCcsICcnKTtcclxuICAgIH0pO1xyXG4gICAgLy8gIFRoZSBjbHVzdGVyaW5nIGluIGFuIDJEIGFycmF5IHdpdGggd2hpY2ggYW5pbWFsIGlkIGJlbG9uZ3MgdG8gd2hpY2ggZ3JvdXBcclxuICAgIGxldCBoaWVyYXJjaHlWZXJ0aWNlcyA9IFtdO1xyXG5cclxuICAgIC8vIGl0ZXJhdGUgb3ZlciB0aGUgaGllcmFyY2h5IGRhdGEgdG8gZ2V0IHRoZSBoaWVyYXJjaHkgYW5pbWFsIGlkcyBwZXIgY2x1c3RlcmluZyBhbmQgZ3JvdXBpbmdcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaGllcmFyY2h5SWRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IHRyZWVEYXRhID0gbmV0d29ya0hpZXJhcmNoeVsnaCcgKyBoaWVyYXJjaHlJZHNbaV1dW2luZGV4VGltZV07XHJcbiAgICAgICAgY29uc29sZS5sb2codHJlZURhdGEpO1xyXG4gICAgICAgIGxldCBub2RlcyA9IGQzLmhpZXJhcmNoeSh0cmVlRGF0YSwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZC5jaGlsZHJlbjtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbm9kZXMgPSB0cmVlbWFwKG5vZGVzKTtcclxuICAgICAgICBsZXQgcm9vdCA9IG5vZGVzWydjaGlsZHJlbiddWzBdO1xyXG4gICAgICAgIGlmIChzaG93TmV0d29ya0hpZXJhcmNoeSA9PT0gaGllcmFyY2h5SWRzW2ldKSB7XHJcbiAgICAgICAgICAgIG5ldHdvcmtIaWVyYXJjaHlJZHMgPSBnZXRIaWVyYXJjaHlMZXZlbChyb290LCBoaWVyYXJjaHlJZHNbaV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBhZGQgdGhlIHZlcnRpY2VzIGludG8gdGhlIGFycmF5XHJcbiAgICAgICAgaGllcmFyY2h5VmVydGljZXMucHVzaChnZXRIaWVyYXJjaHlWZXJ0aWNlcyhnZXRIaWVyYXJjaHlMZXZlbChyb290LCBoaWVyYXJjaHlJZHNbaV0pKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gaWYgbW9yZSB0aGFuIDIgaGllcmFyY2hpZXMgYXJlIGRyYXduXHJcbiAgICBpZiAoaGllcmFyY2h5VmVydGljZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIC8vIHVuaW9uIHRoZSBsaXN0IG9mIHBvbHlnb25zIHRvIG9uZSBwb2x5Z29uXHJcbiAgICAgICAgLy8gZm9yIChsZXQgaSA9IDA7IGkgPCBoaWVyYXJjaHlJZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAvLyAgICAgaGllcmFyY2h5VmVydGljZXNbaV0gPSB1bmlvblBvbHlnb25zKGhpZXJhcmNoeVZlcnRpY2VzW2ldKTtcclxuICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgIC8vIHRyYW5zZm9ybSBhbmQgY2FsY3VsYXRlIHRoZSBpbnRlcnNlY3Rpb24gcG9seWdvbnMgb2YgdGhlIG4gaGllcmFyY2hpZXNcclxuICAgICAgICAvLyBpZiAoc2V0T3BlcmF0aW9uID09PSAnaW50ZXJzZWN0aW9uJykge1xyXG4gICAgICAgIC8vICAgICAvLyB0ZW1wIHNvbHV0aW9uIG9mIHR3byBpbnRlcnNlY3Rpb25zXHJcbiAgICAgICAgLy8gICAgIGxldCB0bXBJbnRlcnNlY3Rpb24gPSBoaWVyYXJjaHlWZXJ0aWNlc1swXTtcclxuICAgICAgICAvLyAgICAgLy8gaXRlcmF0ZSBvdmVyIHRoZSBoaWVyYXJjaGllcyBhbmQgaW50ZXJzZWN0IGFsbCBvZiB0aGVtXHJcbiAgICAgICAgLy8gICAgIGZvciAobGV0IGkgPSAxOyBpIDwgaGllcmFyY2h5VmVydGljZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAvLyAgICAgICAgIC8vIGludGVyc2VjdGlvblxyXG4gICAgICAgIC8vICAgICAgICAgdG1wSW50ZXJzZWN0aW9uID0gUG9seUJvb2wuaW50ZXJzZWN0KHtcclxuICAgICAgICAvLyAgICAgICAgICAgICByZWdpb25zOiB0bXBJbnRlcnNlY3Rpb24sIC8vIGxpc3Qgb2YgcmVnaW9uc1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIGludmVydGVkOiBmYWxzZSAvLyBpcyB0aGlzIHBvbHlnb24gaW52ZXJ0ZWQ/XHJcbiAgICAgICAgLy8gICAgICAgICB9LCB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgcmVnaW9uczogaGllcmFyY2h5VmVydGljZXNbaV0sXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgaW52ZXJ0ZWQ6IGZhbHNlXHJcbiAgICAgICAgLy8gICAgICAgICB9KTtcclxuICAgICAgICAvLyAgICAgICAgIC8vIGNvbnZlcnQgaXQgYWdhaW5cclxuICAgICAgICAvLyAgICAgICAgIHRtcEludGVyc2VjdGlvbiA9IHRtcEludGVyc2VjdGlvblsncmVnaW9ucyddO1xyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyAgICAgLy8gcmVzdWx0XHJcbiAgICAgICAgLy8gICAgIGhpZXJhcmNoeVZlcnRpY2VzID0gW3RtcEludGVyc2VjdGlvbl07XHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIC8vIC8vIHRyYW5zZm9ybSBhbmQgY2FsY3VsYXRlIHRoZSBzeW1tZXRyaWMgZGlmZmVyZW5jZSBwb2x5Z29ucyBvZiB0aGUgbiBoaWVyYXJjaGllc1xyXG4gICAgICAgIC8vIGVsc2UgaWYgKHNldE9wZXJhdGlvbiA9PT0gJ3N5bS1kaWZmZXJlbmNlJykge1xyXG4gICAgICAgIC8vICAgICAvLyB4b3IgPSBVbmlvbiBvZiBhbGwgaGllcmFyY2hpZXMgLSBpbnRlcnNlY3Rpb24gb2YgYWxsIGhpZXJhcmNoaWVzXHJcbiAgICAgICAgLy8gICAgIC8vIHRlbXAgc29sdXRpb24gb2YgdHdvIGludGVyc2VjdGlvbnNcclxuICAgICAgICAvLyAgICAgbGV0IHRtcEludGVyc2VjdGlvbiA9IGhpZXJhcmNoeVZlcnRpY2VzWzBdO1xyXG4gICAgICAgIC8vICAgICAvLyBpdGVyYXRlIG92ZXIgdGhlIGhpZXJhcmNoaWVzIGFuZCBpbnRlcnNlY3QgYWxsIG9mIHRoZW1cclxuICAgICAgICAvLyAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBoaWVyYXJjaHlWZXJ0aWNlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIC8vICAgICAgICAgLy8gaW50ZXJzZWN0aW9uXHJcbiAgICAgICAgLy8gICAgICAgICB0bXBJbnRlcnNlY3Rpb24gPSBQb2x5Qm9vbC5pbnRlcnNlY3Qoe1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIHJlZ2lvbnM6IHRtcEludGVyc2VjdGlvbiwgLy8gbGlzdCBvZiByZWdpb25zXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgaW52ZXJ0ZWQ6IGZhbHNlIC8vIGlzIHRoaXMgcG9seWdvbiBpbnZlcnRlZD9cclxuICAgICAgICAvLyAgICAgICAgIH0sIHtcclxuICAgICAgICAvLyAgICAgICAgICAgICByZWdpb25zOiBoaWVyYXJjaHlWZXJ0aWNlc1tpXSxcclxuICAgICAgICAvLyAgICAgICAgICAgICBpbnZlcnRlZDogZmFsc2VcclxuICAgICAgICAvLyAgICAgICAgIH0pO1xyXG4gICAgICAgIC8vICAgICAgICAgLy8gY29udmVydCBpdCBhZ2FpblxyXG4gICAgICAgIC8vICAgICAgICAgdG1wSW50ZXJzZWN0aW9uID0gdG1wSW50ZXJzZWN0aW9uWydyZWdpb25zJ107XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyAgICAgLy8gaW50ZXJzZWN0aW9uIHJlc3VsdFxyXG4gICAgICAgIC8vICAgICBsZXQgaW50ZXJzZWN0aW9uSGllcmFyY2h5UG9seWdvbnMgPSB0bXBJbnRlcnNlY3Rpb247XHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyAgICAgLy8gdW5pb25cclxuICAgICAgICAvLyAgICAgbGV0IHRtcFVuaW9uID0gaGllcmFyY2h5VmVydGljZXNbMF07XHJcbiAgICAgICAgLy8gICAgIC8vIGl0ZXJhdGUgb3ZlciB0aGUgaGllcmFyY2hpZXMgYW5kIGludGVyc2VjdCBhbGwgb2YgdGhlbVxyXG4gICAgICAgIC8vICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGhpZXJhcmNoeVZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgLy8gICAgICAgICAvLyBpbnRlcnNlY3Rpb25cclxuICAgICAgICAvLyAgICAgICAgIHRtcFVuaW9uID0gUG9seUJvb2wudW5pb24oe1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIHJlZ2lvbnM6IHRtcFVuaW9uLCAvLyBsaXN0IG9mIHJlZ2lvbnNcclxuICAgICAgICAvLyAgICAgICAgICAgICBpbnZlcnRlZDogZmFsc2UgLy8gaXMgdGhpcyBwb2x5Z29uIGludmVydGVkP1xyXG4gICAgICAgIC8vICAgICAgICAgfSwge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIHJlZ2lvbnM6IGhpZXJhcmNoeVZlcnRpY2VzW2ldLFxyXG4gICAgICAgIC8vICAgICAgICAgICAgIGludmVydGVkOiBmYWxzZVxyXG4gICAgICAgIC8vICAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gICAgICAgICAvLyBjb252ZXJ0IGl0IGFnYWluXHJcbiAgICAgICAgLy8gICAgICAgICB0bXBVbmlvbiA9IHRtcFVuaW9uWydyZWdpb25zJ107XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyAgICAgbGV0IHVuaW9uSGllcmFyY2h5UG9seWdvbnMgPSB0bXBVbmlvbjtcclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gICAgIC8vIHN5bW1ldHJpYyBkaWZmZXJlbmNlXHJcbiAgICAgICAgLy8gICAgIGxldCB0bXBEaWZmZXJlbmNlID0gUG9seUJvb2wueG9yKHtcclxuICAgICAgICAvLyAgICAgICAgIHJlZ2lvbnM6IHVuaW9uSGllcmFyY2h5UG9seWdvbnMsIC8vIGxpc3Qgb2YgcmVnaW9uc1xyXG4gICAgICAgIC8vICAgICAgICAgaW52ZXJ0ZWQ6IGZhbHNlIC8vIGlzIHRoaXMgcG9seWdvbiBpbnZlcnRlZD9cclxuICAgICAgICAvLyAgICAgfSwge1xyXG4gICAgICAgIC8vICAgICAgICAgcmVnaW9uczogaW50ZXJzZWN0aW9uSGllcmFyY2h5UG9seWdvbnMsXHJcbiAgICAgICAgLy8gICAgICAgICBpbnZlcnRlZDogZmFsc2VcclxuICAgICAgICAvLyAgICAgfSk7XHJcbiAgICAgICAgLy8gICAgIC8vIGNvbnZlcnQgaXQgYWdhaW5cclxuICAgICAgICAvLyAgICAgdG1wRGlmZmVyZW5jZSA9IHRtcERpZmZlcmVuY2VbJ3JlZ2lvbnMnXTtcclxuICAgICAgICAvLyAgICAgLy8gcmVzdWx0XHJcbiAgICAgICAgLy8gICAgIGhpZXJhcmNoeVZlcnRpY2VzID0gW3RtcERpZmZlcmVuY2VdO1xyXG4gICAgICAgIC8vIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBEQVRBIEpvaW5cclxuICAgIGxldCBoaWVyYXJjaGllcyA9IHNwYXRpYWxWaWV3XHJcbiAgICAgICAgLnNlbGVjdEFsbCgnZy5oaWVyYXJjaHktZ3JvdXAnKVxyXG4gICAgICAgIC5kYXRhKGhpZXJhcmNoeVZlcnRpY2VzKTtcclxuXHJcbiAgICAvLyBFTlRFUiB0aGUgZ3JvdXBzIC0gYWRkcyBhIHNwZWNpZmljIGlkIGFuZCBjb2xvclxyXG4gICAgaGllcmFyY2hpZXNcclxuICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgIC5hcHBlbmQoJ2cnKVxyXG4gICAgICAgIC5hdHRyKCdjbGFzcycsIGZ1bmN0aW9uKGQsIGkpIHtcclxuICAgICAgICAgICAgaWYgKHNldE9wZXJhdGlvbiA9PT0gJ2ludGVyc2VjdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnaGllcmFyY2h5LWdyb3VwIGludGVyc2VjdGlvbic7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2V0T3BlcmF0aW9uID09PSAnc3ltLWRpZmZlcmVuY2UnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2hpZXJhcmNoeS1ncm91cCBzeW0tZGlmZmVyZW5jZSc7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2hpZXJhcmNoeS1ncm91cCBoJyArIGhpZXJhcmNoeUlkc1tpXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnN0eWxlKCdmaWxsJywgZnVuY3Rpb24oZCwgaSkge1xyXG4gICAgICAgICAgICByZXR1cm4gaGllcmFyY2h5Q29sb3JzWydoJyArIGhpZXJhcmNoeUlkc1tpXV07XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuYXR0cignc3Ryb2tlJywgZnVuY3Rpb24oZCwgaSkge1xyXG4gICAgICAgICAgICByZXR1cm4gaGllcmFyY2h5Q29sb3JzWydoJyArIGhpZXJhcmNoeUlkc1tpXV07XHJcbiAgICAgICAgfSlcclxuICAgICAgICAubW92ZVRvQmFjaygpO1xyXG5cclxuICAgIC8vIFVQREFURSAtIHRoZSBjbGFzcyBuZWVkZWQgZm9yIGludGVyc2VjdGlvbiBhbmQgc3ltbWV0cmljIGRpZmZlcmVuY2VcclxuICAgIGhpZXJhcmNoaWVzLmF0dHIoJ2NsYXNzJywgZnVuY3Rpb24oZCwgaSkge1xyXG4gICAgICAgIGlmIChzZXRPcGVyYXRpb24gPT09ICdpbnRlcnNlY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnaGllcmFyY2h5LWdyb3VwIGludGVyc2VjdGlvbic7XHJcbiAgICAgICAgfSBlbHNlIGlmIChzZXRPcGVyYXRpb24gPT09ICdzeW0tZGlmZmVyZW5jZScpIHtcclxuICAgICAgICAgICAgcmV0dXJuICdoaWVyYXJjaHktZ3JvdXAgc3ltLWRpZmZlcmVuY2UnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnaGllcmFyY2h5LWdyb3VwIGgnICsgaGllcmFyY2h5SWRzW2ldO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIEVYSVRcclxuICAgIGhpZXJhcmNoaWVzLmV4aXQoKVxyXG4gICAgICAgIC5yZW1vdmUoKTtcclxuXHJcbiAgICAvLyBIaWVyYWNoeSBodWxscyBhZGRlZCB0byB0aGUgc3BhdGlhbCB2aWV3IC0gZ2V0IHRoZSBwb2ludHMgZm9yIGVhY2ggYW5pbWFsIGluIHRoZVxyXG4gICAgLy8gc3BhdGlhbCB2aWV3IHNvIHRoYXQgYSBjb252ZXggaHVsbCBjYW4gYmUgY2FsY3VsYXRlZFxyXG4gICAgbGV0IGhpZXJhcnlIdWxscyA9IGhpZXJhcmNoaWVzLnNlbGVjdEFsbCgncGF0aC5oaWVyYXJjaHktaHVsbC1wYXRoJylcclxuICAgICAgICAuZGF0YShmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIC8vIEVOVEVSIGFuZCBjYWxjdWxhdGUgdGhlIGNvbnZleCBodWxsXHJcbiAgICBoaWVyYXJ5SHVsbHNcclxuICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgIC5hcHBlbmQoJ3BhdGgnKVxyXG4gICAgICAgIC8vIC5hdHRyKCdpZCcsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAvLyAgICAgcmV0dXJuICdocCcgKyBkLmpvaW4oJycpLnJlcGxhY2UoLywvZywgJycpO1xyXG4gICAgICAgIC8vIH0pXHJcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2hpZXJhcmNoeS1odWxsLXBhdGgnKVxyXG4gICAgICAgIC5hdHRyKCdkJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAvLyByZXR1cm4gZHJhd0xpbmUoZCk7XHJcbiAgICAgICAgICAgIHJldHVybiAnTScgKyBkLmpvaW4oJ0wnKSArICdaJztcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAvLyBVUERBVEUgdGhlIGNvbnZleCBodWxsXHJcbiAgICBoaWVyYXJ5SHVsbHNcclxuICAgICAgICAuYXR0cignZCcsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgLy8gcmV0dXJuIGRyYXdMaW5lKGQpO1xyXG4gICAgICAgICAgICByZXR1cm4gJ00nICsgZC5qb2luKCdMJykgKyAnWic7XHJcbiAgICAgICAgfSk7XHJcbiAgICAvLyAuYXR0cignaWQnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAvLyByZXR1cm4gJ2hwJyArIGQuam9pbignJykucmVwbGFjZSgvLC9nLCAnJyk7XHJcbiAgICAvLyB9KTtcclxuICAgIC8vIEVYSVRcclxuICAgIGhpZXJhcnlIdWxscy5leGl0KClcclxuICAgICAgICAucmVtb3ZlKCk7XHJcblxyXG59XHJcblxyXG4vKipcclxuICogVW5pb24gbXVsdGlwbGUgcG9seWdvbnMgdG9nZXRoZXIgLSBuZWVkZWQgb3IgZWxzZSB0aGVyZSB3aWxsIGJlIGhvbGVzIGluIHRoZSBpbnRlcnNlY3Rpb25zXHJcbiAqIEBwYXJhbSB7YXJyYXl9IHBvbHlnb25zIC0gYXJyYXkgb2YgYXJyYXkgb2YgcG9pbnRzXHJcbiAqL1xyXG4vLyBmdW5jdGlvbiB1bmlvblBvbHlnb25zKHBvbHlnb25zKSB7XHJcbi8vICAgICAvLyBjb25zb2xlLmxvZyhwb2x5Z29ucyk7XHJcbi8vICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvbHlnb25zLmxlbmd0aDsgaSsrKSB7XHJcbi8vICAgICAgICAgcG9seWdvbnNbaV0gPSB7XHJcbi8vICAgICAgICAgICAgIHJlZ2lvbnM6IFtwb2x5Z29uc1tpXV0sXHJcbi8vICAgICAgICAgICAgIGludmVydGVkOiBmYWxzZSAvLyBpcyB0aGlzIHBvbHlnb24gaW52ZXJ0ZWQ/XHJcbi8vICAgICAgICAgfTtcclxuLy8gICAgIH1cclxuLy8gICAgIC8vIHVuaW9uIGEgbGlzdCBvZiBwb2x5Z29ucyB0b2dldGhlclxyXG4vLyAgICAgbGV0IHNlZ21lbnRzID0gUG9seUJvb2wuc2VnbWVudHMocG9seWdvbnNbMF0pO1xyXG4vLyAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBwb2x5Z29ucy5sZW5ndGg7IGkrKykge1xyXG4vLyAgICAgICAgIGxldCBzZWcyID0gUG9seUJvb2wuc2VnbWVudHMocG9seWdvbnNbaV0pO1xyXG4vLyAgICAgICAgIGxldCBjb21iID0gUG9seUJvb2wuY29tYmluZShzZWdtZW50cywgc2VnMik7XHJcbi8vICAgICAgICAgc2VnbWVudHMgPSBQb2x5Qm9vbC5zZWxlY3RVbmlvbihjb21iKTtcclxuLy8gICAgIH1cclxuLy8gICAgIHJldHVybiBQb2x5Qm9vbC5wb2x5Z29uKHNlZ21lbnRzKVsncmVnaW9ucyddO1xyXG4vLyB9XHJcblxyXG4vKipcclxuICogRWRnZSBkcmF3aW5nIG1ldGhvZCBvZiB0aGUgZGVuZHJvZ3JhbVxyXG4gKiBAcGFyYW0ge29iamVjdH0gZCAtIFRyZWVtYXAgZWxlbWVudFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGRpYWdvbmFsTGluZXMoZCkge1xyXG4gICAgcmV0dXJuICdNJyArIGQueCArICcsJyArIGQueSArXHJcbiAgICAgICAgJ1YnICsgZC5wYXJlbnQueSArICdIJyArIGQucGFyZW50Lng7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBPbiBjbGljayBmdW5jdGlvbiAtIGhpZ2hsaWdodCB0aGUgZWxlbWVudHMgaW4gdGhlIHNwYXRpYWwgdmlld1xyXG4gKiBAcGFyYW0ge29iamVjdH0gZCAtIFRyZWVtYXAgZWxlbWVudFxyXG4gKi9cclxuZnVuY3Rpb24gY2xpY2soZCkge1xyXG4gICAgc2V0QWN0aXZlQW5pbWFscyhkWydkYXRhJ11bJ25hbWUnXSk7XHJcbiAgICAvLyBpZiBubyBhbmltYXRpb24gaXMgYWN0aXZlIGRyYXcgdGhlIGRyYXcgb25lIHN0ZXBcclxuICAgIGlmICghJCgnI3BsYXktYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgZHJhdygpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogR2V0IGFsbCB0aGUgY2x1c3RlcmluZyBvZiBhIHNwZWNpZmljIGxldmVsIGluIHRoZSBkZW5kcm9ncmFtIHRyZWVcclxuICogRm9yIGluc3RhbmNlIGFsbCBjbHVzdGVycyBmcm9tIGxldmVsIDVcclxuICogQHBhcmFtIHtvYmplY3R9IHJvb3QgLSBSb290IG9mIHRoZSB0cmVlbWFwXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBoaWVhcmNoeSAtIE51bWJlciBvZiBoaWVyYXJjaHkgZnJvbSBbMC0zXVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEhpZXJhcmNoeUxldmVsKHJvb3QsIGhpZXJhcmNoeSkge1xyXG4gICAgbGV0IHJlc3VsdCA9IFtdO1xyXG4gICAgbGV0IGxldmVsID0gaGllcmFyY2h5TGV2ZWxzWydoJyArIGhpZXJhcmNoeV07XHJcblxyXG4gICAgLy8gc2Vjb25kIGxldmVsIG9mIHRoZSBhcnJheVxyXG4gICAgbGV0IHRtcF9ub2RlcyA9IHJvb3RbJ2NoaWxkcmVuJ107XHJcbiAgICAvLyBpdGVyYXRlIHRocm91Z2ggdGhlIHRyZWVcclxuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgcm9vdFsnaGVpZ2h0J107IGkrKykge1xyXG4gICAgICAgIC8vIGNoZWNrIGlmIHdlIGFyZSBhdCB0aGUgc2VhcmNoZWQgbGV2ZWxcclxuICAgICAgICBpZiAodG1wX25vZGVzWzBdICYmIHRtcF9ub2Rlc1swXVsnZGVwdGgnXSA9PT0gbGV2ZWwpIHtcclxuICAgICAgICAgICAgLy8gYWRkIGVhY2ggY2x1c3RlciB0byB0aGUgcmVzdWx0IHNldFxyXG4gICAgICAgICAgICB0bXBfbm9kZXMuZm9yRWFjaChmdW5jdGlvbihub2RlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG5vZGVbJ2RhdGEnXVsnbmFtZSddICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKG5vZGVbJ2RhdGEnXVsnbmFtZSddKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBnZXQgYWxsIGNoaWxkcmVuIG9mIGEgc3BlY2lmaWMgbGV2ZWwgaW4gdGhlIHRyZWVcclxuICAgICAgICBsZXQgdG1wID0gW107XHJcbiAgICAgICAgdG1wX25vZGVzLmZvckVhY2goZnVuY3Rpb24obm9kZSkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIG5vZGVbJ2NoaWxkcmVuJ10gIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICB0bXAgPSB0bXAuY29uY2F0KG5vZGVbJ2NoaWxkcmVuJ10pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdG1wX25vZGVzID0gdG1wO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJldHVybiB0aGUgc3BlY2lmaWMgdmVydGljZXMgb2YgYSBjbHVzdGVyaW5nIGluIHRoZSBzcGF0aWFsIHZpZXdcclxuICogUmV0dXJuIGFuIGFycmF5IG9mIHBvaW50cyBbW3gseV1beCx5XS4uLl1cclxuICogQHBhcmFtIHtBcnJheX0gaGllcmFyY2hpZXMgLSBBcnJheSBvZiBhcnJheXMgd2l0aCBlYWNoIGFycmF5IGNvbnRhaW5zIGFsbCB0aGUgaWRzIGZvciBhIHNwZWNpZmljIGNsdXN0ZXJpbmdcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRIaWVyYXJjaHlWZXJ0aWNlcyhoaWVyYXJjaGllcykge1xyXG4gICAgbGV0IHJlc3VsdCA9IFtdOyAvLyByZXN1bHQgc2V0XHJcbiAgICBoaWVyYXJjaGllcy5mb3JFYWNoKGZ1bmN0aW9uKGNsdXN0ZXIpIHtcclxuICAgICAgICBsZXQgdmVydGljZXMgPSBbXTsgLy8gdmVydGljZXMgb2YgdGhlIGNsdXN0ZXJzIGluIHRoZSBzcGF0aWFsIHZpZXdcclxuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGNsdXN0ZXIubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgbGV0IGdyb3VwTWVtYmVyID0gYXJyYXlBbmltYWxzLmZpbmQoZCA9PiBkWydhJ10gPT09IGNsdXN0ZXJbal0pO1xyXG4gICAgICAgICAgICBpZiAoZ3JvdXBNZW1iZXIpIHtcclxuICAgICAgICAgICAgICAgIHZlcnRpY2VzLnB1c2goW2dyb3VwTWVtYmVyWydwJ11bMF0sIC1ncm91cE1lbWJlclsncCddWzFdXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQW5kcmV3IG1vbnRvbmUgY2hhaW4gYWxnb3JpdGhtIHJldXRybnMgZm9yIHBvaW50cyBmZXdlciB0aGFuIDMgbnVsbFxyXG4gICAgICAgIGlmICh2ZXJ0aWNlcy5sZW5ndGggPj0gMykge1xyXG4gICAgICAgICAgICByZXN1bHQucHVzaChkMy5wb2x5Z29uSHVsbCh2ZXJ0aWNlcykpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldCB0aGUgYWN0aXZlIGxldmVsIGZvciBhIHNwZWNpZmljIGRlbmRyb2dyYW1cclxuICogQHBhcmFtIHtudW1iZXJ9IGhpZXJhcmNoeSAtIEhpZXJhcmNoeSBjYW4gYmUgZnJvbSBbMC0zXVxyXG4gKiBAcGFyYW0ge251bWJlcn0gbGV2ZWwgLSBOZXcgYWN0aXZlIGxldmVsXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2V0SGllcmFyY2h5TGV2ZWwoaGllcmFyY2h5LCBsZXZlbCkge1xyXG4gICAgLy8gVE9ETyBjYXRjaCBjYXNlcyA8IDAgYW5kIGJpZ2dlciB0aGFuIG92ZXJhbGwgaGVpZ2h0XHJcbiAgICBoaWVyYXJjaHlMZXZlbHNbJ2gnICsgaGllcmFyY2h5XSA9IGxldmVsO1xyXG59XHJcblxyXG4vKipcclxuICogUmVtb3ZlIHRoZSBlbnRyeSBmb3IgdGhlIGhpZXJhcmNoIGxldmVsXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBoaWVyYXJjaHkgLSBIaWVyYXJjaHlcclxuICovXHJcblxyXG5cclxuLyoqXHJcbiAqIFNldCB0aGUgYWN0aXZlIGNvbG9yIGZvciBhIHNwZWNpZmljIGRlbmRyb2dyYW1cclxuICogQHBhcmFtIHtudW1iZXJ9IGhpZXJhcmNoeSAtIEhpZXJhcmNoeSBjYW4gYmUgZnJvbSBbMC0zXVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldEhpZXJhcmNoeUNvbG9yKGhpZXJhcmNoeSkge1xyXG4gICAgLy8gY2hlY2sgaWYgdGhlIGhpZXJhcmNoeSBpcyBhbHJlYWR5IHNob3duIGFzIG5ldHdvcmtcclxuICAgIC8vIHRha2UgdGhlIHNhbWUgY29sb3JcclxuICAgIGZvciAobGV0IGtleSBpbiBuZXR3b3JrQ29sb3IpIHtcclxuICAgICAgICBpZiAoa2V5ID09PSAoJ2gnICsgaGllcmFyY2h5KSkge1xyXG4gICAgICAgICAgICBoaWVyYXJjaHlDb2xvcnNbJ2gnICsgaGllcmFyY2h5XSA9IG5ldHdvcmtDb2xvcltrZXldO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gaGllcmFyY2h5IGlzIG5vdCB2aXN1YWxpemVkIGFscmVhZHkgYXMgYSBuZXR3b3JrXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbG9ycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGxldCB0bXBfYm9vbGVhbiA9IHRydWU7XHJcbiAgICAgICAgZm9yIChsZXQga2V5IGluIGhpZXJhcmNoeUNvbG9ycykge1xyXG4gICAgICAgICAgICBpZiAoaGllcmFyY2h5Q29sb3JzLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChoaWVyYXJjaHlDb2xvcnNba2V5XSA9PT0gY29sb3JzW2ldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG1wX2Jvb2xlYW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodG1wX2Jvb2xlYW4pIHtcclxuICAgICAgICAgICAgLy8gY2hlY2sgaWYgYSBuZXR3b3JrIGlzIGRlcGljdGVkXHJcbiAgICAgICAgICAgIC8vIGlmIHNvIHNraXAgdGhlIGNvbG9yIHdoaWNoIGlzIGFscmVhZHkgY2hvb3NlbiBmb3IgdGhlIG5ldHdvcmtcclxuICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKG5ldHdvcmtDb2xvcikubGVuZ3RoICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gbmV0d29ya0NvbG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ldHdvcmtDb2xvcltrZXldICE9PSBjb2xvcnNbaV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGllcmFyY2h5Q29sb3JzWydoJyArIGhpZXJhcmNoeV0gPSBjb2xvcnNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBoaWVyYXJjaHlDb2xvcnNbJ2gnICsgaGllcmFyY2h5XSA9IGNvbG9yc1tpXTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZW1vdmUgdGhlIGNvbG9yIGZvciB0aGUgaGllcmFyY2ggbGV2ZWxcclxuICogQHBhcmFtIHtudW1iZXJ9IGhpZXJhcmNoeSAtIEhpZXJhcmNoeVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUhpZXJhcmNoeUNvbG9yKGhpZXJhcmNoeSkge1xyXG4gICAgZGVsZXRlIGhpZXJhcmNoeUNvbG9yc1snaCcgKyBoaWVyYXJjaHldO1xyXG59XHJcblxyXG4vKipcclxuICogQWRkIHRoZSBoaWVyYXJjaHkgYnV0dG9uIHRvIHRoZSBkaXZcclxuICogQHBhcmFtIHtudW1iZXJ9IGlkIC0gSGllcmFyY2h5IG9mIHRoZSBpZFxyXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZSAtIE5ldyBhY3RpdmUgbGV2ZWxcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRIaWVyYXJjaHlCdXR0b24oaWQsIG5hbWUpIHtcclxuICAgIGlmICgkKCcuc2hvdy1kZW5kcm9ncmFtJykubGVuZ3RoIDwgbWF4TnVtYmVySGllcmFyY2hpZXMpIHtcclxuICAgICAgICAkKCcjZGVuZHJvZ3JhbS1idXR0b25zLWRpdicpLmFwcGVuZCgnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgaWQ9XCJzaG93LWRlbmRyb2dyYW0tJyArIGlkICsgJ1wiIGRhdGE9JyArIGlkICsgJyBuYW1lPScgKyBuYW1lICtcclxuICAgICAgICAgICAgJyBjbGFzcz1cInNob3ctZGVuZHJvZ3JhbSBidG4gYnRuLWJsb2NrXCIgZGF0YS10b2dnbGU9XCJidXR0b25cIiBhcmlhLXByZXNzZWQ9XCJmYWxzZVwiIGF1dG9jb21wbGV0ZT1cIm9mZlwiPicgK1xyXG4gICAgICAgICAgICAnIDxzcGFuIGNsYXNzPVwiYnRuLWxhYmVsXCIgaWQ9XCJidG4tbGVmdFwiPiA8aSBjbGFzcz1cIm1kaSBtZGktYXJyb3ctY29sbGFwc2UtbGVmdFwiPjwvaT4mbmJzcCZuYnNwIFNob3cgJyArIG5hbWUgKyAnPC9zcGFuPicgK1xyXG4gICAgICAgICAgICAnPHNwYW4gY2xhc3M9XCJidG4tbGFiZWxcIiBpZD1cImJ0bi1yaWdodFwiPiA8aSBjbGFzcz1cIm1kaSBtZGktYXJyb3ctY29sbGFwc2UtcmlnaHRcIj48L2k+Jm5ic3AmbmJzcCBIaWRlICcgKyBuYW1lICsgJyA8L3NwYW4+PC9idXR0b24+IDxicj4nXHJcbiAgICAgICAgKTtcclxuICAgICAgICAkKCcjc2hvdy1kZW5kcm9ncmFtLScgKyBpZCkuZmluZCgnI2J0bi1yaWdodCcpLmhpZGUoKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFJlbW92ZSBhIHNwZWNpZmljIGhpZXJhcmNoeSBidXR0b24gdG8gdGhlIGRpdlxyXG4gKiBAcGFyYW0ge251bWJlcn0gaWQgLSBIaWVyYXJjaHkgb2YgdGhlIGlkXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlSGllcmFyY2h5QnV0dG9uKGlkKSB7XHJcbiAgICAvLyByZW1vdmUgdGhlIGZvbGxvd2luZyBsaW5lIGJyZWFrIGFuZCBlbGVtZW50XHJcbiAgICAkKCcjc2hvdy1kZW5kcm9ncmFtLScgKyBpZCkubmV4dCgpLnJlbW92ZSgpO1xyXG4gICAgJCgnI3Nob3ctZGVuZHJvZ3JhbS0nICsgaWQpLnJlbW92ZSgpO1xyXG59XHJcblxyXG4vKipcclxuICogVXBkYXRlIHNsaWRlciBhbmQgdGV4dCBpbiB0aGUgZGVuZHJvZ3JhbSBwYW5lbFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZURlbmRyb2dyYW0oKSB7XHJcbiAgICAvLyBnZXQgdGhlIGltcG9ydGFudCBpbmZvXHJcbiAgICBsZXQgaWQgPSAkKCcuc2hvdy1kZW5kcm9ncmFtLmJ0bi1wcmltYXJ5JykuYXR0cignZGF0YScpO1xyXG4gICAgbGV0IG5hbWUgPSAkKCcuc2hvdy1kZW5kcm9ncmFtLmJ0bi1wcmltYXJ5JykuYXR0cignbmFtZScpO1xyXG4gICAgLy8gc2V0IHRoZSBuYW1lIG9mIHRoZSBkaXNwbGF5ZWQgaGllcmFyY2h5XHJcbiAgICAkKCcjZGVuZHJvZ3JhbS1wYW5lbC1uYW1lJykudGV4dChuYW1lKTtcclxuXHJcbiAgICAvLyBzZXQgc2xpZGVyIGFuZCAgdGV4dCB2YWx1ZVxyXG4gICAgJCgnI2RlbmRyb2dyYW0tcGFuZWwtbGV2ZWwtc2xpZGVyJykudmFsKGhpZXJhcmNoeUxldmVsc1snaCcgKyBpZF0pO1xyXG4gICAgJCgnI2RlbmRyb2dyYW0tcGFuZWwtbGV2ZWwtdGV4dCcpLnRleHQoaGllcmFyY2h5TGV2ZWxzWydoJyArIGlkXSk7XHJcblxyXG59XHJcblxyXG4vKipcclxuICogVXBkYXRlIGhpZXJhcmNoeSBsZWdlbmRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjaGFuZ2VIaWVyYXJjaHlMZWdlbmQoKSB7XHJcbiAgICBsZXQgbGVnZW5kOyAvLyB0aGUgY29sb3IgbGVnZW5kXHJcbiAgICBsZXQgbGVnZW5kVGV4dDsgLy8gY29sb3IgbGVnZW5kIHRleHRcclxuICAgIC8vIHZhcnMgZm9yIHRoZSBsZWdlbmRcclxuICAgIGxldCBsZWdlbmRTd2F0Y2hXaWR0aCA9IDUwO1xyXG4gICAgbGV0IGxlZ2VuZFN3YXRjaEhlaWdodCA9IDIwO1xyXG5cclxuICAgIC8vIFNob3cgb3IgaGlkZSB0aGUgc3ZnIGVsZW1lbnRcclxuICAgIGlmIChPYmplY3Qua2V5cyhoaWVyYXJjaHlDb2xvcnMpLmxlbmd0aCAhPT0gMCB8fCBPYmplY3Qua2V5cyhuZXR3b3JrQ29sb3IpLmxlbmd0aCAhPT0gMCkge1xyXG4gICAgICAgICQoJyNoaWVyYXJjaHktbGVnZW5kLWRpdicpLnNob3coKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJCgnI2hpZXJhcmNoeS1sZWdlbmQtZGl2JykuaGlkZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBsZWdlbmREYXRhID0gW107XHJcbiAgICBsZXQgbGVnZW5kVGV4dERhdGEgPSBbXTtcclxuICAgIC8vIGdldCB0aGUgcmVxdWlyZWQgZGF0YVxyXG4gICAgJCgnLnNob3ctZGVuZHJvZ3JhbScpLmVhY2goZnVuY3Rpb24oaSwgb2JqKSB7XHJcbiAgICAgICAgLy8gY2hlY2sgaWYgZGF0YSBpcyBub3QgdW5kZWZpbmVkXHJcbiAgICAgICAgaWYgKGhpZXJhcmNoeUNvbG9yc1snaCcgKyAkKG9iaikuYXR0cignZGF0YScpXSAhPSBudWxsICYmICQob2JqKS5hdHRyKCduYW1lJykgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBsZWdlbmREYXRhLnB1c2goaGllcmFyY2h5Q29sb3JzWydoJyArICQob2JqKS5hdHRyKCdkYXRhJyldKTtcclxuICAgICAgICAgICAgbGVnZW5kVGV4dERhdGEucHVzaCgkKG9iaikuYXR0cignbmFtZScpKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIC8vIGFkZCB0aGUgbmV0d29yayBjb2xvclxyXG4gICAgaWYgKE9iamVjdC5rZXlzKG5ldHdvcmtDb2xvcikubGVuZ3RoICE9PSAwKSB7XHJcbiAgICAgICAgZm9yIChsZXQga2V5IGluIG5ldHdvcmtDb2xvcikge1xyXG4gICAgICAgICAgICBpZiAobGVnZW5kRGF0YS5pbmRleE9mKG5ldHdvcmtDb2xvcltrZXldKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIGxlZ2VuZERhdGEucHVzaChuZXR3b3JrQ29sb3Jba2V5XSk7XHJcbiAgICAgICAgICAgICAgICBsZWdlbmRUZXh0RGF0YS5wdXNoKCdOZXR3b3JrJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBEQVRBIEpPSU5cclxuICAgIGxlZ2VuZCA9IHN2Z0xlZ2VuZC5zZWxlY3RBbGwoJ3JlY3QubGVnZW5kJylcclxuICAgICAgICAuZGF0YShsZWdlbmREYXRhKTtcclxuICAgIGxlZ2VuZFRleHQgPSBzdmdMZWdlbmQuc2VsZWN0QWxsKCd0ZXh0LmxlZ2VuZC10ZXh0JylcclxuICAgICAgICAuZGF0YShsZWdlbmRUZXh0RGF0YSk7XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tIExlZ2VuZCBzd2F0Y2hlcyAgLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLy8gVVBEQVRFIC0gbGVnZW5kXHJcbiAgICBsZWdlbmQuc3R5bGUoJ2ZpbGwnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICB9KTtcclxuICAgIC8vIEVOVEVSIC0gbGVnZW5kXHJcbiAgICBsZWdlbmRcclxuICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgIC5hcHBlbmQoJ3JlY3QnKVxyXG4gICAgICAgIC5hdHRyKCdjbGFzcycsICdsZWdlbmQnKVxyXG4gICAgICAgIC5hdHRyKCd3aWR0aCcsIGxlZ2VuZFN3YXRjaFdpZHRoKVxyXG4gICAgICAgIC5hdHRyKCdoZWlnaHQnLCBsZWdlbmRTd2F0Y2hIZWlnaHQpXHJcbiAgICAgICAgLmF0dHIoJ3knLCAwKVxyXG4gICAgICAgIC5hdHRyKCd4JywgZnVuY3Rpb24oZCwgaSkge1xyXG4gICAgICAgICAgICByZXR1cm4gKGxlZ2VuZFN3YXRjaFdpZHRoICsgMi41ICogaSAqIGxlZ2VuZFN3YXRjaFdpZHRoKSArICdweCc7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuc3R5bGUoJ2ZpbGwnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkO1xyXG4gICAgICAgIH0pO1xyXG4gICAgLy8gRVhJVCAtIGxlZ2VuZFxyXG4gICAgbGVnZW5kLmV4aXQoKVxyXG4gICAgICAgIC5yZW1vdmUoKTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0gVGV4dCAgLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLy8gVVBEQVRFIC0gbGVnZW5kIHRleHRcclxuICAgIGxlZ2VuZFRleHQudGV4dChmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICB9KTtcclxuICAgIC8vIEVOVEVSIC0gbGVnZW5kIHRleHRcclxuICAgIGxlZ2VuZFRleHRcclxuICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgIC5hcHBlbmQoJ3RleHQnKVxyXG4gICAgICAgIC5hdHRyKCdjbGFzcycsICdsZWdlbmQtdGV4dCcpXHJcbiAgICAgICAgLmF0dHIoJ3knLCAyICogbGVnZW5kU3dhdGNoSGVpZ2h0KVxyXG4gICAgICAgIC5hdHRyKCd4JywgZnVuY3Rpb24oZCwgaSkge1xyXG4gICAgICAgICAgICByZXR1cm4gKGxlZ2VuZFN3YXRjaFdpZHRoICsgMi41ICogaSAqIGxlZ2VuZFN3YXRjaFdpZHRoKSArICdweCc7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGV4dChmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIC8vIEVYSVQgLSBsZWdlbmQgdGV4dFxyXG4gICAgbGVnZW5kVGV4dC5leGl0KClcclxuICAgICAgICAucmVtb3ZlKCk7XHJcblxyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEluaXRpYWxpemUgdGhlIGRlbmRyb2dyYW0gbGVnZW5kXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaW5pdERlbmRyb2dyYW1MZWdlbmQoKSB7XHJcbiAgICBsZXQgbGVnZW5kV2lkdGggPSA1NTA7XHJcbiAgICBsZXQgbGVnZW5kSGVpZ2h0ID0gNjA7XHJcblxyXG4gICAgbGV0IGRlbmRyb2dyYW1MZWdlbmQgPSBkMy5zZWxlY3QoJyNkZW5kcm9ncmFtLXBhbmVsJylcclxuICAgICAgICAuYXBwZW5kKCdzdmcnKVxyXG4gICAgICAgIC5hdHRyKCdpZCcsICdkZW5kcm9ncmFtLWxlZ2VuZCcpXHJcbiAgICAgICAgLmF0dHIoJ3dpZHRoJywgbGVnZW5kV2lkdGgpXHJcbiAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGxlZ2VuZEhlaWdodCk7XHJcblxyXG4gICAgJCgnI2RlbmRyb2dyYW0tbGVnZW5kJykuaGlkZSgpO1xyXG5cclxuICAgIGxldCBsZWdlbmQ7IC8vIHRoZSBjb2xvciBsZWdlbmRcclxuICAgIGxldCBsZWdlbmRUZXh0OyAvLyBjb2xvciBsZWdlbmQgdGV4dFxyXG4gICAgLy8gdmFycyBmb3IgdGhlIGxlZ2VuZFxyXG4gICAgbGV0IGxlZ2VuZFN3YXRjaFdpZHRoID0gNTA7XHJcbiAgICBsZXQgbGVnZW5kU3dhdGNoSGVpZ2h0ID0gMjA7XHJcblxyXG4gICAgbGV0IGxlZ2VuZERhdGEgPSBzdGFuZGFyZERldmlhdGlvbkNvbG9yU2NhbGUucmFuZ2UoKTtcclxuICAgIC8vVE9ETyBjaGFuZ2UgdGhpcyB0byBiZXR0ZXIgc29sdXRpb25cclxuICAgIGxldCBsZWdlbmRUZXh0RGF0YSA9IFsnbG93JywgJycsICcnLCAnJywgJycsICcnLCAnJywgJycsICdoaWdoJ107XHJcblxyXG4gICAgbGVnZW5kID0gZGVuZHJvZ3JhbUxlZ2VuZC5zZWxlY3RBbGwoJ3JlY3QubGVnZW5kJylcclxuICAgICAgICAuZGF0YShsZWdlbmREYXRhKTtcclxuICAgIGxlZ2VuZFRleHQgPSBkZW5kcm9ncmFtTGVnZW5kLnNlbGVjdEFsbCgndGV4dC5sZWdlbmQtdGV4dCcpXHJcbiAgICAgICAgLmRhdGEobGVnZW5kVGV4dERhdGEpO1xyXG5cclxuICAgIC8vIEVOVEVSIC0gbGVnZW5kXHJcbiAgICBsZWdlbmRcclxuICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgIC5hcHBlbmQoJ3JlY3QnKVxyXG4gICAgICAgIC5hdHRyKCdjbGFzcycsICdsZWdlbmQnKVxyXG4gICAgICAgIC5hdHRyKCd3aWR0aCcsIGxlZ2VuZFN3YXRjaFdpZHRoKVxyXG4gICAgICAgIC5hdHRyKCdoZWlnaHQnLCBsZWdlbmRTd2F0Y2hIZWlnaHQpXHJcbiAgICAgICAgLmF0dHIoJ3knLCAwKVxyXG4gICAgICAgIC5hdHRyKCd4JywgZnVuY3Rpb24oZCwgaSkge1xyXG4gICAgICAgICAgICByZXR1cm4gKGkgKiBsZWdlbmRTd2F0Y2hXaWR0aCkgKyAncHgnO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnN0eWxlKCdmaWxsJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0gVGV4dCAgLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLy8gRU5URVIgLSBsZWdlbmQgdGV4dFxyXG4gICAgbGVnZW5kVGV4dFxyXG4gICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgLmFwcGVuZCgndGV4dCcpXHJcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xlZ2VuZC10ZXh0JylcclxuICAgICAgICAuYXR0cigneScsIDIgKiBsZWdlbmRTd2F0Y2hIZWlnaHQpXHJcbiAgICAgICAgLmF0dHIoJ3gnLCBmdW5jdGlvbihkLCBpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoaSAqIGxlZ2VuZFN3YXRjaFdpZHRoKSArICdweCc7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGV4dChmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkO1xyXG4gICAgICAgIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IHRoZSBzZXQgb3BlcmF0aW9uXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBvcGVyYXRpb24gLSBlLmcuIFwidW5pb25cIiBcImludGVyc2VjdGlvblwiIFwic3ltLWRpZmZlcmVuY2VcIlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldFNldE9wZXJhdGlvbih2YWx1ZSkge1xyXG4gICAgc2V0T3BlcmF0aW9uID0gdmFsdWU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXQgdGhlIGhpZXJhcmNoeSBncm91cCBzdGFuZGFyZCBkZXZpYXRpb25cclxuICogQHBhcmFtIHtTdHJpbmd9IGtleSAtIHVuaXF1ZSBoYXNoIGlkIGZvciB0aGUgZ3JvdXBcclxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIC0gdW5pcXVlIGhhc2ggaWQgZm9yIHRoZSBncm91cFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldGhpZXJhcmNoeUdyb3VwU3RkZXYoa2V5LCB2YWx1ZSkge1xyXG4gICAgaWYgKGtleSBpbiBoaWVyYXJjaHlHcm91cFN0ZGV2KSB7XHJcbiAgICAgICAgaGllcmFyY2h5R3JvdXBTdGRldltrZXldLnB1c2godmFsdWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBoaWVyYXJjaHlHcm91cFN0ZGV2W2tleV0gPSBbdmFsdWVdO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogUmVzZXQgaGllcmFyY2h5IGdyb3VwIHN0YW5kYXJkIGRldmlhdGlvblxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0aGllcmFyY2h5R3JvdXBTdGRldigpIHtcclxuICAgIGhpZXJhcmNoeUdyb3VwU3RkZXYgPSB7fTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEhpZ2hsaWdodCBhIHN1YnNldCBvZiBhbmltYWxzIGluIHRoZSBzcGF0aWFsIHZpZXdcclxuICogQHBhcmFtIHthcnJheX0gYW5pbWFscyAtIGFycmF5IG9mIGFuaW1hbCBpZHMgd2hpY2ggaGF2ZSB0byBiZSBoaWdobGlnaHRlZFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGFkZEhpZ2hsaWdodFNwYXRpYWxWaWV3KGFuaW1hbHMpIHtcclxuICAgIC8vIHBvaW50cyB0byBjYWxjdWxhdGUgdGhlIGNvbnZleCBodWxsIG9mIHRoZSBoaWdobGlnaHQgY2x1c3RlclxyXG4gICAgbGV0IHZlcnRpY2VzID0gW107XHJcbiAgICAvLyBpdGVyYXRlIHRocm91Z2ggdGhlIG9iamVjdHMgaW4gdGhlIGNsdXN0ZXJcclxuICAgIC8vIGdldCB0aGUgcG9pbnRzIGFuZCBoaWdobGlnaHQgdGhlIGFuaW1hbHNcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYW5pbWFscy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGxldCB0bXBBbmltYWwgPSBzcGF0aWFsVmlldy5zZWxlY3QoJyNhbmltYWwtJyArIGFuaW1hbHNbaV0pO1xyXG4gICAgICAgIGxldCBwb2ludCA9IHRtcEFuaW1hbC5kYXRhKClbMF1bJ3AnXTtcclxuICAgICAgICB2ZXJ0aWNlcy5wdXNoKFtwb2ludFswXSwgLXBvaW50WzFdXSk7XHJcblxyXG4gICAgICAgIHRtcEFuaW1hbC5jbGFzc2VkKCdhbmltYWwtaGlnaGxpZ2h0JywgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICAvLyBhZGQgYSBwb2x5Z29uIGh1bGwgaW4gdGhlIHNwYXRpYWwgdmlld1xyXG4gICAgc3BhdGlhbFZpZXcuYXBwZW5kKCdwYXRoJylcclxuICAgICAgICAuYXR0cignY2xhc3MnLCAnaGlnaGxpZ2h0LWhpZXJhcmNoeScpXHJcbiAgICAgICAgLmF0dHIoJ2QnLCAoJ00nICsgZDMucG9seWdvbkh1bGwodmVydGljZXMpLmpvaW4oJ0wnKSArICdaJykpO1xyXG59XHJcblxyXG4vKipcclxuICogUmVtb3ZlIHRoZSBoaWdobGlnaHQgaW4gdGhlIHNwYXRpYWwgdmlld1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUhpZ2hsaWdodFNwYXRpYWxWaWV3KCkge1xyXG4gICAgLy8gcmVtb3ZlIHRoZSBjb2xvcmluZyBhbmQgdGhlIGhpZXJhcmNoeSBoaWdobGlnaHQgaHVsbFxyXG4gICAgZDMuc2VsZWN0QWxsKCcuYW5pbWFsJykuY2xhc3NlZCgnYW5pbWFsLWhpZ2hsaWdodCcsIGZhbHNlKTtcclxuICAgIGQzLnNlbGVjdEFsbCgnLmhpZ2hsaWdodC1oaWVyYXJjaHknKS5yZW1vdmUoKTtcclxufVxyXG4iLCIvKmVzbGludC1kaXNhYmxlIG5vLXVudXNlZC1sZXRzKi9cclxuLypnbG9iYWwgd2luZG93LCAkLCBwYXJhbWV0ZXJzICovXHJcblxyXG5sZXQgSlNPTkFQSV9NSU1FVFlQRSA9ICdhcHBsaWNhdGlvbi92bmQuYXBpK2pzb24nO1xyXG52YXIgc291cmNlO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGFkZFRvRGF0YXNldCxcclxuICAgIHNldERhdGFTZXRQZXJjZW50aWxlLFxyXG4gICAgc2V0U3dhcm1EYXRhLFxyXG4gICAgc2V0TWV0YURhdGEsXHJcbiAgICBzZXREYXRhc2V0RmVhdHVyZSxcclxuICAgIHNldE5ldHdvcmtEYXRhLFxyXG4gICAgc2V0SGllcmFyY2h5RGF0YSxcclxuICAgIHNldEFuaW1hbElkc1xyXG59IGZyb20gJy4vZXhwbG9yZS5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgYWRkTmV0d29ya0J1dHRvbnMsXHJcbiAgICBzZXROZXR3b3JrSURcclxufSBmcm9tICcuL25ldHdvcmsuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGVuYWJsZVBsYXlCdXR0b24sXHJcbiAgICBkaXNhYmxlUGxheUJ1dHRvbixcclxuICAgIGFkZEFic29sdXRlRmVhdHVyZUJ1dHRvbnNcclxufSBmcm9tICcuL2hlbHBlcnMuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIFNwYXRpYWxWaWV3XHJcbn0gZnJvbSAnLi9zcGF0aWFsX3ZpZXcvc3BhdGlhbF92aWV3LmpzJztcclxuXHJcbi8vIGltcG9ydCB7XHJcbi8vICAgICByZXNwb25zZVBhcmFtZXRlcnNcclxuLy8gfSBmcm9tICcuL3Zpc3VhbF9wYXJhbWV0ZXIuanMnO1xyXG5cclxuXHJcbi8qKlxyXG4gKiBTdHJlYW0gdGhlIG1vdmVtZW50IGRhdGEgZnJvbSB0aGUgQVBJXHJcbiAqIExvYWRzIG9ubHkgdGhlIGV4cGxpY2l0IG1vdmVtZW50IGRhdGFcclxuICovXHJcbi8vY29uc29sZS5sb2coZGF0YSk7XHJcbmV4cG9ydCBmdW5jdGlvbiBzdHJlYW1Nb3ZlbWVudERhdGEoKSB7XHJcbiAgICBpZiAod2luZG93LkV2ZW50U291cmNlKSB7XHJcbiAgICAgICAgc291cmNlID0gbmV3IEV2ZW50U291cmNlKCcvYXBpL21vdmVtZW50X29ubHkvJyArIHBhcmFtZXRlcnNbJ2lkJ10pO1xyXG4gICAgICAgIHNvdXJjZS5vbm1lc3NhZ2UgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmRhdGEgPT09ICdjbG9zZScpIHtcclxuICAgICAgICAgICAgICAgIHNvdXJjZS5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgLy8gaWYgYWxsIGFqYXggcXVlcmllcyBhcmUgY29tcGVsdGUgaW5pdGlhbGl6ZVxyXG4gICAgICAgICAgICAgICAgKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNoZWNrUGVuZGluZ1JlcXVlc3QoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkLmFjdGl2ZSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGNoZWNrUGVuZGluZ1JlcXVlc3QsIDEwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZpZXcgPSBuZXcgU3BhdGlhbFZpZXcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChjaGVja1BlbmRpbmdSZXF1ZXN0LCAxMDApO1xyXG4gICAgICAgICAgICAgICAgfSkoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGFkZFRvRGF0YXNldChKU09OLnBhcnNlKGUuZGF0YSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgc291cmNlLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICBpZiAoZS5yZWFkeVN0YXRlID09IEV2ZW50U291cmNlLkNMT1NFRCkge1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoJ1N0cmVhbWluZyBlcnJvcicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgZmFsc2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBhbGVydCgnV2ViYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IHN0cmVhbWluZycpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogR2V0IHRoZSBwZXJjZW50aWxlIGRhdGEgZnJvbSB0aGUgYXBpIGV4cG9ydCB0byBleHBsb3JlLmpzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGVyY2VudGlsZSgpIHtcclxuICAgIGxldCBkYXRhU2V0UGVyY2VudGlsZSA9IFtdO1xyXG4gICAgJC5hamF4KHtcclxuICAgICAgICB1cmw6ICcvYXBpL3BlcmNlbnRpbGUvJyArIHBhcmFtZXRlcnNbJ2lkJ10sXHJcbiAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICB0eXBlOiAnR0VUJyxcclxuICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgJ0FjY2VwdCc6IEpTT05BUElfTUlNRVRZUEVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgLy8gY29udmVydCB0aGUgZGF0YVNldFBlcmNlbnRpbGUgaW50byBhbiBhcnJheVxyXG4gICAgICAgICAgICAvLyBbbWluLCBwZXJjZW50aWxlXzEsLi4uLHBlcmNlbnRpbGVfOSxtYXhdXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgZGF0YVNldFBlcmNlbnRpbGVbZGF0YVtpXVsnZmVhdHVyZSddXSA9IFtkYXRhW2ldWydtaW4nXSwgZGF0YVtpXVsncDEnXSwgZGF0YVtpXVsncDInXSwgZGF0YVtpXVsncDMnXSwgZGF0YVtpXVsncDUnXSwgZGF0YVtpXVsncDcnXSwgZGF0YVtpXVsncDgnXSwgZGF0YVtpXVsncDknXSwgZGF0YVtpXVsnbWF4J11dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldERhdGFTZXRQZXJjZW50aWxlKGRhdGFTZXRQZXJjZW50aWxlKTtcclxuICAgICAgICAgICAgYWRkQWJzb2x1dGVGZWF0dXJlQnV0dG9ucyhkYXRhU2V0UGVyY2VudGlsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIHN3YXJtIGZlYXR1cmVzIGZvciB0aGUgbGluZSBjaGFydCBmcm9tIHRoZSBhcGlcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRTd2FybUZlYXR1cmVzKCkge1xyXG4gICAgY29uc3Qgc3dhcm1fZmVhdHVyZXMgPSBbJ3N3YXJtX3RpbWUnLCAnc3dhcm1fc3BlZWQnLCAnc3dhcm1fYWNjZWxlcmF0aW9uJywgJ3N3YXJtX2NvbnZleF9odWxsX2FyZWEnLFxyXG4gICAgICAgICdzd2FybV9kaXN0YW5jZV9jZW50cm9pZCcsICdzd2FybV9kaXJlY3Rpb24nLCAnc3dhcm1fcG9sYXJpc2F0aW9uJ1xyXG4gICAgXTtcclxuXHJcbiAgICAvLyBnZXQgYWxsIHRoZSBvdGhlciBzd2FybSBmZWF0dXJlcyBmb3IgdGhlIGxpbmUgY2hhcnRcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3dhcm1fZmVhdHVyZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6ICcvYXBpL2RhdGFzZXQvJyArIHBhcmFtZXRlcnNbJ2lkJ10gKyAnLycgKyBzd2FybV9mZWF0dXJlc1tpXSxcclxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICAgICAgdHlwZTogJ0dFVCcsXHJcbiAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICdBY2NlcHQnOiBKU09OQVBJX01JTUVUWVBFXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGxldCBmZWF0dXJlID0gc3dhcm1fZmVhdHVyZXNbaV0ucmVwbGFjZSgnc3dhcm1fJywgJycpO1xyXG5cclxuICAgICAgICAgICAgICAgIHNldFN3YXJtRGF0YShkYXRhLCBmZWF0dXJlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogR2V0IHRoZSBtZWFkYXRhIGluZm9ybWF0aW9uXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0TWV0YURhdGEoKSB7XHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICAgIHVybDogJy9hcGkvbWV0YWRhdGEvJyArIHBhcmFtZXRlcnNbJ2lkJ10sXHJcbiAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICB0eXBlOiAnR0VUJyxcclxuICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgJ0FjY2VwdCc6IEpTT05BUElfTUlNRVRZUEVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgc2V0TWV0YURhdGEoZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIG5ldHdvcmsgZGF0YXNldHMgZm9yIHRoZSBidXR0b25zXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0TmV0d29ya0RhdGFCdXR0b24oKSB7XHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICAgIHVybDogJy9hcGkvZGF0YXNldC9uZXR3b3Jrcy8nICsgcGFyYW1ldGVyc1snaWQnXSxcclxuICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgIHR5cGU6ICdHRVQnLFxyXG4gICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAnQWNjZXB0JzogSlNPTkFQSV9NSU1FVFlQRVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICBhZGROZXR3b3JrQnV0dG9ucyhkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCB0aGUgc3BlY2lmYyBmZWF0dXJlXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBmZWF0dXJlIC0gZm9yIGluc3RhbmNlIHNwZWVkLCBhY2NlbGVyYXRpb24gZXRjLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldERhdGFzZXRGZWF0dXJlKGZlYXR1cmUpIHtcclxuICAgICQuYWpheCh7XHJcbiAgICAgICAgdXJsOiAnL2FwaS9kYXRhc2V0LycgKyBwYXJhbWV0ZXJzWydpZCddICsgJy8nICsgZmVhdHVyZSxcclxuICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgIHR5cGU6ICdHRVQnLFxyXG4gICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAnQWNjZXB0JzogSlNPTkFQSV9NSU1FVFlQRVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAvLyBhZGQgdGhlIHNwZWVkIGZlYXR1cmUgdG8gdGhlIGRhdGFzZXRcclxuICAgICAgICAgICAgc2V0RGF0YXNldEZlYXR1cmUoZGF0YSwgZmVhdHVyZSk7XHJcbiAgICAgICAgICAgIGVuYWJsZVBsYXlCdXR0b24oKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCB0aGUgc3BlY2lmYyBzd2FybSBmZWF0dXJlXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBmZWF0dXJlIC0gZm9yIGluc3RhbmNlIGNlbnRyb2lkLCBtZWRvaWQgZXRjLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFN3YXJtRGF0YXNldEZlYXR1cmUoZmVhdHVyZSkge1xyXG4gICAgZGlzYWJsZVBsYXlCdXR0b24oKTtcclxuICAgICQuYWpheCh7XHJcbiAgICAgICAgdXJsOiAnL2FwaS9kYXRhc2V0LycgKyBwYXJhbWV0ZXJzWydpZCddICsgJy8nICsgZmVhdHVyZSxcclxuICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgIHR5cGU6ICdHRVQnLFxyXG4gICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAnQWNjZXB0JzogSlNPTkFQSV9NSU1FVFlQRVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAvLyBhZGQgdGhlIHNwZWVkIGZlYXR1cmUgdG8gdGhlIGRhdGFzZXRcclxuICAgICAgICAgICAgc2V0U3dhcm1EYXRhKGRhdGEsIGZlYXR1cmUpO1xyXG4gICAgICAgICAgICBlbmFibGVQbGF5QnV0dG9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIG5ldHdvcmsgZm9yIHRoZSBzcGVjaWZpYyBuZXR3b3JrX2lkXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBuZXR3b3JrX2lkIC0gdW5pcXVlIG5ldHdvcmsgaWQgb2YgYSBkYXRhc2V0LlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldE5ldHdvcmtEYXRhKG5ldHdvcmtfaWQpIHtcclxuICAgICQuYWpheCh7XHJcbiAgICAgICAgdXJsOiAnL2FwaS9kYXRhc2V0L25ldHdvcmsvJyArIHBhcmFtZXRlcnNbJ2lkJ10gKyAnLycgKyBuZXR3b3JrX2lkLFxyXG4gICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgdHlwZTogJ0dFVCcsXHJcbiAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICdBY2NlcHQnOiBKU09OQVBJX01JTUVUWVBFXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgc2V0TmV0d29ya0RhdGEoSlNPTi5wYXJzZShkYXRhWzBdWydkYXRhJ10pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbmFibGVQbGF5QnV0dG9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAvLyBuZWVkZWQgZm9yIHN0YW5kYXJkIERldmlhdGlvbiBpbiBkZW5kcm9ncmFtXHJcbiAgICBzZXROZXR3b3JrSUQobmV0d29ya19pZCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIG5ldHdvcmsgaGllcmFyY2h5IGZvciB0aGUgc3BlY2lmaWMgbmV0d29ya19pZFxyXG4gKiBAcGFyYW0ge1N0cmluZ30gbmV0d29ya19pZCAtIHVuaXF1ZSBuZXR3b3JrIGlkIG9mIGEgZGF0YXNldC5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXROZXR3b3JrSGllcmFyY2h5RGF0YShuZXR3b3JrX2lkKSB7XHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICAgIHVybDogJy9hcGkvZGF0YXNldC9uZXR3b3JrL2hpZXJhcmNoeS8nICsgcGFyYW1ldGVyc1snaWQnXSArICcvJyArIG5ldHdvcmtfaWQsXHJcbiAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICB0eXBlOiAnR0VUJyxcclxuICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgJ0FjY2VwdCc6IEpTT05BUElfTUlNRVRZUEVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgaWYgKGRhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRIaWVyYXJjaHlEYXRhKEpTT04ucGFyc2UoZGF0YVswXVsnaGllcmFyY2h5J10pLCBuZXR3b3JrX2lkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbmFibGVQbGF5QnV0dG9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIGRpc3RpbmN0IGFuaW1hbCBpZHMgZm9yIGEgc3BlY2lmYyBkYXRhc2V0XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0QW5pbWFsSWRzKCkge1xyXG4gICAgJC5hamF4KHtcclxuICAgICAgICB1cmw6ICcvYXBpL2RhdGFzZXQvJyArIHBhcmFtZXRlcnNbJ2lkJ10gKyAnL2FuaW1hbF9pZHMnLFxyXG4gICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgdHlwZTogJ0dFVCcsXHJcbiAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICdBY2NlcHQnOiBKU09OQVBJX01JTUVUWVBFXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgIHNldEFuaW1hbElkcyhkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuLy8gLyoqXHJcbi8vICAqIFZpc3VhbCBwYXJhbWV0ZXIgc3VnZ2VzdGlvbiBhamF4IHF1ZXJ5XHJcbi8vICAqIEBwYXJhbSB7QXJyYXl9IHRyYWNrZWREYXRhIC0gdHJhY2tlZCBkYXRhIHdpdGggLlxyXG4vLyAgKi9cclxuLy8gZXhwb3J0IGZ1bmN0aW9uIGdldFN1Z2dlc3RlZFBhcmFtZXRlcnModHJhY2tlZERhdGEpIHtcclxuLy8gICAgICQuYWpheCh7XHJcbi8vICAgICAgICAgdXJsOiAnL2FwaS9kYXRhc2V0L3Zpc3VhbF9wYXJhbWV0ZXIvJyArIHBhcmFtZXRlcnNbJ2lkJ10sXHJcbi8vICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuLy8gICAgICAgICB0eXBlOiAnUE9TVCcsXHJcbi8vICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcclxuLy8gICAgICAgICBoZWFkZXJzOiB7XHJcbi8vICAgICAgICAgICAgICdBY2NlcHQnOiBKU09OQVBJX01JTUVUWVBFXHJcbi8vICAgICAgICAgfSxcclxuLy8gICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XHJcbi8vICAgICAgICAgICAgIHJlc3BvbnNlUGFyYW1ldGVycyhkYXRhKTtcclxuLy8gICAgICAgICB9LFxyXG4vLyAgICAgICAgIGRhdGE6IHRyYWNrZWREYXRhXHJcbi8vICAgICB9KTtcclxuLy9cclxuLy8gfVxyXG4iLCIvKmVzbGludC1kaXNhYmxlIG5vLXVudXNlZC1sZXRzKi9cclxuLypnbG9iYWwgd2luZG93LCAkLCBkMyAqL1xyXG5pbXBvcnQge1xyXG4gICAgaGllcmFyY2h5Q29sb3JzLFxyXG4gICAgY29sb3JzLFxyXG4gICAgY2hhbmdlSGllcmFyY2h5TGVnZW5kXHJcbn0gZnJvbSAnLi9oaWVyYXJjaHkuanMnO1xyXG5cclxuXHJcblxyXG5leHBvcnQgbGV0IG5ldHdvcmtBdXRvID0gZmFsc2U7IC8vIGlmIHRydWUgdGhlIG5ldHdvcmsgZWRnZSBsaW1pdCBpcyBhdXRvbWF0aWNhbGx5IHN1Z2dlc3RlZFxyXG5leHBvcnQgbGV0IG5ldHdvcmtMaW1pdCA9IDAuNTtcclxuZXhwb3J0IGxldCBzaG93TmV0d29ya0hpZXJhcmNoeTtcclxuZXhwb3J0IGxldCBuZXR3b3JrQ29sb3IgPSB7fTtcclxuZXhwb3J0IGxldCBuZXR3b3JrSUQ7XHJcbmV4cG9ydCBsZXQgbmV0d29ya0JhY2tncm91bmQgPSB0cnVlO1xyXG5leHBvcnQgbGV0IG5ldHdvcmtCYWNrZ3JvdW5kTGltaXQgPSAxOyAvL2RyYXcgYmFja2dyb3VuZCBsaW5lIGlmIGxpbWl0IGlzIGV4Y2VlZGVkXHJcbi8vIGZpeGVkIGNvbG9yIHNjYWxlIGZvciB0aGUgbmV0d29ya1xyXG5cclxuLyoqXHJcbiAqIGNvbG9yIHNjYWxlIGZvciBuZXR3b3JrIC0gcmFuZ2UgaXMgZGVmaW5lZCBkeW5hbWljIGJhc2VkIG9uIHRoZSBoaWVyYXJoY3kgY29sb3JcclxuICovXHJcbmV4cG9ydCBsZXQgbmV0d29ya0NvbG9yU2NhbGUgPSBkMy5zY2FsZVRocmVzaG9sZCgpXHJcbiAgICAuZG9tYWluKFxyXG4gICAgICAgIFswLCAuMSwgLjIsIC4zLCAuNCwgLjUsIC42LCAuNywgLjgsIC45LCAxXVxyXG4gICAgKS5yYW5nZShbJyNmN2ZiZmYnLCAnI2RlZWJmNycsICcjYzZkYmVmJywgJyM5ZWNhZTEnLCAnIzZiYWVkNicsICcjNDI5MmM2JywgJyMyMTcxYjUnLCAnIzA4NTE5YycsICcjMDgzMDZiJ10pO1xyXG5cclxuXHJcbi8qKlxyXG4gKiBBZGQgdGhlIG5ldHdvcmsgIHNlbGVjdCBidXR0b25zIGFuZCBoaWVyYXJjaHkgY2hlY2tib3hlcyB0byB0aGUgbmV0d29yayBtb2RhbFxyXG4gKiBAcGFyYW0ge2FycmF5fSBkYXRhIC0gQXJyYXkgb2YgbmV0d29yayBkYXRhXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gYWRkTmV0d29ya0J1dHRvbnMoZGF0YSkge1xyXG4gICAgaWYgKGRhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhW2ldWydmaW5pc2hlZCddKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjbmV0d29ya3MtaGllcmFyY2hpZXMtdGFibGUgdGJvZHknKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJzx0cj48dGQ+JyArIGRhdGFbaV1bJ25hbWUnXSArICc8L3RkPiAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzx0ZD4gPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHRcIiBkYXRhPScgKyBkYXRhW2ldWyduZXR3b3JrX2lkJ10gKyAnIG5hbWU9JyArIGRhdGFbaV1bJ25hbWUnXSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc+PHNwYW4gY2xhc3M9XCJtZGkgbWRpLWdyYXBocWxcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L3NwYW4+PC9idXR0b24+PC90ZD4gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8dGQ+PGRpdiBjbGFzcz1cInByZXR0eSBwLXN3aXRjaCBwLWZpbGxcIj48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgY2xhc3M9XCJoaWVhcmNoeS1jaGVja2JveFwiIGRhdGE9XCInICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtpXVsnbmV0d29ya19pZCddICsgJ1wiIG5hbWU9XCInICsgZGF0YVtpXVsnbmFtZSddICsgJ1wiPjxkaXYgY2xhc3M9XCJzdGF0ZSBwLXN1Y2Nlc3NcIj48bGFiZWw+PC9sYWJlbD48L2Rpdj48L2Rpdj48L3RkPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPHRkPi0tLTwvdGQ+J1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAnPHRkPjxkaXYgY2xhc3M9XCJwcmV0dHkgcC1zd2l0Y2ggcC1maWxsXCI+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGNsYXNzPVwibmV0d29yay1oaWVyYXJjaHktY2hlY2tib3hcIiBkYXRhPVwiJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRhdGFbaV1bJ25ldHdvcmtfaWQnXSArICdcIj48ZGl2IGNsYXNzPVwic3RhdGUgcC1zdWNjZXNzXCI+PGxhYmVsPjwvbGFiZWw+PC9kaXY+PC9kaXY+PC90ZD4nXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJCgnI25ldHdvcmtzLWhpZXJhcmNoaWVzLXRhYmxlJylcclxuICAgICAgICAgICAgLmFwcGVuZCgnVGhlcmUgaXMgbm8gbmV0d29yayBkYXRhIGZvciB0aGlzIGRhdGFzZXQnKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICBTZXR0ZXJcclxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4vKipcclxuICogU2V0IHRoZSBuZXR3b3JrIGF1dG8gdmFsdWUgLSBpZiB0cnVlIHRoYW4gdGhlIG5ldHdvcmsgbGltaXQgaXMgc2V0IHRvIHRoZSAwLjk1IHBlcmNlbnRpbGUgb2YgYWxsIHZhbHVlc1xyXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHZhbHVlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2V0TmV0d29ya0F1dG8odmFsdWUpIHtcclxuICAgIG5ldHdvcmtBdXRvID0gdmFsdWU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXQgdGhlIG5ldHdvcmsgbGltaXQgd2l0aCB0aGUgc3BlY2lmaWMgbmV0d29yayBzbGlkZXIgLSBjdXN0b21cclxuICogMCA9IHNpbWlsYXIgYW5kIDEgdW5zaW1pbGFyIGZvciB0aGUgc3BlY2lmaWMgdGltZSBtb21lbnRcclxuICogQHBhcmFtIHtOdW1iZXJ9IHZhbHVlIC0gYmV0d2VlbiAwIGFuZCAxXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2V0TmV0d29yTGltaXQodmFsdWUpIHtcclxuICAgIG5ldHdvcmtMaW1pdCA9IHZhbHVlO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IHRoZSBuZXR3b3JrIGluIGhpZXJhcmNoeSAoZS5nLiBoMCkgZmlsdGVyXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBoaWVyYXJjaHkgLSBlLmcuIDAtblxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldE5ldHdvcmtIaWVyYXJjaHkodmFsdWUpIHtcclxuICAgIHNob3dOZXR3b3JrSGllcmFyY2h5ID0gdmFsdWU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXQgdGhlIG5ldHdvcmsgbmV0d29yayBpZCAtIG5lZWRlZCBmb3IgaGllcmFyY2h5IHN0YW5kYXJkIGRldmlhdGlvbiBjb2xvcmluZ1xyXG4gKiBAcGFyYW0ge051bWJlcn0gdmFsdWUgLSBlLmcuIDAtblxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldE5ldHdvcmtJRCh2YWx1ZSkge1xyXG4gICAgbmV0d29ya0lEID0gdmFsdWU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXQgbmV0d29yayBjb2xvciBzY2FsZSByYW5nZVxyXG4gKiBAcGFyYW0ge051bWJlcn0gaWQgLSBpZCBvZiB0aGUgbmV0d29ya1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldG5ldHdvcmtDb2xvcihuZXR3b3JrX2lkKSB7XHJcbiAgICAvLyBpZiBpZCA9IC0xIHNldCB0aGUgY29sb3IgdG8gbm90aGluZ1xyXG4gICAgaWYgKG5ldHdvcmtfaWQgPj0gMCkge1xyXG4gICAgICAgIG5ldHdvcmtDb2xvclsnaCcgKyBuZXR3b3JrX2lkXSA9ICcjMDgzMDZiJztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbmV0d29ya0NvbG9yID0ge307XHJcbiAgICB9XHJcbiAgICBjaGFuZ2VIaWVyYXJjaHlMZWdlbmQoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldCB0aGUgYm9vbGVhbiB2YWx1ZSBmb3IgdGhlIG5ldHdvcmsgYmFja2dyb3VuZCBjb2xvclxyXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHZhbHVlIC0gdHJ1ZSBvciBmYWxzZVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldE5ldHdvcmtCYWNrZ3JvdW5kKHZhbHVlKSB7XHJcbiAgICBuZXR3b3JrQmFja2dyb3VuZCA9IHZhbHVlO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFNldCB0aGUgbmV0d29yayBiYWNrZ3JvdW5kIGNvbG9yIGxpbWl0IC0gZHJhdyBiYWNrZ3JvdW5kIGxpbmUgaWYgbGltaXQgaXMgZXhjZWVkZWRcclxuICogQHBhcmFtIHtJbnRlZ2VyfSB2YWx1ZSAtIG5ldyBsaW1pdFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldE5ldHdvcmtCYWNrZ3JvdW5kTGltaXQodmFsdWUpIHtcclxuICAgIG5ldHdvcmtCYWNrZ3JvdW5kTGltaXQgPSB2YWx1ZTtcclxufSIsIi8qZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLWxldHMqL1xyXG4vKmdsb2JhbCB3aW5kb3csIGQzLCAkLCBwYXJhbWV0ZXJzKi9cclxuaW1wb3J0IHtcclxuICAgIHNldEluZGV4VGltZSxcclxuICAgIERyYXdlclxyXG59IGZyb20gJy4vc3BhdGlhbF92aWV3L3NwYXRpYWxfdmlldy5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgc3dhcm1EYXRhLFxyXG4gICAgZGF0YXNldCxcclxuICAgIGFuaW1hbElkc1xyXG59IGZyb20gJy4vZXhwbG9yZS5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgcGVyY2VudGlsZXNMaW5lQ2hhcnRcclxufSBmcm9tICcuL2hlbHBlcnMuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGluZGV4VGltZSxcclxufSBmcm9tICcuL3NwYXRpYWxfdmlldy9zcGF0aWFsX3ZpZXcnO1xyXG5cclxuXHJcblxyXG5cclxuZXhwb3J0IGxldCB6b29tRnVuY3Rpb247XHJcblxyXG5sZXQgdHJlbmRDaGFydHNab29tID0ge307XHJcbi8vbGV0IHRoaXMudHJlbmRDaGFydHNFbGVtID0gWydsb3dlci1vdXRlci1hcmVhJywgJ2xvd2VyLWlubmVyLWFyZWEnLCAnbWVkaWFuLWxpbmUnLCAndXBwZXItaW5uZXItYXJlYScsICd1cHBlci1vdXRlci1hcmVhJ107XHJcbi8vbGV0IGxpbmVDaGFydFdpZHRoID0gNTAwMDtcclxubGV0IHJhdGlvID0gMTtcclxubGV0IHpvb21Hcm91cDtcclxubGV0IHg7XHJcbmxldCB5O1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuLy9yYXRpbyA9IE1hdGguY2VpbChzd2FybURhdGEubGVuZ3RoIC8gdGhpcy5saW5lQ2hhcnRXaWR0aCk7XHJcbiAgICAvL2NvbnNvbGUubG9nKHN3YXJtRGF0YSk7XHJcbiAgICAvL2xldCByZXN1bHQgPSBzd2FybURhdGEubWFwKG9iaiA9PiAoe3RpbWU6b2JqLnRpbWUsIGRpc3RfY2VuOm9iai5kaXN0YW5jZV9jZW50cm9pZH0pKTtcclxuICAgIC8vY29uc29sZS5sb2cocmVzdWx0KTtcclxuXHJcblxyXG5cclxuXHJcblxyXG4vL2xpbmVjaGFydC5kcmF3KCk7XHJcbi8vbGV0IHN3YXJtRGF0ID0gbmV3IHN3YXJtRGF0YSgpO1xyXG4iLCIvKmVzbGludC1kaXNhYmxlIG5vLXVudXNlZC1sZXRzKi9cclxuLypnbG9iYWwgd2luZG93LCAkICovXHJcbi8vIGltcG9ydCBhbGwganNcclxuaW1wb3J0ICogYXMgcXVlcmllcyBmcm9tICcuL2FqYXhfcXVlcmllcy5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgaW5pdGlhbGl6ZU1ldGFkZGF0YVxyXG59IGZyb20gJy4vbWV0YWRhdGEuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIHNldEhpZXJhcmNoeUxldmVsLFxyXG4gICAgcmVtb3ZlSGllcmFyY2h5TGV2ZWwsXHJcbiAgICBzZXRIaWVyYXJjaHlDb2xvcixcclxuICAgIHJlbW92ZUhpZXJhcmNoeUNvbG9yLFxyXG4gICAgY2hhbmdlSGllcmFyY2h5TGVnZW5kXHJcbn0gZnJvbSAnLi9oaWVyYXJjaHkuanMnO1xyXG5cclxuLy8gaW1wb3J0IGNzc1xyXG5pbXBvcnQgJy4vZXhwbG9yZS5jc3MnO1xyXG5cclxuaW1wb3J0IENoYXJ0IGZyb20gJy4vbGluZV9jaGFydC5qcyc7XHJcblxyXG5leHBvcnQgbGV0IGRhdGFzZXQgPSBbXTsgLy8gbWFpbiBkYXRhc2V0IHdpdGggdmFsdWVzIGZvciBlYWNoIGluZGl2aWR1YWwgYW5pbWFsXHJcbmV4cG9ydCBsZXQgZGF0YXNldE1ldGFkYXRhID0gW107IC8vIG1ldGFkYXRhc2V0IGZvciBlYWNoIGluZGl2aWR1YWwgZmlzaFxyXG5leHBvcnQgbGV0IHN3YXJtRGF0YSA9IFtdOyAvLyBzd2FybWRhdGEgZm9yIGxpbmVjaGFydCBhbmQgYWxzbyBvdGhlciBzd2FybSBmZWF0dXJlc1xyXG5leHBvcnQgbGV0IGRhdGFTZXRQZXJjZW50aWxlID0ge307IC8vIHBlY2VudGlsZXMgbmVlZGVkIGZvciB0aGUgY29sb3IgbWFwcGluZ1xyXG5leHBvcnQgbGV0IG5ldHdvcmtEYXRhID0ge307IC8vIG5ldHdvcmsgZGF0YVxyXG5leHBvcnQgbGV0IG5ldHdvcmtIaWVyYXJjaHkgPSB7fTsgLy8gbmV0d29yayBoaWVyYXJjaHkgZGF0YVxyXG5leHBvcnQgbGV0IGFuaW1hbElkcyA9IHt9OyAvLyBkaXN0aW5jdCBhbmltYWwgaWRzXHJcblxyXG5cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIGJhc2ljIGRhdGEgdG8gZ2V0IHRoZSB0b29sIHJ1bm5pbmcuXHJcbiAqIGFmdGVyIHRoZSBwZW5kaW5nIGFqYXggcXVlcmllcyBhcmUgZmluaXNoZWRcclxuICogdGhlIHRvb2wgaXMgZHJhd25cclxuICovXHJcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xyXG4gICAgLy8gY29uc29sZS5sb2cocGFyYW1ldGVycyk7XHJcblxyXG4gICAgLy8gZ2V0IHRoZSBtb3ZlbWVudCBkYXRhXHJcbiAgICBxdWVyaWVzLnN0cmVhbU1vdmVtZW50RGF0YSgpO1xyXG5cclxuICAgIC8vIGdldCB0aGUgZGF0YVNldFBlcmNlbnRpbGVcclxuICAgIHF1ZXJpZXMuZ2V0UGVyY2VudGlsZSgpO1xyXG5cclxuICAgIC8vIGdldCB0aGUgZGlzdGluY3QgYW5pbWFsIGlkcyBmb3IgdGhlIHdob2xlIGRhdGFzZXRcclxuICAgIHF1ZXJpZXMuZ2V0QW5pbWFsSWRzKCk7XHJcblxyXG4gICAgLy8gZ2V0IHRoZSBzd2FybSBmZWF0dXJlcyBmb3IgdGhlIGxpbmUgY2hhcnRcclxuICAgIHF1ZXJpZXMuZ2V0U3dhcm1GZWF0dXJlcygpO1xyXG5cclxuICAgIC8vIGdldCB0aGUgbWV0YWRhdGEgYW5kIGluaXRpYWxpemUgdGhlIG1ldGFkYSB3aW5kb3dcclxuICAgIHF1ZXJpZXMuZ2V0TWV0YURhdGEoKTtcclxuXHJcbiAgICAvLyBnZXQgdGhlIGluZm9ybWF0aW9uIGlmIHRoZXJlIGFyZSBhbHJlYWR5IG5ldHdvcmtzIGNyZWF0ZWQgZm9yIHRoaXMgZGFzdGFzZXRcclxuICAgIHF1ZXJpZXMuZ2V0TmV0d29ya0RhdGFCdXR0b24oKTtcclxufSk7XHJcblxyXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICBHZXR0ZXIgYW5kIHNldHRlclxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbi8qKlxyXG4gKiBDb25jYWN0IHRvIHRoZSBtYWluIGRhdGFzZXRcclxuICogdGhlIGlkZWEgaXMgdG8gdXNlIHRoaXMgb25lIGRheSBmb3IgbGF6eSBsb2FkaW5nXHJcbiAqIEBwYXJhbSB7YXJyYXl9IHZhbHVlIC0gYXJyYXkgb2YgbW92ZW1lbnQgZGF0YXNldHNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRUb0RhdGFzZXQodmFsdWUpIHtcclxuICAgIGRhdGFzZXQgPSBkYXRhc2V0LmNvbmNhdCh2YWx1ZSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXQgZGF0YXNldCBwZXJjZW50aWxlXHJcbiAqIEBwYXJhbSB7YXJyYXl9IHZhbHVlIC0gYXJyYXkgb2YgYXJyYXJ5c1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldERhdGFTZXRQZXJjZW50aWxlKHZhbHVlKSB7XHJcbiAgICBkYXRhU2V0UGVyY2VudGlsZSA9IHZhbHVlO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IGRhdGFzZXQgbWV0YWRhdGFcclxuICogQHBhcmFtIHthcnJheX0gdmFsdWUgLSBhcnJheVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldE1ldGFEYXRhKHZhbHVlKSB7XHJcbiAgICBkYXRhc2V0TWV0YWRhdGEgPSB2YWx1ZTtcclxuICAgIC8vIGluaXRpYWxpemUgdGhlIG1ldGFkYXRhIG1vZGFsXHJcbiAgICBpbml0aWFsaXplTWV0YWRkYXRhKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBZGQgYSBuZXcgZmVhdHVyZSBkaW1lbnNpb24gdG8gdGhlIHN3YXJtIGRhdGFzZXRcclxuICogQHBhcmFtIHthcnJheX0gZGF0YSAtIEFycmF5IG9mIHN3YXJtIHZhbHVlcyBjb25zaXN0aW5nIG9mIFtmZWF0dXJlXzAsZmVhdHVyZV8xLC4uLl1cclxuICogQHBhcmFtIHtzdHJpbmd9IGZlYXR1cmUgLSBzdHJpbmcgYXJyYXkgb2YgdGhlIGZlYXR1cmVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRTd2FybURhdGEoZGF0YSwgZmVhdHVyZSkge1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgLy8gYWRkIHRoZSB0aGUgb2JqZWN0IHRvIHRoZSBhcnJheSBpZiB0aGVyZSBpcyBubyBlbGVtZW50IHlldFxyXG4gICAgICAgIGlmICh0eXBlb2Ygc3dhcm1EYXRhW2ldID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICBzd2FybURhdGEucHVzaCh7fSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBjaGVjayBpZiBpbnRlZ2VyIG9yIGZsb2F0XHJcbiAgICAgICAgaWYgKGRhdGFbaV0gJiYgIShpc05hTihkYXRhW2ldKSkpIHtcclxuICAgICAgICAgICAgc3dhcm1EYXRhW2ldW2ZlYXR1cmVdID0gK2RhdGFbaV07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gaXMgc3RyaW5nXHJcbiAgICAgICAgICAgIHN3YXJtRGF0YVtpXVtmZWF0dXJlXSA9IGRhdGFbaV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEFkZCBhIG5ldyBmZWF0dXJlIGRpbWVuc2lvbiB0byB0aGUgZGF0YXNldFxyXG4gKiBAcGFyYW0ge2FycmF5fSBkYXRhIC0gQXJyYXkgb2YgZmVhdHVyZXMgdmFsdWVzIGNvbnNpc3Rpbmcgb2YgW2ZlYXR1cmVfMCwgZmVhdHVyZV8xLC4uLl1cclxuICogQHBhcmFtIHtzdHJpbmd9IGZlYXR1cmUgLSBzdHJpbmcgYXJyYXkgb2YgdGhlIGZlYXR1cmVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXREYXRhc2V0RmVhdHVyZShkYXRhLCBmZWF0dXJlKSB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAvLyBhZGQgdGhlIHRoZSBvYmplY3QgdG8gdGhlIGFycmF5IGlmIHRoZXJlIGlzIG5vIGVsZW1lbnQgeWV0XHJcbiAgICAgICAgaWYgKHR5cGVvZiBkYXRhc2V0W2ldID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICBkYXRhc2V0LnB1c2goe30pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBwYXJzZSB0aGUgaW50XHJcbiAgICAgICAgZGF0YXNldFtpXVtmZWF0dXJlXSA9ICtkYXRhW2ldO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogU2V0IHRoZSBuZXR3b3JrIHZhbHVlXHJcbiAqIEBwYXJhbSB7YXJyYXl9IHZhbHVlIC0gQXJyYXkgb2Ygb2YgYXJyYXlzIHdpdGggYWxsIHZhbHVlc1xyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gdGhlIGNhbGN1bGF0ZWQgYWRqYWNlbmN5IG1hdHJpeFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldE5ldHdvcmtEYXRhKHZhbHVlKSB7XHJcbiAgICBuZXR3b3JrRGF0YSA9IHZhbHVlO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IHRoZSBuZXR3b3JrIGhpZWFyaGN5IHZhbHVlXHJcbiAqIEBwYXJhbSB7YXJyYXl9IHZhbHVlIC0gQXJyYXkgb2Ygb2YgYXJyYXlzIHdpdGggYWxsIHZhbHVlc1xyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpdGggaGllcmFyY2h5XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2V0SGllcmFyY2h5RGF0YSh2YWx1ZSwgbmV0d29ya19pZCkge1xyXG4gICAgLy8gaWYgdGhlIGVsZW1lbnQgaXMgZW1wdHkgcmVtb3ZlIHRoZSBlbGVtZW50IGZyb20gdGhlIG5ldHdyb2tIaWVyYXJjaHkgb2JqZWN0XHJcbiAgICBpZiAoT2JqZWN0LmtleXModmFsdWUpLmxlbmd0aCA9PT0gMCAmJiB2YWx1ZS5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0KSB7XHJcbiAgICAgICAgZGVsZXRlIG5ldHdvcmtIaWVyYXJjaHlbJ2gnICsgbmV0d29ya19pZF07XHJcbiAgICAgICAgcmVtb3ZlSGllcmFyY2h5TGV2ZWwobmV0d29ya19pZCk7XHJcbiAgICAgICAgcmVtb3ZlSGllcmFyY2h5Q29sb3IobmV0d29ya19pZCk7XHJcbiAgICB9IC8vIGFkZCBpdCB0byB0aGUgbmV0d29yayBoaWVyYXJjaHlcclxuICAgIGVsc2Uge1xyXG4gICAgICAgIG5ldHdvcmtIaWVyYXJjaHlbJ2gnICsgbmV0d29ya19pZF0gPSB2YWx1ZTtcclxuICAgICAgICBzZXRIaWVyYXJjaHlMZXZlbChuZXR3b3JrX2lkLCAyKTtcclxuICAgICAgICBzZXRIaWVyYXJjaHlDb2xvcihuZXR3b3JrX2lkKTtcclxuICAgIH0gLy8gdG9vIG1hbnkgZWxlbWVudHMgY2FudCBiZSBhZGRlZFxyXG5cclxuICAgIGNoYW5nZUhpZXJhcmNoeUxlZ2VuZCgpO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IGFuaW1hbCBpZHMgZGF0YXNldFxyXG4gKiBAcGFyYW0ge2FycmF5fSBpZHMgLSBBcnJheSBvZiBhbGwgZGlzdGluY3QgYW5pbWFsIGlkc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldEFuaW1hbElkcyh2YWx1ZSkge1xyXG4gICAgYW5pbWFsSWRzID0gdmFsdWU7XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==