!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t){},function(e,t,n){var r=n(2);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(4)(r,a);r.locals&&(e.exports=r.locals)},function(e,t,n){(t=n(3)(!1)).push([e.i,"/* Icons for bootstrap 4 */\r\n\r\n.mdi::before {\r\n    font-size: 24px;\r\n    line-height: 14px;\r\n}\r\n\r\n.btn .mdi::before {\r\n    position: relative;\r\n    top: 4px;\r\n}\r\n\r\n.btn-xs .mdi::before {\r\n    font-size: 18px;\r\n    top: 3px;\r\n}\r\n\r\n.btn-sm .mdi::before {\r\n    font-size: 18px;\r\n    top: 3px;\r\n}\r\n\r\n.dropdown-menu .mdi {\r\n    width: 18px;\r\n}\r\n\r\n.dropdown-menu .mdi::before {\r\n    position: relative;\r\n    top: 4px;\r\n    left: -8px;\r\n}\r\n\r\n.nav .mdi::before {\r\n    position: relative;\r\n    top: 4px;\r\n}\r\n\r\n.navbar .navbar-toggle .mdi::before {\r\n    position: relative;\r\n    top: 4px;\r\n    color: #FFF;\r\n}\r\n\r\n.breadcrumb .mdi::before {\r\n    position: relative;\r\n    top: 4px;\r\n}\r\n\r\n.breadcrumb a:hover {\r\n    text-decoration: none;\r\n}\r\n\r\n.breadcrumb a:hover span {\r\n    text-decoration: underline;\r\n}\r\n\r\n.alert .mdi::before {\r\n    position: relative;\r\n    top: 4px;\r\n    margin-right: 2px;\r\n}\r\n\r\n.input-group-addon .mdi::before {\r\n    position: relative;\r\n    top: 3px;\r\n}\r\n\r\n.navbar-brand .mdi::before {\r\n    position: relative;\r\n    top: 2px;\r\n    margin-right: 2px;\r\n}\r\n\r\n.list-group-item .mdi::before {\r\n    position: relative;\r\n    top: 3px;\r\n    left: -3px\r\n}\r\n\r\n/* SVG elements and text */\r\n\r\n#main-vis {\r\n    margin-bottom: 10px;\r\n}\r\n\r\n.svg-container {\r\n    display: inline-block;\r\n    position: relative;\r\n    width: 100%;\r\n    /* aspect ratio */\r\n    vertical-align: top;\r\n    overflow: visible;\r\n}\r\n\r\n.svg-content {\r\n    display: inline-block;\r\n    position: absolute;\r\n    border: 1px solid #000;\r\n}\r\n\r\n#main-vis-legend-div {\r\n    display: none;\r\n}\r\n\r\n#hierarchy-legend-div {\r\n    display: none;\r\n}\r\n\r\n#main-vis-legend {\r\n    float: right;\r\n    display: inline-block;\r\n    position: relative;\r\n    overflow: visible;\r\n    top: 10px;\r\n    left: 10px;\r\n}\r\n\r\n#hierarchy-legend {\r\n    float: left;\r\n    display: inline-block;\r\n    position: relative;\r\n    overflow: visible;\r\n    top: 10px;\r\n    left: 10px;\r\n}\r\n\r\n.svg-content-dendrogram {\r\n    display: inline-block;\r\n    border: 1px solid #000;\r\n}\r\n\r\n.svg-line-chart-container {\r\n    display: inline-block;\r\n    position: relative;\r\n    width: 100%;\r\n    height: auto;\r\n    /* depends on svg ratio */\r\n    padding-bottom: 17%;\r\n    /* aspect ratio */\r\n    vertical-align: top;\r\n    overflow: visible;\r\n}\r\n\r\n.svg-dendrogram-container {\r\n    display: inline-block;\r\n    position: relative;\r\n    height: auto;\r\n    vertical-align: top;\r\n    overflow: visible;\r\n}\r\n\r\n.axis path {\r\n    display: none;\r\n}\r\n\r\n.axis line {\r\n    stroke-opacity: 0.3;\r\n    shape-rendering: crispEdges;\r\n}\r\n\r\n.x {\r\n    font-size: 1em;\r\n}\r\n\r\n.y {\r\n    font-size: 1em;\r\n}\r\n\r\n.axis-line-chart path line {\r\n    fill: none;\r\n    stroke: #000;\r\n    shape-rendering: crispEdges;\r\n}\r\n\r\n.line {\r\n    fill: none;\r\n    stroke-width: 5px;\r\n}\r\n\r\n/* Time  */\r\n\r\n.frame-text {\r\n    margin-top: 0;\r\n    margin-bottom: 0;\r\n    font-size: 2em;\r\n    color: inherit;\r\n    font-weight: 500;\r\n    line-height: 1.1;\r\n}\r\n\r\n/* Slider ticks  */\r\n\r\n.ui-slider-tick {\r\n    display: inline-block;\r\n    width: 3px;\r\n    background: #337ab7;\r\n    height: 0.8em;\r\n    position: absolute;\r\n}\r\n\r\n/* Laoding gif   */\r\n\r\n#loading {\r\n    display: block;\r\n    text-align: center;\r\n}\r\n\r\n/* Color legend    */\r\n\r\n.legend {\r\n    font-size: 12px;\r\n    stroke: #000;\r\n}\r\n\r\n.legend-text {\r\n    font-size: 1.2em;\r\n    color: inherit;\r\n    line-height: 1.1;\r\n}\r\n\r\n.line-chart-legend-text {\r\n    font-size: 2em;\r\n    color: inherit;\r\n    line-height: 1.1;\r\n}\r\n\r\n.time-line {\r\n    fill: none;\r\n    stroke-width: 5px;\r\n    stroke: #000;\r\n}\r\n\r\n/*swarm features */\r\n\r\n.centroid {\r\n    fill-opacity: 0;\r\n    stroke: #e7298a;\r\n    stroke-width: 3px;\r\n}\r\n\r\n.medoid {\r\n    fill: #e7298a !important;\r\n    stroke: #e7298a !important;\r\n}\r\n\r\n.hull-path {\r\n    fill: #fff;\r\n    fill-opacity: 0;\r\n    stroke-width: 3;\r\n    stroke: #252525;\r\n    stroke-opacity: 0.5;\r\n}\r\n\r\n.hierarchy-group {\r\n    stroke-width: 10;\r\n    stroke-linejoin: round;\r\n    opacity: 0.2;\r\n}\r\n\r\n.delaunay-triangulation {\r\n    fill-opacity: 0;\r\n    stroke-width: 2;\r\n    stroke: #000;\r\n    stroke-opacity: 0.4;\r\n}\r\n\r\n/* Color brewer picker div */\r\n\r\n.palette {\r\n    cursor: pointer;\r\n    display: table;\r\n    vertical-align: bottom;\r\n    margin: 4px 0 4px 4px;\r\n    background: #fff;\r\n    border: solid 1px #aaa;\r\n}\r\n\r\n.swatch {\r\n    display: inline-block;\r\n    vertical-align: middle;\r\n    width: 22px;\r\n    height: 22px;\r\n}\r\n\r\n.voronoi {\r\n    fill-opacity: 0;\r\n    stroke-width: 3;\r\n    stroke: #000;\r\n    stroke-opacity: 0.2;\r\n}\r\n\r\n/* Tooltip */\r\n\r\ndiv.tooltip {\r\n    pointer-events: none;\r\n    opacity: 0;\r\n    background: rgb(255, 255, 255) !important;\r\n    border-left-color: #1b809e !important;\r\n    border: 1px solid #eee;\r\n    border-left-width: 5px;\r\n    border-radius: 3px;\r\n    position: absolute;\r\n}\r\n\r\ndiv.tooltip table td:nth-child(2) {\r\n    text-align: center;\r\n    font-weight: bold;\r\n}\r\n\r\n.tooltip-span {\r\n    display: block;\r\n    width: 150px;\r\n    word-wrap: break-word;\r\n    font-size: 1.5em;\r\n}\r\n\r\n.upper-outer-area, .lower-outer-area {\r\n    stroke-width: 1;\r\n    fill: #74a9cf;\r\n    stroke: #3690c0;\r\n}\r\n\r\n.upper-inner-area, .lower-inner-area {\r\n    stroke-width: 1;\r\n    fill: #045a8d;\r\n    stroke: #023858;\r\n}\r\n\r\n.median-line {\r\n    fill: none;\r\n    stroke: #525252;\r\n    stroke-width: 5;\r\n}\r\n\r\n.selected {\r\n    background: #999;\r\n    border: 4px solid #4d4d4d;\r\n    -moz-border-radius: 5px;\r\n    -webkit-border-radius: 5px;\r\n    box-shadow: 1px 2px 4px rgba(0, 0, 0, .4);\r\n}\r\n\r\n.zoom {\r\n    fill: none;\r\n    pointer-events: all;\r\n}\r\n\r\n.x.axis-line-chart>g>text {\r\n    font-size: 3em;\r\n    color: inherit;\r\n    line-height: 1.1;\r\n}\r\n\r\n.arrow {\r\n    stroke-width: 1;\r\n}\r\n\r\n#centroid-line {\r\n    stroke-width: 1;\r\n    stroke: #e7298a;\r\n}\r\n\r\n#centroid-arrow {\r\n    fill: #e7298a;\r\n}\r\n\r\n.metadata-swatch {\r\n    width: 30px;\r\n    height: 30px;\r\n    border-radius: 3px;\r\n    border: 2px solid #666;\r\n}\r\n\r\n.metadata-swatch-clickable:hover {\r\n    border: 2px solid #000;\r\n    cursor: pointer;\r\n}\r\n\r\n.dropdown-menu {\r\n    min-width: 40px;\r\n    padding: 5px;\r\n}\r\n\r\n.metadata-legend {\r\n    list-style: none;\r\n    margin-top: 10px;\r\n}\r\n\r\n.metadata-legend li {\r\n    float: left;\r\n    margin-right: 10px;\r\n}\r\n\r\n.metadata-legend span {\r\n    border: 2px solid #666;\r\n    float: left;\r\n    width: 30px;\r\n    height: 30px;\r\n}\r\n\r\n.metadata-legend .bl-avg {\r\n    background-color: #7fc97f;\r\n}\r\n\r\n.metadata-legend .avg {\r\n    background-color: #fdc086;\r\n}\r\n\r\n.metadata-legend .ab-avg {\r\n    background-color: #386cb0;\r\n}\r\n\r\n.network-edges {\r\n    fill-opacity: 0;\r\n    stroke-width: 2;\r\n}\r\n\r\n.network-background-edges {\r\n    fill-opacity: 0;\r\n    stroke-opacity: 0.25;\r\n    stroke: #737373;\r\n}\r\n\r\n.node text {\r\n    font: 12px sans-serif;\r\n}\r\n\r\n.node--internal text {\r\n    text-shadow: 0 1px 0 #fff, 0 -1px 0 #fff, 1px 0 0 #fff, -1px 0 0 #fff;\r\n}\r\n\r\n.link {\r\n    fill: none;\r\n    stroke: #636363;\r\n    stroke-width: 5px;\r\n}\r\n\r\n#active-network-name {\r\n    font-weight: bold;\r\n    color: #296292;\r\n}\r\n\r\n.active-level {\r\n    fill: #386cb0;\r\n}\r\n\r\n#dendrogram-panel {\r\n    position: initial;\r\n}\r\n\r\n#dendrogram-panel {\r\n    display: none\r\n}\r\n\r\n.show-dendrogram {\r\n    float: right;\r\n    border-radius: 3px;\r\n    border: 1px solid #D1D3D4;\r\n    font-weight: normal;\r\n}\r\n\r\n.show-dendrogram:hover {\r\n    background: #D1D3D4;\r\n}\r\n\r\n.dendrogram-text {\r\n    font-size: 10em !important;\r\n}\r\n\r\n.highlight-hierarchy {\r\n    fill: #252525;\r\n    stroke: #252525;\r\n    stroke-width: 10;\r\n    stroke-linejoin: round;\r\n    opacity: 0.3;\r\n}\r\n\r\n.animal-highlight {\r\n    fill: #c51b7d !important;\r\n}\r\n\r\n#dendrogram-buttons-div .btn span.glyphicon {\r\n    opacity: 0;\r\n}\r\n\r\n#dendrogram-buttons-div .btn.active span.glyphicon {\r\n    opacity: 1;\r\n}\r\n\r\n#dendrogram-buttons-div {\r\n    border: 2px solid #D1D3D4;\r\n    border-radius: 5px;\r\n}\r\n\r\n#dendrogram-legend {\r\n    margin-left: 20px;\r\n}\r\n\r\n.intersection {\r\n    fill: url(#striped) !important;\r\n    stroke: #67000d;\r\n}\r\n\r\n.sym-difference {\r\n    fill: url(#striped) !important;\r\n    stroke: #67000d;\r\n}\r\n\r\n.modal-lg {\r\n    max-width: 80%;\r\n}\r\n\r\n.background-image {\r\n    background: #fff;\r\n}",""]),e.exports=t},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var a=(o=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(l," */")),i=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[n].concat(i).concat([a]).join("\n")}var o,s,l;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var a={};if(r)for(var i=0;i<this.length;i++){var o=this[i][0];null!=o&&(a[o]=!0)}for(var s=0;s<e.length;s++){var l=[].concat(e[s]);r&&a[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},function(e,t,n){var r,a,i={},o=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===a&&(a=r.apply(this,arguments)),a}),s=function(e){return document.querySelector(e)},l=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var n=s.call(this,e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),d=null,c=0,h=[],p=n(5);function u(e,t){for(var n=0;n<e.length;n++){var r=e[n],a=i[r.id];if(a){a.refs++;for(var o=0;o<a.parts.length;o++)a.parts[o](r.parts[o]);for(;o<r.parts.length;o++)a.parts.push(x(r.parts[o],t))}else{var s=[];for(o=0;o<r.parts.length;o++)s.push(x(r.parts[o],t));i[r.id]={id:r.id,refs:1,parts:s}}}}function m(e,t){for(var n=[],r={},a=0;a<e.length;a++){var i=e[a],o=t.base?i[0]+t.base:i[0],s={css:i[1],media:i[2],sourceMap:i[3]};r[o]?r[o].parts.push(s):n.push(r[o]={id:o,parts:[s]})}return n}function f(e,t){var n=l(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=h[h.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),h.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var a=l(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,a)}}function g(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=h.indexOf(e);t>=0&&h.splice(t,1)}function v(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),b(t,e.attrs),f(e,t),t}function b(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function x(e,t){var n,r,a,i;if(t.transform&&e.css){if(!(i=t.transform(e.css)))return function(){};e.css=i}if(t.singleton){var o=c++;n=d||(d=v(t)),r=w.bind(null,n,o,!1),a=w.bind(null,n,o,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",b(t,e.attrs),f(e,t),t}(t),r=C.bind(null,n,t),a=function(){g(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(t),r=$.bind(null,n),a=function(){g(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else a()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=o()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=m(e,t);return u(n,t),function(e){for(var r=[],a=0;a<n.length;a++){var o=n[a];(s=i[o.id]).refs--,r.push(s)}e&&u(m(e,t),t);for(a=0;a<r.length;a++){var s;if(0===(s=r[a]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete i[s.id]}}}};var k,y=(k=[],function(e,t){return k[e]=t,k.filter(Boolean).join("\n")});function w(e,t,n,r){var a=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=y(t,a);else{var i=document.createTextNode(a),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(i,o[t]):e.appendChild(i)}}function $(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function C(e,t,n){var r=n.css,a=n.sourceMap,i=void 0===t.convertToAbsoluteUrls&&a;(t.convertToAbsoluteUrls||i)&&(r=p(r)),a&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");var o=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var a,i=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?e:(a=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(a)+")")}))}},function(e,t,n){"use strict";let r,a;n.r(t),n.d(t,"dataset",(function(){return Q})),n.d(t,"datasetMetadata",(function(){return ee})),n.d(t,"swarmData",(function(){return te})),n.d(t,"dataSetPercentile",(function(){return ne})),n.d(t,"networkData",(function(){return re})),n.d(t,"networkHierarchy",(function(){return ae})),n.d(t,"animalIds",(function(){return ie})),n.d(t,"addToDataset",(function(){return oe})),n.d(t,"setDataSetPercentile",(function(){return se})),n.d(t,"setMetaData",(function(){return le})),n.d(t,"setSwarmData",(function(){return de})),n.d(t,"setDatasetFeature",(function(){return ce})),n.d(t,"setNetworkData",(function(){return he})),n.d(t,"setHierarchyData",(function(){return pe})),n.d(t,"setAnimalIds",(function(){return ue}));colorbrewer.BuYlBu;let i={};var o=n(0);let s=!0;function l(e){s="boolean"==typeof e&&e}function d(){l(!1),$("#play-button").removeClass("active"),$("#play-button").prop("disabled",!0),$("#play-icons").hide(),$("#play-loading").show()}function c(){l(!0),$("#play-button").addClass("active"),$("#play-button").prop("disabled",!1),$("#play-loading").hide(),$("#play-icons").show()}function h(e){let t=[.05,.25,.5,.75,.95],n=[];if(0===e.length)return 0;e.sort((function(e,t){return e-t}));for(let r=0;r<t.length;r++){let a=(e.length-1)*t[r],i=Math.floor(a),o=i+1,s=a%1;o>=e.length?n.push(e[i]):n.push(e[i]*(1-s)+e[o]*s)}return n}function p(){$(".draw-details").click((function(){$(this).find("input:checkbox").prop("checked")?new w(this,te).disableLineChart():($(".trendChartData").hide(),$("#trendChartLegend").hide(),$("#lineChartLegend").show(),$(".lineChartButton").prop("checked",!0).prop("disabled",!1),$(".line-chart-check-box").attr("disabled",!1),$(".lineChartLine").attr("visibility","visible"))}))}String.prototype.hashCode=function(){var e,t=0;if(0===this.length)return t;for(e=0;e<this.length;e++)t=(t<<5)-t+this.charCodeAt(e),t|=0;return t},d3.selection.prototype.moveToBack=function(){return this.each((function(){var e=this.parentNode.firstChild;e&&this.parentNode.insertBefore(this,e)}))};let u,m,f,g={},v=1;class b{constructor(){this.indexTime=0,this.svgContainer=d3.select("#main-vis"),this.zoom=d3.zoom().scaleExtent([1,6]).on("zoom",()=>{d3.event.transform.x=Math.min(0,this.tankWidth*(d3.event.transform.k-1),Math.max(this.tankWidth*(1-d3.event.transform.k),d3.event.transform.x)),d3.event.transform.y=Math.min(0,this.tankHeight*(d3.event.transform.k-1),Math.max(this.tankHeight*(1-d3.event.transform.k),d3.event.transform.y)),this.zoomGroup.attr("transform",d3.event.transform),gXaxis.call(xAxis.scale(d3.event.transform.rescaleX(u))),gYaxis.call(yAxis.scale(d3.event.transform.rescaleY(m)))}),this.zoomGroup=this.svgContainer.append("svg:g"),this.tank=this.zoomGroup.append("svg:g").attr("class","tank").attr("transform",()=>"scale("+(parameters.inverted_x?-1:1)+","+(parameters.inverted_y?-1:1)+")"),this.activeScale="black",this.colorScale={type:"Linear",color:colorbrewer.BuYlBu},this.legendWidth=550,this.legendHeight=60,this.svgLegend=d3.select("#main-vis-legend-div").append("svg").attr("id","main-vis-legend").attr("width",this.legendWidth).attr("height",this.legendHeight),this.medoidAnimal=-1,this.activeAnimals=[],this.arrayAnimals=Q.filter(e=>e.t===this.indexTime),this.id=$(".show-dendrogram.btn-primary").attr("data"),this.playBoolean=!0,this.brush=d3.brush().extent([[0,0],[this.tankWidth,this.tankHeight]]),this.spatialView=d3.select(".tank"),this.hierarchyLevels={}}setIndexTime(e){"number"==typeof e&&this.indexTime<=te.length?this.indexTime=e:this.indexTime=0}setActiveScale(e){this.activeScale=e}setActiveAnimals(e){this.activeAnimals=e}decIndexTime(){this.indexTime=this.indexTime-1}updateLineChart(){if(d3.select("#lineChartTimeLine")&&te[Math.ceil(this.indexTime/v)]){let e=Math.ceil(this.indexTime/v);this.indexTime%25==0&&(d3.select("#convex_hull_areaLineValue").text(te[e].convex_hull_area+"mm²"),d3.select("#speedLineValue").text(te[e].speed+"mm/s"),d3.select("#accelerationLineValue").text(te[e].acceleration+"mm/s²"),d3.select("#distance_centroidLineValue").text(te[e].distance_centroid+"mm"),d3.select("#directionLineValue").text(te[e].direction+"°"),d3.select("#polarisationLineValue").text(te[e].polarisation)),d3.select("#lineChartTimeLine").attr("transform","translate("+f(e)+",0)")}}returnColorScale(){return"Linear"===this.colorScale.type?d3.scaleLinear().domain(ne[this.activeScale]).range(this.colorScale.color):"Threshold"===this.colorScale.type?d3.scaleThreshold().domain(ne[this.activeScale]).range(this.colorScale.color):void 0}initColorPicker(){d3.select(".colors-body").selectAll(".palette").data(d3.entries(colorbrewer)).enter().append("span").attr("class","palette").attr("title",e=>e.key).on("click",e=>{$(".palette").removeClass("selected"),$('.palette[title="'+e.key+'"]').addClass("selected"),this.colorScale.color=colorbrewer[e.key],this.changelegend(),$("#play-button").hasClass("active")||(this.decIndexTime(),this.draw())}).selectAll(".swatch").data(e=>e.value).enter().append("span").attr("class","swatch").style("background-color",e=>e),$('.palette[title="BuYlBu"]').addClass("selected")}changelegend(){let e,t;if($("#main-vis-legend-div").show(),"black"!==this.activeScale){var n=this.returnColorScale();e=this.svgLegend.selectAll("rect.legend").data(n.range()),t=this.svgLegend.selectAll("text.legend-text").data(n.domain())}else e=this.svgLegend.selectAll("rect.legend").data([]),t=this.svgLegend.selectAll("text.legend-text").data([]),$("#main-vis-legend-div").hide();e.style("fill",(function(e){return e})),e.enter().append("rect").attr("class","legend").attr("width",50).attr("height",20).attr("y",0).attr("x",(function(e,t){return 50+50*t+"px"})).style("fill",(function(e){return e})),e.exit().remove(),t.text((function(e){return Math.ceil(2*e)/2})),t.enter().append("text").attr("class","legend-text").attr("y",40).attr("x",(function(e,t){return 50+50*t+5+"px"})).text((function(e){return Math.ceil(2*e)/2})),t.exit().remove()}click(e){setActiveAnimals(e.data.name),$("#play-button").hasClass("active")}getHierarchyLevel(e,t){let n=[],r=this.hierarchyLevels["h"+t],a=e.children;for(let t=1;t<e.height;t++){if(a[0]&&a[0].depth===r){a.forEach((function(e){void 0!==e.data.name&&n.push(e.data.name)}));break}let e=[];a.forEach((function(t){void 0!==t.children&&(e=e.concat(t.children))})),a=e}return n}setHierarchyLevel(e,t){this.hierarchyLevels["h"+e]=t}removeHierarchyLevel(e){delete this.hierarchyLevels["h"+e]}updateDendrogram(){let e=$(".show-dendrogram.btn-primary").attr("data"),t=$(".show-dendrogram.btn-primary").attr("name");$("#dendrogram-panel-name").text(t),$("#dendrogram-panel-level-slider").val(this.hierarchyLevels["h"+e]),$("#dendrogram-panel-level-text").text(this.hierarchyLevels["h"+e])}getHierarchyVertices(e){let t=[];return e.forEach(e=>{let n=[];for(let t=0;t<e.length;t++){let r=this.arrayAnimals.find(n=>n.a===e[t]);r&&n.push([r.p[0],-r.p[1]])}n.length>=3&&t.push(d3.polygonHull(n))}),t}drawHierarchy(){let e=d3.tree().size([4800,4800]),t=Object.keys(ae).map((function(e){return e.replace("h","")})),n=[];for(let r=0;r<t.length;r++){let a=ae["h"+t[r]][this.indexTime],i=d3.hierarchy(a,(function(e){return e.children}));i=e(i);let o=i.children[0];I===t[r]&&(networkHierarchyIds=z(o,t[r]));let s=z(o,t[r]),l=this.getHierarchyVertices(s);n.push(l)}let r={},a=this.spatialView.selectAll("g.hierarchy-group").data(n);a.enter().append("g").attr("class",(function(e,n){return"hierarchy-group h"+t[n]})).style("fill",(function(e,n){return r["h"+t[n]]})).attr("stroke",(function(e,n){return r["h"+t[n]]})).moveToBack(),a.attr("class",(function(e,n){return"hierarchy-group h"+t[n]})),a.exit().remove();let i=a.selectAll("path.hierarchy-hull-path").data((function(e){return e}));i.enter().append("path").attr("class","hierarchy-hull-path").attr("d",(function(e){return"M"+e.join("L")+"Z"})),i.attr("d",(function(e){return"M"+e.join("L")+"Z"})),i.exit().remove()}drawDendrogram(){this.id=$(".show-dendrogram.btn-primary").attr("data");let e=this.hierarchyLevels,t=this.id;if(!$.isEmptyObject(ae)&&this.id){let r=ae["h"+this.id][this.indexTime];console.log(r);let a=d3.hierarchy(r,(function(e){return e.children}));a=a.children[0],a.children.forEach((function n(r){r.children&&r.depth<=e["h"+t]?(r._children=r.children,r._children.forEach(n)):r.children=null}));let i=20,o=5e3,s=5e3;if(a=d3.tree().size([s-10*i,o-10*i])(a),$(".show-dendrogram.btn-primary").length){$("#dendrogram-panel-level-slider").slider("option","max",a.height-1).slider("value",this.hierarchyLevels["h"+this.id]);let e=this.zoomGroup.selectAll("path.link").data(a.descendants().slice(1));e.enter().append("path").attr("class","link").attr("d",T),e.attr("d",T),e.exit().remove();let t=this.zoomGroup.selectAll(".node").data(a.descendants());var n=t.enter().append("g").attr("class",(function(e){return"node"+(e.children?" node--internal":" node--leaf")})).attr("transform",(function(e){return"translate("+e.x+","+e.y+")"}));n.append("circle").attr("r",e=>e.depth===this.hierarchyLevels["h"+this.id]?40+e.data.name.length:20+e.data.name.length).attr("class",e=>{if(e.depth===this.hierarchyLevels["h"+this.id])return"active-level"}).attr("id",e=>"h"+e.data.name.toString().hashCode()).on("click",this.click).on("mouseover",(function(e){tooltipDiv.style("left",d3.event.pageX+5+"px").style("top",d3.event.pageY+5+"px").style("opacity",1),tooltipDiv.select(".tooltip-span").html(e.data.name.toString()),addHighlightSpatialView(e.data.name)})).on("mouseout",(function(){tooltipDiv.transition().duration(500).style("opacity",0),removeHighlightSpatialView()})),n.append("text").attr("class","dendrogram-text").attr("x",150).attr("y",-150).text(e=>e.data.name.length),n.attr("transform",e=>"translate("+e.x+","+e.y+")"),t.attr("transform",e=>"translate("+e.x+","+e.y+")").select("circle").attr("r",e=>e.depth===this.hierarchyLevels["h"+this.id]?40+e.data.name.length:20+e.data.name.length).attr("class",e=>e.depth===this.hierarchyLevels["h"+this.id]?"active-level":"").attr("id",e=>"h"+e.data.name.toString().hashCode()),t.select("text").text(e=>e.data.name.length),t.exit().remove(),Object.keys(j).length?("none"==$("#dendrogram-legend").css("display")&&$("#dendrogram-legend").show(),setTimeout(()=>{t.select("circle").style("fill",(function(e){return"h"+e.data.name.toString().hashCode()in j?standardDeviationColorScale(standardDeviation(j["h"+e.data.name.toString().hashCode()])):e.depth!==this.hierarchyLevels["h"+this.id]?"":"#000"}))},250)):"none"!==$("#dendrogram-legend").css("display")&&$("#dendrogram-legend").hide()}}$.isEmptyObject(ae)||this.drawHierarchy()}draw(){let e=$('input[type="radio"].group-playback-rate:checked').val(),t=$('input[type="radio"].group-size:checked').val();this.arrayAnimals=Q.filter(e=>e.t===this.indexTime),setTimeout(()=>{var e;this.drawDendrogram(),this.svgContainer.select(".frame-text").text(Math.floor(this.indexTime/1500)%60+":"+Math.floor(this.indexTime/parameters.fps)%60+"::"+this.indexTime%parameters.fps),this.indexTime%parameters.fps==0&&(e=this.indexTime,r.slider("value",e));let n,s=this.tank.selectAll("g.animal").data(this.arrayAnimals);if(this.indexTime in re){let e=re[this.indexTime];if(j={},e=e.map(e=>{let t=this.arrayAnimals.filter((function(t){return t.a===e.s}))[0],n=this.arrayAnimals.filter((function(t){return t.a===e.e}))[0];return{node1:t.a,node2:n.a,start:t.p,end:n.p,val:e.v}}),e.forEach((function(e){$("#mc-"+e.node1+"-"+e.node2).css("fill",U(e.val)),$("#mc-"+e.node2+"-"+e.node1).css("fill",U(e.val))})),G){let t=[];for(let n=0;n<e.length;n++)t.push(e[n].val);R(function(e){if(0===e.length)return 0;e.sort((function(e,t){return e-t}));let t=.05*(e.length-1),n=Math.floor(t),r=n+1,a=t%1;return r>=e.length?1-e[n]:1-(e[n]*(1-a)+e[r]*a)}(t))}e=e.filter((function(e){return e.val<=1-W})),n=this.tank.select("#network-group").selectAll("line.network-edges").data(e),n.attr("x1",(function(e){return e.start[0]})).attr("y1",(function(e){return-e.start[1]})).attr("x2",(function(e){return e.end[0]})).attr("y2",(function(e){return-e.end[1]})).attr("stroke",(function(e){return U(1-e.val)})).attr("stroke-opacity",(function(e){return 1-e.val})),n.enter().append("line").attr("class","network-edges").attr("x1",(function(e){return e.start[0]})).attr("y1",(function(e){return-e.start[1]})).attr("x2",(function(e){return e.end[0]})).attr("y2",(function(e){return-e.end[1]})).attr("stroke",(function(e){return U(e.val)})).attr("stroke-opacity",(function(e){return e.val}))}else n=this.tank.selectAll("line.network-edges").data([]);var l,d;n.exit().remove(),$("#draw-triangulation").is(":checked")?((l=this.tank.select("#delaunay-triangulation-group").selectAll("path.delaunay-triangulation").data([te[this.indexTime].triangulation])).attr("d",e=>e),l.enter().append("path").attr("class","delaunay-triangulation").attr("d",e=>e)):l=this.tank.selectAll("path.delaunay-triangulation").data([]),l.exit().remove(),$("#draw-voronoi").is(":checked")?((d="voronoi"in te[0]?this.tank.select("#vornoi-group").selectAll("path.voronoi").data(te[this.indexTime].voronoi.split(";")):this.tank.select("#vornoi-group").selectAll("path.voronoi").data([te[this.indexTime].voronoi])).attr("d",e=>e),d.enter().append("path").attr("class","voronoi").attr("d",e=>e)):d=this.tank.select("#vornoi-group").selectAll("path.voronoi").data([]),d.exit().remove();let c=s.enter().append("g").attr("class","animal").attr("id",e=>"animal-"+e.a);if(c.append("circle").attr("r",1.5*t).attr("cx",e=>e.p[0]).attr("cy",e=>-e.p[1]).on("mouseover",e=>{!function(e){for(let t=0;t<ee.length;t++)e.a===ee[t].animal_id&&(a.style("left",d3.event.pageX+5+"px").style("top",d3.event.pageY-100+"px").style("opacity",1),a.select("#tooltip-animal-id").html(ee[t].animal_id),a.select("#tooltip-species").html(ee[t].species),a.select("#tooltip-sex").html(ee[t].sex),a.select("#tooltip-size").html(ee[t].size),a.select("#tooltip-weight").html(ee[t].weight))}(e)}).on("mouseout",()=>{a.transition().duration(500).style("opacity",0)}).on("click",e=>{this.activeAnimals.includes(e.a)?this.activeAnimals=this.activeAnimals.filter(t=>t!==e.a):this.activeAnimals.push(e.a),$("#play-button").hasClass("active")||(this.indexTime--,this.draw())}),s.select("circle").attr("cx",e=>e.p[0]).attr("cy",e=>-e.p[1]).attr("r",t),c.append("svg:defs").append("svg:marker").attr("id",e=>"arrow-marker-"+e.a).attr("refX",2).attr("refY",6).attr("markerWidth",13).attr("markerHeight",13).attr("orient","auto").append("svg:path").attr("d","M2,2 L2,11 L10,6 L2,2"),c.append("line").attr("class","arrow").attr("marker-end",e=>"url(#arrow-marker-"+e.a+")"),$("#draw-direction").is(":checked")?s.select("line").attr("x1",e=>e.p[0]).attr("y1",e=>-e.p[1]).attr("x2",e=>e.p[0]+2*t).attr("y2",e=>-e.p[1]).attr("transform",e=>"rotate("+-e.direction+" "+e.p[0]+" "+-e.p[1]+")"):$(".arrow").hide(),s.exit().remove(),$("#draw-convex-hull").is(":checked")){var h=this.tank.selectAll("path.hull-path").data([te[this.indexTime].convex_hull]);h.attr("d",e=>e),h.enter().append("path").attr("class","hull-path").attr("d",e=>e)}else h=this.tank.select("path.hull-path").data([]);if(h.exit().remove(),"black"!==this.activeScale){var p=this.returnColorScale();s.transition().duration(10).style("fill",e=>p(e[this.activeScale])).attr("stroke",e=>p(e[this.activeScale]))}else s.style("fill","#000").attr("stroke","#000"),$.isEmptyObject(i)||Object.keys(i).forEach((function(e){d3.select("#animal-"+e).style("fill",i[e]).attr("stroke",i[e])}));this.activeAnimals.length?(s.style("opacity",e=>this.activeAnimals.includes(e.a)?1:.25),$("#remove-active-selected-button").is(":disabled")&&($("#remove-active-selected-button").prop("disabled",!1),$("#visual-parameter-button").prop("disabled",!1)),o.trackingBoolean&&Object(o.addTrackedData)(this.arrayAnimals[0].t,this.activeAnimals)):($("#remove-active-selected-button").is(":disabled")||($("#remove-active-selected-button").prop("disabled",!0),$("#visual-parameter-button").prop("disabled",!0)),s.style("opacity",1)),d3.select(".centroid").attr("cx",()=>"centroid"in te[0]?te[this.indexTime].centroid[0]:0).attr("cy",()=>"centroid"in te[0]?-te[this.indexTime].centroid[1]:0),$("#draw-direction").is(":checked")&&te[this.indexTime].centroid&&$("#draw-centroid").is(":checked")?(d3.select("#centroid-line").classed("hidden",!1),d3.select("#centroid-line").attr("x1",()=>te[this.indexTime].centroid[0]).attr("y1",()=>-te[this.indexTime].centroid[1]).attr("x2",()=>te[this.indexTime].centroid[0]+2*t).attr("y2",()=>-te[this.indexTime].centroid[1]).attr("transform",()=>"rotate("+-te[this.indexTime].direction+" "+te[this.indexTime].centroid[0]+" "+-te[this.indexTime].centroid[1]+")")):d3.select("#centroid-line").attr("class","hidden"),-1!==this.medoidAnimal&&(d3.selectAll("#animal-"+this.medoidAnimal).classed("medoid",!1),this.medoidAnimal=te[this.indexTime].medoid,d3.selectAll("#animal-"+this.medoidAnimal).classed("medoid",!0)),this.indexTime++,this.updateLineChart(),this.indexTime>=te.length?(this.indexTime=0,this.draw()):this.playBoolean&&this.draw()},e)}cp_listener(){$("#play-button").click(()=>{!0===$("#play-button").hasClass("active")?(this.playBoolean=!1,$(".mdi-pause").hide(),$(".mdi-play").show()):(this.playBoolean=!0,$(".mdi-play").hide(),$(".mdi-pause").show(),this.setIndexTime(r.slider("value")),$(".brush").remove())}),$("#next-frame-button").click(()=>{!0===$("#play-button").hasClass("active")&&(this.playBoolean=!1),$("#play-button").removeClass("active"),this.draw()}),$("#brushing-button").click(()=>{this.playBoolean=!1,$("#play-button").removeClass("active"),$("#brushing-button").hasClass("active")?$(".brush").remove():(this.brush=d3.brush().extent([[0,0],[this.tankWidth,this.tankHeight]]).on("end",()=>{var e=d3.event.selection;this.activeAnimals=[],this.arrayAnimals.map(t=>{var n=[t.p[0],t.p[1]];e[0][0]<=n[0]&&n[0]<=e[1][0]&&e[0][1]<=n[1]&&n[1]<=e[1][1]&&this.activeAnimals.push(t.a)}),$("#play-button").hasClass("active"),$("#brushing-button").removeClass("active"),$(".brush").remove()}),d3.select("#main-vis-svg").append("g").attr("class","brush").call(this.brush))}),$("#remove-active-selected-button").click(()=>{$("#remove-active-selected-button").is(":disabled")||($("#remove-active-selected-button").prop("disabled",!0),this.setActiveAnimals([]),resetTrackedData(),$("#visual-parameter-button").prop("disabled",!0).removeClass("active"),$("#play-button").hasClass("active")||(this.decIndexTime(),this.draw()))}),$("#visual-parameter-button").click(()=>{!0===$("#visual-parameter-button").hasClass("active")?setTrackingBoolean(!1):setTrackingBoolean(!0)}),$("#calculate-parameter-button").click(()=>{$("#calculate-parameter-button").hasClass("active")||(setTrackingBoolean(!1),sendTrackedData(),$("#calculate-parameter-button").prop("disabled",!0),$("#calculate-parameter-button").removeClass("active"),$("#visual-parameter-button").removeClass("active"))}),$("#background-color").change(()=>{let e=$('input[type="radio"].group-background:checked').val();$("#main-vis-svg").css("background-color",e)}),$("#draw-axis").on("change",()=>{this.checked?($("#main-vis g.x.axis").show(),$("#main-vis g.y.axis").show()):($("#main-vis g.x.axis").hide(),$("#main-vis g.y.axis").hide())}),$("#draw-time").on("change",()=>{this.checked?$("#main-vis .frame-text").show():$("#main-vis .frame-text").hide()}),$("#network-background").on("change",()=>{this.checked?setNetworkBackground(!0):setNetworkBackground(!1)}),$("#network-background-limit").val(1),$("#network-background-limit").on("change",()=>{let e=$(this).val();$.isNumeric(e)&&e>0?setNetworkBackgroundLimit(e):$(this).val(1)}),$("#color-scale-radio-form input").on("change",()=>{this.colorScale.type=$("input[name=color-scale-radio]:checked","#color-scale-radio-form").val(),$("#play-button").hasClass("active")||(this.decIndexTime(),this.draw())})}sf_listeners(){$("#draw-direction").click(()=>{$("#draw-direction").is(":checked")?("direction"in Q[0]||(d(),J("direction")),$(".arrow").show()):$(".arrow").hide(),$("#play-button").hasClass("active")||this.decIndexTime()}),$("#draw-medoid").click(()=>{$("#draw-medoid").is(":checked")?("medoid"in te[0]||Z("medoid"),this.setMedoidAnimal(te[this.indexTime].medoid),d3.selectAll("#animal-"+this.medoidAnimal).classed("medoid",!0)):(d3.selectAll("#animal-"+this.medoidAnimal).classed("medoid",!1),this.setMedoidAnimal(-1))}),$("#draw-centroid").click(()=>{$("#draw-centroid").is(":checked")?("centroid"in te[0]||Z("centroid"),$("#g-centroid").show()):$("#g-centroid").hide()}),$("#draw-convex-hull").click(()=>{$("#draw-convex-hull").is(":checked")&&("hull"in te[0]||Z("convex_hull"))}),$("#draw-triangulation").click(()=>{$("#draw-triangulation").is(":checked")&&("triangulation"in te[0]||Z("triangulation"),$("#play-button").hasClass("active")||this.decIndexTime())}),$("#draw-voronoi").click(()=>{$("#draw-voronoi").is(":checked")&&("voronoi"in te[0]||Z("voronoi"),$("#play-button").hasClass("active")||this.decIndexTime())})}af_listeners(){$("#draw-speed").click(()=>{$(".draw-details").hide().find("input:checkbox").prop("checked",!0).click(),$("#draw-speed").is(":checked")?("speed"in Q[0]||(d(),J("speed")),$("#draw-speed-details").show(),$("#draw-acceleration").prop("checked",!1),$("#draw-distance_centroid").prop("checked",!1),$("#draw-midline_offset").prop("checked",!1),this.setActiveScale("speed")):($("#draw-speed-details").hide(),this.setActiveScale("black")),d3.selectAll(".colorLegend *").remove(),this.changelegend(),$("#play-button").hasClass("active")||this.decIndexTime()}),$("#draw-acceleration").click(()=>{$(".draw-details").hide().find("input:checkbox").prop("checked",!0).click(),$("#draw-acceleration").is(":checked")?("acceleration"in Q[0]||(d(),J("acceleration")),$("#draw-acceleration-details").show(),$("#draw-speed").prop("checked",!1),$("#draw-distance_centroid").prop("checked",!1),$("#draw-midline_offset").prop("checked",!1),this.setActiveScale("acceleration")):($("#draw-acceleration-details").hide(),this.setActiveScale("black")),$(".draw-details.active").click(),d3.selectAll(".colorLegend *").remove(),this.changelegend(),$("#play-button").hasClass("active")||this.decIndexTime()}),$("#draw-distance_centroid").click(()=>{$(".draw-details").hide().find("input:checkbox").prop("checked",!0).click(),$("#draw-distance_centroid").is(":checked")?("distance_centroid"in Q[0]||(d(),J("distance_centroid")),$("#draw-distance_centroid-details").show(),$("#draw-speed").prop("checked",!1),$("#draw-acceleration").prop("checked",!1),$("#draw-midline_offset").prop("checked",!1),this.setActiveScale("distance_centroid")):($("#draw-distance_centroid-details").hide(),this.setActiveScale("black")),$(".draw-details.active").click(),d3.selectAll(".colorLegend *").remove(),this.changelegend(),$("#play-button").hasClass("active")||this.decIndexTime()}),$("#draw-midline_offset").click(()=>{$(".draw-details").hide().find("input:checkbox").prop("checked",!0).click(),$("#draw-midline_offset").is(":checked")?("draw-midline_offset"in Q[0]||(d(),J("midline_offset")),$("#draw-midline_offset-details").show(),$("#draw-speed").prop("checked",!1),$("#draw-acceleration").prop("checked",!1),$("#draw-distance_centroid").prop("checked",!1),C("midline_offset")):C("black"),$(".draw-details.active").click(),d3.selectAll(".colorLegend *").remove(),this.changelegend(),$("#play-button").hasClass("active")||(this.decIndexTime(),this.draw())})}md_listeners(){$(".metadata-swatch.metadata-swatch-clickable").click((function(){let e=$(this).attr("value"),t=$(this).css("background-color");$("#metadata-row-"+e+" #preview").css("background-color",t),"rgb(255, 255, 255)"===t?i[e]&&delete i[e]:i[e]=t})),$("#group-metadata :input").change((function(){resetIndividualMetadata();let e=$(this).attr("value"),t=[];if("sex"===e){$("#metadata-div").modal("toggle");for(let n=0;n<ee.length;n++)t.push(ee[n][e].toLowerCase());t=Array.from(new Set(t));let n=["#7fc97f","#386cb0"];for(let r=0;r<ee.length;r++)for(let a=0;a<t.length;a++)ee[r][e].toLowerCase()===t[a]&&(i[ee[r].animal_id]=n[a]);$("#metadata-input").hide()}else{$("#metadata-input").show();for(let n=0;n<ee.length;n++)t.push(ee[n][e]);let n=d3.quantile(t,.25),r=d3.quantile(t,.75);$("#bl-avg").val(n),$("#ab-avg").val(r),colorMetadata()}})),$(".number-spinner button").click((function(){let e=$(this),t=e.closest(".number-spinner").find("input").val().trim(),n=0;n="up"==e.attr("data-dir")?parseFloat(t)+.1:t>0?parseFloat(t)-.1:0,n=Math.round(100*n)/100,e.closest(".number-spinner").find("input").val(n),colorMetadata()})),$(".number-spinner input").on("input",(function(){colorMetadata()})),$("#metadata-reset").click((function(){$("#metadata-input").hide(),resetIndividualMetadata()}))}h_listeners(){$(".hiearchy-checkbox").on("change",()=>{console.log("check");let e=$(".hiearchy-checkbox");console.log(e);let t=e.attr("data"),n=e.attr("name"),r=e.prop("checked");if(console.log(r),r&&$(".show-dendrogram").length<_)d(),K(t),D(t,n),$("#show-dendrogram-"+t).click(()=>{console.log("dendro clicked");let e=$("#show-dendrogram-"+t).attr("id");$(".show-dendrogram").each((t,n)=>{$(n).attr("id")===e&&!1===$(n).hasClass("btn-primary")?($(n).addClass("btn-primary"),$(n).find("#btn-left").hide(),$(n).find("#btn-right").show()):($(n).removeClass("btn-primary"),$(n).find("#btn-left").show(),$(n).find("#btn-right").hide())}),$(".show-dendrogram.btn-primary").length?($("#dendrogram-panel").show(),console.log("shows"),this.drawDendrogram()):($("#dendrogram-panel").hide(),console.log("hides")),this.drawDendrogram(),$("#play-button").hasClass("active")||(console.log("plays"),this.decIndexTime(),this.draw(),this.drawDendrogram())}),$("#dendrogram-buttons-div").show();else{let e=$("#show-dendrogram-"+t).hasClass("btn-primary");pe({},t),O(t),d3.select("g.h"+t).remove(),!0===e&&$("#dendrogram-panel").hide(),0===$(".show-dendrogram").length&&$("#dendrogram-buttons-div").hide()}$(".show-dendrogram").length?($("#main-vis-div").removeClass("col-md-12"),$("#main-vis-div").addClass("col-md-8")):($("#main-vis-div").removeClass("col-md-8"),$("#main-vis-div").addClass("col-md-12"))}),$(".network-hierarchy-checkbox").on("change",(function(){let e=$(this);$(".network-hierarchy-checkbox").prop("checked",!1),e.prop("checked",!0),e.prop("checked")?setNetworkHierarchy(e.attr("data")):setNetworkHierarchy(void 0)}))}n_listeners(){$("#networks-modal-body button").click((function(){console.log("network clicked");let e=$(this).attr("data");$("#active-network-name").text($(this).attr("name")),d(),q(e),V(e),$("#network-div").modal("toggle")})),$("#network-remove").click((function(){he({}),setNetworkID(-1),V(-1),$("#active-network-name").text("")})),$("#network-auto-suggest").click((function(){if($("#network-auto-suggest").hasClass("active")){$("#network-limit-p").show(),$("#network-slider").show(),setNetworkAuto(!1);let e=$("#network-slider").slider("value");R(e),$("#network-limit").val(e)}else $("#network-limit-p").hide(),$("#network-slider").hide(),setNetworkAuto(!0)}))}}class x extends b{constructor(e){super(e),this.spatialViewInit()}spatialViewInit(){let e=parameters.min.geometry.coordinates,t=parameters.max.geometry.coordinates;this.tankWidth=1.02*(t[0]-e[0]),this.tankHeight=1.02*(t[1]-e[1]);let n=d3.scaleLinear().domain([e[0],t[0]]).range([e[0],t[0]]),i=d3.axisBottom(n).ticks(10).tickSize(10).tickPadding(5),o=d3.scaleLinear().domain([e[1],t[1]]).range([e[1],t[1]]),s=d3.axisRight(o).ticks(7).tickSize(10).tickPadding(5),l=d3.zoom().scaleExtent([1,6]).on("zoom",()=>{d3.event.transform.x=Math.min(0,this.tankWidth*(d3.event.transform.k-1),Math.max(this.tankWidth*(1-d3.event.transform.k),d3.event.transform.x)),d3.event.transform.y=Math.min(0,this.tankHeight*(d3.event.transform.k-1),Math.max(this.tankHeight*(1-d3.event.transform.k),d3.event.transform.y)),this.zoomGroup.attr("transform",d3.event.transform),c.call(i.scale(d3.event.transform.rescaleX(n))),h.call(s.scale(d3.event.transform.rescaleY(o)))});this.svgContainer=d3.select("#main-vis").classed("svg-container",!0).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 "+this.tankWidth+" "+this.tankHeight).classed("svg-content",!0).attr("id","main-vis-svg").call(l);let d=Math.ceil(this.tankHeight/this.tankWidth*100);$("#main-vis").append($("<style>#main-vis::after {padding-top: "+d+'%;display: block;content: "";}</style> ')),this.zoomGroup=this.svgContainer.append("svg:g"),parameters.background_image&&this.zoomGroup.append("image").attr("xlink:href","/"+parameters.background_image).attr("class","background-image").attr("height",this.tankHeight).attr("width",this.tankWidth).attr("x","0").attr("y","0"),this.tank=this.zoomGroup.append("svg:g").attr("class","tank").attr("transform",()=>"scale("+(parameters.inverted_x?-1:1)+","+(parameters.inverted_y?-1:1)+")"),this.tank.append("g").attr("id","g-centroid").append("circle").attr("class","centroid").attr("r",6).attr("cx",0).attr("cy",0),this.tank.select("#g-centroid").append("svg:defs").append("svg:marker").attr("id","centroid-arrow").attr("refX",2).attr("refY",6).attr("markerWidth",13).attr("markerHeight",13).attr("orient","auto").append("svg:path").attr("d","M2,2 L2,11 L10,6 L2,2"),this.tank.select("#g-centroid").append("line").attr("id","centroid-line").attr("marker-end","url(#centroid-arrow)"),this.tank.append("g").attr("id","network-group"),this.tank.append("g").attr("id","delaunay-triangulation-group"),this.tank.append("g").attr("id","vornoi-group"),this.svgContainer.append("text").attr("class","frame-text").attr("x",30).attr("y",30).text("-- : -- : -- ");let c=this.svgContainer.append("g").attr("class","x axis").call(i),h=this.svgContainer.append("g").attr("class","y axis").call(s);a=d3.select("div.tooltip").style("left","0px").style("top","0px").on("mouseover",(function(){a.style("opacity",1)})),function(){r=$("#slider").slider({min:0,max:te.length,step:25,slide:function(e,t){(void 0)(t.value),$("#play-button").hasClass("active")||(void 0)()}}),$("#network-slider").slider({range:"max",min:0,max:1,step:.01,value:.5,slide:function(e,t){R(t.value),$("#network-limit").val(t.value)}}),$("#network-limit").val(.5);let e=r.slider("option","max"),t=100/e;for(let n=0;n<e;n+=1500)$('<span class="ui-slider-tick"></span>').css("left",t*n+"%").appendTo(r)}(),this.initColorPicker();var p,u;new y(te);this.cp_listener(),this.sf_listeners(),this.af_listeners(),this.md_listeners(),this.n_listeners(),this.h_listeners(),this.initDendrogram(),p=this.tankHeight,u=this.tankWidth,$((function(){$("#main-vis").draggable({containment:"parent"}).resizable({aspectRatio:!0,maxWidth:$("#main-vis-div").width()}).height(.6*p).width(.6*u)})),$("input[type=checkbox]").prop("checked",!1),$("#color-scale-linear").prop("checked",!0),$("#group-size-m").prop("checked",!0),$("#background-white").prop("checked",!0),$("#settings-div input[type=checkbox]").prop("checked",!0),$("#loading").hide(),$("#play-loading").hide(),$(".mdi-play").hide(),$("#metadata-input").hide(),$("#dendrogram-buttons-div").hide(),$("#g-centroid").hide(),$("#line-chart-feature-checkboxes input[type=checkbox]").prop("checked",!0),this.draw()}setMedoidAnimal(e){this.medoidAnimal=e}initDendrogram(){console.log("INITED");let e=d3.zoom().scaleExtent([1,10]).on("zoom",(function(){d3.event.transform.x=Math.min(0,5e3*(d3.event.transform.k-1),Math.max(5e3*(1-d3.event.transform.k),d3.event.transform.x)),d3.event.transform.y=Math.min(0,5e3*(d3.event.transform.k-1),Math.max(5e3*(1-d3.event.transform.k),d3.event.transform.y)),this.zoomGroup.attr("transform",d3.event.transform)})),t=d3.select("#dendrogram-panel").classed("svg-dendrogram-container",!0).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 5000 5000").classed("svg-content-dendrogram",!0).call(e);B(),this.zoomGroup=t.append("g").attr("transform","translate(20,20)").append("svg:g");let n;d3.tree().size([4800,4800]);this.spatialView=d3.select(".tank"),$("#dendrogram-panel-level-slider").slider({range:"max",min:2,max:2,step:1,value:this.hierarchyLevels.h0,slide:function(e,t){E($(".show-dendrogram.btn-primary").attr("data"),t.value),updateDendrogram(),$("#play-button").hasClass("active")||(this.decIndexTime(),this.draw())}}),n=d3.select("#dendrogram-tooltip").style("left","0px").style("top","0px").on("mouseover",(function(){n.style("opacity",1)}));let r=100*_;this.svgLegend=d3.select("#hierarchy-legend-div").append("svg").attr("id","hierarchy-legend").attr("width",r).attr("height",60),this.spatialView.append("defs").append("svg:pattern").attr("id","striped").attr("patternUnits","userSpaceOnUse").attr("width","20").attr("height","5").attr("patternTransform","rotate(60)").append("rect").attr("width",5).attr("height",10).attr("transform","translate(0,0)").style("fill","#67000d")}}class k extends b{constructor(e){super(),this.swarmData=e,this.swarm_features=Object.keys(this.swarmData[0]),this.lineChartWidth=5e3,this.trendChartsElem=["lower-outer-area","lower-inner-area","median-line","upper-inner-area","upper-outer-area"]}}class y extends k{constructor(e){super(e),this.lineChart()}lineChart(){v=Math.ceil(this.swarmData.length/this.lineChartWidth);let e=100,t=10,n=this.swarm_features,r=n.indexOf("time");n.splice(r,1);let a=[];if(this.swarmData.length>this.lineChartWidth){let e=new Array(n.length).fill(0);for(let t=0;t<this.swarmData.length;t++){for(let r=0;r<n.length;r++)e[r]+=this.swarmData[t][n[r]];if(t%v==0){let r={time:t/v};for(let t=0;t<n.length;t++)e[t]=e[t]/v,r[n[t]]=e[t];a.push(r),e=new Array(n.length).fill(0)}}}else a=this.swarmData;f=d3.scaleLinear().domain([0,a.length]).range([0,this.lineChartWidth]),u=d3.scaleLinear().domain([0,a.length]).range([0,this.lineChartWidth]);let i=d3.scaleLinear().domain([0,a.length]).range([0,this.lineChartWidth]),o=d3.axisBottom(u).ticks(10).tickSize(10).tickPadding(5).tickFormat((function(e){return Math.floor(e*v/1500)%60+":"+Math.floor(e*v/parameters.fps)%60+"::"+e*v%parameters.fps}));m=d3.scaleLinear().domain([0,100]).range([500,0]);let s=d3.axisLeft(m).ticks(0).tickSize(10).tickPadding(5),l=()=>{let e=d3.mouse(this);if(e[0]<t||e[0]>this.lineChartWidth||e[1]<0||e[1]>500)return;let n=d3.scaleLinear().domain(f.range()).range(f.domain());this.setIndexTime(Math.floor(n(e[0]-t)*v))},d=d3.zoom().scaleExtent([1,20]).translateExtent([[0,0],[this.lineChartWidth,500]]).extent([[0,0],[this.lineChartWidth,500]]).on("zoom",()=>{let e=d3.event.transform;f=u.domain(e.rescaleX(i).domain());for(let e in b)b.hasOwnProperty(e)&&this.zoomGroup.select("#"+e+"Line").attr("d",b[e]);for(let e in g)if(g.hasOwnProperty(e))for(let t=0;t<this.trendChartsElem.length;t++)this.zoomGroup.select("#"+e+"TrendChart ."+this.trendChartsElem[t]).attr("d",g[e][this.trendChartsElem[t]]);h.call(o)}),c=d3.select("#swarm-vis").classed("svg-line-chart-container",!0).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 "+this.lineChartWidth+" "+(500+e)).classed("svg-content",!0);this.zoomGroup=c.append("svg:g").attr("id","lineChartZoom").attr("transform","translate("+t+",0)");let h=this.zoomGroup.append("g").attr("class","x axis-line-chart").attr("transform","translate(0,500)").call(o);this.zoomGroup.append("g").attr("class","y axis-line-chart").call(s),this.zoomGroup.append("line").attr("class","time-line").attr("id","lineChartTimeLine").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",500);let p=d3.scaleOrdinal(d3.schemeCategory10),b={};for(let e=0;e<n.length;e++){let t=d3.min(a,(function(t){return t[n[e]]})),r=d3.max(a,(function(t){return t[n[e]]})),i=d3.scaleLinear().domain([t,r]).range([0,100]),o=d3.line().x((function(e){return u(e.time)})).y((function(t){return m(i(t[n[e]]))}));b[n[e]]=o,this.zoomGroup.append("path").data([a]).attr("id",n[e]+"Line").attr("class","line lineChartLine").style("stroke",p(e)).attr("d",o).attr("name",n[e])}$("#lineChartTimeLine").appendTo("#lineChartZoom"),this.zoomGroup.append("rect").attr("class","zoom").attr("width",this.lineChartWidth).attr("height",500).call(d).on("click",l).call(d3.drag().on("drag",l));let x=d3.selectAll(".line");c.append("g").attr("id","lineChartLegend").attr("transform","translate("+e+",550)").selectAll("rect.legend").data(x._groups[0]).enter().each((function(e,t){d3.select(this).append("rect").attr("class","legend").attr("width",100).attr("height",50).attr("x",600*t+"px").style("fill",e.style.stroke),d3.select(this).append("text").attr("id",e.attributes.id.value+"LegendTitle").attr("class","line-chart-legend-text").attr("y",40).attr("x",600*t+100+10+"px").text(e.attributes.name.value+": "),d3.select(this).append("text").attr("id",e.attributes.id.value+"Value").attr("class","line-chart-legend-text").attr("y",40).attr("x",600*t+100+d3.select("#"+e.attributes.id.value+"LegendTitle").node().getComputedTextLength()+10+"px").text("0.0")})),c.append("g").attr("id","trendChartLegend").attr("transform","translate("+e+",550)").selectAll("rect.legend").data(["5% - 95%","25% - 75%","Median"]).enter().each((function(e,t){d3.select(this).append("rect").attr("class","legend").attr("width",100).attr("height",50).attr("x",800*t+"px").style("fill",(function(){return 0===t?"#74a9cf":1===t?"#045a8d":"#525252"})),d3.select(this).append("text").attr("class","line-chart-legend-text").attr("y",40).attr("x",800*t+100+10+"px").text(e)})),$("#trendChartLegend").hide(),this.initLineChartButtons()}initLineChartButtons(){for(let e=0;e<this.swarm_features.length;e++){let t=this.swarm_features[e].split("_").join(" ");t=t.charAt(0).toUpperCase()+t.slice(1),$("#line-chart-feature-checkboxes").append('<tr><th> <div class="pretty p-switch p-fill p-bigger"><input type="checkbox" class="line-chart-check-box" id="draw-'+this.swarm_features[e]+'" data="#'+this.swarm_features[e]+'Line" /><div class="state"><label>'+t+"</label></div></div></th></tr>")}$(".line-chart-check-box").change((function(){let e=$(this);e.prop("checked")?$(e.attr("data")).show():$(e.attr("data")).hide()}))}}class w extends k{constructor(e,t){super(t),this.elem=e,this.trendchart()}disableLineChart(){$(".lineChartButton").prop("checked",!1).prop("disabled",!0),$(".line-chart-check-box").attr("disabled",!0),$(".lineChartLine").attr("visibility","hidden")}trendchart(){let e="";if(this.elem.id.toLowerCase().includes("speed"))e="speed";else if(this.elem.id.toLowerCase().includes("acceleration"))e="acceleration";else if(this.elem.id.toLowerCase().includes("distance_centroid"))e="distance_centroid";else{if(!this.elem.id.toLowerCase().includes("midline_offset"))return;e="midline_offset"}if($("#lineChartLegend").hide(),$("#trendChartLegend").show(),$("#"+e+"TrendChart").length)$("#"+e+"TrendChart").show();else{let t=[],n=ie.length;for(let r=0;r<te.length;r++){let a=[];for(let t=0;t<n;t++)Q[r*n+t]&&a.push(Q[r*n+t][e]);t.push(h(a))}if(t.length>this.lineChartWidth){let e=[],n=[0,0,0,0,0];for(let r=0;r<t.length;r++){for(let e=0;e<n.length;e++)n[e]+=t[r][e];if(r%v==0){for(let e=0;e<n.length;e++)n[e]+=n[e]/v;e.push(n),n=[0,0,0,0,0]}}t=e}let r=d3.min(t,(function(e){return e[0]})),a=d3.max(t,(function(e){return e[4]})),i=d3.scaleLinear().domain([r,a]).range([0,100]),o=this.zoomGroup.append("g").attr("id",e+"TrendChart").attr("class","trendChartData");$(".zoom").appendTo("#lineChartZoom"),$("#lineChartTimeLine").appendTo("#lineChartZoom"),g[e]={};for(let n=0;n<this.trendChartsElem.length;n++){let r;n<2?r=d3.area().x((function(e,t){return u(t)})).y0((function(e){return m(i(e[n+1]))})).y1((function(e){return m(i(e[n]))})):2===n?r=d3.line().x((function(e,t){return u(t)})).y((function(e){return m(i(e[n]))})):n>2&&(r=d3.area().x((function(e,t){return u(t)})).y0((function(e){return m(i(e[n]))})).y1((function(e){return m(i(e[n-1]))}))),g[e][this.trendChartsElem[n]]=r,o.append("path").data([t]).attr("class",this.trendChartsElem[n]).attr("d",r)}}}}function C(e){activeScale=e}function T(e){return"M"+e.x+","+e.y+"V"+e.parent.y+"H"+e.parent.x}let A={},L=d3.scaleThreshold().domain([0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]).range(["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"]);const _=4;let S={},j={},M=["#7fc97f","#386cb0","#e7298a","#ff9900"];function z(e,t){let n=[],r=A["h"+t],a=e.children;for(let t=1;t<e.height;t++){if(a[0]&&a[0].depth===r){a.forEach((function(e){void 0!==e.data.name&&n.push(e.data.name)}));break}let e=[];a.forEach((function(t){void 0!==t.children&&(e=e.concat(t.children))})),a=e}return n}function E(e,t){A["h"+e]=t}function D(e,t){$(".show-dendrogram").length<_&&($("#dendrogram-buttons-div").append('<button type="button" id="show-dendrogram-'+e+'" data='+e+" name="+t+' class="show-dendrogram btn btn-block" data-toggle="button" aria-pressed="false" autocomplete="off"> <span class="btn-label" id="btn-left"> <i class="mdi mdi-arrow-collapse-left"></i>&nbsp&nbsp Show '+t+'</span><span class="btn-label" id="btn-right"> <i class="mdi mdi-arrow-collapse-right"></i>&nbsp&nbsp Hide '+t+" </span></button> <br>"),$("#show-dendrogram-"+e).find("#btn-right").hide())}function O(e){$("#show-dendrogram-"+e).next().remove(),$("#show-dendrogram-"+e).remove()}function B(){let e,t,n=d3.select("#dendrogram-panel").append("svg").attr("id","dendrogram-legend").attr("width",550).attr("height",60);$("#dendrogram-legend").hide();let r=L.range();e=n.selectAll("rect.legend").data(r),t=n.selectAll("text.legend-text").data(["low","","","","","","","","high"]),e.enter().append("rect").attr("class","legend").attr("width",50).attr("height",20).attr("y",0).attr("x",(function(e,t){return 50*t+"px"})).style("fill",(function(e){return e})),t.enter().append("text").attr("class","legend-text").attr("y",40).attr("x",(function(e,t){return 50*t+"px"})).text((function(e){return e}))}let I,H,G=!1,W=.5,N={},U=d3.scaleThreshold().domain([0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]).range(["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"]);function R(e){W=e}function V(e){e>=0?N["h"+e]="#08306b":N={}}let P="application/vnd.api+json";var Y;function F(){let e=[];$.ajax({url:"/api/percentile/"+parameters.id,dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:P},success:function(t){for(let n=0;n<t.length;n++)e[t[n].feature]=[t[n].min,t[n].p1,t[n].p2,t[n].p3,t[n].p5,t[n].p7,t[n].p8,t[n].p9,t[n].max];se(e),function(e){for(var t in e)if(e.hasOwnProperty(t)){let e=t.split("_").join(" ");e=e.charAt(0).toUpperCase()+e.slice(1),$("#absolute-feature-checkboxes").append('<tr><th> <div class="pretty p-switch p-fill p-bigger"><input type="checkbox" id="draw-'+t+'"/><div class="state"><label>'+e+'</label></div></div><div class="float-right draw-details" id="draw-'+t+'-details"><div class="pretty p-icon p-toggle p-plain"><input type="checkbox" id="draw-'+t+'-input" /><div class="state p-success-o p-on"><i class="mdi mdi-image-area"></i><label></label></div><div class="state p-off"><i class="mdi mdi-image-off"></i><label></label></div></div></div></th></tr>')}$(".draw-details").hide(),p()}(e)}})}function X(){$.ajax({url:"/api/dataset/networks/"+parameters.id,dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:P},success:function(e){!function(e){if(e.length)for(let t=0;t<e.length;t++)e[t].finished&&$("#networks-hierarchies-table tbody").append("<tr><td>"+e[t].name+'</td> <td> <button type="button" class="btn btn-default" data='+e[t].network_id+" name="+e[t].name+'><span class="mdi mdi-graphql" aria-hidden="true"></span></button></td> <td><div class="pretty p-switch p-fill"><input type="checkbox" class="hiearchy-checkbox" data="'+e[t].network_id+'" name="'+e[t].name+'"><div class="state p-success"><label></label></div></div></td><td>---</td>');else $("#networks-hierarchies-table").append("There is no network data for this dataset")}(e)}})}function J(e){$.ajax({url:"/api/dataset/"+parameters.id+"/"+e,dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:P},success:function(t){ce(t,e),c()}})}function Z(e){d(),$.ajax({url:"/api/dataset/"+parameters.id+"/"+e,dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:P},success:function(t){de(t,e),c()}})}function q(e){$.ajax({url:"/api/dataset/network/"+parameters.id+"/"+e,dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:P},success:function(e){e.length&&he(JSON.parse(e[0].data)),c()}}),H=e}function K(e){$.ajax({url:"/api/dataset/network/hierarchy/"+parameters.id+"/"+e,dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:P},success:function(t){t.length&&pe(JSON.parse(t[0].hierarchy),e),c()}})}n(1);let Q=[],ee=[],te=[],ne={},re={},ae={},ie={};function oe(e){Q=Q.concat(e)}function se(e){ne=e}function le(e){ee=e,function(){let e=["#fff","#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628"];if(ee.length)for(let t=0;t<ee.length;t++)$("#metadata-table").find("tbody").append($('<tr id="metadata-row-'+ee[t].animal_id+'">').append($("<td>").append(ee[t].animal_id)).append($("<td>").append(ee[t].species)).append($("<td>").append(ee[t].sex)).append($("<td>").append(ee[t].size)).append($("<td>").append(ee[t].weight)).append($("<td>").append('<div class="dropdown">\n                                              <a class="dropdown-toggle btn btn-default btn-color" data-toggle="dropdown" href="#">\n                                              <div id="preview" class="metadata-swatch" style="background-color:#fff"></div>\n                                              <input class="color-field" value="White" style="display:none;">\n                                              </a>\n                                              <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel"> '+function(t){let n="";for(let r=0;r<e.length;r++)n+='<div class="metadata-swatch metadata-swatch-clickable" style="background-color:'+e[r]+'" value="'+t+'"></div>';return n}(ee[t].animal_id)+"</ul></div>")));else $("#metadata-table").find("tbody").append("There is no metadata for this dataset")}()}function de(e,t){for(let n=0;n<e.length;n++)void 0===te[n]&&te.push({}),e[n]&&!isNaN(e[n])?te[n][t]=+e[n]:te[n][t]=e[n]}function ce(e,t){for(let n=0;n<e.length;n++)void 0===Q[n]&&Q.push({}),Q[n][t]=+e[n]}function he(e){re=e}function pe(e,t){0===Object.keys(e).length&&e.constructor===Object?(delete ae["h"+t],delete A["h"+t],function(e){delete S["h"+e]}(t)):(ae["h"+t]=e,E(t,2),function(e){for(let t in N)if(t==="h"+e)return void(S["h"+e]=N[t]);for(let t=0;t<M.length;t++){let n=!0;for(let e in S)S.hasOwnProperty(e)&&S[e]===M[t]&&(n=!1);if(n){if(0===Object.keys(N).length)return void(S["h"+e]=M[t]);for(let n in N)if(N[n]!==M[t])return void(S["h"+e]=M[t])}}}(t))}function ue(e){ie=e}$(document).ready((function(){window.EventSource?((Y=new EventSource("/api/movement_only/"+parameters.id)).onmessage=function(e){"close"===e.data?(Y.close(),window.setTimeout((function e(){$.active>0?window.setTimeout(e,100):new x}),100)):oe(JSON.parse(e.data))},Y.addEventListener("error",(function(e){e.readyState==EventSource.CLOSED&&alert("Streaming error")}),!1)):alert("Webbrowser does not support streaming"),F(),$.ajax({url:"/api/dataset/"+parameters.id+"/animal_ids",dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:P},success:function(e){ue(e)}}),function(){const e=["swarm_time","swarm_speed","swarm_acceleration","swarm_convex_hull_area","swarm_distance_centroid","swarm_direction","swarm_polarisation"];for(let t=0;t<e.length;t++)$.ajax({url:"/api/dataset/"+parameters.id+"/"+e[t],dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:P},success:function(n){de(n,e[t].replace("swarm_",""))}})}(),$.ajax({url:"/api/metadata/"+parameters.id,dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:P},success:function(e){le(e)}}),X()}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vZXhwbG9yZS9leHBsb3JlLmNzcz9lNzJlIiwid2VicGFjazovLy8uL2V4cGxvcmUvZXhwbG9yZS5jc3MiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9saWIvdXJscy5qcyIsIndlYnBhY2s6Ly8vLi9leHBsb3JlL3NwYXRpYWxfdmlldy9pbnRlcmFjdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9leHBsb3JlL3NwYXRpYWxfdmlldy9jb2xvcl9waWNrZXIuanMiLCJ3ZWJwYWNrOi8vLy4vZXhwbG9yZS9tZXRhZGF0YS5qcyIsIndlYnBhY2s6Ly8vLi9leHBsb3JlL2xpc3RlbmVyLmpzIiwid2VicGFjazovLy8uL2V4cGxvcmUvaGVscGVycy5qcyIsIndlYnBhY2s6Ly8vLi9leHBsb3JlL3NwYXRpYWxfdmlldy9zcGF0aWFsX3ZpZXcuanMiLCJ3ZWJwYWNrOi8vLy4vZXhwbG9yZS9oaWVyYXJjaHkuanMiLCJ3ZWJwYWNrOi8vLy4vZXhwbG9yZS9saW5lX2NoYXJ0LmpzIiwid2VicGFjazovLy8uL2V4cGxvcmUvbmV0d29yay5qcyIsIndlYnBhY2s6Ly8vLi9leHBsb3JlL2FqYXhfcXVlcmllcy5qcyIsIndlYnBhY2s6Ly8vLi9leHBsb3JlL2V4cGxvcmUuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJjb250ZW50Iiwib3B0aW9ucyIsInRyYW5zZm9ybSIsInVuZGVmaW5lZCIsImxvY2FscyIsIl9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyIsInB1c2giLCJ1c2VTb3VyY2VNYXAiLCJsaXN0IiwidG9TdHJpbmciLCJ0aGlzIiwibWFwIiwiaXRlbSIsImNzc01hcHBpbmciLCJidG9hIiwic291cmNlTWFwcGluZyIsInNvdXJjZU1hcCIsImJhc2U2NCIsInVuZXNjYXBlIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiSlNPTiIsInN0cmluZ2lmeSIsImRhdGEiLCJjb25jYXQiLCJzb3VyY2VVUkxzIiwic291cmNlcyIsInNvdXJjZSIsInNvdXJjZVJvb3QiLCJqb2luIiwiY3NzV2l0aE1hcHBpbmdUb1N0cmluZyIsIm1lZGlhUXVlcnkiLCJkZWR1cGUiLCJhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzIiwibGVuZ3RoIiwiaWQiLCJfaSIsImZuIiwibWVtbyIsInN0eWxlc0luRG9tIiwiaXNPbGRJRSIsIndpbmRvdyIsImRvY3VtZW50IiwiYWxsIiwiYXRvYiIsImFwcGx5IiwiYXJndW1lbnRzIiwiZ2V0VGFyZ2V0IiwidGFyZ2V0IiwicXVlcnlTZWxlY3RvciIsImdldEVsZW1lbnQiLCJzdHlsZVRhcmdldCIsIkhUTUxJRnJhbWVFbGVtZW50IiwiY29udGVudERvY3VtZW50IiwiaGVhZCIsImUiLCJzaW5nbGV0b24iLCJzaW5nbGV0b25Db3VudGVyIiwic3R5bGVzSW5zZXJ0ZWRBdFRvcCIsImZpeFVybHMiLCJhZGRTdHlsZXNUb0RvbSIsInN0eWxlcyIsImRvbVN0eWxlIiwicmVmcyIsImoiLCJwYXJ0cyIsImFkZFN0eWxlIiwibGlzdFRvU3R5bGVzIiwibmV3U3R5bGVzIiwiYmFzZSIsInBhcnQiLCJjc3MiLCJtZWRpYSIsImluc2VydFN0eWxlRWxlbWVudCIsInN0eWxlIiwiaW5zZXJ0SW50byIsIkVycm9yIiwibGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AiLCJpbnNlcnRBdCIsIm5leHRTaWJsaW5nIiwiaW5zZXJ0QmVmb3JlIiwiYXBwZW5kQ2hpbGQiLCJmaXJzdENoaWxkIiwiYmVmb3JlIiwicmVtb3ZlU3R5bGVFbGVtZW50IiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwiaWR4IiwiaW5kZXhPZiIsInNwbGljZSIsImNyZWF0ZVN0eWxlRWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJhdHRycyIsInR5cGUiLCJhZGRBdHRycyIsImVsIiwia2V5cyIsImZvckVhY2giLCJzZXRBdHRyaWJ1dGUiLCJvYmoiLCJ1cGRhdGUiLCJyZW1vdmUiLCJyZXN1bHQiLCJzdHlsZUluZGV4IiwiYXBwbHlUb1NpbmdsZXRvblRhZyIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsInJldm9rZU9iamVjdFVSTCIsIkJsb2IiLCJsaW5rIiwicmVsIiwiY3JlYXRlTGlua0VsZW1lbnQiLCJ1cGRhdGVMaW5rIiwiaHJlZiIsImFwcGx5VG9UYWciLCJuZXdPYmoiLCJERUJVRyIsIm5ld0xpc3QiLCJtYXlSZW1vdmUiLCJ0ZXh0U3RvcmUiLCJyZXBsYWNlVGV4dCIsImluZGV4IiwicmVwbGFjZW1lbnQiLCJmaWx0ZXIiLCJCb29sZWFuIiwic3R5bGVTaGVldCIsImNzc1RleHQiLCJjc3NOb2RlIiwiY3JlYXRlVGV4dE5vZGUiLCJjaGlsZE5vZGVzIiwiYXV0b0ZpeFVybHMiLCJjb252ZXJ0VG9BYnNvbHV0ZVVybHMiLCJibG9iIiwib2xkU3JjIiwibG9jYXRpb24iLCJiYXNlVXJsIiwicHJvdG9jb2wiLCJob3N0IiwiY3VycmVudERpciIsInBhdGhuYW1lIiwicmVwbGFjZSIsImZ1bGxNYXRjaCIsIm9yaWdVcmwiLCJuZXdVcmwiLCJ1bnF1b3RlZE9yaWdVcmwiLCJ0cmltIiwiJDEiLCJ0ZXN0Iiwic2xpZGVyIiwidG9vbHRpcCIsImNvbG9yYnJld2VyIiwiQnVZbEJ1IiwibWV0YWRhdGFDb2xvciIsInBsYXlCb29sZWFuIiwic2V0UGxheUJvb2xlYW4iLCJkaXNhYmxlUGxheUJ1dHRvbiIsIiQiLCJyZW1vdmVDbGFzcyIsInByb3AiLCJoaWRlIiwic2hvdyIsImVuYWJsZVBsYXlCdXR0b24iLCJhZGRDbGFzcyIsInBlcmNlbnRpbGVzTGluZUNoYXJ0IiwiYXJyIiwic29ydCIsImEiLCJiIiwibG93ZXIiLCJNYXRoIiwiZmxvb3IiLCJ1cHBlciIsIndlaWdodCIsImluaXRUcmVuZENoYXJ0TGlzdGVuZXIiLCJjbGljayIsImZpbmQiLCJzd2FybURhdGEiLCJkaXNhYmxlTGluZUNoYXJ0IiwiYXR0ciIsIlN0cmluZyIsImhhc2hDb2RlIiwiaGFzaCIsImNoYXJDb2RlQXQiLCJkMyIsInNlbGVjdGlvbiIsIm1vdmVUb0JhY2siLCJlYWNoIiwiem9vbUZ1bmN0aW9uIiwidHJlbmRDaGFydHNab29tIiwicmF0aW8iLCJpbmRleFRpbWUiLCJzdmdDb250YWluZXIiLCJzZWxlY3QiLCJ6b29tIiwic2NhbGVFeHRlbnQiLCJvbiIsImV2ZW50IiwieCIsIm1pbiIsInRhbmtXaWR0aCIsImsiLCJtYXgiLCJ5IiwidGFua0hlaWdodCIsInpvb21Hcm91cCIsImdYYXhpcyIsInhBeGlzIiwic2NhbGUiLCJyZXNjYWxlWCIsImdZYXhpcyIsInlBeGlzIiwicmVzY2FsZVkiLCJhcHBlbmQiLCJ0YW5rIiwicGFyYW1ldGVycyIsImludmVydGVkX3giLCJpbnZlcnRlZF95IiwiYWN0aXZlU2NhbGUiLCJjb2xvclNjYWxlIiwiY29sb3IiLCJsZWdlbmRXaWR0aCIsImxlZ2VuZEhlaWdodCIsInN2Z0xlZ2VuZCIsIm1lZG9pZEFuaW1hbCIsImFjdGl2ZUFuaW1hbHMiLCJhcnJheUFuaW1hbHMiLCJkYXRhc2V0IiwiYnJ1c2giLCJleHRlbnQiLCJzcGF0aWFsVmlldyIsImhpZXJhcmNoeUxldmVscyIsImNlaWwiLCJ0bXAiLCJ0ZXh0Iiwic2NhbGVMaW5lYXIiLCJkb21haW4iLCJyYW5nZSIsInNjYWxlVGhyZXNob2xkIiwic2VsZWN0QWxsIiwiZW50cmllcyIsImVudGVyIiwiY2hhbmdlbGVnZW5kIiwiaGFzQ2xhc3MiLCJkZWNJbmRleFRpbWUiLCJkcmF3IiwibGVnZW5kIiwibGVnZW5kVGV4dCIsInRtcFNjYWxlIiwicmV0dXJuQ29sb3JTY2FsZSIsImV4aXQiLCJzZXRBY3RpdmVBbmltYWxzIiwicm9vdCIsImhpZXJhcmNoeSIsImxldmVsIiwidG1wX25vZGVzIiwibm9kZSIsInZhbCIsImhpZXJhcmNoaWVzIiwiY2x1c3RlciIsInZlcnRpY2VzIiwiZ3JvdXBNZW1iZXIiLCJwb2x5Z29uSHVsbCIsInRyZWVtYXAiLCJ0cmVlIiwic2l6ZSIsImhpZXJhcmNoeUlkcyIsIm5ldHdvcmtIaWVyYXJjaHkiLCJoaWVyYXJjaHlWZXJ0aWNlcyIsInRyZWVEYXRhIiwibm9kZXMiLCJjaGlsZHJlbiIsInNob3dOZXR3b3JrSGllcmFyY2h5IiwibmV0d29ya0hpZXJhcmNoeUlkcyIsImdldEhpZXJhcmNoeUxldmVsIiwiaGxldmVsIiwidmVydHMiLCJnZXRIaWVyYXJjaHlWZXJ0aWNlcyIsImhpZXJhcmNoeUNvbG9ycyIsImhpZXJhcnlIdWxscyIsImlzRW1wdHlPYmplY3QiLCJjb25zb2xlIiwibG9nIiwiY29sbGFwc2UiLCJkZXB0aCIsIl9jaGlsZHJlbiIsIm1hcmdpbiIsIndpZHRoIiwiaGVpZ2h0IiwiZGVzY2VuZGFudHMiLCJzbGljZSIsImRpYWdvbmFsTGluZXMiLCJub2RlRW50ZXIiLCJ0b29sdGlwRGl2IiwicGFnZVgiLCJwYWdlWSIsImh0bWwiLCJhZGRIaWdobGlnaHRTcGF0aWFsVmlldyIsInRyYW5zaXRpb24iLCJkdXJhdGlvbiIsInJlbW92ZUhpZ2hsaWdodFNwYXRpYWxWaWV3IiwiaGllcmFyY2h5R3JvdXBTdGRldiIsInNldFRpbWVvdXQiLCJzdGFuZGFyZERldmlhdGlvbkNvbG9yU2NhbGUiLCJzdGFuZGFyZERldmlhdGlvbiIsImRyYXdIaWVyYXJjaHkiLCJ0aW1lVG9XYWl0IiwiYW5pbWFsU2NhbGUiLCJkcmF3RGVuZHJvZ3JhbSIsIm5ldHdvcmtWaXMiLCJzdmdBbmltYWxzIiwibmV0d29ya0RhdGEiLCJuZXR3b3JrIiwiYW5pbWFsMSIsImFuaW1hbDIiLCJuZXR3b3JrQ29sb3JTY2FsZSIsIm5ldHdvcmtBdXRvIiwidG1wQXJyYXkiLCJzZXROZXR3b3JMaW1pdCIsInBlcmNlbnRpbGVzIiwibmV0d29ya0xpbWl0IiwidHJpYW5ndWxhdGlvbiIsInZvcm9ub2kiLCJpcyIsInNwbGl0IiwiYW5pbWFsR3JvdXBpbmdzIiwiZGF0YXNldE1ldGFkYXRhIiwidG9vbHRpcEZ1bmN0aW9uIiwiaW5jbHVkZXMiLCJodWxsUGF0aCIsImNlbnRyb2lkIiwiY2xhc3NlZCIsInVwZGF0ZUxpbmVDaGFydCIsInNldEluZGV4VGltZSIsInJlY3QiLCJhbmltYWwiLCJwb2ludCIsInJlc2V0VHJhY2tlZERhdGEiLCJzZXRUcmFja2luZ0Jvb2xlYW4iLCJzZW5kVHJhY2tlZERhdGEiLCJjaGFuZ2UiLCJjaGVja2VkIiwic2V0TmV0d29ya0JhY2tncm91bmQiLCJpc051bWVyaWMiLCJzZXROZXR3b3JrQmFja2dyb3VuZExpbWl0IiwiZ2V0RGF0YXNldEZlYXR1cmUiLCJnZXRTd2FybURhdGFzZXRGZWF0dXJlIiwic2V0TWVkb2lkQW5pbWFsIiwic2V0QWN0aXZlU2NhbGUiLCJjb2xvclJHQiIsInJlc2V0SW5kaXZpZHVhbE1ldGFkYXRhIiwibW9kYWwiLCJ0b0xvd2VyQ2FzZSIsIkFycmF5IiwiZnJvbSIsIlNldCIsImNvbG9ycyIsImJsQXZnIiwicXVhbnRpbGUiLCJhYkF2ZyIsImNvbG9yTWV0YWRhdGEiLCJidG4iLCJvbGRWYWx1ZSIsImNsb3Nlc3QiLCJuZXdWYWwiLCJwYXJzZUZsb2F0Iiwicm91bmQiLCJjaGVja2JveCIsIm1heE51bWJlckhpZXJhcmNoaWVzIiwiZ2V0TmV0d29ya0hpZXJhcmNoeURhdGEiLCJhZGRIaWVyYXJjaHlCdXR0b24iLCJjbGlja2VkQnV0dG9uSUQiLCJidXR0b24iLCJ0bXBBY3RpdmUiLCJzZXRIaWVyYXJjaHlEYXRhIiwicmVtb3ZlSGllcmFyY2h5QnV0dG9uIiwic2V0TmV0d29ya0hpZXJhcmNoeSIsIm5ldHdvcmtfaWQiLCJnZXROZXR3b3JrRGF0YSIsInNldG5ldHdvcmtDb2xvciIsInNldE5ldHdvcmtEYXRhIiwic2V0TmV0d29ya0lEIiwic2V0TmV0d29ya0F1dG8iLCJsaW1pdCIsInN1cGVyIiwic3BhdGlhbFZpZXdJbml0IiwibWluUG9pbnQiLCJtYXhQb2ludCIsImF4aXNCb3R0b20iLCJ0aWNrcyIsInRpY2tTaXplIiwidGlja1BhZGRpbmciLCJheGlzUmlnaHQiLCJwZXJjZW50YWdlIiwiYmFja2dyb3VuZF9pbWFnZSIsInN0ZXAiLCJzbGlkZSIsInVpIiwic3BhY2UiLCJhcHBlbmRUbyIsImluaXRTbGlkZXJzIiwiaW5pdENvbG9yUGlja2VyIiwiTGluZUNoYXJ0IiwiY3BfbGlzdGVuZXIiLCJzZl9saXN0ZW5lcnMiLCJhZl9saXN0ZW5lcnMiLCJtZF9saXN0ZW5lcnMiLCJuX2xpc3RlbmVycyIsImhfbGlzdGVuZXJzIiwiaW5pdERlbmRyb2dyYW0iLCJkcmFnZ2FibGUiLCJjb250YWlubWVudCIsInJlc2l6YWJsZSIsImFzcGVjdFJhdGlvIiwibWF4V2lkdGgiLCJzdmciLCJpbml0RGVuZHJvZ3JhbUxlZ2VuZCIsInNldEhpZXJhcmNoeUxldmVsIiwidXBkYXRlRGVuZHJvZ3JhbSIsIkNoYXJ0Iiwic3dhcm1fZmVhdHVyZXMiLCJsaW5lQ2hhcnRXaWR0aCIsInRyZW5kQ2hhcnRzRWxlbSIsImxpbmVDaGFydCIsImxpbmVDaGFydERhdGEiLCJmaWxsIiwidG1wX29iamVjdCIsIngyIiwidGlja0Zvcm1hdCIsImF4aXNMZWZ0IiwiZHJhZ2dlZCIsImNvb3JkcyIsIm1vdXNlIiwidHJhbnNsYXRlRXh0ZW50IiwibGluZXMiLCJzd2FybUxpbmVDaGFydCIsImxpbmVfY29sb3JzIiwic2NhbGVPcmRpbmFsIiwic2NoZW1lQ2F0ZWdvcnkxMCIsIm5vcm1hbGl6YXRpb25TY2FsZSIsImxpbmUiLCJkcmFnIiwiY2hhcnRMaW5lcyIsIl9ncm91cHMiLCJzdHJva2UiLCJhdHRyaWJ1dGVzIiwiZ2V0Q29tcHV0ZWRUZXh0TGVuZ3RoIiwiaW5pdExpbmVDaGFydEJ1dHRvbnMiLCJjYXBpdGFsaXplZF9mZWF0dXJlX3N0cmluZyIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwiZWxlbSIsInRyZW5kY2hhcnQiLCJmZWF0dXJlIiwidHJlbmRDaGFydERhdGEiLCJudW1fYW5pbWFscyIsImFuaW1hbElkcyIsInRtcFRyZW5kQ2hhcnREYXRhIiwidHJlbmRDaGFydCIsInRlbXAiLCJhcmVhIiwieTAiLCJ5MSIsInBhcmVudCIsIm5leHQiLCJkZW5kcm9ncmFtTGVnZW5kIiwibGVnZW5kRGF0YSIsIm5ldHdvcmtJRCIsIm5ldHdvcmtDb2xvciIsIkpTT05BUElfTUlNRVRZUEUiLCJnZXRQZXJjZW50aWxlIiwiZGF0YVNldFBlcmNlbnRpbGUiLCJhamF4IiwidXJsIiwiZGF0YVR5cGUiLCJjb250ZW50VHlwZSIsImhlYWRlcnMiLCJzdWNjZXNzIiwic2V0RGF0YVNldFBlcmNlbnRpbGUiLCJhZGRBYnNvbHV0ZUZlYXR1cmVCdXR0b25zIiwiZ2V0TmV0d29ya0RhdGFCdXR0b24iLCJhZGROZXR3b3JrQnV0dG9ucyIsInNldERhdGFzZXRGZWF0dXJlIiwic2V0U3dhcm1EYXRhIiwicGFyc2UiLCJhZGRUb0RhdGFzZXQiLCJzZXRNZXRhRGF0YSIsInJlc3VsdFN0cmluZyIsImluaXRpYWxpemVNZXRhZGRhdGEiLCJpc05hTiIsImNvbnN0cnVjdG9yIiwicmVtb3ZlSGllcmFyY2h5Q29sb3IiLCJ0bXBfYm9vbGVhbiIsInNldEhpZXJhcmNoeUNvbG9yIiwic2V0QW5pbWFsSWRzIiwicmVhZHkiLCJFdmVudFNvdXJjZSIsIm9ubWVzc2FnZSIsImNsb3NlIiwiY2hlY2tQZW5kaW5nUmVxdWVzdCIsImFjdGl2ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZWFkeVN0YXRlIiwiQ0xPU0VEIiwiYWxlcnQiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElBQVVGLEVBQVFyQixFQUFvQnFCLElBQy9CLEVBQVBFLEVBQVUsT0FBT0YsRUFDcEIsR0FBVyxFQUFQRSxHQUE4QixpQkFBVkYsR0FBc0JBLEdBQVNBLEVBQU1HLFdBQVksT0FBT0gsRUFDaEYsSUFBSUksRUFBS1gsT0FBT1ksT0FBTyxNQUd2QixHQUZBMUIsRUFBb0JrQixFQUFFTyxHQUN0QlgsT0FBT0MsZUFBZVUsRUFBSSxVQUFXLENBQUVULFlBQVksRUFBTUssTUFBT0EsSUFDdEQsRUFBUEUsR0FBNEIsaUJBQVRGLEVBQW1CLElBQUksSUFBSU0sS0FBT04sRUFBT3JCLEVBQW9CVSxFQUFFZSxFQUFJRSxFQUFLLFNBQVNBLEdBQU8sT0FBT04sRUFBTU0sSUFBUUMsS0FBSyxLQUFNRCxJQUM5SSxPQUFPRixHQUlSekIsRUFBb0I2QixFQUFJLFNBQVMxQixHQUNoQyxJQUFJUyxFQUFTVCxHQUFVQSxFQUFPcUIsV0FDN0IsV0FBd0IsT0FBT3JCLEVBQWdCLFNBQy9DLFdBQThCLE9BQU9BLEdBRXRDLE9BREFILEVBQW9CVSxFQUFFRSxFQUFRLElBQUtBLEdBQzVCQSxHQUlSWixFQUFvQmEsRUFBSSxTQUFTaUIsRUFBUUMsR0FBWSxPQUFPakIsT0FBT2tCLFVBQVVDLGVBQWUxQixLQUFLdUIsRUFBUUMsSUFHekcvQixFQUFvQmtDLEVBQUksR0FJakJsQyxFQUFvQkEsRUFBb0JtQyxFQUFJLEcsa0NDakZyRCxJQUFJQyxFQUFVLEVBQVEsR0FFQSxpQkFBWkEsSUFBc0JBLEVBQVUsQ0FBQyxDQUFDakMsRUFBT0MsRUFBSWdDLEVBQVMsTUFPaEUsSUFBSUMsRUFBVSxDQUFDLEtBQU0sRUFFckIsZUFQSUMsRUFRSixnQkFBcUJDLEdBRVIsRUFBUSxFQUFSLENBQTBESCxFQUFTQyxHQUU3RUQsRUFBUUksU0FBUXJDLEVBQU9ELFFBQVVrQyxFQUFRSSxTLGlCQ2Y1Q3RDLEVBRGtDLEVBQVEsRUFDaEN1QyxFQUE0QixJQUU5QkMsS0FBSyxDQUFDdkMsRUFBT0MsRUFBSSwwM1JBQTIzUixLQUVwNVJELEVBQU9ELFFBQVVBLEcsNkJDRWpCQyxFQUFPRCxRQUFVLFNBQVV5QyxHQUN6QixJQUFJQyxFQUFPLEdBdURYLE9BckRBQSxFQUFLQyxTQUFXLFdBQ2QsT0FBT0MsS0FBS0MsS0FBSSxTQUFVQyxHQUN4QixJQUFJWixFQXNEVixTQUFnQ1ksRUFBTUwsR0FDcEMsSUFBSVAsRUFBVVksRUFBSyxJQUFNLEdBRXJCQyxFQUFhRCxFQUFLLEdBRXRCLElBQUtDLEVBQ0gsT0FBT2IsRUFHVCxHQUFJTyxHQUFnQyxtQkFBVE8sS0FBcUIsQ0FDOUMsSUFBSUMsR0FXV0MsRUFYZUgsRUFhNUJJLEVBQVNILEtBQUtJLFNBQVNDLG1CQUFtQkMsS0FBS0MsVUFBVUwsTUFDekRNLEVBQU8sK0RBQStEQyxPQUFPTixHQUMxRSxPQUFPTSxPQUFPRCxFQUFNLFFBZHJCRSxFQUFhWCxFQUFXWSxRQUFRZCxLQUFJLFNBQVVlLEdBQ2hELE1BQU8saUJBQWlCSCxPQUFPVixFQUFXYyxZQUFjLElBQUlKLE9BQU9HLEVBQVEsVUFFN0UsTUFBTyxDQUFDMUIsR0FBU3VCLE9BQU9DLEdBQVlELE9BQU8sQ0FBQ1IsSUFBZ0JhLEtBQUssTUFPckUsSUFBbUJaLEVBRWJDLEVBQ0FLLEVBUEosTUFBTyxDQUFDdEIsR0FBUzRCLEtBQUssTUF2RUpDLENBQXVCakIsRUFBTUwsR0FFM0MsT0FBSUssRUFBSyxHQUNBLFVBQVVXLE9BQU9YLEVBQUssR0FBSSxNQUFNVyxPQUFPdkIsRUFBUyxLQUdsREEsS0FDTjRCLEtBQUssS0FLVnBCLEVBQUt4QyxFQUFJLFNBQVVFLEVBQVM0RCxFQUFZQyxHQUNmLGlCQUFaN0QsSUFFVEEsRUFBVSxDQUFDLENBQUMsS0FBTUEsRUFBUyxNQUc3QixJQUFJOEQsRUFBeUIsR0FFN0IsR0FBSUQsRUFDRixJQUFLLElBQUkvRCxFQUFJLEVBQUdBLEVBQUkwQyxLQUFLdUIsT0FBUWpFLElBQUssQ0FFcEMsSUFBSWtFLEVBQUt4QixLQUFLMUMsR0FBRyxHQUVQLE1BQU5rRSxJQUNGRixFQUF1QkUsSUFBTSxHQUtuQyxJQUFLLElBQUlDLEVBQUssRUFBR0EsRUFBS2pFLEVBQVErRCxPQUFRRSxJQUFNLENBQzFDLElBQUl2QixFQUFPLEdBQUdXLE9BQU9yRCxFQUFRaUUsSUFFekJKLEdBQVVDLEVBQXVCcEIsRUFBSyxNQUt0Q2tCLElBQ0dsQixFQUFLLEdBR1JBLEVBQUssR0FBSyxHQUFHVyxPQUFPTyxFQUFZLFNBQVNQLE9BQU9YLEVBQUssSUFGckRBLEVBQUssR0FBS2tCLEdBTWR0QixFQUFLRixLQUFLTSxNQUlQSixJLGdCQzNEVCxJQUV3QjRCLEVBQ25CQyxFQUhEQyxFQUFjLEdBV2RDLEdBVG9CSCxFQVNGLFdBTXJCLE9BQU9JLFFBQVVDLFVBQVlBLFNBQVNDLE1BQVFGLE9BQU9HLE1BWjlDLFdBRU4sWUFEb0IsSUFBVE4sSUFBc0JBLEVBQU9ELEVBQUdRLE1BQU1sQyxLQUFNbUMsWUFDaERSLElBYUxTLEVBQVksU0FBVUMsR0FDeEIsT0FBT04sU0FBU08sY0FBY0QsSUFHNUJFLEVBQWEsU0FBV2IsR0FDM0IsSUFBSUMsRUFBTyxHQUVYLE9BQU8sU0FBU1UsR0FNRCxHQUFzQixtQkFBWEEsRUFDSCxPQUFPQSxJQUVmLFFBQTRCLElBQWpCVixFQUFLVSxHQUF5QixDQUN0RCxJQUFJRyxFQUFjSixFQUFVM0UsS0FBS3VDLEtBQU1xQyxHQUV2QyxHQUFJUCxPQUFPVyxtQkFBcUJELGFBQXVCVixPQUFPVyxrQkFDN0QsSUFHQ0QsRUFBY0EsRUFBWUUsZ0JBQWdCQyxLQUN6QyxNQUFNQyxHQUNQSixFQUFjLEtBR2hCYixFQUFLVSxHQUFVRyxFQUVoQixPQUFPYixFQUFLVSxJQTFCRyxHQThCYlEsRUFBWSxLQUNaQyxFQUFtQixFQUNuQkMsRUFBc0IsR0FFdEJDLEVBQVUsRUFBUSxHQXFEdEIsU0FBU0MsRUFBZ0JDLEVBQVEzRCxHQUNoQyxJQUFLLElBQUlqQyxFQUFJLEVBQUdBLEVBQUk0RixFQUFPM0IsT0FBUWpFLElBQUssQ0FDdkMsSUFBSTRDLEVBQU9nRCxFQUFPNUYsR0FDZDZGLEVBQVd2QixFQUFZMUIsRUFBS3NCLElBRWhDLEdBQUcyQixFQUFVLENBQ1pBLEVBQVNDLE9BRVQsSUFBSSxJQUFJQyxFQUFJLEVBQUdBLEVBQUlGLEVBQVNHLE1BQU0vQixPQUFROEIsSUFDekNGLEVBQVNHLE1BQU1ELEdBQUduRCxFQUFLb0QsTUFBTUQsSUFHOUIsS0FBTUEsRUFBSW5ELEVBQUtvRCxNQUFNL0IsT0FBUThCLElBQzVCRixFQUFTRyxNQUFNMUQsS0FBSzJELEVBQVNyRCxFQUFLb0QsTUFBTUQsR0FBSTlELFFBRXZDLENBQ04sSUFBSStELEVBQVEsR0FFWixJQUFRRCxFQUFJLEVBQUdBLEVBQUluRCxFQUFLb0QsTUFBTS9CLE9BQVE4QixJQUNyQ0MsRUFBTTFELEtBQUsyRCxFQUFTckQsRUFBS29ELE1BQU1ELEdBQUk5RCxJQUdwQ3FDLEVBQVkxQixFQUFLc0IsSUFBTSxDQUFDQSxHQUFJdEIsRUFBS3NCLEdBQUk0QixLQUFNLEVBQUdFLE1BQU9BLEtBS3hELFNBQVNFLEVBQWMxRCxFQUFNUCxHQUk1QixJQUhBLElBQUkyRCxFQUFTLEdBQ1RPLEVBQVksR0FFUG5HLEVBQUksRUFBR0EsRUFBSXdDLEVBQUt5QixPQUFRakUsSUFBSyxDQUNyQyxJQUFJNEMsRUFBT0osRUFBS3hDLEdBQ1prRSxFQUFLakMsRUFBUW1FLEtBQU94RCxFQUFLLEdBQUtYLEVBQVFtRSxLQUFPeEQsRUFBSyxHQUlsRHlELEVBQU8sQ0FBQ0MsSUFIRjFELEVBQUssR0FHTzJELE1BRlYzRCxFQUFLLEdBRW1CSSxVQURwQkosRUFBSyxJQUdqQnVELEVBQVVqQyxHQUNUaUMsRUFBVWpDLEdBQUk4QixNQUFNMUQsS0FBSytELEdBRFhULEVBQU90RCxLQUFLNkQsRUFBVWpDLEdBQU0sQ0FBQ0EsR0FBSUEsRUFBSThCLE1BQU8sQ0FBQ0ssS0FJakUsT0FBT1QsRUFHUixTQUFTWSxFQUFvQnZFLEVBQVN3RSxHQUNyQyxJQUFJMUIsRUFBU0UsRUFBV2hELEVBQVF5RSxZQUVoQyxJQUFLM0IsRUFDSixNQUFNLElBQUk0QixNQUFNLCtHQUdqQixJQUFJQyxFQUFnQ25CLEVBQW9CQSxFQUFvQnhCLE9BQVMsR0FFckYsR0FBeUIsUUFBckJoQyxFQUFRNEUsU0FDTkQsRUFFTUEsRUFBOEJFLFlBQ3hDL0IsRUFBT2dDLGFBQWFOLEVBQU9HLEVBQThCRSxhQUV6RC9CLEVBQU9pQyxZQUFZUCxHQUpuQjFCLEVBQU9nQyxhQUFhTixFQUFPMUIsRUFBT2tDLFlBTW5DeEIsRUFBb0JuRCxLQUFLbUUsUUFDbkIsR0FBeUIsV0FBckJ4RSxFQUFRNEUsU0FDbEI5QixFQUFPaUMsWUFBWVAsT0FDYixJQUFnQyxpQkFBckJ4RSxFQUFRNEUsV0FBeUI1RSxFQUFRNEUsU0FBU0ssT0FJbkUsTUFBTSxJQUFJUCxNQUFNLDhMQUhoQixJQUFJRyxFQUFjN0IsRUFBV2hELEVBQVF5RSxXQUFhLElBQU16RSxFQUFRNEUsU0FBU0ssUUFDekVuQyxFQUFPZ0MsYUFBYU4sRUFBT0ssSUFNN0IsU0FBU0ssRUFBb0JWLEdBQzVCLEdBQXlCLE9BQXJCQSxFQUFNVyxXQUFxQixPQUFPLEVBQ3RDWCxFQUFNVyxXQUFXQyxZQUFZWixHQUU3QixJQUFJYSxFQUFNN0IsRUFBb0I4QixRQUFRZCxHQUNuQ2EsR0FBTyxHQUNUN0IsRUFBb0IrQixPQUFPRixFQUFLLEdBSWxDLFNBQVNHLEVBQW9CeEYsR0FDNUIsSUFBSXdFLEVBQVFoQyxTQUFTaUQsY0FBYyxTQVNuQyxZQVAwQnZGLElBQXZCRixFQUFRMEYsTUFBTUMsT0FDaEIzRixFQUFRMEYsTUFBTUMsS0FBTyxZQUd0QkMsRUFBU3BCLEVBQU94RSxFQUFRMEYsT0FDeEJuQixFQUFtQnZFLEVBQVN3RSxHQUVyQkEsRUFpQlIsU0FBU29CLEVBQVVDLEVBQUlILEdBQ3RCakgsT0FBT3FILEtBQUtKLEdBQU9LLFNBQVEsU0FBVXpHLEdBQ3BDdUcsRUFBR0csYUFBYTFHLEVBQUtvRyxFQUFNcEcsT0FJN0IsU0FBUzBFLEVBQVVpQyxFQUFLakcsR0FDdkIsSUFBSXdFLEVBQU8wQixFQUFRQyxFQUFRQyxFQUczQixHQUFJcEcsRUFBUUMsV0FBYWdHLEVBQUk1QixJQUFLLENBRzlCLEtBRkErQixFQUFTcEcsRUFBUUMsVUFBVWdHLEVBQUk1QixNQVM5QixPQUFPLGFBSlA0QixFQUFJNUIsSUFBTStCLEVBVWYsR0FBSXBHLEVBQVFzRCxVQUFXLENBQ3RCLElBQUkrQyxFQUFhOUMsSUFFakJpQixFQUFRbEIsSUFBY0EsRUFBWWtDLEVBQW1CeEYsSUFFckRrRyxFQUFTSSxFQUFvQi9HLEtBQUssS0FBTWlGLEVBQU82QixHQUFZLEdBQzNERixFQUFTRyxFQUFvQi9HLEtBQUssS0FBTWlGLEVBQU82QixHQUFZLFFBRzNESixFQUFJbEYsV0FDVyxtQkFBUndGLEtBQ3dCLG1CQUF4QkEsSUFBSUMsaUJBQ29CLG1CQUF4QkQsSUFBSUUsaUJBQ0ssbUJBQVRDLE1BQ1MsbUJBQVQ3RixNQUVQMkQsRUF4REYsU0FBNEJ4RSxHQUMzQixJQUFJMkcsRUFBT25FLFNBQVNpRCxjQUFjLFFBVWxDLFlBUjBCdkYsSUFBdkJGLEVBQVEwRixNQUFNQyxPQUNoQjNGLEVBQVEwRixNQUFNQyxLQUFPLFlBRXRCM0YsRUFBUTBGLE1BQU1rQixJQUFNLGFBRXBCaEIsRUFBU2UsRUFBTTNHLEVBQVEwRixPQUN2Qm5CLEVBQW1CdkUsRUFBUzJHLEdBRXJCQSxFQTZDRUUsQ0FBa0I3RyxHQUMxQmtHLEVBQVNZLEVBQVd2SCxLQUFLLEtBQU1pRixFQUFPeEUsR0FDdENtRyxFQUFTLFdBQ1JqQixFQUFtQlYsR0FFaEJBLEVBQU11QyxNQUFNUixJQUFJRSxnQkFBZ0JqQyxFQUFNdUMsU0FHMUN2QyxFQUFRZ0IsRUFBbUJ4RixHQUMzQmtHLEVBQVNjLEVBQVd6SCxLQUFLLEtBQU1pRixHQUMvQjJCLEVBQVMsV0FDUmpCLEVBQW1CVixLQU1yQixPQUZBMEIsRUFBT0QsR0FFQSxTQUFzQmdCLEdBQzVCLEdBQUlBLEVBQVEsQ0FDWCxHQUNDQSxFQUFPNUMsTUFBUTRCLEVBQUk1QixLQUNuQjRDLEVBQU8zQyxRQUFVMkIsRUFBSTNCLE9BQ3JCMkMsRUFBT2xHLFlBQWNrRixFQUFJbEYsVUFFekIsT0FHRG1GLEVBQU9ELEVBQU1nQixRQUViZCxLQXpPSHJJLEVBQU9ELFFBQVUsU0FBUzBDLEVBQU1QLEdBQy9CLEdBQXFCLG9CQUFWa0gsT0FBeUJBLE9BQ1gsaUJBQWIxRSxTQUF1QixNQUFNLElBQUlrQyxNQUFNLGlFQUduRDFFLEVBQVVBLEdBQVcsSUFFYjBGLE1BQWlDLGlCQUFsQjFGLEVBQVEwRixNQUFxQjFGLEVBQVEwRixNQUFRLEdBSS9EMUYsRUFBUXNELFdBQTBDLGtCQUF0QnRELEVBQVFzRCxZQUF5QnRELEVBQVFzRCxVQUFZaEIsS0FHMUV0QyxFQUFReUUsYUFBWXpFLEVBQVF5RSxXQUFhLFFBR2hEekUsRUFBUTRFLFdBQVU1RSxFQUFRNEUsU0FBVyxVQUUxQyxJQUFJakIsRUFBU00sRUFBYTFELEVBQU1QLEdBSWhDLE9BRkEwRCxFQUFlQyxFQUFRM0QsR0FFaEIsU0FBaUJtSCxHQUd2QixJQUZBLElBQUlDLEVBQVksR0FFUHJKLEVBQUksRUFBR0EsRUFBSTRGLEVBQU8zQixPQUFRakUsSUFBSyxDQUN2QyxJQUFJNEMsRUFBT2dELEVBQU81RixJQUNkNkYsRUFBV3ZCLEVBQVkxQixFQUFLc0IsS0FFdkI0QixPQUNUdUQsRUFBVS9HLEtBQUt1RCxHQUdidUQsR0FFRnpELEVBRGdCTyxFQUFha0QsRUFBU25ILEdBQ1pBLEdBRzNCLElBQVNqQyxFQUFJLEVBQUdBLEVBQUlxSixFQUFVcEYsT0FBUWpFLElBQUssQ0FDMUMsSUFBSTZGLEVBRUosR0FBcUIsS0FGakJBLEVBQVd3RCxFQUFVckosSUFFYjhGLEtBQVksQ0FDdkIsSUFBSyxJQUFJQyxFQUFJLEVBQUdBLEVBQUlGLEVBQVNHLE1BQU0vQixPQUFROEIsSUFBS0YsRUFBU0csTUFBTUQsWUFFeER6QixFQUFZdUIsRUFBUzNCLFFBaU1oQyxJQUNLb0YsRUFEREMsR0FDQ0QsRUFBWSxHQUVULFNBQVVFLEVBQU9DLEdBR3ZCLE9BRkFILEVBQVVFLEdBQVNDLEVBRVpILEVBQVVJLE9BQU9DLFNBQVMvRixLQUFLLFFBSXhDLFNBQVMyRSxFQUFxQjlCLEVBQU8rQyxFQUFPcEIsRUFBUUYsR0FDbkQsSUFBSTVCLEVBQU04QixFQUFTLEdBQUtGLEVBQUk1QixJQUU1QixHQUFJRyxFQUFNbUQsV0FDVG5ELEVBQU1tRCxXQUFXQyxRQUFVTixFQUFZQyxFQUFPbEQsT0FDeEMsQ0FDTixJQUFJd0QsRUFBVXJGLFNBQVNzRixlQUFlekQsR0FDbEMwRCxFQUFhdkQsRUFBTXVELFdBRW5CQSxFQUFXUixJQUFRL0MsRUFBTVksWUFBWTJDLEVBQVdSLElBRWhEUSxFQUFXL0YsT0FDZHdDLEVBQU1NLGFBQWErQyxFQUFTRSxFQUFXUixJQUV2Qy9DLEVBQU1PLFlBQVk4QyxJQUtyQixTQUFTYixFQUFZeEMsRUFBT3lCLEdBQzNCLElBQUk1QixFQUFNNEIsRUFBSTVCLElBQ1ZDLEVBQVEyQixFQUFJM0IsTUFNaEIsR0FKR0EsR0FDRkUsRUFBTXdCLGFBQWEsUUFBUzFCLEdBRzFCRSxFQUFNbUQsV0FDUm5ELEVBQU1tRCxXQUFXQyxRQUFVdkQsTUFDckIsQ0FDTixLQUFNRyxFQUFNUSxZQUNYUixFQUFNWSxZQUFZWixFQUFNUSxZQUd6QlIsRUFBTU8sWUFBWXZDLFNBQVNzRixlQUFlekQsS0FJNUMsU0FBU3lDLEVBQVlILEVBQU0zRyxFQUFTaUcsR0FDbkMsSUFBSTVCLEVBQU00QixFQUFJNUIsSUFDVnRELEVBQVlrRixFQUFJbEYsVUFRaEJpSCxPQUFnRDlILElBQWxDRixFQUFRaUksdUJBQXVDbEgsR0FFN0RmLEVBQVFpSSx1QkFBeUJELEtBQ3BDM0QsRUFBTVosRUFBUVksSUFHWHRELElBRUhzRCxHQUFPLHVEQUF5RHhELEtBQUtJLFNBQVNDLG1CQUFtQkMsS0FBS0MsVUFBVUwsTUFBZ0IsT0FHakksSUFBSW1ILEVBQU8sSUFBSXhCLEtBQUssQ0FBQ3JDLEdBQU0sQ0FBRXNCLEtBQU0sYUFFL0J3QyxFQUFTeEIsRUFBS0ksS0FFbEJKLEVBQUtJLEtBQU9SLElBQUlDLGdCQUFnQjBCLEdBRTdCQyxHQUFRNUIsSUFBSUUsZ0JBQWdCMEIsSyxjQzVXaENySyxFQUFPRCxRQUFVLFNBQVV3RyxHQUV6QixJQUFJK0QsRUFBNkIsb0JBQVg3RixRQUEwQkEsT0FBTzZGLFNBRXZELElBQUtBLEVBQ0gsTUFBTSxJQUFJMUQsTUFBTSxvQ0FJbkIsSUFBS0wsR0FBc0IsaUJBQVJBLEVBQ2pCLE9BQU9BLEVBR1IsSUFBSWdFLEVBQVVELEVBQVNFLFNBQVcsS0FBT0YsRUFBU0csS0FDOUNDLEVBQWFILEVBQVVELEVBQVNLLFNBQVNDLFFBQVEsWUFBYSxLQTJEbkUsT0EvQmVyRSxFQUFJcUUsUUFBUSx1REFBdUQsU0FBU0MsRUFBV0MsR0FFckcsSUFXSUMsRUFYQUMsRUFBa0JGLEVBQ3BCRyxPQUNBTCxRQUFRLFlBQVksU0FBU2xLLEVBQUd3SyxHQUFLLE9BQU9BLEtBQzVDTixRQUFRLFlBQVksU0FBU2xLLEVBQUd3SyxHQUFLLE9BQU9BLEtBRzlDLE1BQUksb0RBQW9EQyxLQUFLSCxHQUNwREgsR0FRUkUsRUFGcUMsSUFBbENDLEVBQWdCeEQsUUFBUSxNQUVsQndELEVBQ2tDLElBQWpDQSxFQUFnQnhELFFBQVEsS0FFekIrQyxFQUFVUyxFQUdWTixFQUFhTSxFQUFnQkosUUFBUSxRQUFTLElBSWpELE9BQVN2SCxLQUFLQyxVQUFVeUgsR0FBVSxVLDZCQ3ZFcEMsSUFBSUssRUFDQUMsRSwwc0JDQ0FDLFlBQVlDLE9DTGhCLElBQUlDLEVBQWdCLEcsV0MyRDNCLElBQ1dDLEdBQWMsRUFXbEIsU0FBU0MsRUFBZXhLLEdBRXZCdUssRUFEaUIsa0JBQVZ2SyxHQUNPQSxFQzlEZixTQUFTeUssSUFDWkQsR0FBZSxHQUNmRSxFQUFFLGdCQUFnQkMsWUFBWSxVQUM5QkQsRUFBRSxnQkFBZ0JFLEtBQUssWUFBWSxHQUNuQ0YsRUFBRSxlQUFlRyxPQUNqQkgsRUFBRSxpQkFBaUJJLE9BT2hCLFNBQVNDLElBQ1pQLEdBQWUsR0FDZkUsRUFBRSxnQkFBZ0JNLFNBQVMsVUFDM0JOLEVBQUUsZ0JBQWdCRSxLQUFLLFlBQVksR0FDbkNGLEVBQUUsaUJBQWlCRyxPQUNuQkgsRUFBRSxlQUFlSSxPQThCZCxTQUFTRyxFQUFxQkMsR0FDakMsSUFBSXJLLEVBQUksQ0FBQyxJQUFNLElBQU0sR0FBSyxJQUFNLEtBQzVCdUcsRUFBUyxHQUNiLEdBQW1CLElBQWY4RCxFQUFJbEksT0FDSixPQUFPLEVBRVhrSSxFQUFJQyxNQUFLLFNBQVNDLEVBQUdDLEdBQ2pCLE9BQU9ELEVBQUlDLEtBRWYsSUFBSyxJQUFJdE0sRUFBSSxFQUFHQSxFQUFJOEIsRUFBRW1DLE9BQVFqRSxJQUFLLENBQy9CLElBQUl3SixHQUFTMkMsRUFBSWxJLE9BQVMsR0FBS25DLEVBQUU5QixHQUM3QnVNLEVBQVFDLEtBQUtDLE1BQU1qRCxHQUNuQmtELEVBQVFILEVBQVEsRUFDaEJJLEVBQVNuRCxFQUFRLEVBQ2pCa0QsR0FBU1AsRUFBSWxJLE9BQ2JvRSxFQUFPL0YsS0FBSzZKLEVBQUlJLElBRWhCbEUsRUFBTy9GLEtBQUs2SixFQUFJSSxJQUFVLEVBQUlJLEdBQVVSLEVBQUlPLEdBQVNDLEdBRzdELE9BQU90RSxFQU1YLFNBQVN1RSxJQUNMakIsRUFBRSxpQkFBaUJrQixPQUFNLFdBQ2pCbEIsRUFBRWpKLE1BQU1vSyxLQUFLLGtCQUFrQmpCLEtBQUssV0FFbkIsSUFBSSxFQUFXbkosS0FBTXFLLElBQzNCQyxvQkE4Qm5CckIsRUFBRSxtQkFBbUJHLE9BQ3JCSCxFQUFFLHFCQUFxQkcsT0FDdkJILEVBQUUsb0JBQW9CSSxPQVh0QkosRUFBRSxvQkFBb0JFLEtBQUssV0FBVyxHQUFNQSxLQUFLLFlBQVksR0FDN0RGLEVBQUUseUJBQXlCc0IsS0FBSyxZQUFZLEdBQzVDdEIsRUFBRSxrQkFBa0JzQixLQUFLLGFBQWMsZUE4QzNDQyxPQUFPdEwsVUFBVXVMLFNBQVcsV0FDeEIsSUFDSW5OLEVBREFvTixFQUFPLEVBRVgsR0FBb0IsSUFBaEIxSyxLQUFLdUIsT0FBYyxPQUFPbUosRUFDOUIsSUFBS3BOLEVBQUksRUFBR0EsRUFBSTBDLEtBQUt1QixPQUFRakUsSUFFekJvTixHQUFTQSxHQUFRLEdBQUtBLEVBRGhCMUssS0FBSzJLLFdBQVdyTixHQUV0Qm9OLEdBQVEsRUFFWixPQUFPQSxHQXdCWEUsR0FBR0MsVUFBVTNMLFVBQVU0TCxXQUFhLFdBQ2hDLE9BQU85SyxLQUFLK0ssTUFBSyxXQUNiLElBQUl4RyxFQUFhdkUsS0FBSzBFLFdBQVdILFdBQzdCQSxHQUNBdkUsS0FBSzBFLFdBQVdMLGFBQWFyRSxLQUFNdUUsT0MvRi9DLElBYUksRUFDQSxFQUNPeUcsRUFmUEMsRUFBa0IsR0FXbEJDLEVBQVEsRUFtQkwsTUFBTSxFQUNWLGNBQ0VsTCxLQUFLbUwsVUFBVSxFQUVmbkwsS0FBS29MLGFBQWVSLEdBQUdTLE9BQU8sYUFHOUJyTCxLQUFLc0wsS0FBT1YsR0FBR1UsT0FDVkMsWUFBWSxDQUFDLEVBQUcsSUFDaEJDLEdBQUcsT0FBUSxLQUdSWixHQUFHYSxNQUFNak0sVUFBVWtNLEVBQUk1QixLQUFLNkIsSUFBSSxFQUFHM0wsS0FBSzRMLFdBQWFoQixHQUFHYSxNQUFNak0sVUFBVXFNLEVBQUksR0FDeEUvQixLQUFLZ0MsSUFBSTlMLEtBQUs0TCxXQUFhLEVBQUloQixHQUFHYSxNQUFNak0sVUFBVXFNLEdBQUlqQixHQUFHYSxNQUFNak0sVUFBVWtNLElBRTdFZCxHQUFHYSxNQUFNak0sVUFBVXVNLEVBQUlqQyxLQUFLNkIsSUFBSSxFQUFHM0wsS0FBS2dNLFlBQWNwQixHQUFHYSxNQUFNak0sVUFBVXFNLEVBQUksR0FDekUvQixLQUFLZ0MsSUFBSTlMLEtBQUtnTSxZQUFjLEVBQUlwQixHQUFHYSxNQUFNak0sVUFBVXFNLEdBQUlqQixHQUFHYSxNQUFNak0sVUFBVXVNLElBRzlFL0wsS0FBS2lNLFVBQVUxQixLQUFLLFlBQWFLLEdBQUdhLE1BQU1qTSxXQUcxQzBNLE9BQU96TyxLQUFLME8sTUFBTUMsTUFBTXhCLEdBQUdhLE1BQU1qTSxVQUFVNk0sU0FBUyxLQUNwREMsT0FBTzdPLEtBQUs4TyxNQUFNSCxNQUFNeEIsR0FBR2EsTUFBTWpNLFVBQVVnTixTQUFTLE9BRTVEeE0sS0FBS2lNLFVBQVlqTSxLQUFLb0wsYUFBYXFCLE9BQU8sU0FDMUN6TSxLQUFLME0sS0FBTzFNLEtBQUtpTSxVQUFVUSxPQUFPLFNBQ3ZCbEMsS0FBSyxRQUFTLFFBQ2RBLEtBQUssWUFBYSxJQUdSLFVBRkNvQyxXQUFXQyxZQUFjLEVBQUksR0FFZixLQURkRCxXQUFXRSxZQUFjLEVBQUksR0FDTCxLQUs5QzdNLEtBQUs4TSxZQUFjLFFBQ25COU0sS0FBSytNLFdBQWEsQ0FDZDdILEtBQU0sU0FDTjhILE1BQU9yRSxZQUFZQyxRQUV2QjVJLEtBQUtpTixZQUFjLElBQ25Cak4sS0FBS2tOLGFBQWUsR0FFcEJsTixLQUFLbU4sVUFBWXZDLEdBQUdTLE9BQU8sd0JBQ3RCb0IsT0FBTyxPQUNQbEMsS0FBSyxLQUFNLG1CQUNYQSxLQUFLLFFBQVN2SyxLQUFLaU4sYUFDbkIxQyxLQUFLLFNBQVV2SyxLQUFLa04sY0FDekJsTixLQUFLb04sY0FBZ0IsRUFDckJwTixLQUFLcU4sY0FBZ0IsR0FDckJyTixLQUFLc04sYUFBZUMsRUFBUXZHLE9BQVFwSixHQUN6QkEsRUFBSyxJQUFNb0MsS0FBS21MLFdBRTNCbkwsS0FBS3dCLEdBQUt5SCxFQUFFLGdDQUFnQ3NCLEtBQUssUUFDakR2SyxLQUFLOEksYUFBYyxFQUNuQjlJLEtBQUt3TixNQUFRNUMsR0FBRzRDLFFBQ1hDLE9BQU8sQ0FDSixDQUFDLEVBQUcsR0FDSixDQUFDek4sS0FBSzRMLFVBQVc1TCxLQUFLZ00sY0FFOUJoTSxLQUFLME4sWUFBYzlDLEdBQUdTLE9BQU8sU0FDN0JyTCxLQUFLMk4sZ0JBQWtCLEdBSXpCLGFBQWFwUCxHQUNZLGlCQUFWQSxHQUF1QnlCLEtBQUttTCxXQUFhZCxHQUFVOUksT0FDMUR2QixLQUFLbUwsVUFBWTVNLEVBRWpCeUIsS0FBS21MLFVBQVksRUFHekIsZUFBZTVNLEdBQ1h5QixLQUFLOE0sWUFBY3ZPLEVBRXZCLGlCQUFpQkEsR0FDZHlCLEtBQUtxTixjQUFnQjlPLEVBRXhCLGVBQ0l5QixLQUFLbUwsVUFBWW5MLEtBQUttTCxVQUFZLEVBRXRDLGtCQUNJLEdBQUlQLEdBQUdTLE9BQU8sdUJBQXlCaEIsR0FBVVAsS0FBSzhELEtBQUs1TixLQUFLbUwsVUFBWUQsSUFBUyxDQUNqRixJQUFJMkMsRUFBTS9ELEtBQUs4RCxLQUFLNU4sS0FBS21MLFVBQVlELEdBRWpDbEwsS0FBS21MLFVBQVksSUFBTyxJQUV4QlAsR0FBR1MsT0FBTyw4QkFDTHlDLEtBQU16RCxHQUFVd0QsR0FBd0IsaUJBQUksT0FDakRqRCxHQUFHUyxPQUFPLG1CQUNMeUMsS0FBS3pELEdBQVV3RCxHQUFZLE1BQUksUUFDcENqRCxHQUFHUyxPQUFPLDBCQUNMeUMsS0FBS3pELEdBQVV3RCxHQUFtQixhQUFJLFNBQzNDakQsR0FBR1MsT0FBTywrQkFDTHlDLEtBQUt6RCxHQUFVd0QsR0FBd0Isa0JBQUksTUFDaERqRCxHQUFHUyxPQUFPLHVCQUNMeUMsS0FBS3pELEdBQVV3RCxHQUFnQixVQUFJLEtBQ3hDakQsR0FBR1MsT0FBTywwQkFDTHlDLEtBQUt6RCxHQUFVd0QsR0FBbUIsZUFFM0NqRCxHQUFHUyxPQUFPLHNCQUNMZCxLQUFLLFlBQWEsYUFBZVMsRUFBYTZDLEdBQU8sUUFHbEUsbUJBRUksTUFBZ0MsV0FBNUI3TixLQUFLK00sV0FBaUIsS0FDZm5DLEdBQUdtRCxjQUNMQyxPQUNHLEdBQWtCaE8sS0FBSzhNLGNBRTFCbUIsTUFBTWpPLEtBQUsrTSxXQUFrQixPQUVELGNBQTVCL00sS0FBSytNLFdBQWlCLEtBQ3BCbkMsR0FBR3NELGlCQUNMRixPQUNHLEdBQWtCaE8sS0FBSzhNLGNBRTFCbUIsTUFBTWpPLEtBQUsrTSxXQUFrQixZQUxqQyxFQVFULGtCQUNJbkMsR0FBR1MsT0FBTyxnQkFDTDhDLFVBQVUsWUFDVnZOLEtBQUtnSyxHQUFHd0QsUUFBUXpGLGNBQ2hCMEYsUUFDQTVCLE9BQU8sUUFDUGxDLEtBQUssUUFBUyxXQUNkQSxLQUFLLFFBQVUzTSxHQUNMQSxFQUFFaUIsS0FFWjJNLEdBQUcsUUFBVTVOLElBRVZxTCxFQUFFLFlBQVlDLFlBQVksWUFDMUJELEVBQUUsbUJBQXFCckwsRUFBRWlCLElBQU0sTUFBTTBLLFNBQVMsWUFDOUN2SixLQUFLK00sV0FBV0MsTUFBUXJFLFlBQVkvSyxFQUFFaUIsS0FDdENtQixLQUFLc08sZUFDQXJGLEVBQUUsZ0JBQ0ZzRixTQUFTLFlBR1Z2TyxLQUFLd08sZUFDTHhPLEtBQUt5TyxVQUdaTixVQUFVLFdBQ1Z2TixLQUFNaEQsR0FDSUEsRUFBRVcsT0FFWjhQLFFBQ0E1QixPQUFPLFFBQ1BsQyxLQUFLLFFBQVMsVUFDZHhHLE1BQU0sbUJBQXFCbkcsR0FDakJBLEdBSWZxTCxFQUFFLDRCQUE0Qk0sU0FBUyxZQUUzQyxlQUNJLElBQUltRixFQUNBQyxFQVdKLEdBSkExRixFQUFFLHdCQUNHSSxPQUdvQixVQUFyQnJKLEtBQUs4TSxZQUF5QixDQUM5QixJQUFJOEIsRUFBVzVPLEtBQUs2TyxtQkFFcEJILEVBQVMxTyxLQUFLbU4sVUFBVWdCLFVBQVUsZUFDN0J2TixLQUFLZ08sRUFBU1gsU0FFbkJVLEVBQWEzTyxLQUFLbU4sVUFBVWdCLFVBQVUsb0JBQ2pDdk4sS0FBS2dPLEVBQVNaLGVBSW5CVSxFQUFTMU8sS0FBS21OLFVBQVVnQixVQUFVLGVBQzdCdk4sS0FBSyxJQUNWK04sRUFBYTNPLEtBQUttTixVQUFVZ0IsVUFBVSxvQkFDakN2TixLQUFLLElBRVZxSSxFQUFFLHdCQUNHRyxPQUtUc0YsRUFBTzNLLE1BQU0sUUFBUSxTQUFTbkcsR0FDMUIsT0FBT0EsS0FHWDhRLEVBQ0tMLFFBQ0E1QixPQUFPLFFBQ1BsQyxLQUFLLFFBQVMsVUFDZEEsS0FBSyxRQXZDYyxJQXdDbkJBLEtBQUssU0F2Q2UsSUF3Q3BCQSxLQUFLLElBQUssR0FDVkEsS0FBSyxLQUFLLFNBQVMzTSxFQUFHTixHQUNuQixPQTNDZ0IsTUEyQ1lBLEVBQXlCLFFBRXhEeUcsTUFBTSxRQUFRLFNBQVNuRyxHQUNwQixPQUFPQSxLQUdmOFEsRUFBT0ksT0FDRnBKLFNBSUxpSixFQUFXYixNQUFLLFNBQVNsUSxHQUNyQixPQUFPa00sS0FBSzhELEtBQVMsRUFBSmhRLEdBQVMsS0FHOUIrUSxFQUNLTixRQUNBNUIsT0FBTyxRQUNQbEMsS0FBSyxRQUFTLGVBQ2RBLEtBQUssSUFBSyxJQUNWQSxLQUFLLEtBQUssU0FBUzNNLEVBQUdOLEdBRW5CLE9BakVnQixNQWlFWUEsRUFBd0IsRUFBSyxRQUU1RHdRLE1BQUssU0FBU2xRLEdBQ1gsT0FBT2tNLEtBQUs4RCxLQUFTLEVBQUpoUSxHQUFTLEtBSWxDK1EsRUFBV0csT0FDTnBKLFNBR1QsTUFBTTlILEdBQ0ZtUixpQkFBaUJuUixFQUFRLEtBQVEsTUFFNUJxTCxFQUFFLGdCQUFnQnNGLFNBQVMsVUFLcEMsa0JBQWtCUyxFQUFNQyxHQUN2QixJQUFJdEosRUFBUyxHQUNUdUosRUFBUWxQLEtBQUsyTixnQkFBZ0IsSUFBTXNCLEdBR25DRSxFQUFZSCxFQUFlLFNBRS9CLElBQUssSUFBSTFSLEVBQUksRUFBR0EsRUFBSTBSLEVBQWEsT0FBRzFSLElBQUssQ0FFckMsR0FBSTZSLEVBQVUsSUFBTUEsRUFBVSxHQUFVLFFBQU1ELEVBQU8sQ0FFakRDLEVBQVU3SixTQUFRLFNBQVM4SixRQUNhLElBQXpCQSxFQUFXLEtBQVEsTUFDMUJ6SixFQUFPL0YsS0FBS3dQLEVBQVcsS0FBUSxTQUd2QyxNQUdKLElBQUl2QixFQUFNLEdBQ1ZzQixFQUFVN0osU0FBUSxTQUFTOEosUUFDUyxJQUFyQkEsRUFBZSxXQUN0QnZCLEVBQU1BLEVBQUloTixPQUFPdU8sRUFBZSxjQUd4Q0QsRUFBWXRCLEVBRWhCLE9BQU9sSSxFQUVSLGtCQUFrQnNKLEVBQVdDLEdBRTVCbFAsS0FBSzJOLGdCQUFnQixJQUFNc0IsR0FBYUMsRUFFekMscUJBQXFCRCxVQUVoQmpQLEtBQUsyTixnQkFBZ0IsSUFBTXNCLEdBRWhDLG1CQUVJLElBQUl6TixFQUFLeUgsRUFBRSxnQ0FBZ0NzQixLQUFLLFFBQzVDMU0sRUFBT29MLEVBQUUsZ0NBQWdDc0IsS0FBSyxRQUVsRHRCLEVBQUUsMEJBQTBCNkUsS0FBS2pRLEdBR2pDb0wsRUFBRSxrQ0FBa0NvRyxJQUFJclAsS0FBSzJOLGdCQUFnQixJQUFNbk0sSUFDbkV5SCxFQUFFLGdDQUFnQzZFLEtBQUs5TixLQUFLMk4sZ0JBQWdCLElBQU1uTSxJQUd0RSxxQkFBcUI4TixHQUNqQixJQUFJM0osRUFBUyxHQWNiLE9BYkEySixFQUFZaEssUUFBU2lLLElBQ2pCLElBQUlDLEVBQVcsR0FDZixJQUFLLElBQUluTSxFQUFJLEVBQUdBLEVBQUlrTSxFQUFRaE8sT0FBUThCLElBQUssQ0FDckMsSUFBSW9NLEVBQWN6UCxLQUFLc04sYUFBYWxELEtBQUt4TSxHQUFLQSxFQUFLLElBQU0yUixFQUFRbE0sSUFDN0RvTSxHQUNBRCxFQUFTNVAsS0FBSyxDQUFDNlAsRUFBZSxFQUFFLElBQUtBLEVBQWUsRUFBRSxLQUkxREQsRUFBU2pPLFFBQVUsR0FDbkJvRSxFQUFPL0YsS0FBS2dMLEdBQUc4RSxZQUFZRixNQUc1QjdKLEVBRVgsZ0JBRUksSUFHSWdLLEVBQVUvRSxHQUFHZ0YsT0FDVkMsS0FBSyxDQUFDLEtBQXdCLE9BRWpDQyxFQUFlOVIsT0FBT3FILEtBQUswSyxJQUFrQjlQLEtBQUksU0FBU3lMLEdBQzFELE9BQU9BLEVBQUV6RCxRQUFRLElBQUssT0FHdEIrSCxFQUFvQixHQUd4QixJQUFLLElBQUkxUyxFQUFJLEVBQUdBLEVBQUl3UyxFQUFhdk8sT0FBUWpFLElBQUssQ0FDMUMsSUFBSTJTLEVBQVdGLEdBQWlCLElBQU1ELEVBQWF4UyxJQUFJMEMsS0FBS21MLFdBQ3hEK0UsRUFBUXRGLEdBQUdxRSxVQUFVZ0IsR0FBVSxTQUFTclMsR0FDeEMsT0FBT0EsRUFBRXVTLFlBR2JELEVBQVFQLEVBQVFPLEdBQ2hCLElBQUlsQixFQUFPa0IsRUFBZ0IsU0FBRSxHQUN6QkUsSUFBeUJOLEVBQWF4UyxLQUN0QytTLG9CQUFzQkMsRUFBa0J0QixFQUFNYyxFQUFheFMsS0FJL0QsSUFBSWlULEVBQVNELEVBQWtCdEIsRUFBTWMsRUFBYXhTLElBRTlDa1QsRUFBUXhRLEtBQUt5USxxQkFBcUJGLEdBRXRDUCxFQUFrQnBRLEtBQUs0USxHQUczQixJQUNJRSxFQUFrQixHQUVsQnBCLEVBQWN0UCxLQUFLME4sWUFDbEJTLFVBQVUscUJBQ1Z2TixLQUFLb1AsR0FHVlYsRUFDS2pCLFFBQ0E1QixPQUFPLEtBQ1BsQyxLQUFLLFNBQVMsU0FBUzNNLEVBQUdOLEdBTW5CLE1BQU8sb0JBQXNCd1MsRUFBYXhTLE1BR2pEeUcsTUFBTSxRQUFRLFNBQVNuRyxFQUFHTixHQUN2QixPQUFPb1QsRUFBZ0IsSUFBTVosRUFBYXhTLE9BRTdDaU4sS0FBSyxVQUFVLFNBQVMzTSxFQUFHTixHQUN4QixPQUFPb1QsRUFBZ0IsSUFBTVosRUFBYXhTLE9BRTdDd04sYUFHTHdFLEVBQVkvRSxLQUFLLFNBQVMsU0FBUzNNLEVBQUdOLEdBTTlCLE1BQU8sb0JBQXNCd1MsRUFBYXhTLE1BS2xEZ1MsRUFBWVIsT0FDUHBKLFNBSUwsSUFBSWlMLEVBQWVyQixFQUFZbkIsVUFBVSw0QkFDcEN2TixNQUFLLFNBQVNoRCxHQUNYLE9BQU9BLEtBSWYrUyxFQUNLdEMsUUFDQTVCLE9BQU8sUUFJUGxDLEtBQUssUUFBUyx1QkFDZEEsS0FBSyxLQUFLLFNBQVMzTSxHQUVoQixNQUFPLElBQU1BLEVBQUVzRCxLQUFLLEtBQU8sT0FJbkN5UCxFQUNLcEcsS0FBSyxLQUFLLFNBQVMzTSxHQUVoQixNQUFPLElBQU1BLEVBQUVzRCxLQUFLLEtBQU8sT0FNbkN5UCxFQUFhN0IsT0FDUnBKLFNBSVQsaUJBRUkxRixLQUFLd0IsR0FBS3lILEVBQUUsZ0NBQWdDc0IsS0FBSyxRQUlqRCxJQUFJb0QsRUFBa0IzTixLQUFLMk4sZ0JBQ3ZCbk0sRUFBS3hCLEtBQUt3QixHQVdkLElBQUt5SCxFQUFFMkgsY0FBY2IsS0FBcUIvUCxLQUFLd0IsR0FBSSxDQUcvQyxJQUFJeU8sRUFBV0YsR0FBaUIsSUFBTS9QLEtBQUt3QixJQUFJeEIsS0FBS21MLFdBQ3BEMEYsUUFBUUMsSUFBSWIsR0FDWixJQUFJQyxFQUFRdEYsR0FBR3FFLFVBQVVnQixHQUFVLFNBQVNyUyxHQUN4QyxPQUFPQSxFQUFFdVMsWUFHYkQsRUFBUUEsRUFBTUMsU0FBUyxHQUV2QkQsRUFBTUMsU0FBUzdLLFNBcEJuQixTQUFTeUwsRUFBU25ULEdBRVZBLEVBQUV1UyxVQUFZdlMsRUFBRW9ULE9BQVNyRCxFQUFnQixJQUFNbk0sSUFDL0M1RCxFQUFFcVQsVUFBWXJULEVBQUV1UyxTQUNoQnZTLEVBQUVxVCxVQUFVM0wsUUFBUXlMLElBRXBCblQsRUFBRXVTLFNBQVcsUUFlakIsSUFBSWUsRUFBUyxHQUNUQyxFQUFRLElBQ1JDLEVBQVMsSUFVYixHQUpBbEIsRUFKY3RGLEdBQUdnRixPQUNWQyxLQUFLLENBQUV1QixFQUFTLEdBQUtGLEVBQVVDLEVBQVEsR0FBS0QsR0FHM0N2QixDQUFRTyxHQUlaakgsRUFBRSxnQ0FBZ0MxSCxPQUFRLENBRzFDMEgsRUFBRSxrQ0FDR1IsT0FBTyxTQUFVLE1BQVF5SCxFQUFjLE9BQUksR0FDM0N6SCxPQUFPLFFBQVN6SSxLQUFLMk4sZ0JBQWdCLElBQU0zTixLQUFLd0IsS0FHckQsSUFBSTBFLEVBQU9sRyxLQUFLaU0sVUFDWGtDLFVBQVUsYUFDVnZOLEtBQUtzUCxFQUFNbUIsY0FBY0MsTUFBTSxJQUdwQ3BMLEVBQ0ttSSxRQUNBNUIsT0FBTyxRQUNQbEMsS0FBSyxRQUFTLFFBQ2RBLEtBQUssSUFBS2dILEdBR2ZyTCxFQUNLcUUsS0FBSyxJQUFLZ0gsR0FHZnJMLEVBQUs0SSxPQUNBcEosU0FJTCxJQUFJMEosRUFBT3BQLEtBQUtpTSxVQUNYa0MsVUFBVSxTQUNWdk4sS0FBS3NQLEVBQU1tQixlQUdoQixJQUFJRyxFQUFZcEMsRUFBS2YsUUFDaEI1QixPQUFPLEtBQ1BsQyxLQUFLLFNBQVMsU0FBUzNNLEdBQ3BCLE1BQU8sUUFDRkEsRUFBRXVTLFNBQVcsa0JBQW9CLGtCQUV6QzVGLEtBQUssYUFBYSxTQUFTM00sR0FDeEIsTUFBTyxhQUFlQSxFQUFFOE4sRUFBSSxJQUFNOU4sRUFBRW1PLEVBQUksT0FLaER5RixFQUFVL0UsT0FBTyxVQUNabEMsS0FBSyxJQUFNM00sR0FDSkEsRUFBUyxRQUFNb0MsS0FBSzJOLGdCQUFnQixJQUFNM04sS0FBS3dCLElBQ3hDLEdBQUs1RCxFQUFFZ0QsS0FBSy9DLEtBQUswRCxPQUVqQixHQUFLM0QsRUFBRWdELEtBQUsvQyxLQUFLMEQsUUFHL0JnSixLQUFLLFFBQVUzTSxJQUNaLEdBQUlBLEVBQVMsUUFBTW9DLEtBQUsyTixnQkFBZ0IsSUFBTTNOLEtBQUt3QixJQUMvQyxNQUFPLGlCQUdkK0ksS0FBSyxLQUFPM00sR0FDRixJQUFNQSxFQUFRLEtBQVEsS0FBRW1DLFdBQVcwSyxZQUc3Q2UsR0FBRyxRQUFTeEwsS0FBS21LLE9BQ2pCcUIsR0FBRyxhQUFhLFNBQVM1TixHQUV0QjZULFdBQ0sxTixNQUFNLE9BQVM2RyxHQUFHYSxNQUFNaUcsTUFBUSxFQUFLLE1BQ3JDM04sTUFBTSxNQUFRNkcsR0FBR2EsTUFBTWtHLE1BQVEsRUFBSyxNQUNwQzVOLE1BQU0sVUFBVyxHQUN0QjBOLFdBQVdwRyxPQUFPLGlCQUFpQnVHLEtBQUtoVSxFQUFRLEtBQVEsS0FBRW1DLFlBRzFEOFIsd0JBQXdCalUsRUFBUSxLQUFRLFNBRTNDNE4sR0FBRyxZQUFZLFdBQ1ppRyxXQUFXSyxhQUNOQyxTQUFTLEtBQ1RoTyxNQUFNLFVBQVcsR0FFdEJpTyxnQ0FJUlIsRUFBVS9FLE9BQU8sUUFDWmxDLEtBQUssUUFBUyxtQkFDZEEsS0FBSyxJQUFLLEtBQ1ZBLEtBQUssS0FBTSxLQUNYdUQsS0FBTWxRLEdBQ0lBLEVBQUVnRCxLQUFLL0MsS0FBSzBELFFBSTNCaVEsRUFDS2pILEtBQUssWUFBYzNNLEdBQ1QsYUFBZUEsRUFBRThOLEVBQUksSUFBTTlOLEVBQUVtTyxFQUFJLEtBS2hEcUQsRUFDSzdFLEtBQUssWUFBYzNNLEdBQ1QsYUFBZUEsRUFBRThOLEVBQUksSUFBTTlOLEVBQUVtTyxFQUFJLEtBRTNDVixPQUFPLFVBQ1BkLEtBQUssSUFBTTNNLEdBQ0pBLEVBQVMsUUFBTW9DLEtBQUsyTixnQkFBZ0IsSUFBSzNOLEtBQUt3QixJQUN2QyxHQUFLNUQsRUFBRWdELEtBQUsvQyxLQUFLMEQsT0FFakIsR0FBSzNELEVBQUVnRCxLQUFLL0MsS0FBSzBELFFBRy9CZ0osS0FBSyxRQUFVM00sR0FDUkEsRUFBUyxRQUFNb0MsS0FBSzJOLGdCQUFnQixJQUFLM04sS0FBS3dCLElBR3ZDLGVBRUEsSUFHZCtJLEtBQUssS0FBTzNNLEdBQ0YsSUFBTUEsRUFBUSxLQUFRLEtBQUVtQyxXQUFXMEssWUFJbEQyRSxFQUFLL0QsT0FBTyxRQUNQeUMsS0FBTWxRLEdBQ0lBLEVBQUVnRCxLQUFLL0MsS0FBSzBELFFBSTNCNk4sRUFBS04sT0FDQXBKLFNBR0QxSCxPQUFPcUgsS0FBSzRNLEdBQXFCMVEsUUFLYSxRQUExQzBILEVBQUUsc0JBQXNCckYsSUFBSSxZQUM1QnFGLEVBQUUsc0JBQXNCSSxPQUk1QjZJLFdBQVcsS0FDUDlDLEVBQUsvRCxPQUFPLFVBQ1B0SCxNQUFNLFFBQVEsU0FBU25HLEdBT3BCLE1BQUssSUFBTUEsRUFBUSxLQUFRLEtBQUVtQyxXQUFXMEssYUFBZXdILEVBRzVDRSw0QkFBNEJDLGtCQUFrQkgsRUFBcUIsSUFBTXJVLEVBQVEsS0FBUSxLQUFFbUMsV0FBVzBLLGNBQ3RHN00sRUFBUyxRQUFNb0MsS0FBSzJOLGdCQUFnQixJQUFLM04sS0FBS3dCLElBQzlDLEdBRUEsV0FHcEIsTUFDK0MsU0FBM0N5SCxFQUFFLHNCQUFzQnJGLElBQUksWUFDbkNxRixFQUFFLHNCQUFzQkcsUUFLL0JILEVBQUUySCxjQUFjYixLQUVqQi9QLEtBQUtxUyxnQkFJYixPQUdJLElBQUlDLEVBQWFySixFQUFFLG1EQUNkb0csTUFFRGtELEVBQWN0SixFQUFFLDBDQUNmb0csTUFHTHJQLEtBQUtzTixhQUFlQyxFQUFRdkcsT0FBUXBKLEdBQ3pCQSxFQUFLLElBQU1vQyxLQUFLbUwsV0FLM0IrRyxXQUFXLEtMbHBCWCxJQUF1QjNULEVLb3BCZnlCLEtBQUt3UyxpQkFFTHhTLEtBQUtvTCxhQUFhQyxPQUFPLGVBQ3BCeUMsS0FBS2hFLEtBQUtDLE1BQU0vSixLQUFLbUwsVUFBWSxNQUFRLEdBQUssSUFBTXJCLEtBQUtDLE1BQU0vSixLQUFLbUwsVUFBWXdCLFdBQWdCLEtBQUssR0FBSyxLQUFPM00sS0FBS21MLFVBQVl3QixXQUFnQixLQUVuSjNNLEtBQUttTCxVQUFZd0IsV0FBZ0IsS0FBTSxJTHpwQjVCcE8sRUswcEJHeUIsS0FBS21MLFVMenBCbEMxQyxFQUFPQSxPQUFPLFFBQVNsSyxJSzRwQlosSUFJSWtVLEVBSkFDLEVBQWExUyxLQUFLME0sS0FBS3lCLFVBQVUsWUFDaEN2TixLQUFLWixLQUFLc04sY0FLZixHQUFJdE4sS0FBS21MLGFBQWF3SCxHQUFhLENBQy9CLElBQUlDLEVBQVVELEdBQVkzUyxLQUFLbUwsV0EyQi9CLEdDOVBmOEcsRUFBc0IsR0R5T1BXLEVBQVVBLEVBQVEzUyxJQUFLQyxJQUNuQixJQUFJMlMsRUFBVTdTLEtBQUtzTixhQUFhdEcsUUFBTyxTQUFTeEIsR0FDNUMsT0FBT0EsRUFBTyxJQUFNdEYsRUFBUSxLQUM3QixHQUNDNFMsRUFBVTlTLEtBQUtzTixhQUFhdEcsUUFBTyxTQUFTeEIsR0FDNUMsT0FBT0EsRUFBTyxJQUFNdEYsRUFBUSxLQUM3QixHQUNILE1BQU8sQ0FDSCxNQUFTMlMsRUFBVyxFQUNwQixNQUFTQyxFQUFXLEVBQ3BCLE1BQVNELEVBQVcsRUFDcEIsSUFBT0MsRUFBVyxFQUNsQixJQUFPNVMsRUFBUSxLQUl2QjBTLEVBQVF0TixTQUFRLFNBQVMxSCxHQUNyQnFMLEVBQUcsT0FBU3JMLEVBQVMsTUFBSSxJQUFNQSxFQUFTLE9BQUlnRyxJQUFJLE9BQVFtUCxFQUFrQm5WLEVBQU8sTUFDakZxTCxFQUFHLE9BQVNyTCxFQUFTLE1BQUksSUFBTUEsRUFBUyxPQUFJZ0csSUFBSSxPQUFRbVAsRUFBa0JuVixFQUFPLFNBR2pGb1YsRUFBYSxDQUNiLElBQUlDLEVBQVcsR0FDZixJQUFLLElBQUkzVixFQUFJLEVBQUdBLEVBQUlzVixFQUFRclIsT0FBUWpFLElBQ2hDMlYsRUFBU3JULEtBQUtnVCxFQUFRdFYsR0FBUSxLQUVsQzRWLEVEeHlCaEIsU0FBcUJ6SixHQUV4QixHQUFtQixJQUFmQSxFQUFJbEksT0FDSixPQUFPLEVBRVhrSSxFQUFJQyxNQUFLLFNBQVNDLEVBQUdDLEdBQ2pCLE9BQU9ELEVBQUlDLEtBRWYsSUFBSTlDLEVBUEksS0FPSzJDLEVBQUlsSSxPQUFTLEdBQ3RCc0ksRUFBUUMsS0FBS0MsTUFBTWpELEdBQ25Ca0QsRUFBUUgsRUFBUSxFQUNoQkksRUFBU25ELEVBQVEsRUFDckIsT0FBSWtELEdBQVNQLEVBQUlsSSxPQUNOLEVBQUlrSSxFQUFJSSxHQUVSLEdBQUtKLEVBQUlJLElBQVUsRUFBSUksR0FBVVIsRUFBSU8sR0FBU0MsR0N5eEJ2QmtKLENBQVlGLElBRS9CTCxFQUFVQSxFQUFRNUwsUUFBTyxTQUFTcEosR0FDOUIsT0FBT0EsRUFBTyxLQUFNLEVBQUl3VixLQUc1QlgsRUFBYXpTLEtBQUswTSxLQUFLckIsT0FBTyxrQkFDekI4QyxVQUFVLHNCQUNWdk4sS0FBS2dTLEdBRVZILEVBQ0tsSSxLQUFLLE1BQU0sU0FBUzNNLEdBQ2pCLE9BQU9BLEVBQVMsTUFBRSxNQUVyQjJNLEtBQUssTUFBTSxTQUFTM00sR0FDakIsT0FBUUEsRUFBUyxNQUFFLE1BRXRCMk0sS0FBSyxNQUFNLFNBQVMzTSxHQUNqQixPQUFPQSxFQUFPLElBQUUsTUFFbkIyTSxLQUFLLE1BQU0sU0FBUzNNLEdBQ2pCLE9BQVFBLEVBQU8sSUFBRSxNQUVwQjJNLEtBQUssVUFBVSxTQUFTM00sR0FDckIsT0FBT21WLEVBQW1CLEVBQUluVixFQUFPLFFBRXhDMk0sS0FBSyxrQkFBa0IsU0FBUzNNLEdBQzdCLE9BQU8sRUFBSUEsRUFBTyxPQUkxQjZVLEVBQ0twRSxRQUNBNUIsT0FBTyxRQUNQbEMsS0FBSyxRQUFTLGlCQUNkQSxLQUFLLE1BQU0sU0FBUzNNLEdBQ2pCLE9BQU9BLEVBQVMsTUFBRSxNQUVyQjJNLEtBQUssTUFBTSxTQUFTM00sR0FDakIsT0FBUUEsRUFBUyxNQUFFLE1BRXRCMk0sS0FBSyxNQUFNLFNBQVMzTSxHQUNqQixPQUFPQSxFQUFPLElBQUUsTUFFbkIyTSxLQUFLLE1BQU0sU0FBUzNNLEdBQ2pCLE9BQVFBLEVBQU8sSUFBRSxNQUVwQjJNLEtBQUssVUFBVSxTQUFTM00sR0FDckIsT0FBT21WLEVBQWtCblYsRUFBTyxRQUVuQzJNLEtBQUssa0JBQWtCLFNBQVMzTSxHQUM3QixPQUFPQSxFQUFPLFlBSXRCNlUsRUFBYXpTLEtBQUswTSxLQUFLeUIsVUFBVSxzQkFDNUJ2TixLQUFLLElBU2QsSUFBSXlTLEVBNkJBQyxFQWxDSmIsRUFBVzNELE9BQ05wSixTQUtEdUQsRUFBRSx1QkFDRHNLLEdBQUcsY0FFSkYsRUFBZ0JyVCxLQUFLME0sS0FBS3JCLE9BQU8saUNBQzVCOEMsVUFBVSwrQkFDVnZOLEtBQUssQ0FBQ3lKLEdBQVVySyxLQUFLbUwsV0FBMEIsaUJBRy9DWixLQUFLLElBQU0zTSxHQUNEQSxHQUdmeVYsRUFBY2hGLFFBQ1Q1QixPQUFPLFFBQ1BsQyxLQUFLLFFBQVMsMEJBQ2RBLEtBQUssSUFBTTNNLEdBQ0RBLElBR2Z5VixFQUFnQnJULEtBQUswTSxLQUFLeUIsVUFBVSwrQkFDL0J2TixLQUFLLElBR2R5UyxFQUFjdkUsT0FDVHBKLFNBS0R1RCxFQUFFLGlCQUNEc0ssR0FBRyxjQWNMRCxFQVBJLFlBQWFqSixHQUFVLEdBT2pCckssS0FBSzBNLEtBQ1RyQixPQUFPLGlCQUNQOEMsVUFBVSxnQkFDVnZOLEtBQUt5SixHQUFVckssS0FBS21MLFdBQW9CLFFBQUVxSSxNQUFNLE1BVDNDeFQsS0FBSzBNLEtBQ1ZyQixPQUFPLGlCQUNQOEMsVUFBVSxnQkFDVnZOLEtBQUssQ0FBQ3lKLEdBQVVySyxLQUFLbUwsV0FBb0IsV0FhekNaLEtBQUssSUFBTTNNLEdBQ0RBLEdBR2YwVixFQUFRakYsUUFDSDVCLE9BQU8sUUFDUGxDLEtBQUssUUFBUyxXQUNkQSxLQUFLLElBQU0zTSxHQUNEQSxJQUlmMFYsRUFBVXRULEtBQUswTSxLQUFLckIsT0FBTyxpQkFDdEI4QyxVQUFVLGdCQUNWdk4sS0FBSyxJQUdkMFMsRUFBUXhFLE9BQ0hwSixTQUdMLElBQUkrTixFQUFrQmYsRUFDakJyRSxRQUNBNUIsT0FBTyxLQUNQbEMsS0FBSyxRQUFTLFVBQ2RBLEtBQUssS0FBTzNNLEdBQ0YsVUFBWUEsRUFBSyxHQW1HaEMsR0EvRkE2VixFQUFnQmhILE9BQU8sVUFDbEJsQyxLQUFLLElBQUssSUFBTWdJLEdBQ2hCaEksS0FBSyxLQUFPM00sR0FDRkEsRUFBSyxFQUFFLElBRWpCMk0sS0FBSyxLQUFPM00sSUFDREEsRUFBSyxFQUFFLElBRWxCNE4sR0FBRyxZQUFjNU4sS0xoN0I5QixTQUF5QkEsR0FDNUIsSUFBSyxJQUFJTixFQUFJLEVBQUdBLEVBQUlvVyxHQUFnQm5TLE9BQVFqRSxJQUNwQ00sRUFBSyxJQUFNOFYsR0FBZ0JwVyxHQUFjLFlBQ3pDb0wsRUFDSzNFLE1BQU0sT0FBUzZHLEdBQUdhLE1BQU1pRyxNQUFRLEVBQUssTUFDckMzTixNQUFNLE1BQVE2RyxHQUFHYSxNQUFNa0csTUFBUSxJQUFPLE1BQ3RDNU4sTUFBTSxVQUFXLEdBR3RCMkUsRUFBUTJDLE9BQU8sc0JBQ1Z1RyxLQUFLOEIsR0FBZ0JwVyxHQUFjLFdBQ3hDb0wsRUFBUTJDLE9BQU8sb0JBQ1Z1RyxLQUFLOEIsR0FBZ0JwVyxHQUFZLFNBQ3RDb0wsRUFBUTJDLE9BQU8sZ0JBQ1Z1RyxLQUFLOEIsR0FBZ0JwVyxHQUFRLEtBQ2xDb0wsRUFBUTJDLE9BQU8saUJBQ1Z1RyxLQUFLOEIsR0FBZ0JwVyxHQUFTLE1BQ25Db0wsRUFBUTJDLE9BQU8sbUJBQ1Z1RyxLQUFLOEIsR0FBZ0JwVyxHQUFXLFNLKzVCMUJxVyxDQUFnQi9WLEtBRW5CNE4sR0FBRyxXQUFZLEtBQ1o5QyxFQUNLb0osYUFDQUMsU0FBUyxLQUNUaE8sTUFBTSxVQUFXLEtBR3pCeUgsR0FBRyxRQUFVNU4sSUFDTm9DLEtBQUtxTixjQUFjdUcsU0FBU2hXLEVBQUssR0FDakNvQyxLQUFLcU4sY0FBZ0JyTixLQUFLcU4sY0FBY3JHLE9BQU85RyxHQUFRQSxJQUFTdEMsRUFBSyxHQUVyRW9DLEtBQUtxTixjQUFjek4sS0FBS2hDLEVBQUssR0FFNUJxTCxFQUFFLGdCQUNGc0YsU0FBUyxZQUdWdk8sS0FBS21MLFlBQ0xuTCxLQUFLeU8sVUFLakJpRSxFQUFXckgsT0FBTyxVQUNiZCxLQUFLLEtBQU8zTSxHQUNGQSxFQUFLLEVBQUUsSUFFakIyTSxLQUFLLEtBQU8zTSxJQUNEQSxFQUFLLEVBQUUsSUFFbEIyTSxLQUFLLElBQUtnSSxHQUdma0IsRUFBZ0JoSCxPQUFPLFlBQ2xCQSxPQUFPLGNBQ1BsQyxLQUFLLEtBQU8zTSxHQUNGLGdCQUFrQkEsRUFBSyxHQUVqQzJNLEtBQUssT0FBUSxHQUNiQSxLQUFLLE9BQVEsR0FDYkEsS0FBSyxjQUFlLElBQ3BCQSxLQUFLLGVBQWdCLElBQ3JCQSxLQUFLLFNBQVUsUUFDZmtDLE9BQU8sWUFDUGxDLEtBQUssSUFBSyx5QkFHZmtKLEVBQ0toSCxPQUFPLFFBQ1BsQyxLQUFLLFFBQVMsU0FDZEEsS0FBSyxhQUFlM00sR0FDVixxQkFBdUJBLEVBQUssRUFBSSxLQUkzQ3FMLEVBQUUsbUJBQ0RzSyxHQUFHLFlBRUpiLEVBQVdySCxPQUFPLFFBQ2JkLEtBQUssS0FBTzNNLEdBQ0ZBLEVBQUssRUFBRSxJQUVqQjJNLEtBQUssS0FBTzNNLElBQ0RBLEVBQUssRUFBRSxJQUVsQjJNLEtBQUssS0FBTzNNLEdBQ0RBLEVBQUssRUFBRSxHQUFLLEVBQUkyVSxHQUUzQmhJLEtBQUssS0FBTzNNLElBQ0FBLEVBQUssRUFBRSxJQUVuQjJNLEtBQUssWUFBYzNNLEdBQ1QsV0FBYUEsRUFBYSxVQUFJLElBQU1BLEVBQUssRUFBRSxHQUFLLEtBQU9BLEVBQUssRUFBRSxHQUFLLEtBSWxGcUwsRUFBRSxVQUFVRyxPQUloQnNKLEVBQVc1RCxPQUNOcEosU0FHRHVELEVBQUUscUJBQ0RzSyxHQUFHLFlBQWEsQ0FFakIsSUFBSU0sRUFBVzdULEtBQUswTSxLQUFLeUIsVUFBVSxrQkFDOUJ2TixLQUFLLENBQUN5SixHQUFVckssS0FBS21MLFdBQXdCLGNBR2xEMEksRUFDS3RKLEtBQUssSUFBTTNNLEdBQ0RBLEdBSWZpVyxFQUFTeEYsUUFDSjVCLE9BQU8sUUFDUGxDLEtBQUssUUFBUyxhQUNkQSxLQUFLLElBQU0zTSxHQUNEQSxRQUtmaVcsRUFBVzdULEtBQUswTSxLQUFLckIsT0FBTyxrQkFDdkJ6SyxLQUFLLElBT2QsR0FKQWlULEVBQVMvRSxPQUNKcEosU0FHb0IsVUFBckIxRixLQUFLOE0sWUFBeUIsQ0FFOUIsSUFBSThCLEVBQVc1TyxLQUFLNk8sbUJBQ3BCNkQsRUFDS1osYUFDQUMsU0FBUyxJQUNUaE8sTUFBTSxPQUFTbkcsR0FDTGdSLEVBQVNoUixFQUFFb0MsS0FBSzhNLGVBRTFCdkMsS0FBSyxTQUFXM00sR0FDTmdSLEVBQVNoUixFQUFFb0MsS0FBSzhNLG9CQUkvQjRGLEVBQ0szTyxNQUFNLE9BQVEsUUFDZHdHLEtBQUssU0FBVSxRQUVmdEIsRUFBRTJILGNBQWMvSCxJQUNqQjdLLE9BQU9xSCxLQUFLd0QsR0FBZXZELFNBQVEsU0FBU3pHLEdBQ3hDK0wsR0FDS1MsT0FBTyxXQUFheE0sR0FDcEJrRixNQUFNLE9BQVE4RSxFQUFjaEssSUFDNUIwTCxLQUFLLFNBQVUxQixFQUFjaEssT0FNMUNtQixLQUFLcU4sY0FBYzlMLFFBQ25CbVIsRUFDSzNPLE1BQU0sVUFBWW5HLEdBQ1hvQyxLQUFLcU4sY0FBY3VHLFNBQVNoVyxFQUFLLEdBQzFCLEVBRUEsS0FHZnFMLEVBQUUsa0NBQ0RzSyxHQUFHLGVBQ0p0SyxFQUFFLGtDQUNHRSxLQUFLLFlBQVksR0FDdEJGLEVBQUUsNEJBQ0dFLEtBQUssWUFBWSxJQUd0QixtQkFDQSx5QkFBZW5KLEtBQUtzTixhQUFhLEdBQU0sRUFBR3ROLEtBQUtxTixpQkFHOUNwRSxFQUFFLGtDQUNGc0ssR0FBRyxlQUNKdEssRUFBRSxrQ0FDR0UsS0FBSyxZQUFZLEdBQ3RCRixFQUFFLDRCQUNHRSxLQUFLLFlBQVksSUFHMUJ1SixFQUNLM08sTUFBTSxVQUFXLElBSTFCNkcsR0FBR1MsT0FBTyxhQUNMZCxLQUFLLEtBQU0sSUFDSixhQUFjRixHQUFVLEdBQ2pCQSxHQUFVckssS0FBS21MLFdBQXFCLFNBQUUsR0FFdEMsR0FHZFosS0FBSyxLQUFNLElBQ0osYUFBY0YsR0FBVSxJQUNoQkEsR0FBVXJLLEtBQUttTCxXQUFxQixTQUFFLEdBRXZDLEdBR2ZsQyxFQUFFLG1CQUFtQnNLLEdBQUcsYUFDeEJsSixHQUFVckssS0FBS21MLFdBQVcySSxVQUMxQjdLLEVBQUUsa0JBQWtCc0ssR0FBRyxhQUN2QjNJLEdBQUdTLE9BQU8sa0JBQ0wwSSxRQUFRLFVBQVUsR0FFdkJuSixHQUFHUyxPQUFPLGtCQUNMZCxLQUFLLEtBQU0sSUFDREYsR0FBVXJLLEtBQUttTCxXQUFxQixTQUFFLElBRWhEWixLQUFLLEtBQU0sS0FDQUYsR0FBVXJLLEtBQUttTCxXQUFxQixTQUFFLElBRWpEWixLQUFLLEtBQU0sSUFDQUYsR0FBVXJLLEtBQUttTCxXQUFxQixTQUFFLEdBQUssRUFBSW9ILEdBRTFEaEksS0FBSyxLQUFNLEtBQ0FGLEdBQVVySyxLQUFLbUwsV0FBcUIsU0FBRSxJQUVqRFosS0FBSyxZQUFhLElBQ1IsV0FBYUYsR0FBVXJLLEtBQUttTCxXQUFzQixVQUFJLElBQU1kLEdBQVVySyxLQUFLbUwsV0FBcUIsU0FBRSxHQUFLLEtBQU9kLEdBQVVySyxLQUFLbUwsV0FBcUIsU0FBRSxHQUFLLE1BSXhLUCxHQUFHUyxPQUFPLGtCQUNMZCxLQUFLLFFBQVMsV0FJSSxJQUF2QnZLLEtBQUtvTixlQUNMeEMsR0FBR3VELFVBQVUsV0FBYW5PLEtBQUtvTixjQUMxQjJHLFFBQVEsVUFBVSxHQUN2Qi9ULEtBQUtvTixhQUFlL0MsR0FBVXJLLEtBQUttTCxXQUFtQixPQUN0RFAsR0FBR3VELFVBQVUsV0FBYW5PLEtBQUtvTixjQUMxQjJHLFFBQVEsVUFBVSxJQUkzQi9ULEtBQUttTCxZQUVMbkwsS0FBS2dVLGtCQUlEaFUsS0FBS21MLFdBQWFkLEdBQVU5SSxRQUU1QnZCLEtBQUttTCxVQUFZLEVBQ2pCbkwsS0FBS3lPLFFBQ0V6TyxLQUFLOEksYUFJWjlJLEtBQUt5TyxRQUdiNkQsR0FJUixjQUtJckosRUFBRSxnQkFBZ0JrQixNQUFNLE1BQ3lCLElBQXpDbEIsRUFBRSxnQkFBZ0JzRixTQUFTLFdBQzNCdk8sS0FBSzhJLGFBQWMsRUFDbkJHLEVBQUUsY0FBY0csT0FDaEJILEVBQUUsYUFBYUksU0FFZnJKLEtBQUs4SSxhQUFjLEVBQ25CRyxFQUFFLGFBQWFHLE9BQ2ZILEVBQUUsY0FBY0ksT0FDaEJySixLQUFLaVUsYUFBYXhMLEVBQU9BLE9BQU8sVUFDaENRLEVBQUUsVUFBVXZELFlBUXBCdUQsRUFBRSxzQkFBc0JrQixNQUFNLE1BQ21CLElBQXpDbEIsRUFBRSxnQkFBZ0JzRixTQUFTLFlBQzNCdk8sS0FBSzhJLGFBQWMsR0FFdkJHLEVBQUUsZ0JBQWdCQyxZQUFZLFVBQzlCbEosS0FBS3lPLFNBTVR4RixFQUFFLG9CQUFvQmtCLE1BQU0sS0FHeEJuSyxLQUFLOEksYUFBYyxFQUNuQkcsRUFBRSxnQkFBZ0JDLFlBQVksVUFDekJELEVBQUUsb0JBQW9Cc0YsU0FBUyxVQWlEaEN0RixFQUFFLFVBQVV2RCxVQS9DWjFGLEtBQUt3TixNQUFRNUMsR0FBRzRDLFFBQ1hDLE9BQU8sQ0FDSixDQUFDLEVBQUcsR0FDSixDQUFDek4sS0FBSzRMLFVBQVc1TCxLQUFLZ00sY0FFekJSLEdBQUcsTUFBTyxLQUdKLElBQUkwSSxFQUFPdEosR0FBR2EsTUFBTVosVUFDcEI3SyxLQUFLcU4sY0FBZ0IsR0FJckJyTixLQUFLc04sYUFBYXJOLElBQUtrVSxJQUNyQixJQUFJQyxFQUFRLENBQUNELEVBQVUsRUFBRSxHQUFJQSxFQUFVLEVBQUUsSUFFcENELEVBQUssR0FBRyxJQUFNRSxFQUFNLElBQVFBLEVBQU0sSUFBTUYsRUFBSyxHQUFHLElBQ2hEQSxFQUFLLEdBQUcsSUFBTUUsRUFBTSxJQUFRQSxFQUFNLElBQU1GLEVBQUssR0FBRyxJQUVqRGxVLEtBQUtxTixjQUFjek4sS0FBS3VVLEVBQVUsS0FRbkNsTCxFQUFFLGdCQUNGc0YsU0FBUyxVQU1kdEYsRUFBRSxvQkFDR0MsWUFBWSxVQUVqQkQsRUFBRSxVQUNHdkQsV0FHaEJrRixHQUFHUyxPQUFPLGlCQUNMb0IsT0FBTyxLQUNQbEMsS0FBSyxRQUFTLFNBQ2Q5TSxLQUFLdUMsS0FBS3dOLFVBVXZCdkUsRUFBRSxrQ0FBa0NrQixNQUFNLEtBQ2pDbEIsRUFBRSxrQ0FBa0NzSyxHQUFHLGVBQ3hDdEssRUFBRSxrQ0FBa0NFLEtBQUssWUFBWSxHQUNyRG5KLEtBQUsrTyxpQkFBaUIsSUFFdEJzRixtQkFDQXBMLEVBQUUsNEJBQTRCRSxLQUFLLFlBQVksR0FBTUQsWUFBWSxVQUU1REQsRUFBRSxnQkFBZ0JzRixTQUFTLFlBSTVCdk8sS0FBS3dPLGVBQ0x4TyxLQUFLeU8sV0FRakJ4RixFQUFFLDRCQUE0QmtCLE1BQU0sTUFDeUIsSUFBckRsQixFQUFFLDRCQUE0QnNGLFNBQVMsVUFDdkMrRixvQkFBbUIsR0FFbkJBLG9CQUFtQixLQU8zQnJMLEVBQUUsK0JBQStCa0IsTUFBTSxLQUM5QmxCLEVBQUUsK0JBQStCc0YsU0FBUyxZQUMzQytGLG9CQUFtQixHQUNuQkMsa0JBR0F0TCxFQUFFLCtCQUErQkUsS0FBSyxZQUFZLEdBQ2xERixFQUFFLCtCQUErQkMsWUFBWSxVQUM3Q0QsRUFBRSw0QkFBNEJDLFlBQVksYUFPbERELEVBQUUscUJBQXFCdUwsT0FBTyxLQUMxQixJQUFJeEgsRUFBUS9ELEVBQUUsZ0RBQWdEb0csTUFDOURwRyxFQUFFLGlCQUFpQnJGLElBQUksbUJBQW9Cb0osS0FNL0MvRCxFQUFFLGNBQWN1QyxHQUFHLFNBQVUsS0FDckJ4TCxLQUFLeVUsU0FDTHhMLEVBQUUsc0JBQXNCSSxPQUN4QkosRUFBRSxzQkFBc0JJLFNBRXhCSixFQUFFLHNCQUFzQkcsT0FDeEJILEVBQUUsc0JBQXNCRyxVQVFoQ0gsRUFBRSxjQUFjdUMsR0FBRyxTQUFVLEtBQ3JCeEwsS0FBS3lVLFFBQ0x4TCxFQUFFLHlCQUF5QkksT0FFM0JKLEVBQUUseUJBQXlCRyxTQU9uQ0gsRUFBRSx1QkFBdUJ1QyxHQUFHLFNBQVUsS0FDOUJ4TCxLQUFLeVUsUUFDTEMsc0JBQXFCLEdBRXJCQSxzQkFBcUIsS0FPN0J6TCxFQUFFLDZCQUE2Qm9HLElBQUksR0FDbkNwRyxFQUFFLDZCQUE2QnVDLEdBQUcsU0FBVSxLQUN4QyxJQUFJNkQsRUFBTXBHLEVBQUVqSixNQUFNcVAsTUFDZHBHLEVBQUUwTCxVQUFVdEYsSUFBUUEsRUFBTSxFQUMxQnVGLDBCQUEwQnZGLEdBRTFCcEcsRUFBRWpKLE1BQU1xUCxJQUFJLEtBT3BCcEcsRUFBRSxpQ0FBaUN1QyxHQUFHLFNBQVUsS0FDNUN4TCxLQUFLK00sV0FBaUIsS0FBSTlELEVBQUUsd0NBQXlDLDJCQUEyQm9HLE1BQzNGcEcsRUFBRSxnQkFBZ0JzRixTQUFTLFlBRzVCdk8sS0FBS3dPLGVBQ0x4TyxLQUFLeU8sVUFJakIsZUFLSXhGLEVBQUUsbUJBQW1Ca0IsTUFBTSxLQUNuQmxCLEVBQUUsbUJBQW1Cc0ssR0FBRyxhQUNsQixjQUFlaEcsRUFBUSxLQUN6QnZFLElBRUE2TCxFQUFrQixjQUV0QjVMLEVBQUUsVUFBVUksUUFFWkosRUFBRSxVQUFVRyxPQUVYSCxFQUFFLGdCQUFnQnNGLFNBQVMsV0FHNUJ2TyxLQUFLd08saUJBUWJ2RixFQUFFLGdCQUFnQmtCLE1BQU0sS0FDaEJsQixFQUFFLGdCQUFnQnNLLEdBQUcsYUFFZixXQUFZbEosR0FBVSxJQUN4QnlLLEVBQXVCLFVBRzNCOVUsS0FBSytVLGdCQUFnQjFLLEdBQVVySyxLQUFLbUwsV0FBbUIsUUFFdkRQLEdBQUd1RCxVQUFVLFdBQWFuTyxLQUFLb04sY0FDMUIyRyxRQUFRLFVBQVUsS0FHdkJuSixHQUFHdUQsVUFBVSxXQUFhbk8sS0FBS29OLGNBQzFCMkcsUUFBUSxVQUFVLEdBQ3ZCL1QsS0FBSytVLGlCQUFpQixNQU85QjlMLEVBQUUsa0JBQWtCa0IsTUFBTSxLQUNsQmxCLEVBQUUsa0JBQWtCc0ssR0FBRyxhQUNqQixhQUFjbEosR0FBVSxJQUMxQnlLLEVBQXVCLFlBRzNCN0wsRUFBRSxlQUFlSSxRQUdqQkosRUFBRSxlQUFlRyxTQVF6QkgsRUFBRSxxQkFBcUJrQixNQUFNLEtBQ3JCbEIsRUFBRSxxQkFBcUJzSyxHQUFHLGNBQ3BCLFNBQVVsSixHQUFVLElBQ3RCeUssRUFBdUIsa0JBVW5DN0wsRUFBRSx1QkFBdUJrQixNQUFNLEtBQ3ZCbEIsRUFBRSx1QkFBdUJzSyxHQUFHLGNBQ3RCLGtCQUFtQmxKLEdBQVUsSUFFL0J5SyxFQUF1QixpQkFJdEI3TCxFQUFFLGdCQUFnQnNGLFNBQVMsV0FHNUJ2TyxLQUFLd08sa0JBWWpCdkYsRUFBRSxpQkFBaUJrQixNQUFNLEtBQ2pCbEIsRUFBRSxpQkFBaUJzSyxHQUFHLGNBQ2hCLFlBQWFsSixHQUFVLElBRXpCeUssRUFBdUIsV0FJdEI3TCxFQUFFLGdCQUFnQnNGLFNBQVMsV0FJNUJ2TyxLQUFLd08sa0JBU3JCLGVBS0l2RixFQUFFLGVBQWVrQixNQUFNLEtBQ25CbEIsRUFBRSxpQkFBaUJHLE9BQ2RnQixLQUFLLGtCQUFrQmpCLEtBQUssV0FBVyxHQUFNZ0IsUUFDOUNsQixFQUFFLGVBQWVzSyxHQUFHLGFBRWQsVUFBV2hHLEVBQVEsS0FDckJ2RSxJQUVBNkwsRUFBa0IsVUFHdEI1TCxFQUFFLHVCQUF1QkksT0FDekJKLEVBQUUsc0JBQXNCRSxLQUFLLFdBQVcsR0FDeENGLEVBQUUsMkJBQTJCRSxLQUFLLFdBQVcsR0FDN0NGLEVBQUUsd0JBQXdCRSxLQUFLLFdBQVcsR0FDMUNuSixLQUFLZ1YsZUFBZSxXQUVwQi9MLEVBQUUsdUJBQXVCRyxPQUN6QnBKLEtBQUtnVixlQUFlLFVBR3hCcEssR0FBR3VELFVBQVUsa0JBQWtCekksU0FDL0IxRixLQUFLc08sZUFFQXJGLEVBQUUsZ0JBQWdCc0YsU0FBUyxXQUc1QnZPLEtBQUt3TyxpQkFRYnZGLEVBQUUsc0JBQXNCa0IsTUFBTSxLQUMxQmxCLEVBQUUsaUJBQWlCRyxPQUNkZ0IsS0FBSyxrQkFBa0JqQixLQUFLLFdBQVcsR0FBTWdCLFFBQzlDbEIsRUFBRSxzQkFBc0JzSyxHQUFHLGFBRXJCLGlCQUFrQmhHLEVBQVEsS0FDNUJ2RSxJQUVBNkwsRUFBa0IsaUJBRXRCNUwsRUFBRSw4QkFBOEJJLE9BQ2hDSixFQUFFLGVBQWVFLEtBQUssV0FBVyxHQUNqQ0YsRUFBRSwyQkFBMkJFLEtBQUssV0FBVyxHQUM3Q0YsRUFBRSx3QkFBd0JFLEtBQUssV0FBVyxHQUMxQ25KLEtBQUtnVixlQUFlLGtCQUVwQi9MLEVBQUUsOEJBQThCRyxPQUNoQ3BKLEtBQUtnVixlQUFlLFVBRXhCL0wsRUFBRSx3QkFBd0JrQixRQUUxQlMsR0FBR3VELFVBQVUsa0JBQWtCekksU0FDL0IxRixLQUFLc08sZUFFQXJGLEVBQUUsZ0JBQWdCc0YsU0FBUyxXQUc1QnZPLEtBQUt3TyxpQkFRYnZGLEVBQUUsMkJBQTJCa0IsTUFBTSxLQUMvQmxCLEVBQUUsaUJBQWlCRyxPQUNkZ0IsS0FBSyxrQkFBa0JqQixLQUFLLFdBQVcsR0FBTWdCLFFBQzlDbEIsRUFBRSwyQkFBMkJzSyxHQUFHLGFBRzFCLHNCQUF1QmhHLEVBQVEsS0FDakN2RSxJQUVBNkwsRUFBa0Isc0JBR3RCNUwsRUFBRSxtQ0FBbUNJLE9BQ3JDSixFQUFFLGVBQWVFLEtBQUssV0FBVyxHQUNqQ0YsRUFBRSxzQkFBc0JFLEtBQUssV0FBVyxHQUN4Q0YsRUFBRSx3QkFBd0JFLEtBQUssV0FBVyxHQUMxQ25KLEtBQUtnVixlQUFlLHVCQUdwQi9MLEVBQUUsbUNBQW1DRyxPQUNyQ3BKLEtBQUtnVixlQUFlLFVBR3hCL0wsRUFBRSx3QkFBd0JrQixRQUcxQlMsR0FBR3VELFVBQVUsa0JBQWtCekksU0FDL0IxRixLQUFLc08sZUFFQXJGLEVBQUUsZ0JBQWdCc0YsU0FBUyxXQUc1QnZPLEtBQUt3TyxpQkFRYnZGLEVBQUUsd0JBQXdCa0IsTUFBTSxLQUM1QmxCLEVBQUUsaUJBQWlCRyxPQUNkZ0IsS0FBSyxrQkFBa0JqQixLQUFLLFdBQVcsR0FBTWdCLFFBQzlDbEIsRUFBRSx3QkFBd0JzSyxHQUFHLGFBRXZCLHdCQUF5QmhHLEVBQVEsS0FDbkN2RSxJQUVBNkwsRUFBa0IsbUJBRXRCNUwsRUFBRSxnQ0FBZ0NJLE9BQ2xDSixFQUFFLGVBQWVFLEtBQUssV0FBVyxHQUNqQ0YsRUFBRSxzQkFBc0JFLEtBQUssV0FBVyxHQUN4Q0YsRUFBRSwyQkFBMkJFLEtBQUssV0FBVyxHQUM3QzZMLEVBQWUsbUJBRWZBLEVBQWUsU0FFbkIvTCxFQUFFLHdCQUF3QmtCLFFBRTFCUyxHQUFHdUQsVUFBVSxrQkFBa0J6SSxTQUMvQjFGLEtBQUtzTyxlQUVBckYsRUFBRSxnQkFBZ0JzRixTQUFTLFlBRzVCdk8sS0FBS3dPLGVBQ0x4TyxLQUFLeU8sVUFLakIsZUFJSXhGLEVBQUUsOENBQThDa0IsT0FBTSxXQUNsRCxJQUFJM0ksRUFBS3lILEVBQUVqSixNQUFNdUssS0FBSyxTQUNsQjBLLEVBQVdoTSxFQUFFakosTUFBTTRELElBQUksb0JBRTNCcUYsRUFBRSxpQkFBbUJ6SCxFQUFLLGFBQ3JCb0MsSUFBSSxtQkFBb0JxUixHQUVaLHVCQUFiQSxFQUNJcE0sRUFBY3JILFdBQ1BxSCxFQUFjckgsR0FHekJxSCxFQUFjckgsR0FBTXlULEtBTzVCaE0sRUFBRSwwQkFBMEJ1TCxRQUFPLFdBRS9CVSwwQkFFQSxJQUFJM1csRUFBUTBLLEVBQUVqSixNQUFNdUssS0FBSyxTQUNyQnNELEVBQU0sR0FHVixHQUFjLFFBQVZ0UCxFQUFpQixDQUNqQjBLLEVBQUUsaUJBQWlCa00sTUFBTSxVQUV6QixJQUFLLElBQUk3WCxFQUFJLEVBQUdBLEVBQUlvVyxHQUFnQm5TLE9BQVFqRSxJQUN4Q3VRLEVBQUlqTyxLQUFLOFQsR0FBZ0JwVyxHQUFHaUIsR0FBTzZXLGVBR3ZDdkgsRUFBTXdILE1BQU1DLEtBQUssSUFBSUMsSUFBSTFILElBQ3pCLElBQUkySCxFQUFTLENBQUMsVUFBVyxXQUV6QixJQUFLLElBQUlsWSxFQUFJLEVBQUdBLEVBQUlvVyxHQUFnQm5TLE9BQVFqRSxJQUN4QyxJQUFLLElBQUkrRixFQUFJLEVBQUdBLEVBQUl3SyxFQUFJdE0sT0FBUThCLElBQ3hCcVEsR0FBZ0JwVyxHQUFHaUIsR0FBTzZXLGdCQUFrQnZILEVBQUl4SyxLQUVoRHdGLEVBQWM2SyxHQUFnQnBXLEdBQWMsV0FBS2tZLEVBQU9uUyxJQUlwRTRGLEVBQUUsbUJBQW1CRyxXQUNsQixDQUNISCxFQUFFLG1CQUFtQkksT0FJckIsSUFBSyxJQUFJL0wsRUFBSSxFQUFHQSxFQUFJb1csR0FBZ0JuUyxPQUFRakUsSUFDeEN1USxFQUFJak8sS0FBSzhULEdBQWdCcFcsR0FBR2lCLElBRWhDLElBQUlrWCxFQUFRN0ssR0FBRzhLLFNBQVM3SCxFQUFLLEtBQ3pCOEgsRUFBUS9LLEdBQUc4SyxTQUFTN0gsRUFBSyxLQUM3QjVFLEVBQUUsV0FBV29HLElBQUlvRyxHQUNqQnhNLEVBQUUsV0FBV29HLElBQUlzRyxHQUVqQkMsb0JBUVIzTSxFQUFFLDBCQUEwQmtCLE9BQU0sV0FDOUIsSUFBSTBMLEVBQU01TSxFQUFFakosTUFDUjhWLEVBQVdELEVBQUlFLFFBQVEsbUJBQW1CM0wsS0FBSyxTQUFTaUYsTUFBTS9HLE9BQzlEME4sRUFBUyxFQUdUQSxFQUR3QixNQUF4QkgsRUFBSXRMLEtBQUssWUFDQTBMLFdBQVdILEdBQVksR0FFNUJBLEVBQVcsRUFDRkcsV0FBV0gsR0FBWSxHQUV2QixFQUdqQkUsRUFBU2xNLEtBQUtvTSxNQUFlLElBQVRGLEdBQWdCLElBQ3BDSCxFQUFJRSxRQUFRLG1CQUFtQjNMLEtBQUssU0FBU2lGLElBQUkyRyxHQUVqREosbUJBTUozTSxFQUFFLHlCQUF5QnVDLEdBQUcsU0FBUyxXQUNuQ29LLG1CQU9KM00sRUFBRSxtQkFBbUJrQixPQUFNLFdBQ3ZCbEIsRUFBRSxtQkFBbUJHLE9BQ3JCOEwsNkJBSVIsY0FFSWpNLEVBQUUsc0JBQXNCdUMsR0FBRyxTQUFVLEtBQ2pDcUYsUUFBUUMsSUFBSSxTQUNaLElBQUlxRixFQUFXbE4sRUFBRSxzQkFDakI0SCxRQUFRQyxJQUFJcUYsR0FDWixJQUFJM1UsRUFBSzJVLEVBQVM1TCxLQUFLLFFBQ25CMU0sRUFBT3NZLEVBQVM1TCxLQUFLLFFBQ3JCa0ssRUFBVTBCLEVBQVNoTixLQUFLLFdBRzVCLEdBRkEwSCxRQUFRQyxJQUFJMkQsR0FFUkEsR0FBV3hMLEVBQUUsb0JBQW9CMUgsT0FBUzZVLEVBRTFDcE4sSUFDQXFOLEVBQXdCN1UsR0FFeEI4VSxFQUFtQjlVLEVBQUkzRCxHQUN2Qm9MLEVBQUUsb0JBQXNCekgsR0FBSTJJLE1BQU0sS0FDaEMwRyxRQUFRQyxJQUFJLGtCQUNWLElBQUl5RixFQUFrQnROLEVBQUUsb0JBQXNCekgsR0FBSStJLEtBQUssTUFFdkR0QixFQUFFLG9CQUFvQjhCLEtBQUssQ0FBQ3pOLEVBQUdrWixLQUV2QnZOLEVBQUV1TixHQUFRak0sS0FBSyxRQUFVZ00sSUFBeUQsSUFBdEN0TixFQUFFdU4sR0FBUWpJLFNBQVMsZ0JBQy9EdEYsRUFBRXVOLEdBQVFqTixTQUFTLGVBQ25CTixFQUFFdU4sR0FBUXBNLEtBQUssYUFBYWhCLE9BQzVCSCxFQUFFdU4sR0FBUXBNLEtBQUssY0FBY2YsU0FLN0JKLEVBQUV1TixHQUFRdE4sWUFBWSxlQUN0QkQsRUFBRXVOLEdBQVFwTSxLQUFLLGFBQWFmLE9BQzVCSixFQUFFdU4sR0FBUXBNLEtBQUssY0FBY2hCLFVBS2pDSCxFQUFFLGdDQUFnQzFILFFBQ2xDMEgsRUFBRSxxQkFBcUJJLE9BQ3ZCd0gsUUFBUUMsSUFBSSxTQUNaOVEsS0FBS3dTLG1CQUVMdkosRUFBRSxxQkFBcUJHLE9BQ3ZCeUgsUUFBUUMsSUFBSSxVQUVoQjlRLEtBQUt3UyxpQkFDQXZKLEVBQUUsZ0JBQWdCc0YsU0FBUyxZQUM3QnNDLFFBQVFDLElBQUksU0FJWDlRLEtBQUt3TyxlQUNMeE8sS0FBS3lPLE9BQ0x6TyxLQUFLd1Msb0JBR2J2SixFQUFFLDJCQUEyQkksV0FVNUIsQ0FHRCxJQUFJb04sRUFBWXhOLEVBQUUsb0JBQXNCekgsR0FBSStNLFNBQVMsZUFDckRtSSxHQUFpQixHQUFJbFYsR0FFckJtVixFQUFzQm5WLEdBRXRCb0osR0FBR1MsT0FBTyxNQUFRN0osR0FBSWtFLFVBRUosSUFBZCtRLEdBQ0F4TixFQUFFLHFCQUFxQkcsT0FFVSxJQUFqQ0gsRUFBRSxvQkFBb0IxSCxRQUN0QjBILEVBQUUsMkJBQTJCRyxPQUtqQ0gsRUFBRSxvQkFBb0IxSCxRQUN0QjBILEVBQUUsaUJBQWlCQyxZQUFZLGFBQy9CRCxFQUFFLGlCQUFpQk0sU0FBUyxjQUU1Qk4sRUFBRSxpQkFBaUJDLFlBQVksWUFDL0JELEVBQUUsaUJBQWlCTSxTQUFTLGdCQU9wQ04sRUFBRSwrQkFBK0J1QyxHQUFHLFVBQVUsV0FFMUMsSUFBSTJLLEVBQVdsTixFQUFFakosTUFHakJpSixFQUFFLCtCQUErQkUsS0FBSyxXQUFXLEdBQ2pEZ04sRUFBU2hOLEtBQUssV0FBVyxHQUVyQmdOLEVBQVNoTixLQUFLLFdBRWR5TixvQkFBb0JULEVBQVM1TCxLQUFLLFNBRWxDcU0seUJBQW9CblgsTUFLaEMsY0FJRXdKLEVBQUUsK0JBQStCa0IsT0FBTSxXQUNuQzBHLFFBQVFDLElBQUksbUJBQ1osSUFBSStGLEVBQWE1TixFQUFFakosTUFBTXVLLEtBQUssUUFHOUJ0QixFQUFFLHdCQUF3QjZFLEtBQUs3RSxFQUFFakosTUFBTXVLLEtBQUssU0FFNUN2QixJQUNBOE4sRUFBZUQsR0FFZkUsRUFBZ0JGLEdBQ2hCNU4sRUFBRSxnQkFBZ0JrTSxNQUFNLGFBTTVCbE0sRUFBRSxtQkFBbUJrQixPQUFNLFdBQ3ZCNk0sR0FBZSxJQUNmQyxjQUFjLEdBRWRGLEdBQWlCLEdBQ2pCOU4sRUFBRSx3QkFBd0I2RSxLQUFLLE9BTW5DN0UsRUFBRSx5QkFBeUJrQixPQUFNLFdBQzdCLEdBQUtsQixFQUFFLHlCQUF5QnNGLFNBQVMsVUFLbEMsQ0FDSHRGLEVBQUUsb0JBQW9CSSxPQUN0QkosRUFBRSxtQkFBbUJJLE9BQ3JCNk4sZ0JBQWUsR0FDZixJQUFJQyxFQUFRbE8sRUFBRSxtQkFBbUJSLE9BQU8sU0FDeEN5SyxFQUFlaUUsR0FDZmxPLEVBQUUsa0JBQWtCb0csSUFBSThILFFBVnhCbE8sRUFBRSxvQkFBb0JHLE9BQ3RCSCxFQUFFLG1CQUFtQkcsT0FFckI4TixnQkFBZSxPQWlCckIsTUFBTSxVQUFvQixFQUMvQixZQUFZdFcsR0FDVndXLE1BQU14VyxHQUdOWixLQUFLcVgsa0JBR1Asa0JBSUksSUFBSUMsRUFBVzNLLFdBQWdCLElBQVksU0FBZSxZQUN0RDRLLEVBQVc1SyxXQUFnQixJQUFZLFNBQWUsWUFHMUQzTSxLQUFLNEwsVUFBMEMsTUFBN0IyTCxFQUFTLEdBQUtELEVBQVMsSUFDekN0WCxLQUFLZ00sV0FBMkMsTUFBN0J1TCxFQUFTLEdBQUtELEVBQVMsSUFFMUMsSUFBSTVMLEVBQUlkLEdBQUdtRCxjQUNOQyxPQUFPLENBQUNzSixFQUFTLEdBQUlDLEVBQVMsS0FDOUJ0SixNQUFNLENBQUNxSixFQUFTLEdBQUlDLEVBQVMsS0FFOUJwTCxFQUFRdkIsR0FBRzRNLFdBQVc5TCxHQUNyQitMLE1BQU0sSUFDTkMsU0FBUyxJQUNUQyxZQUFZLEdBRWI1TCxFQUFJbkIsR0FBR21ELGNBQ05DLE9BQU8sQ0FBQ3NKLEVBQVMsR0FBSUMsRUFBUyxLQUM5QnRKLE1BQU0sQ0FBQ3FKLEVBQVMsR0FBSUMsRUFBUyxLQUU5QmhMLEVBQVEzQixHQUFHZ04sVUFBVTdMLEdBQ3BCMEwsTUFBTSxHQUNOQyxTQUFTLElBQ1RDLFlBQVksR0FJYnJNLEVBQU9WLEdBQUdVLE9BQ1RDLFlBQVksQ0FBQyxFQUFHLElBQ2hCQyxHQUFHLE9BQVEsS0FHUlosR0FBR2EsTUFBTWpNLFVBQVVrTSxFQUFJNUIsS0FBSzZCLElBQUksRUFBRzNMLEtBQUs0TCxXQUFhaEIsR0FBR2EsTUFBTWpNLFVBQVVxTSxFQUFJLEdBQ3hFL0IsS0FBS2dDLElBQUk5TCxLQUFLNEwsV0FBYSxFQUFJaEIsR0FBR2EsTUFBTWpNLFVBQVVxTSxHQUFJakIsR0FBR2EsTUFBTWpNLFVBQVVrTSxJQUU3RWQsR0FBR2EsTUFBTWpNLFVBQVV1TSxFQUFJakMsS0FBSzZCLElBQUksRUFBRzNMLEtBQUtnTSxZQUFjcEIsR0FBR2EsTUFBTWpNLFVBQVVxTSxFQUFJLEdBQ3pFL0IsS0FBS2dDLElBQUk5TCxLQUFLZ00sWUFBYyxFQUFJcEIsR0FBR2EsTUFBTWpNLFVBQVVxTSxHQUFJakIsR0FBR2EsTUFBTWpNLFVBQVV1TSxJQUc5RS9MLEtBQUtpTSxVQUFVMUIsS0FBSyxZQUFhSyxHQUFHYSxNQUFNak0sV0FHMUMwTSxFQUFPek8sS0FBSzBPLEVBQU1DLE1BQU14QixHQUFHYSxNQUFNak0sVUFBVTZNLFNBQVNYLEtBQ3BEWSxFQUFPN08sS0FBSzhPLEVBQU1ILE1BQU14QixHQUFHYSxNQUFNak0sVUFBVWdOLFNBQVNULE9BSTVEL0wsS0FBS29MLGFBQWVSLEdBQUdTLE9BQU8sYUFDdkIwSSxRQUFRLGlCQUFpQixHQUV6QnRILE9BQU8sT0FDUGxDLEtBQUssc0JBQXVCLGlCQUM1QkEsS0FBSyxVQUFXLE9BQVN2SyxLQUFLNEwsVUFBWSxJQUFNNUwsS0FBS2dNLFlBRXJEK0gsUUFBUSxlQUFlLEdBQ3ZCeEosS0FBSyxLQUFNLGdCQUNYOU0sS0FBSzZOLEdBR1osSUFBSXVNLEVBQWEvTixLQUFLOEQsS0FBTTVOLEtBQUtnTSxXQUFhaE0sS0FBSzRMLFVBQWEsS0FDaEUzQyxFQUFFLGFBQWF3RCxPQUFPeEQsRUFBRSx5Q0FBMkM0TyxFQUFhLDRDQUVoRjdYLEtBQUtpTSxVQUFZak0sS0FBS29MLGFBQWFxQixPQUFPLFNBR3RDRSxXQUFXbUwsa0JBQ1g5WCxLQUFLaU0sVUFDQVEsT0FBTyxTQUNQbEMsS0FBSyxhQUFjLElBQU1vQyxXQUFXbUwsa0JBQ3BDdk4sS0FBSyxRQUFTLG9CQUNkQSxLQUFLLFNBQVV2SyxLQUFLZ00sWUFDcEJ6QixLQUFLLFFBQVN2SyxLQUFLNEwsV0FDbkJyQixLQUFLLElBQUssS0FDVkEsS0FBSyxJQUFLLEtBSW5CdkssS0FBSzBNLEtBQU8xTSxLQUFLaU0sVUFBVVEsT0FBTyxTQUM3QmxDLEtBQUssUUFBUyxRQUNkQSxLQUFLLFlBQWEsSUFHUixVQUZDb0MsV0FBV0MsWUFBYyxFQUFJLEdBRWYsS0FEZEQsV0FBV0UsWUFBYyxFQUFJLEdBQ0wsS0FJeEM3TSxLQUFLME0sS0FBS0QsT0FBTyxLQUNabEMsS0FBSyxLQUFNLGNBQ1hrQyxPQUFPLFVBQ1BsQyxLQUFLLFFBQVMsWUFDZEEsS0FBSyxJQUFLLEdBQ1ZBLEtBQUssS0FBTSxHQUNYQSxLQUFLLEtBQU0sR0FHaEJ2SyxLQUFLME0sS0FBS3JCLE9BQU8sZUFDWm9CLE9BQU8sWUFDUEEsT0FBTyxjQUNQbEMsS0FBSyxLQUFNLGtCQUNYQSxLQUFLLE9BQVEsR0FDYkEsS0FBSyxPQUFRLEdBQ2JBLEtBQUssY0FBZSxJQUNwQkEsS0FBSyxlQUFnQixJQUNyQkEsS0FBSyxTQUFVLFFBQ2ZrQyxPQUFPLFlBQ1BsQyxLQUFLLElBQUsseUJBR2Z2SyxLQUFLME0sS0FBS3JCLE9BQU8sZUFDWm9CLE9BQU8sUUFDUGxDLEtBQUssS0FBTSxpQkFDWEEsS0FBSyxhQUFjLHdCQUd4QnZLLEtBQUswTSxLQUFLRCxPQUFPLEtBQ1psQyxLQUFLLEtBQU0saUJBR2hCdkssS0FBSzBNLEtBQUtELE9BQU8sS0FDWmxDLEtBQUssS0FBTSxnQ0FHaEJ2SyxLQUFLME0sS0FBS0QsT0FBTyxLQUNabEMsS0FBSyxLQUFNLGdCQUdoQnZLLEtBQUtvTCxhQUFhcUIsT0FBTyxRQUNwQmxDLEtBQUssUUFBUyxjQUNkQSxLQUFLLElBQUssSUFDVkEsS0FBSyxJQUFLLElBQ1Z1RCxLQUFLLGlCQUdWLElBQUk1QixFQUFTbE0sS0FBS29MLGFBQWFxQixPQUFPLEtBQ2pDbEMsS0FBSyxRQUFTLFVBQ2Q5TSxLQUFLME8sR0FFTkcsRUFBU3RNLEtBQUtvTCxhQUFhcUIsT0FBTyxLQUNqQ2xDLEtBQUssUUFBUyxVQUNkOU0sS0FBSzhPLEdMdmtFWjdELEVBQVVrQyxHQUFHUyxPQUFPLGVBQ2Z0SCxNQUFNLE9BQVEsT0FDZEEsTUFBTSxNQUFPLE9BQ2J5SCxHQUFHLGFBQWEsV0FDYjlDLEVBQ0szRSxNQUFNLFVBQVcsTUFvQzNCLFdBRUgwRSxFQUFTUSxFQUFFLFdBQ05SLE9BQU8sQ0FDSmtELElBQUssRUFDTEcsSUFBS3pCLEdBQVU5SSxPQUNmd1csS0FBTSxHQUNOQyxNQUFPLFNBQVN2TSxFQUFPd00sU0FDbkIsR0FBaUJBLEVBQUcxWixPQUVmMEssRUFBRSxnQkFBZ0JzRixTQUFTLGlCQUU1QixRQUtoQnRGLEVBQUUsbUJBQ0dSLE9BQU8sQ0FDSndGLE1BQU8sTUFDUHRDLElBQUssRUFDTEcsSUFBSyxFQUNMaU0sS0FBTSxJQUNOeFosTUFBTyxHQUNQeVosTUFBTyxTQUFTdk0sRUFBT3dNLEdBQ25CLEVBQXVCQSxFQUFHMVosT0FDMUIwSyxFQUFFLGtCQUFrQm9HLElBQUk0SSxFQUFHMVosVUFJdkMwSyxFQUFFLGtCQUFrQm9HLElBQUksSUFHeEIsSUFBSXZELEVBQU1yRCxFQUFPQSxPQUFPLFNBQVUsT0FDOUJ5UCxFQUFRLElBQU1wTSxFQUVsQixJQUFLLElBQUl4TyxFQUFJLEVBQUdBLEVBQUl3TyxFQUFLeE8sR0FBUSxLQUM3QjJMLEVBQUUsd0NBQ0dyRixJQUFJLE9BQVNzVSxFQUFRNWEsRUFBSyxLQUMxQjZhLFNBQVMxUCxHSzIvRGhCMlAsR0FFQXBZLEtBQUtxWSxrQkFDTCxJRDk2RHdCakgsRUFBUUQsRUM4NkRoQixJQUFJbUgsRUFBVWpPLElBQzlCckssS0FBS3VZLGNBQ0x2WSxLQUFLd1ksZUFDTHhZLEtBQUt5WSxlQUNMelksS0FBSzBZLGVBQ0wxWSxLQUFLMlksY0FDTDNZLEtBQUs0WSxjQUVMNVksS0FBSzZZLGlCRHQ3RG1CekgsRUN3N0RWcFIsS0FBS2dNLFdEeDdEYW1GLEVDdzdERG5SLEtBQUs0TCxVRHY3RHRDM0MsR0FBRSxXQUNFQSxFQUFFLGFBQ0c2UCxVQUFVLENBQ1BDLFlBQWEsV0FFaEJDLFVBQVUsQ0FDUEMsYUFBYSxFQUNiQyxTQUFValEsRUFBRSxpQkFBaUJrSSxVQUVoQ0MsT0FBZ0IsR0FBVEEsR0FDUEQsTUFBYyxHQUFSQSxNQVNmbEksRUFBRSx3QkFBd0JFLEtBQUssV0FBVyxHQUUxQ0YsRUFBRSx1QkFDR0UsS0FBSyxXQUFXLEdBQ3JCRixFQUFFLGlCQUNHRSxLQUFLLFdBQVcsR0FDckJGLEVBQUUscUJBQ0dFLEtBQUssV0FBVyxHQUNyQkYsRUFBRSxzQ0FDR0UsS0FBSyxXQUFXLEdBRXJCRixFQUFFLFlBQ0dHLE9BRUxILEVBQUUsaUJBQWlCRyxPQUNuQkgsRUFBRSxhQUFhRyxPQUNmSCxFQUFFLG1CQUFtQkcsT0FDckJILEVBQUUsMkJBQTJCRyxPQUM3QkgsRUFBRSxlQUFlRyxPQUVqQkgsRUFBRSx1REFDR0UsS0FBSyxXQUFXLEdDazVEbkJuSixLQUFLeU8sT0FFVCxnQkFBZ0JsUSxHQUNaeUIsS0FBS29OLGFBQWU3TyxFQUV4QixpQkFDRXNTLFFBQVFDLElBQUksVUFFVixJQUtJeEYsRUFBT1YsR0FBR1UsT0FDVEMsWUFBWSxDQUFDLEVBQUcsS0FDaEJDLEdBQUcsUUFBUSxXQUVSWixHQUFHYSxNQUFNak0sVUFBVWtNLEVBQUk1QixLQUFLNkIsSUFBSSxFQVI1QixLQVF3Q2YsR0FBR2EsTUFBTWpNLFVBQVVxTSxFQUFJLEdBQy9EL0IsS0FBS2dDLElBVEwsS0FTa0IsRUFBSWxCLEdBQUdhLE1BQU1qTSxVQUFVcU0sR0FBSWpCLEdBQUdhLE1BQU1qTSxVQUFVa00sSUFFcEVkLEdBQUdhLE1BQU1qTSxVQUFVdU0sRUFBSWpDLEtBQUs2QixJQUFJLEVBVjNCLEtBVXdDZixHQUFHYSxNQUFNak0sVUFBVXFNLEVBQUksR0FDaEUvQixLQUFLZ0MsSUFYSixLQVdrQixFQUFJbEIsR0FBR2EsTUFBTWpNLFVBQVVxTSxHQUFJakIsR0FBR2EsTUFBTWpNLFVBQVV1TSxJQUdyRS9MLEtBQUtpTSxVQUFVMUIsS0FBSyxZQUFhSyxHQUFHYSxNQUFNak0sY0FJOUMyWixFQUFNdk8sR0FBR1MsT0FBTyxxQkFDZjBJLFFBQVEsNEJBQTRCLEdBQ3BDdEgsT0FBTyxPQUNQbEMsS0FBSyxzQkFBdUIsaUJBQzVCQSxLQUFLLFVBQVcsaUJBRWhCd0osUUFBUSwwQkFBMEIsR0FDbEN0VyxLQUFLNk4sR0FFVjhOLElBR0FwWixLQUFLaU0sVUFBWWtOLEVBQUkxTSxPQUFPLEtBQ3ZCbEMsS0FBSyxZQUFhLG9CQUNsQmtDLE9BQU8sU0FHWixJQThCSWdGLEVBOUJVN0csR0FBR2dGLE9BQ1pDLEtBQUssQ0FBQyxLQUF3QixPQUduQzdQLEtBQUswTixZQUFjOUMsR0FBR1MsT0FBTyxTQUk3QnBDLEVBQUUsa0NBQ0dSLE9BQU8sQ0FDSndGLE1BQU8sTUFDUHRDLElBQUssRUFDTEcsSUFBSyxFQUNMaU0sS0FBTSxFQUNOeFosTUFBT3lCLEtBQUsyTixnQkFBb0IsR0FDaENxSyxNQUFPLFNBQVN2TSxFQUFPd00sR0FFbkJvQixFQURTcFEsRUFBRSxnQ0FBZ0NzQixLQUFLLFFBQzFCME4sRUFBRzFaLE9BQ3pCK2EsbUJBR0tyUSxFQUFFLGdCQUFnQnNGLFNBQVMsWUFHNUJ2TyxLQUFLd08sZUFDTHhPLEtBQUt5TyxXQU9yQmdELEVBQWE3RyxHQUFHUyxPQUFPLHVCQUNsQnRILE1BQU0sT0FBUSxPQUNkQSxNQUFNLE1BQU8sT0FDYnlILEdBQUcsYUFBYSxXQUNiaUcsRUFDSzFOLE1BQU0sVUFBVyxNQUc5QixJQUFJa0osRUFBcUMsSUFBdkJtSixFQUdsQnBXLEtBQUttTixVQUFZdkMsR0FBR1MsT0FBTyx5QkFDdEJvQixPQUFPLE9BQ1BsQyxLQUFLLEtBQU0sb0JBQ1hBLEtBQUssUUFBUzBDLEdBQ2QxQyxLQUFLLFNBTlMsSUFTbkJ2SyxLQUFLME4sWUFBWWpCLE9BQU8sUUFDbkJBLE9BQU8sZUFDUGxDLEtBQUssS0FBTSxXQUNYQSxLQUFLLGVBQWdCLGtCQUNyQkEsS0FBSyxRQUFTLE1BQ2RBLEtBQUssU0FBVSxLQUNmQSxLQUFLLG1CQUFvQixjQUN6QmtDLE9BQU8sUUFDUGxDLEtBQUssUUFBUyxHQUNkQSxLQUFLLFNBQVUsSUFDZkEsS0FBSyxZQUFhLGtCQUNsQnhHLE1BQU0sT0FBUSxZQXN1QnpCLE1BQU13VixVQUFjLEVBRWhCLFlBQVkzWSxHQUNad1csUUFFQXBYLEtBQUtxSyxVQUFZekosRUFDakJaLEtBQUt3WixlQUFpQnhiLE9BQU9xSCxLQUFLckYsS0FBS3FLLFVBQVUsSUFDakRySyxLQUFLeVosZUFBaUIsSUFDdEJ6WixLQUFLMFosZ0JBQWtCLENBQUMsbUJBQW9CLG1CQUFvQixjQUFlLG1CQUFvQixxQkFXaEcsTUFBTXBCLFVBQWtCaUIsRUFDM0IsWUFBWTNZLEdBQ1p3VyxNQUFNeFcsR0FDTlosS0FBSzJaLFlBSUwsWUFFRXpPLEVBQVFwQixLQUFLOEQsS0FBSzVOLEtBQUtxSyxVQUFVOUksT0FBU3ZCLEtBQUt5WixnQkFHL0MsSUFDSXZJLEVBR1EsSUFIUkEsRUFJTSxHQUlOc0ksRUFBaUJ4WixLQUFLd1osZUFFdEIxUyxFQUFRMFMsRUFBZTNVLFFBQVEsUUFDbkMyVSxFQUFlMVUsT0FBT2dDLEVBQU8sR0FFN0IsSUFBSThTLEVBQWdCLEdBRXBCLEdBQUk1WixLQUFLcUssVUFBVTlJLE9BQVN2QixLQUFLeVosZUFBZ0IsQ0FFN0MsSUFBSTVMLEVBQU0sSUFBSXdILE1BQU1tRSxFQUFlalksUUFBUXNZLEtBQUssR0FFaEQsSUFBSyxJQUFJdmMsRUFBSSxFQUFHQSxFQUFJMEMsS0FBS3FLLFVBQVU5SSxPQUFRakUsSUFBSyxDQUU1QyxJQUFLLElBQUkrRixFQUFJLEVBQUdBLEVBQUltVyxFQUFlalksT0FBUThCLElBQ3ZDd0ssRUFBSXhLLElBQU1yRCxLQUFLcUssVUFBVS9NLEdBQUdrYyxFQUFlblcsSUFHL0MsR0FBSS9GLEVBQUk0TixHQUFVLEVBQUcsQ0FDakIsSUFBSTRPLEVBQWEsQ0FDYixLQUFReGMsRUFBSTROLEdBR2hCLElBQUssSUFBSTdILEVBQUksRUFBR0EsRUFBSW1XLEVBQWVqWSxPQUFROEIsSUFDdkN3SyxFQUFJeEssR0FBS3dLLEVBQUl4SyxHQUFLNkgsRUFDbEI0TyxFQUFXTixFQUFlblcsSUFBTXdLLEVBQUl4SyxHQUd4Q3VXLEVBQWNoYSxLQUFLa2EsR0FDbkJqTSxFQUFNLElBQUl3SCxNQUFNbUUsRUFBZWpZLFFBQVFzWSxLQUFLLFVBSXBERCxFQUFnQjVaLEtBQUtxSyxVQUd6QlcsRUFBZUosR0FBR21ELGNBQ2JDLE9BQU8sQ0FBQyxFQUFHNEwsRUFBY3JZLFNBQ3pCME0sTUFBTSxDQUFDLEVBQUdqTyxLQUFLeVosaUJBSXBCLEVBQUk3TyxHQUFHbUQsY0FDRkMsT0FBTyxDQUFDLEVBQUc0TCxFQUFjclksU0FDekIwTSxNQUFNLENBQUMsRUFBR2pPLEtBQUt5WixpQkFDcEIsSUFBSU0sRUFBS25QLEdBQUdtRCxjQUNQQyxPQUFPLENBQUMsRUFBRzRMLEVBQWNyWSxTQUN6QjBNLE1BQU0sQ0FBQyxFQUFHak8sS0FBS3laLGlCQUVoQnROLEVBQVF2QixHQUFHNE0sV0FBVyxHQUNyQkMsTUFBTSxJQUNOQyxTQUFTLElBQ1RDLFlBQVksR0FDWnFDLFlBQVcsU0FBU3BjLEdBQ2pCLE9BQU9rTSxLQUFLQyxNQUFPbk0sRUFBSXNOLEVBQVMsTUFBUSxHQUFLLElBQU1wQixLQUFLQyxNQUFPbk0sRUFBSXNOLEVBQVN5QixXQUFnQixLQUFLLEdBQUssS0FBUS9PLEVBQUlzTixFQUFTeUIsV0FBZ0IsT0FJbkosRUFBSS9CLEdBQUdtRCxjQUNGQyxPQUFPLENBQUMsRUFBRyxNQUNYQyxNQUFNLENBcEVXLElBb0VPLElBRTdCLElBQUkxQixFQUFRM0IsR0FBR3FQLFNBQVMsR0FDbkJ4QyxNQUFNLEdBQ05DLFNBQVMsSUFDVEMsWUFBWSxHQUVidUMsRUFBVSxLQUVWLElBQUlDLEVBQVN2UCxHQUFHd1AsTUFBTXBhLE1BQ3RCLEdBQUltYSxFQUFPLEdBQUtqSixHQUFlaUosRUFBTyxHQUFLbmEsS0FBS3laLGdCQUFrQlUsRUFBTyxHQUFLLEdBQUtBLEVBQU8sR0E5RXhFLElBK0VkLE9BR0osSUFBSXZMLEVBQVdoRSxHQUFHbUQsY0FDYkMsT0FBT2hELEVBQWFpRCxTQUNwQkEsTUFBTWpELEVBQWFnRCxVQUV4QmhPLEtBQUtpVSxhQUFhbkssS0FBS0MsTUFBTzZFLEVBQVN1TCxFQUFPLEdBQUtqSixHQUFnQmhHLEtBRW5FSSxFQUFPVixHQUFHVSxPQUNUQyxZQUFZLENBQUMsRUFBRyxLQUNoQjhPLGdCQUFnQixDQUNiLENBQUMsRUFBRyxHQUNKLENBQUNyYSxLQUFLeVosZUE1RlEsT0E4RmpCaE0sT0FBTyxDQUNKLENBQUMsRUFBRyxHQUNKLENBQUN6TixLQUFLeVosZUFoR1EsT0FrR2pCak8sR0FBRyxPQUFRLEtBRVIsSUFBSWhOLEVBQUlvTSxHQUFHYSxNQUFNak0sVUFFakJ3TCxFQUFlLEVBQUVnRCxPQUFPeFAsRUFBRTZOLFNBQVMwTixHQUFJL0wsVUFFdkMsSUFBSyxJQUFJblAsS0FBT3liLEVBQ1JBLEVBQU1uYixlQUFlTixJQUNyQm1CLEtBQUtpTSxVQUFVWixPQUFRLElBQU14TSxFQUFNLFFBQVMwTCxLQUFLLElBQUsrUCxFQUFNemIsSUFJcEUsSUFBSyxJQUFJQSxLQUFPb00sRUFDWixHQUFJQSxFQUFnQjlMLGVBQWVOLEdBQy9CLElBQUssSUFBSXZCLEVBQUksRUFBR0EsRUFBSTBDLEtBQUswWixnQkFBZ0JuWSxPQUFRakUsSUFDN0MwQyxLQUFLaU0sVUFDQVosT0FBUSxJQUFNeE0sRUFBTSxlQUFpQm1CLEtBQUswWixnQkFBZ0JwYyxJQUMxRGlOLEtBQUssSUFBS1UsRUFBZ0JwTSxHQUFLbUIsS0FBSzBaLGdCQUFnQnBjLEtBS3JFNE8sRUFBT3pPLEtBQUswTyxLQUloQm9PLEVBQWlCM1AsR0FBR1MsT0FBTyxjQUMxQjBJLFFBQVEsNEJBQTRCLEdBRXBDdEgsT0FBTyxPQUNQbEMsS0FBSyxzQkFBdUIsaUJBRTVCQSxLQUFLLFVBQVcsT0FBU3ZLLEtBQUt5WixlQUFpQixLQWxJOUIsSUFrSXVEdkksSUFFeEU2QyxRQUFRLGVBQWUsR0FFNUIvVCxLQUFLaU0sVUFBWXNPLEVBQ1o5TixPQUFPLFNBQ1BsQyxLQUFLLEtBQU0saUJBQ1hBLEtBQUssWUFBYSxhQUFlMkcsRUFBYyxPQUlwRCxJQUFJaEYsRUFBU2xNLEtBQUtpTSxVQUFVUSxPQUFPLEtBQzlCbEMsS0FBSyxRQUFTLHFCQUNkQSxLQUFLLFlBQWEsb0JBQ2xCOU0sS0FBSzBPLEdBR1ZuTSxLQUFLaU0sVUFBVVEsT0FBTyxLQUNqQmxDLEtBQUssUUFBUyxxQkFDZDlNLEtBQUs4TyxHQUlWdk0sS0FBS2lNLFVBQVVRLE9BQU8sUUFDakJsQyxLQUFLLFFBQVMsYUFDZEEsS0FBSyxLQUFNLHFCQUNYQSxLQUFLLEtBQU0sR0FDWEEsS0FBSyxLQUFNLEdBQ1hBLEtBQUssS0FBTSxHQUNYQSxLQUFLLEtBL0pZLEtBa0tsQixJQUFJaVEsRUFBYzVQLEdBQUc2UCxhQUFhN1AsR0FBRzhQLGtCQUNqQ0osRUFBUSxHQUVaLElBQUssSUFBSWhkLEVBQUksRUFBR0EsRUFBSWtjLEVBQWVqWSxPQUFRakUsSUFBSyxDQUM1QyxJQUFJcU8sRUFBTWYsR0FBR2UsSUFBSWlPLEdBQWUsU0FBU2hjLEdBQ3JDLE9BQU9BLEVBQUU0YixFQUFlbGMsT0FFeEJ3TyxFQUFNbEIsR0FBR2tCLElBQUk4TixHQUFlLFNBQVNoYyxHQUNyQyxPQUFPQSxFQUFFNGIsRUFBZWxjLE9BR3hCcWQsRUFBcUIvUCxHQUFHbUQsY0FBY0MsT0FBTyxDQUFDckMsRUFBS0csSUFBTW1DLE1BQU0sQ0FBQyxFQUFHLE1BQ25FMk0sRUFBT2hRLEdBQUdnUSxPQUNUbFAsR0FBRSxTQUFTOU4sR0FDUixPQUFPLEVBQUVBLEVBQVEsU0FFcEJtTyxHQUFFLFNBQVNuTyxHQUNSLE9BQU8sRUFBRStjLEVBQW1CL2MsRUFBRTRiLEVBQWVsYyxTQUVyRGdkLEVBQU1kLEVBQWVsYyxJQUFNc2QsRUFFM0I1YSxLQUFLaU0sVUFBVVEsT0FBTyxRQUNqQjdMLEtBQUssQ0FBQ2daLElBQ05yUCxLQUFLLEtBQU9pUCxFQUFlbGMsR0FBSyxRQUNoQ2lOLEtBQUssUUFBUyxzQkFDZHhHLE1BQU0sU0FBVXlXLEVBQVlsZCxJQUM1QmlOLEtBQUssSUFBS3FRLEdBQ1ZyUSxLQUFLLE9BQVFpUCxFQUFlbGMsSUFHckMyTCxFQUFFLHNCQUFzQmtQLFNBQVMsa0JBRWpDblksS0FBS2lNLFVBQVVRLE9BQU8sUUFDakJsQyxLQUFLLFFBQVMsUUFDZEEsS0FBSyxRQUFTdkssS0FBS3laLGdCQUNuQmxQLEtBQUssU0FyTVEsS0FzTWI5TSxLQUFLNk4sR0FDTEUsR0FBRyxRQUFTME8sR0FDWnpjLEtBQUttTixHQUFHaVEsT0FDSnJQLEdBQUcsT0FBUTBPLElBS3hCLElBSUlZLEVBQWFsUSxHQUFHdUQsVUFBVSxTQUc5Qm9NLEVBQ0s5TixPQUFPLEtBQ1BsQyxLQUFLLEtBQU0sbUJBQ1hBLEtBQUssWUFBYSxhQUFlMkcsRUFBZixTQUNsQi9DLFVBQVUsZUFDVnZOLEtBQUtrYSxFQUFXQyxRQUFRLElBQ3hCMU0sUUFFQXRELE1BQUssU0FBU25OLEVBQUdOLEdBSWRzTixHQUFHUyxPQUFPckwsTUFBTXlNLE9BQU8sUUFDbEJsQyxLQUFLLFFBQVMsVUFDZEEsS0FBSyxRQXJCQSxLQXNCTEEsS0FBSyxTQXJCQyxJQXNCTkEsS0FBSyxJQVBJLElBT1lqTixFQUFLLE1BQzFCeUcsTUFBTSxPQUFRbkcsRUFBRW1HLE1BQU1pWCxRQUczQnBRLEdBQUdTLE9BQU9yTCxNQUFNeU0sT0FBTyxRQUNsQmxDLEtBQUssS0FBTTNNLEVBQUVxZCxXQUFXelosR0FBR2pELE1BQVEsZUFDbkNnTSxLQUFLLFFBQVMsMEJBQ2RBLEtBQUssSUFiTSxJQWNYQSxLQUFLLElBZkksSUFlWWpOLEVBL0JoQixJQStCa0MsR0FBTSxNQUM3Q3dRLEtBQUtsUSxFQUFFcWQsV0FBV3BkLEtBQUtVLE1BQVEsTUFHcENxTSxHQUFHUyxPQUFPckwsTUFBTXlNLE9BQU8sUUFDbEJsQyxLQUFLLEtBQU0zTSxFQUFFcWQsV0FBV3paLEdBQUdqRCxNQUFRLFNBQ25DZ00sS0FBSyxRQUFTLDBCQUNkQSxLQUFLLElBckJNLElBc0JYQSxLQUFLLElBdkJJLElBdUJZak4sRUF2Q2hCLElBeUNGc04sR0FBR1MsT0FBTyxJQUFNek4sRUFBRXFkLFdBQVd6WixHQUFHakQsTUFBUSxlQUFlNlEsT0FBTzhMLHdCQUM5RCxHQUFNLE1BQ1RwTixLQUFLLFVBSWxCeU0sRUFDSzlOLE9BQU8sS0FDUGxDLEtBQUssS0FBTSxvQkFDWEEsS0FBSyxZQUFhLGFBQWUyRyxFQUFmLFNBQ2xCL0MsVUFBVSxlQUNWdk4sS0FBSyxDQUFDLFdBQVksWUFBYSxXQUMvQnlOLFFBRUF0RCxNQUFLLFNBQVNuTixFQUFHTixHQUlkc04sR0FBR1MsT0FBT3JMLE1BQU15TSxPQUFPLFFBQ2xCbEMsS0FBSyxRQUFTLFVBQ2RBLEtBQUssUUE3REEsS0E4RExBLEtBQUssU0E3REMsSUE4RE5BLEtBQUssSUFQSSxJQU9Zak4sRUFBSyxNQUMxQnlHLE1BQU0sUUFBUSxXQUNYLE9BQVUsSUFBTnpHLEVBQ08sVUFDTSxJQUFOQSxFQUNBLFVBRUEsYUFLbkJzTixHQUFHUyxPQUFPckwsTUFBTXlNLE9BQU8sUUFDbEJsQyxLQUFLLFFBQVMsMEJBQ2RBLEtBQUssSUFwQk0sSUFxQlhBLEtBQUssSUF0QkksSUFzQllqTixFQTlFaEIsSUE4RWtDLEdBQU0sTUFDN0N3USxLQUFLbFEsTUFFbEJxTCxFQUFFLHFCQUFxQkcsT0FFdkJwSixLQUFLbWIsdUJBUVQsdUJBRUksSUFBSyxJQUFJN2QsRUFBSSxFQUFHQSxFQUFJMEMsS0FBS3daLGVBQWVqWSxPQUFRakUsSUFBSyxDQUNqRCxJQUFJOGQsRUFBNkJwYixLQUFLd1osZUFBZWxjLEdBQUdrVyxNQUFNLEtBQUt0UyxLQUFLLEtBQ3hFa2EsRUFBNkJBLEVBQTJCQyxPQUFPLEdBQUdDLGNBQWdCRixFQUEyQjlKLE1BQU0sR0FFbkhySSxFQUFFLGtDQUNHd0QsT0FBTyxzSEFDSnpNLEtBQUt3WixlQUFlbGMsR0FBSyxZQUFjMEMsS0FBS3daLGVBQWVsYyxHQUFLLHFDQUNoRThkLEVBQTZCLGtDQUd6Q25TLEVBQUUseUJBQXlCdUwsUUFBTyxXQUM5QixJQUFJMkIsRUFBV2xOLEVBQUVqSixNQUNibVcsRUFBU2hOLEtBQUssV0FDZEYsRUFBRWtOLEVBQVM1TCxLQUFLLFNBQVNsQixPQUV6QkosRUFBRWtOLEVBQVM1TCxLQUFLLFNBQVNuQixXQVloQyxNQUFNLFVBQW1CbVEsRUFDNUIsWUFBWWdDLEVBQU1sUixHQUNoQitNLE1BQU0vTSxHQUNOckssS0FBS3ViLEtBQU9BLEVBRVp2YixLQUFLd2IsYUFLUCxtQkFDSXZTLEVBQUUsb0JBQW9CRSxLQUFLLFdBQVcsR0FBT0EsS0FBSyxZQUFZLEdBQzlERixFQUFFLHlCQUF5QnNCLEtBQUssWUFBWSxHQUM1Q3RCLEVBQUUsa0JBQWtCc0IsS0FBSyxhQUFjLFVBSTNDLGFBRUEsSUFBSWtSLEVBQVUsR0FDZCxHQUFJemIsS0FBS3ViLEtBQVMsR0FBRW5HLGNBQWN4QixTQUFTLFNBQ3ZDNkgsRUFBVSxhQUNQLEdBQUl6YixLQUFLdWIsS0FBUyxHQUFFbkcsY0FBY3hCLFNBQVMsZ0JBQzlDNkgsRUFBVSxvQkFDUCxHQUFJemIsS0FBS3ViLEtBQVMsR0FBRW5HLGNBQWN4QixTQUFTLHFCQUM5QzZILEVBQVUsd0JBQ1AsS0FBSXpiLEtBQUt1YixLQUFTLEdBQUVuRyxjQUFjeEIsU0FBUyxrQkFHOUMsT0FGQTZILEVBQVUsaUJBWWQsR0FIQXhTLEVBQUUsb0JBQW9CRyxPQUN0QkgsRUFBRSxxQkFBcUJJLE9BRWxCSixFQUFHLElBQU13UyxFQUFVLGNBQWVsYSxPQTJHbkMwSCxFQUFHLElBQU13UyxFQUFVLGNBQWVwUyxXQTNHUyxDQUUzQyxJQUFJcVMsRUFBaUIsR0FDakJDLEVBQWNDLEdBQVVyYSxPQUU1QixJQUFLLElBQUlqRSxFQUFJLEVBQUdBLEVBQUkrTSxHQUFVOUksT0FBUWpFLElBQUssQ0FDdkMsSUFBSXVRLEVBQU0sR0FDVixJQUFLLElBQUl4SyxFQUFJLEVBQUdBLEVBQUlzWSxFQUFhdFksSUFDekJrSyxFQUFRalEsRUFBSXFlLEVBQWN0WSxJQUMxQndLLEVBQUlqTyxLQUFLMk4sRUFBUWpRLEVBQUlxZSxFQUFjdFksR0FBR29ZLElBRzlDQyxFQUFlOWIsS0FBSzRKLEVBQXFCcUUsSUFHN0MsR0FBSTZOLEVBQWVuYSxPQUFTdkIsS0FBS3laLGVBQWdCLENBQzdDLElBQUlvQyxFQUFvQixHQUdwQmhPLEVBQU0sQ0FBQyxFQUFHLEVBQUcsRUFBRyxFQUFHLEdBRXZCLElBQUssSUFBSXZRLEVBQUksRUFBR0EsRUFBSW9lLEVBQWVuYSxPQUFRakUsSUFBSyxDQUU1QyxJQUFLLElBQUkrRixFQUFJLEVBQUdBLEVBQUl3SyxFQUFJdE0sT0FBUThCLElBQzVCd0ssRUFBSXhLLElBQU1xWSxFQUFlcGUsR0FBRytGLEdBR2hDLEdBQUkvRixFQUFJNE4sR0FBVSxFQUFHLENBQ2pCLElBQUssSUFBSTdILEVBQUksRUFBR0EsRUFBSXdLLEVBQUl0TSxPQUFROEIsSUFDNUJ3SyxFQUFJeEssSUFBTXdLLEVBQUl4SyxHQUFLNkgsRUFHdkIyUSxFQUFrQmpjLEtBQUtpTyxHQUV2QkEsRUFBTSxDQUFDLEVBQUcsRUFBRyxFQUFHLEVBQUcsSUFHM0I2TixFQUFpQkcsRUFHckIsSUFBSWxRLEVBQU1mLEdBQUdlLElBQUkrUCxHQUFnQixTQUFTOWQsR0FDdEMsT0FBT0EsRUFBRSxNQUVUa08sRUFBTWxCLEdBQUdrQixJQUFJNFAsR0FBZ0IsU0FBUzlkLEdBQ3RDLE9BQU9BLEVBQUUsTUFFVCtjLEVBQXFCL1AsR0FBR21ELGNBQWNDLE9BQU8sQ0FBQ3JDLEVBQUtHLElBQU1tQyxNQUFNLENBQUMsRUFBRyxNQUduRTZOLEVBQWE5YixLQUFLaU0sVUFBVVEsT0FBTyxLQUNsQ2xDLEtBQUssS0FBT2tSLEVBQVUsY0FDdEJsUixLQUFLLFFBQVMsa0JBRW5CdEIsRUFBRSxTQUFTa1AsU0FBUyxrQkFDcEJsUCxFQUFFLHNCQUFzQmtQLFNBQVMsa0JBRWpDbE4sRUFBZ0J3USxHQUFXLEdBRTNCLElBQUssSUFBSW5lLEVBQUksRUFBR0EsRUFBSTBDLEtBQUswWixnQkFBZ0JuWSxPQUFRakUsSUFBSyxDQUVsRCxJQUFJeWUsRUFFQXplLEVBQUksRUFDSnllLEVBQU9uUixHQUFHb1IsT0FDTHRRLEdBQUUsU0FBUzlOLEVBQUd5RixHQUNYLE9BQU8sRUFBRUEsTUFFWjRZLElBQUcsU0FBU3JlLEdBQ1QsT0FBTyxFQUFFK2MsRUFBbUIvYyxFQUFHTixFQUFJLFFBRXRDNGUsSUFBRyxTQUFTdGUsR0FDVCxPQUFPLEVBQUUrYyxFQUFtQi9jLEVBQUVOLFFBSTNCLElBQU5BLEVBQ0x5ZSxFQUFPblIsR0FBR2dRLE9BQ0xsUCxHQUFFLFNBQVM5TixFQUFHeUYsR0FDWCxPQUFPLEVBQUVBLE1BRVowSSxHQUFFLFNBQVNuTyxHQUNSLE9BQU8sRUFBRStjLEVBQW1CL2MsRUFBRU4sUUFJakNBLEVBQUksSUFDVHllLEVBQU9uUixHQUFHb1IsT0FDTHRRLEdBQUUsU0FBUzlOLEVBQUd5RixHQUNYLE9BQU8sRUFBRUEsTUFFWjRZLElBQUcsU0FBU3JlLEdBQ1QsT0FBTyxFQUFFK2MsRUFBbUIvYyxFQUFFTixRQUVqQzRlLElBQUcsU0FBU3RlLEdBQ1QsT0FBTyxFQUFFK2MsRUFBbUIvYyxFQUFHTixFQUFJLFNBSS9DMk4sRUFBZ0J3USxHQUFTemIsS0FBSzBaLGdCQUFnQnBjLElBQU15ZSxFQUVwREQsRUFBV3JQLE9BQU8sUUFDYjdMLEtBQUssQ0FBQzhhLElBQ05uUixLQUFLLFFBQVN2SyxLQUFLMFosZ0JBQWdCcGMsSUFDbkNpTixLQUFLLElBQUt3UixNQXdDcEIsU0FBUy9HLEVBQWV6VyxHQUMzQnVPLFlBQWN2TyxFQWVqQixTQUFTZ1QsRUFBYzNULEdBQ25CLE1BQU8sSUFBTUEsRUFBRThOLEVBQUksSUFBTTlOLEVBQUVtTyxFQUN2QixJQUFNbk8sRUFBRXVlLE9BQU9wUSxFQUFJLElBQU1uTyxFQUFFdWUsT0FBT3pRLEVFLytHM0MsSURtQkksRUFBa0IsR0FJbEIsRUFBOEJkLEdBQUdzRCxpQkFDaENGLE9BQ0csQ0FBQyxFQUFHLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLElBRTNDQyxNQUFNLENBQUMsVUFBVyxVQUFXLFVBQVcsVUFBVyxVQUFXLFVBQVcsVUFBVyxVQUFXLFlBRTdGLE1BQU1tSSxFQUF1QixFQUM3QixJQUNJLEVBQWtCLEdBQ2xCbkUsRUFBc0IsR0FFdEIsRUFBUyxDQUFDLFVBQVcsVUFBVyxVQUFXLFdBK0wvQyxTQUFTM0IsRUFBa0J0QixFQUFNQyxHQUNwQyxJQUFJdEosRUFBUyxHQUNUdUosRUFBUSxFQUFnQixJQUFNRCxHQUc5QkUsRUFBWUgsRUFBZSxTQUUvQixJQUFLLElBQUkxUixFQUFJLEVBQUdBLEVBQUkwUixFQUFhLE9BQUcxUixJQUFLLENBRXJDLEdBQUk2UixFQUFVLElBQU1BLEVBQVUsR0FBVSxRQUFNRCxFQUFPLENBRWpEQyxFQUFVN0osU0FBUSxTQUFTOEosUUFDYSxJQUF6QkEsRUFBVyxLQUFRLE1BQzFCekosRUFBTy9GLEtBQUt3UCxFQUFXLEtBQVEsU0FHdkMsTUFHSixJQUFJdkIsRUFBTSxHQUNWc0IsRUFBVTdKLFNBQVEsU0FBUzhKLFFBQ1MsSUFBckJBLEVBQWUsV0FDdEJ2QixFQUFNQSxFQUFJaE4sT0FBT3VPLEVBQWUsY0FHeENELEVBQVl0QixFQUVoQixPQUFPbEksRUErQkosU0FBUzBULEVBQWtCcEssRUFBV0MsR0FFekMsRUFBZ0IsSUFBTUQsR0FBYUMsRUFtRWhDLFNBQVNvSCxFQUFtQjlVLEVBQUkzRCxHQUMvQm9MLEVBQUUsb0JBQW9CMUgsT0FBUzZVLElBQy9Cbk4sRUFBRSwyQkFBMkJ3RCxPQUFPLDZDQUErQ2pMLEVBQUssVUFBWUEsRUFBSyxTQUFXM0QsRUFBaEYsME1BRXdFQSxFQUZ4RSw4R0FHeUVBLEVBQU8sMEJBRXBIb0wsRUFBRSxvQkFBc0J6SCxHQUFJNEksS0FBSyxjQUFjaEIsUUFRaEQsU0FBU3VOLEVBQXNCblYsR0FFbEN5SCxFQUFFLG9CQUFzQnpILEdBQUk0YSxPQUFPMVcsU0FDbkN1RCxFQUFFLG9CQUFzQnpILEdBQUlrRSxTQWdIekIsU0FBUzBULElBQ1osSUFXSTFLLEVBQ0FDLEVBVEEwTixFQUFtQnpSLEdBQUdTLE9BQU8scUJBQzVCb0IsT0FBTyxPQUNQbEMsS0FBSyxLQUFNLHFCQUNYQSxLQUFLLFFBTlEsS0FPYkEsS0FBSyxTQU5TLElBUW5CdEIsRUFBRSxzQkFBc0JHLE9BS3hCLElBR0lrVCxFQUFhLEVBQTRCck8sUUFJN0NTLEVBQVMyTixFQUFpQmxPLFVBQVUsZUFDL0J2TixLQUFLMGIsR0FDVjNOLEVBQWEwTixFQUFpQmxPLFVBQVUsb0JBQ25Ddk4sS0FMZ0IsQ0FBQyxNQUFPLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksU0FRekQ4TixFQUNLTCxRQUNBNUIsT0FBTyxRQUNQbEMsS0FBSyxRQUFTLFVBQ2RBLEtBQUssUUFqQmMsSUFrQm5CQSxLQUFLLFNBakJlLElBa0JwQkEsS0FBSyxJQUFLLEdBQ1ZBLEtBQUssS0FBSyxTQUFTM00sRUFBR04sR0FDbkIsT0FyQmdCLEdBcUJSQSxFQUF5QixRQUVwQ3lHLE1BQU0sUUFBUSxTQUFTbkcsR0FDcEIsT0FBT0EsS0FLZitRLEVBQ0tOLFFBQ0E1QixPQUFPLFFBQ1BsQyxLQUFLLFFBQVMsZUFDZEEsS0FBSyxJQUFLLElBQ1ZBLEtBQUssS0FBSyxTQUFTM00sRUFBR04sR0FDbkIsT0FuQ2dCLEdBbUNSQSxFQUF5QixRQUVwQ3dRLE1BQUssU0FBU2xRLEdBQ1gsT0FBT0EsS0UxaUJaLElBRUl3UyxFQUVBbU0sRUFKQXZKLEdBQWMsRUFDZEksRUFBZSxHQUVmb0osRUFBZSxHQVNmekosRUFBb0JuSSxHQUFHc0QsaUJBQzdCRixPQUNHLENBQUMsRUFBRyxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxJQUMxQ0MsTUFBTSxDQUFDLFVBQVcsVUFBVyxVQUFXLFVBQVcsVUFBVyxVQUFXLFVBQVcsVUFBVyxZQThDOUYsU0FBU2lGLEVBQWUzVSxHQUMzQjZVLEVBQWU3VSxFQXVCWixTQUFTd1ksRUFBZ0JGLEdBRXhCQSxHQUFjLEVBQ2QyRixFQUFhLElBQU0zRixHQUFjLFVBRWpDMkYsRUFBZSxHQ2pHdkIsSUFBSUMsRUFBbUIsMkJBQ3ZCLElBQUl6YixFQTBFRyxTQUFTMGIsSUFDWixJQUFJQyxFQUFvQixHQUN4QjFULEVBQUUyVCxLQUFLLENBQ0hDLElBQUssbUJBQXFCbFEsV0FBZSxHQUN6Q21RLFNBQVUsT0FDVjVYLEtBQU0sTUFDTjZYLFlBQWEsa0NBQ2JDLFFBQVMsQ0FDTCxPQUFVUCxHQUVkUSxRQUFTLFNBQVNyYyxHQUdkLElBQUssSUFBSXRELEVBQUksRUFBR0EsRUFBSXNELEVBQUtXLE9BQVFqRSxJQUM3QnFmLEVBQWtCL2IsRUFBS3RELEdBQVksU0FBSyxDQUFDc0QsRUFBS3RELEdBQVEsSUFBR3NELEVBQUt0RCxHQUFPLEdBQUdzRCxFQUFLdEQsR0FBTyxHQUFHc0QsRUFBS3RELEdBQU8sR0FBR3NELEVBQUt0RCxHQUFPLEdBQUdzRCxFQUFLdEQsR0FBTyxHQUFHc0QsRUFBS3RELEdBQU8sR0FBR3NELEVBQUt0RCxHQUFPLEdBQUdzRCxFQUFLdEQsR0FBUSxLQUVuTDRmLEdBQXFCUCxHTDZDMUIsU0FBbUNBLEdBRXRDLElBQUssSUFBSTlkLEtBQU84ZCxFQUNaLEdBQUlBLEVBQWtCeGQsZUFBZU4sR0FBTSxDQUV2QyxJQUFJdWMsRUFBNkJ2YyxFQUFJMlUsTUFBTSxLQUFLdFMsS0FBSyxLQUNyRGthLEVBQTZCQSxFQUEyQkMsT0FBTyxHQUFHQyxjQUFnQkYsRUFBMkI5SixNQUFNLEdBRW5IckksRUFBRSxnQ0FBZ0N3RCxPQUFPLHlGQUM4QzVOLEVBQ25GLGdDQUFrQ3VjLEVBRkcsc0VBSWV2YyxFQUFNLHlGQUEyRkEsRUFKaEgsOE1BWWpEb0ssRUFBRSxpQkFBaUJHLE9BRXJCYyxJS2xFVWlULENBQTBCUixNQXFEL0IsU0FBU1MsSUFDWm5VLEVBQUUyVCxLQUFLLENBQ0hDLElBQUsseUJBQTJCbFEsV0FBZSxHQUMvQ21RLFNBQVUsT0FDVjVYLEtBQU0sTUFDTjZYLFlBQWEsa0NBQ2JDLFFBQVMsQ0FDTCxPQUFVUCxHQUVkUSxRQUFTLFNBQVNyYyxJRDdIbkIsU0FBMkJBLEdBQzlCLEdBQUlBLEVBQUtXLE9BQ0wsSUFBSyxJQUFJakUsRUFBSSxFQUFHQSxFQUFJc0QsRUFBS1csT0FBUWpFLElBQ3pCc0QsRUFBS3RELEdBQWEsVUFDbEIyTCxFQUFFLHFDQUNHd0QsT0FBTyxXQUFhN0wsRUFBS3RELEdBQVMsS0FBM0IsaUVBQ3lEc0QsRUFBS3RELEdBQWUsV0FBSSxTQUFXc0QsRUFBS3RELEdBQVMsS0FEMUcsMEtBSUpzRCxFQUFLdEQsR0FBZSxXQUFJLFdBQWFzRCxFQUFLdEQsR0FBUyxLQUovQyxvRkFZcEIyTCxFQUFFLCtCQUNHd0QsT0FBTyw2Q0M0R1I0USxDQUFrQnpjLE1BU3ZCLFNBQVNpVSxFQUFrQjRHLEdBQzlCeFMsRUFBRTJULEtBQUssQ0FDSEMsSUFBSyxnQkFBa0JsUSxXQUFlLEdBQUksSUFBTThPLEVBQ2hEcUIsU0FBVSxPQUNWNVgsS0FBTSxNQUNONlgsWUFBYSxrQ0FDYkMsUUFBUyxDQUNMLE9BQVVQLEdBRWRRLFFBQVMsU0FBU3JjLEdBRWQwYyxHQUFrQjFjLEVBQU02YSxHQUN4Qm5TLE9BU0wsU0FBU3dMLEVBQXVCMkcsR0FDbkN6UyxJQUNBQyxFQUFFMlQsS0FBSyxDQUNIQyxJQUFLLGdCQUFrQmxRLFdBQWUsR0FBSSxJQUFNOE8sRUFDaERxQixTQUFVLE9BQ1Y1WCxLQUFNLE1BQ042WCxZQUFhLGtDQUNiQyxRQUFTLENBQ0wsT0FBVVAsR0FFZFEsUUFBUyxTQUFTcmMsR0FFZDJjLEdBQWEzYyxFQUFNNmEsR0FDbkJuUyxPQVNMLFNBQVN3TixFQUFlRCxHQUMzQjVOLEVBQUUyVCxLQUFLLENBQ0hDLElBQUssd0JBQTBCbFEsV0FBZSxHQUFJLElBQU1rSyxFQUN4RGlHLFNBQVUsT0FDVjVYLEtBQU0sTUFDTjZYLFlBQWEsa0NBQ2JDLFFBQVMsQ0FDTCxPQUFVUCxHQUVkUSxRQUFTLFNBQVNyYyxHQUNWQSxFQUFLVyxRQUNMeVYsR0FBZXRXLEtBQUs4YyxNQUFNNWMsRUFBSyxHQUFTLE9BRTVDMEksT0R2SVJpVCxFQzJJYTFGLEVBT1YsU0FBU1IsRUFBd0JRLEdBQ3BDNU4sRUFBRTJULEtBQUssQ0FDSEMsSUFBSyxrQ0FBb0NsUSxXQUFlLEdBQUksSUFBTWtLLEVBQ2xFaUcsU0FBVSxPQUNWNVgsS0FBTSxNQUNONlgsWUFBYSxrQ0FDYkMsUUFBUyxDQUNMLE9BQVVQLEdBRWRRLFFBQVMsU0FBU3JjLEdBQ1ZBLEVBQUtXLFFBQ0xtVixHQUFpQmhXLEtBQUs4YyxNQUFNNWMsRUFBSyxHQUFjLFdBQUlpVyxHQUV2RHZOLE8sS0NqT0wsSUFBSWlFLEVBQVUsR0FDVm1HLEdBQWtCLEdBQ2xCckosR0FBWSxHQUNaLEdBQW9CLEdBQ3BCc0ksR0FBYyxHQUNkNUMsR0FBbUIsR0FDbkI2TCxHQUFZLEdBd0NoQixTQUFTNkIsR0FBYWxmLEdBQ3pCZ1AsRUFBVUEsRUFBUTFNLE9BQU90QyxHQU90QixTQUFTMmUsR0FBcUIzZSxHQUNqQyxHQUFvQkEsRUFPakIsU0FBU21mLEdBQVluZixHQUN4Qm1WLEdBQWtCblYsRVJ2RWYsV0FDSCxJQUFJaVgsRUFBUyxDQUFDLE9BQVEsVUFBVyxVQUFXLFVBQVcsVUFBVyxVQUFXLFVBQVcsV0FFeEYsR0FBSTlCLEdBQWdCblMsT0FDaEIsSUFBSyxJQUFJakUsRUFBSSxFQUFHQSxFQUFJb1csR0FBZ0JuUyxPQUFRakUsSUFFeEMyTCxFQUFFLG1CQUFtQm1CLEtBQUssU0FDckJxQyxPQUFPeEQsRUFBRSx3QkFBMEJ5SyxHQUFnQnBXLEdBQWMsVUFBSSxNQUNqRW1QLE9BQU94RCxFQUFFLFFBQ0x3RCxPQUFPaUgsR0FBZ0JwVyxHQUFjLFlBQ3pDbVAsT0FBT3hELEVBQUUsUUFDTHdELE9BQU9pSCxHQUFnQnBXLEdBQVksVUFDdkNtUCxPQUFPeEQsRUFBRSxRQUNMd0QsT0FBT2lILEdBQWdCcFcsR0FBUSxNQUNuQ21QLE9BQU94RCxFQUFFLFFBQ0x3RCxPQUFPaUgsR0FBZ0JwVyxHQUFTLE9BQ3BDbVAsT0FBT3hELEVBQUUsUUFDTHdELE9BQU9pSCxHQUFnQnBXLEdBQVcsU0FDdENtUCxPQUFPeEQsRUFBRSxRQUNMd0QsT0FBTywraUJBTUosU0FBU2pMLEdBQ0wsSUFBSW1jLEVBQWUsR0FDbkIsSUFBSyxJQUFJcmdCLEVBQUksRUFBR0EsRUFBSWtZLEVBQU9qVSxPQUFRakUsSUFDL0JxZ0IsR0FBZ0Isa0ZBQW9GbkksRUFBT2xZLEdBQUssWUFBY2tFLEVBQUssV0FFdkksT0FBT21jLEVBTFgsQ0FNRWpLLEdBQWdCcFcsR0FBYyxXQUNoQyxzQkFLcEIyTCxFQUFFLG1CQUFtQm1CLEtBQUssU0FDckJxQyxPQUFPLHlDUW1DaEJtUixHQVFHLFNBQVNMLEdBQWEzYyxFQUFNNmEsR0FDL0IsSUFBSyxJQUFJbmUsRUFBSSxFQUFHQSxFQUFJc0QsRUFBS1csT0FBUWpFLFNBRUQsSUFBakIrTSxHQUFVL00sSUFDakIrTSxHQUFVekssS0FBSyxJQUlmZ0IsRUFBS3RELEtBQVF1Z0IsTUFBTWpkLEVBQUt0RCxJQUN4QitNLEdBQVUvTSxHQUFHbWUsSUFBWTdhLEVBQUt0RCxHQUc5QitNLEdBQVUvTSxHQUFHbWUsR0FBVzdhLEVBQUt0RCxHQVdsQyxTQUFTZ2dCLEdBQWtCMWMsRUFBTTZhLEdBQ3BDLElBQUssSUFBSW5lLEVBQUksRUFBR0EsRUFBSXNELEVBQUtXLE9BQVFqRSxTQUVILElBQWZpUSxFQUFRalEsSUFDZmlRLEVBQVEzTixLQUFLLElBR2pCMk4sRUFBUWpRLEdBQUdtZSxJQUFZN2EsRUFBS3RELEdBUzdCLFNBQVMwWixHQUFlelksR0FDM0JvVSxHQUFjcFUsRUFRWCxTQUFTbVksR0FBaUJuWSxFQUFPc1ksR0FFRixJQUE5QjdZLE9BQU9xSCxLQUFLOUcsR0FBT2dELFFBQWdCaEQsRUFBTXVmLGNBQWdCOWYsZUFDbEQrUixHQUFpQixJQUFNOEcsVUppTDNCLEVBQWdCLElJaExFQSxHSmlPdEIsU0FBOEI1SCxVQUMxQixFQUFnQixJQUFNQSxHSWpPekI4TyxDQUFxQmxILEtBR3JCOUcsR0FBaUIsSUFBTThHLEdBQWN0WSxFQUNyQzhhLEVBQWtCeEMsRUFBWSxHSmtML0IsU0FBMkI1SCxHQUc5QixJQUFLLElBQUlwUSxLQUFPMmQsRUFDWixHQUFJM2QsSUFBUyxJQUFNb1EsRUFFZixZQURBLEVBQWdCLElBQU1BLEdBQWF1TixFQUFhM2QsSUFLeEQsSUFBSyxJQUFJdkIsRUFBSSxFQUFHQSxFQUFJLEVBQU9pRSxPQUFRakUsSUFBSyxDQUNwQyxJQUFJMGdCLEdBQWMsRUFDbEIsSUFBSyxJQUFJbmYsS0FBTyxFQUNSLEVBQWdCTSxlQUFlTixJQUMzQixFQUFnQkEsS0FBUyxFQUFPdkIsS0FDaEMwZ0IsR0FBYyxHQUkxQixHQUFJQSxFQUFhLENBR2IsR0FBeUMsSUFBckNoZ0IsT0FBT3FILEtBQUttWCxHQUFjamIsT0FTMUIsWUFEQSxFQUFnQixJQUFNME4sR0FBYSxFQUFPM1IsSUFQMUMsSUFBSyxJQUFJdUIsS0FBTzJkLEVBQ1osR0FBSUEsRUFBYTNkLEtBQVMsRUFBT3ZCLEdBRTdCLFlBREEsRUFBZ0IsSUFBTTJSLEdBQWEsRUFBTzNSLE1JMU0xRDJnQixDQUFrQnBILElBVW5CLFNBQVNxSCxHQUFhM2YsR0FDekJxZCxHQUFZcmQsRUEvSGhCMEssRUFBRWxILFVBQVVvYyxPQUFNLFdETVZyYyxPQUFPc2MsY0FDUHBkLEVBQVMsSUFBSW9kLFlBQVksc0JBQXdCelIsV0FBZSxLQUN6RDBSLFVBQVksU0FBU3piLEdBQ1QsVUFBWEEsRUFBRWhDLE1BQ0ZJLEVBQU9zZCxRQVdIeGMsT0FBT29RLFlBUlAsU0FBU3FNLElBQ0R0VixFQUFFdVYsT0FBUyxFQUNYMWMsT0FBT29RLFdBQVdxTSxFQUFxQixLQUc1QixJQUFJLElBR2dCLE1BRzNDZCxHQUFhL2MsS0FBSzhjLE1BQU01YSxFQUFFaEMsUUFJbENJLEVBQU95ZCxpQkFBaUIsU0FBUyxTQUFTN2IsR0FDbENBLEVBQUU4YixZQUFjTixZQUFZTyxRQUM1QkMsTUFBTSxzQkFFWCxJQUVIQSxNQUFNLHlDQzNCVixJRG9OQTNWLEVBQUUyVCxLQUFLLENBQ0hDLElBQUssZ0JBQWtCbFEsV0FBZSxHQUFJLGNBQzFDbVEsU0FBVSxPQUNWNVgsS0FBTSxNQUNONlgsWUFBYSxrQ0FDYkMsUUFBUyxDQUNMLE9BQVVQLEdBRWRRLFFBQVMsU0FBU3JjLEdBQ2RzZCxHQUFhdGQsTUFsS2xCLFdBQ0gsTUFBTTRZLEVBQWlCLENBQUMsYUFBYyxjQUFlLHFCQUFzQix5QkFDdkUsMEJBQTJCLGtCQUFtQixzQkFJbEQsSUFBSyxJQUFJbGMsRUFBSSxFQUFHQSxFQUFJa2MsRUFBZWpZLE9BQVFqRSxJQUN2QzJMLEVBQUUyVCxLQUFLLENBQ0hDLElBQUssZ0JBQWtCbFEsV0FBZSxHQUFJLElBQU02TSxFQUFlbGMsR0FDL0R3ZixTQUFVLE9BQ1Y1WCxLQUFNLE1BQ042WCxZQUFhLGtDQUNiQyxRQUFTLENBQ0wsT0FBVVAsR0FFZFEsUUFBUyxTQUFTcmMsR0FHZDJjLEdBQWEzYyxFQUZDNFksRUFBZWxjLEdBQUcySyxRQUFRLFNBQVUsUUNyRTlELEdEaUZBZ0IsRUFBRTJULEtBQUssQ0FDSEMsSUFBSyxpQkFBbUJsUSxXQUFlLEdBQ3ZDbVEsU0FBVSxPQUNWNVgsS0FBTSxNQUNONlgsWUFBYSxrQ0FDYkMsUUFBUyxDQUNMLE9BQVVQLEdBRWRRLFFBQVMsU0FBU3JjLEdBQ2Q4YyxHQUFZOWMsTUNwRnBCIiwiZmlsZSI6ImV4cGxvcmUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNik7XG4iLCJcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9leHBsb3JlLmNzc1wiKTtcblxuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cbnZhciB0cmFuc2Zvcm07XG52YXIgaW5zZXJ0SW50bztcblxuXG5cbnZhciBvcHRpb25zID0ge1wiaG1yXCI6dHJ1ZX1cblxub3B0aW9ucy50cmFuc2Zvcm0gPSB0cmFuc2Zvcm1cbm9wdGlvbnMuaW5zZXJ0SW50byA9IHVuZGVmaW5lZDtcblxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9saWIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2FscztcblxuaWYobW9kdWxlLmhvdCkge1xuXHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9leHBsb3JlLmNzc1wiLCBmdW5jdGlvbigpIHtcblx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vZXhwbG9yZS5jc3NcIik7XG5cblx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblxuXHRcdHZhciBsb2NhbHMgPSAoZnVuY3Rpb24oYSwgYikge1xuXHRcdFx0dmFyIGtleSwgaWR4ID0gMDtcblxuXHRcdFx0Zm9yKGtleSBpbiBhKSB7XG5cdFx0XHRcdGlmKCFiIHx8IGFba2V5XSAhPT0gYltrZXldKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRcdGlkeCsrO1xuXHRcdFx0fVxuXG5cdFx0XHRmb3Ioa2V5IGluIGIpIGlkeC0tO1xuXG5cdFx0XHRyZXR1cm4gaWR4ID09PSAwO1xuXHRcdH0oY29udGVudC5sb2NhbHMsIG5ld0NvbnRlbnQubG9jYWxzKSk7XG5cblx0XHRpZighbG9jYWxzKSB0aHJvdyBuZXcgRXJyb3IoJ0Fib3J0aW5nIENTUyBITVIgZHVlIHRvIGNoYW5nZWQgY3NzLW1vZHVsZXMgbG9jYWxzLicpO1xuXG5cdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHR9KTtcblxuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn0iLCIvLyBJbXBvcnRzXG52YXIgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fID0gcmVxdWlyZShcIi4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIik7XG5leHBvcnRzID0gX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fKGZhbHNlKTtcbi8vIE1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLyogSWNvbnMgZm9yIGJvb3RzdHJhcCA0ICovXFxyXFxuXFxyXFxuLm1kaTo6YmVmb3JlIHtcXHJcXG4gICAgZm9udC1zaXplOiAyNHB4O1xcclxcbiAgICBsaW5lLWhlaWdodDogMTRweDtcXHJcXG59XFxyXFxuXFxyXFxuLmJ0biAubWRpOjpiZWZvcmUge1xcclxcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XFxyXFxuICAgIHRvcDogNHB4O1xcclxcbn1cXHJcXG5cXHJcXG4uYnRuLXhzIC5tZGk6OmJlZm9yZSB7XFxyXFxuICAgIGZvbnQtc2l6ZTogMThweDtcXHJcXG4gICAgdG9wOiAzcHg7XFxyXFxufVxcclxcblxcclxcbi5idG4tc20gLm1kaTo6YmVmb3JlIHtcXHJcXG4gICAgZm9udC1zaXplOiAxOHB4O1xcclxcbiAgICB0b3A6IDNweDtcXHJcXG59XFxyXFxuXFxyXFxuLmRyb3Bkb3duLW1lbnUgLm1kaSB7XFxyXFxuICAgIHdpZHRoOiAxOHB4O1xcclxcbn1cXHJcXG5cXHJcXG4uZHJvcGRvd24tbWVudSAubWRpOjpiZWZvcmUge1xcclxcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XFxyXFxuICAgIHRvcDogNHB4O1xcclxcbiAgICBsZWZ0OiAtOHB4O1xcclxcbn1cXHJcXG5cXHJcXG4ubmF2IC5tZGk6OmJlZm9yZSB7XFxyXFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXHJcXG4gICAgdG9wOiA0cHg7XFxyXFxufVxcclxcblxcclxcbi5uYXZiYXIgLm5hdmJhci10b2dnbGUgLm1kaTo6YmVmb3JlIHtcXHJcXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xcclxcbiAgICB0b3A6IDRweDtcXHJcXG4gICAgY29sb3I6ICNGRkY7XFxyXFxufVxcclxcblxcclxcbi5icmVhZGNydW1iIC5tZGk6OmJlZm9yZSB7XFxyXFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXHJcXG4gICAgdG9wOiA0cHg7XFxyXFxufVxcclxcblxcclxcbi5icmVhZGNydW1iIGE6aG92ZXIge1xcclxcbiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XFxyXFxufVxcclxcblxcclxcbi5icmVhZGNydW1iIGE6aG92ZXIgc3BhbiB7XFxyXFxuICAgIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lO1xcclxcbn1cXHJcXG5cXHJcXG4uYWxlcnQgLm1kaTo6YmVmb3JlIHtcXHJcXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xcclxcbiAgICB0b3A6IDRweDtcXHJcXG4gICAgbWFyZ2luLXJpZ2h0OiAycHg7XFxyXFxufVxcclxcblxcclxcbi5pbnB1dC1ncm91cC1hZGRvbiAubWRpOjpiZWZvcmUge1xcclxcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XFxyXFxuICAgIHRvcDogM3B4O1xcclxcbn1cXHJcXG5cXHJcXG4ubmF2YmFyLWJyYW5kIC5tZGk6OmJlZm9yZSB7XFxyXFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXHJcXG4gICAgdG9wOiAycHg7XFxyXFxuICAgIG1hcmdpbi1yaWdodDogMnB4O1xcclxcbn1cXHJcXG5cXHJcXG4ubGlzdC1ncm91cC1pdGVtIC5tZGk6OmJlZm9yZSB7XFxyXFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXHJcXG4gICAgdG9wOiAzcHg7XFxyXFxuICAgIGxlZnQ6IC0zcHhcXHJcXG59XFxyXFxuXFxyXFxuLyogU1ZHIGVsZW1lbnRzIGFuZCB0ZXh0ICovXFxyXFxuXFxyXFxuI21haW4tdmlzIHtcXHJcXG4gICAgbWFyZ2luLWJvdHRvbTogMTBweDtcXHJcXG59XFxyXFxuXFxyXFxuLnN2Zy1jb250YWluZXIge1xcclxcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxyXFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXHJcXG4gICAgd2lkdGg6IDEwMCU7XFxyXFxuICAgIC8qIGFzcGVjdCByYXRpbyAqL1xcclxcbiAgICB2ZXJ0aWNhbC1hbGlnbjogdG9wO1xcclxcbiAgICBvdmVyZmxvdzogdmlzaWJsZTtcXHJcXG59XFxyXFxuXFxyXFxuLnN2Zy1jb250ZW50IHtcXHJcXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcclxcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxyXFxuICAgIGJvcmRlcjogMXB4IHNvbGlkICMwMDA7XFxyXFxufVxcclxcblxcclxcbiNtYWluLXZpcy1sZWdlbmQtZGl2IHtcXHJcXG4gICAgZGlzcGxheTogbm9uZTtcXHJcXG59XFxyXFxuXFxyXFxuI2hpZXJhcmNoeS1sZWdlbmQtZGl2IHtcXHJcXG4gICAgZGlzcGxheTogbm9uZTtcXHJcXG59XFxyXFxuXFxyXFxuI21haW4tdmlzLWxlZ2VuZCB7XFxyXFxuICAgIGZsb2F0OiByaWdodDtcXHJcXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcclxcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XFxyXFxuICAgIG92ZXJmbG93OiB2aXNpYmxlO1xcclxcbiAgICB0b3A6IDEwcHg7XFxyXFxuICAgIGxlZnQ6IDEwcHg7XFxyXFxufVxcclxcblxcclxcbiNoaWVyYXJjaHktbGVnZW5kIHtcXHJcXG4gICAgZmxvYXQ6IGxlZnQ7XFxyXFxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXHJcXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xcclxcbiAgICBvdmVyZmxvdzogdmlzaWJsZTtcXHJcXG4gICAgdG9wOiAxMHB4O1xcclxcbiAgICBsZWZ0OiAxMHB4O1xcclxcbn1cXHJcXG5cXHJcXG4uc3ZnLWNvbnRlbnQtZGVuZHJvZ3JhbSB7XFxyXFxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXHJcXG4gICAgYm9yZGVyOiAxcHggc29saWQgIzAwMDtcXHJcXG59XFxyXFxuXFxyXFxuLnN2Zy1saW5lLWNoYXJ0LWNvbnRhaW5lciB7XFxyXFxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXHJcXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xcclxcbiAgICB3aWR0aDogMTAwJTtcXHJcXG4gICAgaGVpZ2h0OiBhdXRvO1xcclxcbiAgICAvKiBkZXBlbmRzIG9uIHN2ZyByYXRpbyAqL1xcclxcbiAgICBwYWRkaW5nLWJvdHRvbTogMTclO1xcclxcbiAgICAvKiBhc3BlY3QgcmF0aW8gKi9cXHJcXG4gICAgdmVydGljYWwtYWxpZ246IHRvcDtcXHJcXG4gICAgb3ZlcmZsb3c6IHZpc2libGU7XFxyXFxufVxcclxcblxcclxcbi5zdmctZGVuZHJvZ3JhbS1jb250YWluZXIge1xcclxcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxyXFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXHJcXG4gICAgaGVpZ2h0OiBhdXRvO1xcclxcbiAgICB2ZXJ0aWNhbC1hbGlnbjogdG9wO1xcclxcbiAgICBvdmVyZmxvdzogdmlzaWJsZTtcXHJcXG59XFxyXFxuXFxyXFxuLmF4aXMgcGF0aCB7XFxyXFxuICAgIGRpc3BsYXk6IG5vbmU7XFxyXFxufVxcclxcblxcclxcbi5heGlzIGxpbmUge1xcclxcbiAgICBzdHJva2Utb3BhY2l0eTogMC4zO1xcclxcbiAgICBzaGFwZS1yZW5kZXJpbmc6IGNyaXNwRWRnZXM7XFxyXFxufVxcclxcblxcclxcbi54IHtcXHJcXG4gICAgZm9udC1zaXplOiAxZW07XFxyXFxufVxcclxcblxcclxcbi55IHtcXHJcXG4gICAgZm9udC1zaXplOiAxZW07XFxyXFxufVxcclxcblxcclxcbi5heGlzLWxpbmUtY2hhcnQgcGF0aCBsaW5lIHtcXHJcXG4gICAgZmlsbDogbm9uZTtcXHJcXG4gICAgc3Ryb2tlOiAjMDAwO1xcclxcbiAgICBzaGFwZS1yZW5kZXJpbmc6IGNyaXNwRWRnZXM7XFxyXFxufVxcclxcblxcclxcbi5saW5lIHtcXHJcXG4gICAgZmlsbDogbm9uZTtcXHJcXG4gICAgc3Ryb2tlLXdpZHRoOiA1cHg7XFxyXFxufVxcclxcblxcclxcbi8qIFRpbWUgICovXFxyXFxuXFxyXFxuLmZyYW1lLXRleHQge1xcclxcbiAgICBtYXJnaW4tdG9wOiAwO1xcclxcbiAgICBtYXJnaW4tYm90dG9tOiAwO1xcclxcbiAgICBmb250LXNpemU6IDJlbTtcXHJcXG4gICAgY29sb3I6IGluaGVyaXQ7XFxyXFxuICAgIGZvbnQtd2VpZ2h0OiA1MDA7XFxyXFxuICAgIGxpbmUtaGVpZ2h0OiAxLjE7XFxyXFxufVxcclxcblxcclxcbi8qIFNsaWRlciB0aWNrcyAgKi9cXHJcXG5cXHJcXG4udWktc2xpZGVyLXRpY2sge1xcclxcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxyXFxuICAgIHdpZHRoOiAzcHg7XFxyXFxuICAgIGJhY2tncm91bmQ6ICMzMzdhYjc7XFxyXFxuICAgIGhlaWdodDogMC44ZW07XFxyXFxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXHJcXG59XFxyXFxuXFxyXFxuLyogTGFvZGluZyBnaWYgICAqL1xcclxcblxcclxcbiNsb2FkaW5nIHtcXHJcXG4gICAgZGlzcGxheTogYmxvY2s7XFxyXFxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcXHJcXG59XFxyXFxuXFxyXFxuLyogQ29sb3IgbGVnZW5kICAgICovXFxyXFxuXFxyXFxuLmxlZ2VuZCB7XFxyXFxuICAgIGZvbnQtc2l6ZTogMTJweDtcXHJcXG4gICAgc3Ryb2tlOiAjMDAwO1xcclxcbn1cXHJcXG5cXHJcXG4ubGVnZW5kLXRleHQge1xcclxcbiAgICBmb250LXNpemU6IDEuMmVtO1xcclxcbiAgICBjb2xvcjogaW5oZXJpdDtcXHJcXG4gICAgbGluZS1oZWlnaHQ6IDEuMTtcXHJcXG59XFxyXFxuXFxyXFxuLmxpbmUtY2hhcnQtbGVnZW5kLXRleHQge1xcclxcbiAgICBmb250LXNpemU6IDJlbTtcXHJcXG4gICAgY29sb3I6IGluaGVyaXQ7XFxyXFxuICAgIGxpbmUtaGVpZ2h0OiAxLjE7XFxyXFxufVxcclxcblxcclxcbi50aW1lLWxpbmUge1xcclxcbiAgICBmaWxsOiBub25lO1xcclxcbiAgICBzdHJva2Utd2lkdGg6IDVweDtcXHJcXG4gICAgc3Ryb2tlOiAjMDAwO1xcclxcbn1cXHJcXG5cXHJcXG4vKnN3YXJtIGZlYXR1cmVzICovXFxyXFxuXFxyXFxuLmNlbnRyb2lkIHtcXHJcXG4gICAgZmlsbC1vcGFjaXR5OiAwO1xcclxcbiAgICBzdHJva2U6ICNlNzI5OGE7XFxyXFxuICAgIHN0cm9rZS13aWR0aDogM3B4O1xcclxcbn1cXHJcXG5cXHJcXG4ubWVkb2lkIHtcXHJcXG4gICAgZmlsbDogI2U3Mjk4YSAhaW1wb3J0YW50O1xcclxcbiAgICBzdHJva2U6ICNlNzI5OGEgIWltcG9ydGFudDtcXHJcXG59XFxyXFxuXFxyXFxuLmh1bGwtcGF0aCB7XFxyXFxuICAgIGZpbGw6ICNmZmY7XFxyXFxuICAgIGZpbGwtb3BhY2l0eTogMDtcXHJcXG4gICAgc3Ryb2tlLXdpZHRoOiAzO1xcclxcbiAgICBzdHJva2U6ICMyNTI1MjU7XFxyXFxuICAgIHN0cm9rZS1vcGFjaXR5OiAwLjU7XFxyXFxufVxcclxcblxcclxcbi5oaWVyYXJjaHktZ3JvdXAge1xcclxcbiAgICBzdHJva2Utd2lkdGg6IDEwO1xcclxcbiAgICBzdHJva2UtbGluZWpvaW46IHJvdW5kO1xcclxcbiAgICBvcGFjaXR5OiAwLjI7XFxyXFxufVxcclxcblxcclxcbi5kZWxhdW5heS10cmlhbmd1bGF0aW9uIHtcXHJcXG4gICAgZmlsbC1vcGFjaXR5OiAwO1xcclxcbiAgICBzdHJva2Utd2lkdGg6IDI7XFxyXFxuICAgIHN0cm9rZTogIzAwMDtcXHJcXG4gICAgc3Ryb2tlLW9wYWNpdHk6IDAuNDtcXHJcXG59XFxyXFxuXFxyXFxuLyogQ29sb3IgYnJld2VyIHBpY2tlciBkaXYgKi9cXHJcXG5cXHJcXG4ucGFsZXR0ZSB7XFxyXFxuICAgIGN1cnNvcjogcG9pbnRlcjtcXHJcXG4gICAgZGlzcGxheTogdGFibGU7XFxyXFxuICAgIHZlcnRpY2FsLWFsaWduOiBib3R0b207XFxyXFxuICAgIG1hcmdpbjogNHB4IDAgNHB4IDRweDtcXHJcXG4gICAgYmFja2dyb3VuZDogI2ZmZjtcXHJcXG4gICAgYm9yZGVyOiBzb2xpZCAxcHggI2FhYTtcXHJcXG59XFxyXFxuXFxyXFxuLnN3YXRjaCB7XFxyXFxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXHJcXG4gICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcXHJcXG4gICAgd2lkdGg6IDIycHg7XFxyXFxuICAgIGhlaWdodDogMjJweDtcXHJcXG59XFxyXFxuXFxyXFxuLnZvcm9ub2kge1xcclxcbiAgICBmaWxsLW9wYWNpdHk6IDA7XFxyXFxuICAgIHN0cm9rZS13aWR0aDogMztcXHJcXG4gICAgc3Ryb2tlOiAjMDAwO1xcclxcbiAgICBzdHJva2Utb3BhY2l0eTogMC4yO1xcclxcbn1cXHJcXG5cXHJcXG4vKiBUb29sdGlwICovXFxyXFxuXFxyXFxuZGl2LnRvb2x0aXAge1xcclxcbiAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcXHJcXG4gICAgb3BhY2l0eTogMDtcXHJcXG4gICAgYmFja2dyb3VuZDogcmdiKDI1NSwgMjU1LCAyNTUpICFpbXBvcnRhbnQ7XFxyXFxuICAgIGJvcmRlci1sZWZ0LWNvbG9yOiAjMWI4MDllICFpbXBvcnRhbnQ7XFxyXFxuICAgIGJvcmRlcjogMXB4IHNvbGlkICNlZWU7XFxyXFxuICAgIGJvcmRlci1sZWZ0LXdpZHRoOiA1cHg7XFxyXFxuICAgIGJvcmRlci1yYWRpdXM6IDNweDtcXHJcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcclxcbn1cXHJcXG5cXHJcXG5kaXYudG9vbHRpcCB0YWJsZSB0ZDpudGgtY2hpbGQoMikge1xcclxcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxyXFxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xcclxcbn1cXHJcXG5cXHJcXG4udG9vbHRpcC1zcGFuIHtcXHJcXG4gICAgZGlzcGxheTogYmxvY2s7XFxyXFxuICAgIHdpZHRoOiAxNTBweDtcXHJcXG4gICAgd29yZC13cmFwOiBicmVhay13b3JkO1xcclxcbiAgICBmb250LXNpemU6IDEuNWVtO1xcclxcbn1cXHJcXG5cXHJcXG4udXBwZXItb3V0ZXItYXJlYSwgLmxvd2VyLW91dGVyLWFyZWEge1xcclxcbiAgICBzdHJva2Utd2lkdGg6IDE7XFxyXFxuICAgIGZpbGw6ICM3NGE5Y2Y7XFxyXFxuICAgIHN0cm9rZTogIzM2OTBjMDtcXHJcXG59XFxyXFxuXFxyXFxuLnVwcGVyLWlubmVyLWFyZWEsIC5sb3dlci1pbm5lci1hcmVhIHtcXHJcXG4gICAgc3Ryb2tlLXdpZHRoOiAxO1xcclxcbiAgICBmaWxsOiAjMDQ1YThkO1xcclxcbiAgICBzdHJva2U6ICMwMjM4NTg7XFxyXFxufVxcclxcblxcclxcbi5tZWRpYW4tbGluZSB7XFxyXFxuICAgIGZpbGw6IG5vbmU7XFxyXFxuICAgIHN0cm9rZTogIzUyNTI1MjtcXHJcXG4gICAgc3Ryb2tlLXdpZHRoOiA1O1xcclxcbn1cXHJcXG5cXHJcXG4uc2VsZWN0ZWQge1xcclxcbiAgICBiYWNrZ3JvdW5kOiAjOTk5O1xcclxcbiAgICBib3JkZXI6IDRweCBzb2xpZCAjNGQ0ZDRkO1xcclxcbiAgICAtbW96LWJvcmRlci1yYWRpdXM6IDVweDtcXHJcXG4gICAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiA1cHg7XFxyXFxuICAgIGJveC1zaGFkb3c6IDFweCAycHggNHB4IHJnYmEoMCwgMCwgMCwgLjQpO1xcclxcbn1cXHJcXG5cXHJcXG4uem9vbSB7XFxyXFxuICAgIGZpbGw6IG5vbmU7XFxyXFxuICAgIHBvaW50ZXItZXZlbnRzOiBhbGw7XFxyXFxufVxcclxcblxcclxcbi54LmF4aXMtbGluZS1jaGFydD5nPnRleHQge1xcclxcbiAgICBmb250LXNpemU6IDNlbTtcXHJcXG4gICAgY29sb3I6IGluaGVyaXQ7XFxyXFxuICAgIGxpbmUtaGVpZ2h0OiAxLjE7XFxyXFxufVxcclxcblxcclxcbi5hcnJvdyB7XFxyXFxuICAgIHN0cm9rZS13aWR0aDogMTtcXHJcXG59XFxyXFxuXFxyXFxuI2NlbnRyb2lkLWxpbmUge1xcclxcbiAgICBzdHJva2Utd2lkdGg6IDE7XFxyXFxuICAgIHN0cm9rZTogI2U3Mjk4YTtcXHJcXG59XFxyXFxuXFxyXFxuI2NlbnRyb2lkLWFycm93IHtcXHJcXG4gICAgZmlsbDogI2U3Mjk4YTtcXHJcXG59XFxyXFxuXFxyXFxuLm1ldGFkYXRhLXN3YXRjaCB7XFxyXFxuICAgIHdpZHRoOiAzMHB4O1xcclxcbiAgICBoZWlnaHQ6IDMwcHg7XFxyXFxuICAgIGJvcmRlci1yYWRpdXM6IDNweDtcXHJcXG4gICAgYm9yZGVyOiAycHggc29saWQgIzY2NjtcXHJcXG59XFxyXFxuXFxyXFxuLm1ldGFkYXRhLXN3YXRjaC1jbGlja2FibGU6aG92ZXIge1xcclxcbiAgICBib3JkZXI6IDJweCBzb2xpZCAjMDAwO1xcclxcbiAgICBjdXJzb3I6IHBvaW50ZXI7XFxyXFxufVxcclxcblxcclxcbi5kcm9wZG93bi1tZW51IHtcXHJcXG4gICAgbWluLXdpZHRoOiA0MHB4O1xcclxcbiAgICBwYWRkaW5nOiA1cHg7XFxyXFxufVxcclxcblxcclxcbi5tZXRhZGF0YS1sZWdlbmQge1xcclxcbiAgICBsaXN0LXN0eWxlOiBub25lO1xcclxcbiAgICBtYXJnaW4tdG9wOiAxMHB4O1xcclxcbn1cXHJcXG5cXHJcXG4ubWV0YWRhdGEtbGVnZW5kIGxpIHtcXHJcXG4gICAgZmxvYXQ6IGxlZnQ7XFxyXFxuICAgIG1hcmdpbi1yaWdodDogMTBweDtcXHJcXG59XFxyXFxuXFxyXFxuLm1ldGFkYXRhLWxlZ2VuZCBzcGFuIHtcXHJcXG4gICAgYm9yZGVyOiAycHggc29saWQgIzY2NjtcXHJcXG4gICAgZmxvYXQ6IGxlZnQ7XFxyXFxuICAgIHdpZHRoOiAzMHB4O1xcclxcbiAgICBoZWlnaHQ6IDMwcHg7XFxyXFxufVxcclxcblxcclxcbi5tZXRhZGF0YS1sZWdlbmQgLmJsLWF2ZyB7XFxyXFxuICAgIGJhY2tncm91bmQtY29sb3I6ICM3ZmM5N2Y7XFxyXFxufVxcclxcblxcclxcbi5tZXRhZGF0YS1sZWdlbmQgLmF2ZyB7XFxyXFxuICAgIGJhY2tncm91bmQtY29sb3I6ICNmZGMwODY7XFxyXFxufVxcclxcblxcclxcbi5tZXRhZGF0YS1sZWdlbmQgLmFiLWF2ZyB7XFxyXFxuICAgIGJhY2tncm91bmQtY29sb3I6ICMzODZjYjA7XFxyXFxufVxcclxcblxcclxcbi5uZXR3b3JrLWVkZ2VzIHtcXHJcXG4gICAgZmlsbC1vcGFjaXR5OiAwO1xcclxcbiAgICBzdHJva2Utd2lkdGg6IDI7XFxyXFxufVxcclxcblxcclxcbi5uZXR3b3JrLWJhY2tncm91bmQtZWRnZXMge1xcclxcbiAgICBmaWxsLW9wYWNpdHk6IDA7XFxyXFxuICAgIHN0cm9rZS1vcGFjaXR5OiAwLjI1O1xcclxcbiAgICBzdHJva2U6ICM3MzczNzM7XFxyXFxufVxcclxcblxcclxcbi5ub2RlIHRleHQge1xcclxcbiAgICBmb250OiAxMnB4IHNhbnMtc2VyaWY7XFxyXFxufVxcclxcblxcclxcbi5ub2RlLS1pbnRlcm5hbCB0ZXh0IHtcXHJcXG4gICAgdGV4dC1zaGFkb3c6IDAgMXB4IDAgI2ZmZiwgMCAtMXB4IDAgI2ZmZiwgMXB4IDAgMCAjZmZmLCAtMXB4IDAgMCAjZmZmO1xcclxcbn1cXHJcXG5cXHJcXG4ubGluayB7XFxyXFxuICAgIGZpbGw6IG5vbmU7XFxyXFxuICAgIHN0cm9rZTogIzYzNjM2MztcXHJcXG4gICAgc3Ryb2tlLXdpZHRoOiA1cHg7XFxyXFxufVxcclxcblxcclxcbiNhY3RpdmUtbmV0d29yay1uYW1lIHtcXHJcXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XFxyXFxuICAgIGNvbG9yOiAjMjk2MjkyO1xcclxcbn1cXHJcXG5cXHJcXG4uYWN0aXZlLWxldmVsIHtcXHJcXG4gICAgZmlsbDogIzM4NmNiMDtcXHJcXG59XFxyXFxuXFxyXFxuI2RlbmRyb2dyYW0tcGFuZWwge1xcclxcbiAgICBwb3NpdGlvbjogaW5pdGlhbDtcXHJcXG59XFxyXFxuXFxyXFxuI2RlbmRyb2dyYW0tcGFuZWwge1xcclxcbiAgICBkaXNwbGF5OiBub25lXFxyXFxufVxcclxcblxcclxcbi5zaG93LWRlbmRyb2dyYW0ge1xcclxcbiAgICBmbG9hdDogcmlnaHQ7XFxyXFxuICAgIGJvcmRlci1yYWRpdXM6IDNweDtcXHJcXG4gICAgYm9yZGVyOiAxcHggc29saWQgI0QxRDNENDtcXHJcXG4gICAgZm9udC13ZWlnaHQ6IG5vcm1hbDtcXHJcXG59XFxyXFxuXFxyXFxuLnNob3ctZGVuZHJvZ3JhbTpob3ZlciB7XFxyXFxuICAgIGJhY2tncm91bmQ6ICNEMUQzRDQ7XFxyXFxufVxcclxcblxcclxcbi5kZW5kcm9ncmFtLXRleHQge1xcclxcbiAgICBmb250LXNpemU6IDEwZW0gIWltcG9ydGFudDtcXHJcXG59XFxyXFxuXFxyXFxuLmhpZ2hsaWdodC1oaWVyYXJjaHkge1xcclxcbiAgICBmaWxsOiAjMjUyNTI1O1xcclxcbiAgICBzdHJva2U6ICMyNTI1MjU7XFxyXFxuICAgIHN0cm9rZS13aWR0aDogMTA7XFxyXFxuICAgIHN0cm9rZS1saW5lam9pbjogcm91bmQ7XFxyXFxuICAgIG9wYWNpdHk6IDAuMztcXHJcXG59XFxyXFxuXFxyXFxuLmFuaW1hbC1oaWdobGlnaHQge1xcclxcbiAgICBmaWxsOiAjYzUxYjdkICFpbXBvcnRhbnQ7XFxyXFxufVxcclxcblxcclxcbiNkZW5kcm9ncmFtLWJ1dHRvbnMtZGl2IC5idG4gc3Bhbi5nbHlwaGljb24ge1xcclxcbiAgICBvcGFjaXR5OiAwO1xcclxcbn1cXHJcXG5cXHJcXG4jZGVuZHJvZ3JhbS1idXR0b25zLWRpdiAuYnRuLmFjdGl2ZSBzcGFuLmdseXBoaWNvbiB7XFxyXFxuICAgIG9wYWNpdHk6IDE7XFxyXFxufVxcclxcblxcclxcbiNkZW5kcm9ncmFtLWJ1dHRvbnMtZGl2IHtcXHJcXG4gICAgYm9yZGVyOiAycHggc29saWQgI0QxRDNENDtcXHJcXG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xcclxcbn1cXHJcXG5cXHJcXG4jZGVuZHJvZ3JhbS1sZWdlbmQge1xcclxcbiAgICBtYXJnaW4tbGVmdDogMjBweDtcXHJcXG59XFxyXFxuXFxyXFxuLmludGVyc2VjdGlvbiB7XFxyXFxuICAgIGZpbGw6IHVybCgjc3RyaXBlZCkgIWltcG9ydGFudDtcXHJcXG4gICAgc3Ryb2tlOiAjNjcwMDBkO1xcclxcbn1cXHJcXG5cXHJcXG4uc3ltLWRpZmZlcmVuY2Uge1xcclxcbiAgICBmaWxsOiB1cmwoI3N0cmlwZWQpICFpbXBvcnRhbnQ7XFxyXFxuICAgIHN0cm9rZTogIzY3MDAwZDtcXHJcXG59XFxyXFxuXFxyXFxuLm1vZGFsLWxnIHtcXHJcXG4gICAgbWF4LXdpZHRoOiA4MCU7XFxyXFxufVxcclxcblxcclxcbi5iYWNrZ3JvdW5kLWltYWdlIHtcXHJcXG4gICAgYmFja2dyb3VuZDogI2ZmZjtcXHJcXG59XCIsIFwiXCJdKTtcbi8vIEV4cG9ydHNcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cztcbiIsIlwidXNlIHN0cmljdFwiO1xuXG4vKlxuICBNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuICBBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xuLy8gY3NzIGJhc2UgY29kZSwgaW5qZWN0ZWQgYnkgdGhlIGNzcy1sb2FkZXJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh1c2VTb3VyY2VNYXApIHtcbiAgdmFyIGxpc3QgPSBbXTsgLy8gcmV0dXJuIHRoZSBsaXN0IG9mIG1vZHVsZXMgYXMgY3NzIHN0cmluZ1xuXG4gIGxpc3QudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIHZhciBjb250ZW50ID0gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtLCB1c2VTb3VyY2VNYXApO1xuXG4gICAgICBpZiAoaXRlbVsyXSkge1xuICAgICAgICByZXR1cm4gXCJAbWVkaWEgXCIuY29uY2F0KGl0ZW1bMl0sIFwiIHtcIikuY29uY2F0KGNvbnRlbnQsIFwifVwiKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgfSkuam9pbignJyk7XG4gIH07IC8vIGltcG9ydCBhIGxpc3Qgb2YgbW9kdWxlcyBpbnRvIHRoZSBsaXN0XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG5cblxuICBsaXN0LmkgPSBmdW5jdGlvbiAobW9kdWxlcywgbWVkaWFRdWVyeSwgZGVkdXBlKSB7XG4gICAgaWYgKHR5cGVvZiBtb2R1bGVzID09PSAnc3RyaW5nJykge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICBtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCAnJ11dO1xuICAgIH1cblxuICAgIHZhciBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzID0ge307XG5cbiAgICBpZiAoZGVkdXBlKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1kZXN0cnVjdHVyaW5nXG4gICAgICAgIHZhciBpZCA9IHRoaXNbaV1bMF07XG5cbiAgICAgICAgaWYgKGlkICE9IG51bGwpIHtcbiAgICAgICAgICBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2lkXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgbW9kdWxlcy5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHZhciBpdGVtID0gW10uY29uY2F0KG1vZHVsZXNbX2ldKTtcblxuICAgICAgaWYgKGRlZHVwZSAmJiBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb250aW51ZVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKG1lZGlhUXVlcnkpIHtcbiAgICAgICAgaWYgKCFpdGVtWzJdKSB7XG4gICAgICAgICAgaXRlbVsyXSA9IG1lZGlhUXVlcnk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlbVsyXSA9IFwiXCIuY29uY2F0KG1lZGlhUXVlcnksIFwiIGFuZCBcIikuY29uY2F0KGl0ZW1bMl0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGxpc3QucHVzaChpdGVtKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGxpc3Q7XG59O1xuXG5mdW5jdGlvbiBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0sIHVzZVNvdXJjZU1hcCkge1xuICB2YXIgY29udGVudCA9IGl0ZW1bMV0gfHwgJyc7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItZGVzdHJ1Y3R1cmluZ1xuXG4gIHZhciBjc3NNYXBwaW5nID0gaXRlbVszXTtcblxuICBpZiAoIWNzc01hcHBpbmcpIHtcbiAgICByZXR1cm4gY29udGVudDtcbiAgfVxuXG4gIGlmICh1c2VTb3VyY2VNYXAgJiYgdHlwZW9mIGJ0b2EgPT09ICdmdW5jdGlvbicpIHtcbiAgICB2YXIgc291cmNlTWFwcGluZyA9IHRvQ29tbWVudChjc3NNYXBwaW5nKTtcbiAgICB2YXIgc291cmNlVVJMcyA9IGNzc01hcHBpbmcuc291cmNlcy5tYXAoZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgcmV0dXJuIFwiLyojIHNvdXJjZVVSTD1cIi5jb25jYXQoY3NzTWFwcGluZy5zb3VyY2VSb290IHx8ICcnKS5jb25jYXQoc291cmNlLCBcIiAqL1wiKTtcbiAgICB9KTtcbiAgICByZXR1cm4gW2NvbnRlbnRdLmNvbmNhdChzb3VyY2VVUkxzKS5jb25jYXQoW3NvdXJjZU1hcHBpbmddKS5qb2luKCdcXG4nKTtcbiAgfVxuXG4gIHJldHVybiBbY29udGVudF0uam9pbignXFxuJyk7XG59IC8vIEFkYXB0ZWQgZnJvbSBjb252ZXJ0LXNvdXJjZS1tYXAgKE1JVClcblxuXG5mdW5jdGlvbiB0b0NvbW1lbnQoc291cmNlTWFwKSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICB2YXIgYmFzZTY0ID0gYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKTtcbiAgdmFyIGRhdGEgPSBcInNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LFwiLmNvbmNhdChiYXNlNjQpO1xuICByZXR1cm4gXCIvKiMgXCIuY29uY2F0KGRhdGEsIFwiICovXCIpO1xufSIsIi8qXG5cdE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG5cdEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcbiovXG5cbnZhciBzdHlsZXNJbkRvbSA9IHt9O1xuXG52YXJcdG1lbW9pemUgPSBmdW5jdGlvbiAoZm4pIHtcblx0dmFyIG1lbW87XG5cblx0cmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0XHRpZiAodHlwZW9mIG1lbW8gPT09IFwidW5kZWZpbmVkXCIpIG1lbW8gPSBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHRcdHJldHVybiBtZW1vO1xuXHR9O1xufTtcblxudmFyIGlzT2xkSUUgPSBtZW1vaXplKGZ1bmN0aW9uICgpIHtcblx0Ly8gVGVzdCBmb3IgSUUgPD0gOSBhcyBwcm9wb3NlZCBieSBCcm93c2VyaGFja3Ncblx0Ly8gQHNlZSBodHRwOi8vYnJvd3NlcmhhY2tzLmNvbS8jaGFjay1lNzFkODY5MmY2NTMzNDE3M2ZlZTcxNWMyMjJjYjgwNVxuXHQvLyBUZXN0cyBmb3IgZXhpc3RlbmNlIG9mIHN0YW5kYXJkIGdsb2JhbHMgaXMgdG8gYWxsb3cgc3R5bGUtbG9hZGVyXG5cdC8vIHRvIG9wZXJhdGUgY29ycmVjdGx5IGludG8gbm9uLXN0YW5kYXJkIGVudmlyb25tZW50c1xuXHQvLyBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrLWNvbnRyaWIvc3R5bGUtbG9hZGVyL2lzc3Vlcy8xNzdcblx0cmV0dXJuIHdpbmRvdyAmJiBkb2N1bWVudCAmJiBkb2N1bWVudC5hbGwgJiYgIXdpbmRvdy5hdG9iO1xufSk7XG5cbnZhciBnZXRUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCk7XG59O1xuXG52YXIgZ2V0RWxlbWVudCA9IChmdW5jdGlvbiAoZm4pIHtcblx0dmFyIG1lbW8gPSB7fTtcblxuXHRyZXR1cm4gZnVuY3Rpb24odGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgcGFzc2luZyBmdW5jdGlvbiBpbiBvcHRpb25zLCB0aGVuIHVzZSBpdCBmb3IgcmVzb2x2ZSBcImhlYWRcIiBlbGVtZW50LlxuICAgICAgICAgICAgICAgIC8vIFVzZWZ1bCBmb3IgU2hhZG93IFJvb3Qgc3R5bGUgaS5lXG4gICAgICAgICAgICAgICAgLy8ge1xuICAgICAgICAgICAgICAgIC8vICAgaW5zZXJ0SW50bzogZnVuY3Rpb24gKCkgeyByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNmb29cIikuc2hhZG93Um9vdCB9XG4gICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGFyZ2V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVtb1t0YXJnZXRdID09PSBcInVuZGVmaW5lZFwiKSB7XG5cdFx0XHR2YXIgc3R5bGVUYXJnZXQgPSBnZXRUYXJnZXQuY2FsbCh0aGlzLCB0YXJnZXQpO1xuXHRcdFx0Ly8gU3BlY2lhbCBjYXNlIHRvIHJldHVybiBoZWFkIG9mIGlmcmFtZSBpbnN0ZWFkIG9mIGlmcmFtZSBpdHNlbGZcblx0XHRcdGlmICh3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQgJiYgc3R5bGVUYXJnZXQgaW5zdGFuY2VvZiB3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQpIHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHQvLyBUaGlzIHdpbGwgdGhyb3cgYW4gZXhjZXB0aW9uIGlmIGFjY2VzcyB0byBpZnJhbWUgaXMgYmxvY2tlZFxuXHRcdFx0XHRcdC8vIGR1ZSB0byBjcm9zcy1vcmlnaW4gcmVzdHJpY3Rpb25zXG5cdFx0XHRcdFx0c3R5bGVUYXJnZXQgPSBzdHlsZVRhcmdldC5jb250ZW50RG9jdW1lbnQuaGVhZDtcblx0XHRcdFx0fSBjYXRjaChlKSB7XG5cdFx0XHRcdFx0c3R5bGVUYXJnZXQgPSBudWxsO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRtZW1vW3RhcmdldF0gPSBzdHlsZVRhcmdldDtcblx0XHR9XG5cdFx0cmV0dXJuIG1lbW9bdGFyZ2V0XVxuXHR9O1xufSkoKTtcblxudmFyIHNpbmdsZXRvbiA9IG51bGw7XG52YXJcdHNpbmdsZXRvbkNvdW50ZXIgPSAwO1xudmFyXHRzdHlsZXNJbnNlcnRlZEF0VG9wID0gW107XG5cbnZhclx0Zml4VXJscyA9IHJlcXVpcmUoXCIuL3VybHNcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obGlzdCwgb3B0aW9ucykge1xuXHRpZiAodHlwZW9mIERFQlVHICE9PSBcInVuZGVmaW5lZFwiICYmIERFQlVHKSB7XG5cdFx0aWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJvYmplY3RcIikgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHN0eWxlLWxvYWRlciBjYW5ub3QgYmUgdXNlZCBpbiBhIG5vbi1icm93c2VyIGVudmlyb25tZW50XCIpO1xuXHR9XG5cblx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cblx0b3B0aW9ucy5hdHRycyA9IHR5cGVvZiBvcHRpb25zLmF0dHJzID09PSBcIm9iamVjdFwiID8gb3B0aW9ucy5hdHRycyA6IHt9O1xuXG5cdC8vIEZvcmNlIHNpbmdsZS10YWcgc29sdXRpb24gb24gSUU2LTksIHdoaWNoIGhhcyBhIGhhcmQgbGltaXQgb24gdGhlICMgb2YgPHN0eWxlPlxuXHQvLyB0YWdzIGl0IHdpbGwgYWxsb3cgb24gYSBwYWdlXG5cdGlmICghb3B0aW9ucy5zaW5nbGV0b24gJiYgdHlwZW9mIG9wdGlvbnMuc2luZ2xldG9uICE9PSBcImJvb2xlYW5cIikgb3B0aW9ucy5zaW5nbGV0b24gPSBpc09sZElFKCk7XG5cblx0Ly8gQnkgZGVmYXVsdCwgYWRkIDxzdHlsZT4gdGFncyB0byB0aGUgPGhlYWQ+IGVsZW1lbnRcbiAgICAgICAgaWYgKCFvcHRpb25zLmluc2VydEludG8pIG9wdGlvbnMuaW5zZXJ0SW50byA9IFwiaGVhZFwiO1xuXG5cdC8vIEJ5IGRlZmF1bHQsIGFkZCA8c3R5bGU+IHRhZ3MgdG8gdGhlIGJvdHRvbSBvZiB0aGUgdGFyZ2V0XG5cdGlmICghb3B0aW9ucy5pbnNlcnRBdCkgb3B0aW9ucy5pbnNlcnRBdCA9IFwiYm90dG9tXCI7XG5cblx0dmFyIHN0eWxlcyA9IGxpc3RUb1N0eWxlcyhsaXN0LCBvcHRpb25zKTtcblxuXHRhZGRTdHlsZXNUb0RvbShzdHlsZXMsIG9wdGlvbnMpO1xuXG5cdHJldHVybiBmdW5jdGlvbiB1cGRhdGUgKG5ld0xpc3QpIHtcblx0XHR2YXIgbWF5UmVtb3ZlID0gW107XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGl0ZW0gPSBzdHlsZXNbaV07XG5cdFx0XHR2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcblxuXHRcdFx0ZG9tU3R5bGUucmVmcy0tO1xuXHRcdFx0bWF5UmVtb3ZlLnB1c2goZG9tU3R5bGUpO1xuXHRcdH1cblxuXHRcdGlmKG5ld0xpc3QpIHtcblx0XHRcdHZhciBuZXdTdHlsZXMgPSBsaXN0VG9TdHlsZXMobmV3TGlzdCwgb3B0aW9ucyk7XG5cdFx0XHRhZGRTdHlsZXNUb0RvbShuZXdTdHlsZXMsIG9wdGlvbnMpO1xuXHRcdH1cblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbWF5UmVtb3ZlLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgZG9tU3R5bGUgPSBtYXlSZW1vdmVbaV07XG5cblx0XHRcdGlmKGRvbVN0eWxlLnJlZnMgPT09IDApIHtcblx0XHRcdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKykgZG9tU3R5bGUucGFydHNbal0oKTtcblxuXHRcdFx0XHRkZWxldGUgc3R5bGVzSW5Eb21bZG9tU3R5bGUuaWRdO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcbn07XG5cbmZ1bmN0aW9uIGFkZFN0eWxlc1RvRG9tIChzdHlsZXMsIG9wdGlvbnMpIHtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgaXRlbSA9IHN0eWxlc1tpXTtcblx0XHR2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcblxuXHRcdGlmKGRvbVN0eWxlKSB7XG5cdFx0XHRkb21TdHlsZS5yZWZzKys7XG5cblx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRkb21TdHlsZS5wYXJ0c1tqXShpdGVtLnBhcnRzW2pdKTtcblx0XHRcdH1cblxuXHRcdFx0Zm9yKDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0ZG9tU3R5bGUucGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZhciBwYXJ0cyA9IFtdO1xuXG5cdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRwYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0sIG9wdGlvbnMpKTtcblx0XHRcdH1cblxuXHRcdFx0c3R5bGVzSW5Eb21baXRlbS5pZF0gPSB7aWQ6IGl0ZW0uaWQsIHJlZnM6IDEsIHBhcnRzOiBwYXJ0c307XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIGxpc3RUb1N0eWxlcyAobGlzdCwgb3B0aW9ucykge1xuXHR2YXIgc3R5bGVzID0gW107XG5cdHZhciBuZXdTdHlsZXMgPSB7fTtcblxuXHRmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgaXRlbSA9IGxpc3RbaV07XG5cdFx0dmFyIGlkID0gb3B0aW9ucy5iYXNlID8gaXRlbVswXSArIG9wdGlvbnMuYmFzZSA6IGl0ZW1bMF07XG5cdFx0dmFyIGNzcyA9IGl0ZW1bMV07XG5cdFx0dmFyIG1lZGlhID0gaXRlbVsyXTtcblx0XHR2YXIgc291cmNlTWFwID0gaXRlbVszXTtcblx0XHR2YXIgcGFydCA9IHtjc3M6IGNzcywgbWVkaWE6IG1lZGlhLCBzb3VyY2VNYXA6IHNvdXJjZU1hcH07XG5cblx0XHRpZighbmV3U3R5bGVzW2lkXSkgc3R5bGVzLnB1c2gobmV3U3R5bGVzW2lkXSA9IHtpZDogaWQsIHBhcnRzOiBbcGFydF19KTtcblx0XHRlbHNlIG5ld1N0eWxlc1tpZF0ucGFydHMucHVzaChwYXJ0KTtcblx0fVxuXG5cdHJldHVybiBzdHlsZXM7XG59XG5cbmZ1bmN0aW9uIGluc2VydFN0eWxlRWxlbWVudCAob3B0aW9ucywgc3R5bGUpIHtcblx0dmFyIHRhcmdldCA9IGdldEVsZW1lbnQob3B0aW9ucy5pbnNlcnRJbnRvKVxuXG5cdGlmICghdGFyZ2V0KSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiQ291bGRuJ3QgZmluZCBhIHN0eWxlIHRhcmdldC4gVGhpcyBwcm9iYWJseSBtZWFucyB0aGF0IHRoZSB2YWx1ZSBmb3IgdGhlICdpbnNlcnRJbnRvJyBwYXJhbWV0ZXIgaXMgaW52YWxpZC5cIik7XG5cdH1cblxuXHR2YXIgbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AgPSBzdHlsZXNJbnNlcnRlZEF0VG9wW3N0eWxlc0luc2VydGVkQXRUb3AubGVuZ3RoIC0gMV07XG5cblx0aWYgKG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwidG9wXCIpIHtcblx0XHRpZiAoIWxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wKSB7XG5cdFx0XHR0YXJnZXQuaW5zZXJ0QmVmb3JlKHN0eWxlLCB0YXJnZXQuZmlyc3RDaGlsZCk7XG5cdFx0fSBlbHNlIGlmIChsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcC5uZXh0U2libGluZykge1xuXHRcdFx0dGFyZ2V0Lmluc2VydEJlZm9yZShzdHlsZSwgbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AubmV4dFNpYmxpbmcpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuXHRcdH1cblx0XHRzdHlsZXNJbnNlcnRlZEF0VG9wLnB1c2goc3R5bGUpO1xuXHR9IGVsc2UgaWYgKG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwiYm90dG9tXCIpIHtcblx0XHR0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zLmluc2VydEF0ID09PSBcIm9iamVjdFwiICYmIG9wdGlvbnMuaW5zZXJ0QXQuYmVmb3JlKSB7XG5cdFx0dmFyIG5leHRTaWJsaW5nID0gZ2V0RWxlbWVudChvcHRpb25zLmluc2VydEludG8gKyBcIiBcIiArIG9wdGlvbnMuaW5zZXJ0QXQuYmVmb3JlKTtcblx0XHR0YXJnZXQuaW5zZXJ0QmVmb3JlKHN0eWxlLCBuZXh0U2libGluZyk7XG5cdH0gZWxzZSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiW1N0eWxlIExvYWRlcl1cXG5cXG4gSW52YWxpZCB2YWx1ZSBmb3IgcGFyYW1ldGVyICdpbnNlcnRBdCcgKCdvcHRpb25zLmluc2VydEF0JykgZm91bmQuXFxuIE11c3QgYmUgJ3RvcCcsICdib3R0b20nLCBvciBPYmplY3QuXFxuIChodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay1jb250cmliL3N0eWxlLWxvYWRlciNpbnNlcnRhdClcXG5cIik7XG5cdH1cbn1cblxuZnVuY3Rpb24gcmVtb3ZlU3R5bGVFbGVtZW50IChzdHlsZSkge1xuXHRpZiAoc3R5bGUucGFyZW50Tm9kZSA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuXHRzdHlsZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlKTtcblxuXHR2YXIgaWR4ID0gc3R5bGVzSW5zZXJ0ZWRBdFRvcC5pbmRleE9mKHN0eWxlKTtcblx0aWYoaWR4ID49IDApIHtcblx0XHRzdHlsZXNJbnNlcnRlZEF0VG9wLnNwbGljZShpZHgsIDEpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVN0eWxlRWxlbWVudCAob3B0aW9ucykge1xuXHR2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG5cblx0aWYob3B0aW9ucy5hdHRycy50eXBlID09PSB1bmRlZmluZWQpIHtcblx0XHRvcHRpb25zLmF0dHJzLnR5cGUgPSBcInRleHQvY3NzXCI7XG5cdH1cblxuXHRhZGRBdHRycyhzdHlsZSwgb3B0aW9ucy5hdHRycyk7XG5cdGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zLCBzdHlsZSk7XG5cblx0cmV0dXJuIHN0eWxlO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVMaW5rRWxlbWVudCAob3B0aW9ucykge1xuXHR2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO1xuXG5cdGlmKG9wdGlvbnMuYXR0cnMudHlwZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0b3B0aW9ucy5hdHRycy50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xuXHR9XG5cdG9wdGlvbnMuYXR0cnMucmVsID0gXCJzdHlsZXNoZWV0XCI7XG5cblx0YWRkQXR0cnMobGluaywgb3B0aW9ucy5hdHRycyk7XG5cdGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zLCBsaW5rKTtcblxuXHRyZXR1cm4gbGluaztcbn1cblxuZnVuY3Rpb24gYWRkQXR0cnMgKGVsLCBhdHRycykge1xuXHRPYmplY3Qua2V5cyhhdHRycykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG5cdFx0ZWwuc2V0QXR0cmlidXRlKGtleSwgYXR0cnNba2V5XSk7XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBhZGRTdHlsZSAob2JqLCBvcHRpb25zKSB7XG5cdHZhciBzdHlsZSwgdXBkYXRlLCByZW1vdmUsIHJlc3VsdDtcblxuXHQvLyBJZiBhIHRyYW5zZm9ybSBmdW5jdGlvbiB3YXMgZGVmaW5lZCwgcnVuIGl0IG9uIHRoZSBjc3Ncblx0aWYgKG9wdGlvbnMudHJhbnNmb3JtICYmIG9iai5jc3MpIHtcblx0ICAgIHJlc3VsdCA9IG9wdGlvbnMudHJhbnNmb3JtKG9iai5jc3MpO1xuXG5cdCAgICBpZiAocmVzdWx0KSB7XG5cdCAgICBcdC8vIElmIHRyYW5zZm9ybSByZXR1cm5zIGEgdmFsdWUsIHVzZSB0aGF0IGluc3RlYWQgb2YgdGhlIG9yaWdpbmFsIGNzcy5cblx0ICAgIFx0Ly8gVGhpcyBhbGxvd3MgcnVubmluZyBydW50aW1lIHRyYW5zZm9ybWF0aW9ucyBvbiB0aGUgY3NzLlxuXHQgICAgXHRvYmouY3NzID0gcmVzdWx0O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgIFx0Ly8gSWYgdGhlIHRyYW5zZm9ybSBmdW5jdGlvbiByZXR1cm5zIGEgZmFsc3kgdmFsdWUsIGRvbid0IGFkZCB0aGlzIGNzcy5cblx0ICAgIFx0Ly8gVGhpcyBhbGxvd3MgY29uZGl0aW9uYWwgbG9hZGluZyBvZiBjc3Ncblx0ICAgIFx0cmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgXHRcdC8vIG5vb3Bcblx0ICAgIFx0fTtcblx0ICAgIH1cblx0fVxuXG5cdGlmIChvcHRpb25zLnNpbmdsZXRvbikge1xuXHRcdHZhciBzdHlsZUluZGV4ID0gc2luZ2xldG9uQ291bnRlcisrO1xuXG5cdFx0c3R5bGUgPSBzaW5nbGV0b24gfHwgKHNpbmdsZXRvbiA9IGNyZWF0ZVN0eWxlRWxlbWVudChvcHRpb25zKSk7XG5cblx0XHR1cGRhdGUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIGZhbHNlKTtcblx0XHRyZW1vdmUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIHRydWUpO1xuXG5cdH0gZWxzZSBpZiAoXG5cdFx0b2JqLnNvdXJjZU1hcCAmJlxuXHRcdHR5cGVvZiBVUkwgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBVUkwuY3JlYXRlT2JqZWN0VVJMID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgVVJMLnJldm9rZU9iamVjdFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIEJsb2IgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBidG9hID09PSBcImZ1bmN0aW9uXCJcblx0KSB7XG5cdFx0c3R5bGUgPSBjcmVhdGVMaW5rRWxlbWVudChvcHRpb25zKTtcblx0XHR1cGRhdGUgPSB1cGRhdGVMaW5rLmJpbmQobnVsbCwgc3R5bGUsIG9wdGlvbnMpO1xuXHRcdHJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSk7XG5cblx0XHRcdGlmKHN0eWxlLmhyZWYpIFVSTC5yZXZva2VPYmplY3RVUkwoc3R5bGUuaHJlZik7XG5cdFx0fTtcblx0fSBlbHNlIHtcblx0XHRzdHlsZSA9IGNyZWF0ZVN0eWxlRWxlbWVudChvcHRpb25zKTtcblx0XHR1cGRhdGUgPSBhcHBseVRvVGFnLmJpbmQobnVsbCwgc3R5bGUpO1xuXHRcdHJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSk7XG5cdFx0fTtcblx0fVxuXG5cdHVwZGF0ZShvYmopO1xuXG5cdHJldHVybiBmdW5jdGlvbiB1cGRhdGVTdHlsZSAobmV3T2JqKSB7XG5cdFx0aWYgKG5ld09iaikge1xuXHRcdFx0aWYgKFxuXHRcdFx0XHRuZXdPYmouY3NzID09PSBvYmouY3NzICYmXG5cdFx0XHRcdG5ld09iai5tZWRpYSA9PT0gb2JqLm1lZGlhICYmXG5cdFx0XHRcdG5ld09iai5zb3VyY2VNYXAgPT09IG9iai5zb3VyY2VNYXBcblx0XHRcdCkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdHVwZGF0ZShvYmogPSBuZXdPYmopO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZW1vdmUoKTtcblx0XHR9XG5cdH07XG59XG5cbnZhciByZXBsYWNlVGV4dCA9IChmdW5jdGlvbiAoKSB7XG5cdHZhciB0ZXh0U3RvcmUgPSBbXTtcblxuXHRyZXR1cm4gZnVuY3Rpb24gKGluZGV4LCByZXBsYWNlbWVudCkge1xuXHRcdHRleHRTdG9yZVtpbmRleF0gPSByZXBsYWNlbWVudDtcblxuXHRcdHJldHVybiB0ZXh0U3RvcmUuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJ1xcbicpO1xuXHR9O1xufSkoKTtcblxuZnVuY3Rpb24gYXBwbHlUb1NpbmdsZXRvblRhZyAoc3R5bGUsIGluZGV4LCByZW1vdmUsIG9iaikge1xuXHR2YXIgY3NzID0gcmVtb3ZlID8gXCJcIiA6IG9iai5jc3M7XG5cblx0aWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcblx0XHRzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSByZXBsYWNlVGV4dChpbmRleCwgY3NzKTtcblx0fSBlbHNlIHtcblx0XHR2YXIgY3NzTm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcyk7XG5cdFx0dmFyIGNoaWxkTm9kZXMgPSBzdHlsZS5jaGlsZE5vZGVzO1xuXG5cdFx0aWYgKGNoaWxkTm9kZXNbaW5kZXhdKSBzdHlsZS5yZW1vdmVDaGlsZChjaGlsZE5vZGVzW2luZGV4XSk7XG5cblx0XHRpZiAoY2hpbGROb2Rlcy5sZW5ndGgpIHtcblx0XHRcdHN0eWxlLmluc2VydEJlZm9yZShjc3NOb2RlLCBjaGlsZE5vZGVzW2luZGV4XSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHN0eWxlLmFwcGVuZENoaWxkKGNzc05vZGUpO1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBhcHBseVRvVGFnIChzdHlsZSwgb2JqKSB7XG5cdHZhciBjc3MgPSBvYmouY3NzO1xuXHR2YXIgbWVkaWEgPSBvYmoubWVkaWE7XG5cblx0aWYobWVkaWEpIHtcblx0XHRzdHlsZS5zZXRBdHRyaWJ1dGUoXCJtZWRpYVwiLCBtZWRpYSlcblx0fVxuXG5cdGlmKHN0eWxlLnN0eWxlU2hlZXQpIHtcblx0XHRzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XG5cdH0gZWxzZSB7XG5cdFx0d2hpbGUoc3R5bGUuZmlyc3RDaGlsZCkge1xuXHRcdFx0c3R5bGUucmVtb3ZlQ2hpbGQoc3R5bGUuZmlyc3RDaGlsZCk7XG5cdFx0fVxuXG5cdFx0c3R5bGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XG5cdH1cbn1cblxuZnVuY3Rpb24gdXBkYXRlTGluayAobGluaywgb3B0aW9ucywgb2JqKSB7XG5cdHZhciBjc3MgPSBvYmouY3NzO1xuXHR2YXIgc291cmNlTWFwID0gb2JqLnNvdXJjZU1hcDtcblxuXHQvKlxuXHRcdElmIGNvbnZlcnRUb0Fic29sdXRlVXJscyBpc24ndCBkZWZpbmVkLCBidXQgc291cmNlbWFwcyBhcmUgZW5hYmxlZFxuXHRcdGFuZCB0aGVyZSBpcyBubyBwdWJsaWNQYXRoIGRlZmluZWQgdGhlbiBsZXRzIHR1cm4gY29udmVydFRvQWJzb2x1dGVVcmxzXG5cdFx0b24gYnkgZGVmYXVsdC4gIE90aGVyd2lzZSBkZWZhdWx0IHRvIHRoZSBjb252ZXJ0VG9BYnNvbHV0ZVVybHMgb3B0aW9uXG5cdFx0ZGlyZWN0bHlcblx0Ki9cblx0dmFyIGF1dG9GaXhVcmxzID0gb3B0aW9ucy5jb252ZXJ0VG9BYnNvbHV0ZVVybHMgPT09IHVuZGVmaW5lZCAmJiBzb3VyY2VNYXA7XG5cblx0aWYgKG9wdGlvbnMuY29udmVydFRvQWJzb2x1dGVVcmxzIHx8IGF1dG9GaXhVcmxzKSB7XG5cdFx0Y3NzID0gZml4VXJscyhjc3MpO1xuXHR9XG5cblx0aWYgKHNvdXJjZU1hcCkge1xuXHRcdC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI2NjAzODc1XG5cdFx0Y3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIiArIGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSkgKyBcIiAqL1wiO1xuXHR9XG5cblx0dmFyIGJsb2IgPSBuZXcgQmxvYihbY3NzXSwgeyB0eXBlOiBcInRleHQvY3NzXCIgfSk7XG5cblx0dmFyIG9sZFNyYyA9IGxpbmsuaHJlZjtcblxuXHRsaW5rLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuXG5cdGlmKG9sZFNyYykgVVJMLnJldm9rZU9iamVjdFVSTChvbGRTcmMpO1xufVxuIiwiXG4vKipcbiAqIFdoZW4gc291cmNlIG1hcHMgYXJlIGVuYWJsZWQsIGBzdHlsZS1sb2FkZXJgIHVzZXMgYSBsaW5rIGVsZW1lbnQgd2l0aCBhIGRhdGEtdXJpIHRvXG4gKiBlbWJlZCB0aGUgY3NzIG9uIHRoZSBwYWdlLiBUaGlzIGJyZWFrcyBhbGwgcmVsYXRpdmUgdXJscyBiZWNhdXNlIG5vdyB0aGV5IGFyZSByZWxhdGl2ZSB0byBhXG4gKiBidW5kbGUgaW5zdGVhZCBvZiB0aGUgY3VycmVudCBwYWdlLlxuICpcbiAqIE9uZSBzb2x1dGlvbiBpcyB0byBvbmx5IHVzZSBmdWxsIHVybHMsIGJ1dCB0aGF0IG1heSBiZSBpbXBvc3NpYmxlLlxuICpcbiAqIEluc3RlYWQsIHRoaXMgZnVuY3Rpb24gXCJmaXhlc1wiIHRoZSByZWxhdGl2ZSB1cmxzIHRvIGJlIGFic29sdXRlIGFjY29yZGluZyB0byB0aGUgY3VycmVudCBwYWdlIGxvY2F0aW9uLlxuICpcbiAqIEEgcnVkaW1lbnRhcnkgdGVzdCBzdWl0ZSBpcyBsb2NhdGVkIGF0IGB0ZXN0L2ZpeFVybHMuanNgIGFuZCBjYW4gYmUgcnVuIHZpYSB0aGUgYG5wbSB0ZXN0YCBjb21tYW5kLlxuICpcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjc3MpIHtcbiAgLy8gZ2V0IGN1cnJlbnQgbG9jYXRpb25cbiAgdmFyIGxvY2F0aW9uID0gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cubG9jYXRpb247XG5cbiAgaWYgKCFsb2NhdGlvbikge1xuICAgIHRocm93IG5ldyBFcnJvcihcImZpeFVybHMgcmVxdWlyZXMgd2luZG93LmxvY2F0aW9uXCIpO1xuICB9XG5cblx0Ly8gYmxhbmsgb3IgbnVsbD9cblx0aWYgKCFjc3MgfHwgdHlwZW9mIGNzcyAhPT0gXCJzdHJpbmdcIikge1xuXHQgIHJldHVybiBjc3M7XG4gIH1cblxuICB2YXIgYmFzZVVybCA9IGxvY2F0aW9uLnByb3RvY29sICsgXCIvL1wiICsgbG9jYXRpb24uaG9zdDtcbiAgdmFyIGN1cnJlbnREaXIgPSBiYXNlVXJsICsgbG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZSgvXFwvW15cXC9dKiQvLCBcIi9cIik7XG5cblx0Ly8gY29udmVydCBlYWNoIHVybCguLi4pXG5cdC8qXG5cdFRoaXMgcmVndWxhciBleHByZXNzaW9uIGlzIGp1c3QgYSB3YXkgdG8gcmVjdXJzaXZlbHkgbWF0Y2ggYnJhY2tldHMgd2l0aGluXG5cdGEgc3RyaW5nLlxuXG5cdCAvdXJsXFxzKlxcKCAgPSBNYXRjaCBvbiB0aGUgd29yZCBcInVybFwiIHdpdGggYW55IHdoaXRlc3BhY2UgYWZ0ZXIgaXQgYW5kIHRoZW4gYSBwYXJlbnNcblx0ICAgKCAgPSBTdGFydCBhIGNhcHR1cmluZyBncm91cFxuXHQgICAgICg/OiAgPSBTdGFydCBhIG5vbi1jYXB0dXJpbmcgZ3JvdXBcblx0ICAgICAgICAgW14pKF0gID0gTWF0Y2ggYW55dGhpbmcgdGhhdCBpc24ndCBhIHBhcmVudGhlc2VzXG5cdCAgICAgICAgIHwgID0gT1Jcblx0ICAgICAgICAgXFwoICA9IE1hdGNoIGEgc3RhcnQgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICg/OiAgPSBTdGFydCBhbm90aGVyIG5vbi1jYXB0dXJpbmcgZ3JvdXBzXG5cdCAgICAgICAgICAgICAgICAgW14pKF0rICA9IE1hdGNoIGFueXRoaW5nIHRoYXQgaXNuJ3QgYSBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgICAgIHwgID0gT1Jcblx0ICAgICAgICAgICAgICAgICBcXCggID0gTWF0Y2ggYSBzdGFydCBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgICAgICAgICBbXikoXSogID0gTWF0Y2ggYW55dGhpbmcgdGhhdCBpc24ndCBhIHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICAgICAgXFwpICA9IE1hdGNoIGEgZW5kIHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICApICA9IEVuZCBHcm91cFxuICAgICAgICAgICAgICAqXFwpID0gTWF0Y2ggYW55dGhpbmcgYW5kIHRoZW4gYSBjbG9zZSBwYXJlbnNcbiAgICAgICAgICApICA9IENsb3NlIG5vbi1jYXB0dXJpbmcgZ3JvdXBcbiAgICAgICAgICAqICA9IE1hdGNoIGFueXRoaW5nXG4gICAgICAgKSAgPSBDbG9zZSBjYXB0dXJpbmcgZ3JvdXBcblx0IFxcKSAgPSBNYXRjaCBhIGNsb3NlIHBhcmVuc1xuXG5cdCAvZ2kgID0gR2V0IGFsbCBtYXRjaGVzLCBub3QgdGhlIGZpcnN0LiAgQmUgY2FzZSBpbnNlbnNpdGl2ZS5cblx0ICovXG5cdHZhciBmaXhlZENzcyA9IGNzcy5yZXBsYWNlKC91cmxcXHMqXFwoKCg/OlteKShdfFxcKCg/OlteKShdK3xcXChbXikoXSpcXCkpKlxcKSkqKVxcKS9naSwgZnVuY3Rpb24oZnVsbE1hdGNoLCBvcmlnVXJsKSB7XG5cdFx0Ly8gc3RyaXAgcXVvdGVzIChpZiB0aGV5IGV4aXN0KVxuXHRcdHZhciB1bnF1b3RlZE9yaWdVcmwgPSBvcmlnVXJsXG5cdFx0XHQudHJpbSgpXG5cdFx0XHQucmVwbGFjZSgvXlwiKC4qKVwiJC8sIGZ1bmN0aW9uKG8sICQxKXsgcmV0dXJuICQxOyB9KVxuXHRcdFx0LnJlcGxhY2UoL14nKC4qKSckLywgZnVuY3Rpb24obywgJDEpeyByZXR1cm4gJDE7IH0pO1xuXG5cdFx0Ly8gYWxyZWFkeSBhIGZ1bGwgdXJsPyBubyBjaGFuZ2Vcblx0XHRpZiAoL14oI3xkYXRhOnxodHRwOlxcL1xcL3xodHRwczpcXC9cXC98ZmlsZTpcXC9cXC9cXC98XFxzKiQpL2kudGVzdCh1bnF1b3RlZE9yaWdVcmwpKSB7XG5cdFx0ICByZXR1cm4gZnVsbE1hdGNoO1xuXHRcdH1cblxuXHRcdC8vIGNvbnZlcnQgdGhlIHVybCB0byBhIGZ1bGwgdXJsXG5cdFx0dmFyIG5ld1VybDtcblxuXHRcdGlmICh1bnF1b3RlZE9yaWdVcmwuaW5kZXhPZihcIi8vXCIpID09PSAwKSB7XG5cdFx0ICBcdC8vVE9ETzogc2hvdWxkIHdlIGFkZCBwcm90b2NvbD9cblx0XHRcdG5ld1VybCA9IHVucXVvdGVkT3JpZ1VybDtcblx0XHR9IGVsc2UgaWYgKHVucXVvdGVkT3JpZ1VybC5pbmRleE9mKFwiL1wiKSA9PT0gMCkge1xuXHRcdFx0Ly8gcGF0aCBzaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJhc2UgdXJsXG5cdFx0XHRuZXdVcmwgPSBiYXNlVXJsICsgdW5xdW90ZWRPcmlnVXJsOyAvLyBhbHJlYWR5IHN0YXJ0cyB3aXRoICcvJ1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBwYXRoIHNob3VsZCBiZSByZWxhdGl2ZSB0byBjdXJyZW50IGRpcmVjdG9yeVxuXHRcdFx0bmV3VXJsID0gY3VycmVudERpciArIHVucXVvdGVkT3JpZ1VybC5yZXBsYWNlKC9eXFwuXFwvLywgXCJcIik7IC8vIFN0cmlwIGxlYWRpbmcgJy4vJ1xuXHRcdH1cblxuXHRcdC8vIHNlbmQgYmFjayB0aGUgZml4ZWQgdXJsKC4uLilcblx0XHRyZXR1cm4gXCJ1cmwoXCIgKyBKU09OLnN0cmluZ2lmeShuZXdVcmwpICsgXCIpXCI7XG5cdH0pO1xuXG5cdC8vIHNlbmQgYmFjayB0aGUgZml4ZWQgY3NzXG5cdHJldHVybiBmaXhlZENzcztcbn07XG4iLCIvKmVzbGludC1kaXNhYmxlIG5vLXVudXNlZC1sZXRzKi9cclxuLypnbG9iYWwgd2luZG93LCBkMywgJCovXHJcbmltcG9ydCB7XHJcbiAgICBkYXRhc2V0TWV0YWRhdGEsXHJcbiAgICBzd2FybURhdGEsXHJcbiAgICBhbmltYWxJZHNcclxufSBmcm9tICcuLi9leHBsb3JlLmpzJztcclxuXHJcbmltcG9ydCAqIGFzIFNQViBmcm9tICcuL3NwYXRpYWxfdmlldy5qcyc7XHJcblxyXG5pbXBvcnQgKiBhcyBOZXR3b3JrIGZyb20gJy4uL25ldHdvcmsuanMnO1xyXG5cclxuZXhwb3J0IGxldCBzbGlkZXI7IC8vIHRpbWUgc2xpZGVyIG9mIHRoZSBhcHBcclxuZXhwb3J0IGxldCB0b29sdGlwOyAvLyB0b29sdGlwIGZ1bmN0aW9uXHJcblxyXG4vKipcclxuICogQnJ1c2ggZW5kIGZ1bmN0aW9uXHJcbiAqIGFkZCBhY3RpdmUgYW5pbWFscyB0byB0aGUgYXJyYXkgb3IgcmVtb3ZlIHRoZW1cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBicnVzaGVuZCgpIHtcclxuICAgIGxldCBhcnJheUFuaW1hbHMgPSBTUFYuYXJyYXlBbmltYWxzO1xyXG4gICAgbGV0IGFjdGl2ZUFuaW1hbHMgPSBTUFYuYWN0aXZlQW5pbWFscztcclxuICAgIHZhciByZWN0ID0gZDMuZXZlbnQuc2VsZWN0aW9uO1xyXG4gICAgLy9pdGVyYXRlIG92ZXIgdGhlIDE1MSBmaXNoIHRvIGNoZWNrIHdoaWNoIGFyZSBpbiB0aGUgYnJ1c2hcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYW5pbWFsSWRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIHBvaW50ID0gW2FycmF5QW5pbWFsc1tpXVsncCddWzBdLCBhcnJheUFuaW1hbHNbaV1bJ3AnXVsxXV07XHJcbiAgICAgICAgLy9jaGVjayB3aGljaCBmaXNoIGFyZSBpbiAgdGhlIGJydXNoZWQgYXJlYVxyXG4gICAgICAgIGlmICgocmVjdFswXVswXSA8PSBwb2ludFswXSkgJiYgKHBvaW50WzBdIDw9IHJlY3RbMV1bMF0pICYmXHJcbiAgICAgICAgICAgIChyZWN0WzBdWzFdIDw9IHBvaW50WzFdKSAmJiAocG9pbnRbMV0gPD0gcmVjdFsxXVsxXSkpIHtcclxuICAgICAgICAgICAgLy8gUG9pbnQgaXMgaW4gdGhlIGJydXNoXHJcbiAgICAgICAgICAgIGFjdGl2ZUFuaW1hbHMucHVzaChhcnJheUFuaW1hbHNbaV1bJ2EnXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgU1BWLnNldEFjdGl2ZUFuaW1hbHMoYWN0aXZlQW5pbWFscyk7XHJcbiAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpXHJcbiAgICAgICAgLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgIC8vZ28gYmFjayBvbmUgc2Vjb25kIGFuZCBkcmF3IHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgIFNQVi5kZWNJbmRleFRpbWUoKTtcclxuICAgICAgICBTUFYuZHJhdygpO1xyXG4gICAgfVxyXG4gICAgJCgnI2JydXNoaW5nLWJ1dHRvbicpXHJcbiAgICAgICAgLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgIC8vIHJlbW92ZSB0aGUgYnJ1c2hcclxuICAgICQoJy5icnVzaCcpXHJcbiAgICAgICAgLnJlbW92ZSgpO1xyXG59XHJcblxyXG4vKipcclxuICogSW5pdGlhbGl6ZSB0aGUgdG9vbHRpcFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGluaXRUb29sdGlwKCkge1xyXG4gICAgdG9vbHRpcCA9IGQzLnNlbGVjdCgnZGl2LnRvb2x0aXAnKVxyXG4gICAgICAgIC5zdHlsZSgnbGVmdCcsIDAgKyAncHgnKVxyXG4gICAgICAgIC5zdHlsZSgndG9wJywgMCArICdweCcpXHJcbiAgICAgICAgLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdG9vbHRpcFxyXG4gICAgICAgICAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgMSk7XHJcbiAgICAgICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUb29sdGlwIGZ1bmN0aW9uXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBkIC0gZDMgZGF0YSBvYmplY3Qgd2l0aCB0aGUgbWV0YWRhdGEgaW5mb3JtYXRpb25cclxuICpcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB0b29sdGlwRnVuY3Rpb24oZCkge1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhc2V0TWV0YWRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAoZFsnYSddID09PSBkYXRhc2V0TWV0YWRhdGFbaV1bJ2FuaW1hbF9pZCddKSB7XHJcbiAgICAgICAgICAgIHRvb2x0aXBcclxuICAgICAgICAgICAgICAgIC5zdHlsZSgnbGVmdCcsIChkMy5ldmVudC5wYWdlWCArIDUpICsgJ3B4JylcclxuICAgICAgICAgICAgICAgIC5zdHlsZSgndG9wJywgKGQzLmV2ZW50LnBhZ2VZIC0gMTAwKSArICdweCcpXHJcbiAgICAgICAgICAgICAgICAuc3R5bGUoJ29wYWNpdHknLCAxKTtcclxuICAgICAgICAgICAgLy8gc2V0IHRoZSB2YWx1ZXNcclxuICAgICAgICAgICAgLy8gVE9ETyBtYWtlIHRoaXMgbW9kdWxhclxyXG4gICAgICAgICAgICB0b29sdGlwLnNlbGVjdCgnI3Rvb2x0aXAtYW5pbWFsLWlkJylcclxuICAgICAgICAgICAgICAgIC5odG1sKGRhdGFzZXRNZXRhZGF0YVtpXVsnYW5pbWFsX2lkJ10pO1xyXG4gICAgICAgICAgICB0b29sdGlwLnNlbGVjdCgnI3Rvb2x0aXAtc3BlY2llcycpXHJcbiAgICAgICAgICAgICAgICAuaHRtbChkYXRhc2V0TWV0YWRhdGFbaV1bJ3NwZWNpZXMnXSk7XHJcbiAgICAgICAgICAgIHRvb2x0aXAuc2VsZWN0KCcjdG9vbHRpcC1zZXgnKVxyXG4gICAgICAgICAgICAgICAgLmh0bWwoZGF0YXNldE1ldGFkYXRhW2ldWydzZXgnXSk7XHJcbiAgICAgICAgICAgIHRvb2x0aXAuc2VsZWN0KCcjdG9vbHRpcC1zaXplJylcclxuICAgICAgICAgICAgICAgIC5odG1sKGRhdGFzZXRNZXRhZGF0YVtpXVsnc2l6ZSddKTtcclxuICAgICAgICAgICAgdG9vbHRpcC5zZWxlY3QoJyN0b29sdGlwLXdlaWdodCcpXHJcbiAgICAgICAgICAgICAgICAuaHRtbChkYXRhc2V0TWV0YWRhdGFbaV1bJ3dlaWdodCddKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG4vKipcclxuICogSW5pdGlhbGl6ZSB0aGUgdGltZSBzbGlkZXIgYW5kIHRoZSBkeW5hbWljIG5ldHdvcmsgc2xpZGVyXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaW5pdFNsaWRlcnMoKSB7XHJcbiAgICAvLyB0aW1lIHNsaWRlclxyXG4gICAgc2xpZGVyID0gJCgnI3NsaWRlcicpXHJcbiAgICAgICAgLnNsaWRlcih7XHJcbiAgICAgICAgICAgIG1pbjogMCxcclxuICAgICAgICAgICAgbWF4OiBzd2FybURhdGEubGVuZ3RoLFxyXG4gICAgICAgICAgICBzdGVwOiAyNSxcclxuICAgICAgICAgICAgc2xpZGU6IGZ1bmN0aW9uKGV2ZW50LCB1aSkge1xyXG4gICAgICAgICAgICAgICAgU1BWLnNldEluZGV4VGltZSh1aS52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAvLyBpZiBwYXVzZWQgYXBwbHkgY2hhbmdlc1xyXG4gICAgICAgICAgICAgICAgaWYgKCEkKCcjcGxheS1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL3RoaXMgYXBwbHlzIHRoZSBjaGFuZ2VzXHJcbiAgICAgICAgICAgICAgICAgICAgU1BWLmRyYXcoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgLy8gaW5pdGlhbGl6ZSB0aGUgTmV0d29yayBzbGlkZXJcclxuICAgICQoJyNuZXR3b3JrLXNsaWRlcicpXHJcbiAgICAgICAgLnNsaWRlcih7XHJcbiAgICAgICAgICAgIHJhbmdlOiAnbWF4JyxcclxuICAgICAgICAgICAgbWluOiAwLFxyXG4gICAgICAgICAgICBtYXg6IDEsXHJcbiAgICAgICAgICAgIHN0ZXA6IDAuMDEsXHJcbiAgICAgICAgICAgIHZhbHVlOiAwLjUsXHJcbiAgICAgICAgICAgIHNsaWRlOiBmdW5jdGlvbihldmVudCwgdWkpIHtcclxuICAgICAgICAgICAgICAgIE5ldHdvcmsuc2V0TmV0d29yTGltaXQodWkudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgJCgnI25ldHdvcmstbGltaXQnKS52YWwodWkudmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAvLyBzZXQgdGV4dCBmb3IgdGhlIGZpcnN0IGluaXRpYWxpemF0aW9uXHJcbiAgICAkKCcjbmV0d29yay1saW1pdCcpLnZhbCgwLjUpO1xyXG5cclxuICAgIC8vIGdldCB0aGUgbWF4IGZyb20gdGhlIHNsaWRlciB0aGlzIGlzIG5lZWRlZCB0byBjYWxjdWxhdGUgdGhlIHRpY2tzXHJcbiAgICBsZXQgbWF4ID0gc2xpZGVyLnNsaWRlcignb3B0aW9uJywgJ21heCcpO1xyXG4gICAgbGV0IHNwYWNlID0gMTAwIC8gbWF4O1xyXG4gICAgLy9hcHBlbmQgdGhlIG1pbnV0ZSB0aWNrc1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXg7IGkgPSBpICsgMTUwMCkge1xyXG4gICAgICAgICQoJzxzcGFuIGNsYXNzPVwidWktc2xpZGVyLXRpY2tcIj48L3NwYW4+JylcclxuICAgICAgICAgICAgLmNzcygnbGVmdCcsIChzcGFjZSAqIGkpICsgJyUnKVxyXG4gICAgICAgICAgICAuYXBwZW5kVG8oc2xpZGVyKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgU2V0dGVyXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuLyoqXHJcbiAqIFNldCB0aGUgdGltZSBzbGlkZXIgdG8gYSBuZXcgdmFsdWVcclxuICogQHBhcmFtIHtOdW1iZXJ9IHZhbHVlIC0gbmV3IHZhbHVlIGZvciB0aGUgdGltZSBzbGlkZXJcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRUaW1lU2xpZGVyKHZhbHVlKSB7XHJcbiAgICBzbGlkZXIuc2xpZGVyKCd2YWx1ZScsIHZhbHVlKTtcclxufSIsIi8qZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLWxldHMqL1xyXG4vKmdsb2JhbCB3aW5kb3csIGQzLCAkLCBjb2xvcmJyZXdlciovXHJcbmltcG9ydCAqIGFzIFNQViBmcm9tICcuL3NwYXRpYWxfdmlldy5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgY2hhbmdlTGVnZW5kXHJcbn0gZnJvbSAnLi9sZWdlbmQuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGRhdGFTZXRQZXJjZW50aWxlXHJcbn0gZnJvbSAnLi4vZXhwbG9yZS5qcyc7XHJcblxyXG5leHBvcnQgbGV0IGNvbG9yU2NhbGUgPSB7XHJcbiAgICB0eXBlOiAnTGluZWFyJyxcclxuICAgIGNvbG9yOiBjb2xvcmJyZXdlci5CdVlsQnVcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSBjb2xvciBzY2FsZVxyXG4gKiBAcmV0dXJuIHtjb2xvclNjYWxlfSBhY3RpdmUgY29sb3Igc2NhbGUgaXMgaW4gbGluZWFyIG9yIHRocmVzaG9sZFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHJldHVybkNvbG9yU2NhbGUoKSB7XHJcbiAgICAvL2lmIGxpbmVhciBpcyBjaG9vc2VuXHJcbiAgICBpZiAoY29sb3JTY2FsZVsndHlwZSddID09PSAnTGluZWFyJykge1xyXG4gICAgICAgIHJldHVybiBkMy5zY2FsZUxpbmVhcigpXHJcbiAgICAgICAgICAgIC5kb21haW4oXHJcbiAgICAgICAgICAgICAgICBkYXRhU2V0UGVyY2VudGlsZVtTUFYuYWN0aXZlU2NhbGVdXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgLnJhbmdlKGNvbG9yU2NhbGVbJ2NvbG9yJ10pO1xyXG4gICAgfSAvL1RocmVzaG9sZCBjb2xvciBzY2FsZVxyXG4gICAgZWxzZSBpZiAoY29sb3JTY2FsZVsndHlwZSddID09PSAnVGhyZXNob2xkJykge1xyXG4gICAgICAgIHJldHVybiBkMy5zY2FsZVRocmVzaG9sZCgpXHJcbiAgICAgICAgICAgIC5kb21haW4oXHJcbiAgICAgICAgICAgICAgICBkYXRhU2V0UGVyY2VudGlsZVtTUFYuYWN0aXZlU2NhbGVdXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgLnJhbmdlKGNvbG9yU2NhbGVbJ2NvbG9yJ10pO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogSW5pdGlhbGl6ZSB0aGUgY29sb3IgcGlja2VyXHJcbiAqIHdpdGggYWxsIGxpc3RlbmVycyBpbmNsdWRlZFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGluaXRDb2xvclBpY2tlcigpIHtcclxuICAgIGQzLnNlbGVjdCgnLmNvbG9ycy1ib2R5JylcclxuICAgICAgICAuc2VsZWN0QWxsKCcucGFsZXR0ZScpXHJcbiAgICAgICAgLmRhdGEoZDMuZW50cmllcyhjb2xvcmJyZXdlcikpXHJcbiAgICAgICAgLmVudGVyKClcclxuICAgICAgICAuYXBwZW5kKCdzcGFuJylcclxuICAgICAgICAuYXR0cignY2xhc3MnLCAncGFsZXR0ZScpXHJcbiAgICAgICAgLmF0dHIoJ3RpdGxlJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZC5rZXk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAvLyBoaWdodGxpZ2h0IHRoZSByaWdodCBwYWxldHRlXHJcbiAgICAgICAgICAgICQoJy5wYWxldHRlJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICQoJy5wYWxldHRlW3RpdGxlPVwiJyArIGQua2V5ICsgJ1wiXScpLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICBjb2xvclNjYWxlLmNvbG9yID0gY29sb3JicmV3ZXJbZC5rZXldO1xyXG4gICAgICAgICAgICBjaGFuZ2VMZWdlbmQoKTtcclxuICAgICAgICAgICAgaWYgKCEkKCcjcGxheS1idXR0b24nKVxyXG4gICAgICAgICAgICAgICAgLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgLy9nbyBiYWNrIG9uZSBzZWNvbmQgYW5kIGRyYXcgdGhlIG5leHQgZnJhbWVcclxuICAgICAgICAgICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuICAgICAgICAgICAgICAgIFNQVi5kZWNJbmRleFRpbWUoKTtcclxuICAgICAgICAgICAgICAgIFNQVi5kcmF3KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC5zZWxlY3RBbGwoJy5zd2F0Y2gnKVxyXG4gICAgICAgIC5kYXRhKGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGQudmFsdWU7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgIC5hcHBlbmQoJ3NwYW4nKVxyXG4gICAgICAgIC5hdHRyKCdjbGFzcycsICdzd2F0Y2gnKVxyXG4gICAgICAgIC5zdHlsZSgnYmFja2dyb3VuZC1jb2xvcicsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgLy8gaGlnaGxpZ2h0IHRoZSBzZWxlY3RlZCBjb2xvciBzY2hlbWVcclxuICAgICQoJy5wYWxldHRlW3RpdGxlPVwiQnVZbEJ1XCJdJykuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbn1cclxuIiwiLyplc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtbGV0cyovXHJcbi8qZ2xvYmFsIHdpbmRvdywgJCwgKi9cclxuLy8gaW1wb3J0ICogYXMgc3B2IGZyb20gJy4vc3BhdGlhbF92aWV3LmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBkYXRhc2V0TWV0YWRhdGFcclxufSBmcm9tICcuL2V4cGxvcmUuanMnO1xyXG5cclxuXHJcbmV4cG9ydCBsZXQgbWV0YWRhdGFDb2xvciA9IHt9OyAvLyBzYXZlIHRoZSBtZXRhZGF0YSBjb2xvcmluZ1xyXG5cclxuLyoqXHJcbiAqIEluaXQgTWV0YWRhdGEgYnV0dG9ucyBcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplTWV0YWRkYXRhKCkge1xyXG4gICAgbGV0IGNvbG9ycyA9IFsnI2ZmZicsICcjZTQxYTFjJywgJyMzNzdlYjgnLCAnIzRkYWY0YScsICcjOTg0ZWEzJywgJyNmZjdmMDAnLCAnI2ZmZmYzMycsICcjYTY1NjI4J107XHJcbiAgICAvLyBhZGQgdGhlIGRhdGEgdG8gdGhlIG1ldGFkYXRhIG1vZGFsXHJcbiAgICBpZiAoZGF0YXNldE1ldGFkYXRhLmxlbmd0aCkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YXNldE1ldGFkYXRhLmxlbmd0aDsgaSsrKSB7XHJcblxyXG4gICAgICAgICAgICAkKCcjbWV0YWRhdGEtdGFibGUnKS5maW5kKCd0Ym9keScpXHJcbiAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzx0ciBpZD1cIm1ldGFkYXRhLXJvdy0nICsgZGF0YXNldE1ldGFkYXRhW2ldWydhbmltYWxfaWQnXSArICdcIj4nKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPHRkPicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoZGF0YXNldE1ldGFkYXRhW2ldWydhbmltYWxfaWQnXSkpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8dGQ+JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChkYXRhc2V0TWV0YWRhdGFbaV1bJ3NwZWNpZXMnXSkpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8dGQ+JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChkYXRhc2V0TWV0YWRhdGFbaV1bJ3NleCddKSlcclxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzx0ZD4nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGRhdGFzZXRNZXRhZGF0YVtpXVsnc2l6ZSddKSlcclxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzx0ZD4nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGRhdGFzZXRNZXRhZGF0YVtpXVsnd2VpZ2h0J10pKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPHRkPicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoYDxkaXYgY2xhc3M9XCJkcm9wZG93blwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9XCJkcm9wZG93bi10b2dnbGUgYnRuIGJ0bi1kZWZhdWx0IGJ0bi1jb2xvclwiIGRhdGEtdG9nZ2xlPVwiZHJvcGRvd25cIiBocmVmPVwiI1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD1cInByZXZpZXdcIiBjbGFzcz1cIm1ldGFkYXRhLXN3YXRjaFwiIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjojZmZmXCI+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJjb2xvci1maWVsZFwiIHZhbHVlPVwiV2hpdGVcIiBzdHlsZT1cImRpc3BsYXk6bm9uZTtcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz1cImRyb3Bkb3duLW1lbnVcIiByb2xlPVwibWVudVwiIGFyaWEtbGFiZWxsZWRieT1cImRMYWJlbFwiPiBgICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3VsdFN0cmluZyA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29sb3JzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFN0cmluZyArPSAnPGRpdiBjbGFzcz1cIm1ldGFkYXRhLXN3YXRjaCBtZXRhZGF0YS1zd2F0Y2gtY2xpY2thYmxlXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOicgKyBjb2xvcnNbaV0gKyAnXCIgdmFsdWU9XCInICsgaWQgKyAnXCI+PC9kaXY+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFN0cmluZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oZGF0YXNldE1ldGFkYXRhW2ldWydhbmltYWxfaWQnXSkgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwvdWw+PC9kaXY+JylcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJCgnI21ldGFkYXRhLXRhYmxlJykuZmluZCgndGJvZHknKVxyXG4gICAgICAgICAgICAuYXBwZW5kKCdUaGVyZSBpcyBubyBtZXRhZGF0YSBmb3IgdGhpcyBkYXRhc2V0Jyk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG4vKipcclxuICogU2l6ZSBhbmQgd2VpZ2h0IGNvbG9yaW5nIGZvciB0aGUgbWV0YWRhdGFcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjb2xvck1ldGFkYXRhKCkge1xyXG4gICAgcmVzZXRJbmRpdmlkdWFsTWV0YWRhdGEoKTtcclxuICAgIC8vIGdldCB0aGUgaW5wdXQgdmFsdWVzXHJcbiAgICBsZXQgdmFsdWUgPSAkKCcjZ3JvdXAtbWV0YWRhdGEgLmJ0bi5idG4tZGVmYXVsdC5hY3RpdmUgaW5wdXQnKVxyXG4gICAgICAgIC5hdHRyKCd2YWx1ZScpO1xyXG4gICAgbGV0IGJsQXZnID0gJCgnI2JsLWF2ZycpLnZhbCgpO1xyXG4gICAgbGV0IGFiQXZnID0gJCgnI2FiLWF2ZycpLnZhbCgpO1xyXG4gICAgLy8gY29sb3Igc2NoZW1lIGZvciB0aGUgaW5wdXRzXHJcbiAgICBsZXQgY29sb3JzID0gWycjN2ZjOTdmJywgJyNmZGMwODYnLCAnIzM4NmNiMCddO1xyXG4gICAgLy8gY29sb3IgdGhlIGFuaW1hbHNcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YXNldE1ldGFkYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGRhdGFzZXRNZXRhZGF0YVtpXVt2YWx1ZV0gPCBibEF2Zykge1xyXG4gICAgICAgICAgICBtZXRhZGF0YUNvbG9yW2RhdGFzZXRNZXRhZGF0YVtpXVsnYW5pbWFsX2lkJ11dID0gY29sb3JzWzBdO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YXNldE1ldGFkYXRhW2ldW3ZhbHVlXSA+IGFiQXZnKSB7XHJcbiAgICAgICAgICAgIG1ldGFkYXRhQ29sb3JbZGF0YXNldE1ldGFkYXRhW2ldWydhbmltYWxfaWQnXV0gPSBjb2xvcnNbMl07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbWV0YWRhdGFDb2xvcltkYXRhc2V0TWV0YWRhdGFbaV1bJ2FuaW1hbF9pZCddXSA9IGNvbG9yc1sxXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogTWV0YWRhdGEgcmVzZXQgYWxsIGluZGl2aWR1YWwgbWV0YWRhdGEgaW5wdXQgZmllbGRzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRJbmRpdmlkdWFsTWV0YWRhdGEoKSB7XHJcbiAgICBtZXRhZGF0YUNvbG9yID0ge307XHJcbiAgICAkKCcuZHJvcGRvd24gI3ByZXZpZXcnKVxyXG4gICAgICAgIC5jc3MoJ2JhY2tncm91bmQtY29sb3InLCAncmdiKDI1NSwgMjU1LCAyNTUpJyk7XHJcbn1cclxuIiwiLyplc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtbGV0cyovXHJcbi8qZ2xvYmFsIHdpbmRvdywgZDMsICQsIFNldCovXHJcblxyXG5pbXBvcnQgKiBhcyBTUFYgZnJvbSAnLi9zcGF0aWFsX3ZpZXcvc3BhdGlhbF92aWV3LmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBkaXNhYmxlUGxheUJ1dHRvblxyXG59IGZyb20gJy4vaGVscGVycy5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgYnJ1c2hlbmQsXHJcbiAgICBzbGlkZXJcclxufSBmcm9tICcuL3NwYXRpYWxfdmlldy9pbnRlcmFjdGlvbi5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgY2hhbmdlTGVnZW5kLFxyXG59IGZyb20gJy4vc3BhdGlhbF92aWV3L2xlZ2VuZC5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgbWV0YWRhdGFDb2xvcixcclxuICAgIHJlc2V0SW5kaXZpZHVhbE1ldGFkYXRhLFxyXG4gICAgY29sb3JNZXRhZGF0YVxyXG59IGZyb20gJy4vbWV0YWRhdGEuanMnO1xyXG5cclxuXHJcbmltcG9ydCB7XHJcbiAgICBzZXROZXR3b3JrQXV0byxcclxuICAgIHNldE5ldHdvckxpbWl0LFxyXG4gICAgc2V0TmV0d29ya0hpZXJhcmNoeSxcclxuICAgIHNldG5ldHdvcmtDb2xvcixcclxuICAgIHNldE5ldHdvcmtJRCxcclxuICAgIHNldE5ldHdvcmtCYWNrZ3JvdW5kLFxyXG4gICAgc2V0TmV0d29ya0JhY2tncm91bmRMaW1pdFxyXG59IGZyb20gJy4vbmV0d29yay5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgZGF0YXNldCxcclxuICAgIHN3YXJtRGF0YSxcclxuICAgIGRhdGFzZXRNZXRhZGF0YSxcclxuICAgIHNldE5ldHdvcmtEYXRhLFxyXG4gICAgc2V0SGllcmFyY2h5RGF0YVxyXG59IGZyb20gJy4vZXhwbG9yZS5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgZ2V0RGF0YXNldEZlYXR1cmUsXHJcbiAgICBnZXROZXR3b3JrRGF0YSxcclxuICAgIGdldFN3YXJtRGF0YXNldEZlYXR1cmUsXHJcbiAgICBnZXROZXR3b3JrSGllcmFyY2h5RGF0YVxyXG59IGZyb20gJy4vYWpheF9xdWVyaWVzLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBjb2xvclNjYWxlXHJcbn0gZnJvbSAnLi9zcGF0aWFsX3ZpZXcvY29sb3JfcGlja2VyJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBhZGRIaWVyYXJjaHlCdXR0b24sXHJcbiAgICByZW1vdmVIaWVyYXJjaHlCdXR0b24sXHJcbiAgICBtYXhOdW1iZXJIaWVyYXJjaGllcyxcclxuICAgIHNldFNldE9wZXJhdGlvbixcclxuICAgIC8vRHJhd2VyXHJcbn0gZnJvbSAnLi9oaWVyYXJjaHkuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIHNldFRyYWNraW5nQm9vbGVhbixcclxuICAgIHJlc2V0VHJhY2tlZERhdGEsXHJcbiAgICBzZW5kVHJhY2tlZERhdGFcclxufSBmcm9tICcuL3Zpc3VhbF9wYXJhbWV0ZXIuanMnO1xyXG5cclxubGV0IGJydXNoOyAvLyBicnVzaGluZyB2YXJpYWJsZVxyXG5leHBvcnQgbGV0IHBsYXlCb29sZWFuID0gdHJ1ZTsgLy8gcGF1c2UgYW5kIHBsYXkgYm9vbGVhblxyXG5cclxuXHJcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgIEdldHRlciBhbmQgc2V0dGVyXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuLyoqXHJcbiAqIFNldCBwbGF5IGJvb2xlYW5cclxuICogQHBhcmFtIHtCb29sZWFufSB2YWx1ZSAtIHBhdXNlIChmYWxzZSkgb3IgcGxheSAodHJ1ZSlcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRQbGF5Qm9vbGVhbih2YWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgcGxheUJvb2xlYW4gPSB2YWx1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcGxheUJvb2xlYW4gPSBmYWxzZTtcclxuICAgIH1cclxufVxyXG4iLCIvKmVzbGludC1kaXNhYmxlIG5vLXVudXNlZC1sZXRzKi9cclxuLypnbG9iYWwgd2luZG93LCQsIGQzLCovXHJcbi8vIGltcG9ydCAqIGFzIHNwdiBmcm9tICcuL3NwYXRpYWxfdmlldy5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgZHJhdyxcclxuICAgIFRyZW5kQ2hhcnRcclxufSBmcm9tICcuL3NwYXRpYWxfdmlldy9zcGF0aWFsX3ZpZXcuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIHNldFBsYXlCb29sZWFuXHJcbn0gZnJvbSAnLi9saXN0ZW5lci5qcyc7XHJcblxyXG5cclxuaW1wb3J0IHtcclxuICAgIHN3YXJtRGF0YVxyXG59IGZyb20gJy4vZXhwbG9yZS5qcyc7XHJcbi8qKlxyXG4gKiBEaXNhYmxlIHRoZSBwbGF5IGJ1dHRvbiAtLT4gTG9hZGluZyBzeW1ib2xcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBkaXNhYmxlUGxheUJ1dHRvbigpIHtcclxuICAgIHNldFBsYXlCb29sZWFuKGZhbHNlKTtcclxuICAgICQoJyNwbGF5LWJ1dHRvbicpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICQoJyNwbGF5LWJ1dHRvbicpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcbiAgICAkKCcjcGxheS1pY29ucycpLmhpZGUoKTtcclxuICAgICQoJyNwbGF5LWxvYWRpbmcnKS5zaG93KCk7XHJcblxyXG59XHJcblxyXG4vKipcclxuICogRW5hYmxlIHRoZSBwbGF5IGJ1dHRvbiByZW1vdmUgbG9hZGluZyBzeW1ib2xcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBlbmFibGVQbGF5QnV0dG9uKCkge1xyXG4gICAgc2V0UGxheUJvb2xlYW4odHJ1ZSk7XHJcbiAgICAkKCcjcGxheS1idXR0b24nKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAkKCcjcGxheS1idXR0b24nKS5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcclxuICAgICQoJyNwbGF5LWxvYWRpbmcnKS5oaWRlKCk7XHJcbiAgICAkKCcjcGxheS1pY29ucycpLnNob3coKTtcclxuICAgIC8vZHJhdygpO1xyXG59XHJcblxyXG4vKipcclxuICogUmV0dXJuICAuMDUgcGVyY2VudGlsZXMgb2YgdGhlIGFycmF5XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcGVyY2VudGlsZXMoYXJyKSB7XHJcbiAgICBsZXQgcCA9IDAuMDU7XHJcbiAgICBpZiAoYXJyLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG4gICAgYXJyLnNvcnQoZnVuY3Rpb24oYSwgYikge1xyXG4gICAgICAgIHJldHVybiBhIC0gYjtcclxuICAgIH0pO1xyXG4gICAgbGV0IGluZGV4ID0gKGFyci5sZW5ndGggLSAxKSAqIHA7XHJcbiAgICBsZXQgbG93ZXIgPSBNYXRoLmZsb29yKGluZGV4KTtcclxuICAgIGxldCB1cHBlciA9IGxvd2VyICsgMTtcclxuICAgIGxldCB3ZWlnaHQgPSBpbmRleCAlIDE7XHJcbiAgICBpZiAodXBwZXIgPj0gYXJyLmxlbmd0aCkge1xyXG4gICAgICAgIHJldHVybiAxIC0gYXJyW2xvd2VyXTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIDEgLSAoYXJyW2xvd2VyXSAqICgxIC0gd2VpZ2h0KSArIGFyclt1cHBlcl0gKiB3ZWlnaHQpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogUmV0dXJuIHRoZSAwNSwgMjUsIDUwLCA3NSwgOTUgcGVyY2VudGlsZXMgb2YgdGhlIGFycmF5XHJcbiAqXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcGVyY2VudGlsZXNMaW5lQ2hhcnQoYXJyKSB7XHJcbiAgICBsZXQgcCA9IFswLjA1LCAwLjI1LCAwLjUsIDAuNzUsIDAuOTVdO1xyXG4gICAgbGV0IHJlc3VsdCA9IFtdO1xyXG4gICAgaWYgKGFyci5sZW5ndGggPT09IDApIHtcclxuICAgICAgICByZXR1cm4gMDtcclxuICAgIH1cclxuICAgIGFyci5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcclxuICAgICAgICByZXR1cm4gYSAtIGI7XHJcbiAgICB9KTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGxldCBpbmRleCA9IChhcnIubGVuZ3RoIC0gMSkgKiBwW2ldO1xyXG4gICAgICAgIGxldCBsb3dlciA9IE1hdGguZmxvb3IoaW5kZXgpO1xyXG4gICAgICAgIGxldCB1cHBlciA9IGxvd2VyICsgMTtcclxuICAgICAgICBsZXQgd2VpZ2h0ID0gaW5kZXggJSAxO1xyXG4gICAgICAgIGlmICh1cHBlciA+PSBhcnIubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGFycltsb3dlcl0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGFycltsb3dlcl0gKiAoMSAtIHdlaWdodCkgKyBhcnJbdXBwZXJdICogd2VpZ2h0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG4vKipcclxuICogTGluZSBjaGFydCBkZXRhaWxzIGNsaWNrIGxpc3RlbmVyXHJcbiAqL1xyXG5mdW5jdGlvbiBpbml0VHJlbmRDaGFydExpc3RlbmVyKCkge1xyXG4gICAgJCgnLmRyYXctZGV0YWlscycpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmICgkKHRoaXMpLmZpbmQoJ2lucHV0OmNoZWNrYm94JykucHJvcCgnY2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgIC8vZGlzYWJsZUxpbmVDaGFydCgpO1xyXG4gICAgICAgICAgICB2YXIgdHJlbmRjaGFydCA9IG5ldyBUcmVuZENoYXJ0KHRoaXMsIHN3YXJtRGF0YSk7XHJcbiAgICAgICAgICAgIHRyZW5kY2hhcnQuZGlzYWJsZUxpbmVDaGFydCgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlbW92ZVRyZW5kQ2hhcnQoKTtcclxuICAgICAgICAgICAgZW5hYmxlTGluZUNoYXJ0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBMaW5lIGNoYXJ0IGRldGFpbHMgY2xpY2sgbGlzdGVuZXJcclxuICovXHJcbmZ1bmN0aW9uIGRpc2FibGVMaW5lQ2hhcnQoKSB7XHJcbiAgICAkKCcubGluZUNoYXJ0QnV0dG9uJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgJCgnLmxpbmUtY2hhcnQtY2hlY2stYm94JykuYXR0cignZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICQoJy5saW5lQ2hhcnRMaW5lJykuYXR0cigndmlzaWJpbGl0eScsICdoaWRkZW4nKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIExpbmUgY2hhcnQgZGV0YWlscyBjbGljayBsaXN0ZW5lclxyXG4gKi9cclxuZnVuY3Rpb24gZW5hYmxlTGluZUNoYXJ0KCkge1xyXG4gICAgJCgnLmxpbmVDaGFydEJ1dHRvbicpLnByb3AoJ2NoZWNrZWQnLCB0cnVlKS5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcclxuICAgICQoJy5saW5lLWNoYXJ0LWNoZWNrLWJveCcpLmF0dHIoJ2Rpc2FibGVkJywgZmFsc2UpO1xyXG4gICAgJCgnLmxpbmVDaGFydExpbmUnKS5hdHRyKCd2aXNpYmlsaXR5JywgJ3Zpc2libGUnKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEhpZGUgdGhlIHRyZW5kIGNoYXJ0XHJcbiAqL1xyXG5mdW5jdGlvbiByZW1vdmVUcmVuZENoYXJ0KCkge1xyXG4gICAgJCgnLnRyZW5kQ2hhcnREYXRhJykuaGlkZSgpO1xyXG4gICAgJCgnI3RyZW5kQ2hhcnRMZWdlbmQnKS5oaWRlKCk7XHJcbiAgICAkKCcjbGluZUNoYXJ0TGVnZW5kJykuc2hvdygpO1xyXG59XHJcblxyXG5cclxuXHJcbi8qKlxyXG4gKiBBZGQgdGhlIGFic29sdXRlIGZlYXR1cmUgY2hlY2tib3hlcyBpbiB0aGUgZmVhdHVyZSBwYW5lbCBleHBvcnQgdG8gYWpheFxyXG4gKlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGFkZEFic29sdXRlRmVhdHVyZUJ1dHRvbnMoZGF0YVNldFBlcmNlbnRpbGUpIHtcclxuICAgIC8vIGl0ZXJhdGUgb3ZlciB0aGUgb2JqZWN0XHJcbiAgICBmb3IgKHZhciBrZXkgaW4gZGF0YVNldFBlcmNlbnRpbGUpIHtcclxuICAgICAgICBpZiAoZGF0YVNldFBlcmNlbnRpbGUuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICAvLyBnZW5lcmF0ZSB0ZXh0IGZvciB0aGUgZGlzcGxheWVkIGJ1dHRvblxyXG4gICAgICAgICAgICBsZXQgY2FwaXRhbGl6ZWRfZmVhdHVyZV9zdHJpbmcgPSBrZXkuc3BsaXQoJ18nKS5qb2luKCcgJyk7XHJcbiAgICAgICAgICAgIGNhcGl0YWxpemVkX2ZlYXR1cmVfc3RyaW5nID0gY2FwaXRhbGl6ZWRfZmVhdHVyZV9zdHJpbmcuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBjYXBpdGFsaXplZF9mZWF0dXJlX3N0cmluZy5zbGljZSgxKTtcclxuICAgICAgICAgICAgLy8gYWRkIHRoZSBidXR0b25cclxuICAgICAgICAgICAgJCgnI2Fic29sdXRlLWZlYXR1cmUtY2hlY2tib3hlcycpLmFwcGVuZCgnPHRyPjx0aD4nICtcclxuICAgICAgICAgICAgICAgICcgPGRpdiBjbGFzcz1cInByZXR0eSBwLXN3aXRjaCBwLWZpbGwgcC1iaWdnZXJcIj48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgaWQ9XCJkcmF3LScgKyBrZXkgK1xyXG4gICAgICAgICAgICAgICAgJ1wiLz48ZGl2IGNsYXNzPVwic3RhdGVcIj48bGFiZWw+JyArIGNhcGl0YWxpemVkX2ZlYXR1cmVfc3RyaW5nICsgJzwvbGFiZWw+PC9kaXY+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAvLyBxdWFudGlsZSBncmFwaFxyXG4gICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJmbG9hdC1yaWdodCBkcmF3LWRldGFpbHNcIiBpZD1cImRyYXctJyArIGtleSArICctZGV0YWlsc1wiPjxkaXYgY2xhc3M9XCJwcmV0dHkgcC1pY29uIHAtdG9nZ2xlIHAtcGxhaW5cIj48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgaWQ9XCJkcmF3LScgKyBrZXkgKyAnLWlucHV0XCIgLz4nICtcclxuICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwic3RhdGUgcC1zdWNjZXNzLW8gcC1vblwiPjxpIGNsYXNzPVwibWRpIG1kaS1pbWFnZS1hcmVhXCI+PC9pPjxsYWJlbD48L2xhYmVsPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJzdGF0ZSBwLW9mZlwiPjxpIGNsYXNzPVwibWRpIG1kaS1pbWFnZS1vZmZcIj48L2k+PGxhYmVsPjwvbGFiZWw+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAnPC9kaXY+PC9kaXY+PC90aD48L3RyPicpO1xyXG5cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBoaWRlIHRoZSBlbGVtZW50c1xyXG4gICAgJCgnLmRyYXctZGV0YWlscycpLmhpZGUoKTtcclxuICAgIC8vIGluaXQgdGhlIGxpc3Rlcm5lcnNcclxuICBpbml0VHJlbmRDaGFydExpc3RlbmVyKCk7XHJcblxyXG59XHJcblxyXG4vLyBnZW5lcmF0ZSBoYXNoIGNvZGVzIGZyb20gc3RyaW5nc1xyXG4vLyBzb3VyY2U6IGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzc2MTY0NjEvZ2VuZXJhdGUtYS1oYXNoLWZyb20tc3RyaW5nLWluLWphdmFzY3JpcHQtanF1ZXJ5XHJcblN0cmluZy5wcm90b3R5cGUuaGFzaENvZGUgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBoYXNoID0gMCxcclxuICAgICAgICBpLCBjaHI7XHJcbiAgICBpZiAodGhpcy5sZW5ndGggPT09IDApIHJldHVybiBoYXNoO1xyXG4gICAgZm9yIChpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjaHIgPSB0aGlzLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgaGFzaCA9ICgoaGFzaCA8PCA1KSAtIGhhc2gpICsgY2hyO1xyXG4gICAgICAgIGhhc2ggfD0gMDsgLy8gQ29udmVydCB0byAzMmJpdCBpbnRlZ2VyXHJcbiAgICB9XHJcbiAgICByZXR1cm4gaGFzaDtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBDYWxjdWxhdGUgdGhlIHN0YW5kYXJkRGV2aWF0aW9uIG9mIGFuIGFycmF5IG9mIG51bWJlcnNcclxuICogQHBhcmFtIHtBcnJheX0gYXJyIC0gYXJyYXkgb2YgbnVtYmVyc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHN0YW5kYXJkRGV2aWF0aW9uKGFycikge1xyXG4gICAgaWYgKGFyciBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgbGV0IG1lYW4gPSBhcnIucmVkdWNlKGZ1bmN0aW9uKHB2LCBjdikge1xyXG4gICAgICAgICAgICByZXR1cm4gcHYgKyBjdjtcclxuICAgICAgICB9LCAwKSAvIGFyci5sZW5ndGg7XHJcbiAgICAgICAgbGV0IHRtcCA9IGFyci5tYXAoZnVuY3Rpb24obnVtKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLnBvdyhudW0gLSBtZWFuLCAyKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KHRtcC5yZWR1Y2UoZnVuY3Rpb24ocHYsIGN2KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwdiArIGN2O1xyXG4gICAgICAgIH0sIDApIC8gdG1wLmxlbmd0aCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBNb3ZlIGVsZW1lbnQgaW4gU1ZHIGludG8gYmFja2dyb3VuZCBkb25lIGJ5IG1vdmluZyBpdCB0byBmaXJzdCBlbGVtZW50XHJcbiAqL1xyXG5kMy5zZWxlY3Rpb24ucHJvdG90eXBlLm1vdmVUb0JhY2sgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGZpcnN0Q2hpbGQgPSB0aGlzLnBhcmVudE5vZGUuZmlyc3RDaGlsZDtcclxuICAgICAgICBpZiAoZmlyc3RDaGlsZCkge1xyXG4gICAgICAgICAgICB0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMsIGZpcnN0Q2hpbGQpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIE1ha2UgdGhlIG1haW4gdmlzIHNwYXRpYWwgdmlldyByZXNpemFibGVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBtYWtlUmVzaXphYmxlKGhlaWdodCwgd2lkdGgpIHtcclxuICAgICQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJCgnI21haW4tdmlzJylcclxuICAgICAgICAgICAgLmRyYWdnYWJsZSh7XHJcbiAgICAgICAgICAgICAgICBjb250YWlubWVudDogJ3BhcmVudCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnJlc2l6YWJsZSh7XHJcbiAgICAgICAgICAgICAgICBhc3BlY3RSYXRpbzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG1heFdpZHRoOiAkKCcjbWFpbi12aXMtZGl2Jykud2lkdGgoKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuaGVpZ2h0KGhlaWdodCAqIDAuNilcclxuICAgICAgICAgICAgLndpZHRoKHdpZHRoICogMC42KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogUmVzZXQgdGhlIGJ1dHRvbnMgYW5kIGNoZWNrYm94ZXNcclxuICogSGlkZSBpY29ucyAtIG5lZWRlZCBiZWNhdXNlIG9mIGJvb3RzdHJhcCBidWdcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0Q29uZmlnKCkge1xyXG4gICAgJCgnaW5wdXRbdHlwZT1jaGVja2JveF0nKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xyXG4gICAgLy9zZXQgdGhlIGNvbG9yIHNjYWxlIGZ1bmN0aW9uIHRvIGxpbmVhclxyXG4gICAgJCgnI2NvbG9yLXNjYWxlLWxpbmVhcicpXHJcbiAgICAgICAgLnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcclxuICAgICQoJyNncm91cC1zaXplLW0nKVxyXG4gICAgICAgIC5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XHJcbiAgICAkKCcjYmFja2dyb3VuZC13aGl0ZScpXHJcbiAgICAgICAgLnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcclxuICAgICQoJyNzZXR0aW5ncy1kaXYgaW5wdXRbdHlwZT1jaGVja2JveF0nKVxyXG4gICAgICAgIC5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XHJcbiAgICAvL2hpZGUgdGhlIGxvYWRpbmcgZ2lmXHJcbiAgICAkKCcjbG9hZGluZycpXHJcbiAgICAgICAgLmhpZGUoKTtcclxuICAgIC8vIG5lZWRlZCBkdWUgdG8galF1ZXJ5IGluY29tcGF0aWJpbGl0eVxyXG4gICAgJCgnI3BsYXktbG9hZGluZycpLmhpZGUoKTtcclxuICAgICQoJy5tZGktcGxheScpLmhpZGUoKTtcclxuICAgICQoJyNtZXRhZGF0YS1pbnB1dCcpLmhpZGUoKTtcclxuICAgICQoJyNkZW5kcm9ncmFtLWJ1dHRvbnMtZGl2JykuaGlkZSgpO1xyXG4gICAgJCgnI2ctY2VudHJvaWQnKS5oaWRlKCk7XHJcbiAgICAvL2NoZWNrIGxpbmUgY2hhcnQgZHJhdyBhbGwgbGluZXNcclxuICAgICQoJyNsaW5lLWNoYXJ0LWZlYXR1cmUtY2hlY2tib3hlcyBpbnB1dFt0eXBlPWNoZWNrYm94XScpXHJcbiAgICAgICAgLnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcclxufVxyXG4iLCIvKmVzbGludC1kaXNhYmxlIG5vLXVudXNlZC1sZXRzKi9cclxuLypnbG9iYWwgd2luZG93LCAkLGQzLCBwYXJhbWV0ZXJzLCBjb2xvcmJyZXdlciwgU2V0ICovXHJcbid1c2Ugc3RyaWN0JztcclxuaW1wb3J0IHtcclxuICAgIGRhdGFzZXQsXHJcbiAgICBuZXR3b3JrRGF0YSxcclxuICAgIHN3YXJtRGF0YSxcclxuICAgIGFuaW1hbElkcyxcclxuICAgIGRhdGFzZXRNZXRhZGF0YSxcclxuICAgIHNldE5ldHdvcmtEYXRhLFxyXG4gICAgc2V0SGllcmFyY2h5RGF0YSxcclxuICAgIGRhdGFTZXRQZXJjZW50aWxlLFxyXG4gICAgbmV0d29ya0hpZXJhcmNoeVxyXG59IGZyb20gJy4uL2V4cGxvcmUuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIG5ldHdvcmtDb2xvclNjYWxlLFxyXG4gICAgbmV0d29ya0F1dG8sXHJcbiAgICBzZXROZXR3b3JMaW1pdCxcclxuICAgIG5ldHdvcmtMaW1pdCxcclxuICAgIC8vbmV0d29ya0hpZXJhcmNoeSxcclxuICAgIHNldG5ldHdvcmtDb2xvcixcclxuICAgIHNob3dOZXR3b3JrSGllcmFyY2h5LFxyXG4gICAgLy8gbmV0d29ya0lELFxyXG4gICAgLy8gbmV0d29ya0JhY2tncm91bmQsXHJcbiAgICAvLyBuZXR3b3JrQmFja2dyb3VuZExpbWl0XHJcbn0gZnJvbSAnLi4vbmV0d29yay5qcyc7XHJcblxyXG5cclxuXHJcbmltcG9ydCB7XHJcbiAgICBwZXJjZW50aWxlcyxcclxuICAgIG1ha2VSZXNpemFibGUsXHJcbiAgICBkZWZhdWx0Q29uZmlnLFxyXG4gICAgZGlzYWJsZVBsYXlCdXR0b24sXHJcbiAgICBlbmFibGVQbGF5QnV0dG9uLFxyXG4gICAgcGVyY2VudGlsZXNMaW5lQ2hhcnRcclxufSBmcm9tICcuLi9oZWxwZXJzLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBzZXRUaW1lU2xpZGVyLFxyXG4gICAgaW5pdFRvb2x0aXAsXHJcbiAgICB0b29sdGlwRnVuY3Rpb24sXHJcbiAgICBpbml0U2xpZGVycyxcclxuICAgIHRvb2x0aXAsXHJcbiAgICBzbGlkZXJcclxufSBmcm9tICcuL2ludGVyYWN0aW9uLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBtZXRhZGF0YUNvbG9yXHJcbn0gZnJvbSAnLi4vbWV0YWRhdGEuanMnO1xyXG5cclxuXHJcblxyXG5pbXBvcnQge1xyXG4gICAgaW5pdExpc3RlbmVycyxcclxuXHJcbn0gZnJvbSAnLi4vbGlzdGVuZXIuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGFkZFNwYXRpYWxWaWV3R3JvdXBcclxufSBmcm9tICcuL2xlZ2VuZC5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgLy91cGRhdGVEZW5kcm9ncmFtLFxyXG4gICAgc3BhdGlhbFZpZXcsXHJcbiAgICBzZXRIaWVyYXJjaHlMZXZlbCxcclxuICAgIGluaXREZW5kcm9ncmFtTGVnZW5kLFxyXG4gICAgaGllcmFyY2h5R3JvdXBTdGRldixcclxuICAgIC8vaW5pdERlbmRyb2dyYW0sXHJcbiAgICAvLyBuZXR3b3JrSGllcmFyY2h5SWRzLFxyXG4gICAgc2V0aGllcmFyY2h5R3JvdXBTdGRldixcclxuICAgIHJlc2V0aGllcmFyY2h5R3JvdXBTdGRldixcclxuICAgIHJlbW92ZUhpZXJhcmNoeUJ1dHRvbixcclxuICAgIG1heE51bWJlckhpZXJhcmNoaWVzLFxyXG4gICAgYWRkSGllcmFyY2h5QnV0dG9uLFxyXG4gICAgLy9nZXRIaWVyYXJjaHlWZXJ0aWNlcyxcclxuICAgIGdldEhpZXJhcmNoeUxldmVsLFxyXG4gICAgRGVuZHJvZ3JhbVxyXG59IGZyb20gJy4uL2hpZXJhcmNoeS5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgdHJhY2tpbmdCb29sZWFuLFxyXG4gICAgYWRkVHJhY2tlZERhdGFcclxufSBmcm9tICcuLi92aXN1YWxfcGFyYW1ldGVyLmpzJztcclxuXHJcblxyXG5pbXBvcnQge1xyXG4gICAgZ2V0RGF0YXNldEZlYXR1cmUsXHJcbiAgICBnZXROZXR3b3JrRGF0YSxcclxuICAgIGdldFN3YXJtRGF0YXNldEZlYXR1cmUsXHJcbiAgICBnZXROZXR3b3JrSGllcmFyY2h5RGF0YVxyXG59IGZyb20gJy4uL2FqYXhfcXVlcmllcy5qcyc7XHJcblxyXG5cclxuIC8vIHN2ZyBjb250YWluZXIgZm9yIHRoZSBzcGF0aWFsIHZpZXdcclxuIC8vIHN2ZyBncm91cCBmb3IgdGhlIHNwYXRpYWwgdmlldyB0YW5rXHJcbi8vIGxldCBuZXR3b3JrQmFrRGF0YSA9IHt9O1xyXG5cclxuLy9leHBvcnQgbGV0IGluZGV4VGltZSA9IDA7IC8vIGFjdHVhbCB0aW1lIG1vbWVudCBpbiB0aGUgYW5pbWF0aW9uXHJcblxyXG4vLyBhcnJheSBvZiBhbmltYWxzIGZvciB0aGUgc3BlY2lmaWMgdGltZSBmcmFtZVxyXG5cclxuXHJcbi8vIERyYXdlciBTZXR1cFxyXG5cclxuXHJcblxyXG5cclxubGV0IHRyZW5kQ2hhcnRzWm9vbSA9IHt9O1xyXG4vL2xldCB0aGlzLnRyZW5kQ2hhcnRzRWxlbSA9IFsnbG93ZXItb3V0ZXItYXJlYScsICdsb3dlci1pbm5lci1hcmVhJywgJ21lZGlhbi1saW5lJywgJ3VwcGVyLWlubmVyLWFyZWEnLCAndXBwZXItb3V0ZXItYXJlYSddO1xyXG4vL2xldCBsaW5lQ2hhcnRXaWR0aCA9IDUwMDA7XHJcblxyXG5cclxuLy8gTGlzdGVuZXIgU2V0dXBcclxuLy8gYnJ1c2hpbmcgdmFyaWFibGVcclxuZXhwb3J0IGxldCBwbGF5Qm9vbGVhbiA9IHRydWU7XHJcblxyXG5cclxuLy8gTGluZWNoYXJ0IFNldHVwXHJcbmxldCByYXRpbyA9IDE7XHJcbmxldCB6b29tR3JvdXA7XHJcbmxldCB4O1xyXG5sZXQgeTtcclxuZXhwb3J0IGxldCB6b29tRnVuY3Rpb247XHJcblxyXG4vL2xldCBoaWVyYXJjaHlHcm91cFN0ZGV2ID0ge307XHJcblxyXG5cclxuXHJcblxyXG5cclxuLyoqXHJcbiogQmFzZSBjbGFzcyBkcmF3ZXJcclxuKi9cclxuXHJcbi8qKlxyXG4gKiBJbml0aWFsaXplIHRoZSBzcGF0aWFsIHZpZXcgd2l0aCBhbGwgdGhlIGltcG9ydGFudCBmYWN0b3JzXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgRHJhd2VyIHtcclxuICAgY29uc3RydWN0b3IoKXtcclxuICAgICB0aGlzLmluZGV4VGltZT0wO1xyXG4gICAgIC8vIFRhbmsgQmFzZVxyXG4gICAgIHRoaXMuc3ZnQ29udGFpbmVyID0gZDMuc2VsZWN0KCcjbWFpbi12aXMnKVxyXG5cclxuXHJcbiAgICAgdGhpcy56b29tID0gZDMuem9vbSgpXHJcbiAgICAgICAgIC5zY2FsZUV4dGVudChbMSwgNl0pXHJcbiAgICAgICAgIC5vbignem9vbScsICgpPT57XHJcbiAgICAgICAgICAgICAvL2NvbnN0cmFpbmVkIHpvb21pbmdcclxuICAgICAgICAgICAgIC8vIG1vZGlmeSB0aGUgdHJhbnNsYXRlIHNvIHRoYXQgaXQgbmV2ZXIgZXhpdHMgdGhlIHRhbmtcclxuICAgICAgICAgICAgIGQzLmV2ZW50LnRyYW5zZm9ybS54ID0gTWF0aC5taW4oMCwgdGhpcy50YW5rV2lkdGggKiAoZDMuZXZlbnQudHJhbnNmb3JtLmsgLSAxKSxcclxuICAgICAgICAgICAgICAgICBNYXRoLm1heCh0aGlzLnRhbmtXaWR0aCAqICgxIC0gZDMuZXZlbnQudHJhbnNmb3JtLmspLCBkMy5ldmVudC50cmFuc2Zvcm0ueCkpO1xyXG5cclxuICAgICAgICAgICAgIGQzLmV2ZW50LnRyYW5zZm9ybS55ID0gTWF0aC5taW4oMCwgdGhpcy50YW5rSGVpZ2h0ICogKGQzLmV2ZW50LnRyYW5zZm9ybS5rIC0gMSksXHJcbiAgICAgICAgICAgICAgICAgTWF0aC5tYXgodGhpcy50YW5rSGVpZ2h0ICogKDEgLSBkMy5ldmVudC50cmFuc2Zvcm0uayksIGQzLmV2ZW50LnRyYW5zZm9ybS55KSk7XHJcblxyXG4gICAgICAgICAgICAgLy8gdHJhbnNsYXRlIGFuZCBzY2FsZVxyXG4gICAgICAgICAgICAgdGhpcy56b29tR3JvdXAuYXR0cigndHJhbnNmb3JtJywgZDMuZXZlbnQudHJhbnNmb3JtKTtcclxuXHJcbiAgICAgICAgICAgICAvLyByZXNjYWxlIHRoZSBheGlzXHJcbiAgICAgICAgICAgICBnWGF4aXMuY2FsbCh4QXhpcy5zY2FsZShkMy5ldmVudC50cmFuc2Zvcm0ucmVzY2FsZVgoeCkpKTtcclxuICAgICAgICAgICAgIGdZYXhpcy5jYWxsKHlBeGlzLnNjYWxlKGQzLmV2ZW50LnRyYW5zZm9ybS5yZXNjYWxlWSh5KSkpO1xyXG4gICAgICAgICB9KTtcclxuICAgICB0aGlzLnpvb21Hcm91cCA9IHRoaXMuc3ZnQ29udGFpbmVyLmFwcGVuZCgnc3ZnOmcnKTtcclxuICAgICB0aGlzLnRhbmsgPSB0aGlzLnpvb21Hcm91cC5hcHBlbmQoJ3N2ZzpnJylcclxuICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3RhbmsnKVxyXG4gICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgKCk9PntcclxuICAgICAgICAgICAgICAgICAgIGxldCB4ID0gcGFyYW1ldGVycy5pbnZlcnRlZF94ID8gLTEgOiAxO1xyXG4gICAgICAgICAgICAgICAgICAgbGV0IHkgPSBwYXJhbWV0ZXJzLmludmVydGVkX3kgPyAtMSA6IDE7XHJcbiAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3NjYWxlKCcgKyB4ICsgJywnICsgeSArICcpJztcclxuICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgLy8gYWN0dWFsIHRpbWUgbW9tZW50IGluIHRoZSBhbmltYXRpb25cclxuXHJcbiAgICAgdGhpcy5hY3RpdmVTY2FsZSA9ICdibGFjayc7IC8vIGNhbiBiZSBzcGVlZCwgYWNjZWxlcmF0aW9uLCAuLiBhbmQgYmxhY2sgKG1lYW5pbmcgbm8gYWN0aXZlIHNjYWxlKVxyXG4gICAgIHRoaXMuY29sb3JTY2FsZSA9IHtcclxuICAgICAgICAgdHlwZTogJ0xpbmVhcicsXHJcbiAgICAgICAgIGNvbG9yOiBjb2xvcmJyZXdlci5CdVlsQnVcclxuICAgICB9O1xyXG4gICAgIHRoaXMubGVnZW5kV2lkdGggPSA1NTA7XHJcbiAgICAgdGhpcy5sZWdlbmRIZWlnaHQgPSA2MDtcclxuXHJcbiAgICAgdGhpcy5zdmdMZWdlbmQgPSBkMy5zZWxlY3QoJyNtYWluLXZpcy1sZWdlbmQtZGl2JylcclxuICAgICAgICAgLmFwcGVuZCgnc3ZnJylcclxuICAgICAgICAgLmF0dHIoJ2lkJywgJ21haW4tdmlzLWxlZ2VuZCcpXHJcbiAgICAgICAgIC5hdHRyKCd3aWR0aCcsIHRoaXMubGVnZW5kV2lkdGgpXHJcbiAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCB0aGlzLmxlZ2VuZEhlaWdodCk7XHJcbiAgICAgdGhpcy5tZWRvaWRBbmltYWwgPSAtMTsgLy8gd2hpY2ggYW5pbWFsIGlzIHRoZSBtZWRvaWQgKC0xIGlzIG5vIGFuaW1hbClcclxuICAgICB0aGlzLmFjdGl2ZUFuaW1hbHMgPSBbXTsgLy8gYWN0aXZlIHNlbGVjdGVkIGFuaW1hbHNcclxuICAgICB0aGlzLmFycmF5QW5pbWFscyA9IGRhdGFzZXQuZmlsdGVyKChkKT0+e1xyXG4gICAgICAgICByZXR1cm4gZFsndCddID09PSB0aGlzLmluZGV4VGltZTtcclxuICAgICB9KTsvLyBhcnJheSBvZiBhbmltYWxzIGZvciB0aGUgc3BlY2lmaWMgdGltZSBmcmFtZVxyXG4gICAgIHRoaXMuaWQgPSAkKCcuc2hvdy1kZW5kcm9ncmFtLmJ0bi1wcmltYXJ5JykuYXR0cignZGF0YScpO1xyXG4gICAgIHRoaXMucGxheUJvb2xlYW4gPSB0cnVlO1xyXG4gICAgIHRoaXMuYnJ1c2ggPSBkMy5icnVzaCgpXHJcbiAgICAgICAgIC5leHRlbnQoW1xyXG4gICAgICAgICAgICAgWzAsIDBdLFxyXG4gICAgICAgICAgICAgW3RoaXMudGFua1dpZHRoLCB0aGlzLnRhbmtIZWlnaHRdXHJcbiAgICAgICAgIF0pO1xyXG4gICAgIHRoaXMuc3BhdGlhbFZpZXcgPSBkMy5zZWxlY3QoJy50YW5rJyk7XHJcbiAgICAgdGhpcy5oaWVyYXJjaHlMZXZlbHMgPSB7fTtcclxuXHJcblxyXG4gICB9XHJcbiAgIHNldEluZGV4VGltZSh2YWx1ZSkge1xyXG4gICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgKHRoaXMuaW5kZXhUaW1lIDw9IHN3YXJtRGF0YS5sZW5ndGgpKSB7XHJcbiAgICAgICAgICAgdGhpcy5pbmRleFRpbWUgPSB2YWx1ZTtcclxuICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgdGhpcy5pbmRleFRpbWUgPSAwO1xyXG4gICAgICAgfVxyXG4gICB9XHJcbiAgIHNldEFjdGl2ZVNjYWxlKHZhbHVlKSB7XHJcbiAgICAgICB0aGlzLmFjdGl2ZVNjYWxlID0gdmFsdWU7XHJcbiAgfVxyXG4gICBzZXRBY3RpdmVBbmltYWxzKHZhbHVlKSB7XHJcbiAgICAgIHRoaXMuYWN0aXZlQW5pbWFscyA9IHZhbHVlO1xyXG4gIH1cclxuICAgZGVjSW5kZXhUaW1lKCkge1xyXG4gICAgICAgdGhpcy5pbmRleFRpbWUgPSB0aGlzLmluZGV4VGltZSAtIDE7XHJcbiAgIH1cclxuICAgdXBkYXRlTGluZUNoYXJ0KCkge1xyXG4gICAgICAgaWYgKGQzLnNlbGVjdCgnI2xpbmVDaGFydFRpbWVMaW5lJykgJiYgc3dhcm1EYXRhW01hdGguY2VpbCh0aGlzLmluZGV4VGltZSAvIHJhdGlvKV0pIHtcclxuICAgICAgICAgICBsZXQgdG1wID0gTWF0aC5jZWlsKHRoaXMuaW5kZXhUaW1lIC8gcmF0aW8pO1xyXG4gICAgICAgICAgIC8vdXBkYXRlIHRoZSBsaW5lIGNoYXJ0IGxlZ2VuZCB0ZXh0IHZhbHVlcyBwZXIgc2Vjb25kXHJcbiAgICAgICAgICAgaWYgKHRoaXMuaW5kZXhUaW1lICUgMjUgPT09IDApIHtcclxuICAgICAgICAgICAgICAgLy8gVE9ETyBjaGFuZ2UgdGhpcyB0byBhIG1vcmUgbW9kdWxhciB3YXlcclxuICAgICAgICAgICAgICAgZDMuc2VsZWN0KCcjY29udmV4X2h1bGxfYXJlYUxpbmVWYWx1ZScpXHJcbiAgICAgICAgICAgICAgICAgICAudGV4dCgoc3dhcm1EYXRhW3RtcF1bJ2NvbnZleF9odWxsX2FyZWEnXSkgKyAnbW3CsicpO1xyXG4gICAgICAgICAgICAgICBkMy5zZWxlY3QoJyNzcGVlZExpbmVWYWx1ZScpXHJcbiAgICAgICAgICAgICAgICAgICAudGV4dChzd2FybURhdGFbdG1wXVsnc3BlZWQnXSArICdtbS9zJyk7XHJcbiAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnI2FjY2VsZXJhdGlvbkxpbmVWYWx1ZScpXHJcbiAgICAgICAgICAgICAgICAgICAudGV4dChzd2FybURhdGFbdG1wXVsnYWNjZWxlcmF0aW9uJ10gKyAnbW0vc8KyJyk7XHJcbiAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnI2Rpc3RhbmNlX2NlbnRyb2lkTGluZVZhbHVlJylcclxuICAgICAgICAgICAgICAgICAgIC50ZXh0KHN3YXJtRGF0YVt0bXBdWydkaXN0YW5jZV9jZW50cm9pZCddICsgJ21tJyk7XHJcbiAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnI2RpcmVjdGlvbkxpbmVWYWx1ZScpXHJcbiAgICAgICAgICAgICAgICAgICAudGV4dChzd2FybURhdGFbdG1wXVsnZGlyZWN0aW9uJ10gKyAnwrAnKTtcclxuICAgICAgICAgICAgICAgZDMuc2VsZWN0KCcjcG9sYXJpc2F0aW9uTGluZVZhbHVlJylcclxuICAgICAgICAgICAgICAgICAgIC50ZXh0KHN3YXJtRGF0YVt0bXBdWydwb2xhcmlzYXRpb24nXSk7XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgICAgIGQzLnNlbGVjdCgnI2xpbmVDaGFydFRpbWVMaW5lJylcclxuICAgICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIHpvb21GdW5jdGlvbih0bXApICsgJywwKScpO1xyXG4gICAgICAgfVxyXG4gICB9XHJcbiAgIHJldHVybkNvbG9yU2NhbGUoKSB7XHJcbiAgICAgICAvL2lmIGxpbmVhciBpcyBjaG9vc2VuXHJcbiAgICAgICBpZiAodGhpcy5jb2xvclNjYWxlWyd0eXBlJ10gPT09ICdMaW5lYXInKSB7XHJcbiAgICAgICAgICAgcmV0dXJuIGQzLnNjYWxlTGluZWFyKClcclxuICAgICAgICAgICAgICAgLmRvbWFpbihcclxuICAgICAgICAgICAgICAgICAgIGRhdGFTZXRQZXJjZW50aWxlW3RoaXMuYWN0aXZlU2NhbGVdXHJcbiAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgLnJhbmdlKHRoaXMuY29sb3JTY2FsZVsnY29sb3InXSk7XHJcbiAgICAgICB9IC8vVGhyZXNob2xkIGNvbG9yIHNjYWxlXHJcbiAgICAgICBlbHNlIGlmICh0aGlzLmNvbG9yU2NhbGVbJ3R5cGUnXSA9PT0gJ1RocmVzaG9sZCcpIHtcclxuICAgICAgICAgICByZXR1cm4gZDMuc2NhbGVUaHJlc2hvbGQoKVxyXG4gICAgICAgICAgICAgICAuZG9tYWluKFxyXG4gICAgICAgICAgICAgICAgICAgZGF0YVNldFBlcmNlbnRpbGVbdGhpcy5hY3RpdmVTY2FsZV1cclxuICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAucmFuZ2UodGhpcy5jb2xvclNjYWxlWydjb2xvciddKTtcclxuICAgICAgIH1cclxuICAgfVxyXG4gICBpbml0Q29sb3JQaWNrZXIoKSB7XHJcbiAgICAgICBkMy5zZWxlY3QoJy5jb2xvcnMtYm9keScpXHJcbiAgICAgICAgICAgLnNlbGVjdEFsbCgnLnBhbGV0dGUnKVxyXG4gICAgICAgICAgIC5kYXRhKGQzLmVudHJpZXMoY29sb3JicmV3ZXIpKVxyXG4gICAgICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgICAgLmFwcGVuZCgnc3BhbicpXHJcbiAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3BhbGV0dGUnKVxyXG4gICAgICAgICAgIC5hdHRyKCd0aXRsZScsIChkKT0+e1xyXG4gICAgICAgICAgICAgICByZXR1cm4gZC5rZXk7XHJcbiAgICAgICAgICAgfSlcclxuICAgICAgICAgICAub24oJ2NsaWNrJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgIC8vIGhpZ2h0bGlnaHQgdGhlIHJpZ2h0IHBhbGV0dGVcclxuICAgICAgICAgICAgICAgJCgnLnBhbGV0dGUnKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgJCgnLnBhbGV0dGVbdGl0bGU9XCInICsgZC5rZXkgKyAnXCJdJykuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgIHRoaXMuY29sb3JTY2FsZS5jb2xvciA9IGNvbG9yYnJld2VyW2Qua2V5XTtcclxuICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VsZWdlbmQoKTtcclxuICAgICAgICAgICAgICAgaWYgKCEkKCcjcGxheS1idXR0b24nKVxyXG4gICAgICAgICAgICAgICAgICAgLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgLy9nbyBiYWNrIG9uZSBzZWNvbmQgYW5kIGRyYXcgdGhlIG5leHQgZnJhbWVcclxuICAgICAgICAgICAgICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuICAgICAgICAgICAgICAgICAgIHRoaXMuZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXcoKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgLnNlbGVjdEFsbCgnLnN3YXRjaCcpXHJcbiAgICAgICAgICAgLmRhdGEoKGQpPT57XHJcbiAgICAgICAgICAgICAgIHJldHVybiBkLnZhbHVlO1xyXG4gICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgLmVudGVyKClcclxuICAgICAgICAgICAuYXBwZW5kKCdzcGFuJylcclxuICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnc3dhdGNoJylcclxuICAgICAgICAgICAuc3R5bGUoJ2JhY2tncm91bmQtY29sb3InLCAoZCk9PntcclxuICAgICAgICAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgLy8gaGlnaGxpZ2h0IHRoZSBzZWxlY3RlZCBjb2xvciBzY2hlbWVcclxuICAgICAgICQoJy5wYWxldHRlW3RpdGxlPVwiQnVZbEJ1XCJdJykuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgIH1cclxuICAgY2hhbmdlbGVnZW5kKCkge1xyXG4gICAgICAgbGV0IGxlZ2VuZDsgLy8gdGhlIGNvbG9yIGxlZ2VuZFxyXG4gICAgICAgbGV0IGxlZ2VuZFRleHQ7IC8vIGNvbG9yIGxlZ2VuZCB0ZXh0XHJcbiAgICAgICAvLyB2YXJzIGZvciB0aGUgbGVnZW5kXHJcbiAgICAgICBsZXQgbGVnZW5kU3dhdGNoV2lkdGggPSA1MDtcclxuICAgICAgIGxldCBsZWdlbmRTd2F0Y2hIZWlnaHQgPSAyMDtcclxuICAgICAgIC8vIGxldCBkaWZmZXJlbnRDb2xvcnMgPSAwO1xyXG5cclxuICAgICAgIC8vIFNob3cgdGhlIHN2ZyBmaXJzdCBvZiBhbGxcclxuICAgICAgICQoJyNtYWluLXZpcy1sZWdlbmQtZGl2JylcclxuICAgICAgICAgICAuc2hvdygpO1xyXG5cclxuICAgICAgIC8vY2hhbmdlIHRoZSBjb2xvcnMgb2YgdGhlIGFuaW1hbHNcclxuICAgICAgIGlmICh0aGlzLmFjdGl2ZVNjYWxlICE9PSAnYmxhY2snKSB7XHJcbiAgICAgICAgICAgdmFyIHRtcFNjYWxlID0gdGhpcy5yZXR1cm5Db2xvclNjYWxlKCk7XHJcbiAgICAgICAgICAgLy8gb25jZSB0aGUgZmlsbCBmb3IgdGhlIGhlYWRzIGFuZCB0aGUgc3Ryb2tlIGZvciB0aGUgcGF0aFxyXG4gICAgICAgICAgIGxlZ2VuZCA9IHRoaXMuc3ZnTGVnZW5kLnNlbGVjdEFsbCgncmVjdC5sZWdlbmQnKVxyXG4gICAgICAgICAgICAgICAuZGF0YSh0bXBTY2FsZS5yYW5nZSgpKTtcclxuXHJcbiAgICAgICAgICAgbGVnZW5kVGV4dCA9IHRoaXMuc3ZnTGVnZW5kLnNlbGVjdEFsbCgndGV4dC5sZWdlbmQtdGV4dCcpXHJcbiAgICAgICAgICAgICAgIC5kYXRhKHRtcFNjYWxlLmRvbWFpbigpKTtcclxuICAgICAgICAgICAvLyBkaWZmZXJlbnRDb2xvcnMgPSB0bXBTY2FsZS5yYW5nZSgpXHJcbiAgICAgICAgICAgLy8gLmxlbmd0aDtcclxuICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgbGVnZW5kID0gdGhpcy5zdmdMZWdlbmQuc2VsZWN0QWxsKCdyZWN0LmxlZ2VuZCcpXHJcbiAgICAgICAgICAgICAgIC5kYXRhKFtdKTtcclxuICAgICAgICAgICBsZWdlbmRUZXh0ID0gdGhpcy5zdmdMZWdlbmQuc2VsZWN0QWxsKCd0ZXh0LmxlZ2VuZC10ZXh0JylcclxuICAgICAgICAgICAgICAgLmRhdGEoW10pO1xyXG4gICAgICAgICAgIC8vIGhpZGUgdGhlIGRpdiBhZ2FpblxyXG4gICAgICAgICAgICQoJyNtYWluLXZpcy1sZWdlbmQtZGl2JylcclxuICAgICAgICAgICAgICAgLmhpZGUoKTtcclxuICAgICAgIH1cclxuXHJcbiAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0gTGVnZW5kIHN3YXRjaGVzICAtLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAvLyBVUERBVEUgLSBsZWdlbmRcclxuICAgICAgIGxlZ2VuZC5zdHlsZSgnZmlsbCcsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgIH0pO1xyXG4gICAgICAgLy8gRU5URVIgLSBsZWdlbmRcclxuICAgICAgIGxlZ2VuZFxyXG4gICAgICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgICAgLmFwcGVuZCgncmVjdCcpXHJcbiAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xlZ2VuZCcpXHJcbiAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgbGVnZW5kU3dhdGNoV2lkdGgpXHJcbiAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGxlZ2VuZFN3YXRjaEhlaWdodClcclxuICAgICAgICAgICAuYXR0cigneScsIDApXHJcbiAgICAgICAgICAgLmF0dHIoJ3gnLCBmdW5jdGlvbihkLCBpKSB7XHJcbiAgICAgICAgICAgICAgIHJldHVybiAobGVnZW5kU3dhdGNoV2lkdGggKyBpICogbGVnZW5kU3dhdGNoV2lkdGgpICsgJ3B4JztcclxuICAgICAgICAgICB9KVxyXG4gICAgICAgICAgIC5zdHlsZSgnZmlsbCcsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICAgICAgICAgfSk7XHJcbiAgICAgICAvLyBFWElUIC0gbGVnZW5kXHJcbiAgICAgICBsZWdlbmQuZXhpdCgpXHJcbiAgICAgICAgICAgLnJlbW92ZSgpO1xyXG5cclxuICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLSBUZXh0ICAtLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAvLyBVUERBVEUgLSBsZWdlbmQgdGV4dFxyXG4gICAgICAgbGVnZW5kVGV4dC50ZXh0KGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICByZXR1cm4gTWF0aC5jZWlsKGQgKiAyKSAvIDI7XHJcbiAgICAgICB9KTtcclxuICAgICAgIC8vIEVOVEVSIC0gbGVnZW5kIHRleHRcclxuICAgICAgIGxlZ2VuZFRleHRcclxuICAgICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgIC5hcHBlbmQoJ3RleHQnKVxyXG4gICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsZWdlbmQtdGV4dCcpXHJcbiAgICAgICAgICAgLmF0dHIoJ3knLCAyICogbGVnZW5kU3dhdGNoSGVpZ2h0KVxyXG4gICAgICAgICAgIC5hdHRyKCd4JywgZnVuY3Rpb24oZCwgaSkge1xyXG4gICAgICAgICAgICAgICAvLyBwbHVzIDUgaGFzIHRvIGJlIGNoYW5nZWRcclxuICAgICAgICAgICAgICAgcmV0dXJuIChsZWdlbmRTd2F0Y2hXaWR0aCArIGkgKiBsZWdlbmRTd2F0Y2hXaWR0aCArIDUpICsgJ3B4JztcclxuICAgICAgICAgICB9KVxyXG4gICAgICAgICAgIC50ZXh0KGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguY2VpbChkICogMikgLyAyO1xyXG4gICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgIC8vIEVYSVQgLSBsZWdlbmQgdGV4dFxyXG4gICAgICAgbGVnZW5kVGV4dC5leGl0KClcclxuICAgICAgICAgICAucmVtb3ZlKCk7XHJcbiAgIH1cclxuXHJcbiAgIGNsaWNrKGQpIHtcclxuICAgICAgIHNldEFjdGl2ZUFuaW1hbHMoZFsnZGF0YSddWyduYW1lJ10pO1xyXG4gICAgICAgLy8gaWYgbm8gYW5pbWF0aW9uIGlzIGFjdGl2ZSBkcmF3IHRoZSBkcmF3IG9uZSBzdGVwXHJcbiAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgIC8vZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgICAgLy9kcmF3KCk7XHJcbiAgICAgICB9XHJcbiAgIH1cclxuICAgZ2V0SGllcmFyY2h5TGV2ZWwocm9vdCwgaGllcmFyY2h5KSB7XHJcbiAgICBsZXQgcmVzdWx0ID0gW107XHJcbiAgICBsZXQgbGV2ZWwgPSB0aGlzLmhpZXJhcmNoeUxldmVsc1snaCcgKyBoaWVyYXJjaHldO1xyXG5cclxuICAgIC8vIHNlY29uZCBsZXZlbCBvZiB0aGUgYXJyYXlcclxuICAgIGxldCB0bXBfbm9kZXMgPSByb290WydjaGlsZHJlbiddO1xyXG4gICAgLy8gaXRlcmF0ZSB0aHJvdWdoIHRoZSB0cmVlXHJcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IHJvb3RbJ2hlaWdodCddOyBpKyspIHtcclxuICAgICAgICAvLyBjaGVjayBpZiB3ZSBhcmUgYXQgdGhlIHNlYXJjaGVkIGxldmVsXHJcbiAgICAgICAgaWYgKHRtcF9ub2Rlc1swXSAmJiB0bXBfbm9kZXNbMF1bJ2RlcHRoJ10gPT09IGxldmVsKSB7XHJcbiAgICAgICAgICAgIC8vIGFkZCBlYWNoIGNsdXN0ZXIgdG8gdGhlIHJlc3VsdCBzZXRcclxuICAgICAgICAgICAgdG1wX25vZGVzLmZvckVhY2goZnVuY3Rpb24obm9kZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBub2RlWydkYXRhJ11bJ25hbWUnXSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChub2RlWydkYXRhJ11bJ25hbWUnXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gZ2V0IGFsbCBjaGlsZHJlbiBvZiBhIHNwZWNpZmljIGxldmVsIGluIHRoZSB0cmVlXHJcbiAgICAgICAgbGV0IHRtcCA9IFtdO1xyXG4gICAgICAgIHRtcF9ub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uKG5vZGUpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBub2RlWydjaGlsZHJlbiddICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgdG1wID0gdG1wLmNvbmNhdChub2RlWydjaGlsZHJlbiddKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRtcF9ub2RlcyA9IHRtcDtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuICAgc2V0SGllcmFyY2h5TGV2ZWwoaGllcmFyY2h5LCBsZXZlbCkge1xyXG4gICAgLy8gVE9ETyBjYXRjaCBjYXNlcyA8IDAgYW5kIGJpZ2dlciB0aGFuIG92ZXJhbGwgaGVpZ2h0XHJcbiAgICB0aGlzLmhpZXJhcmNoeUxldmVsc1snaCcgKyBoaWVyYXJjaHldID0gbGV2ZWw7XHJcbn1cclxuICAgcmVtb3ZlSGllcmFyY2h5TGV2ZWwoaGllcmFyY2h5KSB7XHJcbiAvLyBUT0RPIGNhdGNoIGNhc2VzIDwgMCBhbmQgYmlnZ2VyIHRoYW4gb3ZlcmFsbCBoZWlnaHRcclxuIGRlbGV0ZSB0aGlzLmhpZXJhcmNoeUxldmVsc1snaCcgKyBoaWVyYXJjaHldO1xyXG59XHJcbiAgIHVwZGF0ZURlbmRyb2dyYW0oKSB7XHJcbiAgICAgICAvLyBnZXQgdGhlIGltcG9ydGFudCBpbmZvXHJcbiAgICAgICBsZXQgaWQgPSAkKCcuc2hvdy1kZW5kcm9ncmFtLmJ0bi1wcmltYXJ5JykuYXR0cignZGF0YScpO1xyXG4gICAgICAgbGV0IG5hbWUgPSAkKCcuc2hvdy1kZW5kcm9ncmFtLmJ0bi1wcmltYXJ5JykuYXR0cignbmFtZScpO1xyXG4gICAgICAgLy8gc2V0IHRoZSBuYW1lIG9mIHRoZSBkaXNwbGF5ZWQgaGllcmFyY2h5XHJcbiAgICAgICAkKCcjZGVuZHJvZ3JhbS1wYW5lbC1uYW1lJykudGV4dChuYW1lKTtcclxuXHJcbiAgICAgICAvLyBzZXQgc2xpZGVyIGFuZCAgdGV4dCB2YWx1ZVxyXG4gICAgICAgJCgnI2RlbmRyb2dyYW0tcGFuZWwtbGV2ZWwtc2xpZGVyJykudmFsKHRoaXMuaGllcmFyY2h5TGV2ZWxzWydoJyArIGlkXSk7XHJcbiAgICAgICAkKCcjZGVuZHJvZ3JhbS1wYW5lbC1sZXZlbC10ZXh0JykudGV4dCh0aGlzLmhpZXJhcmNoeUxldmVsc1snaCcgKyBpZF0pO1xyXG5cclxuICAgfVxyXG4gICBnZXRIaWVyYXJjaHlWZXJ0aWNlcyhoaWVyYXJjaGllcykge1xyXG4gICAgICAgbGV0IHJlc3VsdCA9IFtdOyAvLyByZXN1bHQgc2V0XHJcbiAgICAgICBoaWVyYXJjaGllcy5mb3JFYWNoKChjbHVzdGVyKT0+e1xyXG4gICAgICAgICAgIGxldCB2ZXJ0aWNlcyA9IFtdOyAvLyB2ZXJ0aWNlcyBvZiB0aGUgY2x1c3RlcnMgaW4gdGhlIHNwYXRpYWwgdmlld1xyXG4gICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgY2x1c3Rlci5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICBsZXQgZ3JvdXBNZW1iZXIgPSB0aGlzLmFycmF5QW5pbWFscy5maW5kKGQgPT4gZFsnYSddID09PSBjbHVzdGVyW2pdKTtcclxuICAgICAgICAgICAgICAgaWYgKGdyb3VwTWVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICB2ZXJ0aWNlcy5wdXNoKFtncm91cE1lbWJlclsncCddWzBdLCAtZ3JvdXBNZW1iZXJbJ3AnXVsxXV0pO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgICAgIC8vIEFuZHJldyBtb250b25lIGNoYWluIGFsZ29yaXRobSByZXV0cm5zIGZvciBwb2ludHMgZmV3ZXIgdGhhbiAzIG51bGxcclxuICAgICAgICAgICBpZiAodmVydGljZXMubGVuZ3RoID49IDMpIHtcclxuICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goZDMucG9seWdvbkh1bGwodmVydGljZXMpKTtcclxuICAgICAgICAgICB9XHJcbiAgICAgICB9KTtcclxuICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgIH1cclxuICAgZHJhd0hpZXJhcmNoeSgpIHtcclxuXHJcbiAgICAgICBsZXQgbWFyZ2luID0gMjAsXHJcbiAgICAgICAgICAgd2lkdGggPSA1MDAwLFxyXG4gICAgICAgICAgIGhlaWdodCA9IDUwMDA7XHJcbiAgICAgICBsZXQgdHJlZW1hcCA9IGQzLnRyZWUoKSAvL2QzLmNsdXN0ZXIoKVxyXG4gICAgICAgICAgICAgLnNpemUoWyhoZWlnaHQgLSAxMCAqIG1hcmdpbiksICh3aWR0aCAtIDEwICogbWFyZ2luKV0pO1xyXG4gICAgICAgLy8gaWQgb2YgdGhlIGhpZXJhcmNoeSBlLmcuIFsxLDUsM11cclxuICAgICAgIGxldCBoaWVyYXJjaHlJZHMgPSBPYmplY3Qua2V5cyhuZXR3b3JrSGllcmFyY2h5KS5tYXAoZnVuY3Rpb24oeCkge1xyXG4gICAgICAgICAgIHJldHVybiB4LnJlcGxhY2UoJ2gnLCAnJyk7XHJcbiAgICAgICB9KTtcclxuICAgICAgIC8vICBUaGUgY2x1c3RlcmluZyBpbiBhbiAyRCBhcnJheSB3aXRoIHdoaWNoIGFuaW1hbCBpZCBiZWxvbmdzIHRvIHdoaWNoIGdyb3VwXHJcbiAgICAgICBsZXQgaGllcmFyY2h5VmVydGljZXMgPSBbXTtcclxuXHJcbiAgICAgICAvLyBpdGVyYXRlIG92ZXIgdGhlIGhpZXJhcmNoeSBkYXRhIHRvIGdldCB0aGUgaGllcmFyY2h5IGFuaW1hbCBpZHMgcGVyIGNsdXN0ZXJpbmcgYW5kIGdyb3VwaW5nXHJcbiAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhpZXJhcmNoeUlkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgIGxldCB0cmVlRGF0YSA9IG5ldHdvcmtIaWVyYXJjaHlbJ2gnICsgaGllcmFyY2h5SWRzW2ldXVt0aGlzLmluZGV4VGltZV07XHJcbiAgICAgICAgICAgbGV0IG5vZGVzID0gZDMuaGllcmFyY2h5KHRyZWVEYXRhLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgIHJldHVybiBkLmNoaWxkcmVuO1xyXG4gICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICBub2RlcyA9IHRyZWVtYXAobm9kZXMpO1xyXG4gICAgICAgICAgIGxldCByb290ID0gbm9kZXNbJ2NoaWxkcmVuJ11bMF07XHJcbiAgICAgICAgICAgaWYgKHNob3dOZXR3b3JrSGllcmFyY2h5ID09PSBoaWVyYXJjaHlJZHNbaV0pIHtcclxuICAgICAgICAgICAgICAgbmV0d29ya0hpZXJhcmNoeUlkcyA9IGdldEhpZXJhcmNoeUxldmVsKHJvb3QsIGhpZXJhcmNoeUlkc1tpXSk7XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgICAgIC8vY29uc29sZS5sb2coJ3Jvb3QnLHJvb3QpO1xyXG4gICAgICAgICAgIC8vY29uc29sZS5sb2coJ2hpZXJhcmNoJyxoaWVyYXJjaHlJZHNbaV0pO1xyXG4gICAgICAgICAgIGxldCBobGV2ZWwgPSBnZXRIaWVyYXJjaHlMZXZlbChyb290LCBoaWVyYXJjaHlJZHNbaV0pO1xyXG4gICAgICAgICAgIC8vY29uc29sZS5sb2coJ2hsZXYnLGhsZXZlbCk7XHJcbiAgICAgICAgICAgbGV0IHZlcnRzID0gdGhpcy5nZXRIaWVyYXJjaHlWZXJ0aWNlcyhobGV2ZWwpXHJcbiAgICAgICAgICAgLy8gYWRkIHRoZSB2ZXJ0aWNlcyBpbnRvIHRoZSBhcnJheVxyXG4gICAgICAgICAgIGhpZXJhcmNoeVZlcnRpY2VzLnB1c2godmVydHMpO1xyXG4gICAgICAgfVxyXG5cclxuICAgICAgIGxldCBzZXRPcGVyYXRpb24gPSAndW5pb24nO1xyXG4gICAgICAgbGV0IGhpZXJhcmNoeUNvbG9ycyA9IHt9O1xyXG4gICAgICAgLy8gREFUQSBKb2luXHJcbiAgICAgICBsZXQgaGllcmFyY2hpZXMgPSB0aGlzLnNwYXRpYWxWaWV3XHJcbiAgICAgICAgICAgLnNlbGVjdEFsbCgnZy5oaWVyYXJjaHktZ3JvdXAnKVxyXG4gICAgICAgICAgIC5kYXRhKGhpZXJhcmNoeVZlcnRpY2VzKTtcclxuXHJcbiAgICAgICAvLyBFTlRFUiB0aGUgZ3JvdXBzIC0gYWRkcyBhIHNwZWNpZmljIGlkIGFuZCBjb2xvclxyXG4gICAgICAgaGllcmFyY2hpZXNcclxuICAgICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgIC5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgIC5hdHRyKCdjbGFzcycsIGZ1bmN0aW9uKGQsIGkpIHtcclxuICAgICAgICAgICAgICAgaWYgKHNldE9wZXJhdGlvbiA9PT0gJ2ludGVyc2VjdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgIHJldHVybiAnaGllcmFyY2h5LWdyb3VwIGludGVyc2VjdGlvbic7XHJcbiAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2V0T3BlcmF0aW9uID09PSAnc3ltLWRpZmZlcmVuY2UnKSB7XHJcbiAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2hpZXJhcmNoeS1ncm91cCBzeW0tZGlmZmVyZW5jZSc7XHJcbiAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2hpZXJhcmNoeS1ncm91cCBoJyArIGhpZXJhcmNoeUlkc1tpXTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgLnN0eWxlKCdmaWxsJywgZnVuY3Rpb24oZCwgaSkge1xyXG4gICAgICAgICAgICAgICByZXR1cm4gaGllcmFyY2h5Q29sb3JzWydoJyArIGhpZXJhcmNoeUlkc1tpXV07XHJcbiAgICAgICAgICAgfSlcclxuICAgICAgICAgICAuYXR0cignc3Ryb2tlJywgZnVuY3Rpb24oZCwgaSkge1xyXG4gICAgICAgICAgICAgICByZXR1cm4gaGllcmFyY2h5Q29sb3JzWydoJyArIGhpZXJhcmNoeUlkc1tpXV07XHJcbiAgICAgICAgICAgfSlcclxuICAgICAgICAgICAubW92ZVRvQmFjaygpO1xyXG5cclxuICAgICAgIC8vIFVQREFURSAtIHRoZSBjbGFzcyBuZWVkZWQgZm9yIGludGVyc2VjdGlvbiBhbmQgc3ltbWV0cmljIGRpZmZlcmVuY2VcclxuICAgICAgIGhpZXJhcmNoaWVzLmF0dHIoJ2NsYXNzJywgZnVuY3Rpb24oZCwgaSkge1xyXG4gICAgICAgICAgIGlmIChzZXRPcGVyYXRpb24gPT09ICdpbnRlcnNlY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgIHJldHVybiAnaGllcmFyY2h5LWdyb3VwIGludGVyc2VjdGlvbic7XHJcbiAgICAgICAgICAgfSBlbHNlIGlmIChzZXRPcGVyYXRpb24gPT09ICdzeW0tZGlmZmVyZW5jZScpIHtcclxuICAgICAgICAgICAgICAgcmV0dXJuICdoaWVyYXJjaHktZ3JvdXAgc3ltLWRpZmZlcmVuY2UnO1xyXG4gICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgIHJldHVybiAnaGllcmFyY2h5LWdyb3VwIGgnICsgaGllcmFyY2h5SWRzW2ldO1xyXG4gICAgICAgICAgIH1cclxuICAgICAgIH0pO1xyXG5cclxuICAgICAgIC8vIEVYSVRcclxuICAgICAgIGhpZXJhcmNoaWVzLmV4aXQoKVxyXG4gICAgICAgICAgIC5yZW1vdmUoKTtcclxuXHJcbiAgICAgICAvLyBIaWVyYWNoeSBodWxscyBhZGRlZCB0byB0aGUgc3BhdGlhbCB2aWV3IC0gZ2V0IHRoZSBwb2ludHMgZm9yIGVhY2ggYW5pbWFsIGluIHRoZVxyXG4gICAgICAgLy8gc3BhdGlhbCB2aWV3IHNvIHRoYXQgYSBjb252ZXggaHVsbCBjYW4gYmUgY2FsY3VsYXRlZFxyXG4gICAgICAgbGV0IGhpZXJhcnlIdWxscyA9IGhpZXJhcmNoaWVzLnNlbGVjdEFsbCgncGF0aC5oaWVyYXJjaHktaHVsbC1wYXRoJylcclxuICAgICAgICAgICAuZGF0YShmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgIHJldHVybiBkO1xyXG4gICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgIC8vIEVOVEVSIGFuZCBjYWxjdWxhdGUgdGhlIGNvbnZleCBodWxsXHJcbiAgICAgICBoaWVyYXJ5SHVsbHNcclxuICAgICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgIC5hcHBlbmQoJ3BhdGgnKVxyXG4gICAgICAgICAgIC8vIC5hdHRyKCdpZCcsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAvLyAgICAgcmV0dXJuICdocCcgKyBkLmpvaW4oJycpLnJlcGxhY2UoLywvZywgJycpO1xyXG4gICAgICAgICAgIC8vIH0pXHJcbiAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2hpZXJhcmNoeS1odWxsLXBhdGgnKVxyXG4gICAgICAgICAgIC5hdHRyKCdkJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAvLyByZXR1cm4gZHJhd0xpbmUoZCk7XHJcbiAgICAgICAgICAgICAgIHJldHVybiAnTScgKyBkLmpvaW4oJ0wnKSArICdaJztcclxuICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAvLyBVUERBVEUgdGhlIGNvbnZleCBodWxsXHJcbiAgICAgICBoaWVyYXJ5SHVsbHNcclxuICAgICAgICAgICAuYXR0cignZCcsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgLy8gcmV0dXJuIGRyYXdMaW5lKGQpO1xyXG4gICAgICAgICAgICAgICByZXR1cm4gJ00nICsgZC5qb2luKCdMJykgKyAnWic7XHJcbiAgICAgICAgICAgfSk7XHJcbiAgICAgICAvLyAuYXR0cignaWQnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAvLyByZXR1cm4gJ2hwJyArIGQuam9pbignJykucmVwbGFjZSgvLC9nLCAnJyk7XHJcbiAgICAgICAvLyB9KTtcclxuICAgICAgIC8vIEVYSVRcclxuICAgICAgIGhpZXJhcnlIdWxscy5leGl0KClcclxuICAgICAgICAgICAucmVtb3ZlKCk7XHJcblxyXG4gICB9XHJcblxyXG4gICBkcmF3RGVuZHJvZ3JhbSgpIHtcclxuICAgICAgIC8vIGdldCB0aGUgYWN0aXZlIGRlbmRyb2dyYW1cclxuICAgICAgIHRoaXMuaWQgPSAkKCcuc2hvdy1kZW5kcm9ncmFtLmJ0bi1wcmltYXJ5JykuYXR0cignZGF0YScpO1xyXG4gICAgICAgLy8gaWYgZGF0YSBpcyBhdmFpYWJsZSBkcmF3IGhpZXJhcmNoeSBjbHVzdGVycyBhbmQgYSBidXR0b24gaXMgYWN0aXZlIHNlbGN0ZWRcclxuICAgICAgIC8vY29uc29sZS5sb2coJ3RyaWVzIGRyYXcnKTtcclxuICAgICAgIC8vY29uc29sZS5sb2cobmV0d29ya0hpZXJhcmNoeSk7XHJcbiAgICAgICBsZXQgaGllcmFyY2h5TGV2ZWxzID0gdGhpcy5oaWVyYXJjaHlMZXZlbHM7XHJcbiAgICAgICBsZXQgaWQgPSB0aGlzLmlkO1xyXG5cclxuICAgICAgIGZ1bmN0aW9uIGNvbGxhcHNlKGQpIHtcclxuICAgICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMuaGllcmFyY2h5TGV2ZWxzKTtcclxuICAgICAgICAgICBpZiAoZC5jaGlsZHJlbiAmJiBkLmRlcHRoIDw9IGhpZXJhcmNoeUxldmVsc1snaCcgKyBpZF0pIHtcclxuICAgICAgICAgICAgICAgZC5fY2hpbGRyZW4gPSBkLmNoaWxkcmVuO1xyXG4gICAgICAgICAgICAgICBkLl9jaGlsZHJlbi5mb3JFYWNoKGNvbGxhcHNlKTtcclxuICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICBkLmNoaWxkcmVuID0gbnVsbDtcclxuICAgICAgICAgICB9XHJcbiAgICAgICB9XHJcbiAgICAgICBpZiAoISQuaXNFbXB0eU9iamVjdChuZXR3b3JrSGllcmFyY2h5KSAmJiB0aGlzLmlkKSB7XHJcbiAgICAgICAgICAgLy9jb25zb2xlLmxvZygnZHJhd3MnKTtcclxuICAgICAgICAgICAvLyBnZXQgdGhlIGRhdGEgYW5kIHRyYW5zZm9ybSBpdFxyXG4gICAgICAgICAgIGxldCB0cmVlRGF0YSA9IG5ldHdvcmtIaWVyYXJjaHlbJ2gnICsgdGhpcy5pZF1bdGhpcy5pbmRleFRpbWVdO1xyXG4gICAgICAgICAgIGNvbnNvbGUubG9nKHRyZWVEYXRhKTtcclxuICAgICAgICAgICBsZXQgbm9kZXMgPSBkMy5oaWVyYXJjaHkodHJlZURhdGEsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgcmV0dXJuIGQuY2hpbGRyZW47XHJcbiAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgLy8gc2tpcCB0aGUgcm9vdCBub2RlXHJcbiAgICAgICAgICAgbm9kZXMgPSBub2Rlcy5jaGlsZHJlblswXTtcclxuICAgICAgICAgICAvLyBjb2xsYXBzZSB0aGUgdHJlZVxyXG4gICAgICAgICAgIG5vZGVzLmNoaWxkcmVuLmZvckVhY2goY29sbGFwc2UpO1xyXG4gICAgICAgICAgIGxldCBtYXJnaW4gPSAyMCxcclxuICAgICAgICAgICAgICAgd2lkdGggPSA1MDAwLFxyXG4gICAgICAgICAgICAgICBoZWlnaHQgPSA1MDAwO1xyXG5cclxuICAgICAgICAgICBsZXQgdHJlZW1hcCA9IGQzLnRyZWUoKSAvL2QzLmNsdXN0ZXIoKVxyXG4gICAgICAgICAgICAgICAgIC5zaXplKFsoaGVpZ2h0IC0gMTAgKiBtYXJnaW4pLCAod2lkdGggLSAxMCAqIG1hcmdpbildKTtcclxuXHJcbiAgICAgICAgICAgLy8gbWFwcyB0aGUgbm9kZSBkYXRhIHRvIHRoZSB0cmVlIGxheW91dFxyXG4gICAgICAgICAgIG5vZGVzID0gdHJlZW1hcChub2Rlcyk7XHJcbiAgICAgICAgICAgLy9jb25zb2xlLmxvZyhub2Rlcyk7XHJcblxyXG4gICAgICAgICAgIC8vIGhpZGUgaWYgbm8gbmV0d29yayBpcyBjaG9vc2VuXHJcbiAgICAgICAgICAgaWYgKCQoJy5zaG93LWRlbmRyb2dyYW0uYnRuLXByaW1hcnknKS5sZW5ndGgpIHtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIHNldCB0aGUgbmV3IHNsaWRlciBtYXhcclxuICAgICAgICAgICAgICAgJCgnI2RlbmRyb2dyYW0tcGFuZWwtbGV2ZWwtc2xpZGVyJylcclxuICAgICAgICAgICAgICAgICAgIC5zbGlkZXIoJ29wdGlvbicsICdtYXgnLCAobm9kZXNbJ2hlaWdodCddIC0gMSkpXHJcbiAgICAgICAgICAgICAgICAgICAuc2xpZGVyKCd2YWx1ZScsIHRoaXMuaGllcmFyY2h5TGV2ZWxzWydoJyArIHRoaXMuaWRdKTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIERBVEEgSk9JTiAtIGxpbmtzIChlZGdlcylcclxuICAgICAgICAgICAgICAgbGV0IGxpbmsgPSB0aGlzLnpvb21Hcm91cFxyXG4gICAgICAgICAgICAgICAgICAgLnNlbGVjdEFsbCgncGF0aC5saW5rJylcclxuICAgICAgICAgICAgICAgICAgIC5kYXRhKG5vZGVzLmRlc2NlbmRhbnRzKCkuc2xpY2UoMSkpO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gRU5URVJcclxuICAgICAgICAgICAgICAgbGlua1xyXG4gICAgICAgICAgICAgICAgICAgLmVudGVyKClcclxuICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJ3BhdGgnKVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xpbmsnKVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2QnLCBkaWFnb25hbExpbmVzKTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIFRyYW5zaXRpb24gbGlua3MgdG8gdGhlaXIgbmV3IHBvc2l0aW9uLlxyXG4gICAgICAgICAgICAgICBsaW5rXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignZCcsIGRpYWdvbmFsTGluZXMpO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gRVhJVFxyXG4gICAgICAgICAgICAgICBsaW5rLmV4aXQoKVxyXG4gICAgICAgICAgICAgICAgICAgLnJlbW92ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gREFUQSBKT0lOIC0gbm9kZXNcclxuICAgICAgICAgICAgICAgLy8gYWRkcyBlYWNoIG5vZGUgYXMgYSBncm91cFxyXG4gICAgICAgICAgICAgICBsZXQgbm9kZSA9IHRoaXMuem9vbUdyb3VwXHJcbiAgICAgICAgICAgICAgICAgICAuc2VsZWN0QWxsKCcubm9kZScpXHJcbiAgICAgICAgICAgICAgICAgICAuZGF0YShub2Rlcy5kZXNjZW5kYW50cygpKTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIGFkZCB0aGUgZ3JvdXBzIHRvIHRoZSBkZW5kZ3JvZ3JhbVxyXG4gICAgICAgICAgICAgICB2YXIgbm9kZUVudGVyID0gbm9kZS5lbnRlcigpXHJcbiAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCdnJylcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ25vZGUnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgKGQuY2hpbGRyZW4gPyAnIG5vZGUtLWludGVybmFsJyA6ICcgbm9kZS0tbGVhZicpO1xyXG4gICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoJyArIGQueCArICcsJyArIGQueSArICcpJztcclxuICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gRU5URVIgLSBhcHBlbmQgZm9yIGVhY2ggZ3JvdXAgYSBub2RlIChjaXJjbGUpXHJcbiAgICAgICAgICAgICAgIC8vIHdpdGggaGlnaGxpZ2h0aW5nIGZvciB0aGUgYWN0aXZlIGNob29zZW4gbGV2ZWxcclxuICAgICAgICAgICAgICAgbm9kZUVudGVyLmFwcGVuZCgnY2lyY2xlJylcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdyJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRbJ2RlcHRoJ10gPT09IHRoaXMuaGllcmFyY2h5TGV2ZWxzWydoJyArIHRoaXMuaWRdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiA0MCArIGQuZGF0YS5uYW1lLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMjAgKyBkLmRhdGEubmFtZS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGlmIChkWydkZXB0aCddID09PSB0aGlzLmhpZXJhcmNoeUxldmVsc1snaCcgKyB0aGlzLmlkXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2FjdGl2ZS1sZXZlbCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnaCcgKyBkWydkYXRhJ11bJ25hbWUnXS50b1N0cmluZygpLmhhc2hDb2RlKCk7XHJcbiAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgLy8gVE9ETyBmaW5kIGEgbmljZSBmdW5jdGlvbiBmb3IgdGhlIG9uIGNsaWNrIG1ldGhvZFxyXG4gICAgICAgICAgICAgICAgICAgLm9uKCdjbGljaycsIHRoaXMuY2xpY2spXHJcbiAgICAgICAgICAgICAgICAgICAub24oJ21vdXNlb3ZlcicsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAvLyB0b29sdGlwIHBvc2l0aW9uIGFuZCB0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgdG9vbHRpcERpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ2xlZnQnLCAoZDMuZXZlbnQucGFnZVggKyA1KSArICdweCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zdHlsZSgndG9wJywgKGQzLmV2ZW50LnBhZ2VZICsgNSkgKyAncHgnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ29wYWNpdHknLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICB0b29sdGlwRGl2LnNlbGVjdCgnLnRvb2x0aXAtc3BhbicpLmh0bWwoZFsnZGF0YSddWyduYW1lJ10udG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGhpZ2hsaWdodCBpbiB0aGUgc3BhdGlhbCB2aWV3XHJcbiAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHVuZGlvbiBvZiB0aGUgcGF0aHMgbWFrZXMgdGhpcyBjb21wbGljYXRlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgIGFkZEhpZ2hsaWdodFNwYXRpYWxWaWV3KGRbJ2RhdGEnXVsnbmFtZSddKTtcclxuICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAub24oJ21vdXNlb3V0JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgdG9vbHRpcERpdi50cmFuc2l0aW9uKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLmR1cmF0aW9uKDUwMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGhpZ2hsaWdodCBpbiB0aGUgc3BhdGlhbCB2aWV3XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlSGlnaGxpZ2h0U3BhdGlhbFZpZXcoKTtcclxuICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gYWRkIHRoZSB0ZXh0IC0gIyBudW1iZXIgb2YgYW5pbWFscyBpbiB0aGUgY2x1c3RlclxyXG4gICAgICAgICAgICAgICBub2RlRW50ZXIuYXBwZW5kKCd0ZXh0JylcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdkZW5kcm9ncmFtLXRleHQnKVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gnLCAxNTApXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cigneScsIC0xNTApXHJcbiAgICAgICAgICAgICAgICAgICAudGV4dCgoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5kYXRhLm5hbWUubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyBVUERBVEUgLS0gdXBkYXRlIHRoZSBncm91cHNcclxuICAgICAgICAgICAgICAgbm9kZUVudGVyXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoJyArIGQueCArICcsJyArIGQueSArICcpJztcclxuICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gdXBkYWUgdGhlIG5vZGUgYW5kIGNpcmNsZXNcclxuICAgICAgICAgICAgICAgLy8gd2l0aCBhY3RpdmUtbGV2ZWwgZnVuY3Rpb24gdG8gaGlnaGxpZ2h0IHdoaWNoIGxldmVsIGlzIGNob3NlblxyXG4gICAgICAgICAgICAgICBub2RlXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoJyArIGQueCArICcsJyArIGQueSArICcpJztcclxuICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAuc2VsZWN0KCdjaXJjbGUnKVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ3InLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICBpZiAoZFsnZGVwdGgnXSA9PT0gdGhpcy5oaWVyYXJjaHlMZXZlbHNbJ2gnICt0aGlzLmlkXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gNDAgKyBkLmRhdGEubmFtZS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDIwICsgZC5kYXRhLm5hbWUubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAoZCk9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRbJ2RlcHRoJ10gPT09IHRoaXMuaGllcmFyY2h5TGV2ZWxzWydoJyArdGhpcy5pZF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2FjdGl2ZS1sZXZlbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygoJ2gnICsgZFsnZGF0YSddWyduYW1lJ10udG9TdHJpbmcoKS5oYXNoQ29kZSgpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnYWN0aXZlLWxldmVsJztcclxuICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnaCcgKyBkWydkYXRhJ11bJ25hbWUnXS50b1N0cmluZygpLmhhc2hDb2RlKCk7XHJcbiAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgdGV4dCBvZiBudW1iZXIgb2YgZW50aXRpZXNcclxuICAgICAgICAgICAgICAgbm9kZS5zZWxlY3QoJ3RleHQnKVxyXG4gICAgICAgICAgICAgICAgICAgLnRleHQoKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuZGF0YS5uYW1lLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gRVhJVFxyXG4gICAgICAgICAgICAgICBub2RlLmV4aXQoKVxyXG4gICAgICAgICAgICAgICAgICAgLnJlbW92ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gY29sb3IgdGhlIGRlbmRyb2dyYW0gbm9kZXMgdXNpbmcgdGhlIHN0YW5kYXJkRGV2aWF0aW9uIGluIHRoZSBjbHVzdGVyXHJcbiAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhoaWVyYXJjaHlHcm91cFN0ZGV2KS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgIC8vIHNob3cgdGhlIGxlZ2VuZCBmb3IgdGhlIGNvbG9yaW5nXHJcbiAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhoaWVyYXJjaHlHcm91cFN0ZGV2KTtcclxuICAgICAgICAgICAgICAgICAgIC8vIFRPRE8gbGVnZW5kIGhlcmVcclxuICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdKVU1QUyBIRVJFJyk7XHJcbiAgICAgICAgICAgICAgICAgICBpZiAoJCgnI2RlbmRyb2dyYW0tbGVnZW5kJykuY3NzKCdkaXNwbGF5JykgPT0gJ25vbmUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgJCgnI2RlbmRyb2dyYW0tbGVnZW5kJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgLy8gSU1QT1JUQU5UIC0gYXN5bmMgcHJvYmxlbXNcclxuICAgICAgICAgICAgICAgICAgIC8vIFRPRE8gc29sdmUgdGhpcyAtIHZlcnkgc2xvd1xyXG4gICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIG5vZGUuc2VsZWN0KCdjaXJjbGUnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ2ZpbGwnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhoaWVyYXJjaHlHcm91cFN0ZGV2KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCgnaCcgKyBkWydkYXRhJ11bJ25hbWUnXS50b1N0cmluZygpLmhhc2hDb2RlKCkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCgnaCcgKyBkWydkYXRhJ11bJ25hbWUnXS50b1N0cmluZygpLmhhc2hDb2RlKCkpIGluIGhpZXJhcmNoeUdyb3VwU3RkZXYpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb2xvciB0aGUgbm9kZXMgYnkgY2FsY3VsYXRpbmcgdGhlIHN0YW5kYXJkRGV2aWF0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmb3IgZWFjaCBjbHVzdGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvbmx5IGFjdGl2ZSBpcyBzaG93IGluIGNsdXN0ZXIgaXMgY2hvb3NlblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCgnaCcgKyBkWydkYXRhJ11bJ25hbWUnXS50b1N0cmluZygpLmhhc2hDb2RlKCkpIGluIGhpZXJhcmNoeUdyb3VwU3RkZXYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnaGVsbG8nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhzdGFuZGFyZERldmlhdGlvbihoaWVyYXJjaHlHcm91cFN0ZGV2WygnaCcgKyBkWydkYXRhJ11bJ25hbWUnXS50b1N0cmluZygpLmhhc2hDb2RlKCkpXSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdGFuZGFyZERldmlhdGlvbkNvbG9yU2NhbGUoc3RhbmRhcmREZXZpYXRpb24oaGllcmFyY2h5R3JvdXBTdGRldlsoJ2gnICsgZFsnZGF0YSddWyduYW1lJ10udG9TdHJpbmcoKS5oYXNoQ29kZSgpKV0pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZFsnZGVwdGgnXSAhPT0gdGhpcy5oaWVyYXJjaHlMZXZlbHNbJ2gnICt0aGlzLmlkXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcjMDAwJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICB9LCAyNTApO1xyXG4gICAgICAgICAgICAgICB9IGVsc2UgaWYgKCQoJyNkZW5kcm9ncmFtLWxlZ2VuZCcpLmNzcygnZGlzcGxheScpICE9PSAnbm9uZScpIHtcclxuICAgICAgICAgICAgICAgICAgICQoJyNkZW5kcm9ncmFtLWxlZ2VuZCcpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgIH1cclxuICAgICAgIH1cclxuXHJcbiAgICAgICBpZiAoISQuaXNFbXB0eU9iamVjdChuZXR3b3JrSGllcmFyY2h5KSkge1xyXG4gICAgICAgICAgIC8vIGRyYXcgdGhlIGhpZXJhcmNoeSBpbiBzcGF0aWFsIHZpZXdcclxuICAgICAgICAgICB0aGlzLmRyYXdIaWVyYXJjaHkoKTtcclxuICAgICAgIH1cclxuICAgfVxyXG5cclxuICAgZHJhdygpIHtcclxuXHJcbiAgICAgICAvL3VwZGF0ZSB0aW1lIHRvIHdhaXQgYWthIHNwZWVkIG9mIHJlcGxheVxyXG4gICAgICAgbGV0IHRpbWVUb1dhaXQgPSAkKCdpbnB1dFt0eXBlPVwicmFkaW9cIl0uZ3JvdXAtcGxheWJhY2stcmF0ZTpjaGVja2VkJylcclxuICAgICAgICAgICAudmFsKCk7XHJcbiAgICAgICAvL3NjYWxlIHRoZSBzaXplIGJ5IHRoaXMgbnVtYmVyXHJcbiAgICAgICBsZXQgYW5pbWFsU2NhbGUgPSAkKCdpbnB1dFt0eXBlPVwicmFkaW9cIl0uZ3JvdXAtc2l6ZTpjaGVja2VkJylcclxuICAgICAgICAgICAudmFsKCk7XHJcblxyXG4gICAgICAgLy9nZXQgdGhlIG5leHQgYW5pbWFsc1xyXG4gICAgICAgdGhpcy5hcnJheUFuaW1hbHMgPSBkYXRhc2V0LmZpbHRlcigoZCk9PntcclxuICAgICAgICAgICByZXR1cm4gZFsndCddID09PSB0aGlzLmluZGV4VGltZTtcclxuICAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgIC8vdGhlIHRpbWVvdXQgaXMgc2V0IGFmdGVyIG9uZSB1cGRhdGUgMzAgbXNcclxuICAgICAgIHNldFRpbWVvdXQoKCk9PntcclxuICAgICAgICAgICAgICAgLy8gZHJhdyBoaWVyYXJjaHlcclxuICAgICAgICAgICAgICAgdGhpcy5kcmF3RGVuZHJvZ3JhbSgpO1xyXG4gICAgICAgICAgICAgICAvL2NoYW5nZSB0aGUgdGltZSBmcmFtZSB0ZXh0XHJcbiAgICAgICAgICAgICAgIHRoaXMuc3ZnQ29udGFpbmVyLnNlbGVjdCgnLmZyYW1lLXRleHQnKVxyXG4gICAgICAgICAgICAgICAgICAgLnRleHQoTWF0aC5mbG9vcih0aGlzLmluZGV4VGltZSAvIDE1MDApICUgNjAgKyAnOicgKyBNYXRoLmZsb29yKHRoaXMuaW5kZXhUaW1lIC8gcGFyYW1ldGVyc1snZnBzJ10pICUgNjAgKyAnOjonICsgdGhpcy5pbmRleFRpbWUgJSBwYXJhbWV0ZXJzWydmcHMnXSk7XHJcbiAgICAgICAgICAgICAgIC8vIGlmIGEgc2Vjb25kIGhhcyBjaGFuZ2VkIG1vdmUgdGhlIHNsaWRlclxyXG4gICAgICAgICAgICAgICBpZiAodGhpcy5pbmRleFRpbWUgJSBwYXJhbWV0ZXJzWydmcHMnXSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgc2V0VGltZVNsaWRlcih0aGlzLmluZGV4VGltZSk7XHJcbiAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgIGxldCBzdmdBbmltYWxzID0gdGhpcy50YW5rLnNlbGVjdEFsbCgnZy5hbmltYWwnKVxyXG4gICAgICAgICAgICAgICAgICAgLmRhdGEodGhpcy5hcnJheUFuaW1hbHMpO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gTmV0d29yayB2aXNcclxuICAgICAgICAgICAgICAgbGV0IG5ldHdvcmtWaXM7XHJcbiAgICAgICAgICAgICAgIC8vIGxldCBuZXR3b3JrVmlzQmFrO1xyXG4gICAgICAgICAgICAgICBpZiAodGhpcy5pbmRleFRpbWUgaW4gbmV0d29ya0RhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgIGxldCBuZXR3b3JrID0gbmV0d29ya0RhdGFbdGhpcy5pbmRleFRpbWVdO1xyXG4gICAgICAgICAgICAgICAgICAgLy8gcmVzZXQgdGhlIGdyb3VwIHN0YW5kYXJkIGRldmlhdGlvbiBmb3IgdGhlIGhpZXJhcmhjeVxyXG4gICAgICAgICAgICAgICAgICAgLy8gbmVlZGVkIGZvciBjb2xvcmluZyBvZiB0aGUgZGVuZHJvZ3JhbSBub2RlcyAodmFyaWFjbmUpXHJcbiAgICAgICAgICAgICAgICAgICByZXNldGhpZXJhcmNoeUdyb3VwU3RkZXYoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAvLyBkaXNwbGF5IHRoZSB3aG9sZSBuZXR3b3JrXHJcbiAgICAgICAgICAgICAgICAgICBuZXR3b3JrID0gbmV0d29yay5tYXAoKGl0ZW0pPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFuaW1hbDEgPSB0aGlzLmFycmF5QW5pbWFscy5maWx0ZXIoZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmpbJ2EnXSA9PT0gaXRlbVsncyddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGxldCBhbmltYWwyID0gdGhpcy5hcnJheUFuaW1hbHMuZmlsdGVyKGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqWydhJ10gPT09IGl0ZW1bJ2UnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAnbm9kZTEnOiBhbmltYWwxWydhJ10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICdub2RlMic6IGFuaW1hbDJbJ2EnXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3N0YXJ0JzogYW5pbWFsMVsncCddLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAnZW5kJzogYW5pbWFsMlsncCddLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAndmFsJzogaXRlbVsndiddXHJcbiAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgIG5ldHdvcmsuZm9yRWFjaChmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgJCgoJyNtYy0nICsgZFsnbm9kZTEnXSArICctJyArIGRbJ25vZGUyJ10pKS5jc3MoJ2ZpbGwnLCBuZXR3b3JrQ29sb3JTY2FsZShkWyd2YWwnXSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICQoKCcjbWMtJyArIGRbJ25vZGUyJ10gKyAnLScgKyBkWydub2RlMSddKSkuY3NzKCdmaWxsJywgbmV0d29ya0NvbG9yU2NhbGUoZFsndmFsJ10pKTtcclxuICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgIGlmIChuZXR3b3JrQXV0bykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGxldCB0bXBBcnJheSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmV0d29yay5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBBcnJheS5wdXNoKG5ldHdvcmtbaV1bJ3ZhbCddKTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgc2V0TmV0d29yTGltaXQocGVyY2VudGlsZXModG1wQXJyYXkpKTtcclxuICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgIG5ldHdvcmsgPSBuZXR3b3JrLmZpbHRlcihmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRbJ3ZhbCddIDw9ICgxIC0gbmV0d29ya0xpbWl0KTtcclxuICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgLy8gREFUQSBKT0lOXHJcbiAgICAgICAgICAgICAgICAgICBuZXR3b3JrVmlzID0gdGhpcy50YW5rLnNlbGVjdCgnI25ldHdvcmstZ3JvdXAnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5zZWxlY3RBbGwoJ2xpbmUubmV0d29yay1lZGdlcycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmRhdGEobmV0d29yayk7XHJcbiAgICAgICAgICAgICAgICAgICAvLyBVUERBVEVcclxuICAgICAgICAgICAgICAgICAgIG5ldHdvcmtWaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneDEnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkWydzdGFydCddWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3kxJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLWRbJ3N0YXJ0J11bMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneDInLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkWydlbmQnXVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd5MicsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC1kWydlbmQnXVsxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2UnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXR3b3JrQ29sb3JTY2FsZSgoMSAtIGRbJ3ZhbCddKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlLW9wYWNpdHknLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAxIC0gZFsndmFsJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAvL0VOVEVSXHJcblxyXG4gICAgICAgICAgICAgICAgICAgbmV0d29ya1Zpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgnbGluZScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ25ldHdvcmstZWRnZXMnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4MScsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRbJ3N0YXJ0J11bMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneTEnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtZFsnc3RhcnQnXVsxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4MicsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRbJ2VuZCddWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3kyJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLWRbJ2VuZCddWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZScsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldHdvcmtDb2xvclNjYWxlKGRbJ3ZhbCddKTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2Utb3BhY2l0eScsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRbJ3ZhbCddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgIG5ldHdvcmtWaXMgPSB0aGlzLnRhbmsuc2VsZWN0QWxsKCdsaW5lLm5ldHdvcmstZWRnZXMnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5kYXRhKFtdKTtcclxuXHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgLy8gRVhJVCAtIG5ldHdvcmtcclxuICAgICAgICAgICAgICAgbmV0d29ya1Zpcy5leGl0KClcclxuICAgICAgICAgICAgICAgICAgIC5yZW1vdmUoKTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIGRlbGF1bmF5IHRyaWFuZ3VsYXRpb25cclxuICAgICAgICAgICAgICAgLy8gREFUQSBKT0lOICAtIHRyaWFuZ3VsYXRpb25cclxuICAgICAgICAgICAgICAgdmFyIHRyaWFuZ3VsYXRpb247XHJcbiAgICAgICAgICAgICAgIGlmICgkKCcjZHJhdy10cmlhbmd1bGF0aW9uJylcclxuICAgICAgICAgICAgICAgICAgIC5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhbc3dhcm1EYXRhW3RoaXMuaW5kZXhUaW1lXVsndHJpYW5ndWxhdGlvbiddXSk7XHJcbiAgICAgICAgICAgICAgICAgICB0cmlhbmd1bGF0aW9uID0gdGhpcy50YW5rLnNlbGVjdCgnI2RlbGF1bmF5LXRyaWFuZ3VsYXRpb24tZ3JvdXAnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5zZWxlY3RBbGwoJ3BhdGguZGVsYXVuYXktdHJpYW5ndWxhdGlvbicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmRhdGEoW3N3YXJtRGF0YVt0aGlzLmluZGV4VGltZV1bJ3RyaWFuZ3VsYXRpb24nXV0pO1xyXG4gICAgICAgICAgICAgICAgICAgLy8gVVBEQVRFIC0gdHJpYW5ndWxhdGlvblxyXG4gICAgICAgICAgICAgICAgICAgdHJpYW5ndWxhdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdkJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgLy9FTlRFUiAtIHRyaWFuZ3VsYXRpb25cclxuICAgICAgICAgICAgICAgICAgIHRyaWFuZ3VsYXRpb24uZW50ZXIoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJ3BhdGgnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdkZWxhdW5heS10cmlhbmd1bGF0aW9uJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignZCcsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgIHRyaWFuZ3VsYXRpb24gPSB0aGlzLnRhbmsuc2VsZWN0QWxsKCdwYXRoLmRlbGF1bmF5LXRyaWFuZ3VsYXRpb24nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5kYXRhKFtdKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAvLyBFWElUIC0gdHJpYW5ndWxhdGlvblxyXG4gICAgICAgICAgICAgICB0cmlhbmd1bGF0aW9uLmV4aXQoKVxyXG4gICAgICAgICAgICAgICAgICAgLnJlbW92ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gVm9yb25vaVxyXG4gICAgICAgICAgICAgICAvLyBEQVRBIEpPSU4gIC0gdm9yb25vaVxyXG4gICAgICAgICAgICAgICB2YXIgdm9yb25vaTtcclxuICAgICAgICAgICAgICAgaWYgKCQoJyNkcmF3LXZvcm9ub2knKVxyXG4gICAgICAgICAgICAgICAgICAgLmlzKCc6Y2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMuaW5kZXhUaW1lKTtcclxuICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2hvJyk7XHJcbiAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFtzd2FybURhdGFbdGhpcy5pbmRleFRpbWVdWyd2b3Jvbm9pJ11dKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvL2FwcGVuZCB0aGUgZ3JvdXAgZm9yIHRoZSB2b3Jvbm9pIHBhdGhzXHJcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGEgd29ya2Fyb3VuZCB0byBhdm9pZCB2b3Jvbm9pIHN0b3BwaW5nIGF0IHNwbGl0IGlmIGVtcHR5IHZhbHVlLlxyXG4gICAgICAgICAgICAgICAgaWYgKCEoJ3Zvcm9ub2knIGluIHN3YXJtRGF0YVswXSkpe1xyXG4gICAgICAgICAgICAgICAgICAgdm9yb25vaSA9IHRoaXMudGFua1xyXG4gICAgICAgICAgICAgICAgICAgICAgIC5zZWxlY3QoJyN2b3Jub2ktZ3JvdXAnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5zZWxlY3RBbGwoJ3BhdGgudm9yb25vaScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmRhdGEoW3N3YXJtRGF0YVt0aGlzLmluZGV4VGltZV1bJ3Zvcm9ub2knXV0pXHJcbiAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICB2b3Jvbm9pID0gdGhpcy50YW5rXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnNlbGVjdCgnI3Zvcm5vaS1ncm91cCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnNlbGVjdEFsbCgncGF0aC52b3Jvbm9pJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuZGF0YShzd2FybURhdGFbdGhpcy5pbmRleFRpbWVdWyd2b3Jvbm9pJ10uc3BsaXQoJzsnKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhzd2FybURhdGFbdGhpcy5pbmRleFRpbWVdWyd2b3Jvbm9pJ10pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgIC8vIFVQREFURSAtIHZvcm9ub2lcclxuICAgICAgICAgICAgICAgICAgIHZvcm9ub2lcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignZCcsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgIC8vRU5URVIgLSB2b3Jvbm9pXHJcbiAgICAgICAgICAgICAgICAgICB2b3Jvbm9pLmVudGVyKClcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCdwYXRoJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAndm9yb25vaScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2QnLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgdm9yb25vaSA9IHRoaXMudGFuay5zZWxlY3QoJyN2b3Jub2ktZ3JvdXAnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5zZWxlY3RBbGwoJ3BhdGgudm9yb25vaScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmRhdGEoW10pO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIC8vIEVYSVQgLSB2b3Jvbm9pXHJcbiAgICAgICAgICAgICAgIHZvcm9ub2kuZXhpdCgpXHJcbiAgICAgICAgICAgICAgICAgICAucmVtb3ZlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAvL0VOVEVSIC0gYXBwZW5kIHRoZSBhbmltYWwgZ3JvdXBzXHJcbiAgICAgICAgICAgICAgIGxldCBhbmltYWxHcm91cGluZ3MgPSBzdmdBbmltYWxzXHJcbiAgICAgICAgICAgICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgICAgICAgICAgLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnYW5pbWFsJylcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnYW5pbWFsLScgKyBkWydhJ107XHJcbiAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIEFwcGVuZCB0aGUgY2lyY2xlcyBmb3IgZWFjaCBhbmltYWwgdG8gdGhlIGFuaW1hbGdyb3VwXHJcbiAgICAgICAgICAgICAgIGFuaW1hbEdyb3VwaW5ncy5hcHBlbmQoJ2NpcmNsZScpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cigncicsIDEuNSAqIGFuaW1hbFNjYWxlKVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2N4JywgKGQpPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkWydwJ11bMF07XHJcbiAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2N5JywgKGQpPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtZFsncCddWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgIC5vbignbW91c2VvdmVyJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgdG9vbHRpcEZ1bmN0aW9uKGQpO1xyXG4gICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgIC5vbignbW91c2VvdXQnLCAoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRyYW5zaXRpb24oKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24oNTAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ29wYWNpdHknLCAwKTtcclxuICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAvLyBhZGQgb24gY2xpY2sgZm9yIHRoZSBhY3RpdmUgZmlzaHNcclxuICAgICAgICAgICAgICAgICAgIC5vbignY2xpY2snLCAoZCk9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlQW5pbWFscy5pbmNsdWRlcyhkWydhJ10pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlQW5pbWFscyA9IHRoaXMuYWN0aXZlQW5pbWFscy5maWx0ZXIoaXRlbSA9PiBpdGVtICE9PSBkWydhJ10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlQW5pbWFscy5wdXNoKGRbJ2EnXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgIGlmICghJCgnI3BsYXktYnV0dG9uJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAvL3RoaXMgYXBwbHlzIHRoZSBjaGFuZ2VzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZXhUaW1lLS07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gVVBEQVRFIC0gYW5pbWFscyBjaXJjbGVzXHJcbiAgICAgICAgICAgICAgIHN2Z0FuaW1hbHMuc2VsZWN0KCdjaXJjbGUnKVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2N4JywgKGQpPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkWydwJ11bMF07XHJcbiAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2N5JywgKGQpPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtZFsncCddWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdyJywgYW5pbWFsU2NhbGUpO1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhzdmdBbmltYWxzLnNlbGVjdCgnY2lyY2xlJykpO1xyXG4gICAgICAgICAgICAgICAvLyBBcHBlbmQgZm9yIGVhY2ggZ3JvdXAgdGhlIGFycm93LCBuZWVkZWQgZm9yIGNvbG9yaW5nXHJcbiAgICAgICAgICAgICAgIGFuaW1hbEdyb3VwaW5ncy5hcHBlbmQoJ3N2ZzpkZWZzJylcclxuICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJ3N2ZzptYXJrZXInKVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2lkJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdhcnJvdy1tYXJrZXItJyArIGRbJ2EnXTtcclxuICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cigncmVmWCcsIDIpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cigncmVmWScsIDYpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignbWFya2VyV2lkdGgnLCAxMylcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdtYXJrZXJIZWlnaHQnLCAxMylcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdvcmllbnQnLCAnYXV0bycpXHJcbiAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCdzdmc6cGF0aCcpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignZCcsICdNMiwyIEwyLDExIEwxMCw2IEwyLDInKTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIEFwcGVuZCB0aGUgbGluZSBmb3IgdGhlIGRpcmVjdGlvbiBhcnJvd1xyXG4gICAgICAgICAgICAgICBhbmltYWxHcm91cGluZ3NcclxuICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJ2xpbmUnKVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2Fycm93JylcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdtYXJrZXItZW5kJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICd1cmwoI2Fycm93LW1hcmtlci0nICsgZFsnYSddICsgJyknO1xyXG4gICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAvL2V4ZWN1dGUgb25seSB3aGVuIGRyYXcgZGlyZWN0aW9uIGJ1dHRvbiBpcyBjaGVja2VkXHJcbiAgICAgICAgICAgICAgIGlmICgkKCcjZHJhdy1kaXJlY3Rpb24nKVxyXG4gICAgICAgICAgICAgICAgICAgLmlzKCc6Y2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAvLyBVUERBVEUgYW5pbWFsIGRpcmVjdGlvbiBhcnJvd1xyXG4gICAgICAgICAgICAgICAgICAgc3ZnQW5pbWFscy5zZWxlY3QoJ2xpbmUnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4MScsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZFsncCddWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3kxJywgKGQpPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLWRbJ3AnXVsxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4MicsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGRbJ3AnXVswXSArIDIgKiBhbmltYWxTY2FsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneTInLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgtZFsncCddWzFdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdyb3RhdGUoJyArIC1kWydkaXJlY3Rpb24nXSArICcgJyArIGRbJ3AnXVswXSArICcgJyArIC1kWydwJ11bMV0gKyAnKSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAvLyBoaWRlIHRoZSBhcnJvd3NcclxuICAgICAgICAgICAgICAgICAgICQoJy5hcnJvdycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgLy8gRVhJVCAtIHRoZSBncm91cHNcclxuICAgICAgICAgICAgICAgc3ZnQW5pbWFscy5leGl0KClcclxuICAgICAgICAgICAgICAgICAgIC5yZW1vdmUoKTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vQ29udmV4IGh1bGxcclxuICAgICAgICAgICAgICAgaWYgKCQoJyNkcmF3LWNvbnZleC1odWxsJylcclxuICAgICAgICAgICAgICAgICAgIC5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgLy8gREFUQSBKT0lOIC0gcGF0aHNcclxuICAgICAgICAgICAgICAgICAgIHZhciBodWxsUGF0aCA9IHRoaXMudGFuay5zZWxlY3RBbGwoJ3BhdGguaHVsbC1wYXRoJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuZGF0YShbc3dhcm1EYXRhW3RoaXMuaW5kZXhUaW1lXVsnY29udmV4X2h1bGwnXV0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgIC8vIFVQREFURSAtIGh1bGwgcGF0aFxyXG4gICAgICAgICAgICAgICAgICAgaHVsbFBhdGhcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignZCcsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAvLyBFTlRFUiAtIGh1bGwgcGF0aHNcclxuICAgICAgICAgICAgICAgICAgIGh1bGxQYXRoLmVudGVyKClcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCdwYXRoJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnaHVsbC1wYXRoJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignZCcsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAvLyBkcmF3IG5vIGh1bGxcclxuICAgICAgICAgICAgICAgICAgIGh1bGxQYXRoID0gdGhpcy50YW5rLnNlbGVjdCgncGF0aC5odWxsLXBhdGgnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5kYXRhKFtdKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAvLyBFWElUIC0gaHVsbCBwYXRoc1xyXG4gICAgICAgICAgICAgICBodWxsUGF0aC5leGl0KClcclxuICAgICAgICAgICAgICAgICAgIC5yZW1vdmUoKTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vY2hhbmdlIHRoZSBjb2xvcnMgb2YgdGhlIGZpc2hcclxuICAgICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlU2NhbGUgIT09ICdibGFjaycpIHtcclxuICAgICAgICAgICAgICAgICAgIC8vIG9uY2UgdGhlIGZpbGwgZm9yIHRoZSBoZWFkcyBhbmQgdGhlIHN0cm9rZSBmb3IgdGhlIHBhdGhcclxuICAgICAgICAgICAgICAgICAgIHZhciB0bXBTY2FsZSA9IHRoaXMucmV0dXJuQ29sb3JTY2FsZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgc3ZnQW5pbWFsc1xyXG4gICAgICAgICAgICAgICAgICAgICAgIC50cmFuc2l0aW9uKClcclxuICAgICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24oMTApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdmaWxsJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0bXBTY2FsZShkW3RoaXMuYWN0aXZlU2NhbGVdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2UnLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRtcFNjYWxlKGRbdGhpcy5hY3RpdmVTY2FsZV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgLy9jb2xvciBldmVyeSBmaXNoIGJsYWNrXHJcbiAgICAgICAgICAgICAgICAgICBzdmdBbmltYWxzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdmaWxsJywgJyMwMDAnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2UnLCAnIzAwMCcpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgIGlmICghJC5pc0VtcHR5T2JqZWN0KG1ldGFkYXRhQ29sb3IpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMobWV0YWRhdGFDb2xvcikuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgZDNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZWxlY3QoJyNhbmltYWwtJyArIGtleSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zdHlsZSgnZmlsbCcsIG1ldGFkYXRhQ29sb3Jba2V5XSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2UnLCBtZXRhZGF0YUNvbG9yW2tleV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAvL2NoYW5nZSBvcGFjdGl5IGlmIHRoZSBmaXNoIGlzIHNlbGVjdGVkXHJcbiAgICAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZUFuaW1hbHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICBzdmdBbmltYWxzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZUFuaW1hbHMuaW5jbHVkZXMoZFsnYSddKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMC4yNTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgaWYgKCQoJyNyZW1vdmUtYWN0aXZlLXNlbGVjdGVkLWJ1dHRvbicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmlzKCc6ZGlzYWJsZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICQoJyNyZW1vdmUtYWN0aXZlLXNlbGVjdGVkLWJ1dHRvbicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAkKCcjdmlzdWFsLXBhcmFtZXRlci1idXR0b24nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAvLyBpZiB0cmFja2luZyBpcyBvblxyXG4gICAgICAgICAgICAgICAgICAgaWYgKHRyYWNraW5nQm9vbGVhbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGFkZFRyYWNrZWREYXRhKHRoaXMuYXJyYXlBbmltYWxzWzBdWyd0J10sIHRoaXMuYWN0aXZlQW5pbWFscyk7XHJcbiAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICBpZiAoISQoJyNyZW1vdmUtYWN0aXZlLXNlbGVjdGVkLWJ1dHRvbicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmlzKCc6ZGlzYWJsZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICQoJyNyZW1vdmUtYWN0aXZlLXNlbGVjdGVkLWJ1dHRvbicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICQoJyN2aXN1YWwtcGFyYW1ldGVyLWJ1dHRvbicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgLy8gbm9ybWFsIG9wYWNpdHlcclxuICAgICAgICAgICAgICAgICAgIHN2Z0FuaW1hbHNcclxuICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ29wYWNpdHknLCAxKTtcclxuICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgLy9kcmF3IGNlbnRyb2lkXHJcbiAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnLmNlbnRyb2lkJylcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjeCcsICgpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgaWYgKCdjZW50cm9pZCcgaW4gc3dhcm1EYXRhWzBdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzd2FybURhdGFbdGhpcy5pbmRleFRpbWVdWydjZW50cm9pZCddWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignY3knLCAoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGlmICgnY2VudHJvaWQnIGluIHN3YXJtRGF0YVswXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLXN3YXJtRGF0YVt0aGlzLmluZGV4VGltZV1bJ2NlbnRyb2lkJ11bMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgIGlmICgkKCcjZHJhdy1kaXJlY3Rpb24nKS5pcygnOmNoZWNrZWQnKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgc3dhcm1EYXRhW3RoaXMuaW5kZXhUaW1lXS5jZW50cm9pZCAmJlxyXG4gICAgICAgICAgICAgICAgICAgJCgnI2RyYXctY2VudHJvaWQnKS5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KCcjY2VudHJvaWQtbGluZScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ2hpZGRlbicsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgIC8vIFVQREFURSBhbmltYWwgZGlyZWN0aW9uIGFycm93XHJcbiAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QoJyNjZW50cm9pZC1saW5lJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneDEnLCAoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3dhcm1EYXRhW3RoaXMuaW5kZXhUaW1lXVsnY2VudHJvaWQnXVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd5MScsICgpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtc3dhcm1EYXRhW3RoaXMuaW5kZXhUaW1lXVsnY2VudHJvaWQnXVsxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4MicsICgpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoc3dhcm1EYXRhW3RoaXMuaW5kZXhUaW1lXVsnY2VudHJvaWQnXVswXSArIDIgKiBhbmltYWxTY2FsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneTInLCAoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLXN3YXJtRGF0YVt0aGlzLmluZGV4VGltZV1bJ2NlbnRyb2lkJ11bMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgKCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdyb3RhdGUoJyArIC1zd2FybURhdGFbdGhpcy5pbmRleFRpbWVdWydkaXJlY3Rpb24nXSArICcgJyArIHN3YXJtRGF0YVt0aGlzLmluZGV4VGltZV1bJ2NlbnRyb2lkJ11bMF0gKyAnICcgKyAtc3dhcm1EYXRhW3RoaXMuaW5kZXhUaW1lXVsnY2VudHJvaWQnXVsxXSArICcpJztcclxuICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgIC8vIGhpZGUgdGhlIGFycm93c1xyXG4gICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KCcjY2VudHJvaWQtbGluZScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2hpZGRlbicpO1xyXG4gICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAvLyBtZWRvaWRcclxuICAgICAgICAgICAgICAgaWYgKHRoaXMubWVkb2lkQW5pbWFsICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCcjYW5pbWFsLScgKyB0aGlzLm1lZG9pZEFuaW1hbClcclxuICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnbWVkb2lkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgdGhpcy5tZWRvaWRBbmltYWwgPSBzd2FybURhdGFbdGhpcy5pbmRleFRpbWVdWydtZWRvaWQnXTtcclxuICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgnI2FuaW1hbC0nICsgdGhpcy5tZWRvaWRBbmltYWwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ21lZG9pZCcsIHRydWUpO1xyXG4gICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAvL25leHQgZnJhbWVcclxuICAgICAgICAgICAgICAgdGhpcy5pbmRleFRpbWUrKztcclxuXHJcbiAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTGluZUNoYXJ0KCk7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgLy9jaGVjayBpZiBwbGF5IGJ1dHRvbiBpcyBhY3RpdmUgYW5kIGlmIHRoZSBhbmltYXRpb24gaXMgbm90IGZpbmlzaGVkXHJcbiAgICAgICAgICAgICAgIGlmICh0aGlzLmluZGV4VGltZSA+PSBzd2FybURhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAvL3N0YXJ0IGFnYWluIGZyb20gdGhlIHN0YXJ0XHJcbiAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4VGltZSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXcoKTtcclxuICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBsYXlCb29sZWFuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAvL21lYXN1cmUgZXhlY3V0aW9uIHRpbWVcclxuICAgICAgICAgICAgICAgICAgIC8vICAgbGV0IHQxID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAvLyAgIGNvbnNvbGUubG9nKHQxIC0gdDApOyAvLyBpbiBtaWxsaXNlY29uZHNcclxuICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgfSxcclxuICAgICAgICAgICB0aW1lVG9XYWl0KTtcclxuICAgfVxyXG5cclxuXHJcbiAgIGNwX2xpc3RlbmVyKCkge1xyXG5cclxuICAgICAgIC8qKlxyXG4gICAgICAgICogUGxheSBvciBzdG9wIHRoZSBhbmltYXRpb25cclxuICAgICAgICAqL1xyXG4gICAgICAgJCgnI3BsYXktYnV0dG9uJykuY2xpY2soKCk9PntcclxuICAgICAgICAgICBpZiAoJCgnI3BsYXktYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgIHRoaXMucGxheUJvb2xlYW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgJCgnLm1kaS1wYXVzZScpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgJCgnLm1kaS1wbGF5Jykuc2hvdygpO1xyXG4gICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgIHRoaXMucGxheUJvb2xlYW4gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAkKCcubWRpLXBsYXknKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICQoJy5tZGktcGF1c2UnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgIHRoaXMuc2V0SW5kZXhUaW1lKHNsaWRlci5zbGlkZXIoJ3ZhbHVlJykpO1xyXG4gICAgICAgICAgICAgICAkKCcuYnJ1c2gnKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgLy90aGlzLmRyYXcoKTtcclxuICAgICAgICAgICB9XHJcbiAgICAgICB9KTtcclxuXHJcbiAgICAgICAvKipcclxuICAgICAgICAqIFBhdXNlIHRoZSBhbmltYXRpb24gYW5kIHNob3cgb25seSB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICovXHJcbiAgICAgICAkKCcjbmV4dC1mcmFtZS1idXR0b24nKS5jbGljaygoKT0+e1xyXG4gICAgICAgICAgIGlmICgkKCcjcGxheS1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgdGhpcy5wbGF5Qm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgICAgICAgIH1cclxuICAgICAgICAgICAkKCcjcGxheS1idXR0b24nKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgICAgICB9KTtcclxuXHJcbiAgICAgICAvKipcclxuICAgICAgICAqIEJydXNoaW5nIGJ1dHRvblxyXG4gICAgICAgICovXHJcbiAgICAgICAkKCcjYnJ1c2hpbmctYnV0dG9uJykuY2xpY2soKCk9PntcclxuICAgICAgICAgICAvL3N0b3AgdGhlIGFuaW1hdGlvblxyXG5cclxuICAgICAgICAgICB0aGlzLnBsYXlCb29sZWFuID0gZmFsc2U7XHJcbiAgICAgICAgICAgJCgnI3BsYXktYnV0dG9uJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgIGlmICghJCgnI2JydXNoaW5nLWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAvL2RlZmluZSB0aGUgYnJ1c2hcclxuICAgICAgICAgICAgICAgdGhpcy5icnVzaCA9IGQzLmJydXNoKClcclxuICAgICAgICAgICAgICAgICAgIC5leHRlbnQoW1xyXG4gICAgICAgICAgICAgICAgICAgICAgIFswLCAwXSxcclxuICAgICAgICAgICAgICAgICAgICAgICBbdGhpcy50YW5rV2lkdGgsIHRoaXMudGFua0hlaWdodF1cclxuICAgICAgICAgICAgICAgICAgIF0pXHJcbiAgICAgICAgICAgICAgICAgICAub24oJ2VuZCcsICgpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy9sZXQgYXJyYXlBbmltYWxzID0gdGhpcy5hcnJheUFuaW1hbHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy9sZXQgYWN0aXZlQW5pbWFscyA9IHRoaXMuYWN0aXZlQW5pbWFscztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVjdCA9IGQzLmV2ZW50LnNlbGVjdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUFuaW1hbHMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy9pdGVyYXRlIG92ZXIgdGhlIDE1MSBmaXNoIHRvIGNoZWNrIHdoaWNoIGFyZSBpbiB0aGUgYnJ1c2hcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcnJheUFuaW1hbHMubWFwKChhbmltYWwpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBbYW5pbWFsWydwJ11bMF0sIGFuaW1hbFsncCddWzFdXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY2hlY2sgd2hpY2ggZmlzaCBhcmUgaW4gIHRoZSBicnVzaGVkIGFyZWFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgocmVjdFswXVswXSA8PSBwb2ludFswXSkgJiYgKHBvaW50WzBdIDw9IHJlY3RbMV1bMF0pICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHJlY3RbMF1bMV0gPD0gcG9pbnRbMV0pICYmIChwb2ludFsxXSA8PSByZWN0WzFdWzFdKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBvaW50IGlzIGluIHRoZSBicnVzaFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlQW5pbWFscy5wdXNoKGFuaW1hbFsnYSddKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9fSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMuYWN0aXZlQW5pbWFscyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy9zZXRBY3RpdmVBbmltYWxzKGFjdGl2ZUFuaW1hbHMpO1xyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhpcy5zZXRBY3RpdmVBbmltYWxzKHRoaXMuYWN0aXZlQW5pbWFscyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEkKCcjcGxheS1idXR0b24nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vZ28gYmFjayBvbmUgc2Vjb25kIGFuZCBkcmF3IHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy90aGlzLmRlY0luZGV4VGltZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1NQVi5kcmF3KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNicnVzaGluZy1idXR0b24nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSB0aGUgYnJ1c2hcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuYnJ1c2gnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgLy9hZGQgdGhlIGJydXNoXHJcbiAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnI21haW4tdmlzLXN2ZycpXHJcbiAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCdnJylcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdicnVzaCcpXHJcbiAgICAgICAgICAgICAgICAgICAuY2FsbCh0aGlzLmJydXNoKTtcclxuICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAvLyByZW1vdmUgdGhlIGJydXNoXHJcbiAgICAgICAgICAgICAgICQoJy5icnVzaCcpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgIH1cclxuICAgICAgIH0pO1xyXG5cclxuICAgICAgIC8qKlxyXG4gICAgICAgICogVW5zZWxlY3QgYWxsIGJ1dHRvblxyXG4gICAgICAgICovXHJcbiAgICAgICAkKCcjcmVtb3ZlLWFjdGl2ZS1zZWxlY3RlZC1idXR0b24nKS5jbGljaygoKT0+e1xyXG4gICAgICAgICAgIGlmICghJCgnI3JlbW92ZS1hY3RpdmUtc2VsZWN0ZWQtYnV0dG9uJykuaXMoJzpkaXNhYmxlZCcpKSB7XHJcbiAgICAgICAgICAgICAgICQoJyNyZW1vdmUtYWN0aXZlLXNlbGVjdGVkLWJ1dHRvbicpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlQW5pbWFscyhbXSk7XHJcbiAgICAgICAgICAgICAgIC8vIHRyYWNraW5nIG9mIGRhdGEgZm9yIHZpc3VhbCBwYXJhbWV0ZXIgc3VnZ2VzdGlvblxyXG4gICAgICAgICAgICAgICByZXNldFRyYWNrZWREYXRhKCk7XHJcbiAgICAgICAgICAgICAgICQoJyN2aXN1YWwtcGFyYW1ldGVyLWJ1dHRvbicpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cclxuICAgICAgICAgICAgICAgaWYgKCEkKCcjcGxheS1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAgICAgIC8vZ28gYmFjayBvbmUgc2Vjb25kIGFuZCBkcmF3IHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAgICAgICAgICAgICAvL3RoaXMgYXBwbHlzIHRoZSBjaGFuZ2VzXHJcblxyXG4gICAgICAgICAgICAgICAgICAgdGhpcy5kZWNJbmRleFRpbWUoKTtcclxuICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgfSk7XHJcblxyXG4gICAgICAgLyoqXHJcbiAgICAgICAgKiBUcmFjayB2aXN1YWwgcGFyYW1ldGVyIGJ1dHRvblxyXG4gICAgICAgICovXHJcbiAgICAgICAkKCcjdmlzdWFsLXBhcmFtZXRlci1idXR0b24nKS5jbGljaygoKT0+e1xyXG4gICAgICAgICAgIGlmICgkKCcjdmlzdWFsLXBhcmFtZXRlci1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgc2V0VHJhY2tpbmdCb29sZWFuKGZhbHNlKTtcclxuICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICBzZXRUcmFja2luZ0Jvb2xlYW4odHJ1ZSk7XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgfSk7XHJcblxyXG4gICAgICAgLyoqXHJcbiAgICAgICAgKiBTZW5kIHRoZSB0cmFja2VkIHZpYSBhIGFqYXggcXVlcnkgdG8gdGhlIHNlcnZlciB0byBjYWxjdWxhdGUgdGhlIHBhcmFtZXRlcnNcclxuICAgICAgICAqL1xyXG4gICAgICAgJCgnI2NhbGN1bGF0ZS1wYXJhbWV0ZXItYnV0dG9uJykuY2xpY2soKCk9PntcclxuICAgICAgICAgICBpZiAoISQoJyNjYWxjdWxhdGUtcGFyYW1ldGVyLWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICBzZXRUcmFja2luZ0Jvb2xlYW4oZmFsc2UpO1xyXG4gICAgICAgICAgICAgICBzZW5kVHJhY2tlZERhdGEoKTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIGRpc2FibGUgYm90aCBidXR0b25zIGFuZCByZW1vdmUgdGhlIGFjdGl2ZSBvbmVcclxuICAgICAgICAgICAgICAgJCgnI2NhbGN1bGF0ZS1wYXJhbWV0ZXItYnV0dG9uJykucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgJCgnI2NhbGN1bGF0ZS1wYXJhbWV0ZXItYnV0dG9uJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAkKCcjdmlzdWFsLXBhcmFtZXRlci1idXR0b24nKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgfSk7XHJcblxyXG4gICAgICAgLyoqXHJcbiAgICAgICAgKiBTcGF0aWFsIHZpZXcgYmFja2dyb3VuZCBjb2xvclxyXG4gICAgICAgICovXHJcbiAgICAgICAkKCcjYmFja2dyb3VuZC1jb2xvcicpLmNoYW5nZSgoKT0+e1xyXG4gICAgICAgICAgIGxldCBjb2xvciA9ICQoJ2lucHV0W3R5cGU9XCJyYWRpb1wiXS5ncm91cC1iYWNrZ3JvdW5kOmNoZWNrZWQnKS52YWwoKTtcclxuICAgICAgICAgICAkKCcjbWFpbi12aXMtc3ZnJykuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgY29sb3IpO1xyXG4gICAgICAgfSk7XHJcblxyXG4gICAgICAgLyoqXHJcbiAgICAgICAgKiBTaG93IHRoZSBzcGF0aWFsIHZpZXcgYXhpcyBidXR0b25cclxuICAgICAgICAqL1xyXG4gICAgICAgJCgnI2RyYXctYXhpcycpLm9uKCdjaGFuZ2UnLCAoKT0+IHtcclxuICAgICAgICAgICBpZiAodGhpcy5jaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgICQoJyNtYWluLXZpcyBnLnguYXhpcycpLnNob3coKTtcclxuICAgICAgICAgICAgICAgJCgnI21haW4tdmlzIGcueS5heGlzJykuc2hvdygpO1xyXG4gICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICQoJyNtYWluLXZpcyBnLnguYXhpcycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgJCgnI21haW4tdmlzIGcueS5heGlzJykuaGlkZSgpO1xyXG4gICAgICAgICAgIH1cclxuXHJcbiAgICAgICB9KTtcclxuXHJcbiAgICAgICAvKipcclxuICAgICAgICAqIFNob3cgdGhlIGZyYW1lICh0aW1lKSBudW1iZXIgaW4gdGhlIHNwYXRpYWwgdmlldyBidXR0b25cclxuICAgICAgICAqL1xyXG4gICAgICAgJCgnI2RyYXctdGltZScpLm9uKCdjaGFuZ2UnLCAoKT0+e1xyXG4gICAgICAgICAgIGlmICh0aGlzLmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgJCgnI21haW4tdmlzIC5mcmFtZS10ZXh0Jykuc2hvdygpO1xyXG4gICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICQoJyNtYWluLXZpcyAuZnJhbWUtdGV4dCcpLmhpZGUoKTtcclxuICAgICAgICAgICB9XHJcbiAgICAgICB9KTtcclxuXHJcbiAgICAgICAvKipcclxuICAgICAgICAqIERyYXcgdGhlIG5ldHdvcmsgYmFja2dyb3VuZCBjb2xvclxyXG4gICAgICAgICovXHJcbiAgICAgICAkKCcjbmV0d29yay1iYWNrZ3JvdW5kJykub24oJ2NoYW5nZScsICgpPT4ge1xyXG4gICAgICAgICAgIGlmICh0aGlzLmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgc2V0TmV0d29ya0JhY2tncm91bmQodHJ1ZSk7XHJcbiAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgc2V0TmV0d29ya0JhY2tncm91bmQoZmFsc2UpO1xyXG4gICAgICAgICAgIH1cclxuICAgICAgIH0pO1xyXG5cclxuICAgICAgIC8qKlxyXG4gICAgICAgICogU2V0IHRoZSBuZXR3b3JrIGJhY2tncm91bmQgZWRnZSBsaW1pdFxyXG4gICAgICAgICovXHJcbiAgICAgICAkKCcjbmV0d29yay1iYWNrZ3JvdW5kLWxpbWl0JykudmFsKDEpO1xyXG4gICAgICAgJCgnI25ldHdvcmstYmFja2dyb3VuZC1saW1pdCcpLm9uKCdjaGFuZ2UnLCAoKT0+e1xyXG4gICAgICAgICAgIGxldCB2YWwgPSAkKHRoaXMpLnZhbCgpO1xyXG4gICAgICAgICAgIGlmICgkLmlzTnVtZXJpYyh2YWwpICYmIHZhbCA+IDApIHtcclxuICAgICAgICAgICAgICAgc2V0TmV0d29ya0JhY2tncm91bmRMaW1pdCh2YWwpO1xyXG4gICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICQodGhpcykudmFsKDEpO1xyXG4gICAgICAgICAgIH1cclxuICAgICAgIH0pO1xyXG5cclxuICAgICAgIC8qKlxyXG4gICAgICAgICogQ29sb3IgU2NhbGUgRnVuY3Rpb24gUmFkaW8gYnV0dG9uc1xyXG4gICAgICAgICovXHJcbiAgICAgICAkKCcjY29sb3Itc2NhbGUtcmFkaW8tZm9ybSBpbnB1dCcpLm9uKCdjaGFuZ2UnLCAoKT0+e1xyXG4gICAgICAgICAgIHRoaXMuY29sb3JTY2FsZVsndHlwZSddID0gJCgnaW5wdXRbbmFtZT1jb2xvci1zY2FsZS1yYWRpb106Y2hlY2tlZCcsICcjY29sb3Itc2NhbGUtcmFkaW8tZm9ybScpLnZhbCgpO1xyXG4gICAgICAgICAgIGlmICghJCgnI3BsYXktYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgIC8vZ28gYmFjayBvbmUgc2Vjb25kIGFuZCBkcmF3IHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAgICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuICAgICAgICAgICAgICAgdGhpcy5kZWNJbmRleFRpbWUoKTtcclxuICAgICAgICAgICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgfSk7XHJcbiAgIH1cclxuICAgc2ZfbGlzdGVuZXJzKCkge1xyXG5cclxuICAgICAgIC8qKlxyXG4gICAgICAgICogRHJhdyBkaXJlY3Rpb24gYXJyb3cgb2YgdGhlIGFuaW1hbFxyXG4gICAgICAgICovXHJcbiAgICAgICAkKCcjZHJhdy1kaXJlY3Rpb24nKS5jbGljaygoKT0+e1xyXG4gICAgICAgICAgIGlmICgkKCcjZHJhdy1kaXJlY3Rpb24nKS5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgICBpZiAoISgnZGlyZWN0aW9uJyBpbiBkYXRhc2V0WzBdKSkge1xyXG4gICAgICAgICAgICAgICAgICAgZGlzYWJsZVBsYXlCdXR0b24oKTtcclxuICAgICAgICAgICAgICAgICAgIC8vIGFqYXggcXVlcnkgdG8gZ2V0IGRpcmVjdGlvbiBkYXRhXHJcbiAgICAgICAgICAgICAgICAgICBnZXREYXRhc2V0RmVhdHVyZSgnZGlyZWN0aW9uJyk7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgJCgnLmFycm93Jykuc2hvdygpO1xyXG4gICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICQoJy5hcnJvdycpLmhpZGUoKTtcclxuICAgICAgICAgICB9XHJcbiAgICAgICAgICAgaWYgKCEkKCcjcGxheS1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAgLy9nbyBiYWNrIG9uZSBzZWNvbmQgYW5kIGRyYXcgdGhlIG5leHQgZnJhbWVcclxuICAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgICB0aGlzLmRlY0luZGV4VGltZSgpO1xyXG4gICAgICAgICAgICAgICAvL3RoaXMuZHJhdygpO1xyXG4gICAgICAgICAgIH1cclxuICAgICAgIH0pO1xyXG5cclxuICAgICAgIC8qKlxyXG4gICAgICAgICogRHJhdyBtZWRvaWQgaW4gY29sb3IgYnV0dG9uXHJcbiAgICAgICAgKi9cclxuICAgICAgICQoJyNkcmF3LW1lZG9pZCcpLmNsaWNrKCgpID0+IHtcclxuICAgICAgICAgICBpZiAoJCgnI2RyYXctbWVkb2lkJykuaXMoJzpjaGVja2VkJykpIHtcclxuXHJcbiAgICAgICAgICAgICAgIGlmICghKCdtZWRvaWQnIGluIHN3YXJtRGF0YVswXSkpIHtcclxuICAgICAgICAgICAgICAgICAgIGdldFN3YXJtRGF0YXNldEZlYXR1cmUoJ21lZG9pZCcpO1xyXG5cclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICB0aGlzLnNldE1lZG9pZEFuaW1hbChzd2FybURhdGFbdGhpcy5pbmRleFRpbWVdWydtZWRvaWQnXSk7XHJcbiAgICAgICAgICAgICAgIC8vIGRpc3BsYXkgdGhlIG1lZG9pZFxyXG4gICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoJyNhbmltYWwtJyArIHRoaXMubWVkb2lkQW5pbWFsKVxyXG4gICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ21lZG9pZCcsIHRydWUpO1xyXG4gICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgIC8vIGRvIG5vdCBkaXNwbGF5IHRoZSBtZWRvaWQgZmlzaFxyXG4gICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoJyNhbmltYWwtJyArIHRoaXMubWVkb2lkQW5pbWFsKVxyXG4gICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ21lZG9pZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgdGhpcy5zZXRNZWRvaWRBbmltYWwoLTEpO1xyXG4gICAgICAgICAgIH1cclxuICAgICAgIH0pO1xyXG5cclxuICAgICAgIC8qKlxyXG4gICAgICAgICogRHJhdyBjZW50cm9pZCBidXR0b25cclxuICAgICAgICAqL1xyXG4gICAgICAgJCgnI2RyYXctY2VudHJvaWQnKS5jbGljaygoKT0+e1xyXG4gICAgICAgICAgIGlmICgkKCcjZHJhdy1jZW50cm9pZCcpLmlzKCc6Y2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICAgIGlmICghKCdjZW50cm9pZCcgaW4gc3dhcm1EYXRhWzBdKSkge1xyXG4gICAgICAgICAgICAgICAgICAgZ2V0U3dhcm1EYXRhc2V0RmVhdHVyZSgnY2VudHJvaWQnKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAvLyBkaXNwbGF5IHRoZSBjZW50cm9pZFxyXG4gICAgICAgICAgICAgICAkKCcjZy1jZW50cm9pZCcpLnNob3coKTtcclxuICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAvLyBoaWRlIHRoZSBjZW50cm9pZFxyXG4gICAgICAgICAgICAgICAkKCcjZy1jZW50cm9pZCcpLmhpZGUoKTtcclxuICAgICAgICAgICB9XHJcbiAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgLyoqXHJcbiAgICAgICAgKiBEcmF3IGNvbnZleCBodWxsIGluIGNvbG9yIGJ1dHRvblxyXG4gICAgICAgICovXHJcbiAgICAgICAkKCcjZHJhdy1jb252ZXgtaHVsbCcpLmNsaWNrKCgpPT57XHJcbiAgICAgICAgICAgaWYgKCQoJyNkcmF3LWNvbnZleC1odWxsJykuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICAgaWYgKCEoJ2h1bGwnIGluIHN3YXJtRGF0YVswXSkpIHtcclxuICAgICAgICAgICAgICAgICAgIGdldFN3YXJtRGF0YXNldEZlYXR1cmUoJ2NvbnZleF9odWxsJyk7XHJcblxyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgIC8qKlxyXG4gICAgICAgICogRHJhdyB0cmlhbmd1bGF0aW9uXHJcbiAgICAgICAgKi9cclxuICAgICAgICQoJyNkcmF3LXRyaWFuZ3VsYXRpb24nKS5jbGljaygoKT0+e1xyXG4gICAgICAgICAgIGlmICgkKCcjZHJhdy10cmlhbmd1bGF0aW9uJykuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICAgaWYgKCEoJ3RyaWFuZ3VsYXRpb24nIGluIHN3YXJtRGF0YVswXSkpIHtcclxuICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2VyZScpO1xyXG4gICAgICAgICAgICAgICAgICAgZ2V0U3dhcm1EYXRhc2V0RmVhdHVyZSgndHJpYW5ndWxhdGlvbicpO1xyXG4gICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhzd2FybURhdGFbdGhpcy5pbmRleFRpbWVdWyd0cmlhbmd1bGF0aW9uJ10pO1xyXG5cclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgLy9nbyBiYWNrIG9uZSBzZWNvbmQgYW5kIGRyYXcgdGhlIG5leHQgZnJhbWVcclxuICAgICAgICAgICAgICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuICAgICAgICAgICAgICAgICAgIHRoaXMuZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAvL3RoaXMuZHJhdygpO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICB9XHJcbiAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgLyoqXHJcbiAgICAgICAgKiBEcmF3IHZvcm9ub2lcclxuICAgICAgICAqL1xyXG4gICAgICAgJCgnI2RyYXctdm9yb25vaScpLmNsaWNrKCgpPT57XHJcbiAgICAgICAgICAgaWYgKCQoJyNkcmF3LXZvcm9ub2knKS5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgICBpZiAoISgndm9yb25vaScgaW4gc3dhcm1EYXRhWzBdKSkge1xyXG4gICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnZXJlJyk7XHJcbiAgICAgICAgICAgICAgICAgICBnZXRTd2FybURhdGFzZXRGZWF0dXJlKCd2b3Jvbm9pJyk7XHJcbiAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHN3YXJtRGF0YVt0aGlzLmluZGV4VGltZV1bJ3Zvcm9ub2knXSk7XHJcblxyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIGlmICghJCgnI3BsYXktYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygndGhlcmUnKTtcclxuICAgICAgICAgICAgICAgICAgIHRoaXMuZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAvL3RoaXMuZHJhdygpO1xyXG4gICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgIH1cclxuICAgICAgIH0pO1xyXG5cclxuXHJcbiAgIH1cclxuICAgYWZfbGlzdGVuZXJzKCkge1xyXG5cclxuICAgICAgIC8qKlxyXG4gICAgICAgICogRHJhdyBTcGVlZCBidXR0b25cclxuICAgICAgICAqL1xyXG4gICAgICAgJCgnI2RyYXctc3BlZWQnKS5jbGljaygoKT0+e1xyXG4gICAgICAgICAgICQoJy5kcmF3LWRldGFpbHMnKS5oaWRlKClcclxuICAgICAgICAgICAgICAgLmZpbmQoJ2lucHV0OmNoZWNrYm94JykucHJvcCgnY2hlY2tlZCcsIHRydWUpLmNsaWNrKCk7XHJcbiAgICAgICAgICAgaWYgKCQoJyNkcmF3LXNwZWVkJykuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICAgLy8gbG9hZCBhYnNvbHV0ZSBmZWF0dXJlIHNwZWVkIGRhdGEgb25jZVxyXG4gICAgICAgICAgICAgICBpZiAoISgnc3BlZWQnIGluIGRhdGFzZXRbMF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICBkaXNhYmxlUGxheUJ1dHRvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgLy8gYWpheCBxdWVyeSB0byBnZXQgdGhlIGFic29sdXRlIGZlYXR1cmUgc3BlZWRcclxuICAgICAgICAgICAgICAgICAgIGdldERhdGFzZXRGZWF0dXJlKCdzcGVlZCcpO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIC8vICQoJy5kcmF3LWRldGFpbHMnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICQoJyNkcmF3LXNwZWVkLWRldGFpbHMnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICQoJyNkcmF3LWFjY2VsZXJhdGlvbicpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICQoJyNkcmF3LWRpc3RhbmNlX2NlbnRyb2lkJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgJCgnI2RyYXctbWlkbGluZV9vZmZzZXQnKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICB0aGlzLnNldEFjdGl2ZVNjYWxlKCdzcGVlZCcpO1xyXG4gICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICQoJyNkcmF3LXNwZWVkLWRldGFpbHMnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlU2NhbGUoJ2JsYWNrJyk7XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgICAgIC8vY2hhbmdlIGNvbG9yIGxlZ2VuZFxyXG4gICAgICAgICAgIGQzLnNlbGVjdEFsbCgnLmNvbG9yTGVnZW5kIConKS5yZW1vdmUoKTtcclxuICAgICAgICAgICB0aGlzLmNoYW5nZWxlZ2VuZCgpO1xyXG5cclxuICAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgICAvL3RoaXMgYXBwbHlzIHRoZSBjaGFuZ2VzXHJcbiAgICAgICAgICAgICAgIHRoaXMuZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgICAgICAgIC8vdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgfSk7XHJcblxyXG4gICAgICAgLyoqXHJcbiAgICAgICAgKiBEcmF3IGFjY2VsZXJhdGlvbiBidXR0b25cclxuICAgICAgICAqL1xyXG4gICAgICAgJCgnI2RyYXctYWNjZWxlcmF0aW9uJykuY2xpY2soKCk9PntcclxuICAgICAgICAgICAkKCcuZHJhdy1kZXRhaWxzJykuaGlkZSgpXHJcbiAgICAgICAgICAgICAgIC5maW5kKCdpbnB1dDpjaGVja2JveCcpLnByb3AoJ2NoZWNrZWQnLCB0cnVlKS5jbGljaygpO1xyXG4gICAgICAgICAgIGlmICgkKCcjZHJhdy1hY2NlbGVyYXRpb24nKS5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgICAvLyBsb2FkIGFic29sdXRlIGZlYXR1cmUgYWNjZWxlcmF0aW9uIGRhdGEgb25jZVxyXG4gICAgICAgICAgICAgICBpZiAoISgnYWNjZWxlcmF0aW9uJyBpbiBkYXRhc2V0WzBdKSkge1xyXG4gICAgICAgICAgICAgICAgICAgZGlzYWJsZVBsYXlCdXR0b24oKTtcclxuICAgICAgICAgICAgICAgICAgIC8vIGFqYXggcXVlcnkgdG8gZ2V0IHRoZSBhYnNvbHV0ZSBmZWF0dXJlIGFjY2VsZXJhdGlvblxyXG4gICAgICAgICAgICAgICAgICAgZ2V0RGF0YXNldEZlYXR1cmUoJ2FjY2VsZXJhdGlvbicpO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICQoJyNkcmF3LWFjY2VsZXJhdGlvbi1kZXRhaWxzJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAkKCcjZHJhdy1zcGVlZCcpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICQoJyNkcmF3LWRpc3RhbmNlX2NlbnRyb2lkJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgJCgnI2RyYXctbWlkbGluZV9vZmZzZXQnKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICB0aGlzLnNldEFjdGl2ZVNjYWxlKCdhY2NlbGVyYXRpb24nKTtcclxuICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAkKCcjZHJhdy1hY2NlbGVyYXRpb24tZGV0YWlscycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVTY2FsZSgnYmxhY2snKTtcclxuICAgICAgICAgICB9XHJcbiAgICAgICAgICAgJCgnLmRyYXctZGV0YWlscy5hY3RpdmUnKS5jbGljaygpO1xyXG4gICAgICAgICAgIC8vY2hhbmdlIGNvbG9yIGxlZ2VuZFxyXG4gICAgICAgICAgIGQzLnNlbGVjdEFsbCgnLmNvbG9yTGVnZW5kIConKS5yZW1vdmUoKTtcclxuICAgICAgICAgICB0aGlzLmNoYW5nZWxlZ2VuZCgpO1xyXG5cclxuICAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgICAvL3RoaXMgYXBwbHlzIHRoZSBjaGFuZ2VzXHJcbiAgICAgICAgICAgICAgIHRoaXMuZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgICAgICAgIC8vdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgfSk7XHJcblxyXG4gICAgICAgLyoqXHJcbiAgICAgICAgKiBEcmF3IGRpc3RhbmNlIHRvIGNlbnRyb2lkIGJ1dHRvblxyXG4gICAgICAgICovXHJcbiAgICAgICAkKCcjZHJhdy1kaXN0YW5jZV9jZW50cm9pZCcpLmNsaWNrKCgpPT57XHJcbiAgICAgICAgICAgJCgnLmRyYXctZGV0YWlscycpLmhpZGUoKVxyXG4gICAgICAgICAgICAgICAuZmluZCgnaW5wdXQ6Y2hlY2tib3gnKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSkuY2xpY2soKTtcclxuICAgICAgICAgICBpZiAoJCgnI2RyYXctZGlzdGFuY2VfY2VudHJvaWQnKS5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdjaGVja2VkJyk7XHJcbiAgICAgICAgICAgICAgIC8vIGxvYWQgYWJzb2x1dGUgZmVhdHVyZSBkaXN0YW5jZV9jZW50cm9pZCBkYXRhIG9uY2VcclxuICAgICAgICAgICAgICAgaWYgKCEoJ2Rpc3RhbmNlX2NlbnRyb2lkJyBpbiBkYXRhc2V0WzBdKSkge1xyXG4gICAgICAgICAgICAgICAgICAgZGlzYWJsZVBsYXlCdXR0b24oKTtcclxuICAgICAgICAgICAgICAgICAgIC8vIGFqYXggcXVlcnkgdG8gZ2V0IHRoZSBhYnNvbHV0ZSBmZWF0dXJlIGRpc3RhbmNlX2NlbnRyb2lkXHJcbiAgICAgICAgICAgICAgICAgICBnZXREYXRhc2V0RmVhdHVyZSgnZGlzdGFuY2VfY2VudHJvaWQnKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGRhdGFzZXQpO1xyXG4gICAgICAgICAgICAgICAkKCcjZHJhdy1kaXN0YW5jZV9jZW50cm9pZC1kZXRhaWxzJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAkKCcjZHJhdy1zcGVlZCcpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICQoJyNkcmF3LWFjY2VsZXJhdGlvbicpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICQoJyNkcmF3LW1pZGxpbmVfb2Zmc2V0JykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVTY2FsZSgnZGlzdGFuY2VfY2VudHJvaWQnKTtcclxuICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnYmxhY2snKTtcclxuICAgICAgICAgICAgICAgJCgnI2RyYXctZGlzdGFuY2VfY2VudHJvaWQtZGV0YWlscycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVTY2FsZSgnYmxhY2snKTtcclxuXHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgICAgICQoJy5kcmF3LWRldGFpbHMuYWN0aXZlJykuY2xpY2soKTtcclxuXHJcbiAgICAgICAgICAgLy9jaGFuZ2UgY29sb3IgbGVnZW5kXHJcbiAgICAgICAgICAgZDMuc2VsZWN0QWxsKCcuY29sb3JMZWdlbmQgKicpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgIHRoaXMuY2hhbmdlbGVnZW5kKCk7XHJcblxyXG4gICAgICAgICAgIGlmICghJCgnI3BsYXktYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgIC8vZ28gYmFjayBvbmUgc2Vjb25kIGFuZCBkcmF3IHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAgICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuICAgICAgICAgICAgICAgdGhpcy5kZWNJbmRleFRpbWUoKTtcclxuICAgICAgICAgICAgICAgLy90aGlzLmRyYXcoKTtcclxuICAgICAgICAgICB9XHJcbiAgICAgICB9KTtcclxuXHJcbiAgICAgICAvKipcclxuICAgICAgICAqIERyYXcgbWlkbGluZSBvZmZzZXRcclxuICAgICAgICAqL1xyXG4gICAgICAgJCgnI2RyYXctbWlkbGluZV9vZmZzZXQnKS5jbGljaygoKT0+e1xyXG4gICAgICAgICAgICQoJy5kcmF3LWRldGFpbHMnKS5oaWRlKClcclxuICAgICAgICAgICAgICAgLmZpbmQoJ2lucHV0OmNoZWNrYm94JykucHJvcCgnY2hlY2tlZCcsIHRydWUpLmNsaWNrKCk7XHJcbiAgICAgICAgICAgaWYgKCQoJyNkcmF3LW1pZGxpbmVfb2Zmc2V0JykuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICAgLy8gbG9hZCBhYnNvbHV0ZSBmZWF0dXJlIGRyYXctbWlkbGluZV9vZmZzZXQgZGF0YSBvbmNlXHJcbiAgICAgICAgICAgICAgIGlmICghKCdkcmF3LW1pZGxpbmVfb2Zmc2V0JyBpbiBkYXRhc2V0WzBdKSkge1xyXG4gICAgICAgICAgICAgICAgICAgZGlzYWJsZVBsYXlCdXR0b24oKTtcclxuICAgICAgICAgICAgICAgICAgIC8vIGFqYXggcXVlcnkgdG8gZ2V0IHRoZSBhYnNvbHV0ZSBmZWF0dXJlIG1pZGxpbmVfb2Zmc2V0XHJcbiAgICAgICAgICAgICAgICAgICBnZXREYXRhc2V0RmVhdHVyZSgnbWlkbGluZV9vZmZzZXQnKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAkKCcjZHJhdy1taWRsaW5lX29mZnNldC1kZXRhaWxzJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAkKCcjZHJhdy1zcGVlZCcpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICQoJyNkcmF3LWFjY2VsZXJhdGlvbicpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICQoJyNkcmF3LWRpc3RhbmNlX2NlbnRyb2lkJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgc2V0QWN0aXZlU2NhbGUoJ21pZGxpbmVfb2Zmc2V0Jyk7XHJcbiAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgc2V0QWN0aXZlU2NhbGUoJ2JsYWNrJyk7XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgICAgICQoJy5kcmF3LWRldGFpbHMuYWN0aXZlJykuY2xpY2soKTtcclxuICAgICAgICAgICAvL2NoYW5nZSBjb2xvciBsZWdlbmRcclxuICAgICAgICAgICBkMy5zZWxlY3RBbGwoJy5jb2xvckxlZ2VuZCAqJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgdGhpcy5jaGFuZ2VsZWdlbmQoKTtcclxuXHJcbiAgICAgICAgICAgaWYgKCEkKCcjcGxheS1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAgLy9nbyBiYWNrIG9uZSBzZWNvbmQgYW5kIGRyYXcgdGhlIG5leHQgZnJhbWVcclxuICAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgICB0aGlzLmRlY0luZGV4VGltZSgpO1xyXG4gICAgICAgICAgICAgICB0aGlzLmRyYXcoKTtcclxuICAgICAgICAgICB9XHJcbiAgICAgICB9KTtcclxuXHJcbiAgIH1cclxuICAgbWRfbGlzdGVuZXJzKCkge1xyXG4gICAgICAgLyoqXHJcbiAgICAgICAgKiBNZXRhZGF0YSBzd2F0Y2ggZnVuY3Rpb25zIGNvbG9yaW5nIGluZGl2aWR1YWwgYW5pbWFsc1xyXG4gICAgICAgICovXHJcbiAgICAgICAkKCcubWV0YWRhdGEtc3dhdGNoLm1ldGFkYXRhLXN3YXRjaC1jbGlja2FibGUnKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICAgICAgICBsZXQgaWQgPSAkKHRoaXMpLmF0dHIoJ3ZhbHVlJyk7XHJcbiAgICAgICAgICAgbGV0IGNvbG9yUkdCID0gJCh0aGlzKS5jc3MoJ2JhY2tncm91bmQtY29sb3InKTtcclxuICAgICAgICAgICAvLyBzZXQgdGhlIGNvbG9yIG9mIHRoZSBzd2F0Y2ggcHJldmlld1xyXG4gICAgICAgICAgICQoJyNtZXRhZGF0YS1yb3ctJyArIGlkICsgJyAjcHJldmlldycpXHJcbiAgICAgICAgICAgICAgIC5jc3MoJ2JhY2tncm91bmQtY29sb3InLCBjb2xvclJHQik7XHJcbiAgICAgICAgICAgLy8gaWYgd2hpdGUgdGhhbiByZXNldCB0aGUgY29sb3JcclxuICAgICAgICAgICBpZiAoY29sb3JSR0IgPT09ICdyZ2IoMjU1LCAyNTUsIDI1NSknKSB7XHJcbiAgICAgICAgICAgICAgIGlmIChtZXRhZGF0YUNvbG9yW2lkXSkge1xyXG4gICAgICAgICAgICAgICAgICAgZGVsZXRlIG1ldGFkYXRhQ29sb3JbaWRdO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgbWV0YWRhdGFDb2xvcltpZF0gPSBjb2xvclJHQjtcclxuICAgICAgICAgICB9XHJcbiAgICAgICB9KTtcclxuXHJcbiAgICAgICAvKipcclxuICAgICAgICAqIE1ldGFkYXRhIGdyb3VwIG1ldGFkYXRhIGZ1bmN0aW9ucyBmb3IgaW5zdGFuY2UgY29sb3Igc2V4XHJcbiAgICAgICAgKi9cclxuICAgICAgICQoJyNncm91cC1tZXRhZGF0YSA6aW5wdXQnKS5jaGFuZ2UoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgLy8gcmVzZXQgdGhlIG1ldGFkYXQgYWNvbG9yaW5nXHJcbiAgICAgICAgICAgcmVzZXRJbmRpdmlkdWFsTWV0YWRhdGEoKTtcclxuXHJcbiAgICAgICAgICAgbGV0IHZhbHVlID0gJCh0aGlzKS5hdHRyKCd2YWx1ZScpO1xyXG4gICAgICAgICAgIGxldCB0bXAgPSBbXTtcclxuXHJcbiAgICAgICAgICAgLy8gbWV0YWRhdGEgc2V4IGlzIGNob29zZW4gLSBjb2xvcmluZyBiYXNlZCBvbiBtIGFuZCBmXHJcbiAgICAgICAgICAgaWYgKHZhbHVlID09PSAnc2V4Jykge1xyXG4gICAgICAgICAgICAgICAkKCcjbWV0YWRhdGEtZGl2JykubW9kYWwoJ3RvZ2dsZScpO1xyXG4gICAgICAgICAgICAgICAvLyBjbG9zZSBhbmQgY29sb3IgaGVyZVxyXG4gICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGFzZXRNZXRhZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgdG1wLnB1c2goZGF0YXNldE1ldGFkYXRhW2ldW3ZhbHVlXS50b0xvd2VyQ2FzZSgpKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAvLyBjcmVhdGUgYSBzZXQgb2YgaW5kaXZpZHVhbCBzdHJpbmdzIGluIHNleFxyXG4gICAgICAgICAgICAgICB0bXAgPSBBcnJheS5mcm9tKG5ldyBTZXQodG1wKSk7XHJcbiAgICAgICAgICAgICAgIGxldCBjb2xvcnMgPSBbJyM3ZmM5N2YnLCAnIzM4NmNiMCddO1xyXG5cclxuICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhc2V0TWV0YWRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdG1wLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFzZXRNZXRhZGF0YVtpXVt2YWx1ZV0udG9Mb3dlckNhc2UoKSA9PT0gdG1wW2pdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCB0aGUgY29sb3JpbmcgdG8gdGhlIG1ldGFkYXRhY29sb3Igb2JqZWN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhQ29sb3JbZGF0YXNldE1ldGFkYXRhW2ldWydhbmltYWxfaWQnXV0gPSBjb2xvcnNbal07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICQoJyNtZXRhZGF0YS1pbnB1dCcpLmhpZGUoKTtcclxuICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAkKCcjbWV0YWRhdGEtaW5wdXQnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgIC8vIHNldCB2YWx1ZXMgb2YgaW5wdXRzXHJcbiAgICAgICAgICAgICAgIC8vIGhlcmUgYXJlIGF1dG9tYXRpY2FsbHkgaW5wdXQgdmFsdWVzIGNhbGN1bGF0ZWRcclxuICAgICAgICAgICAgICAgLy8gLjI1IGFuZCAuNzUgcGVyY2VudGlsZXMgYXJlIHVzZWRcclxuICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhc2V0TWV0YWRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgIHRtcC5wdXNoKGRhdGFzZXRNZXRhZGF0YVtpXVt2YWx1ZV0pO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIGxldCBibEF2ZyA9IGQzLnF1YW50aWxlKHRtcCwgMC4yNSk7IC8vIGJlbG93IGF2ZXJhZ2UgdmFsdWVcclxuICAgICAgICAgICAgICAgbGV0IGFiQXZnID0gZDMucXVhbnRpbGUodG1wLCAwLjc1KTsgLy8gYWJvdmUgYXZlcmFnZVxyXG4gICAgICAgICAgICAgICAkKCcjYmwtYXZnJykudmFsKGJsQXZnKTtcclxuICAgICAgICAgICAgICAgJCgnI2FiLWF2ZycpLnZhbChhYkF2Zyk7XHJcbiAgICAgICAgICAgICAgIC8vIGNvbG9yIHRoZSBhbmltYWxzXHJcbiAgICAgICAgICAgICAgIGNvbG9yTWV0YWRhdGEoKTtcclxuICAgICAgICAgICB9XHJcbiAgICAgICB9KTtcclxuXHJcbiAgICAgICAvKipcclxuICAgICAgICAqIE1ldGFkYXRhIGdyb3VwIG1ldGFkYXRhIGlucHV0IHNwaW5uZXJcclxuICAgICAgICAqICsvLSAwLjEgdG8gdGhlIGlucHV0IHZhbHVlXHJcbiAgICAgICAgKi9cclxuICAgICAgICQoJy5udW1iZXItc3Bpbm5lciBidXR0b24nKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICAgICAgICBsZXQgYnRuID0gJCh0aGlzKSxcclxuICAgICAgICAgICAgICAgb2xkVmFsdWUgPSBidG4uY2xvc2VzdCgnLm51bWJlci1zcGlubmVyJykuZmluZCgnaW5wdXQnKS52YWwoKS50cmltKCksXHJcbiAgICAgICAgICAgICAgIG5ld1ZhbCA9IDA7XHJcblxyXG4gICAgICAgICAgIGlmIChidG4uYXR0cignZGF0YS1kaXInKSA9PSAndXAnKSB7XHJcbiAgICAgICAgICAgICAgIG5ld1ZhbCA9IHBhcnNlRmxvYXQob2xkVmFsdWUpICsgMC4xO1xyXG4gICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgIGlmIChvbGRWYWx1ZSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgIG5ld1ZhbCA9IHBhcnNlRmxvYXQob2xkVmFsdWUpIC0gMC4xO1xyXG4gICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgbmV3VmFsID0gMDtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgIH1cclxuICAgICAgICAgICBuZXdWYWwgPSBNYXRoLnJvdW5kKG5ld1ZhbCAqIDEwMCkgLyAxMDA7IC1cclxuICAgICAgICAgICBidG4uY2xvc2VzdCgnLm51bWJlci1zcGlubmVyJykuZmluZCgnaW5wdXQnKS52YWwobmV3VmFsKTtcclxuICAgICAgICAgICAvLyBjaGFuZ2UgdGhlIGNvbG9yaW5nXHJcbiAgICAgICAgICAgY29sb3JNZXRhZGF0YSgpO1xyXG4gICAgICAgfSk7XHJcblxyXG4gICAgICAgLyoqXHJcbiAgICAgICAgKiBNZXRhZGF0YSBpbnB1dCBmaWVsZHMgY2hhbmdlXHJcbiAgICAgICAgKi9cclxuICAgICAgICQoJy5udW1iZXItc3Bpbm5lciBpbnB1dCcpLm9uKCdpbnB1dCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgIGNvbG9yTWV0YWRhdGEoKTtcclxuICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAvKipcclxuICAgICAgICAqIFJlc2V0IGFsbCBtZXRhZGF0YSBpbnB1dCBwYXJhbWV0ZXJzXHJcbiAgICAgICAgKi9cclxuICAgICAgICQoJyNtZXRhZGF0YS1yZXNldCcpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICQoJyNtZXRhZGF0YS1pbnB1dCcpLmhpZGUoKTtcclxuICAgICAgICAgICByZXNldEluZGl2aWR1YWxNZXRhZGF0YSgpO1xyXG4gICAgICAgfSk7XHJcblxyXG4gICB9XHJcbiAgIGhfbGlzdGVuZXJzKCkge1xyXG5cclxuICAgICAgICQoJy5oaWVhcmNoeS1jaGVja2JveCcpLm9uKCdjaGFuZ2UnLCAoKT0+e1xyXG4gICAgICAgICAgIGNvbnNvbGUubG9nKCdjaGVjaycpO1xyXG4gICAgICAgICAgIGxldCBjaGVja2JveCA9ICQoJy5oaWVhcmNoeS1jaGVja2JveCcpO1xyXG4gICAgICAgICAgIGNvbnNvbGUubG9nKGNoZWNrYm94KTtcclxuICAgICAgICAgICBsZXQgaWQgPSBjaGVja2JveC5hdHRyKCdkYXRhJyk7XHJcbiAgICAgICAgICAgbGV0IG5hbWUgPSBjaGVja2JveC5hdHRyKCduYW1lJyk7XHJcbiAgICAgICAgICAgbGV0IGNoZWNrZWQgPSBjaGVja2JveC5wcm9wKCdjaGVja2VkJyk7XHJcbiAgICAgICAgICAgY29uc29sZS5sb2coY2hlY2tlZCk7XHJcblxyXG4gICAgICAgICAgIGlmIChjaGVja2VkICYmICQoJy5zaG93LWRlbmRyb2dyYW0nKS5sZW5ndGggPCBtYXhOdW1iZXJIaWVyYXJjaGllcykge1xyXG5cclxuICAgICAgICAgICAgICAgZGlzYWJsZVBsYXlCdXR0b24oKTtcclxuICAgICAgICAgICAgICAgZ2V0TmV0d29ya0hpZXJhcmNoeURhdGEoaWQpO1xyXG5cclxuICAgICAgICAgICAgICAgYWRkSGllcmFyY2h5QnV0dG9uKGlkLCBuYW1lKTtcclxuICAgICAgICAgICAgICAgJCgnI3Nob3ctZGVuZHJvZ3JhbS0nICsgaWQpLmNsaWNrKCgpPT57XHJcbiAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2RlbmRybyBjbGlja2VkJyk7XHJcbiAgICAgICAgICAgICAgICAgICBsZXQgY2xpY2tlZEJ1dHRvbklEID0gJCgnI3Nob3ctZGVuZHJvZ3JhbS0nICsgaWQpLmF0dHIoJ2lkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAvLyBpdGVyYXRlIG92ZXIgYWxsIGJ1dHRvbnMgYW5kIGN1c3RvbSBoaWdobGlnaHQganVzdCBvbmUgb3Igbm9uZVxyXG4gICAgICAgICAgICAgICAgICAgJCgnLnNob3ctZGVuZHJvZ3JhbScpLmVhY2goKGksIGJ1dHRvbik9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAvLyBhY3RpdmUgZm91bmQgYnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQoYnV0dG9uKS5hdHRyKCdpZCcpID09PSBjbGlja2VkQnV0dG9uSUQgJiYgJChidXR0b24pLmhhc0NsYXNzKCdidG4tcHJpbWFyeScpID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAkKGJ1dHRvbikuYWRkQ2xhc3MoJ2J0bi1wcmltYXJ5Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICQoYnV0dG9uKS5maW5kKCcjYnRuLWxlZnQnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICQoYnV0dG9uKS5maW5kKCcjYnRuLXJpZ2h0Jykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPIGFkZCBoZXJlIGEgcmVzaXplIG9mIHRoZSBtYWluIHZpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAkKCcjZGVuZHJvZ3JhbS1wYW5lbCcpLmluc2VydEFmdGVyKCQodGhpcykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0gLy8gcmVtb3ZlIGhpZ2hsaWdodFxyXG4gICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAkKGJ1dHRvbikucmVtb3ZlQ2xhc3MoJ2J0bi1wcmltYXJ5Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICQoYnV0dG9uKS5maW5kKCcjYnRuLWxlZnQnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICQoYnV0dG9uKS5maW5kKCcjYnRuLXJpZ2h0JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgIC8vIHNob3cgZGVuZHJvZ3JhbVxyXG4gICAgICAgICAgICAgICAgICAgaWYgKCQoJy5zaG93LWRlbmRyb2dyYW0uYnRuLXByaW1hcnknKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAkKCcjZGVuZHJvZ3JhbS1wYW5lbCcpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc2hvd3MnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXdEZW5kcm9ncmFtKCk7XHJcbiAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICQoJyNkZW5kcm9ncmFtLXBhbmVsJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdoaWRlcycpO1xyXG4gICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3RGVuZHJvZ3JhbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgaWYgKCEkKCcjcGxheS1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwbGF5cycpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlY0luZGV4VGltZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhd0RlbmRyb2dyYW0oKTtcclxuICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICQoJyNkZW5kcm9ncmFtLWJ1dHRvbnMtZGl2Jykuc2hvdygpO1xyXG4gICAgICAgICAgIH1cclxuICAgICAgICAgICAvLyBlbHNlIGlmICgkKCcuc2hvdy1kZW5kcm9ncmFtJykubGVuZ3RoID09PSBtYXhOdW1iZXJIaWVyYXJjaGllcykge1xyXG4gICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdNYXggbnVtYmVyIG9mIGhpZXJhcmNoaWVzIGlzOiAnICsgbWF4TnVtYmVySGllcmFyY2hpZXMpO1xyXG4gICAgICAgICAgIC8vVE9ETyBpbXBsZW1lbnQgdGhpcyBoZXJlXHJcbiAgICAgICAgICAgLy8gbm90aWNlIHVzZXIgdGhhdCBpdCBpcyBub3QgcG9zc2libGUgdG8gc2hvdyBtb3JlIHRoYW4gbiBoaWVyYXJjaGllc1xyXG4gICAgICAgICAgIC8vICAgICAgICAgIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XHJcbiAgICAgICAgICAgLy8gICA8c3Ryb25nPkluZm8hPC9zdHJvbmc+IEF0dGVudGlvbiB1c2VyIC5cclxuICAgICAgICAgICAvLyA8L2Rpdj5cclxuICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgIC8vIHRtcCB2YXJpYWJsZSB0byBzYXZlIGlmIHRoZSBidXR0b24gd2hpY2ggaXMgZ29pbmcgdG8gYmUgcmVtb3ZlZFxyXG4gICAgICAgICAgICAgICAvLyB3YXMgYWN0aXZlXHJcbiAgICAgICAgICAgICAgIGxldCB0bXBBY3RpdmUgPSAkKCcjc2hvdy1kZW5kcm9ncmFtLScgKyBpZCkuaGFzQ2xhc3MoJ2J0bi1wcmltYXJ5Jyk7XHJcbiAgICAgICAgICAgICAgIHNldEhpZXJhcmNoeURhdGEoe30sIGlkKTtcclxuXHJcbiAgICAgICAgICAgICAgIHJlbW92ZUhpZXJhcmNoeUJ1dHRvbihpZCk7XHJcbiAgICAgICAgICAgICAgIC8vIFRPRE8gZmluZCBiZXR0ZXIgd2F5IGhlcmVcclxuICAgICAgICAgICAgICAgZDMuc2VsZWN0KCdnLmgnICsgaWQpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAvLyByZW1vdmUgdGhlIGRlbmRyb2dyYW0gYW5kIHRoZSBwYW5lbCBpZiB0aGUgcmVtb3ZlZCBlbGVtZW50IHdhcyBjaGVja2VkXHJcbiAgICAgICAgICAgICAgIGlmICh0bXBBY3RpdmUgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICQoJyNkZW5kcm9ncmFtLXBhbmVsJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIGlmICgkKCcuc2hvdy1kZW5kcm9ncmFtJykubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAkKCcjZGVuZHJvZ3JhbS1idXR0b25zLWRpdicpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICB9XHJcbiAgICAgICAgICAgLy8gcmVzaXplIHRoZSBtYWluIHN2Z1xyXG4gICAgICAgICAgIGlmICgkKCcuc2hvdy1kZW5kcm9ncmFtJykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICQoJyNtYWluLXZpcy1kaXYnKS5yZW1vdmVDbGFzcygnY29sLW1kLTEyJyk7XHJcbiAgICAgICAgICAgICAgICQoJyNtYWluLXZpcy1kaXYnKS5hZGRDbGFzcygnY29sLW1kLTgnKTtcclxuICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAkKCcjbWFpbi12aXMtZGl2JykucmVtb3ZlQ2xhc3MoJ2NvbC1tZC04Jyk7XHJcbiAgICAgICAgICAgICAgICQoJyNtYWluLXZpcy1kaXYnKS5hZGRDbGFzcygnY29sLW1kLTEyJyk7XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgfSk7XHJcblxyXG4gICAgICAgLyoqXHJcbiAgICAgICAgKiBWaXN1YWxpemUgdGhlIG5ldHdvcmsgb25seSBpbiB0aGUgY2hvb3NlbiBoaWVyYXJjaHlcclxuICAgICAgICAqL1xyXG4gICAgICAgJCgnLm5ldHdvcmstaGllcmFyY2h5LWNoZWNrYm94Jykub24oJ2NoYW5nZScsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgLy8gZ2V0IHRoZSBpbmZvIGZvciB0aGUgY2xpY2tlZCBidXR0b25cclxuICAgICAgICAgICBsZXQgY2hlY2tib3ggPSAkKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAvLyByZXNldCBhbGwgdGhlIG90aGVyIGFjdGl2ZSBjaGVja2JveGVzXHJcbiAgICAgICAgICAgJCgnLm5ldHdvcmstaGllcmFyY2h5LWNoZWNrYm94JykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcclxuICAgICAgICAgICBjaGVja2JveC5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XHJcblxyXG4gICAgICAgICAgIGlmIChjaGVja2JveC5wcm9wKCdjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICAgLy8gc2V0IHRoZSBuZXR3b3JrIGlkXHJcbiAgICAgICAgICAgICAgIHNldE5ldHdvcmtIaWVyYXJjaHkoY2hlY2tib3guYXR0cignZGF0YScpKTtcclxuICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICBzZXROZXR3b3JrSGllcmFyY2h5KHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgfSk7XHJcblxyXG4gfVxyXG4gICBuX2xpc3RlbmVycygpIHtcclxuICAgICAvKipcclxuICAgICAgKiBOZXR3b3JrIGJ1dHRvbnMgY2xpY2tlZCAtIGdldCB0aGUgZGF0YVxyXG4gICAgICAqL1xyXG4gICAgICQoJyNuZXR3b3Jrcy1tb2RhbC1ib2R5IGJ1dHRvbicpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBjb25zb2xlLmxvZygnbmV0d29yayBjbGlja2VkJyk7XHJcbiAgICAgICAgIGxldCBuZXR3b3JrX2lkID0gJCh0aGlzKS5hdHRyKCdkYXRhJyk7XHJcblxyXG4gICAgICAgICAvLyBhZGQgdGhlIG5hbWUgb2YgdGhlIGNob29zZW4gbmV0d29yayB0byB0aGUgTmV0d29yayBtb2RhbFxyXG4gICAgICAgICAkKCcjYWN0aXZlLW5ldHdvcmstbmFtZScpLnRleHQoJCh0aGlzKS5hdHRyKCduYW1lJykpO1xyXG5cclxuICAgICAgICAgZGlzYWJsZVBsYXlCdXR0b24oKTtcclxuICAgICAgICAgZ2V0TmV0d29ya0RhdGEobmV0d29ya19pZCk7XHJcbiAgICAgICAgIC8vIHNldCB0aGUgY29sb3Igb2YgdGhlIG5ldHdvcmtcclxuICAgICAgICAgc2V0bmV0d29ya0NvbG9yKG5ldHdvcmtfaWQpO1xyXG4gICAgICAgICAkKCcjbmV0d29yay1kaXYnKS5tb2RhbCgndG9nZ2xlJyk7XHJcbiAgICAgfSk7XHJcblxyXG4gICAgIC8qKlxyXG4gICAgICAqIE5ldHdvcmsgYnV0dG9ucyBjbGlja2VkIC0gZ2V0IHRoZSBkYXRhXHJcbiAgICAgICovXHJcbiAgICAgJCgnI25ldHdvcmstcmVtb3ZlJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIHNldE5ldHdvcmtEYXRhKHt9KTtcclxuICAgICAgICAgc2V0TmV0d29ya0lEKC0xKTtcclxuICAgICAgICAgLy8gcmVtb3ZlIHRoZSBuZXR3b3JrIGNvbG9yXHJcbiAgICAgICAgIHNldG5ldHdvcmtDb2xvcigtMSk7XHJcbiAgICAgICAgICQoJyNhY3RpdmUtbmV0d29yay1uYW1lJykudGV4dCgnJyk7XHJcbiAgICAgfSk7XHJcblxyXG4gICAgIC8qKlxyXG4gICAgICAqIE5ldHdvcmsgYXV0byBidXR0b24gc2V0IGFjaXZlIG9yIHJlbW92ZVxyXG4gICAgICAqL1xyXG4gICAgICQoJyNuZXR3b3JrLWF1dG8tc3VnZ2VzdCcpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBpZiAoISQoJyNuZXR3b3JrLWF1dG8tc3VnZ2VzdCcpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgJCgnI25ldHdvcmstbGltaXQtcCcpLmhpZGUoKTtcclxuICAgICAgICAgICAgICQoJyNuZXR3b3JrLXNsaWRlcicpLmhpZGUoKTtcclxuXHJcbiAgICAgICAgICAgICBzZXROZXR3b3JrQXV0byh0cnVlKTtcclxuICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICQoJyNuZXR3b3JrLWxpbWl0LXAnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAkKCcjbmV0d29yay1zbGlkZXInKS5zaG93KCk7XHJcbiAgICAgICAgICAgICBzZXROZXR3b3JrQXV0byhmYWxzZSk7XHJcbiAgICAgICAgICAgICBsZXQgbGltaXQgPSAkKCcjbmV0d29yay1zbGlkZXInKS5zbGlkZXIoJ3ZhbHVlJyk7XHJcbiAgICAgICAgICAgICBzZXROZXR3b3JMaW1pdChsaW1pdCk7XHJcbiAgICAgICAgICAgICAkKCcjbmV0d29yay1saW1pdCcpLnZhbChsaW1pdCk7XHJcbiAgICAgICAgIH1cclxuICAgICB9KTtcclxuXHJcbiB9XHJcblxyXG5cclxuIH1cclxuXHJcblxyXG5leHBvcnQgY2xhc3MgU3BhdGlhbFZpZXcgZXh0ZW5kcyBEcmF3ZXJ7XHJcbiAgY29uc3RydWN0b3IoZGF0YSl7XHJcbiAgICBzdXBlcihkYXRhKTtcclxuXHJcblxyXG4gICAgdGhpcy5zcGF0aWFsVmlld0luaXQoKTtcclxuICAgIC8vdGhpcy5jcF9saXN0ZW5lcigpO1xyXG4gIH1cclxuICBzcGF0aWFsVmlld0luaXQoKXtcclxuXHJcblxyXG5cclxuICAgICAgbGV0IG1pblBvaW50ID0gcGFyYW1ldGVyc1snbWluJ11bJ2dlb21ldHJ5J11bJ2Nvb3JkaW5hdGVzJ107XHJcbiAgICAgIGxldCBtYXhQb2ludCA9IHBhcmFtZXRlcnNbJ21heCddWydnZW9tZXRyeSddWydjb29yZGluYXRlcyddO1xyXG4gICAgICAvLyBsZXQgY29vcmRpbmF0ZU9yaWdpbiA9IHBhcmFtZXRlcnNbJ2Nvb3JkaW5hdGVfb3JpZ2luJ11bJ2dlb21ldHJ5J11bJ2Nvb3JkaW5hdGVzJ107XHJcbiAgICAgIC8vIHdpZHRoID0gd2lkdGggKjEuMDIgLS0+IHNvIHRoZXJlIGlzIGEgbWFyZ2luIGluIHRoZSBzcGF0aWFsIHZpZXcgd2hlcmUgbm8gYW5pbWFsIGlzIGV2ZXJcclxuICAgICAgdGhpcy50YW5rV2lkdGggPSAobWF4UG9pbnRbMF0gLSBtaW5Qb2ludFswXSkgKiAxLjAyO1xyXG4gICAgICB0aGlzLnRhbmtIZWlnaHQgPSAobWF4UG9pbnRbMV0gLSBtaW5Qb2ludFsxXSkgKiAxLjAyO1xyXG4gICAgICAvL1ggYW5kIFkgYXhpc1xyXG4gICAgICBsZXQgeCA9IGQzLnNjYWxlTGluZWFyKClcclxuICAgICAgICAgIC5kb21haW4oW21pblBvaW50WzBdLCBtYXhQb2ludFswXV0pXHJcbiAgICAgICAgICAucmFuZ2UoW21pblBvaW50WzBdLCBtYXhQb2ludFswXV0pO1xyXG5cclxuICAgICAgbGV0IHhBeGlzID0gZDMuYXhpc0JvdHRvbSh4KVxyXG4gICAgICAgICAgLnRpY2tzKDEwKVxyXG4gICAgICAgICAgLnRpY2tTaXplKDEwKVxyXG4gICAgICAgICAgLnRpY2tQYWRkaW5nKDUpO1xyXG5cclxuICAgICAgbGV0IHkgPSBkMy5zY2FsZUxpbmVhcigpXHJcbiAgICAgICAgICAuZG9tYWluKFttaW5Qb2ludFsxXSwgbWF4UG9pbnRbMV1dKVxyXG4gICAgICAgICAgLnJhbmdlKFttaW5Qb2ludFsxXSwgbWF4UG9pbnRbMV1dKTtcclxuXHJcbiAgICAgIGxldCB5QXhpcyA9IGQzLmF4aXNSaWdodCh5KVxyXG4gICAgICAgICAgLnRpY2tzKDcpXHJcbiAgICAgICAgICAudGlja1NpemUoMTApXHJcbiAgICAgICAgICAudGlja1BhZGRpbmcoNSk7XHJcblxyXG4gICAgICAvLyBaT09NSU5HIEFORCBQQU5OSU5HIFNUVUZGXHJcblxyXG4gICAgICBsZXQgem9vbSA9IGQzLnpvb20oKVxyXG4gICAgICAgICAgLnNjYWxlRXh0ZW50KFsxLCA2XSlcclxuICAgICAgICAgIC5vbignem9vbScsICgpID0+IHtcclxuICAgICAgICAgICAgICAvL2NvbnN0cmFpbmVkIHpvb21pbmdcclxuICAgICAgICAgICAgICAvLyBtb2RpZnkgdGhlIHRyYW5zbGF0ZSBzbyB0aGF0IGl0IG5ldmVyIGV4aXRzIHRoZSB0YW5rXHJcbiAgICAgICAgICAgICAgZDMuZXZlbnQudHJhbnNmb3JtLnggPSBNYXRoLm1pbigwLCB0aGlzLnRhbmtXaWR0aCAqIChkMy5ldmVudC50cmFuc2Zvcm0uayAtIDEpLFxyXG4gICAgICAgICAgICAgICAgICBNYXRoLm1heCh0aGlzLnRhbmtXaWR0aCAqICgxIC0gZDMuZXZlbnQudHJhbnNmb3JtLmspLCBkMy5ldmVudC50cmFuc2Zvcm0ueCkpO1xyXG5cclxuICAgICAgICAgICAgICBkMy5ldmVudC50cmFuc2Zvcm0ueSA9IE1hdGgubWluKDAsIHRoaXMudGFua0hlaWdodCAqIChkMy5ldmVudC50cmFuc2Zvcm0uayAtIDEpLFxyXG4gICAgICAgICAgICAgICAgICBNYXRoLm1heCh0aGlzLnRhbmtIZWlnaHQgKiAoMSAtIGQzLmV2ZW50LnRyYW5zZm9ybS5rKSwgZDMuZXZlbnQudHJhbnNmb3JtLnkpKTtcclxuXHJcbiAgICAgICAgICAgICAgLy8gdHJhbnNsYXRlIGFuZCBzY2FsZVxyXG4gICAgICAgICAgICAgIHRoaXMuem9vbUdyb3VwLmF0dHIoJ3RyYW5zZm9ybScsIGQzLmV2ZW50LnRyYW5zZm9ybSk7XHJcblxyXG4gICAgICAgICAgICAgIC8vIHJlc2NhbGUgdGhlIGF4aXNcclxuICAgICAgICAgICAgICBnWGF4aXMuY2FsbCh4QXhpcy5zY2FsZShkMy5ldmVudC50cmFuc2Zvcm0ucmVzY2FsZVgoeCkpKTtcclxuICAgICAgICAgICAgICBnWWF4aXMuY2FsbCh5QXhpcy5zY2FsZShkMy5ldmVudC50cmFuc2Zvcm0ucmVzY2FsZVkoeSkpKTtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgLy90aGUgc3ZnIGNvbnRhaW5lclxyXG4gICAgICB0aGlzLnN2Z0NvbnRhaW5lciA9IGQzLnNlbGVjdCgnI21haW4tdmlzJylcclxuICAgICAgICAgICAgLmNsYXNzZWQoJ3N2Zy1jb250YWluZXInLCB0cnVlKVxyXG4gICAgICAgICAgICAvLyB0byBtYWtlIGl0IHJlc3BvbnNpdmUgd2l0aCBjc3NcclxuICAgICAgICAgICAgLmFwcGVuZCgnc3ZnJylcclxuICAgICAgICAgICAgLmF0dHIoJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLCAneE1pbllNaW4gbWVldCcpXHJcbiAgICAgICAgICAgIC5hdHRyKCd2aWV3Qm94JywgJzAgMCAnICsgdGhpcy50YW5rV2lkdGggKyAnICcgKyB0aGlzLnRhbmtIZWlnaHQpXHJcbiAgICAgICAgICAgIC8vIGFkZCB0aGUgY2xhc3Mgc3ZnLWNvbnRlbnRcclxuICAgICAgICAgICAgLmNsYXNzZWQoJ3N2Zy1jb250ZW50JywgdHJ1ZSlcclxuICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ21haW4tdmlzLXN2ZycpXHJcbiAgICAgICAgICAgIC5jYWxsKHpvb20pO1xyXG5cclxuICAgICAgLyogZGVwZW5kcyBvbiBzdmcgcmF0aW8sIGZvciBlLmcgMTI0MC8xOTAwID0gMC42NSBzbyBwYWRkaW5nLWJvdHRvbSA9IDY1JSAqL1xyXG4gICAgICBsZXQgcGVyY2VudGFnZSA9IE1hdGguY2VpbCgodGhpcy50YW5rSGVpZ2h0IC8gdGhpcy50YW5rV2lkdGgpICogMTAwKTtcclxuICAgICAgJCgnI21haW4tdmlzJykuYXBwZW5kKCQoJzxzdHlsZT4jbWFpbi12aXM6OmFmdGVyIHtwYWRkaW5nLXRvcDogJyArIHBlcmNlbnRhZ2UgKyAnJTtkaXNwbGF5OiBibG9jaztjb250ZW50OiBcIlwiO308L3N0eWxlPiAnKSk7XHJcblxyXG4gICAgICB0aGlzLnpvb21Hcm91cCA9IHRoaXMuc3ZnQ29udGFpbmVyLmFwcGVuZCgnc3ZnOmcnKTtcclxuXHJcbiAgICAgIC8vIFZpc3VhbGl6ZSB0aGUgYmFja2dyb3VuZCBpbWFnZSBpZiBpdCBpcyB1cGxvYWRlZFxyXG4gICAgICBpZiAocGFyYW1ldGVycy5iYWNrZ3JvdW5kX2ltYWdlKSB7XHJcbiAgICAgICAgICB0aGlzLnpvb21Hcm91cFxyXG4gICAgICAgICAgICAgIC5hcHBlbmQoJ2ltYWdlJylcclxuICAgICAgICAgICAgICAuYXR0cigneGxpbms6aHJlZicsICcvJyArIHBhcmFtZXRlcnMuYmFja2dyb3VuZF9pbWFnZSlcclxuICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnYmFja2dyb3VuZC1pbWFnZScpXHJcbiAgICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIHRoaXMudGFua0hlaWdodClcclxuICAgICAgICAgICAgICAuYXR0cignd2lkdGgnLCB0aGlzLnRhbmtXaWR0aClcclxuICAgICAgICAgICAgICAuYXR0cigneCcsICcwJylcclxuICAgICAgICAgICAgICAuYXR0cigneScsICcwJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vYXBwZW5kIHRoZSB0YW5rIGdyb3VwIHdpdGggYSB0cmFuc2Zvcm1hdGlvbiB3aGljaCByb3RhdGVzIHRoZSB5IGF4aXNcclxuICAgICAgdGhpcy50YW5rID0gdGhpcy56b29tR3JvdXAuYXBwZW5kKCdzdmc6ZycpXHJcbiAgICAgICAgICAuYXR0cignY2xhc3MnLCAndGFuaycpXHJcbiAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgKCk9PntcclxuICAgICAgICAgICAgICBsZXQgeCA9IHBhcmFtZXRlcnMuaW52ZXJ0ZWRfeCA/IC0xIDogMTtcclxuICAgICAgICAgICAgICBsZXQgeSA9IHBhcmFtZXRlcnMuaW52ZXJ0ZWRfeSA/IC0xIDogMTtcclxuICAgICAgICAgICAgICByZXR1cm4gJ3NjYWxlKCcgKyB4ICsgJywnICsgeSArICcpJztcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgLy9hZGQgdGhlIGNlbnRyb2lkXHJcbiAgICAgIHRoaXMudGFuay5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgLmF0dHIoJ2lkJywgJ2ctY2VudHJvaWQnKVxyXG4gICAgICAgICAgLmFwcGVuZCgnY2lyY2xlJylcclxuICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdjZW50cm9pZCcpXHJcbiAgICAgICAgICAuYXR0cigncicsIDYpXHJcbiAgICAgICAgICAuYXR0cignY3gnLCAwKVxyXG4gICAgICAgICAgLmF0dHIoJ2N5JywgMCk7XHJcblxyXG4gICAgICAvLyBhcnJvdyBmb3IgdGhlIGNlbnRyb2lkIGRpcmVjdGlvblxyXG4gICAgICB0aGlzLnRhbmsuc2VsZWN0KCcjZy1jZW50cm9pZCcpXHJcbiAgICAgICAgICAuYXBwZW5kKCdzdmc6ZGVmcycpXHJcbiAgICAgICAgICAuYXBwZW5kKCdzdmc6bWFya2VyJylcclxuICAgICAgICAgIC5hdHRyKCdpZCcsICdjZW50cm9pZC1hcnJvdycpXHJcbiAgICAgICAgICAuYXR0cigncmVmWCcsIDIpXHJcbiAgICAgICAgICAuYXR0cigncmVmWScsIDYpXHJcbiAgICAgICAgICAuYXR0cignbWFya2VyV2lkdGgnLCAxMylcclxuICAgICAgICAgIC5hdHRyKCdtYXJrZXJIZWlnaHQnLCAxMylcclxuICAgICAgICAgIC5hdHRyKCdvcmllbnQnLCAnYXV0bycpXHJcbiAgICAgICAgICAuYXBwZW5kKCdzdmc6cGF0aCcpXHJcbiAgICAgICAgICAuYXR0cignZCcsICdNMiwyIEwyLDExIEwxMCw2IEwyLDInKTtcclxuXHJcbiAgICAgIC8vIEFwcGVuZCB0aGUgbGluZSBmb3IgdGhlIGRpcmVjdGlvbiBhcnJvd1xyXG4gICAgICB0aGlzLnRhbmsuc2VsZWN0KCcjZy1jZW50cm9pZCcpXHJcbiAgICAgICAgICAuYXBwZW5kKCdsaW5lJylcclxuICAgICAgICAgIC5hdHRyKCdpZCcsICdjZW50cm9pZC1saW5lJylcclxuICAgICAgICAgIC5hdHRyKCdtYXJrZXItZW5kJywgJ3VybCgjY2VudHJvaWQtYXJyb3cpJyk7XHJcblxyXG4gICAgICAvL2FwcGVuZCBuZXR3b3JrICBncm91cFxyXG4gICAgICB0aGlzLnRhbmsuYXBwZW5kKCdnJylcclxuICAgICAgICAgIC5hdHRyKCdpZCcsICduZXR3b3JrLWdyb3VwJyk7XHJcblxyXG4gICAgICAvL2FwcGVuZCBkZWxhdW5heS10cmlhbmd1bGF0aW9uIGdyb3VwXHJcbiAgICAgIHRoaXMudGFuay5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgLmF0dHIoJ2lkJywgJ2RlbGF1bmF5LXRyaWFuZ3VsYXRpb24tZ3JvdXAnKTtcclxuXHJcbiAgICAgIC8vYXBwZW5kIHZvcm9ub2kgZ3JvdXBcclxuICAgICAgdGhpcy50YW5rLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAuYXR0cignaWQnLCAndm9ybm9pLWdyb3VwJyk7XHJcblxyXG4gICAgICAvL2FwcGVuZCB0aGUgZnJhbWUgdGltZSB0ZXh0XHJcbiAgICAgIHRoaXMuc3ZnQ29udGFpbmVyLmFwcGVuZCgndGV4dCcpXHJcbiAgICAgICAgICAuYXR0cignY2xhc3MnLCAnZnJhbWUtdGV4dCcpXHJcbiAgICAgICAgICAuYXR0cigneCcsIDMwKVxyXG4gICAgICAgICAgLmF0dHIoJ3knLCAzMClcclxuICAgICAgICAgIC50ZXh0KCctLSA6IC0tIDogLS0gJyk7XHJcblxyXG4gICAgICAvLyBhZGQgdGhlIGF4aXNcclxuICAgICAgbGV0IGdYYXhpcyA9IHRoaXMuc3ZnQ29udGFpbmVyLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAuYXR0cignY2xhc3MnLCAneCBheGlzJylcclxuICAgICAgICAgIC5jYWxsKHhBeGlzKTtcclxuXHJcbiAgICAgIGxldCBnWWF4aXMgPSB0aGlzLnN2Z0NvbnRhaW5lci5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3kgYXhpcycpXHJcbiAgICAgICAgICAuY2FsbCh5QXhpcyk7XHJcblxyXG4gICAgICAvLyBpbml0IHN0dWZmIGZyb20gb3RoZXIgbW9kdWxlc1xyXG4gICAgICBpbml0VG9vbHRpcCgpO1xyXG4gICAgICBpbml0U2xpZGVycygpO1xyXG5cclxuICAgICAgdGhpcy5pbml0Q29sb3JQaWNrZXIoKTtcclxuICAgICAgdmFyIGxpbmVjaGFydCA9IG5ldyBMaW5lQ2hhcnQoc3dhcm1EYXRhKTtcclxuICAgICAgdGhpcy5jcF9saXN0ZW5lcigpO1xyXG4gICAgICB0aGlzLnNmX2xpc3RlbmVycygpO1xyXG4gICAgICB0aGlzLmFmX2xpc3RlbmVycygpO1xyXG4gICAgICB0aGlzLm1kX2xpc3RlbmVycygpO1xyXG4gICAgICB0aGlzLm5fbGlzdGVuZXJzKCk7XHJcbiAgICAgIHRoaXMuaF9saXN0ZW5lcnMoKTtcclxuICAgICAgLy92YXIgZGVuZHJvZ3JhbSA9IG5ldyBEZW5kcm9ncmFtKHN3YXJtRGF0YSk7XHJcbiAgICAgIHRoaXMuaW5pdERlbmRyb2dyYW0oKTtcclxuICAgICAgLy9jb25zb2xlLmxvZyhkZW5kcm9ncmFtKTtcclxuICAgICAgbWFrZVJlc2l6YWJsZSh0aGlzLnRhbmtIZWlnaHQsIHRoaXMudGFua1dpZHRoKTtcclxuICAgICAgZGVmYXVsdENvbmZpZygpO1xyXG4gICAgICAvLyBzdGFydCB0aGUgYW5pbWF0aW9uXHJcbiAgICAgIHRoaXMuZHJhdygpO1xyXG4gIH07XHJcbiAgc2V0TWVkb2lkQW5pbWFsKHZhbHVlKSB7XHJcbiAgICAgIHRoaXMubWVkb2lkQW5pbWFsID0gdmFsdWU7XHJcbiAgfVxyXG4gIGluaXREZW5kcm9ncmFtKCkge1xyXG4gICAgY29uc29sZS5sb2coJ0lOSVRFRCcpO1xyXG4gICAgICAvLyBjb25zdGFuY3QgZmFjdG9ycyBmb3IgdGhlIGRlbmRncm9ncmFtXHJcbiAgICAgIGxldCBtYXJnaW4gPSAyMCxcclxuICAgICAgICAgIHdpZHRoID0gNTAwMCxcclxuICAgICAgICAgIGhlaWdodCA9IDUwMDA7XHJcblxyXG4gICAgICAvLyB6b29tIGZ1bmN0aW9uIGZvciB0aGUgZGVuZHJvZ3JhbVxyXG4gICAgICBsZXQgem9vbSA9IGQzLnpvb20oKVxyXG4gICAgICAgICAgLnNjYWxlRXh0ZW50KFsxLCAxMF0pXHJcbiAgICAgICAgICAub24oJ3pvb20nLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAvL2NvbnN0cmFpbmVkIHpvb21pbmdcclxuICAgICAgICAgICAgICBkMy5ldmVudC50cmFuc2Zvcm0ueCA9IE1hdGgubWluKDAsIHdpZHRoICogKGQzLmV2ZW50LnRyYW5zZm9ybS5rIC0gMSksXHJcbiAgICAgICAgICAgICAgICAgIE1hdGgubWF4KHdpZHRoICogKDEgLSBkMy5ldmVudC50cmFuc2Zvcm0uayksIGQzLmV2ZW50LnRyYW5zZm9ybS54KSk7XHJcblxyXG4gICAgICAgICAgICAgIGQzLmV2ZW50LnRyYW5zZm9ybS55ID0gTWF0aC5taW4oMCwgaGVpZ2h0ICogKGQzLmV2ZW50LnRyYW5zZm9ybS5rIC0gMSksXHJcbiAgICAgICAgICAgICAgICAgIE1hdGgubWF4KGhlaWdodCAqICgxIC0gZDMuZXZlbnQudHJhbnNmb3JtLmspLCBkMy5ldmVudC50cmFuc2Zvcm0ueSkpO1xyXG5cclxuICAgICAgICAgICAgICAvLyB0cmFuc2xhdGUgYW5kIHNjYWxlXHJcbiAgICAgICAgICAgICAgdGhpcy56b29tR3JvdXAuYXR0cigndHJhbnNmb3JtJywgZDMuZXZlbnQudHJhbnNmb3JtKTtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gc3ZnIGNvbnRhaW5lciBmb3IgdGhlIGRlbmRyb2dyYW1cclxuICAgICAgbGV0IHN2ZyA9IGQzLnNlbGVjdCgnI2RlbmRyb2dyYW0tcGFuZWwnKVxyXG4gICAgICAgICAgLmNsYXNzZWQoJ3N2Zy1kZW5kcm9ncmFtLWNvbnRhaW5lcicsIHRydWUpXHJcbiAgICAgICAgICAuYXBwZW5kKCdzdmcnKVxyXG4gICAgICAgICAgLmF0dHIoJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLCAneE1pbllNaW4gbWVldCcpXHJcbiAgICAgICAgICAuYXR0cigndmlld0JveCcsICcwIDAgJyArIHdpZHRoICsgJyAnICsgaGVpZ2h0KVxyXG4gICAgICAgICAgLy8gYWRkIHRoZSBjbGFzcyBzdmctY29udGVudFxyXG4gICAgICAgICAgLmNsYXNzZWQoJ3N2Zy1jb250ZW50LWRlbmRyb2dyYW0nLCB0cnVlKVxyXG4gICAgICAgICAgLmNhbGwoem9vbSk7XHJcblxyXG4gICAgICBpbml0RGVuZHJvZ3JhbUxlZ2VuZCgpO1xyXG5cclxuICAgICAgLy8gYXBwZW5kIHRoZSB6b29tIGdyb3VwIHRvIHRoZSBzdmdcclxuICAgICAgdGhpcy56b29tR3JvdXAgPSBzdmcuYXBwZW5kKCdnJylcclxuICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyBtYXJnaW4gKyAnLCcgKyBtYXJnaW4gKyAnKScpXHJcbiAgICAgICAgICAuYXBwZW5kKCdzdmc6ZycpO1xyXG5cclxuICAgICAgLy8gZDMgdHJlZVxyXG4gICAgICBsZXQgdHJlZW1hcCA9IGQzLnRyZWUoKSAvL2QzLmNsdXN0ZXIoKVxyXG4gICAgICAgICAgLnNpemUoWyhoZWlnaHQgLSAxMCAqIG1hcmdpbiksICh3aWR0aCAtIDEwICogbWFyZ2luKV0pO1xyXG5cclxuICAgICAgLy8gc2V0IHRoZSBzcGF0aWFsIHZpZXcgLSBuZWVkZWQgdG8gYWRkIHRoZSBjbHVzdGVyaW5nIHRvIHRoZSBzcGF0aWFsIHZpZXcgd2luZG93XHJcbiAgICAgIHRoaXMuc3BhdGlhbFZpZXcgPSBkMy5zZWxlY3QoJy50YW5rJyk7XHJcblxyXG4gICAgICAvLyBpbml0IGRlbmRyb2dyYW0gc2xpZGVyXHJcbiAgICAgIC8vIGluaXRpYWxpemUgdGhlIE5ldHdvcmsgc2xpZGVyXHJcbiAgICAgICQoJyNkZW5kcm9ncmFtLXBhbmVsLWxldmVsLXNsaWRlcicpXHJcbiAgICAgICAgICAuc2xpZGVyKHtcclxuICAgICAgICAgICAgICByYW5nZTogJ21heCcsXHJcbiAgICAgICAgICAgICAgbWluOiAyLFxyXG4gICAgICAgICAgICAgIG1heDogMixcclxuICAgICAgICAgICAgICBzdGVwOiAxLFxyXG4gICAgICAgICAgICAgIHZhbHVlOiB0aGlzLmhpZXJhcmNoeUxldmVsc1snaDAnXSxcclxuICAgICAgICAgICAgICBzbGlkZTogZnVuY3Rpb24oZXZlbnQsIHVpKSB7XHJcbiAgICAgICAgICAgICAgICAgIGxldCBpZCA9ICQoJy5zaG93LWRlbmRyb2dyYW0uYnRuLXByaW1hcnknKS5hdHRyKCdkYXRhJyk7XHJcbiAgICAgICAgICAgICAgICAgIHNldEhpZXJhcmNoeUxldmVsKGlkLCB1aS52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgIHVwZGF0ZURlbmRyb2dyYW0oKTtcclxuICAgICAgICAgICAgICAgICAgLy8gaWYgbm8gYW5pbWF0aW9uIGlzIGFjdGl2ZSBkcmF3IHRoZSBuZXcgY2x1c3RlcmluZyBhbmQgZGVuZHJvZ3JhbVxyXG4gICAgICAgICAgICAgICAgICAvLyBkcmF3RGVuZHJvZ3JhbSgpO1xyXG4gICAgICAgICAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgLy9nbyBiYWNrIG9uZSBzZWNvbmQgYW5kIGRyYXcgdGhlIG5leHQgZnJhbWVcclxuICAgICAgICAgICAgICAgICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgIC8vdGhpcy5kcmF3RGVuZHJvZ3JhbSgpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIGxldCB0b29sdGlwRGl2O1xyXG4gICAgICAvLyBpbml0IHRoZSB0b29sdGlwIGZvciB0aGUgZGVuZHJvZ3JhbVxyXG4gICAgICB0b29sdGlwRGl2ID0gZDMuc2VsZWN0KCcjZGVuZHJvZ3JhbS10b29sdGlwJylcclxuICAgICAgICAgIC5zdHlsZSgnbGVmdCcsIDAgKyAncHgnKVxyXG4gICAgICAgICAgLnN0eWxlKCd0b3AnLCAwICsgJ3B4JylcclxuICAgICAgICAgIC5vbignbW91c2VvdmVyJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgdG9vbHRpcERpdlxyXG4gICAgICAgICAgICAgICAgICAuc3R5bGUoJ29wYWNpdHknLCAxKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAvLyBpbml0IHRoZSBoaWVyYXJjaHkgbGVnZW5kXHJcbiAgICAgIGxldCBsZWdlbmRXaWR0aCA9IG1heE51bWJlckhpZXJhcmNoaWVzICogMTAwO1xyXG4gICAgICBsZXQgbGVnZW5kSGVpZ2h0ID0gNjA7XHJcblxyXG4gICAgICB0aGlzLnN2Z0xlZ2VuZCA9IGQzLnNlbGVjdCgnI2hpZXJhcmNoeS1sZWdlbmQtZGl2JylcclxuICAgICAgICAgIC5hcHBlbmQoJ3N2ZycpXHJcbiAgICAgICAgICAuYXR0cignaWQnLCAnaGllcmFyY2h5LWxlZ2VuZCcpXHJcbiAgICAgICAgICAuYXR0cignd2lkdGgnLCBsZWdlbmRXaWR0aClcclxuICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCBsZWdlbmRIZWlnaHQpO1xyXG5cclxuICAgICAgLy8gYWRkIHBhdHRlcm4gZm9yIHN0cmlwZWQgYmFja2dyb3VuZCBvZiBpbnRlcnNlY3Rpb25zIGV0Yy5cclxuICAgICAgdGhpcy5zcGF0aWFsVmlldy5hcHBlbmQoJ2RlZnMnKVxyXG4gICAgICAgICAgLmFwcGVuZCgnc3ZnOnBhdHRlcm4nKVxyXG4gICAgICAgICAgLmF0dHIoJ2lkJywgJ3N0cmlwZWQnKVxyXG4gICAgICAgICAgLmF0dHIoJ3BhdHRlcm5Vbml0cycsICd1c2VyU3BhY2VPblVzZScpXHJcbiAgICAgICAgICAuYXR0cignd2lkdGgnLCAnMjAnKVxyXG4gICAgICAgICAgLmF0dHIoJ2hlaWdodCcsICc1JylcclxuICAgICAgICAgIC5hdHRyKCdwYXR0ZXJuVHJhbnNmb3JtJywgJ3JvdGF0ZSg2MCknKVxyXG4gICAgICAgICAgLmFwcGVuZCgncmVjdCcpXHJcbiAgICAgICAgICAuYXR0cignd2lkdGgnLCA1KVxyXG4gICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIDEwKVxyXG4gICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoMCwwKScpXHJcbiAgICAgICAgICAuc3R5bGUoJ2ZpbGwnLCAnIzY3MDAwZCcpO1xyXG5cclxuICB9O1xyXG5cclxufVxyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBMaXN0ZW5lciBleHRlbmRzIERyYXdlciB7XHJcbiAgY29uc3RydWN0b3IoKXtcclxuICAgIHN1cGVyKCk7XHJcbiAgICB0aGlzLmNwX2xpc3RlbmVyKCk7XHJcbiAgICB0aGlzLnNmX2xpc3RlbmVycygpO1xyXG4gICAgdGhpcy5hZl9saXN0ZW5lcnMoKTtcclxuICAgIHRoaXMubWRfbGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLm5fbGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLmhfbGlzdGVuZXJzKCk7XHJcbiAgICAvL3RoaXMuaF9saXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG5cclxuICBjcF9saXN0ZW5lcigpIHtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBQbGF5IG9yIHN0b3AgdGhlIGFuaW1hdGlvblxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI3BsYXktYnV0dG9uJykuY2xpY2soKCk9PntcclxuICAgICAgICAgIGlmICgkKCcjcGxheS1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICB0aGlzLnBsYXlCb29sZWFuID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAkKCcubWRpLXBhdXNlJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICQoJy5tZGktcGxheScpLnNob3coKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5wbGF5Qm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICQoJy5tZGktcGxheScpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAkKCcubWRpLXBhdXNlJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgIHRoaXMuc2V0SW5kZXhUaW1lKHNsaWRlci5zbGlkZXIoJ3ZhbHVlJykpO1xyXG4gICAgICAgICAgICAgICQoJy5icnVzaCcpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBQYXVzZSB0aGUgYW5pbWF0aW9uIGFuZCBzaG93IG9ubHkgdGhlIG5leHQgZnJhbWVcclxuICAgICAgICovXHJcbiAgICAgICQoJyNuZXh0LWZyYW1lLWJ1dHRvbicpLmNsaWNrKCgpPT57XHJcbiAgICAgICAgICBpZiAoJCgnI3BsYXktYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5wbGF5Qm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgJCgnI3BsYXktYnV0dG9uJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEJydXNoaW5nIGJ1dHRvblxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2JydXNoaW5nLWJ1dHRvbicpLmNsaWNrKCgpPT57XHJcbiAgICAgICAgICAvL3N0b3AgdGhlIGFuaW1hdGlvblxyXG4gICAgICAgICAgdGhpcy5wbGF5Qm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgICAgICAgJCgnI3BsYXktYnV0dG9uJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgaWYgKCEkKCcjYnJ1c2hpbmctYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgLy9kZWZpbmUgdGhlIGJydXNoXHJcbiAgICAgICAgICAgICAgdGhpcy5icnVzaCA9IGQzLmJydXNoKClcclxuICAgICAgICAgICAgICAgICAgLmV4dGVudChbXHJcbiAgICAgICAgICAgICAgICAgICAgICBbMCwgMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICBbdGhpcy50YW5rV2lkdGgsIHRoaXMudGFua0hlaWdodF1cclxuICAgICAgICAgICAgICAgICAgXSlcclxuICAgICAgICAgICAgICAgICAgLm9uKCdlbmQnLCB0aGlzLmJydXNoZW5kKTtcclxuICAgICAgICAgICAgICAvL2FkZCB0aGUgYnJ1c2hcclxuICAgICAgICAgICAgICBkMy5zZWxlY3QoJyNtYWluLXZpcy1zdmcnKVxyXG4gICAgICAgICAgICAgICAgICAuYXBwZW5kKCdnJylcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2JydXNoJylcclxuICAgICAgICAgICAgICAgICAgLmNhbGwodGhpcy5icnVzaCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIC8vIHJlbW92ZSB0aGUgYnJ1c2hcclxuICAgICAgICAgICAgICAkKCcuYnJ1c2gnKS5yZW1vdmUoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogVW5zZWxlY3QgYWxsIGJ1dHRvblxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI3JlbW92ZS1hY3RpdmUtc2VsZWN0ZWQtYnV0dG9uJykuY2xpY2soKCk9PntcclxuICAgICAgICAgIGlmICghJCgnI3JlbW92ZS1hY3RpdmUtc2VsZWN0ZWQtYnV0dG9uJykuaXMoJzpkaXNhYmxlZCcpKSB7XHJcbiAgICAgICAgICAgICAgJCgnI3JlbW92ZS1hY3RpdmUtc2VsZWN0ZWQtYnV0dG9uJykucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICAgICAgICAgICB0aGlzLnNldEFjdGl2ZUFuaW1hbHMoW10pO1xyXG4gICAgICAgICAgICAgIC8vIHRyYWNraW5nIG9mIGRhdGEgZm9yIHZpc3VhbCBwYXJhbWV0ZXIgc3VnZ2VzdGlvblxyXG4gICAgICAgICAgICAgIHJlc2V0VHJhY2tlZERhdGEoKTtcclxuICAgICAgICAgICAgICAkKCcjdmlzdWFsLXBhcmFtZXRlci1idXR0b24nKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuXHJcbiAgICAgICAgICAgICAgaWYgKCEkKCcjcGxheS1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAgICAgLy9nbyBiYWNrIG9uZSBzZWNvbmQgYW5kIGRyYXcgdGhlIG5leHQgZnJhbWVcclxuICAgICAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG5cclxuICAgICAgICAgICAgICAgICAgdGhpcy5kZWNJbmRleFRpbWUoKTtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBUcmFjayB2aXN1YWwgcGFyYW1ldGVyIGJ1dHRvblxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI3Zpc3VhbC1wYXJhbWV0ZXItYnV0dG9uJykuY2xpY2soKCk9PntcclxuICAgICAgICAgIGlmICgkKCcjdmlzdWFsLXBhcmFtZXRlci1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICBzZXRUcmFja2luZ0Jvb2xlYW4oZmFsc2UpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBzZXRUcmFja2luZ0Jvb2xlYW4odHJ1ZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFNlbmQgdGhlIHRyYWNrZWQgdmlhIGEgYWpheCBxdWVyeSB0byB0aGUgc2VydmVyIHRvIGNhbGN1bGF0ZSB0aGUgcGFyYW1ldGVyc1xyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2NhbGN1bGF0ZS1wYXJhbWV0ZXItYnV0dG9uJykuY2xpY2soKCk9PntcclxuICAgICAgICAgIGlmICghJCgnI2NhbGN1bGF0ZS1wYXJhbWV0ZXItYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgc2V0VHJhY2tpbmdCb29sZWFuKGZhbHNlKTtcclxuICAgICAgICAgICAgICBzZW5kVHJhY2tlZERhdGEoKTtcclxuXHJcbiAgICAgICAgICAgICAgLy8gZGlzYWJsZSBib3RoIGJ1dHRvbnMgYW5kIHJlbW92ZSB0aGUgYWN0aXZlIG9uZVxyXG4gICAgICAgICAgICAgICQoJyNjYWxjdWxhdGUtcGFyYW1ldGVyLWJ1dHRvbicpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgJCgnI2NhbGN1bGF0ZS1wYXJhbWV0ZXItYnV0dG9uJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICQoJyN2aXN1YWwtcGFyYW1ldGVyLWJ1dHRvbicpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogU3BhdGlhbCB2aWV3IGJhY2tncm91bmQgY29sb3JcclxuICAgICAgICovXHJcbiAgICAgICQoJyNiYWNrZ3JvdW5kLWNvbG9yJykuY2hhbmdlKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgbGV0IGNvbG9yID0gJCgnaW5wdXRbdHlwZT1cInJhZGlvXCJdLmdyb3VwLWJhY2tncm91bmQ6Y2hlY2tlZCcpLnZhbCgpO1xyXG4gICAgICAgICAgJCgnI21haW4tdmlzLXN2ZycpLmNzcygnYmFja2dyb3VuZC1jb2xvcicsIGNvbG9yKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogU2hvdyB0aGUgc3BhdGlhbCB2aWV3IGF4aXMgYnV0dG9uXHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjZHJhdy1heGlzJykub24oJ2NoYW5nZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgaWYgKHRoaXMuY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICQoJyNtYWluLXZpcyBnLnguYXhpcycpLnNob3coKTtcclxuICAgICAgICAgICAgICAkKCcjbWFpbi12aXMgZy55LmF4aXMnKS5zaG93KCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICQoJyNtYWluLXZpcyBnLnguYXhpcycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAkKCcjbWFpbi12aXMgZy55LmF4aXMnKS5oaWRlKCk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBTaG93IHRoZSBmcmFtZSAodGltZSkgbnVtYmVyIGluIHRoZSBzcGF0aWFsIHZpZXcgYnV0dG9uXHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjZHJhdy10aW1lJykub24oJ2NoYW5nZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgaWYgKHRoaXMuY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICQoJyNtYWluLXZpcyAuZnJhbWUtdGV4dCcpLnNob3coKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgJCgnI21haW4tdmlzIC5mcmFtZS10ZXh0JykuaGlkZSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBEcmF3IHRoZSBuZXR3b3JrIGJhY2tncm91bmQgY29sb3JcclxuICAgICAgICovXHJcbiAgICAgICQoJyNuZXR3b3JrLWJhY2tncm91bmQnKS5vbignY2hhbmdlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZiAodGhpcy5jaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgc2V0TmV0d29ya0JhY2tncm91bmQodHJ1ZSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHNldE5ldHdvcmtCYWNrZ3JvdW5kKGZhbHNlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogU2V0IHRoZSBuZXR3b3JrIGJhY2tncm91bmQgZWRnZSBsaW1pdFxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI25ldHdvcmstYmFja2dyb3VuZC1saW1pdCcpLnZhbCgxKTtcclxuICAgICAgJCgnI25ldHdvcmstYmFja2dyb3VuZC1saW1pdCcpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGxldCB2YWwgPSAkKHRoaXMpLnZhbCgpO1xyXG4gICAgICAgICAgaWYgKCQuaXNOdW1lcmljKHZhbCkgJiYgdmFsID4gMCkge1xyXG4gICAgICAgICAgICAgIHNldE5ldHdvcmtCYWNrZ3JvdW5kTGltaXQodmFsKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgJCh0aGlzKS52YWwoMSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIENvbG9yIFNjYWxlIEZ1bmN0aW9uIFJhZGlvIGJ1dHRvbnNcclxuICAgICAgICovXHJcbiAgICAgICQoJyNjb2xvci1zY2FsZS1yYWRpby1mb3JtIGlucHV0Jykub24oJ2NoYW5nZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdGhpcy5jb2xvclNjYWxlWyd0eXBlJ10gPSAkKCdpbnB1dFtuYW1lPWNvbG9yLXNjYWxlLXJhZGlvXTpjaGVja2VkJywgJyNjb2xvci1zY2FsZS1yYWRpby1mb3JtJykudmFsKCk7XHJcbiAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgIC8vZ28gYmFjayBvbmUgc2Vjb25kIGFuZCBkcmF3IHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgIHRoaXMuZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBJbml0IHN3YXJtIGZlYXR1cmVzIGxpc3RlbmVyc1xyXG4gICAqL1xyXG4gIHNmX2xpc3RlbmVycygpIHtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBEcmF3IGRpcmVjdGlvbiBhcnJvdyBvZiB0aGUgYW5pbWFsXHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjZHJhdy1kaXJlY3Rpb24nKS5jbGljaygoKT0+e1xyXG4gICAgICAgICAgaWYgKCQoJyNkcmF3LWRpcmVjdGlvbicpLmlzKCc6Y2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICAgaWYgKCEoJ2RpcmVjdGlvbicgaW4gZGF0YXNldFswXSkpIHtcclxuICAgICAgICAgICAgICAgICAgZGlzYWJsZVBsYXlCdXR0b24oKTtcclxuICAgICAgICAgICAgICAgICAgLy8gYWpheCBxdWVyeSB0byBnZXQgZGlyZWN0aW9uIGRhdGFcclxuICAgICAgICAgICAgICAgICAgZ2V0RGF0YXNldEZlYXR1cmUoJ2RpcmVjdGlvbicpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAkKCcuYXJyb3cnKS5zaG93KCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICQoJy5hcnJvdycpLmhpZGUoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmICghJCgnI3BsYXktYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgLy9nbyBiYWNrIG9uZSBzZWNvbmQgYW5kIGRyYXcgdGhlIG5leHQgZnJhbWVcclxuICAgICAgICAgICAgICAvL3RoaXMgYXBwbHlzIHRoZSBjaGFuZ2VzXHJcbiAgICAgICAgICAgICAgdGhpcy5kZWNJbmRleFRpbWUoKTtcclxuICAgICAgICAgICAgICB0aGlzLmRyYXcoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogRHJhdyBtZWRvaWQgaW4gY29sb3IgYnV0dG9uXHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjZHJhdy1tZWRvaWQnKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmICgkKCcjZHJhdy1tZWRvaWQnKS5pcygnOmNoZWNrZWQnKSkge1xyXG5cclxuICAgICAgICAgICAgICBpZiAoISgnbWVkb2lkJyBpbiBzd2FybURhdGFbMF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgIGdldFN3YXJtRGF0YXNldEZlYXR1cmUoJ21lZG9pZCcpO1xyXG5cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgU1BWLnNldE1lZG9pZEFuaW1hbChzd2FybURhdGFbU1BWLmluZGV4VGltZV1bJ21lZG9pZCddKTtcclxuICAgICAgICAgICAgICAvLyBkaXNwbGF5IHRoZSBtZWRvaWRcclxuICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoJyNhbmltYWwtJyArIFNQVi5tZWRvaWRBbmltYWwpXHJcbiAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdtZWRvaWQnLCB0cnVlKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgLy8gZG8gbm90IGRpc3BsYXkgdGhlIG1lZG9pZCBmaXNoXHJcbiAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCcjYW5pbWFsLScgKyBTUFYubWVkb2lkQW5pbWFsKVxyXG4gICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnbWVkb2lkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgIFNQVi5zZXRNZWRvaWRBbmltYWwoLTEpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBEcmF3IGNlbnRyb2lkIGJ1dHRvblxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2RyYXctY2VudHJvaWQnKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmICgkKCcjZHJhdy1jZW50cm9pZCcpLmlzKCc6Y2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICAgaWYgKCEoJ2NlbnRyb2lkJyBpbiBzd2FybURhdGFbMF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgIGdldFN3YXJtRGF0YXNldEZlYXR1cmUoJ2NlbnRyb2lkJyk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIC8vIGRpc3BsYXkgdGhlIGNlbnRyb2lkXHJcbiAgICAgICAgICAgICAgJCgnI2ctY2VudHJvaWQnKS5zaG93KCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIC8vIGhpZGUgdGhlIGNlbnRyb2lkXHJcbiAgICAgICAgICAgICAgJCgnI2ctY2VudHJvaWQnKS5oaWRlKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBEcmF3IGNvbnZleCBodWxsIGluIGNvbG9yIGJ1dHRvblxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2RyYXctY29udmV4LWh1bGwnKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmICgkKCcjZHJhdy1jb252ZXgtaHVsbCcpLmlzKCc6Y2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICAgaWYgKCEoJ2h1bGwnIGluIHN3YXJtRGF0YVswXSkpIHtcclxuICAgICAgICAgICAgICAgICAgZ2V0U3dhcm1EYXRhc2V0RmVhdHVyZSgnY29udmV4X2h1bGwnKTtcclxuXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogRHJhdyB0cmlhbmd1bGF0aW9uXHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjZHJhdy10cmlhbmd1bGF0aW9uJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZiAoJCgnI2RyYXctdHJpYW5ndWxhdGlvbicpLmlzKCc6Y2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICAgaWYgKCEoJ3RyaWFuZ3VsYXRpb24nIGluIHN3YXJtRGF0YVswXSkpIHtcclxuICAgICAgICAgICAgICAgICAgZ2V0U3dhcm1EYXRhc2V0RmVhdHVyZSgndHJpYW5ndWxhdGlvbicpO1xyXG5cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgaWYgKCEkKCcjcGxheS1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAgICAgLy9nbyBiYWNrIG9uZSBzZWNvbmQgYW5kIGRyYXcgdGhlIG5leHQgZnJhbWVcclxuICAgICAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLmRlY0luZGV4VGltZSgpO1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLmRyYXcoKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBEcmF3IHZvcm9ub2lcclxuICAgICAgICovXHJcbiAgICAgICQoJyNkcmF3LXZvcm9ub2knKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmICgkKCcjZHJhdy12b3Jvbm9pJykuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICBpZiAoISgndm9yb25vaScgaW4gc3dhcm1EYXRhWzBdKSkge1xyXG4gICAgICAgICAgICAgICAgICBnZXRTd2FybURhdGFzZXRGZWF0dXJlKCd2b3Jvbm9pJyk7XHJcblxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgICAgICAvL3RoaXMgYXBwbHlzIHRoZSBjaGFuZ2VzXHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG5cclxuICB9XHJcbiAgLyoqXHJcbiAgICogSW5pdCBhYnNvbHV0ZSBmZWF0dXJlIGxpc3RlbmVyc1xyXG4gICAqL1xyXG4gIGFmX2xpc3RlbmVycygpIHtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBEcmF3IFNwZWVkIGJ1dHRvblxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2RyYXctc3BlZWQnKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICAgICAgICQoJy5kcmF3LWRldGFpbHMnKS5oaWRlKClcclxuICAgICAgICAgICAgICAuZmluZCgnaW5wdXQ6Y2hlY2tib3gnKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSkuY2xpY2soKTtcclxuICAgICAgICAgIGlmICgkKCcjZHJhdy1zcGVlZCcpLmlzKCc6Y2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICAgLy8gbG9hZCBhYnNvbHV0ZSBmZWF0dXJlIHNwZWVkIGRhdGEgb25jZVxyXG4gICAgICAgICAgICAgIGlmICghKCdzcGVlZCcgaW4gZGF0YXNldFswXSkpIHtcclxuICAgICAgICAgICAgICAgICAgZGlzYWJsZVBsYXlCdXR0b24oKTtcclxuICAgICAgICAgICAgICAgICAgLy8gYWpheCBxdWVyeSB0byBnZXQgdGhlIGFic29sdXRlIGZlYXR1cmUgc3BlZWRcclxuICAgICAgICAgICAgICAgICAgZ2V0RGF0YXNldEZlYXR1cmUoJ3NwZWVkJyk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIC8vICQoJy5kcmF3LWRldGFpbHMnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgJCgnI2RyYXctc3BlZWQtZGV0YWlscycpLnNob3coKTtcclxuICAgICAgICAgICAgICAkKCcjZHJhdy1hY2NlbGVyYXRpb24nKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICQoJyNkcmF3LWRpc3RhbmNlX2NlbnRyb2lkJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAkKCcjZHJhdy1taWRsaW5lX29mZnNldCcpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgU1BWLnNldEFjdGl2ZVNjYWxlKCdzcGVlZCcpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAkKCcjZHJhdy1zcGVlZC1kZXRhaWxzJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgIFNQVi5zZXRBY3RpdmVTY2FsZSgnYmxhY2snKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC8vY2hhbmdlIGNvbG9yIGxlZ2VuZFxyXG4gICAgICAgICAgZDMuc2VsZWN0QWxsKCcuY29sb3JMZWdlbmQgKicpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgdGhpcy5jaGFuZ2VsZWdlbmQoKTtcclxuXHJcbiAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgIC8vZ28gYmFjayBvbmUgc2Vjb25kIGFuZCBkcmF3IHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgIHRoaXMuZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIERyYXcgYWNjZWxlcmF0aW9uIGJ1dHRvblxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2RyYXctYWNjZWxlcmF0aW9uJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAkKCcuZHJhdy1kZXRhaWxzJykuaGlkZSgpXHJcbiAgICAgICAgICAgICAgLmZpbmQoJ2lucHV0OmNoZWNrYm94JykucHJvcCgnY2hlY2tlZCcsIHRydWUpLmNsaWNrKCk7XHJcbiAgICAgICAgICBpZiAoJCgnI2RyYXctYWNjZWxlcmF0aW9uJykuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICAvLyBsb2FkIGFic29sdXRlIGZlYXR1cmUgYWNjZWxlcmF0aW9uIGRhdGEgb25jZVxyXG4gICAgICAgICAgICAgIGlmICghKCdhY2NlbGVyYXRpb24nIGluIGRhdGFzZXRbMF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgIGRpc2FibGVQbGF5QnV0dG9uKCk7XHJcbiAgICAgICAgICAgICAgICAgIC8vIGFqYXggcXVlcnkgdG8gZ2V0IHRoZSBhYnNvbHV0ZSBmZWF0dXJlIGFjY2VsZXJhdGlvblxyXG4gICAgICAgICAgICAgICAgICBnZXREYXRhc2V0RmVhdHVyZSgnYWNjZWxlcmF0aW9uJyk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICQoJyNkcmF3LWFjY2VsZXJhdGlvbi1kZXRhaWxzJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICQoJyNkcmF3LXNwZWVkJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAkKCcjZHJhdy1kaXN0YW5jZV9jZW50cm9pZCcpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgJCgnI2RyYXctbWlkbGluZV9vZmZzZXQnKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgIFNQVi5zZXRBY3RpdmVTY2FsZSgnYWNjZWxlcmF0aW9uJyk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICQoJyNkcmF3LWFjY2VsZXJhdGlvbi1kZXRhaWxzJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgIFNQVi5zZXRBY3RpdmVTY2FsZSgnYmxhY2snKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgICQoJy5kcmF3LWRldGFpbHMuYWN0aXZlJykuY2xpY2soKTtcclxuICAgICAgICAgIC8vY2hhbmdlIGNvbG9yIGxlZ2VuZFxyXG4gICAgICAgICAgZDMuc2VsZWN0QWxsKCcuY29sb3JMZWdlbmQgKicpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgdGhpcy5jaGFuZ2VsZWdlbmQoKTtcclxuXHJcbiAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgIC8vZ28gYmFjayBvbmUgc2Vjb25kIGFuZCBkcmF3IHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgIHRoaXMuZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIERyYXcgZGlzdGFuY2UgdG8gY2VudHJvaWQgYnV0dG9uXHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjZHJhdy1kaXN0YW5jZV9jZW50cm9pZCcpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgJCgnLmRyYXctZGV0YWlscycpLmhpZGUoKVxyXG4gICAgICAgICAgICAgIC5maW5kKCdpbnB1dDpjaGVja2JveCcpLnByb3AoJ2NoZWNrZWQnLCB0cnVlKS5jbGljaygpO1xyXG4gICAgICAgICAgaWYgKCQoJyNkcmF3LWRpc3RhbmNlX2NlbnRyb2lkJykuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICAvLyBsb2FkIGFic29sdXRlIGZlYXR1cmUgZGlzdGFuY2VfY2VudHJvaWQgZGF0YSBvbmNlXHJcbiAgICAgICAgICAgICAgaWYgKCEoJ2Rpc3RhbmNlX2NlbnRyb2lkJyBpbiBkYXRhc2V0WzBdKSkge1xyXG4gICAgICAgICAgICAgICAgICBkaXNhYmxlUGxheUJ1dHRvbigpO1xyXG4gICAgICAgICAgICAgICAgICAvLyBhamF4IHF1ZXJ5IHRvIGdldCB0aGUgYWJzb2x1dGUgZmVhdHVyZSBkaXN0YW5jZV9jZW50cm9pZFxyXG4gICAgICAgICAgICAgICAgICBnZXREYXRhc2V0RmVhdHVyZSgnZGlzdGFuY2VfY2VudHJvaWQnKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgJCgnI2RyYXctZGlzdGFuY2VfY2VudHJvaWQtZGV0YWlscycpLnNob3coKTtcclxuICAgICAgICAgICAgICAkKCcjZHJhdy1zcGVlZCcpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgJCgnI2RyYXctYWNjZWxlcmF0aW9uJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAkKCcjZHJhdy1taWRsaW5lX29mZnNldCcpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgU1BWLnNldEFjdGl2ZVNjYWxlKCdkaXN0YW5jZV9jZW50cm9pZCcpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAkKCcjZHJhdy1kaXN0YW5jZV9jZW50cm9pZC1kZXRhaWxzJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgIFNQVi5zZXRBY3RpdmVTY2FsZSgnYmxhY2snKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgICQoJy5kcmF3LWRldGFpbHMuYWN0aXZlJykuY2xpY2soKTtcclxuICAgICAgICAgIC8vY2hhbmdlIGNvbG9yIGxlZ2VuZFxyXG4gICAgICAgICAgZDMuc2VsZWN0QWxsKCcuY29sb3JMZWdlbmQgKicpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgdGhpcy5jaGFuZ2VsZWdlbmQoKTtcclxuXHJcbiAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgIC8vZ28gYmFjayBvbmUgc2Vjb25kIGFuZCBkcmF3IHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgIHRoaXMuZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIERyYXcgbWlkbGluZSBvZmZzZXRcclxuICAgICAgICovXHJcbiAgICAgICQoJyNkcmF3LW1pZGxpbmVfb2Zmc2V0JykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAkKCcuZHJhdy1kZXRhaWxzJykuaGlkZSgpXHJcbiAgICAgICAgICAgICAgLmZpbmQoJ2lucHV0OmNoZWNrYm94JykucHJvcCgnY2hlY2tlZCcsIHRydWUpLmNsaWNrKCk7XHJcbiAgICAgICAgICBpZiAoJCgnI2RyYXctbWlkbGluZV9vZmZzZXQnKS5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgIC8vIGxvYWQgYWJzb2x1dGUgZmVhdHVyZSBkcmF3LW1pZGxpbmVfb2Zmc2V0IGRhdGEgb25jZVxyXG4gICAgICAgICAgICAgIGlmICghKCdkcmF3LW1pZGxpbmVfb2Zmc2V0JyBpbiBkYXRhc2V0WzBdKSkge1xyXG4gICAgICAgICAgICAgICAgICBkaXNhYmxlUGxheUJ1dHRvbigpO1xyXG4gICAgICAgICAgICAgICAgICAvLyBhamF4IHF1ZXJ5IHRvIGdldCB0aGUgYWJzb2x1dGUgZmVhdHVyZSBtaWRsaW5lX29mZnNldFxyXG4gICAgICAgICAgICAgICAgICBnZXREYXRhc2V0RmVhdHVyZSgnbWlkbGluZV9vZmZzZXQnKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgJCgnI2RyYXctbWlkbGluZV9vZmZzZXQtZGV0YWlscycpLnNob3coKTtcclxuICAgICAgICAgICAgICAkKCcjZHJhdy1zcGVlZCcpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgJCgnI2RyYXctYWNjZWxlcmF0aW9uJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAkKCcjZHJhdy1kaXN0YW5jZV9jZW50cm9pZCcpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgU1BWLnNldEFjdGl2ZVNjYWxlKCdtaWRsaW5lX29mZnNldCcpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBTUFYuc2V0QWN0aXZlU2NhbGUoJ2JsYWNrJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAkKCcuZHJhdy1kZXRhaWxzLmFjdGl2ZScpLmNsaWNrKCk7XHJcbiAgICAgICAgICAvL2NoYW5nZSBjb2xvciBsZWdlbmRcclxuICAgICAgICAgIGQzLnNlbGVjdEFsbCgnLmNvbG9yTGVnZW5kIConKS5yZW1vdmUoKTtcclxuICAgICAgICAgIHRoaXMuY2hhbmdlbGVnZW5kKCk7XHJcblxyXG4gICAgICAgICAgaWYgKCEkKCcjcGxheS1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuICAgICAgICAgICAgICB0aGlzLmRlY0luZGV4VGltZSgpO1xyXG4gICAgICAgICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEluaXQgbmV0d29yayBsaXN0ZWVuZXJzXHJcbiAgICovXHJcbiAgbl9saXN0ZW5lcnMoKSB7XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBOZXR3b3JrIGJ1dHRvbnMgY2xpY2tlZCAtIGdldCB0aGUgZGF0YVxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI25ldHdvcmtzLW1vZGFsLWJvZHkgYnV0dG9uJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBsZXQgbmV0d29ya19pZCA9ICQodGhpcykuYXR0cignZGF0YScpO1xyXG5cclxuICAgICAgICAgIC8vIGFkZCB0aGUgbmFtZSBvZiB0aGUgY2hvb3NlbiBuZXR3b3JrIHRvIHRoZSBOZXR3b3JrIG1vZGFsXHJcbiAgICAgICAgICAkKCcjYWN0aXZlLW5ldHdvcmstbmFtZScpLnRleHQoJCh0aGlzKS5hdHRyKCduYW1lJykpO1xyXG5cclxuICAgICAgICAgIGRpc2FibGVQbGF5QnV0dG9uKCk7XHJcbiAgICAgICAgICBnZXROZXR3b3JrRGF0YShuZXR3b3JrX2lkKTtcclxuICAgICAgICAgIC8vIHNldCB0aGUgY29sb3Igb2YgdGhlIG5ldHdvcmtcclxuICAgICAgICAgIHNldG5ldHdvcmtDb2xvcihuZXR3b3JrX2lkKTtcclxuICAgICAgICAgICQoJyNuZXR3b3JrLWRpdicpLm1vZGFsKCd0b2dnbGUnKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogTmV0d29yayBidXR0b25zIGNsaWNrZWQgLSBnZXQgdGhlIGRhdGFcclxuICAgICAgICovXHJcbiAgICAgICQoJyNuZXR3b3JrLXJlbW92ZScpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgc2V0TmV0d29ya0RhdGEoe30pO1xyXG4gICAgICAgICAgc2V0TmV0d29ya0lEKC0xKTtcclxuICAgICAgICAgIC8vIHJlbW92ZSB0aGUgbmV0d29yayBjb2xvclxyXG4gICAgICAgICAgc2V0bmV0d29ya0NvbG9yKC0xKTtcclxuICAgICAgICAgICQoJyNhY3RpdmUtbmV0d29yay1uYW1lJykudGV4dCgnJyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIE5ldHdvcmsgYXV0byBidXR0b24gc2V0IGFjaXZlIG9yIHJlbW92ZVxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI25ldHdvcmstYXV0by1zdWdnZXN0JykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZiAoISQoJyNuZXR3b3JrLWF1dG8tc3VnZ2VzdCcpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICQoJyNuZXR3b3JrLWxpbWl0LXAnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgJCgnI25ldHdvcmstc2xpZGVyJykuaGlkZSgpO1xyXG5cclxuICAgICAgICAgICAgICBzZXROZXR3b3JrQXV0byh0cnVlKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgJCgnI25ldHdvcmstbGltaXQtcCcpLnNob3coKTtcclxuICAgICAgICAgICAgICAkKCcjbmV0d29yay1zbGlkZXInKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgc2V0TmV0d29ya0F1dG8oZmFsc2UpO1xyXG4gICAgICAgICAgICAgIGxldCBsaW1pdCA9ICQoJyNuZXR3b3JrLXNsaWRlcicpLnNsaWRlcigndmFsdWUnKTtcclxuICAgICAgICAgICAgICBzZXROZXR3b3JMaW1pdChsaW1pdCk7XHJcbiAgICAgICAgICAgICAgJCgnI25ldHdvcmstbGltaXQnKS52YWwobGltaXQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEluaXQgbWV0YWRhdGEgbGlzdGVuZXJzXHJcbiAgICovXHJcbiAgbWRfbGlzdGVuZXJzKCkge1xyXG4gICAgICAvKipcclxuICAgICAgICogTWV0YWRhdGEgc3dhdGNoIGZ1bmN0aW9ucyBjb2xvcmluZyBpbmRpdmlkdWFsIGFuaW1hbHNcclxuICAgICAgICovXHJcbiAgICAgICQoJy5tZXRhZGF0YS1zd2F0Y2gubWV0YWRhdGEtc3dhdGNoLWNsaWNrYWJsZScpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgbGV0IGlkID0gJCh0aGlzKS5hdHRyKCd2YWx1ZScpO1xyXG4gICAgICAgICAgbGV0IGNvbG9yUkdCID0gJCh0aGlzKS5jc3MoJ2JhY2tncm91bmQtY29sb3InKTtcclxuICAgICAgICAgIC8vIHNldCB0aGUgY29sb3Igb2YgdGhlIHN3YXRjaCBwcmV2aWV3XHJcbiAgICAgICAgICAkKCcjbWV0YWRhdGEtcm93LScgKyBpZCArICcgI3ByZXZpZXcnKVxyXG4gICAgICAgICAgICAgIC5jc3MoJ2JhY2tncm91bmQtY29sb3InLCBjb2xvclJHQik7XHJcbiAgICAgICAgICAvLyBpZiB3aGl0ZSB0aGFuIHJlc2V0IHRoZSBjb2xvclxyXG4gICAgICAgICAgaWYgKGNvbG9yUkdCID09PSAncmdiKDI1NSwgMjU1LCAyNTUpJykge1xyXG4gICAgICAgICAgICAgIGlmIChtZXRhZGF0YUNvbG9yW2lkXSkge1xyXG4gICAgICAgICAgICAgICAgICBkZWxldGUgbWV0YWRhdGFDb2xvcltpZF07XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBtZXRhZGF0YUNvbG9yW2lkXSA9IGNvbG9yUkdCO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBNZXRhZGF0YSBncm91cCBtZXRhZGF0YSBmdW5jdGlvbnMgZm9yIGluc3RhbmNlIGNvbG9yIHNleFxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2dyb3VwLW1ldGFkYXRhIDppbnB1dCcpLmNoYW5nZShmdW5jdGlvbigpIHtcclxuICAgICAgICAgIC8vIHJlc2V0IHRoZSBtZXRhZGF0IGFjb2xvcmluZ1xyXG4gICAgICAgICAgcmVzZXRJbmRpdmlkdWFsTWV0YWRhdGEoKTtcclxuXHJcbiAgICAgICAgICBsZXQgdmFsdWUgPSAkKHRoaXMpLmF0dHIoJ3ZhbHVlJyk7XHJcbiAgICAgICAgICBsZXQgdG1wID0gW107XHJcblxyXG4gICAgICAgICAgLy8gbWV0YWRhdGEgc2V4IGlzIGNob29zZW4gLSBjb2xvcmluZyBiYXNlZCBvbiBtIGFuZCBmXHJcbiAgICAgICAgICBpZiAodmFsdWUgPT09ICdzZXgnKSB7XHJcbiAgICAgICAgICAgICAgJCgnI21ldGFkYXRhLWRpdicpLm1vZGFsKCd0b2dnbGUnKTtcclxuICAgICAgICAgICAgICAvLyBjbG9zZSBhbmQgY29sb3IgaGVyZVxyXG4gICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YXNldE1ldGFkYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgIHRtcC5wdXNoKGRhdGFzZXRNZXRhZGF0YVtpXVt2YWx1ZV0udG9Mb3dlckNhc2UoKSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIC8vIGNyZWF0ZSBhIHNldCBvZiBpbmRpdmlkdWFsIHN0cmluZ3MgaW4gc2V4XHJcbiAgICAgICAgICAgICAgdG1wID0gQXJyYXkuZnJvbShuZXcgU2V0KHRtcCkpO1xyXG4gICAgICAgICAgICAgIGxldCBjb2xvcnMgPSBbJyM3ZmM5N2YnLCAnIzM4NmNiMCddO1xyXG5cclxuICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGFzZXRNZXRhZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRtcC5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFzZXRNZXRhZGF0YVtpXVt2YWx1ZV0udG9Mb3dlckNhc2UoKSA9PT0gdG1wW2pdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIHRoZSBjb2xvcmluZyB0byB0aGUgbWV0YWRhdGFjb2xvciBvYmplY3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YUNvbG9yW2RhdGFzZXRNZXRhZGF0YVtpXVsnYW5pbWFsX2lkJ11dID0gY29sb3JzW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICQoJyNtZXRhZGF0YS1pbnB1dCcpLmhpZGUoKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgJCgnI21ldGFkYXRhLWlucHV0Jykuc2hvdygpO1xyXG4gICAgICAgICAgICAgIC8vIHNldCB2YWx1ZXMgb2YgaW5wdXRzXHJcbiAgICAgICAgICAgICAgLy8gaGVyZSBhcmUgYXV0b21hdGljYWxseSBpbnB1dCB2YWx1ZXMgY2FsY3VsYXRlZFxyXG4gICAgICAgICAgICAgIC8vIC4yNSBhbmQgLjc1IHBlcmNlbnRpbGVzIGFyZSB1c2VkXHJcbiAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhc2V0TWV0YWRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgdG1wLnB1c2goZGF0YXNldE1ldGFkYXRhW2ldW3ZhbHVlXSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGxldCBibEF2ZyA9IGQzLnF1YW50aWxlKHRtcCwgMC4yNSk7IC8vIGJlbG93IGF2ZXJhZ2UgdmFsdWVcclxuICAgICAgICAgICAgICBsZXQgYWJBdmcgPSBkMy5xdWFudGlsZSh0bXAsIDAuNzUpOyAvLyBhYm92ZSBhdmVyYWdlXHJcbiAgICAgICAgICAgICAgJCgnI2JsLWF2ZycpLnZhbChibEF2Zyk7XHJcbiAgICAgICAgICAgICAgJCgnI2FiLWF2ZycpLnZhbChhYkF2Zyk7XHJcbiAgICAgICAgICAgICAgLy8gY29sb3IgdGhlIGFuaW1hbHNcclxuICAgICAgICAgICAgICBjb2xvck1ldGFkYXRhKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIE1ldGFkYXRhIGdyb3VwIG1ldGFkYXRhIGlucHV0IHNwaW5uZXJcclxuICAgICAgICogKy8tIDAuMSB0byB0aGUgaW5wdXQgdmFsdWVcclxuICAgICAgICovXHJcbiAgICAgICQoJy5udW1iZXItc3Bpbm5lciBidXR0b24nKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGxldCBidG4gPSAkKHRoaXMpLFxyXG4gICAgICAgICAgICAgIG9sZFZhbHVlID0gYnRuLmNsb3Nlc3QoJy5udW1iZXItc3Bpbm5lcicpLmZpbmQoJ2lucHV0JykudmFsKCkudHJpbSgpLFxyXG4gICAgICAgICAgICAgIG5ld1ZhbCA9IDA7XHJcblxyXG4gICAgICAgICAgaWYgKGJ0bi5hdHRyKCdkYXRhLWRpcicpID09ICd1cCcpIHtcclxuICAgICAgICAgICAgICBuZXdWYWwgPSBwYXJzZUZsb2F0KG9sZFZhbHVlKSArIDAuMTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgaWYgKG9sZFZhbHVlID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICBuZXdWYWwgPSBwYXJzZUZsb2F0KG9sZFZhbHVlKSAtIDAuMTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICBuZXdWYWwgPSAwO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIG5ld1ZhbCA9IE1hdGgucm91bmQobmV3VmFsICogMTAwKSAvIDEwMDsgLVxyXG4gICAgICAgICAgYnRuLmNsb3Nlc3QoJy5udW1iZXItc3Bpbm5lcicpLmZpbmQoJ2lucHV0JykudmFsKG5ld1ZhbCk7XHJcbiAgICAgICAgICAvLyBjaGFuZ2UgdGhlIGNvbG9yaW5nXHJcbiAgICAgICAgICBjb2xvck1ldGFkYXRhKCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIE1ldGFkYXRhIGlucHV0IGZpZWxkcyBjaGFuZ2VcclxuICAgICAgICovXHJcbiAgICAgICQoJy5udW1iZXItc3Bpbm5lciBpbnB1dCcpLm9uKCdpbnB1dCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgY29sb3JNZXRhZGF0YSgpO1xyXG4gICAgICB9KTtcclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogUmVzZXQgYWxsIG1ldGFkYXRhIGlucHV0IHBhcmFtZXRlcnNcclxuICAgICAgICovXHJcbiAgICAgICQoJyNtZXRhZGF0YS1yZXNldCcpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgJCgnI21ldGFkYXRhLWlucHV0JykuaGlkZSgpO1xyXG4gICAgICAgICAgcmVzZXRJbmRpdmlkdWFsTWV0YWRhdGEoKTtcclxuICAgICAgfSk7XHJcblxyXG4gIH1cclxuICAvKipcclxuICAgKiBJbml0aWFsaXplIGhpZXJhcmNoeS9kZW5kZ3JvZ3JhbSBsaXN0ZW5lcnNcclxuICAgKi9cclxuICBoX2xpc3RlbmVycygpIHtcclxuICAgICAgLyoqXHJcbiAgICAgICAqIFNob3cgZGVuZGdyb2dyYW0gc2xpZGluZyBidXR0b25cclxuICAgICAgICovXHJcbiAgICAgIGZ1bmN0aW9uIGluaXRTaG93RGVuZHJvZ3JhbUxpc3RlbmVyKGlkKSB7XHJcblxyXG4gICAgICAgICAgJCgnI3Nob3ctZGVuZHJvZ3JhbS0nICsgaWQpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIGxldCBjbGlja2VkQnV0dG9uSUQgPSAkKHRoaXMpLmF0dHIoJ2lkJyk7XHJcbiAgICAgICAgICAgICAgLy8gaXRlcmF0ZSBvdmVyIGFsbCBidXR0b25zIGFuZCBjdXN0b20gaGlnaGxpZ2h0IGp1c3Qgb25lIG9yIG5vbmVcclxuICAgICAgICAgICAgICAkKCcuc2hvdy1kZW5kcm9ncmFtJykuZWFjaChmdW5jdGlvbihpLCBidXR0b24pIHtcclxuICAgICAgICAgICAgICAgICAgLy8gYWN0aXZlIGZvdW5kIGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICBpZiAoJChidXR0b24pLmF0dHIoJ2lkJykgPT09IGNsaWNrZWRCdXR0b25JRCAmJiAkKGJ1dHRvbikuaGFzQ2xhc3MoJ2J0bi1wcmltYXJ5JykgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAkKGJ1dHRvbikuYWRkQ2xhc3MoJ2J0bi1wcmltYXJ5Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAkKGJ1dHRvbikuZmluZCgnI2J0bi1sZWZ0JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgJChidXR0b24pLmZpbmQoJyNidG4tcmlnaHQnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPIGFkZCBoZXJlIGEgcmVzaXplIG9mIHRoZSBtYWluIHZpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgLy8gJCgnI2RlbmRyb2dyYW0tcGFuZWwnKS5pbnNlcnRBZnRlcigkKHRoaXMpKTtcclxuICAgICAgICAgICAgICAgICAgfSAvLyByZW1vdmUgaGlnaGxpZ2h0XHJcbiAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgJChidXR0b24pLnJlbW92ZUNsYXNzKCdidG4tcHJpbWFyeScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgJChidXR0b24pLmZpbmQoJyNidG4tbGVmdCcpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICQoYnV0dG9uKS5maW5kKCcjYnRuLXJpZ2h0JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgIC8vIHNob3cgZGVuZHJvZ3JhbVxyXG4gICAgICAgICAgICAgIGlmICgkKCcuc2hvdy1kZW5kcm9ncmFtLmJ0bi1wcmltYXJ5JykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICQoJyNkZW5kcm9ncmFtLXBhbmVsJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICQoJyNkZW5kcm9ncmFtLXBhbmVsJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgICAgICAvL3RoaXMgYXBwbHlzIHRoZSBjaGFuZ2VzXHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLmRyYXdEZW5kcm9ncmFtKCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBIaWVyYXJjaHkgYnV0dG9uIGluIG5ldHdvcmsgbW9kYWwgb24gY2hhbmdlXHJcbiAgICAgICAqIExvYWQgZGF0YSBvciByZW1vdmUgaXRcclxuICAgICAgICovXHJcbiAgICAgICQoJy5oaWVhcmNoeS1jaGVja2JveCcpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGxldCBjaGVja2JveCA9ICQodGhpcyk7XHJcblxyXG4gICAgICAgICAgbGV0IGlkID0gY2hlY2tib3guYXR0cignZGF0YScpO1xyXG4gICAgICAgICAgbGV0IG5hbWUgPSBjaGVja2JveC5hdHRyKCduYW1lJyk7XHJcbiAgICAgICAgICBsZXQgY2hlY2tlZCA9IGNoZWNrYm94LnByb3AoJ2NoZWNrZWQnKTtcclxuXHJcbiAgICAgICAgICBpZiAoY2hlY2tlZCAmJiAkKCcuc2hvdy1kZW5kcm9ncmFtJykubGVuZ3RoIDwgbWF4TnVtYmVySGllcmFyY2hpZXMpIHtcclxuICAgICAgICAgICAgICBkaXNhYmxlUGxheUJ1dHRvbigpO1xyXG4gICAgICAgICAgICAgIGdldE5ldHdvcmtIaWVyYXJjaHlEYXRhKGlkKTtcclxuXHJcbiAgICAgICAgICAgICAgYWRkSGllcmFyY2h5QnV0dG9uKGlkLCBuYW1lKTtcclxuICAgICAgICAgICAgICBpbml0U2hvd0RlbmRyb2dyYW1MaXN0ZW5lcihpZCk7XHJcbiAgICAgICAgICAgICAgJCgnI2RlbmRyb2dyYW0tYnV0dG9ucy1kaXYnKS5zaG93KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyBlbHNlIGlmICgkKCcuc2hvdy1kZW5kcm9ncmFtJykubGVuZ3RoID09PSBtYXhOdW1iZXJIaWVyYXJjaGllcykge1xyXG4gICAgICAgICAgLy8gY29uc29sZS5sb2coJ01heCBudW1iZXIgb2YgaGllcmFyY2hpZXMgaXM6ICcgKyBtYXhOdW1iZXJIaWVyYXJjaGllcyk7XHJcbiAgICAgICAgICAvL1RPRE8gaW1wbGVtZW50IHRoaXMgaGVyZVxyXG4gICAgICAgICAgLy8gbm90aWNlIHVzZXIgdGhhdCBpdCBpcyBub3QgcG9zc2libGUgdG8gc2hvdyBtb3JlIHRoYW4gbiBoaWVyYXJjaGllc1xyXG4gICAgICAgICAgLy8gICAgICAgICAgPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cclxuICAgICAgICAgIC8vICAgPHN0cm9uZz5JbmZvITwvc3Ryb25nPiBBdHRlbnRpb24gdXNlciAuXHJcbiAgICAgICAgICAvLyA8L2Rpdj5cclxuICAgICAgICAgIC8vIH1cclxuICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgIC8vIHRtcCB2YXJpYWJsZSB0byBzYXZlIGlmIHRoZSBidXR0b24gd2hpY2ggaXMgZ29pbmcgdG8gYmUgcmVtb3ZlZFxyXG4gICAgICAgICAgICAgIC8vIHdhcyBhY3RpdmVcclxuICAgICAgICAgICAgICBsZXQgdG1wQWN0aXZlID0gJCgnI3Nob3ctZGVuZHJvZ3JhbS0nICsgaWQpLmhhc0NsYXNzKCdidG4tcHJpbWFyeScpO1xyXG4gICAgICAgICAgICAgIHNldEhpZXJhcmNoeURhdGEoe30sIGlkKTtcclxuXHJcbiAgICAgICAgICAgICAgcmVtb3ZlSGllcmFyY2h5QnV0dG9uKGlkKTtcclxuICAgICAgICAgICAgICAvLyBUT0RPIGZpbmQgYmV0dGVyIHdheSBoZXJlXHJcbiAgICAgICAgICAgICAgZDMuc2VsZWN0KCdnLmgnICsgaWQpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgIC8vIHJlbW92ZSB0aGUgZGVuZHJvZ3JhbSBhbmQgdGhlIHBhbmVsIGlmIHRoZSByZW1vdmVkIGVsZW1lbnQgd2FzIGNoZWNrZWRcclxuICAgICAgICAgICAgICBpZiAodG1wQWN0aXZlID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICQoJyNkZW5kcm9ncmFtLXBhbmVsJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBpZiAoJCgnLnNob3ctZGVuZHJvZ3JhbScpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAkKCcjZGVuZHJvZ3JhbS1idXR0b25zLWRpdicpLmhpZGUoKTtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLy8gcmVzaXplIHRoZSBtYWluIHN2Z1xyXG4gICAgICAgICAgaWYgKCQoJy5zaG93LWRlbmRyb2dyYW0nKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAkKCcjbWFpbi12aXMtZGl2JykucmVtb3ZlQ2xhc3MoJ2NvbC1tZC0xMicpO1xyXG4gICAgICAgICAgICAgICQoJyNtYWluLXZpcy1kaXYnKS5hZGRDbGFzcygnY29sLW1kLTgnKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgJCgnI21haW4tdmlzLWRpdicpLnJlbW92ZUNsYXNzKCdjb2wtbWQtOCcpO1xyXG4gICAgICAgICAgICAgICQoJyNtYWluLXZpcy1kaXYnKS5hZGRDbGFzcygnY29sLW1kLTEyJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFZpc3VhbGl6ZSB0aGUgbmV0d29yayBvbmx5IGluIHRoZSBjaG9vc2VuIGhpZXJhcmNoeVxyXG4gICAgICAgKi9cclxuICAgICAgJCgnLm5ldHdvcmstaGllcmFyY2h5LWNoZWNrYm94Jykub24oJ2NoYW5nZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgLy8gZ2V0IHRoZSBpbmZvIGZvciB0aGUgY2xpY2tlZCBidXR0b25cclxuICAgICAgICAgIGxldCBjaGVja2JveCA9ICQodGhpcyk7XHJcblxyXG4gICAgICAgICAgLy8gcmVzZXQgYWxsIHRoZSBvdGhlciBhY3RpdmUgY2hlY2tib3hlc1xyXG4gICAgICAgICAgJCgnLm5ldHdvcmstaGllcmFyY2h5LWNoZWNrYm94JykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcclxuICAgICAgICAgIGNoZWNrYm94LnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcclxuXHJcbiAgICAgICAgICBpZiAoY2hlY2tib3gucHJvcCgnY2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICAgLy8gc2V0IHRoZSBuZXR3b3JrIGlkXHJcbiAgICAgICAgICAgICAgc2V0TmV0d29ya0hpZXJhcmNoeShjaGVja2JveC5hdHRyKCdkYXRhJykpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBzZXROZXR3b3JrSGllcmFyY2h5KHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxufVxyXG5cclxuXHJcbn1cclxuXHJcbmNsYXNzIENoYXJ0IGV4dGVuZHMgRHJhd2VyIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhKSB7XHJcbiAgICBzdXBlcigpXHJcbiAgICAgIC8vIGxvYWQgaW4gYXJndW1lbnRzIGZyb20gY29uZmlnIG9iamVjdFxyXG4gICAgdGhpcy5zd2FybURhdGEgPSBkYXRhO1xyXG4gICAgdGhpcy5zd2FybV9mZWF0dXJlcyA9IE9iamVjdC5rZXlzKHRoaXMuc3dhcm1EYXRhWzBdKTtcclxuICAgIHRoaXMubGluZUNoYXJ0V2lkdGggPSA1MDAwO1xyXG4gICAgdGhpcy50cmVuZENoYXJ0c0VsZW0gPSBbJ2xvd2VyLW91dGVyLWFyZWEnLCAnbG93ZXItaW5uZXItYXJlYScsICdtZWRpYW4tbGluZScsICd1cHBlci1pbm5lci1hcmVhJywgJ3VwcGVyLW91dGVyLWFyZWEnXTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICogaW5pdCB0aGUgbGluZSBjaGFydCBhbmQgYWxzbyB0aGUgdHJlbmQgY2hhcnRcclxuICAgICAqL1xyXG5cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBMaW5lQ2hhcnQgZXh0ZW5kcyBDaGFydCB7XHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhKXtcclxuICAgIHN1cGVyKGRhdGEpXHJcbiAgICB0aGlzLmxpbmVDaGFydCgpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBsaW5lQ2hhcnQoKSB7XHJcblxyXG4gICAgICByYXRpbyA9IE1hdGguY2VpbCh0aGlzLnN3YXJtRGF0YS5sZW5ndGggLyB0aGlzLmxpbmVDaGFydFdpZHRoKTtcclxuXHJcbiAgICAgIC8vIFN3YXJtIGZlYXR1cmVzIGxpbmUgY2hhcnRcclxuICAgICAgbGV0IGxpbmVDaGFydEhlaWdodCA9IDUwMDsgLy8gdGhlIGxpbmUgY2hhcnQgaGVpZ2h0XHJcbiAgICAgIGxldCBtYXJnaW4gPSB7XHJcbiAgICAgICAgICB0b3A6IDEwLFxyXG4gICAgICAgICAgcmlnaHQ6IDAsXHJcbiAgICAgICAgICBib3R0b206IDEwMCxcclxuICAgICAgICAgIGxlZnQ6IDEwXHJcbiAgICAgIH07XHJcbiAgICAgIGxldCBtYXJnaW5Ub0xlZ2VuZCA9IDUwO1xyXG5cclxuICAgICAgbGV0IHN3YXJtX2ZlYXR1cmVzID0gdGhpcy5zd2FybV9mZWF0dXJlcztcclxuICAgICAgLy8gcmVtb3ZlIHRoZSB0aW1lIGtleVxyXG4gICAgICBsZXQgaW5kZXggPSBzd2FybV9mZWF0dXJlcy5pbmRleE9mKCd0aW1lJyk7XHJcbiAgICAgIHN3YXJtX2ZlYXR1cmVzLnNwbGljZShpbmRleCwgMSk7XHJcblxyXG4gICAgICBsZXQgbGluZUNoYXJ0RGF0YSA9IFtdO1xyXG4gICAgICAvLyBhZ2dyZWdhdGUgYW5kIGF2ZXJhZ2UgdGhlIHN3YXJtIGRhdGEgdG8gdGhpcy5saW5lQ2hhcnRXaWR0aCBwb2ludHMgaW4gdGhlIGxpbmUgY2hhcnRcclxuICAgICAgaWYgKHRoaXMuc3dhcm1EYXRhLmxlbmd0aCA+IHRoaXMubGluZUNoYXJ0V2lkdGgpIHtcclxuICAgICAgICAgIC8vIHRtcCBhcnJheSBmb3IgdGhlIGFnZ3JlZ2F0ZWQgYW5kIGF2ZXJhZ2VkIGZlYXR1cmVzXHJcbiAgICAgICAgICBsZXQgdG1wID0gbmV3IEFycmF5KHN3YXJtX2ZlYXR1cmVzLmxlbmd0aCkuZmlsbCgwKTtcclxuXHJcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc3dhcm1EYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgLy8gYWdncmVnYXRlIHRoZSBmZWF0dXJlcyBpbiB0aGUgdGVtcCBhcnJheVxyXG4gICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgc3dhcm1fZmVhdHVyZXMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgdG1wW2pdICs9IHRoaXMuc3dhcm1EYXRhW2ldW3N3YXJtX2ZlYXR1cmVzW2pdXTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgLy8gaWYgdGhlIHJhdGlvIGlzIHplcm8gdGhlbiBhdmVyYWdlIGl0IGFuZCBzZXQgaXQgdG8gemVyb1xyXG4gICAgICAgICAgICAgIGlmIChpICUgcmF0aW8gPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgbGV0IHRtcF9vYmplY3QgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAndGltZSc6IGkgLyByYXRpb1xyXG4gICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzd2FybV9mZWF0dXJlcy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgdG1wW2pdID0gdG1wW2pdIC8gcmF0aW87XHJcbiAgICAgICAgICAgICAgICAgICAgICB0bXBfb2JqZWN0W3N3YXJtX2ZlYXR1cmVzW2pdXSA9IHRtcFtqXTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgbGluZUNoYXJ0RGF0YS5wdXNoKHRtcF9vYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgICB0bXAgPSBuZXcgQXJyYXkoc3dhcm1fZmVhdHVyZXMubGVuZ3RoKS5maWxsKDApO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGxpbmVDaGFydERhdGEgPSB0aGlzLnN3YXJtRGF0YTtcclxuICAgICAgfVxyXG4gICAgICAvL2NvbnNvbGUubG9nKGxpbmVDaGFydERhdGEpO1xyXG4gICAgICB6b29tRnVuY3Rpb24gPSBkMy5zY2FsZUxpbmVhcigpXHJcbiAgICAgICAgICAuZG9tYWluKFswLCBsaW5lQ2hhcnREYXRhLmxlbmd0aF0pXHJcbiAgICAgICAgICAucmFuZ2UoWzAsIHRoaXMubGluZUNoYXJ0V2lkdGhdKTtcclxuXHJcblxyXG4gICAgICAvLyB4IGF4aXMgc2NhbGUgLSBtaW51cyBtYXJnaW5MaW5lQ2hhcnQgIG5lZWRlZFxyXG4gICAgICB4ID0gZDMuc2NhbGVMaW5lYXIoKVxyXG4gICAgICAgICAgLmRvbWFpbihbMCwgbGluZUNoYXJ0RGF0YS5sZW5ndGhdKVxyXG4gICAgICAgICAgLnJhbmdlKFswLCB0aGlzLmxpbmVDaGFydFdpZHRoXSk7XHJcbiAgICAgIGxldCB4MiA9IGQzLnNjYWxlTGluZWFyKClcclxuICAgICAgICAgIC5kb21haW4oWzAsIGxpbmVDaGFydERhdGEubGVuZ3RoXSlcclxuICAgICAgICAgIC5yYW5nZShbMCwgdGhpcy5saW5lQ2hhcnRXaWR0aF0pO1xyXG4gICAgICAvLyBkZWZpbmUgd2hlcmUgdGhlIGF4aXMgaXMgZXRjXHJcbiAgICAgIGxldCB4QXhpcyA9IGQzLmF4aXNCb3R0b20oeClcclxuICAgICAgICAgIC50aWNrcygxMClcclxuICAgICAgICAgIC50aWNrU2l6ZSgxMClcclxuICAgICAgICAgIC50aWNrUGFkZGluZyg1KVxyXG4gICAgICAgICAgLnRpY2tGb3JtYXQoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKChkICogcmF0aW8pIC8gMTUwMCkgJSA2MCArICc6JyArIE1hdGguZmxvb3IoKGQgKiByYXRpbykgLyBwYXJhbWV0ZXJzWydmcHMnXSkgJSA2MCArICc6OicgKyAoZCAqIHJhdGlvKSAlIHBhcmFtZXRlcnNbJ2ZwcyddO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAvLyB5IGF4aXMgc2NhbGUgd2hpY2ggaXMgbm9ybWFsaXplZFxyXG4gICAgICB5ID0gZDMuc2NhbGVMaW5lYXIoKVxyXG4gICAgICAgICAgLmRvbWFpbihbMCwgMTAwXSlcclxuICAgICAgICAgIC5yYW5nZShbbGluZUNoYXJ0SGVpZ2h0LCAwXSk7XHJcbiAgICAgIC8vIGRlZmluZSB3aGVyZSB0aGUgYXhpcyBpcyBldGNcclxuICAgICAgbGV0IHlBeGlzID0gZDMuYXhpc0xlZnQoeSlcclxuICAgICAgICAgIC50aWNrcygwKVxyXG4gICAgICAgICAgLnRpY2tTaXplKDEwKVxyXG4gICAgICAgICAgLnRpY2tQYWRkaW5nKDUpO1xyXG5cclxuICAgICAgbGV0IGRyYWdnZWQgPSAoKT0+e1xyXG4gICAgICAgICAgLy8gZHJhZ2dlZCBmdW5jdGlvbiBnZXQgdGhlIGNvb3JkaW5hdGVzIGFuZCBjYWxjdWxhdGUgdGhlIHRpbWUgbW9tZW50IGZyb20gdGhpc1xyXG4gICAgICAgICAgbGV0IGNvb3JkcyA9IGQzLm1vdXNlKHRoaXMpO1xyXG4gICAgICAgICAgaWYgKGNvb3Jkc1swXSA8IG1hcmdpbi5sZWZ0IHx8IGNvb3Jkc1swXSA+IHRoaXMubGluZUNoYXJ0V2lkdGggfHwgY29vcmRzWzFdIDwgMCB8fCBjb29yZHNbMV0gPiBsaW5lQ2hhcnRIZWlnaHQpIHtcclxuICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyB0bXAgc2NhbGUgdG8gaW5jbHVkZSB0aGUgem9vbSBmYWN0b3JcclxuICAgICAgICAgIGxldCB0bXBTY2FsZSA9IGQzLnNjYWxlTGluZWFyKClcclxuICAgICAgICAgICAgICAuZG9tYWluKHpvb21GdW5jdGlvbi5yYW5nZSgpKVxyXG4gICAgICAgICAgICAgIC5yYW5nZSh6b29tRnVuY3Rpb24uZG9tYWluKCkpO1xyXG4gICAgICAgICAgLy8gc2V0IHRoZSBuZXcgdGltZVxyXG4gICAgICAgICAgdGhpcy5zZXRJbmRleFRpbWUoTWF0aC5mbG9vcigodG1wU2NhbGUoY29vcmRzWzBdIC0gbWFyZ2luLmxlZnQpKSAqIHJhdGlvKSk7XHJcbiAgICAgIH07XHJcbiAgICAgIGxldCB6b29tID0gZDMuem9vbSgpXHJcbiAgICAgICAgICAuc2NhbGVFeHRlbnQoWzEsIDIwXSlcclxuICAgICAgICAgIC50cmFuc2xhdGVFeHRlbnQoW1xyXG4gICAgICAgICAgICAgIFswLCAwXSxcclxuICAgICAgICAgICAgICBbdGhpcy5saW5lQ2hhcnRXaWR0aCwgbGluZUNoYXJ0SGVpZ2h0XVxyXG4gICAgICAgICAgXSlcclxuICAgICAgICAgIC5leHRlbnQoW1xyXG4gICAgICAgICAgICAgIFswLCAwXSxcclxuICAgICAgICAgICAgICBbdGhpcy5saW5lQ2hhcnRXaWR0aCwgbGluZUNoYXJ0SGVpZ2h0XVxyXG4gICAgICAgICAgXSlcclxuICAgICAgICAgIC5vbignem9vbScsICgpPT57XHJcbiAgICAgICAgICAgICAgLy8gZ2V0IHRoZSB0cmFuc2Zvcm0gZmFjdG9yXHJcbiAgICAgICAgICAgICAgbGV0IHQgPSBkMy5ldmVudC50cmFuc2Zvcm07XHJcbiAgICAgICAgICAgICAgLy8gY2hhbmdlIHNjYWxpbmcgZnVuY3Rpb25cclxuICAgICAgICAgICAgICB6b29tRnVuY3Rpb24gPSB4LmRvbWFpbih0LnJlc2NhbGVYKHgyKS5kb21haW4oKSk7XHJcbiAgICAgICAgICAgICAgLy8gem9vbSBlYWNoIGF2YWlhYmxlIGxpbmVcclxuICAgICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gbGluZXMpIHtcclxuICAgICAgICAgICAgICAgICAgaWYgKGxpbmVzLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuem9vbUdyb3VwLnNlbGVjdCgoJyMnICsga2V5ICsgJ0xpbmUnKSkuYXR0cignZCcsIGxpbmVzW2tleV0pO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIC8vIHpvb20gdGhlIHRyZW5kIGNoYXJ0c1xyXG4gICAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiB0cmVuZENoYXJ0c1pvb20pIHtcclxuICAgICAgICAgICAgICAgICAgaWYgKHRyZW5kQ2hhcnRzWm9vbS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudHJlbmRDaGFydHNFbGVtLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy56b29tR3JvdXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNlbGVjdCgoJyMnICsga2V5ICsgJ1RyZW5kQ2hhcnQgLicgKyB0aGlzLnRyZW5kQ2hhcnRzRWxlbVtpXSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdkJywgdHJlbmRDaGFydHNab29tW2tleV1bdGhpcy50cmVuZENoYXJ0c0VsZW1baV1dKTtcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAvLyByZXNjYWxlIHRoZSBheGlzXHJcbiAgICAgICAgICAgICAgZ1hheGlzLmNhbGwoeEF4aXMpO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBtYWtlIHRoZSBzdmcgcmVzaXphYmxlXHJcbiAgICAgIGxldCBzd2FybUxpbmVDaGFydCA9IGQzLnNlbGVjdCgnI3N3YXJtLXZpcycpXHJcbiAgICAgICAgICAuY2xhc3NlZCgnc3ZnLWxpbmUtY2hhcnQtY29udGFpbmVyJywgdHJ1ZSlcclxuICAgICAgICAgIC8vIHRvIG1ha2UgaXQgcmVzcG9uc2l2ZSB3aXRoIGNzc1xyXG4gICAgICAgICAgLmFwcGVuZCgnc3ZnJylcclxuICAgICAgICAgIC5hdHRyKCdwcmVzZXJ2ZUFzcGVjdFJhdGlvJywgJ3hNaW5ZTWluIG1lZXQnKVxyXG5cclxuICAgICAgICAgIC5hdHRyKCd2aWV3Qm94JywgJzAgMCAnICsgdGhpcy5saW5lQ2hhcnRXaWR0aCArICcgJyArIChsaW5lQ2hhcnRIZWlnaHQgKyBtYXJnaW4uYm90dG9tKSlcclxuICAgICAgICAgIC8vIGFkZCB0aGUgY2xhc3Mgc3ZnLWNvbnRlbnRcclxuICAgICAgICAgIC5jbGFzc2VkKCdzdmctY29udGVudCcsIHRydWUpO1xyXG5cclxuICAgICAgdGhpcy56b29tR3JvdXAgPSBzd2FybUxpbmVDaGFydFxyXG4gICAgICAgICAgLmFwcGVuZCgnc3ZnOmcnKVxyXG4gICAgICAgICAgLmF0dHIoJ2lkJywgJ2xpbmVDaGFydFpvb20nKVxyXG4gICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIG1hcmdpbi5sZWZ0ICsgJywwKScpO1xyXG5cclxuICAgICAgLy8gYXBwZW5kIGEgZ3JvdXAgZm9yIHRoZSB4IGF4aXNcclxuICAgICAgLy8gYWRkIHRoZSBheGlzXHJcbiAgICAgIGxldCBnWGF4aXMgPSB0aGlzLnpvb21Hcm91cC5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3ggYXhpcy1saW5lLWNoYXJ0JylcclxuICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKDAsJyArIGxpbmVDaGFydEhlaWdodCArICcpJylcclxuICAgICAgICAgIC5jYWxsKHhBeGlzKTtcclxuXHJcbiAgICAgIC8vIGFwcGVuZCBhIGdyb3VwIGZvciB0aGUgeSBheGlzXHJcbiAgICAgIHRoaXMuem9vbUdyb3VwLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAuYXR0cignY2xhc3MnLCAneSBheGlzLWxpbmUtY2hhcnQnKVxyXG4gICAgICAgICAgLmNhbGwoeUF4aXMpO1xyXG5cclxuXHJcbiAgICAgIC8vIHRoZSB0aW1lIGxpbmUgYXBwZW5kIHRoZSBsaW5lXHJcbiAgICAgIHRoaXMuem9vbUdyb3VwLmFwcGVuZCgnbGluZScpXHJcbiAgICAgICAgICAuYXR0cignY2xhc3MnLCAndGltZS1saW5lJylcclxuICAgICAgICAgIC5hdHRyKCdpZCcsICdsaW5lQ2hhcnRUaW1lTGluZScpXHJcbiAgICAgICAgICAuYXR0cigneDEnLCAwKVxyXG4gICAgICAgICAgLmF0dHIoJ3kxJywgMClcclxuICAgICAgICAgIC5hdHRyKCd4MicsIDApXHJcbiAgICAgICAgICAuYXR0cigneTInLCBsaW5lQ2hhcnRIZWlnaHQpO1xyXG5cclxuICAgICAgICAgIC8vIGNvbG9ycyBmb3IgdGhlIGxpbmVzXHJcbiAgICAgICAgICBsZXQgbGluZV9jb2xvcnMgPSBkMy5zY2FsZU9yZGluYWwoZDMuc2NoZW1lQ2F0ZWdvcnkxMCk7XHJcbiAgICAgICAgICBsZXQgbGluZXMgPSB7fTtcclxuICAgICAgICAgIC8vIGFkZCB0aGUgbGluZXMgdG8gdGhlIGxpbmUgY2hhcnRcclxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3dhcm1fZmVhdHVyZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICBsZXQgbWluID0gZDMubWluKGxpbmVDaGFydERhdGEsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGRbc3dhcm1fZmVhdHVyZXNbaV1dO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIGxldCBtYXggPSBkMy5tYXgobGluZUNoYXJ0RGF0YSwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gZFtzd2FybV9mZWF0dXJlc1tpXV07XHJcbiAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgIGxldCBub3JtYWxpemF0aW9uU2NhbGUgPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbbWluLCBtYXhdKS5yYW5nZShbMCwgMTAwXSk7XHJcbiAgICAgICAgICAgICAgbGV0IGxpbmUgPSBkMy5saW5lKClcclxuICAgICAgICAgICAgICAgICAgLngoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHgoZFsndGltZSddKTtcclxuICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgLnkoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHkobm9ybWFsaXphdGlvblNjYWxlKGRbc3dhcm1fZmVhdHVyZXNbaV1dKSk7XHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIGxpbmVzW3N3YXJtX2ZlYXR1cmVzW2ldXSA9IGxpbmU7XHJcbiAgICAgICAgICAgICAgLy9hcHBlbmQgdGhlIGxpbmUgdG8gdGhlIGxpbmUgY2hhcnRcclxuICAgICAgICAgICAgICB0aGlzLnpvb21Hcm91cC5hcHBlbmQoJ3BhdGgnKVxyXG4gICAgICAgICAgICAgICAgICAuZGF0YShbbGluZUNoYXJ0RGF0YV0pXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsIChzd2FybV9mZWF0dXJlc1tpXSArICdMaW5lJykpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsaW5lIGxpbmVDaGFydExpbmUnKVxyXG4gICAgICAgICAgICAgICAgICAuc3R5bGUoJ3N0cm9rZScsIGxpbmVfY29sb3JzKGkpKVxyXG4gICAgICAgICAgICAgICAgICAuYXR0cignZCcsIGxpbmUpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCduYW1lJywgc3dhcm1fZmVhdHVyZXNbaV0pO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICQoJyNsaW5lQ2hhcnRUaW1lTGluZScpLmFwcGVuZFRvKCcjbGluZUNoYXJ0Wm9vbScpO1xyXG4gICAgICAgICAgLy8gYXBwZW5kIHRoZSB6b29tIHJlY3RhbmdsZVxyXG4gICAgICAgICAgdGhpcy56b29tR3JvdXAuYXBwZW5kKCdyZWN0JylcclxuICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnem9vbScpXHJcbiAgICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgdGhpcy5saW5lQ2hhcnRXaWR0aClcclxuICAgICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgbGluZUNoYXJ0SGVpZ2h0KVxyXG4gICAgICAgICAgICAgIC5jYWxsKHpvb20pXHJcbiAgICAgICAgICAgICAgLm9uKCdjbGljaycsIGRyYWdnZWQpXHJcbiAgICAgICAgICAgICAgLmNhbGwoZDMuZHJhZygpXHJcbiAgICAgICAgICAgICAgICAgIC5vbignZHJhZycsIGRyYWdnZWQpXHJcbiAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgIC8vIGFwcGVuZCB0aGUgbGVnZW5kIGZvciB0aGUgbGluZSBjaGFydFxyXG4gICAgICAvLyB2YXJzIGZvciB0aGUgbGVnZW5kXHJcbiAgICAgIGxldCBsZWdlbmRXaWR0aCA9IDEwMDtcclxuICAgICAgbGV0IGxlZ2VuZEhlaWdodCA9IDUwO1xyXG5cclxuICAgICAgLy9zZWxlY3QgYWxsIHRoZSBsaW5lc1xyXG4gICAgICBsZXQgY2hhcnRMaW5lcyA9IGQzLnNlbGVjdEFsbCgnLmxpbmUnKTtcclxuXHJcbiAgICAgIC8vYXBwZW5kIGEgZ3JvdXAgZm9yIHRoZSBsZWdlbmRcclxuICAgICAgc3dhcm1MaW5lQ2hhcnRcclxuICAgICAgICAgIC5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgLmF0dHIoJ2lkJywgJ2xpbmVDaGFydExlZ2VuZCcpXHJcbiAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgbWFyZ2luLmJvdHRvbSArICcsJyArIChsaW5lQ2hhcnRIZWlnaHQgKyBtYXJnaW5Ub0xlZ2VuZCkgKyAnKScpXHJcbiAgICAgICAgICAuc2VsZWN0QWxsKCdyZWN0LmxlZ2VuZCcpXHJcbiAgICAgICAgICAuZGF0YShjaGFydExpbmVzLl9ncm91cHNbMF0pXHJcbiAgICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgLy9hcHBlbmQgdGhlIHdob2xlIGxlZ2VuZCBpbiBhIGVhY2ggZnVuY3Rpb25cclxuICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uKGQsIGkpIHtcclxuICAgICAgICAgICAgICBsZXQgc3BhY2luZyA9IDYwMDtcclxuICAgICAgICAgICAgICBsZXQgdGV4dFNwYWNlID0gNDA7XHJcbiAgICAgICAgICAgICAgLy8gYXBwZW5kIHRoZSByZWN0YW5nbGVzIGZvciB0aGUgbGVnZW5kXHJcbiAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmFwcGVuZCgncmVjdCcpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsZWdlbmQnKVxyXG4gICAgICAgICAgICAgICAgICAuYXR0cignd2lkdGgnLCBsZWdlbmRXaWR0aClcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGxlZ2VuZEhlaWdodClcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gnLCAoc3BhY2luZyAqIGkpICsgJ3B4JylcclxuICAgICAgICAgICAgICAgICAgLnN0eWxlKCdmaWxsJywgZC5zdHlsZS5zdHJva2UpO1xyXG5cclxuICAgICAgICAgICAgICAvLyBhcHBlbmQgdGhlIHRleHQgZm9yIHRoZSBsZWdlbmRcclxuICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuYXBwZW5kKCd0ZXh0JylcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ2lkJywgZC5hdHRyaWJ1dGVzLmlkLnZhbHVlICsgJ0xlZ2VuZFRpdGxlJylcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xpbmUtY2hhcnQtbGVnZW5kLXRleHQnKVxyXG4gICAgICAgICAgICAgICAgICAuYXR0cigneScsIHRleHRTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gnLCAoc3BhY2luZyAqIGkgKyBsZWdlbmRXaWR0aCArIDEwKSArICdweCcpXHJcbiAgICAgICAgICAgICAgICAgIC50ZXh0KGQuYXR0cmlidXRlcy5uYW1lLnZhbHVlICsgJzogJyk7XHJcblxyXG4gICAgICAgICAgICAgIC8vYXBwZW5kIHRoZSB0ZXh0IGZvciB0aGUgdmFsdWUgb2YgdGhlIGxpbmVcclxuICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuYXBwZW5kKCd0ZXh0JylcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ2lkJywgZC5hdHRyaWJ1dGVzLmlkLnZhbHVlICsgJ1ZhbHVlJylcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xpbmUtY2hhcnQtbGVnZW5kLXRleHQnKVxyXG4gICAgICAgICAgICAgICAgICAuYXR0cigneScsIHRleHRTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gnLCAoc3BhY2luZyAqIGkgKyBsZWdlbmRXaWR0aCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAvL3RoZSBuZXh0IGV4cHJlc3Npb24gZ2V0cyB0aGUgdGV4dCBsZW5ndGhcclxuICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnIycgKyBkLmF0dHJpYnV0ZXMuaWQudmFsdWUgKyAnTGVnZW5kVGl0bGUnKS5ub2RlKCkuZ2V0Q29tcHV0ZWRUZXh0TGVuZ3RoKCkgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgMTApICsgJ3B4JylcclxuICAgICAgICAgICAgICAgICAgLnRleHQoJzAuMCcpO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAvL2FwcGVuZCBhIGxlZ2VuZCBncm91cCBmb3IgdGhlIHRyZW5kIGNoYXJ0c1xyXG4gICAgICBzd2FybUxpbmVDaGFydFxyXG4gICAgICAgICAgLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAuYXR0cignaWQnLCAndHJlbmRDaGFydExlZ2VuZCcpXHJcbiAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgbWFyZ2luLmJvdHRvbSArICcsJyArIChsaW5lQ2hhcnRIZWlnaHQgKyBtYXJnaW5Ub0xlZ2VuZCkgKyAnKScpXHJcbiAgICAgICAgICAuc2VsZWN0QWxsKCdyZWN0LmxlZ2VuZCcpXHJcbiAgICAgICAgICAuZGF0YShbJzUlIC0gOTUlJywgJzI1JSAtIDc1JScsICdNZWRpYW4nXSlcclxuICAgICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgICAvL2FwcGVuZCB0aGUgd2hvbGUgbGVnZW5kIGluIGEgZWFjaCBmdW5jdGlvblxyXG4gICAgICAgICAgLmVhY2goZnVuY3Rpb24oZCwgaSkge1xyXG4gICAgICAgICAgICAgIGxldCBzcGFjaW5nID0gODAwO1xyXG4gICAgICAgICAgICAgIGxldCB0ZXh0U3BhY2UgPSA0MDtcclxuICAgICAgICAgICAgICAvLyBhcHBlbmQgdGhlIHJlY3RhbmdsZXMgZm9yIHRoZSBsZWdlbmRcclxuICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuYXBwZW5kKCdyZWN0JylcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xlZ2VuZCcpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIGxlZ2VuZFdpZHRoKVxyXG4gICAgICAgICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgbGVnZW5kSGVpZ2h0KVxyXG4gICAgICAgICAgICAgICAgICAuYXR0cigneCcsIChzcGFjaW5nICogaSkgKyAncHgnKVxyXG4gICAgICAgICAgICAgICAgICAuc3R5bGUoJ2ZpbGwnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGlmIChpID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcjNzRhOWNmJztcclxuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaSA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnIzA0NWE4ZCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnIzUyNTI1Mic7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAvLyBhcHBlbmQgdGhlIHRleHQgZm9yIHRoZSBsZWdlbmRcclxuICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuYXBwZW5kKCd0ZXh0JylcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xpbmUtY2hhcnQtbGVnZW5kLXRleHQnKVxyXG4gICAgICAgICAgICAgICAgICAuYXR0cigneScsIHRleHRTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gnLCAoc3BhY2luZyAqIGkgKyBsZWdlbmRXaWR0aCArIDEwKSArICdweCcpXHJcbiAgICAgICAgICAgICAgICAgIC50ZXh0KGQpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICQoJyN0cmVuZENoYXJ0TGVnZW5kJykuaGlkZSgpO1xyXG5cclxuICAgICAgdGhpcy5pbml0TGluZUNoYXJ0QnV0dG9ucygpXHJcblxyXG5cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEluaXQgbGluZSBjaGFydCBidXR0b24gbGlzdGVuZXJzXHJcbiAgICovXHJcbiAgaW5pdExpbmVDaGFydEJ1dHRvbnMoKSB7XHJcbiAgICAgIC8vIGFkZCB0aGUgTGluZSBjaGFydCBidXR0b25zIHRvIHRoZSBmZWF0dXJlIHBhbmVsXHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zd2FybV9mZWF0dXJlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgbGV0IGNhcGl0YWxpemVkX2ZlYXR1cmVfc3RyaW5nID0gdGhpcy5zd2FybV9mZWF0dXJlc1tpXS5zcGxpdCgnXycpLmpvaW4oJyAnKTtcclxuICAgICAgICAgIGNhcGl0YWxpemVkX2ZlYXR1cmVfc3RyaW5nID0gY2FwaXRhbGl6ZWRfZmVhdHVyZV9zdHJpbmcuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBjYXBpdGFsaXplZF9mZWF0dXJlX3N0cmluZy5zbGljZSgxKTtcclxuXHJcbiAgICAgICAgICAkKCcjbGluZS1jaGFydC1mZWF0dXJlLWNoZWNrYm94ZXMnKVxyXG4gICAgICAgICAgICAgIC5hcHBlbmQoJzx0cj48dGg+IDxkaXYgY2xhc3M9XCJwcmV0dHkgcC1zd2l0Y2ggcC1maWxsIHAtYmlnZ2VyXCI+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGNsYXNzPVwibGluZS1jaGFydC1jaGVjay1ib3hcIiBpZD1cImRyYXctJyArXHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuc3dhcm1fZmVhdHVyZXNbaV0gKyAnXCIgZGF0YT1cIiMnICsgdGhpcy5zd2FybV9mZWF0dXJlc1tpXSArICdMaW5lXCIgLz48ZGl2IGNsYXNzPVwic3RhdGVcIj48bGFiZWw+JyArXHJcbiAgICAgICAgICAgICAgICAgIGNhcGl0YWxpemVkX2ZlYXR1cmVfc3RyaW5nICsgJzwvbGFiZWw+PC9kaXY+PC9kaXY+PC90aD48L3RyPicpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAkKCcubGluZS1jaGFydC1jaGVjay1ib3gnKS5jaGFuZ2UoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBsZXQgY2hlY2tib3ggPSAkKHRoaXMpO1xyXG4gICAgICAgICAgaWYgKGNoZWNrYm94LnByb3AoJ2NoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgICQoY2hlY2tib3guYXR0cignZGF0YScpKS5zaG93KCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICQoY2hlY2tib3guYXR0cignZGF0YScpKS5oaWRlKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcblxyXG59XHJcblxyXG4vKipcclxuICogQWRkIGEgdHJlbmQgY2hhcnQgc2hvd2luZyBtZWRpYW4gYW5kIHBlcmNlbnRpbGVzXHJcbiAqIC8vIC0gd2hpY2ggZmVhdHVyZVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFRyZW5kQ2hhcnQgZXh0ZW5kcyBDaGFydHtcclxuICAgIGNvbnN0cnVjdG9yKGVsZW0sIHN3YXJtRGF0YSl7XHJcbiAgICAgIHN1cGVyKHN3YXJtRGF0YSk7XHJcbiAgICAgIHRoaXMuZWxlbSA9IGVsZW07XHJcblxyXG4gICAgICB0aGlzLnRyZW5kY2hhcnQoKTtcclxuICAgICAgLy90aGlzLmRpc2FibGVMaW5lQ2hhcnQoKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZGlzYWJsZUxpbmVDaGFydCgpIHtcclxuICAgICAgICAkKCcubGluZUNoYXJ0QnV0dG9uJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgICAgICQoJy5saW5lLWNoYXJ0LWNoZWNrLWJveCcpLmF0dHIoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcbiAgICAgICAgJCgnLmxpbmVDaGFydExpbmUnKS5hdHRyKCd2aXNpYmlsaXR5JywgJ2hpZGRlbicpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICB0cmVuZGNoYXJ0KCl7XHJcbiAgICAvLyBjaGVjayB3aGljaCBmZWF0dXJlIHRvIGRpc3BsYXkgaW4gdGhlIHRyZW5kIGNoYXJ0XHJcbiAgICBsZXQgZmVhdHVyZSA9ICcnO1xyXG4gICAgaWYgKHRoaXMuZWxlbVsnaWQnXS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdzcGVlZCcpKSB7XHJcbiAgICAgICAgZmVhdHVyZSA9ICdzcGVlZCc7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuZWxlbVsnaWQnXS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdhY2NlbGVyYXRpb24nKSkge1xyXG4gICAgICAgIGZlYXR1cmUgPSAnYWNjZWxlcmF0aW9uJztcclxuICAgIH0gZWxzZSBpZiAodGhpcy5lbGVtWydpZCddLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2Rpc3RhbmNlX2NlbnRyb2lkJykpIHtcclxuICAgICAgICBmZWF0dXJlID0gJ2Rpc3RhbmNlX2NlbnRyb2lkJztcclxuICAgIH0gZWxzZSBpZiAodGhpcy5lbGVtWydpZCddLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ21pZGxpbmVfb2Zmc2V0JykpIHtcclxuICAgICAgICBmZWF0dXJlID0gJ21pZGxpbmVfb2Zmc2V0JztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgLy8gZGF0YSBpcyBub3QgbG9hZGVkIGZ1bGx5IC0tIHJldHVyblxyXG4gICAgLy9pZiAoIWRhdGFzZXRbMF1bZmVhdHVyZV0pIHtcclxuICAgIC8vICAgIHJldHVybjtcclxuICAgIC8vfVxyXG4gICAgLy8gY2hhbmdlIHRvIHRoZSB0cmVuZCBjaGFydCBsZWdlbmRcclxuICAgICQoJyNsaW5lQ2hhcnRMZWdlbmQnKS5oaWRlKCk7XHJcbiAgICAkKCcjdHJlbmRDaGFydExlZ2VuZCcpLnNob3coKTtcclxuICAgIC8vIGNoZWNrIGlmIGFscmVhZHkgY29tcHV0ZWQgYW5kIG9ubHkgaGlkZGVuXHJcbiAgICBpZiAoISQoKCcjJyArIGZlYXR1cmUgKyAnVHJlbmRDaGFydCcpKS5sZW5ndGgpIHtcclxuICAgICAgICAvLyBnZXQgdGhlIGRhdGEgZm9yIHRoZSB0cmVuZCBjaGFydFxyXG4gICAgICAgIGxldCB0cmVuZENoYXJ0RGF0YSA9IFtdO1xyXG4gICAgICAgIGxldCBudW1fYW5pbWFscyA9IGFuaW1hbElkcy5sZW5ndGg7XHJcbiAgICAgICAgLy8gY2FsY3VsYXRlIHRoZSBwZXJjZXRpbGVzIGZvciBldmVyeSB0aW1lIHN0ZXBcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN3YXJtRGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgdG1wID0gW107XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgbnVtX2FuaW1hbHM7IGorKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGFzZXRbaSAqIG51bV9hbmltYWxzICsgal0pIHtcclxuICAgICAgICAgICAgICAgICAgICB0bXAucHVzaChkYXRhc2V0W2kgKiBudW1fYW5pbWFscyArIGpdW2ZlYXR1cmVdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0cmVuZENoYXJ0RGF0YS5wdXNoKHBlcmNlbnRpbGVzTGluZUNoYXJ0KHRtcCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL2FnZ3JlZ2F0ZSBhbmQgYXZlcmFnZSB0aGUgdHJlbmRDaGFydERhdGEgdG8gdGhpcy5saW5lQ2hhcnRXaWR0aCBkYXRhIHBvaW50c1xyXG4gICAgICAgIGlmICh0cmVuZENoYXJ0RGF0YS5sZW5ndGggPiB0aGlzLmxpbmVDaGFydFdpZHRoKSB7XHJcbiAgICAgICAgICAgIGxldCB0bXBUcmVuZENoYXJ0RGF0YSA9IFtdO1xyXG5cclxuICAgICAgICAgICAgLy8gW3BlcmMwNSxwZXJjMjUscGVyYzUwLHBlcmM3NSxwZXJjOTVdXHJcbiAgICAgICAgICAgIGxldCB0bXAgPSBbMCwgMCwgMCwgMCwgMF07XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRyZW5kQ2hhcnREYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBhZ2dyZWdhdGVcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdG1wLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG1wW2pdICs9IHRyZW5kQ2hhcnREYXRhW2ldW2pdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gZGl2aWRlXHJcbiAgICAgICAgICAgICAgICBpZiAoaSAlIHJhdGlvID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0bXAubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG1wW2pdICs9IHRtcFtqXSAvIHJhdGlvO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvL2FkZCB0byB0aGVcclxuICAgICAgICAgICAgICAgICAgICB0bXBUcmVuZENoYXJ0RGF0YS5wdXNoKHRtcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gW3BlcmMwNSxwZXJjMjUscGVyYzUwLHBlcmM3NSxwZXJjOTVdXHJcbiAgICAgICAgICAgICAgICAgICAgdG1wID0gWzAsIDAsIDAsIDAsIDBdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRyZW5kQ2hhcnREYXRhID0gdG1wVHJlbmRDaGFydERhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGdldCBtaW4gYW5kIG1heCBmb3IgdGhlIG5vcm1hbGl6YXRpb25cclxuICAgICAgICBsZXQgbWluID0gZDMubWluKHRyZW5kQ2hhcnREYXRhLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkWzBdO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGxldCBtYXggPSBkMy5tYXgodHJlbmRDaGFydERhdGEsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGRbNF07XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbGV0IG5vcm1hbGl6YXRpb25TY2FsZSA9IGQzLnNjYWxlTGluZWFyKCkuZG9tYWluKFttaW4sIG1heF0pLnJhbmdlKFswLCAxMDBdKTtcclxuXHJcbiAgICAgICAgLy8gYWRkIGEgZ3JvdXAgZm9yIHRoZSB0cmVuZCBjaGFydFxyXG4gICAgICAgIGxldCB0cmVuZENoYXJ0ID0gdGhpcy56b29tR3JvdXAuYXBwZW5kKCdnJylcclxuICAgICAgICAgICAgLmF0dHIoJ2lkJywgKGZlYXR1cmUgKyAnVHJlbmRDaGFydCcpKVxyXG4gICAgICAgICAgICAuYXR0cignY2xhc3MnLCAndHJlbmRDaGFydERhdGEnKTtcclxuICAgICAgICAvLyBhcHBlbmQgdGhlIHpvb20gcmVjdGFuZ2xlIGFnYWluIHRvIHRoZSBlbmQgb2YgdGhlIGdyb3VwXHJcbiAgICAgICAgJCgnLnpvb20nKS5hcHBlbmRUbygnI2xpbmVDaGFydFpvb20nKTtcclxuICAgICAgICAkKCcjbGluZUNoYXJ0VGltZUxpbmUnKS5hcHBlbmRUbygnI2xpbmVDaGFydFpvb20nKTtcclxuICAgICAgICAvLyB2YXIgdG8gc2F2ZSB0aGUgZnVuY3Rpb25zIGZvciB0aGUgem9vbVxyXG4gICAgICAgIHRyZW5kQ2hhcnRzWm9vbVtmZWF0dXJlXSA9IHt9O1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudHJlbmRDaGFydHNFbGVtLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIC8vIGZ1bmN0aW9ucyBmb3IgdGhlIHVwcGVyIGFuZCBpbm5lciBhcmVhcyBhbmQgdGhlIG1lZGlhblxyXG4gICAgICAgICAgICBsZXQgdGVtcDtcclxuICAgICAgICAgICAgLy8gbG93ZXIgb3V0ZXIgYXJlYSBhbmQgbG93ZXIgaW5uZXIgYXJlYVxyXG4gICAgICAgICAgICBpZiAoaSA8IDIpIHtcclxuICAgICAgICAgICAgICAgIHRlbXAgPSBkMy5hcmVhKClcclxuICAgICAgICAgICAgICAgICAgICAueChmdW5jdGlvbihkLCBqKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB4KGopO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLnkwKGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHkobm9ybWFsaXphdGlvblNjYWxlKGRbKGkgKyAxKV0pKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC55MShmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB5KG5vcm1hbGl6YXRpb25TY2FsZShkW2ldKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gbWVkaWFuIGxpbmVcclxuICAgICAgICAgICAgZWxzZSBpZiAoaSA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgdGVtcCA9IGQzLmxpbmUoKVxyXG4gICAgICAgICAgICAgICAgICAgIC54KGZ1bmN0aW9uKGQsIGopIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHgoaik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAueShmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB5KG5vcm1hbGl6YXRpb25TY2FsZShkW2ldKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gdXBwZXIgaW5uZXIgYXJlYSBhbmQgdXBwZXIgb3V0ZXIgYXJlYVxyXG4gICAgICAgICAgICBlbHNlIGlmIChpID4gMikge1xyXG4gICAgICAgICAgICAgICAgdGVtcCA9IGQzLmFyZWEoKVxyXG4gICAgICAgICAgICAgICAgICAgIC54KGZ1bmN0aW9uKGQsIGopIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHgoaik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAueTAoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geShub3JtYWxpemF0aW9uU2NhbGUoZFtpXSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLnkxKGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHkobm9ybWFsaXphdGlvblNjYWxlKGRbKGkgLSAxKV0pKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBzYXZlIHRoaXMgZm9yIHRoZSBsYXRlciB6b29tXHJcbiAgICAgICAgICAgIHRyZW5kQ2hhcnRzWm9vbVtmZWF0dXJlXVt0aGlzLnRyZW5kQ2hhcnRzRWxlbVtpXV0gPSB0ZW1wO1xyXG4gICAgICAgICAgICAvLyBhcHBlbmQgaXQgdG8gdGhlIHBhdGhcclxuICAgICAgICAgICAgdHJlbmRDaGFydC5hcHBlbmQoJ3BhdGgnKVxyXG4gICAgICAgICAgICAgICAgLmRhdGEoW3RyZW5kQ2hhcnREYXRhXSlcclxuICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsIHRoaXMudHJlbmRDaGFydHNFbGVtW2ldKVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2QnLCB0ZW1wKTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIHNob3cgdGhlIHRyZW5kIGNoYXJ0XHJcbiAgICAgICAgJCgoJyMnICsgZmVhdHVyZSArICdUcmVuZENoYXJ0JykpLnNob3coKTtcclxuICAgIH1cclxufVxyXG59XHJcblxyXG4vKipcclxuICogVXBkYXRlIHRoZSBsaW5lIGNoYXJ0IGZpZWxkcyBhbmQgdGhlIGxpbmUgY2hhcnQgdGltZSBsaW5lXHJcbiAqL1xyXG5cclxuXHJcblxyXG4vKipcclxuICogRHJhd2luZyBmdW5jdGlvbiAtIGlzIGNhbGxlZCBmb3IgZWFjaCB0aW1lc3RlcFxyXG4gKiBpbmRleFRpbWUgc2F2ZXMgdGhlIGN1cnJlbnQgdGltZVxyXG4gKi9cclxuXHJcblxyXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICBTZXR0ZXJcclxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4vKipcclxuICogU2V0IHRoZSBpbmRleCB0aW1lIHRvIGEgbmV3IHZhbHVlXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSB2YWx1ZSAtIG5ldyB0aW1lIHN0ZXBcclxuICovXHJcblxyXG5cclxuLyoqXHJcbiAqIERlY3JlYXNlIHRpbWUgYnkgMVxyXG4gKi9cclxuXHJcblxyXG4vKipcclxuICogU2V0IHRoZSB0aGUgbmV3IGFjdGl2ZSBzY2FsZSAtIGUuZy4gc3BlZWQsIGFjY2VsZXJhdGlvbiwgYmxhY2sgZXRjLlxyXG4gKiBAcGFyYW0ge1N0cmluZ30gdmFsdWUgLSBhY3RpdmUgc2NhbGUgZm9yIHRoZSBpbmRpdmlkdWFsIGFuaW1hbHNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRBY3RpdmVTY2FsZSh2YWx1ZSkge1xyXG4gICAgYWN0aXZlU2NhbGUgPSB2YWx1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldCB0aGUgbmV3IG1lZG9pZCBhbmltYWxcclxuICogQHBhcmFtIHtOdW1iZXJ9IHZhbHVlIC0gVW5pcXVldGhpcy5pZCBvZiB0aGUgYW5pbWFsXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2V0TWVkb2lkQW5pbWFsKHZhbHVlKSB7XHJcbiAgICBtZWRvaWRBbmltYWwgPSB2YWx1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENvbGxhcHNlIGZ1bmN0aW9uIC0gb25seSBzaG93IHRoZSBhY3RpdmUgbGV2ZWwgYW5kIG9uZSBzdWIgbGV2ZWxcclxuICovXHJcblxyXG4gZnVuY3Rpb24gZGlhZ29uYWxMaW5lcyhkKSB7XHJcbiAgICAgcmV0dXJuICdNJyArIGQueCArICcsJyArIGQueSArXHJcbiAgICAgICAgICdWJyArIGQucGFyZW50LnkgKyAnSCcgKyBkLnBhcmVudC54O1xyXG4gfVxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4vKipcclxuICogU2V0IHRoZSBzZWxlY3RlZCBhbmQgaGlnaGxpZ2h0ZWQgYW5pbWFsc1xyXG4gKiBAcGFyYW0ge2FycmF5fSB2YWx1ZSAtIGFycmF5IG9mIHVucWl1ZXRoaXMuaWQgb2YgdGhlIGFuaW1hbHNcclxuICovXHJcbiIsIi8qZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLWxldHMqL1xyXG4vKmdsb2JhbCB3aW5kb3csJCwgZDMsIFBvbHlCb29sLCBwYXJhbWV0ZXJzLCBTZXQqL1xyXG4vLyBpbXBvcnQgKiBhcyBzcHYgZnJvbSAnLi9zcGF0aWFsX3ZpZXcuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIG5ldHdvcmtIaWVyYXJjaHlcclxufSBmcm9tICcuL2V4cGxvcmUuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGluZGV4VGltZSxcclxuICAgIGFycmF5QW5pbWFscyxcclxuICAgIHNldEFjdGl2ZUFuaW1hbHMsXHJcbiAgICBkZWNJbmRleFRpbWUsXHJcbiAgICBEcmF3ZXJcclxufSBmcm9tICcuL3NwYXRpYWxfdmlldy9zcGF0aWFsX3ZpZXcuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIHNob3dOZXR3b3JrSGllcmFyY2h5LFxyXG4gICAgbmV0d29ya0NvbG9yLFxyXG4gICAgbmV0d29ya0NvbG9yU2NhbGUsXHJcbiAgICBuZXR3b3JrQXV0byxcclxuICAgIHNldE5ldHdvckxpbWl0LFxyXG4gICAgbmV0d29ya0xpbWl0LFxyXG59IGZyb20gJy4vbmV0d29yay5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgc3RhbmRhcmREZXZpYXRpb25cclxufSBmcm9tICcuL2hlbHBlcnMuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIHNldFRpbWVTbGlkZXIsXHJcbiAgICBpbml0VG9vbHRpcCxcclxuICAgIHRvb2x0aXBGdW5jdGlvbixcclxuICAgIGluaXRTbGlkZXJzLFxyXG4gICAgdG9vbHRpcFxyXG59IGZyb20gJy4vc3BhdGlhbF92aWV3L2ludGVyYWN0aW9uLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICAvL2xpbmVDaGFydCxcclxuICAgIHVwZGF0ZUxpbmVDaGFydCxcclxuICAgIExpbmVDaGFydFxyXG59IGZyb20gJy4vbGluZV9jaGFydC5qcyc7XHJcblxyXG5sZXQgem9vbUdyb3VwOyAvLyB6b29tIGdyb3VwIGZvciB0aGUgc3BlY2lmaWMgZGVuZHJvZ3JhbVxyXG5sZXQgdHJlZW1hcDtcclxubGV0IHRvb2x0aXBEaXY7XHJcbmxldCBzcGF0aWFsVmlldzsgLy8gZ2V0IHRoZSBzcGF0aWFsIHZpZXcgc3ZnIGZyb20gdGhlIG1haW4gdmlzXHJcbmxldCBzdmdMZWdlbmQ7XHJcbmxldCBoaWVyYXJjaHlMZXZlbHMgPSB7fTtcclxubGV0IHNldE9wZXJhdGlvbiA9ICd1bmlvbic7XHJcbmxldCBpZDsgLy8gbmVlZGVkIGZvciB0aGUgY29sbGFwc2UgZnVuY3Rpb25cclxuLy9TdGF0aWMgY29sb3Igc2NhbGUgZm9yIHRoZSBkZW5kcm9ncmFtIHZhcmlhY25lIGNvbG9yaW5nXHJcbmxldCBzdGFuZGFyZERldmlhdGlvbkNvbG9yU2NhbGUgPSBkMy5zY2FsZVRocmVzaG9sZCgpXHJcbiAgICAuZG9tYWluKFxyXG4gICAgICAgIFswLCAuMSwgLjIsIC4zLCAuNCwgLjUsIC42LCAuNywgLjgsIC45LCAxXVxyXG4gICAgKVxyXG4gICAgLnJhbmdlKFsnI2Y3ZmJmZicsICcjZGVlYmY3JywgJyNjNmRiZWYnLCAnIzllY2FlMScsICcjNmJhZWQ2JywgJyM0MjkyYzYnLCAnIzIxNzFiNScsICcjMDg1MTljJywgJyMwODMwNmInXSk7XHJcblxyXG5leHBvcnQgY29uc3QgbWF4TnVtYmVySGllcmFyY2hpZXMgPSA0O1xyXG5leHBvcnQgbGV0IG5ldHdvcmtIaWVyYXJjaHlJZHMgPSBbXTtcclxuZXhwb3J0IGxldCBoaWVyYXJjaHlDb2xvcnMgPSB7fTtcclxuZXhwb3J0IGxldCBoaWVyYXJjaHlHcm91cFN0ZGV2ID0ge307XHJcbi8vIFRPRE8gYWRkIG1vcmUgY29sb3JzXHJcbmV4cG9ydCBsZXQgY29sb3JzID0gWycjN2ZjOTdmJywgJyMzODZjYjAnLCAnI2U3Mjk4YScsICcjZmY5OTAwJ107XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBEZW5kcm9ncmFtIGV4dGVuZHMgRHJhd2Vye1xyXG4gIGNvbnN0cnVjdG9yKCl7XHJcbiAgICBzdXBlcigpO1xyXG5cclxuICAgIHRoaXMuaW5pdERlbmRyb2dyYW0oKVxyXG4gIH1cclxuXHJcbiAgaW5pdERlbmRyb2dyYW0oKSB7XHJcbiAgICBjb25zb2xlLmxvZygnSU5JVEVEJyk7XHJcbiAgICAgIC8vIGNvbnN0YW5jdCBmYWN0b3JzIGZvciB0aGUgZGVuZGdyb2dyYW1cclxuICAgICAgbGV0IG1hcmdpbiA9IDIwLFxyXG4gICAgICAgICAgd2lkdGggPSA1MDAwLFxyXG4gICAgICAgICAgaGVpZ2h0ID0gNTAwMDtcclxuXHJcbiAgICAgIC8vIHpvb20gZnVuY3Rpb24gZm9yIHRoZSBkZW5kcm9ncmFtXHJcbiAgICAgIGxldCB6b29tID0gZDMuem9vbSgpXHJcbiAgICAgICAgICAuc2NhbGVFeHRlbnQoWzEsIDEwXSlcclxuICAgICAgICAgIC5vbignem9vbScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIC8vY29uc3RyYWluZWQgem9vbWluZ1xyXG4gICAgICAgICAgICAgIGQzLmV2ZW50LnRyYW5zZm9ybS54ID0gTWF0aC5taW4oMCwgd2lkdGggKiAoZDMuZXZlbnQudHJhbnNmb3JtLmsgLSAxKSxcclxuICAgICAgICAgICAgICAgICAgTWF0aC5tYXgod2lkdGggKiAoMSAtIGQzLmV2ZW50LnRyYW5zZm9ybS5rKSwgZDMuZXZlbnQudHJhbnNmb3JtLngpKTtcclxuXHJcbiAgICAgICAgICAgICAgZDMuZXZlbnQudHJhbnNmb3JtLnkgPSBNYXRoLm1pbigwLCBoZWlnaHQgKiAoZDMuZXZlbnQudHJhbnNmb3JtLmsgLSAxKSxcclxuICAgICAgICAgICAgICAgICAgTWF0aC5tYXgoaGVpZ2h0ICogKDEgLSBkMy5ldmVudC50cmFuc2Zvcm0uayksIGQzLmV2ZW50LnRyYW5zZm9ybS55KSk7XHJcblxyXG4gICAgICAgICAgICAgIC8vIHRyYW5zbGF0ZSBhbmQgc2NhbGVcclxuICAgICAgICAgICAgICB6b29tR3JvdXAuYXR0cigndHJhbnNmb3JtJywgZDMuZXZlbnQudHJhbnNmb3JtKTtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gc3ZnIGNvbnRhaW5lciBmb3IgdGhlIGRlbmRyb2dyYW1cclxuICAgICAgbGV0IHN2ZyA9IGQzLnNlbGVjdCgnI2RlbmRyb2dyYW0tcGFuZWwnKVxyXG4gICAgICAgICAgLmNsYXNzZWQoJ3N2Zy1kZW5kcm9ncmFtLWNvbnRhaW5lcicsIHRydWUpXHJcbiAgICAgICAgICAuYXBwZW5kKCdzdmcnKVxyXG4gICAgICAgICAgLmF0dHIoJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLCAneE1pbllNaW4gbWVldCcpXHJcbiAgICAgICAgICAuYXR0cigndmlld0JveCcsICcwIDAgJyArIHdpZHRoICsgJyAnICsgaGVpZ2h0KVxyXG4gICAgICAgICAgLy8gYWRkIHRoZSBjbGFzcyBzdmctY29udGVudFxyXG4gICAgICAgICAgLmNsYXNzZWQoJ3N2Zy1jb250ZW50LWRlbmRyb2dyYW0nLCB0cnVlKVxyXG4gICAgICAgICAgLmNhbGwoem9vbSk7XHJcblxyXG4gICAgICBpbml0RGVuZHJvZ3JhbUxlZ2VuZCgpO1xyXG5cclxuICAgICAgLy8gYXBwZW5kIHRoZSB6b29tIGdyb3VwIHRvIHRoZSBzdmdcclxuICAgICAgem9vbUdyb3VwID0gc3ZnLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgbWFyZ2luICsgJywnICsgbWFyZ2luICsgJyknKVxyXG4gICAgICAgICAgLmFwcGVuZCgnc3ZnOmcnKTtcclxuXHJcbiAgICAgIC8vIGQzIHRyZWVcclxuICAgICAgdHJlZW1hcCA9IGQzLnRyZWUoKSAvL2QzLmNsdXN0ZXIoKVxyXG4gICAgICAgICAgLnNpemUoWyhoZWlnaHQgLSAxMCAqIG1hcmdpbiksICh3aWR0aCAtIDEwICogbWFyZ2luKV0pO1xyXG5cclxuICAgICAgLy8gc2V0IHRoZSBzcGF0aWFsIHZpZXcgLSBuZWVkZWQgdG8gYWRkIHRoZSBjbHVzdGVyaW5nIHRvIHRoZSBzcGF0aWFsIHZpZXcgd2luZG93XHJcbiAgICAgIHRoaXMuc3BhdGlhbFZpZXcgPSBkMy5zZWxlY3QoJy50YW5rJyk7XHJcblxyXG4gICAgICAvLyBpbml0IGRlbmRyb2dyYW0gc2xpZGVyXHJcbiAgICAgIC8vIGluaXRpYWxpemUgdGhlIE5ldHdvcmsgc2xpZGVyXHJcbiAgICAgICQoJyNkZW5kcm9ncmFtLXBhbmVsLWxldmVsLXNsaWRlcicpXHJcbiAgICAgICAgICAuc2xpZGVyKHtcclxuICAgICAgICAgICAgICByYW5nZTogJ21heCcsXHJcbiAgICAgICAgICAgICAgbWluOiAyLFxyXG4gICAgICAgICAgICAgIG1heDogMixcclxuICAgICAgICAgICAgICBzdGVwOiAxLFxyXG4gICAgICAgICAgICAgIHZhbHVlOiB0aGlzLmhpZXJhcmNoeUxldmVsc1snaDAnXSxcclxuICAgICAgICAgICAgICBzbGlkZTogZnVuY3Rpb24oZXZlbnQsIHVpKSB7XHJcbiAgICAgICAgICAgICAgICAgIGxldCBpZCA9ICQoJy5zaG93LWRlbmRyb2dyYW0uYnRuLXByaW1hcnknKS5hdHRyKCdkYXRhJyk7XHJcbiAgICAgICAgICAgICAgICAgIHNldEhpZXJhcmNoeUxldmVsKGlkLCB1aS52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgIHVwZGF0ZURlbmRyb2dyYW0oKTtcclxuICAgICAgICAgICAgICAgICAgLy8gaWYgbm8gYW5pbWF0aW9uIGlzIGFjdGl2ZSBkcmF3IHRoZSBuZXcgY2x1c3RlcmluZyBhbmQgZGVuZHJvZ3JhbVxyXG4gICAgICAgICAgICAgICAgICAvLyBkcmF3RGVuZHJvZ3JhbSgpO1xyXG4gICAgICAgICAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgLy9nbyBiYWNrIG9uZSBzZWNvbmQgYW5kIGRyYXcgdGhlIG5leHQgZnJhbWVcclxuICAgICAgICAgICAgICAgICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgIC8vdGhpcy5kcmF3RGVuZHJvZ3JhbSgpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBpbml0IHRoZSB0b29sdGlwIGZvciB0aGUgZGVuZHJvZ3JhbVxyXG4gICAgICB0b29sdGlwRGl2ID0gZDMuc2VsZWN0KCcjZGVuZHJvZ3JhbS10b29sdGlwJylcclxuICAgICAgICAgIC5zdHlsZSgnbGVmdCcsIDAgKyAncHgnKVxyXG4gICAgICAgICAgLnN0eWxlKCd0b3AnLCAwICsgJ3B4JylcclxuICAgICAgICAgIC5vbignbW91c2VvdmVyJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgdG9vbHRpcERpdlxyXG4gICAgICAgICAgICAgICAgICAuc3R5bGUoJ29wYWNpdHknLCAxKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAvLyBpbml0IHRoZSBoaWVyYXJjaHkgbGVnZW5kXHJcbiAgICAgIGxldCBsZWdlbmRXaWR0aCA9IG1heE51bWJlckhpZXJhcmNoaWVzICogMTAwO1xyXG4gICAgICBsZXQgbGVnZW5kSGVpZ2h0ID0gNjA7XHJcblxyXG4gICAgICBzdmdMZWdlbmQgPSBkMy5zZWxlY3QoJyNoaWVyYXJjaHktbGVnZW5kLWRpdicpXHJcbiAgICAgICAgICAuYXBwZW5kKCdzdmcnKVxyXG4gICAgICAgICAgLmF0dHIoJ2lkJywgJ2hpZXJhcmNoeS1sZWdlbmQnKVxyXG4gICAgICAgICAgLmF0dHIoJ3dpZHRoJywgbGVnZW5kV2lkdGgpXHJcbiAgICAgICAgICAuYXR0cignaGVpZ2h0JywgbGVnZW5kSGVpZ2h0KTtcclxuXHJcbiAgICAgIC8vIGFkZCBwYXR0ZXJuIGZvciBzdHJpcGVkIGJhY2tncm91bmQgb2YgaW50ZXJzZWN0aW9ucyBldGMuXHJcbiAgICAgIHRoaXMuc3BhdGlhbFZpZXcuYXBwZW5kKCdkZWZzJylcclxuICAgICAgICAgIC5hcHBlbmQoJ3N2ZzpwYXR0ZXJuJylcclxuICAgICAgICAgIC5hdHRyKCdpZCcsICdzdHJpcGVkJylcclxuICAgICAgICAgIC5hdHRyKCdwYXR0ZXJuVW5pdHMnLCAndXNlclNwYWNlT25Vc2UnKVxyXG4gICAgICAgICAgLmF0dHIoJ3dpZHRoJywgJzIwJylcclxuICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCAnNScpXHJcbiAgICAgICAgICAuYXR0cigncGF0dGVyblRyYW5zZm9ybScsICdyb3RhdGUoNjApJylcclxuICAgICAgICAgIC5hcHBlbmQoJ3JlY3QnKVxyXG4gICAgICAgICAgLmF0dHIoJ3dpZHRoJywgNSlcclxuICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCAxMClcclxuICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKDAsMCknKVxyXG4gICAgICAgICAgLnN0eWxlKCdmaWxsJywgJyM2NzAwMGQnKTtcclxuXHJcbiAgfTtcclxuXHJcbn1cclxuXHJcblxyXG4vKipcclxuICogSW5pdGlhbGl6ZSB0aGUgZGVuZHJvZ3JhbVxyXG4gKi9cclxuXHJcblxyXG4vKipcclxuICogRHJhdyB0aGUgZGVuZGdyb2dyYW0gZm9yIG9uZSBzdGVwXHJcbiAqIEZ1cnRoZXIgY2FsbHMgdGhlIGRyYXdIaWVyYXJjaHkgZnVuY3Rpb25cclxuICovXHJcblxyXG5cclxuXHJcbi8qKlxyXG4gKiBEcmF3IHRoZSBhbGwgaGllcmFyY2hpZXMgaW4gdGhlIHNwYXRpYWwgdmlld1xyXG4gKiBhZGQgYSBncm91cCB3aXRoIHRoZSBpZHMgb2YgdGhlIGFuaW1hbHMgaW4gaXQgdG8gdGhlIHZpZXdcclxuICogd2l0aCBwYXRoIGNoaWxkIGVsZW1lbnRzXHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBVbmlvbiBtdWx0aXBsZSBwb2x5Z29ucyB0b2dldGhlciAtIG5lZWRlZCBvciBlbHNlIHRoZXJlIHdpbGwgYmUgaG9sZXMgaW4gdGhlIGludGVyc2VjdGlvbnNcclxuICogQHBhcmFtIHthcnJheX0gcG9seWdvbnMgLSBhcnJheSBvZiBhcnJheSBvZiBwb2ludHNcclxuICovXHJcbi8vIGZ1bmN0aW9uIHVuaW9uUG9seWdvbnMocG9seWdvbnMpIHtcclxuLy8gICAgIC8vIGNvbnNvbGUubG9nKHBvbHlnb25zKTtcclxuLy8gICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9seWdvbnMubGVuZ3RoOyBpKyspIHtcclxuLy8gICAgICAgICBwb2x5Z29uc1tpXSA9IHtcclxuLy8gICAgICAgICAgICAgcmVnaW9uczogW3BvbHlnb25zW2ldXSxcclxuLy8gICAgICAgICAgICAgaW52ZXJ0ZWQ6IGZhbHNlIC8vIGlzIHRoaXMgcG9seWdvbiBpbnZlcnRlZD9cclxuLy8gICAgICAgICB9O1xyXG4vLyAgICAgfVxyXG4vLyAgICAgLy8gdW5pb24gYSBsaXN0IG9mIHBvbHlnb25zIHRvZ2V0aGVyXHJcbi8vICAgICBsZXQgc2VnbWVudHMgPSBQb2x5Qm9vbC5zZWdtZW50cyhwb2x5Z29uc1swXSk7XHJcbi8vICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHBvbHlnb25zLmxlbmd0aDsgaSsrKSB7XHJcbi8vICAgICAgICAgbGV0IHNlZzIgPSBQb2x5Qm9vbC5zZWdtZW50cyhwb2x5Z29uc1tpXSk7XHJcbi8vICAgICAgICAgbGV0IGNvbWIgPSBQb2x5Qm9vbC5jb21iaW5lKHNlZ21lbnRzLCBzZWcyKTtcclxuLy8gICAgICAgICBzZWdtZW50cyA9IFBvbHlCb29sLnNlbGVjdFVuaW9uKGNvbWIpO1xyXG4vLyAgICAgfVxyXG4vLyAgICAgcmV0dXJuIFBvbHlCb29sLnBvbHlnb24oc2VnbWVudHMpWydyZWdpb25zJ107XHJcbi8vIH1cclxuXHJcbi8qKlxyXG4gKiBFZGdlIGRyYXdpbmcgbWV0aG9kIG9mIHRoZSBkZW5kcm9ncmFtXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSBkIC0gVHJlZW1hcCBlbGVtZW50XHJcbiAqL1xyXG5mdW5jdGlvbiBkaWFnb25hbExpbmVzKGQpIHtcclxuICAgIHJldHVybiAnTScgKyBkLnggKyAnLCcgKyBkLnkgK1xyXG4gICAgICAgICdWJyArIGQucGFyZW50LnkgKyAnSCcgKyBkLnBhcmVudC54O1xyXG59XHJcblxyXG4vKipcclxuICogT24gY2xpY2sgZnVuY3Rpb24gLSBoaWdobGlnaHQgdGhlIGVsZW1lbnRzIGluIHRoZSBzcGF0aWFsIHZpZXdcclxuICogQHBhcmFtIHtvYmplY3R9IGQgLSBUcmVlbWFwIGVsZW1lbnRcclxuICovXHJcbmZ1bmN0aW9uIGNsaWNrKGQpIHtcclxuICAgIHNldEFjdGl2ZUFuaW1hbHMoZFsnZGF0YSddWyduYW1lJ10pO1xyXG4gICAgLy8gaWYgbm8gYW5pbWF0aW9uIGlzIGFjdGl2ZSBkcmF3IHRoZSBkcmF3IG9uZSBzdGVwXHJcbiAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgIGRlY0luZGV4VGltZSgpO1xyXG4gICAgICAgIGRyYXcoKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBhbGwgdGhlIGNsdXN0ZXJpbmcgb2YgYSBzcGVjaWZpYyBsZXZlbCBpbiB0aGUgZGVuZHJvZ3JhbSB0cmVlXHJcbiAqIEZvciBpbnN0YW5jZSBhbGwgY2x1c3RlcnMgZnJvbSBsZXZlbCA1XHJcbiAqIEBwYXJhbSB7b2JqZWN0fSByb290IC0gUm9vdCBvZiB0aGUgdHJlZW1hcFxyXG4gKiBAcGFyYW0ge251bWJlcn0gaGllYXJjaHkgLSBOdW1iZXIgb2YgaGllcmFyY2h5IGZyb20gWzAtM11cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRIaWVyYXJjaHlMZXZlbChyb290LCBoaWVyYXJjaHkpIHtcclxuICAgIGxldCByZXN1bHQgPSBbXTtcclxuICAgIGxldCBsZXZlbCA9IGhpZXJhcmNoeUxldmVsc1snaCcgKyBoaWVyYXJjaHldO1xyXG5cclxuICAgIC8vIHNlY29uZCBsZXZlbCBvZiB0aGUgYXJyYXlcclxuICAgIGxldCB0bXBfbm9kZXMgPSByb290WydjaGlsZHJlbiddO1xyXG4gICAgLy8gaXRlcmF0ZSB0aHJvdWdoIHRoZSB0cmVlXHJcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IHJvb3RbJ2hlaWdodCddOyBpKyspIHtcclxuICAgICAgICAvLyBjaGVjayBpZiB3ZSBhcmUgYXQgdGhlIHNlYXJjaGVkIGxldmVsXHJcbiAgICAgICAgaWYgKHRtcF9ub2Rlc1swXSAmJiB0bXBfbm9kZXNbMF1bJ2RlcHRoJ10gPT09IGxldmVsKSB7XHJcbiAgICAgICAgICAgIC8vIGFkZCBlYWNoIGNsdXN0ZXIgdG8gdGhlIHJlc3VsdCBzZXRcclxuICAgICAgICAgICAgdG1wX25vZGVzLmZvckVhY2goZnVuY3Rpb24obm9kZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBub2RlWydkYXRhJ11bJ25hbWUnXSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChub2RlWydkYXRhJ11bJ25hbWUnXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gZ2V0IGFsbCBjaGlsZHJlbiBvZiBhIHNwZWNpZmljIGxldmVsIGluIHRoZSB0cmVlXHJcbiAgICAgICAgbGV0IHRtcCA9IFtdO1xyXG4gICAgICAgIHRtcF9ub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uKG5vZGUpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBub2RlWydjaGlsZHJlbiddICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgdG1wID0gdG1wLmNvbmNhdChub2RlWydjaGlsZHJlbiddKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRtcF9ub2RlcyA9IHRtcDtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXR1cm4gdGhlIHNwZWNpZmljIHZlcnRpY2VzIG9mIGEgY2x1c3RlcmluZyBpbiB0aGUgc3BhdGlhbCB2aWV3XHJcbiAqIFJldHVybiBhbiBhcnJheSBvZiBwb2ludHMgW1t4LHldW3gseV0uLi5dXHJcbiAqIEBwYXJhbSB7QXJyYXl9IGhpZXJhcmNoaWVzIC0gQXJyYXkgb2YgYXJyYXlzIHdpdGggZWFjaCBhcnJheSBjb250YWlucyBhbGwgdGhlIGlkcyBmb3IgYSBzcGVjaWZpYyBjbHVzdGVyaW5nXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRIaWVyYXJjaHlWZXJ0aWNlcyhoaWVyYXJjaGllcykge1xyXG4gICAgbGV0IHJlc3VsdCA9IFtdOyAvLyByZXN1bHQgc2V0XHJcbiAgICBoaWVyYXJjaGllcy5mb3JFYWNoKGZ1bmN0aW9uKGNsdXN0ZXIpIHtcclxuICAgICAgICBsZXQgdmVydGljZXMgPSBbXTsgLy8gdmVydGljZXMgb2YgdGhlIGNsdXN0ZXJzIGluIHRoZSBzcGF0aWFsIHZpZXdcclxuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGNsdXN0ZXIubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgbGV0IGdyb3VwTWVtYmVyID0gYXJyYXlBbmltYWxzLmZpbmQoZCA9PiBkWydhJ10gPT09IGNsdXN0ZXJbal0pO1xyXG4gICAgICAgICAgICBpZiAoZ3JvdXBNZW1iZXIpIHtcclxuICAgICAgICAgICAgICAgIHZlcnRpY2VzLnB1c2goW2dyb3VwTWVtYmVyWydwJ11bMF0sIC1ncm91cE1lbWJlclsncCddWzFdXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQW5kcmV3IG1vbnRvbmUgY2hhaW4gYWxnb3JpdGhtIHJldXRybnMgZm9yIHBvaW50cyBmZXdlciB0aGFuIDMgbnVsbFxyXG4gICAgICAgIGlmICh2ZXJ0aWNlcy5sZW5ndGggPj0gMykge1xyXG4gICAgICAgICAgICByZXN1bHQucHVzaChkMy5wb2x5Z29uSHVsbCh2ZXJ0aWNlcykpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldCB0aGUgYWN0aXZlIGxldmVsIGZvciBhIHNwZWNpZmljIGRlbmRyb2dyYW1cclxuICogQHBhcmFtIHtudW1iZXJ9IGhpZXJhcmNoeSAtIEhpZXJhcmNoeSBjYW4gYmUgZnJvbSBbMC0zXVxyXG4gKiBAcGFyYW0ge251bWJlcn0gbGV2ZWwgLSBOZXcgYWN0aXZlIGxldmVsXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2V0SGllcmFyY2h5TGV2ZWwoaGllcmFyY2h5LCBsZXZlbCkge1xyXG4gICAgLy8gVE9ETyBjYXRjaCBjYXNlcyA8IDAgYW5kIGJpZ2dlciB0aGFuIG92ZXJhbGwgaGVpZ2h0XHJcbiAgICBoaWVyYXJjaHlMZXZlbHNbJ2gnICsgaGllcmFyY2h5XSA9IGxldmVsO1xyXG59XHJcblxyXG4vKipcclxuICogUmVtb3ZlIHRoZSBlbnRyeSBmb3IgdGhlIGhpZXJhcmNoIGxldmVsXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBoaWVyYXJjaHkgLSBIaWVyYXJjaHlcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVIaWVyYXJjaHlMZXZlbChoaWVyYXJjaHkpIHtcclxuICAgIC8vIFRPRE8gY2F0Y2ggY2FzZXMgPCAwIGFuZCBiaWdnZXIgdGhhbiBvdmVyYWxsIGhlaWdodFxyXG4gICAgZGVsZXRlIGhpZXJhcmNoeUxldmVsc1snaCcgKyBoaWVyYXJjaHldO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IHRoZSBhY3RpdmUgY29sb3IgZm9yIGEgc3BlY2lmaWMgZGVuZHJvZ3JhbVxyXG4gKiBAcGFyYW0ge251bWJlcn0gaGllcmFyY2h5IC0gSGllcmFyY2h5IGNhbiBiZSBmcm9tIFswLTNdXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2V0SGllcmFyY2h5Q29sb3IoaGllcmFyY2h5KSB7XHJcbiAgICAvLyBjaGVjayBpZiB0aGUgaGllcmFyY2h5IGlzIGFscmVhZHkgc2hvd24gYXMgbmV0d29ya1xyXG4gICAgLy8gdGFrZSB0aGUgc2FtZSBjb2xvclxyXG4gICAgZm9yIChsZXQga2V5IGluIG5ldHdvcmtDb2xvcikge1xyXG4gICAgICAgIGlmIChrZXkgPT09ICgnaCcgKyBoaWVyYXJjaHkpKSB7XHJcbiAgICAgICAgICAgIGhpZXJhcmNoeUNvbG9yc1snaCcgKyBoaWVyYXJjaHldID0gbmV0d29ya0NvbG9yW2tleV07XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBoaWVyYXJjaHkgaXMgbm90IHZpc3VhbGl6ZWQgYWxyZWFkeSBhcyBhIG5ldHdvcmtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29sb3JzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IHRtcF9ib29sZWFuID0gdHJ1ZTtcclxuICAgICAgICBmb3IgKGxldCBrZXkgaW4gaGllcmFyY2h5Q29sb3JzKSB7XHJcbiAgICAgICAgICAgIGlmIChoaWVyYXJjaHlDb2xvcnMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGhpZXJhcmNoeUNvbG9yc1trZXldID09PSBjb2xvcnNbaV0pIHtcclxuICAgICAgICAgICAgICAgICAgICB0bXBfYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0bXBfYm9vbGVhbikge1xyXG4gICAgICAgICAgICAvLyBjaGVjayBpZiBhIG5ldHdvcmsgaXMgZGVwaWN0ZWRcclxuICAgICAgICAgICAgLy8gaWYgc28gc2tpcCB0aGUgY29sb3Igd2hpY2ggaXMgYWxyZWFkeSBjaG9vc2VuIGZvciB0aGUgbmV0d29ya1xyXG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMobmV0d29ya0NvbG9yKS5sZW5ndGggIT09IDApIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiBuZXR3b3JrQ29sb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmV0d29ya0NvbG9yW2tleV0gIT09IGNvbG9yc1tpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoaWVyYXJjaHlDb2xvcnNbJ2gnICsgaGllcmFyY2h5XSA9IGNvbG9yc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGhpZXJhcmNoeUNvbG9yc1snaCcgKyBoaWVyYXJjaHldID0gY29sb3JzW2ldO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFJlbW92ZSB0aGUgY29sb3IgZm9yIHRoZSBoaWVyYXJjaCBsZXZlbFxyXG4gKiBAcGFyYW0ge251bWJlcn0gaGllcmFyY2h5IC0gSGllcmFyY2h5XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlSGllcmFyY2h5Q29sb3IoaGllcmFyY2h5KSB7XHJcbiAgICBkZWxldGUgaGllcmFyY2h5Q29sb3JzWydoJyArIGhpZXJhcmNoeV07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBZGQgdGhlIGhpZXJhcmNoeSBidXR0b24gdG8gdGhlIGRpdlxyXG4gKiBAcGFyYW0ge251bWJlcn0gaWQgLSBIaWVyYXJjaHkgb2YgdGhlIGlkXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIC0gTmV3IGFjdGl2ZSBsZXZlbFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGFkZEhpZXJhcmNoeUJ1dHRvbihpZCwgbmFtZSkge1xyXG4gICAgaWYgKCQoJy5zaG93LWRlbmRyb2dyYW0nKS5sZW5ndGggPCBtYXhOdW1iZXJIaWVyYXJjaGllcykge1xyXG4gICAgICAgICQoJyNkZW5kcm9ncmFtLWJ1dHRvbnMtZGl2JykuYXBwZW5kKCc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBpZD1cInNob3ctZGVuZHJvZ3JhbS0nICsgaWQgKyAnXCIgZGF0YT0nICsgaWQgKyAnIG5hbWU9JyArIG5hbWUgK1xyXG4gICAgICAgICAgICAnIGNsYXNzPVwic2hvdy1kZW5kcm9ncmFtIGJ0biBidG4tYmxvY2tcIiBkYXRhLXRvZ2dsZT1cImJ1dHRvblwiIGFyaWEtcHJlc3NlZD1cImZhbHNlXCIgYXV0b2NvbXBsZXRlPVwib2ZmXCI+JyArXHJcbiAgICAgICAgICAgICcgPHNwYW4gY2xhc3M9XCJidG4tbGFiZWxcIiBpZD1cImJ0bi1sZWZ0XCI+IDxpIGNsYXNzPVwibWRpIG1kaS1hcnJvdy1jb2xsYXBzZS1sZWZ0XCI+PC9pPiZuYnNwJm5ic3AgU2hvdyAnICsgbmFtZSArICc8L3NwYW4+JyArXHJcbiAgICAgICAgICAgICc8c3BhbiBjbGFzcz1cImJ0bi1sYWJlbFwiIGlkPVwiYnRuLXJpZ2h0XCI+IDxpIGNsYXNzPVwibWRpIG1kaS1hcnJvdy1jb2xsYXBzZS1yaWdodFwiPjwvaT4mbmJzcCZuYnNwIEhpZGUgJyArIG5hbWUgKyAnIDwvc3Bhbj48L2J1dHRvbj4gPGJyPidcclxuICAgICAgICApO1xyXG4gICAgICAgICQoJyNzaG93LWRlbmRyb2dyYW0tJyArIGlkKS5maW5kKCcjYnRuLXJpZ2h0JykuaGlkZSgpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogUmVtb3ZlIGEgc3BlY2lmaWMgaGllcmFyY2h5IGJ1dHRvbiB0byB0aGUgZGl2XHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBpZCAtIEhpZXJhcmNoeSBvZiB0aGUgaWRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVIaWVyYXJjaHlCdXR0b24oaWQpIHtcclxuICAgIC8vIHJlbW92ZSB0aGUgZm9sbG93aW5nIGxpbmUgYnJlYWsgYW5kIGVsZW1lbnRcclxuICAgICQoJyNzaG93LWRlbmRyb2dyYW0tJyArIGlkKS5uZXh0KCkucmVtb3ZlKCk7XHJcbiAgICAkKCcjc2hvdy1kZW5kcm9ncmFtLScgKyBpZCkucmVtb3ZlKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBVcGRhdGUgc2xpZGVyIGFuZCB0ZXh0IGluIHRoZSBkZW5kcm9ncmFtIHBhbmVsXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlRGVuZHJvZ3JhbSgpIHtcclxuICAgIC8vIGdldCB0aGUgaW1wb3J0YW50IGluZm9cclxuICAgIGxldCBpZCA9ICQoJy5zaG93LWRlbmRyb2dyYW0uYnRuLXByaW1hcnknKS5hdHRyKCdkYXRhJyk7XHJcbiAgICBsZXQgbmFtZSA9ICQoJy5zaG93LWRlbmRyb2dyYW0uYnRuLXByaW1hcnknKS5hdHRyKCduYW1lJyk7XHJcbiAgICAvLyBzZXQgdGhlIG5hbWUgb2YgdGhlIGRpc3BsYXllZCBoaWVyYXJjaHlcclxuICAgICQoJyNkZW5kcm9ncmFtLXBhbmVsLW5hbWUnKS50ZXh0KG5hbWUpO1xyXG5cclxuICAgIC8vIHNldCBzbGlkZXIgYW5kICB0ZXh0IHZhbHVlXHJcbiAgICAkKCcjZGVuZHJvZ3JhbS1wYW5lbC1sZXZlbC1zbGlkZXInKS52YWwoaGllcmFyY2h5TGV2ZWxzWydoJyArIGlkXSk7XHJcbiAgICAkKCcjZGVuZHJvZ3JhbS1wYW5lbC1sZXZlbC10ZXh0JykudGV4dChoaWVyYXJjaHlMZXZlbHNbJ2gnICsgaWRdKTtcclxuXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBVcGRhdGUgaGllcmFyY2h5IGxlZ2VuZFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNoYW5nZUhpZXJhcmNoeUxlZ2VuZCgpIHtcclxuICAgIGxldCBsZWdlbmQ7IC8vIHRoZSBjb2xvciBsZWdlbmRcclxuICAgIGxldCBsZWdlbmRUZXh0OyAvLyBjb2xvciBsZWdlbmQgdGV4dFxyXG4gICAgLy8gdmFycyBmb3IgdGhlIGxlZ2VuZFxyXG4gICAgbGV0IGxlZ2VuZFN3YXRjaFdpZHRoID0gNTA7XHJcbiAgICBsZXQgbGVnZW5kU3dhdGNoSGVpZ2h0ID0gMjA7XHJcblxyXG4gICAgLy8gU2hvdyBvciBoaWRlIHRoZSBzdmcgZWxlbWVudFxyXG4gICAgaWYgKE9iamVjdC5rZXlzKGhpZXJhcmNoeUNvbG9ycykubGVuZ3RoICE9PSAwIHx8IE9iamVjdC5rZXlzKG5ldHdvcmtDb2xvcikubGVuZ3RoICE9PSAwKSB7XHJcbiAgICAgICAgJCgnI2hpZXJhcmNoeS1sZWdlbmQtZGl2Jykuc2hvdygpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAkKCcjaGllcmFyY2h5LWxlZ2VuZC1kaXYnKS5oaWRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGxlZ2VuZERhdGEgPSBbXTtcclxuICAgIGxldCBsZWdlbmRUZXh0RGF0YSA9IFtdO1xyXG4gICAgLy8gZ2V0IHRoZSByZXF1aXJlZCBkYXRhXHJcbiAgICAkKCcuc2hvdy1kZW5kcm9ncmFtJykuZWFjaChmdW5jdGlvbihpLCBvYmopIHtcclxuICAgICAgICAvLyBjaGVjayBpZiBkYXRhIGlzIG5vdCB1bmRlZmluZWRcclxuICAgICAgICBpZiAoaGllcmFyY2h5Q29sb3JzWydoJyArICQob2JqKS5hdHRyKCdkYXRhJyldICE9IG51bGwgJiYgJChvYmopLmF0dHIoJ25hbWUnKSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIGxlZ2VuZERhdGEucHVzaChoaWVyYXJjaHlDb2xvcnNbJ2gnICsgJChvYmopLmF0dHIoJ2RhdGEnKV0pO1xyXG4gICAgICAgICAgICBsZWdlbmRUZXh0RGF0YS5wdXNoKCQob2JqKS5hdHRyKCduYW1lJykpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgLy8gYWRkIHRoZSBuZXR3b3JrIGNvbG9yXHJcbiAgICBpZiAoT2JqZWN0LmtleXMobmV0d29ya0NvbG9yKS5sZW5ndGggIT09IDApIHtcclxuICAgICAgICBmb3IgKGxldCBrZXkgaW4gbmV0d29ya0NvbG9yKSB7XHJcbiAgICAgICAgICAgIGlmIChsZWdlbmREYXRhLmluZGV4T2YobmV0d29ya0NvbG9yW2tleV0pID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgbGVnZW5kRGF0YS5wdXNoKG5ldHdvcmtDb2xvcltrZXldKTtcclxuICAgICAgICAgICAgICAgIGxlZ2VuZFRleHREYXRhLnB1c2goJ05ldHdvcmsnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIERBVEEgSk9JTlxyXG4gICAgbGVnZW5kID0gc3ZnTGVnZW5kLnNlbGVjdEFsbCgncmVjdC5sZWdlbmQnKVxyXG4gICAgICAgIC5kYXRhKGxlZ2VuZERhdGEpO1xyXG4gICAgbGVnZW5kVGV4dCA9IHN2Z0xlZ2VuZC5zZWxlY3RBbGwoJ3RleHQubGVnZW5kLXRleHQnKVxyXG4gICAgICAgIC5kYXRhKGxlZ2VuZFRleHREYXRhKTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0gTGVnZW5kIHN3YXRjaGVzICAtLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAvLyBVUERBVEUgLSBsZWdlbmRcclxuICAgIGxlZ2VuZC5zdHlsZSgnZmlsbCcsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICByZXR1cm4gZDtcclxuICAgIH0pO1xyXG4gICAgLy8gRU5URVIgLSBsZWdlbmRcclxuICAgIGxlZ2VuZFxyXG4gICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgLmFwcGVuZCgncmVjdCcpXHJcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xlZ2VuZCcpXHJcbiAgICAgICAgLmF0dHIoJ3dpZHRoJywgbGVnZW5kU3dhdGNoV2lkdGgpXHJcbiAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGxlZ2VuZFN3YXRjaEhlaWdodClcclxuICAgICAgICAuYXR0cigneScsIDApXHJcbiAgICAgICAgLmF0dHIoJ3gnLCBmdW5jdGlvbihkLCBpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAobGVnZW5kU3dhdGNoV2lkdGggKyAyLjUgKiBpICogbGVnZW5kU3dhdGNoV2lkdGgpICsgJ3B4JztcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5zdHlsZSgnZmlsbCcsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICAvLyBFWElUIC0gbGVnZW5kXHJcbiAgICBsZWdlbmQuZXhpdCgpXHJcbiAgICAgICAgLnJlbW92ZSgpO1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLSBUZXh0ICAtLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAvLyBVUERBVEUgLSBsZWdlbmQgdGV4dFxyXG4gICAgbGVnZW5kVGV4dC50ZXh0KGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICByZXR1cm4gZDtcclxuICAgIH0pO1xyXG4gICAgLy8gRU5URVIgLSBsZWdlbmQgdGV4dFxyXG4gICAgbGVnZW5kVGV4dFxyXG4gICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgLmFwcGVuZCgndGV4dCcpXHJcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xlZ2VuZC10ZXh0JylcclxuICAgICAgICAuYXR0cigneScsIDIgKiBsZWdlbmRTd2F0Y2hIZWlnaHQpXHJcbiAgICAgICAgLmF0dHIoJ3gnLCBmdW5jdGlvbihkLCBpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAobGVnZW5kU3dhdGNoV2lkdGggKyAyLjUgKiBpICogbGVnZW5kU3dhdGNoV2lkdGgpICsgJ3B4JztcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50ZXh0KGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgLy8gRVhJVCAtIGxlZ2VuZCB0ZXh0XHJcbiAgICBsZWdlbmRUZXh0LmV4aXQoKVxyXG4gICAgICAgIC5yZW1vdmUoKTtcclxuXHJcbn1cclxuXHJcblxyXG4vKipcclxuICogSW5pdGlhbGl6ZSB0aGUgZGVuZHJvZ3JhbSBsZWdlbmRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpbml0RGVuZHJvZ3JhbUxlZ2VuZCgpIHtcclxuICAgIGxldCBsZWdlbmRXaWR0aCA9IDU1MDtcclxuICAgIGxldCBsZWdlbmRIZWlnaHQgPSA2MDtcclxuXHJcbiAgICBsZXQgZGVuZHJvZ3JhbUxlZ2VuZCA9IGQzLnNlbGVjdCgnI2RlbmRyb2dyYW0tcGFuZWwnKVxyXG4gICAgICAgIC5hcHBlbmQoJ3N2ZycpXHJcbiAgICAgICAgLmF0dHIoJ2lkJywgJ2RlbmRyb2dyYW0tbGVnZW5kJylcclxuICAgICAgICAuYXR0cignd2lkdGgnLCBsZWdlbmRXaWR0aClcclxuICAgICAgICAuYXR0cignaGVpZ2h0JywgbGVnZW5kSGVpZ2h0KTtcclxuXHJcbiAgICAkKCcjZGVuZHJvZ3JhbS1sZWdlbmQnKS5oaWRlKCk7XHJcblxyXG4gICAgbGV0IGxlZ2VuZDsgLy8gdGhlIGNvbG9yIGxlZ2VuZFxyXG4gICAgbGV0IGxlZ2VuZFRleHQ7IC8vIGNvbG9yIGxlZ2VuZCB0ZXh0XHJcbiAgICAvLyB2YXJzIGZvciB0aGUgbGVnZW5kXHJcbiAgICBsZXQgbGVnZW5kU3dhdGNoV2lkdGggPSA1MDtcclxuICAgIGxldCBsZWdlbmRTd2F0Y2hIZWlnaHQgPSAyMDtcclxuXHJcbiAgICBsZXQgbGVnZW5kRGF0YSA9IHN0YW5kYXJkRGV2aWF0aW9uQ29sb3JTY2FsZS5yYW5nZSgpO1xyXG4gICAgLy9UT0RPIGNoYW5nZSB0aGlzIHRvIGJldHRlciBzb2x1dGlvblxyXG4gICAgbGV0IGxlZ2VuZFRleHREYXRhID0gWydsb3cnLCAnJywgJycsICcnLCAnJywgJycsICcnLCAnJywgJ2hpZ2gnXTtcclxuXHJcbiAgICBsZWdlbmQgPSBkZW5kcm9ncmFtTGVnZW5kLnNlbGVjdEFsbCgncmVjdC5sZWdlbmQnKVxyXG4gICAgICAgIC5kYXRhKGxlZ2VuZERhdGEpO1xyXG4gICAgbGVnZW5kVGV4dCA9IGRlbmRyb2dyYW1MZWdlbmQuc2VsZWN0QWxsKCd0ZXh0LmxlZ2VuZC10ZXh0JylcclxuICAgICAgICAuZGF0YShsZWdlbmRUZXh0RGF0YSk7XHJcblxyXG4gICAgLy8gRU5URVIgLSBsZWdlbmRcclxuICAgIGxlZ2VuZFxyXG4gICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgLmFwcGVuZCgncmVjdCcpXHJcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xlZ2VuZCcpXHJcbiAgICAgICAgLmF0dHIoJ3dpZHRoJywgbGVnZW5kU3dhdGNoV2lkdGgpXHJcbiAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGxlZ2VuZFN3YXRjaEhlaWdodClcclxuICAgICAgICAuYXR0cigneScsIDApXHJcbiAgICAgICAgLmF0dHIoJ3gnLCBmdW5jdGlvbihkLCBpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoaSAqIGxlZ2VuZFN3YXRjaFdpZHRoKSArICdweCc7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuc3R5bGUoJ2ZpbGwnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLSBUZXh0ICAtLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAvLyBFTlRFUiAtIGxlZ2VuZCB0ZXh0XHJcbiAgICBsZWdlbmRUZXh0XHJcbiAgICAgICAgLmVudGVyKClcclxuICAgICAgICAuYXBwZW5kKCd0ZXh0JylcclxuICAgICAgICAuYXR0cignY2xhc3MnLCAnbGVnZW5kLXRleHQnKVxyXG4gICAgICAgIC5hdHRyKCd5JywgMiAqIGxlZ2VuZFN3YXRjaEhlaWdodClcclxuICAgICAgICAuYXR0cigneCcsIGZ1bmN0aW9uKGQsIGkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChpICogbGVnZW5kU3dhdGNoV2lkdGgpICsgJ3B4JztcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50ZXh0KGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICAgICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXQgdGhlIHNldCBvcGVyYXRpb25cclxuICogQHBhcmFtIHtzdHJpbmd9IG9wZXJhdGlvbiAtIGUuZy4gXCJ1bmlvblwiIFwiaW50ZXJzZWN0aW9uXCIgXCJzeW0tZGlmZmVyZW5jZVwiXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2V0U2V0T3BlcmF0aW9uKHZhbHVlKSB7XHJcbiAgICBzZXRPcGVyYXRpb24gPSB2YWx1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldCB0aGUgaGllcmFyY2h5IGdyb3VwIHN0YW5kYXJkIGRldmlhdGlvblxyXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5IC0gdW5pcXVlIGhhc2ggaWQgZm9yIHRoZSBncm91cFxyXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgLSB1bmlxdWUgaGFzaCBpZCBmb3IgdGhlIGdyb3VwXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2V0aGllcmFyY2h5R3JvdXBTdGRldihrZXksIHZhbHVlKSB7XHJcbiAgICBpZiAoa2V5IGluIGhpZXJhcmNoeUdyb3VwU3RkZXYpIHtcclxuICAgICAgICBoaWVyYXJjaHlHcm91cFN0ZGV2W2tleV0ucHVzaCh2YWx1ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGhpZXJhcmNoeUdyb3VwU3RkZXZba2V5XSA9IFt2YWx1ZV07XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXNldCBoaWVyYXJjaHkgZ3JvdXAgc3RhbmRhcmQgZGV2aWF0aW9uXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRoaWVyYXJjaHlHcm91cFN0ZGV2KCkge1xyXG4gICAgaGllcmFyY2h5R3JvdXBTdGRldiA9IHt9O1xyXG59XHJcblxyXG4vKipcclxuICogSGlnaGxpZ2h0IGEgc3Vic2V0IG9mIGFuaW1hbHMgaW4gdGhlIHNwYXRpYWwgdmlld1xyXG4gKiBAcGFyYW0ge2FycmF5fSBhbmltYWxzIC0gYXJyYXkgb2YgYW5pbWFsIGlkcyB3aGljaCBoYXZlIHRvIGJlIGhpZ2hsaWdodGVkXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gYWRkSGlnaGxpZ2h0U3BhdGlhbFZpZXcoYW5pbWFscykge1xyXG4gICAgLy8gcG9pbnRzIHRvIGNhbGN1bGF0ZSB0aGUgY29udmV4IGh1bGwgb2YgdGhlIGhpZ2hsaWdodCBjbHVzdGVyXHJcbiAgICBsZXQgdmVydGljZXMgPSBbXTtcclxuICAgIC8vIGl0ZXJhdGUgdGhyb3VnaCB0aGUgb2JqZWN0cyBpbiB0aGUgY2x1c3RlclxyXG4gICAgLy8gZ2V0IHRoZSBwb2ludHMgYW5kIGhpZ2hsaWdodCB0aGUgYW5pbWFsc1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbmltYWxzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IHRtcEFuaW1hbCA9IHRoaXMuc3BhdGlhbFZpZXcuc2VsZWN0KCcjYW5pbWFsLScgKyBhbmltYWxzW2ldKTtcclxuICAgICAgICBsZXQgcG9pbnQgPSB0bXBBbmltYWwuZGF0YSgpWzBdWydwJ107XHJcbiAgICAgICAgdmVydGljZXMucHVzaChbcG9pbnRbMF0sIC1wb2ludFsxXV0pO1xyXG5cclxuICAgICAgICB0bXBBbmltYWwuY2xhc3NlZCgnYW5pbWFsLWhpZ2hsaWdodCcsIHRydWUpO1xyXG4gICAgfVxyXG4gICAgLy8gYWRkIGEgcG9seWdvbiBodWxsIGluIHRoZSBzcGF0aWFsIHZpZXdcclxuICAgIHRoaXMuc3BhdGlhbFZpZXcuYXBwZW5kKCdwYXRoJylcclxuICAgICAgICAuYXR0cignY2xhc3MnLCAnaGlnaGxpZ2h0LWhpZXJhcmNoeScpXHJcbiAgICAgICAgLmF0dHIoJ2QnLCAoJ00nICsgZDMucG9seWdvbkh1bGwodmVydGljZXMpLmpvaW4oJ0wnKSArICdaJykpO1xyXG59XHJcblxyXG4vKipcclxuICogUmVtb3ZlIHRoZSBoaWdobGlnaHQgaW4gdGhlIHNwYXRpYWwgdmlld1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUhpZ2hsaWdodFNwYXRpYWxWaWV3KCkge1xyXG4gICAgLy8gcmVtb3ZlIHRoZSBjb2xvcmluZyBhbmQgdGhlIGhpZXJhcmNoeSBoaWdobGlnaHQgaHVsbFxyXG4gICAgZDMuc2VsZWN0QWxsKCcuYW5pbWFsJykuY2xhc3NlZCgnYW5pbWFsLWhpZ2hsaWdodCcsIGZhbHNlKTtcclxuICAgIGQzLnNlbGVjdEFsbCgnLmhpZ2hsaWdodC1oaWVyYXJjaHknKS5yZW1vdmUoKTtcclxufVxyXG4iLCIvKmVzbGludC1kaXNhYmxlIG5vLXVudXNlZC1sZXRzKi9cclxuLypnbG9iYWwgd2luZG93LCBkMywgJCwgcGFyYW1ldGVycyovXHJcbmltcG9ydCB7XHJcbiAgICBzZXRJbmRleFRpbWUsXHJcbiAgICBEcmF3ZXJcclxufSBmcm9tICcuL3NwYXRpYWxfdmlldy9zcGF0aWFsX3ZpZXcuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIHN3YXJtRGF0YSxcclxuICAgIGRhdGFzZXQsXHJcbiAgICBhbmltYWxJZHNcclxufSBmcm9tICcuL2V4cGxvcmUuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIHBlcmNlbnRpbGVzTGluZUNoYXJ0XHJcbn0gZnJvbSAnLi9oZWxwZXJzLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBpbmRleFRpbWUsXHJcbn0gZnJvbSAnLi9zcGF0aWFsX3ZpZXcvc3BhdGlhbF92aWV3JztcclxuXHJcblxyXG5cclxuXHJcbmV4cG9ydCBsZXQgem9vbUZ1bmN0aW9uO1xyXG5cclxubGV0IHRyZW5kQ2hhcnRzWm9vbSA9IHt9O1xyXG4vL2xldCB0aGlzLnRyZW5kQ2hhcnRzRWxlbSA9IFsnbG93ZXItb3V0ZXItYXJlYScsICdsb3dlci1pbm5lci1hcmVhJywgJ21lZGlhbi1saW5lJywgJ3VwcGVyLWlubmVyLWFyZWEnLCAndXBwZXItb3V0ZXItYXJlYSddO1xyXG4vL2xldCBsaW5lQ2hhcnRXaWR0aCA9IDUwMDA7XHJcbmxldCByYXRpbyA9IDE7XHJcbmxldCB6b29tR3JvdXA7XHJcbmxldCB4O1xyXG5sZXQgeTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbi8vcmF0aW8gPSBNYXRoLmNlaWwoc3dhcm1EYXRhLmxlbmd0aCAvIHRoaXMubGluZUNoYXJ0V2lkdGgpO1xyXG4gICAgLy9jb25zb2xlLmxvZyhzd2FybURhdGEpO1xyXG4gICAgLy9sZXQgcmVzdWx0ID0gc3dhcm1EYXRhLm1hcChvYmogPT4gKHt0aW1lOm9iai50aW1lLCBkaXN0X2NlbjpvYmouZGlzdGFuY2VfY2VudHJvaWR9KSk7XHJcbiAgICAvL2NvbnNvbGUubG9nKHJlc3VsdCk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuLy9saW5lY2hhcnQuZHJhdygpO1xyXG4vL2xldCBzd2FybURhdCA9IG5ldyBzd2FybURhdGEoKTtcclxuIiwiLyplc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtbGV0cyovXHJcbi8qZ2xvYmFsIHdpbmRvdywgJCwgZDMgKi9cclxuaW1wb3J0IHtcclxuICAgIGhpZXJhcmNoeUNvbG9ycyxcclxuICAgIGNvbG9ycyxcclxuICAgIGNoYW5nZUhpZXJhcmNoeUxlZ2VuZFxyXG59IGZyb20gJy4vaGllcmFyY2h5LmpzJztcclxuXHJcblxyXG5cclxuZXhwb3J0IGxldCBuZXR3b3JrQXV0byA9IGZhbHNlOyAvLyBpZiB0cnVlIHRoZSBuZXR3b3JrIGVkZ2UgbGltaXQgaXMgYXV0b21hdGljYWxseSBzdWdnZXN0ZWRcclxuZXhwb3J0IGxldCBuZXR3b3JrTGltaXQgPSAwLjU7XHJcbmV4cG9ydCBsZXQgc2hvd05ldHdvcmtIaWVyYXJjaHk7XHJcbmV4cG9ydCBsZXQgbmV0d29ya0NvbG9yID0ge307XHJcbmV4cG9ydCBsZXQgbmV0d29ya0lEO1xyXG5leHBvcnQgbGV0IG5ldHdvcmtCYWNrZ3JvdW5kID0gdHJ1ZTtcclxuZXhwb3J0IGxldCBuZXR3b3JrQmFja2dyb3VuZExpbWl0ID0gMTsgLy9kcmF3IGJhY2tncm91bmQgbGluZSBpZiBsaW1pdCBpcyBleGNlZWRlZFxyXG4vLyBmaXhlZCBjb2xvciBzY2FsZSBmb3IgdGhlIG5ldHdvcmtcclxuXHJcbi8qKlxyXG4gKiBjb2xvciBzY2FsZSBmb3IgbmV0d29yayAtIHJhbmdlIGlzIGRlZmluZWQgZHluYW1pYyBiYXNlZCBvbiB0aGUgaGllcmFyaGN5IGNvbG9yXHJcbiAqL1xyXG5leHBvcnQgbGV0IG5ldHdvcmtDb2xvclNjYWxlID0gZDMuc2NhbGVUaHJlc2hvbGQoKVxyXG4gICAgLmRvbWFpbihcclxuICAgICAgICBbMCwgLjEsIC4yLCAuMywgLjQsIC41LCAuNiwgLjcsIC44LCAuOSwgMV1cclxuICAgICkucmFuZ2UoWycjZjdmYmZmJywgJyNkZWViZjcnLCAnI2M2ZGJlZicsICcjOWVjYWUxJywgJyM2YmFlZDYnLCAnIzQyOTJjNicsICcjMjE3MWI1JywgJyMwODUxOWMnLCAnIzA4MzA2YiddKTtcclxuXHJcblxyXG4vKipcclxuICogQWRkIHRoZSBuZXR3b3JrICBzZWxlY3QgYnV0dG9ucyBhbmQgaGllcmFyY2h5IGNoZWNrYm94ZXMgdG8gdGhlIG5ldHdvcmsgbW9kYWxcclxuICogQHBhcmFtIHthcnJheX0gZGF0YSAtIEFycmF5IG9mIG5ldHdvcmsgZGF0YVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGFkZE5ldHdvcmtCdXR0b25zKGRhdGEpIHtcclxuICAgIGlmIChkYXRhLmxlbmd0aCkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZGF0YVtpXVsnZmluaXNoZWQnXSkge1xyXG4gICAgICAgICAgICAgICAgJCgnI25ldHdvcmtzLWhpZXJhcmNoaWVzLXRhYmxlIHRib2R5JylcclxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCc8dHI+PHRkPicgKyBkYXRhW2ldWyduYW1lJ10gKyAnPC90ZD4gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8dGQ+IDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0XCIgZGF0YT0nICsgZGF0YVtpXVsnbmV0d29ya19pZCddICsgJyBuYW1lPScgKyBkYXRhW2ldWyduYW1lJ10gK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPjxzcGFuIGNsYXNzPVwibWRpIG1kaS1ncmFwaHFsXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9zcGFuPjwvYnV0dG9uPjwvdGQ+ICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPHRkPjxkaXYgY2xhc3M9XCJwcmV0dHkgcC1zd2l0Y2ggcC1maWxsXCI+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGNsYXNzPVwiaGllYXJjaHktY2hlY2tib3hcIiBkYXRhPVwiJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbaV1bJ25ldHdvcmtfaWQnXSArICdcIiBuYW1lPVwiJyArIGRhdGFbaV1bJ25hbWUnXSArICdcIj48ZGl2IGNsYXNzPVwic3RhdGUgcC1zdWNjZXNzXCI+PGxhYmVsPjwvbGFiZWw+PC9kaXY+PC9kaXY+PC90ZD4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzx0ZD4tLS08L3RkPidcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gJzx0ZD48ZGl2IGNsYXNzPVwicHJldHR5IHAtc3dpdGNoIHAtZmlsbFwiPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBjbGFzcz1cIm5ldHdvcmstaGllcmFyY2h5LWNoZWNrYm94XCIgZGF0YT1cIicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkYXRhW2ldWyduZXR3b3JrX2lkJ10gKyAnXCI+PGRpdiBjbGFzcz1cInN0YXRlIHAtc3VjY2Vzc1wiPjxsYWJlbD48L2xhYmVsPjwvZGl2PjwvZGl2PjwvdGQ+J1xyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgICQoJyNuZXR3b3Jrcy1oaWVyYXJjaGllcy10YWJsZScpXHJcbiAgICAgICAgICAgIC5hcHBlbmQoJ1RoZXJlIGlzIG5vIG5ldHdvcmsgZGF0YSBmb3IgdGhpcyBkYXRhc2V0Jyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgU2V0dGVyXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuLyoqXHJcbiAqIFNldCB0aGUgbmV0d29yayBhdXRvIHZhbHVlIC0gaWYgdHJ1ZSB0aGFuIHRoZSBuZXR3b3JrIGxpbWl0IGlzIHNldCB0byB0aGUgMC45NSBwZXJjZW50aWxlIG9mIGFsbCB2YWx1ZXNcclxuICogQHBhcmFtIHtCb29sZWFufSB2YWx1ZVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldE5ldHdvcmtBdXRvKHZhbHVlKSB7XHJcbiAgICBuZXR3b3JrQXV0byA9IHZhbHVlO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IHRoZSBuZXR3b3JrIGxpbWl0IHdpdGggdGhlIHNwZWNpZmljIG5ldHdvcmsgc2xpZGVyIC0gY3VzdG9tXHJcbiAqIDAgPSBzaW1pbGFyIGFuZCAxIHVuc2ltaWxhciBmb3IgdGhlIHNwZWNpZmljIHRpbWUgbW9tZW50XHJcbiAqIEBwYXJhbSB7TnVtYmVyfSB2YWx1ZSAtIGJldHdlZW4gMCBhbmQgMVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldE5ldHdvckxpbWl0KHZhbHVlKSB7XHJcbiAgICBuZXR3b3JrTGltaXQgPSB2YWx1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldCB0aGUgbmV0d29yayBpbiBoaWVyYXJjaHkgKGUuZy4gaDApIGZpbHRlclxyXG4gKiBAcGFyYW0ge051bWJlcn0gaGllcmFyY2h5IC0gZS5nLiAwLW5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXROZXR3b3JrSGllcmFyY2h5KHZhbHVlKSB7XHJcbiAgICBzaG93TmV0d29ya0hpZXJhcmNoeSA9IHZhbHVlO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IHRoZSBuZXR3b3JrIG5ldHdvcmsgaWQgLSBuZWVkZWQgZm9yIGhpZXJhcmNoeSBzdGFuZGFyZCBkZXZpYXRpb24gY29sb3JpbmdcclxuICogQHBhcmFtIHtOdW1iZXJ9IHZhbHVlIC0gZS5nLiAwLW5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXROZXR3b3JrSUQodmFsdWUpIHtcclxuICAgIG5ldHdvcmtJRCA9IHZhbHVlO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IG5ldHdvcmsgY29sb3Igc2NhbGUgcmFuZ2VcclxuICogQHBhcmFtIHtOdW1iZXJ9IGlkIC0gaWQgb2YgdGhlIG5ldHdvcmtcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRuZXR3b3JrQ29sb3IobmV0d29ya19pZCkge1xyXG4gICAgLy8gaWYgaWQgPSAtMSBzZXQgdGhlIGNvbG9yIHRvIG5vdGhpbmdcclxuICAgIGlmIChuZXR3b3JrX2lkID49IDApIHtcclxuICAgICAgICBuZXR3b3JrQ29sb3JbJ2gnICsgbmV0d29ya19pZF0gPSAnIzA4MzA2Yic7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIG5ldHdvcmtDb2xvciA9IHt9O1xyXG4gICAgfVxyXG4gICAgLy9jaGFuZ2VIaWVyYXJjaHlMZWdlbmQoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldCB0aGUgYm9vbGVhbiB2YWx1ZSBmb3IgdGhlIG5ldHdvcmsgYmFja2dyb3VuZCBjb2xvclxyXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHZhbHVlIC0gdHJ1ZSBvciBmYWxzZVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldE5ldHdvcmtCYWNrZ3JvdW5kKHZhbHVlKSB7XHJcbiAgICBuZXR3b3JrQmFja2dyb3VuZCA9IHZhbHVlO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFNldCB0aGUgbmV0d29yayBiYWNrZ3JvdW5kIGNvbG9yIGxpbWl0IC0gZHJhdyBiYWNrZ3JvdW5kIGxpbmUgaWYgbGltaXQgaXMgZXhjZWVkZWRcclxuICogQHBhcmFtIHtJbnRlZ2VyfSB2YWx1ZSAtIG5ldyBsaW1pdFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldE5ldHdvcmtCYWNrZ3JvdW5kTGltaXQodmFsdWUpIHtcclxuICAgIG5ldHdvcmtCYWNrZ3JvdW5kTGltaXQgPSB2YWx1ZTtcclxufVxyXG4iLCIvKmVzbGludC1kaXNhYmxlIG5vLXVudXNlZC1sZXRzKi9cclxuLypnbG9iYWwgd2luZG93LCAkLCBwYXJhbWV0ZXJzICovXHJcblxyXG5sZXQgSlNPTkFQSV9NSU1FVFlQRSA9ICdhcHBsaWNhdGlvbi92bmQuYXBpK2pzb24nO1xyXG52YXIgc291cmNlO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGFkZFRvRGF0YXNldCxcclxuICAgIHNldERhdGFTZXRQZXJjZW50aWxlLFxyXG4gICAgc2V0U3dhcm1EYXRhLFxyXG4gICAgc2V0TWV0YURhdGEsXHJcbiAgICBzZXREYXRhc2V0RmVhdHVyZSxcclxuICAgIHNldE5ldHdvcmtEYXRhLFxyXG4gICAgc2V0SGllcmFyY2h5RGF0YSxcclxuICAgIHNldEFuaW1hbElkc1xyXG59IGZyb20gJy4vZXhwbG9yZS5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgYWRkTmV0d29ya0J1dHRvbnMsXHJcbiAgICBzZXROZXR3b3JrSURcclxufSBmcm9tICcuL25ldHdvcmsuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGVuYWJsZVBsYXlCdXR0b24sXHJcbiAgICBkaXNhYmxlUGxheUJ1dHRvbixcclxuICAgIGFkZEFic29sdXRlRmVhdHVyZUJ1dHRvbnNcclxufSBmcm9tICcuL2hlbHBlcnMuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIFNwYXRpYWxWaWV3XHJcbn0gZnJvbSAnLi9zcGF0aWFsX3ZpZXcvc3BhdGlhbF92aWV3LmpzJztcclxuXHJcbi8vIGltcG9ydCB7XHJcbi8vICAgICByZXNwb25zZVBhcmFtZXRlcnNcclxuLy8gfSBmcm9tICcuL3Zpc3VhbF9wYXJhbWV0ZXIuanMnO1xyXG5cclxuXHJcbi8qKlxyXG4gKiBTdHJlYW0gdGhlIG1vdmVtZW50IGRhdGEgZnJvbSB0aGUgQVBJXHJcbiAqIExvYWRzIG9ubHkgdGhlIGV4cGxpY2l0IG1vdmVtZW50IGRhdGFcclxuICovXHJcbi8vY29uc29sZS5sb2coZGF0YSk7XHJcbmV4cG9ydCBmdW5jdGlvbiBzdHJlYW1Nb3ZlbWVudERhdGEoKSB7XHJcbiAgICBpZiAod2luZG93LkV2ZW50U291cmNlKSB7XHJcbiAgICAgICAgc291cmNlID0gbmV3IEV2ZW50U291cmNlKCcvYXBpL21vdmVtZW50X29ubHkvJyArIHBhcmFtZXRlcnNbJ2lkJ10pO1xyXG4gICAgICAgIHNvdXJjZS5vbm1lc3NhZ2UgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmRhdGEgPT09ICdjbG9zZScpIHtcclxuICAgICAgICAgICAgICAgIHNvdXJjZS5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgLy8gaWYgYWxsIGFqYXggcXVlcmllcyBhcmUgY29tcGVsdGUgaW5pdGlhbGl6ZVxyXG4gICAgICAgICAgICAgICAgKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNoZWNrUGVuZGluZ1JlcXVlc3QoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkLmFjdGl2ZSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGNoZWNrUGVuZGluZ1JlcXVlc3QsIDEwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZpZXcgPSBuZXcgU3BhdGlhbFZpZXcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChjaGVja1BlbmRpbmdSZXF1ZXN0LCAxMDApO1xyXG4gICAgICAgICAgICAgICAgfSkoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGFkZFRvRGF0YXNldChKU09OLnBhcnNlKGUuZGF0YSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgc291cmNlLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICBpZiAoZS5yZWFkeVN0YXRlID09IEV2ZW50U291cmNlLkNMT1NFRCkge1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoJ1N0cmVhbWluZyBlcnJvcicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgZmFsc2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBhbGVydCgnV2ViYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IHN0cmVhbWluZycpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogR2V0IHRoZSBwZXJjZW50aWxlIGRhdGEgZnJvbSB0aGUgYXBpIGV4cG9ydCB0byBleHBsb3JlLmpzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGVyY2VudGlsZSgpIHtcclxuICAgIGxldCBkYXRhU2V0UGVyY2VudGlsZSA9IFtdO1xyXG4gICAgJC5hamF4KHtcclxuICAgICAgICB1cmw6ICcvYXBpL3BlcmNlbnRpbGUvJyArIHBhcmFtZXRlcnNbJ2lkJ10sXHJcbiAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICB0eXBlOiAnR0VUJyxcclxuICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgJ0FjY2VwdCc6IEpTT05BUElfTUlNRVRZUEVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgLy8gY29udmVydCB0aGUgZGF0YVNldFBlcmNlbnRpbGUgaW50byBhbiBhcnJheVxyXG4gICAgICAgICAgICAvLyBbbWluLCBwZXJjZW50aWxlXzEsLi4uLHBlcmNlbnRpbGVfOSxtYXhdXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgZGF0YVNldFBlcmNlbnRpbGVbZGF0YVtpXVsnZmVhdHVyZSddXSA9IFtkYXRhW2ldWydtaW4nXSwgZGF0YVtpXVsncDEnXSwgZGF0YVtpXVsncDInXSwgZGF0YVtpXVsncDMnXSwgZGF0YVtpXVsncDUnXSwgZGF0YVtpXVsncDcnXSwgZGF0YVtpXVsncDgnXSwgZGF0YVtpXVsncDknXSwgZGF0YVtpXVsnbWF4J11dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldERhdGFTZXRQZXJjZW50aWxlKGRhdGFTZXRQZXJjZW50aWxlKTtcclxuICAgICAgICAgICAgYWRkQWJzb2x1dGVGZWF0dXJlQnV0dG9ucyhkYXRhU2V0UGVyY2VudGlsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIHN3YXJtIGZlYXR1cmVzIGZvciB0aGUgbGluZSBjaGFydCBmcm9tIHRoZSBhcGlcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRTd2FybUZlYXR1cmVzKCkge1xyXG4gICAgY29uc3Qgc3dhcm1fZmVhdHVyZXMgPSBbJ3N3YXJtX3RpbWUnLCAnc3dhcm1fc3BlZWQnLCAnc3dhcm1fYWNjZWxlcmF0aW9uJywgJ3N3YXJtX2NvbnZleF9odWxsX2FyZWEnLFxyXG4gICAgICAgICdzd2FybV9kaXN0YW5jZV9jZW50cm9pZCcsICdzd2FybV9kaXJlY3Rpb24nLCAnc3dhcm1fcG9sYXJpc2F0aW9uJ1xyXG4gICAgXTtcclxuXHJcbiAgICAvLyBnZXQgYWxsIHRoZSBvdGhlciBzd2FybSBmZWF0dXJlcyBmb3IgdGhlIGxpbmUgY2hhcnRcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3dhcm1fZmVhdHVyZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6ICcvYXBpL2RhdGFzZXQvJyArIHBhcmFtZXRlcnNbJ2lkJ10gKyAnLycgKyBzd2FybV9mZWF0dXJlc1tpXSxcclxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICAgICAgdHlwZTogJ0dFVCcsXHJcbiAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICdBY2NlcHQnOiBKU09OQVBJX01JTUVUWVBFXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGxldCBmZWF0dXJlID0gc3dhcm1fZmVhdHVyZXNbaV0ucmVwbGFjZSgnc3dhcm1fJywgJycpO1xyXG5cclxuICAgICAgICAgICAgICAgIHNldFN3YXJtRGF0YShkYXRhLCBmZWF0dXJlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogR2V0IHRoZSBtZWFkYXRhIGluZm9ybWF0aW9uXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0TWV0YURhdGEoKSB7XHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICAgIHVybDogJy9hcGkvbWV0YWRhdGEvJyArIHBhcmFtZXRlcnNbJ2lkJ10sXHJcbiAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICB0eXBlOiAnR0VUJyxcclxuICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgJ0FjY2VwdCc6IEpTT05BUElfTUlNRVRZUEVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgc2V0TWV0YURhdGEoZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIG5ldHdvcmsgZGF0YXNldHMgZm9yIHRoZSBidXR0b25zXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0TmV0d29ya0RhdGFCdXR0b24oKSB7XHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICAgIHVybDogJy9hcGkvZGF0YXNldC9uZXR3b3Jrcy8nICsgcGFyYW1ldGVyc1snaWQnXSxcclxuICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgIHR5cGU6ICdHRVQnLFxyXG4gICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAnQWNjZXB0JzogSlNPTkFQSV9NSU1FVFlQRVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICBhZGROZXR3b3JrQnV0dG9ucyhkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCB0aGUgc3BlY2lmYyBmZWF0dXJlXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBmZWF0dXJlIC0gZm9yIGluc3RhbmNlIHNwZWVkLCBhY2NlbGVyYXRpb24gZXRjLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldERhdGFzZXRGZWF0dXJlKGZlYXR1cmUpIHtcclxuICAgICQuYWpheCh7XHJcbiAgICAgICAgdXJsOiAnL2FwaS9kYXRhc2V0LycgKyBwYXJhbWV0ZXJzWydpZCddICsgJy8nICsgZmVhdHVyZSxcclxuICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgIHR5cGU6ICdHRVQnLFxyXG4gICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAnQWNjZXB0JzogSlNPTkFQSV9NSU1FVFlQRVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAvLyBhZGQgdGhlIHNwZWVkIGZlYXR1cmUgdG8gdGhlIGRhdGFzZXRcclxuICAgICAgICAgICAgc2V0RGF0YXNldEZlYXR1cmUoZGF0YSwgZmVhdHVyZSk7XHJcbiAgICAgICAgICAgIGVuYWJsZVBsYXlCdXR0b24oKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCB0aGUgc3BlY2lmYyBzd2FybSBmZWF0dXJlXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBmZWF0dXJlIC0gZm9yIGluc3RhbmNlIGNlbnRyb2lkLCBtZWRvaWQgZXRjLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFN3YXJtRGF0YXNldEZlYXR1cmUoZmVhdHVyZSkge1xyXG4gICAgZGlzYWJsZVBsYXlCdXR0b24oKTtcclxuICAgICQuYWpheCh7XHJcbiAgICAgICAgdXJsOiAnL2FwaS9kYXRhc2V0LycgKyBwYXJhbWV0ZXJzWydpZCddICsgJy8nICsgZmVhdHVyZSxcclxuICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgIHR5cGU6ICdHRVQnLFxyXG4gICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAnQWNjZXB0JzogSlNPTkFQSV9NSU1FVFlQRVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAvLyBhZGQgdGhlIHNwZWVkIGZlYXR1cmUgdG8gdGhlIGRhdGFzZXRcclxuICAgICAgICAgICAgc2V0U3dhcm1EYXRhKGRhdGEsIGZlYXR1cmUpO1xyXG4gICAgICAgICAgICBlbmFibGVQbGF5QnV0dG9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIG5ldHdvcmsgZm9yIHRoZSBzcGVjaWZpYyBuZXR3b3JrX2lkXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBuZXR3b3JrX2lkIC0gdW5pcXVlIG5ldHdvcmsgaWQgb2YgYSBkYXRhc2V0LlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldE5ldHdvcmtEYXRhKG5ldHdvcmtfaWQpIHtcclxuICAgICQuYWpheCh7XHJcbiAgICAgICAgdXJsOiAnL2FwaS9kYXRhc2V0L25ldHdvcmsvJyArIHBhcmFtZXRlcnNbJ2lkJ10gKyAnLycgKyBuZXR3b3JrX2lkLFxyXG4gICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgdHlwZTogJ0dFVCcsXHJcbiAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICdBY2NlcHQnOiBKU09OQVBJX01JTUVUWVBFXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgc2V0TmV0d29ya0RhdGEoSlNPTi5wYXJzZShkYXRhWzBdWydkYXRhJ10pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbmFibGVQbGF5QnV0dG9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAvLyBuZWVkZWQgZm9yIHN0YW5kYXJkIERldmlhdGlvbiBpbiBkZW5kcm9ncmFtXHJcbiAgICBzZXROZXR3b3JrSUQobmV0d29ya19pZCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIG5ldHdvcmsgaGllcmFyY2h5IGZvciB0aGUgc3BlY2lmaWMgbmV0d29ya19pZFxyXG4gKiBAcGFyYW0ge1N0cmluZ30gbmV0d29ya19pZCAtIHVuaXF1ZSBuZXR3b3JrIGlkIG9mIGEgZGF0YXNldC5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXROZXR3b3JrSGllcmFyY2h5RGF0YShuZXR3b3JrX2lkKSB7XHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICAgIHVybDogJy9hcGkvZGF0YXNldC9uZXR3b3JrL2hpZXJhcmNoeS8nICsgcGFyYW1ldGVyc1snaWQnXSArICcvJyArIG5ldHdvcmtfaWQsXHJcbiAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICB0eXBlOiAnR0VUJyxcclxuICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgJ0FjY2VwdCc6IEpTT05BUElfTUlNRVRZUEVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgaWYgKGRhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRIaWVyYXJjaHlEYXRhKEpTT04ucGFyc2UoZGF0YVswXVsnaGllcmFyY2h5J10pLCBuZXR3b3JrX2lkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbmFibGVQbGF5QnV0dG9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIGRpc3RpbmN0IGFuaW1hbCBpZHMgZm9yIGEgc3BlY2lmYyBkYXRhc2V0XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0QW5pbWFsSWRzKCkge1xyXG4gICAgJC5hamF4KHtcclxuICAgICAgICB1cmw6ICcvYXBpL2RhdGFzZXQvJyArIHBhcmFtZXRlcnNbJ2lkJ10gKyAnL2FuaW1hbF9pZHMnLFxyXG4gICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgdHlwZTogJ0dFVCcsXHJcbiAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICdBY2NlcHQnOiBKU09OQVBJX01JTUVUWVBFXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgIHNldEFuaW1hbElkcyhkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuLy8gLyoqXHJcbi8vICAqIFZpc3VhbCBwYXJhbWV0ZXIgc3VnZ2VzdGlvbiBhamF4IHF1ZXJ5XHJcbi8vICAqIEBwYXJhbSB7QXJyYXl9IHRyYWNrZWREYXRhIC0gdHJhY2tlZCBkYXRhIHdpdGggLlxyXG4vLyAgKi9cclxuLy8gZXhwb3J0IGZ1bmN0aW9uIGdldFN1Z2dlc3RlZFBhcmFtZXRlcnModHJhY2tlZERhdGEpIHtcclxuLy8gICAgICQuYWpheCh7XHJcbi8vICAgICAgICAgdXJsOiAnL2FwaS9kYXRhc2V0L3Zpc3VhbF9wYXJhbWV0ZXIvJyArIHBhcmFtZXRlcnNbJ2lkJ10sXHJcbi8vICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuLy8gICAgICAgICB0eXBlOiAnUE9TVCcsXHJcbi8vICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcclxuLy8gICAgICAgICBoZWFkZXJzOiB7XHJcbi8vICAgICAgICAgICAgICdBY2NlcHQnOiBKU09OQVBJX01JTUVUWVBFXHJcbi8vICAgICAgICAgfSxcclxuLy8gICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XHJcbi8vICAgICAgICAgICAgIHJlc3BvbnNlUGFyYW1ldGVycyhkYXRhKTtcclxuLy8gICAgICAgICB9LFxyXG4vLyAgICAgICAgIGRhdGE6IHRyYWNrZWREYXRhXHJcbi8vICAgICB9KTtcclxuLy9cclxuLy8gfVxyXG4iLCIvKmVzbGludC1kaXNhYmxlIG5vLXVudXNlZC1sZXRzKi9cclxuLypnbG9iYWwgd2luZG93LCAkICovXHJcbi8vIGltcG9ydCBhbGwganNcclxuaW1wb3J0ICogYXMgcXVlcmllcyBmcm9tICcuL2FqYXhfcXVlcmllcy5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgaW5pdGlhbGl6ZU1ldGFkZGF0YVxyXG59IGZyb20gJy4vbWV0YWRhdGEuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIHNldEhpZXJhcmNoeUxldmVsLFxyXG4gICAgcmVtb3ZlSGllcmFyY2h5TGV2ZWwsXHJcbiAgICBzZXRIaWVyYXJjaHlDb2xvcixcclxuICAgIHJlbW92ZUhpZXJhcmNoeUNvbG9yLFxyXG4gICAgY2hhbmdlSGllcmFyY2h5TGVnZW5kXHJcbn0gZnJvbSAnLi9oaWVyYXJjaHkuanMnO1xyXG5cclxuLy8gaW1wb3J0IGNzc1xyXG5pbXBvcnQgJy4vZXhwbG9yZS5jc3MnO1xyXG5cclxuaW1wb3J0IENoYXJ0IGZyb20gJy4vbGluZV9jaGFydC5qcyc7XHJcblxyXG5leHBvcnQgbGV0IGRhdGFzZXQgPSBbXTsgLy8gbWFpbiBkYXRhc2V0IHdpdGggdmFsdWVzIGZvciBlYWNoIGluZGl2aWR1YWwgYW5pbWFsXHJcbmV4cG9ydCBsZXQgZGF0YXNldE1ldGFkYXRhID0gW107IC8vIG1ldGFkYXRhc2V0IGZvciBlYWNoIGluZGl2aWR1YWwgZmlzaFxyXG5leHBvcnQgbGV0IHN3YXJtRGF0YSA9IFtdOyAvLyBzd2FybWRhdGEgZm9yIGxpbmVjaGFydCBhbmQgYWxzbyBvdGhlciBzd2FybSBmZWF0dXJlc1xyXG5leHBvcnQgbGV0IGRhdGFTZXRQZXJjZW50aWxlID0ge307IC8vIHBlY2VudGlsZXMgbmVlZGVkIGZvciB0aGUgY29sb3IgbWFwcGluZ1xyXG5leHBvcnQgbGV0IG5ldHdvcmtEYXRhID0ge307IC8vIG5ldHdvcmsgZGF0YVxyXG5leHBvcnQgbGV0IG5ldHdvcmtIaWVyYXJjaHkgPSB7fTsgLy8gbmV0d29yayBoaWVyYXJjaHkgZGF0YVxyXG5leHBvcnQgbGV0IGFuaW1hbElkcyA9IHt9OyAvLyBkaXN0aW5jdCBhbmltYWwgaWRzXHJcblxyXG5cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIGJhc2ljIGRhdGEgdG8gZ2V0IHRoZSB0b29sIHJ1bm5pbmcuXHJcbiAqIGFmdGVyIHRoZSBwZW5kaW5nIGFqYXggcXVlcmllcyBhcmUgZmluaXNoZWRcclxuICogdGhlIHRvb2wgaXMgZHJhd25cclxuICovXHJcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xyXG4gICAgLy8gY29uc29sZS5sb2cocGFyYW1ldGVycyk7XHJcblxyXG4gICAgLy8gZ2V0IHRoZSBtb3ZlbWVudCBkYXRhXHJcbiAgICBxdWVyaWVzLnN0cmVhbU1vdmVtZW50RGF0YSgpO1xyXG5cclxuICAgIC8vIGdldCB0aGUgZGF0YVNldFBlcmNlbnRpbGVcclxuICAgIHF1ZXJpZXMuZ2V0UGVyY2VudGlsZSgpO1xyXG5cclxuICAgIC8vIGdldCB0aGUgZGlzdGluY3QgYW5pbWFsIGlkcyBmb3IgdGhlIHdob2xlIGRhdGFzZXRcclxuICAgIHF1ZXJpZXMuZ2V0QW5pbWFsSWRzKCk7XHJcblxyXG4gICAgLy8gZ2V0IHRoZSBzd2FybSBmZWF0dXJlcyBmb3IgdGhlIGxpbmUgY2hhcnRcclxuICAgIHF1ZXJpZXMuZ2V0U3dhcm1GZWF0dXJlcygpO1xyXG5cclxuICAgIC8vIGdldCB0aGUgbWV0YWRhdGEgYW5kIGluaXRpYWxpemUgdGhlIG1ldGFkYSB3aW5kb3dcclxuICAgIHF1ZXJpZXMuZ2V0TWV0YURhdGEoKTtcclxuXHJcbiAgICAvLyBnZXQgdGhlIGluZm9ybWF0aW9uIGlmIHRoZXJlIGFyZSBhbHJlYWR5IG5ldHdvcmtzIGNyZWF0ZWQgZm9yIHRoaXMgZGFzdGFzZXRcclxuICAgIHF1ZXJpZXMuZ2V0TmV0d29ya0RhdGFCdXR0b24oKTtcclxufSk7XHJcblxyXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICBHZXR0ZXIgYW5kIHNldHRlclxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbi8qKlxyXG4gKiBDb25jYWN0IHRvIHRoZSBtYWluIGRhdGFzZXRcclxuICogdGhlIGlkZWEgaXMgdG8gdXNlIHRoaXMgb25lIGRheSBmb3IgbGF6eSBsb2FkaW5nXHJcbiAqIEBwYXJhbSB7YXJyYXl9IHZhbHVlIC0gYXJyYXkgb2YgbW92ZW1lbnQgZGF0YXNldHNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRUb0RhdGFzZXQodmFsdWUpIHtcclxuICAgIGRhdGFzZXQgPSBkYXRhc2V0LmNvbmNhdCh2YWx1ZSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXQgZGF0YXNldCBwZXJjZW50aWxlXHJcbiAqIEBwYXJhbSB7YXJyYXl9IHZhbHVlIC0gYXJyYXkgb2YgYXJyYXJ5c1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldERhdGFTZXRQZXJjZW50aWxlKHZhbHVlKSB7XHJcbiAgICBkYXRhU2V0UGVyY2VudGlsZSA9IHZhbHVlO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IGRhdGFzZXQgbWV0YWRhdGFcclxuICogQHBhcmFtIHthcnJheX0gdmFsdWUgLSBhcnJheVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldE1ldGFEYXRhKHZhbHVlKSB7XHJcbiAgICBkYXRhc2V0TWV0YWRhdGEgPSB2YWx1ZTtcclxuICAgIC8vIGluaXRpYWxpemUgdGhlIG1ldGFkYXRhIG1vZGFsXHJcbiAgICBpbml0aWFsaXplTWV0YWRkYXRhKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBZGQgYSBuZXcgZmVhdHVyZSBkaW1lbnNpb24gdG8gdGhlIHN3YXJtIGRhdGFzZXRcclxuICogQHBhcmFtIHthcnJheX0gZGF0YSAtIEFycmF5IG9mIHN3YXJtIHZhbHVlcyBjb25zaXN0aW5nIG9mIFtmZWF0dXJlXzAsZmVhdHVyZV8xLC4uLl1cclxuICogQHBhcmFtIHtzdHJpbmd9IGZlYXR1cmUgLSBzdHJpbmcgYXJyYXkgb2YgdGhlIGZlYXR1cmVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRTd2FybURhdGEoZGF0YSwgZmVhdHVyZSkge1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgLy8gYWRkIHRoZSB0aGUgb2JqZWN0IHRvIHRoZSBhcnJheSBpZiB0aGVyZSBpcyBubyBlbGVtZW50IHlldFxyXG4gICAgICAgIGlmICh0eXBlb2Ygc3dhcm1EYXRhW2ldID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICBzd2FybURhdGEucHVzaCh7fSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBjaGVjayBpZiBpbnRlZ2VyIG9yIGZsb2F0XHJcbiAgICAgICAgaWYgKGRhdGFbaV0gJiYgIShpc05hTihkYXRhW2ldKSkpIHtcclxuICAgICAgICAgICAgc3dhcm1EYXRhW2ldW2ZlYXR1cmVdID0gK2RhdGFbaV07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gaXMgc3RyaW5nXHJcbiAgICAgICAgICAgIHN3YXJtRGF0YVtpXVtmZWF0dXJlXSA9IGRhdGFbaV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEFkZCBhIG5ldyBmZWF0dXJlIGRpbWVuc2lvbiB0byB0aGUgZGF0YXNldFxyXG4gKiBAcGFyYW0ge2FycmF5fSBkYXRhIC0gQXJyYXkgb2YgZmVhdHVyZXMgdmFsdWVzIGNvbnNpc3Rpbmcgb2YgW2ZlYXR1cmVfMCwgZmVhdHVyZV8xLC4uLl1cclxuICogQHBhcmFtIHtzdHJpbmd9IGZlYXR1cmUgLSBzdHJpbmcgYXJyYXkgb2YgdGhlIGZlYXR1cmVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXREYXRhc2V0RmVhdHVyZShkYXRhLCBmZWF0dXJlKSB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAvLyBhZGQgdGhlIHRoZSBvYmplY3QgdG8gdGhlIGFycmF5IGlmIHRoZXJlIGlzIG5vIGVsZW1lbnQgeWV0XHJcbiAgICAgICAgaWYgKHR5cGVvZiBkYXRhc2V0W2ldID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICBkYXRhc2V0LnB1c2goe30pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBwYXJzZSB0aGUgaW50XHJcbiAgICAgICAgZGF0YXNldFtpXVtmZWF0dXJlXSA9ICtkYXRhW2ldO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogU2V0IHRoZSBuZXR3b3JrIHZhbHVlXHJcbiAqIEBwYXJhbSB7YXJyYXl9IHZhbHVlIC0gQXJyYXkgb2Ygb2YgYXJyYXlzIHdpdGggYWxsIHZhbHVlc1xyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gdGhlIGNhbGN1bGF0ZWQgYWRqYWNlbmN5IG1hdHJpeFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldE5ldHdvcmtEYXRhKHZhbHVlKSB7XHJcbiAgICBuZXR3b3JrRGF0YSA9IHZhbHVlO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IHRoZSBuZXR3b3JrIGhpZWFyaGN5IHZhbHVlXHJcbiAqIEBwYXJhbSB7YXJyYXl9IHZhbHVlIC0gQXJyYXkgb2Ygb2YgYXJyYXlzIHdpdGggYWxsIHZhbHVlc1xyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpdGggaGllcmFyY2h5XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2V0SGllcmFyY2h5RGF0YSh2YWx1ZSwgbmV0d29ya19pZCkge1xyXG4gICAgLy8gaWYgdGhlIGVsZW1lbnQgaXMgZW1wdHkgcmVtb3ZlIHRoZSBlbGVtZW50IGZyb20gdGhlIG5ldHdyb2tIaWVyYXJjaHkgb2JqZWN0XHJcbiAgICBpZiAoT2JqZWN0LmtleXModmFsdWUpLmxlbmd0aCA9PT0gMCAmJiB2YWx1ZS5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0KSB7XHJcbiAgICAgICAgZGVsZXRlIG5ldHdvcmtIaWVyYXJjaHlbJ2gnICsgbmV0d29ya19pZF07XHJcbiAgICAgICAgcmVtb3ZlSGllcmFyY2h5TGV2ZWwobmV0d29ya19pZCk7XHJcbiAgICAgICAgcmVtb3ZlSGllcmFyY2h5Q29sb3IobmV0d29ya19pZCk7XHJcbiAgICB9IC8vIGFkZCBpdCB0byB0aGUgbmV0d29yayBoaWVyYXJjaHlcclxuICAgIGVsc2Uge1xyXG4gICAgICAgIG5ldHdvcmtIaWVyYXJjaHlbJ2gnICsgbmV0d29ya19pZF0gPSB2YWx1ZTtcclxuICAgICAgICBzZXRIaWVyYXJjaHlMZXZlbChuZXR3b3JrX2lkLCAyKTtcclxuICAgICAgICBzZXRIaWVyYXJjaHlDb2xvcihuZXR3b3JrX2lkKTtcclxuICAgIH0gLy8gdG9vIG1hbnkgZWxlbWVudHMgY2FudCBiZSBhZGRlZFxyXG5cclxuICAgIC8vY2hhbmdlSGllcmFyY2h5TGVnZW5kKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXQgYW5pbWFsIGlkcyBkYXRhc2V0XHJcbiAqIEBwYXJhbSB7YXJyYXl9IGlkcyAtIEFycmF5IG9mIGFsbCBkaXN0aW5jdCBhbmltYWwgaWRzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2V0QW5pbWFsSWRzKHZhbHVlKSB7XHJcbiAgICBhbmltYWxJZHMgPSB2YWx1ZTtcclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9