!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=6)}([function(e,t){},function(e,t,r){var n=r(2);"string"==typeof n&&(n=[[e.i,n,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};r(4)(n,a);n.locals&&(e.exports=n.locals)},function(e,t,r){(t=r(3)(!1)).push([e.i,"/* Icons for bootstrap 4 */\r\n\r\n.mdi::before {\r\n    font-size: 24px;\r\n    line-height: 14px;\r\n}\r\n\r\n.btn .mdi::before {\r\n    position: relative;\r\n    top: 4px;\r\n}\r\n\r\n.btn-xs .mdi::before {\r\n    font-size: 18px;\r\n    top: 3px;\r\n}\r\n\r\n.btn-sm .mdi::before {\r\n    font-size: 18px;\r\n    top: 3px;\r\n}\r\n\r\n.dropdown-menu .mdi {\r\n    width: 18px;\r\n}\r\n\r\n.dropdown-menu .mdi::before {\r\n    position: relative;\r\n    top: 4px;\r\n    left: -8px;\r\n}\r\n\r\n.nav .mdi::before {\r\n    position: relative;\r\n    top: 4px;\r\n}\r\n\r\n.navbar .navbar-toggle .mdi::before {\r\n    position: relative;\r\n    top: 4px;\r\n    color: #FFF;\r\n}\r\n\r\n.breadcrumb .mdi::before {\r\n    position: relative;\r\n    top: 4px;\r\n}\r\n\r\n.breadcrumb a:hover {\r\n    text-decoration: none;\r\n}\r\n\r\n.breadcrumb a:hover span {\r\n    text-decoration: underline;\r\n}\r\n\r\n.alert .mdi::before {\r\n    position: relative;\r\n    top: 4px;\r\n    margin-right: 2px;\r\n}\r\n\r\n.input-group-addon .mdi::before {\r\n    position: relative;\r\n    top: 3px;\r\n}\r\n\r\n.navbar-brand .mdi::before {\r\n    position: relative;\r\n    top: 2px;\r\n    margin-right: 2px;\r\n}\r\n\r\n.list-group-item .mdi::before {\r\n    position: relative;\r\n    top: 3px;\r\n    left: -3px\r\n}\r\n\r\n/* SVG elements and text */\r\n\r\n#main-vis {\r\n    margin-bottom: 10px;\r\n}\r\n\r\n.svg-container {\r\n    display: inline-block;\r\n    position: relative;\r\n    width: 100%;\r\n    /* aspect ratio */\r\n    vertical-align: top;\r\n    overflow: visible;\r\n}\r\n\r\n.svg-content {\r\n    display: inline-block;\r\n    position: absolute;\r\n    border: 1px solid #000;\r\n}\r\n\r\n#main-vis-legend-div {\r\n    display: none;\r\n}\r\n\r\n#hierarchy-legend-div {\r\n    display: none;\r\n}\r\n\r\n#main-vis-legend {\r\n    float: right;\r\n    display: inline-block;\r\n    position: relative;\r\n    overflow: visible;\r\n    top: 10px;\r\n    left: 10px;\r\n}\r\n\r\n#hierarchy-legend {\r\n    float: left;\r\n    display: inline-block;\r\n    position: relative;\r\n    overflow: visible;\r\n    top: 10px;\r\n    left: 10px;\r\n}\r\n\r\n.svg-content-dendrogram {\r\n    display: inline-block;\r\n    border: 1px solid #000;\r\n}\r\n\r\n.svg-line-chart-container {\r\n    display: inline-block;\r\n    position: relative;\r\n    width: 100%;\r\n    height: auto;\r\n    /* depends on svg ratio */\r\n    padding-bottom: 17%;\r\n    /* aspect ratio */\r\n    vertical-align: top;\r\n    overflow: visible;\r\n}\r\n\r\n.svg-dendrogram-container {\r\n    display: inline-block;\r\n    position: relative;\r\n    height: auto;\r\n    vertical-align: top;\r\n    overflow: visible;\r\n}\r\n\r\n.axis path {\r\n    display: none;\r\n}\r\n\r\n.axis line {\r\n    stroke-opacity: 0.3;\r\n    shape-rendering: crispEdges;\r\n}\r\n\r\n.x {\r\n    font-size: 1em;\r\n}\r\n\r\n.y {\r\n    font-size: 1em;\r\n}\r\n\r\n.axis-line-chart path line {\r\n    fill: none;\r\n    stroke: #000;\r\n    shape-rendering: crispEdges;\r\n}\r\n\r\n.line {\r\n    fill: none;\r\n    stroke-width: 5px;\r\n}\r\n\r\n/* Time  */\r\n\r\n.frame-text {\r\n    margin-top: 0;\r\n    margin-bottom: 0;\r\n    font-size: 2em;\r\n    color: inherit;\r\n    font-weight: 500;\r\n    line-height: 1.1;\r\n}\r\n\r\n/* Slider ticks  */\r\n\r\n.ui-slider-tick {\r\n    display: inline-block;\r\n    width: 3px;\r\n    background: #337ab7;\r\n    height: 0.8em;\r\n    position: absolute;\r\n}\r\n\r\n/* Laoding gif   */\r\n\r\n#loading {\r\n    display: block;\r\n    text-align: center;\r\n}\r\n\r\n/* Color legend    */\r\n\r\n.legend {\r\n    font-size: 12px;\r\n    stroke: #000;\r\n}\r\n\r\n.legend-text {\r\n    font-size: 1.2em;\r\n    color: inherit;\r\n    line-height: 1.1;\r\n}\r\n\r\n.line-chart-legend-text {\r\n    font-size: 2em;\r\n    color: inherit;\r\n    line-height: 1.1;\r\n}\r\n\r\n.time-line {\r\n    fill: none;\r\n    stroke-width: 5px;\r\n    stroke: #000;\r\n}\r\n\r\n/*swarm features */\r\n\r\n.centroid {\r\n    fill-opacity: 0;\r\n    stroke: #e7298a;\r\n    stroke-width: 3px;\r\n}\r\n\r\n.medoid {\r\n    fill: #e7298a !important;\r\n    stroke: #e7298a !important;\r\n}\r\n\r\n.hull-path {\r\n    fill: #fff;\r\n    fill-opacity: 0;\r\n    stroke-width: 3;\r\n    stroke: #252525;\r\n    stroke-opacity: 0.5;\r\n}\r\n\r\n.hierarchy-group {\r\n    stroke-width: 10;\r\n    stroke-linejoin: round;\r\n    opacity: 0.2;\r\n}\r\n\r\n.delaunay-triangulation {\r\n    fill-opacity: 0;\r\n    stroke-width: 2;\r\n    stroke: #000;\r\n    stroke-opacity: 0.4;\r\n}\r\n\r\n/* Color brewer picker div */\r\n\r\n.palette {\r\n    cursor: pointer;\r\n    display: table;\r\n    vertical-align: bottom;\r\n    margin: 4px 0 4px 4px;\r\n    background: #fff;\r\n    border: solid 1px #aaa;\r\n}\r\n\r\n.swatch {\r\n    display: inline-block;\r\n    vertical-align: middle;\r\n    width: 22px;\r\n    height: 22px;\r\n}\r\n\r\n.voronoi {\r\n    fill-opacity: 0;\r\n    stroke-width: 3;\r\n    stroke: #000;\r\n    stroke-opacity: 0.2;\r\n}\r\n\r\n/* Tooltip */\r\n\r\ndiv.tooltip {\r\n    pointer-events: none;\r\n    opacity: 0;\r\n    background: rgb(255, 255, 255) !important;\r\n    border-left-color: #1b809e !important;\r\n    border: 1px solid #eee;\r\n    border-left-width: 5px;\r\n    border-radius: 3px;\r\n    position: absolute;\r\n}\r\n\r\ndiv.tooltip table td:nth-child(2) {\r\n    text-align: center;\r\n    font-weight: bold;\r\n}\r\n\r\n.tooltip-span {\r\n    display: block;\r\n    width: 150px;\r\n    word-wrap: break-word;\r\n    font-size: 1.5em;\r\n}\r\n\r\n.upper-outer-area, .lower-outer-area {\r\n    stroke-width: 1;\r\n    fill: #74a9cf;\r\n    stroke: #3690c0;\r\n}\r\n\r\n.upper-inner-area, .lower-inner-area {\r\n    stroke-width: 1;\r\n    fill: #045a8d;\r\n    stroke: #023858;\r\n}\r\n\r\n.median-line {\r\n    fill: none;\r\n    stroke: #525252;\r\n    stroke-width: 5;\r\n}\r\n\r\n.selected {\r\n    background: #999;\r\n    border: 4px solid #4d4d4d;\r\n    -moz-border-radius: 5px;\r\n    -webkit-border-radius: 5px;\r\n    box-shadow: 1px 2px 4px rgba(0, 0, 0, .4);\r\n}\r\n\r\n.zoom {\r\n    fill: none;\r\n    pointer-events: all;\r\n}\r\n\r\n.x.axis-line-chart>g>text {\r\n    font-size: 3em;\r\n    color: inherit;\r\n    line-height: 1.1;\r\n}\r\n\r\n.arrow {\r\n    stroke-width: 1;\r\n}\r\n\r\n#centroid-line {\r\n    stroke-width: 1;\r\n    stroke: #e7298a;\r\n}\r\n\r\n#centroid-arrow {\r\n    fill: #e7298a;\r\n}\r\n\r\n.metadata-swatch {\r\n    width: 30px;\r\n    height: 30px;\r\n    border-radius: 3px;\r\n    border: 2px solid #666;\r\n}\r\n\r\n.metadata-swatch-clickable:hover {\r\n    border: 2px solid #000;\r\n    cursor: pointer;\r\n}\r\n\r\n.dropdown-menu {\r\n    min-width: 40px;\r\n    padding: 5px;\r\n}\r\n\r\n.metadata-legend {\r\n    list-style: none;\r\n    margin-top: 10px;\r\n}\r\n\r\n.metadata-legend li {\r\n    float: left;\r\n    margin-right: 10px;\r\n}\r\n\r\n.metadata-legend span {\r\n    border: 2px solid #666;\r\n    float: left;\r\n    width: 30px;\r\n    height: 30px;\r\n}\r\n\r\n.metadata-legend .bl-avg {\r\n    background-color: #7fc97f;\r\n}\r\n\r\n.metadata-legend .avg {\r\n    background-color: #fdc086;\r\n}\r\n\r\n.metadata-legend .ab-avg {\r\n    background-color: #386cb0;\r\n}\r\n\r\n.network-edges {\r\n    fill-opacity: 0;\r\n    stroke-width: 2;\r\n}\r\n\r\n.network-background-edges {\r\n    fill-opacity: 0;\r\n    stroke-opacity: 0.25;\r\n    stroke: #737373;\r\n}\r\n\r\n.node text {\r\n    font: 12px sans-serif;\r\n}\r\n\r\n.node--internal text {\r\n    text-shadow: 0 1px 0 #fff, 0 -1px 0 #fff, 1px 0 0 #fff, -1px 0 0 #fff;\r\n}\r\n\r\n.link {\r\n    fill: none;\r\n    stroke: #636363;\r\n    stroke-width: 5px;\r\n}\r\n\r\n#active-network-name {\r\n    font-weight: bold;\r\n    color: #296292;\r\n}\r\n\r\n.active-level {\r\n    fill: #386cb0;\r\n}\r\n\r\n#dendrogram-panel {\r\n    position: initial;\r\n}\r\n\r\n#dendrogram-panel {\r\n    display: none\r\n}\r\n\r\n.show-dendrogram {\r\n    float: right;\r\n    border-radius: 3px;\r\n    border: 1px solid #D1D3D4;\r\n    font-weight: normal;\r\n}\r\n\r\n.show-dendrogram:hover {\r\n    background: #D1D3D4;\r\n}\r\n\r\n.dendrogram-text {\r\n    font-size: 10em !important;\r\n}\r\n\r\n.highlight-hierarchy {\r\n    fill: #252525;\r\n    stroke: #252525;\r\n    stroke-width: 10;\r\n    stroke-linejoin: round;\r\n    opacity: 0.3;\r\n}\r\n\r\n.animal-highlight {\r\n    fill: #c51b7d !important;\r\n}\r\n\r\n#dendrogram-buttons-div .btn span.glyphicon {\r\n    opacity: 0;\r\n}\r\n\r\n#dendrogram-buttons-div .btn.active span.glyphicon {\r\n    opacity: 1;\r\n}\r\n\r\n#dendrogram-buttons-div {\r\n    border: 2px solid #D1D3D4;\r\n    border-radius: 5px;\r\n}\r\n\r\n#dendrogram-legend {\r\n    margin-left: 20px;\r\n}\r\n\r\n.intersection {\r\n    fill: url(#striped) !important;\r\n    stroke: #67000d;\r\n}\r\n\r\n.sym-difference {\r\n    fill: url(#striped) !important;\r\n    stroke: #67000d;\r\n}\r\n\r\n.modal-lg {\r\n    max-width: 80%;\r\n}\r\n\r\n.background-image {\r\n    background: #fff;\r\n}",""]),e.exports=t},function(e,t,r){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r=e[1]||"",n=e[3];if(!n)return r;if(t&&"function"==typeof btoa){var a=(o=n,s=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(l," */")),i=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[r].concat(i).concat([a]).join("\n")}var o,s,l;return[r].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(r,"}"):r})).join("")},t.i=function(e,r,n){"string"==typeof e&&(e=[[null,e,""]]);var a={};if(n)for(var i=0;i<this.length;i++){var o=this[i][0];null!=o&&(a[o]=!0)}for(var s=0;s<e.length;s++){var l=[].concat(e[s]);n&&a[l[0]]||(r&&(l[2]?l[2]="".concat(r," and ").concat(l[2]):l[2]=r),t.push(l))}},t}},function(e,t,r){var n,a,i={},o=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===a&&(a=n.apply(this,arguments)),a}),s=function(e){return document.querySelector(e)},l=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var r=s.call(this,e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}}(),d=null,c=0,h=[],p=r(5);function u(e,t){for(var r=0;r<e.length;r++){var n=e[r],a=i[n.id];if(a){a.refs++;for(var o=0;o<a.parts.length;o++)a.parts[o](n.parts[o]);for(;o<n.parts.length;o++)a.parts.push(x(n.parts[o],t))}else{var s=[];for(o=0;o<n.parts.length;o++)s.push(x(n.parts[o],t));i[n.id]={id:n.id,refs:1,parts:s}}}}function m(e,t){for(var r=[],n={},a=0;a<e.length;a++){var i=e[a],o=t.base?i[0]+t.base:i[0],s={css:i[1],media:i[2],sourceMap:i[3]};n[o]?n[o].parts.push(s):r.push(n[o]={id:o,parts:[s]})}return r}function f(e,t){var r=l(e.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=h[h.length-1];if("top"===e.insertAt)n?n.nextSibling?r.insertBefore(t,n.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),h.push(t);else if("bottom"===e.insertAt)r.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var a=l(e.insertInto+" "+e.insertAt.before);r.insertBefore(t,a)}}function g(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=h.indexOf(e);t>=0&&h.splice(t,1)}function v(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),y(t,e.attrs),f(e,t),t}function y(e,t){Object.keys(t).forEach((function(r){e.setAttribute(r,t[r])}))}function x(e,t){var r,n,a,i;if(t.transform&&e.css){if(!(i=t.transform(e.css)))return function(){};e.css=i}if(t.singleton){var o=c++;r=d||(d=v(t)),n=w.bind(null,r,o,!1),a=w.bind(null,r,o,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",y(t,e.attrs),f(e,t),t}(t),n=C.bind(null,r,t),a=function(){g(r),r.href&&URL.revokeObjectURL(r.href)}):(r=v(t),n=$.bind(null,r),a=function(){g(r)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else a()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=o()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var r=m(e,t);return u(r,t),function(e){for(var n=[],a=0;a<r.length;a++){var o=r[a];(s=i[o.id]).refs--,n.push(s)}e&&u(m(e,t),t);for(a=0;a<n.length;a++){var s;if(0===(s=n[a]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete i[s.id]}}}};var k,b=(k=[],function(e,t){return k[e]=t,k.filter(Boolean).join("\n")});function w(e,t,r,n){var a=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=b(t,a);else{var i=document.createTextNode(a),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(i,o[t]):e.appendChild(i)}}function $(e,t){var r=t.css,n=t.media;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}function C(e,t,r){var n=r.css,a=r.sourceMap,i=void 0===t.convertToAbsoluteUrls&&a;(t.convertToAbsoluteUrls||i)&&(n=p(n)),a&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");var o=new Blob([n],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var r=t.protocol+"//"+t.host,n=r+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var a,i=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?e:(a=0===i.indexOf("//")?i:0===i.indexOf("/")?r+i:n+i.replace(/^\.\//,""),"url("+JSON.stringify(a)+")")}))}},function(e,t,r){"use strict";let n,a;r.r(t),r.d(t,"dataset",(function(){return X})),r.d(t,"datasetMetadata",(function(){return Z})),r.d(t,"swarmData",(function(){return J})),r.d(t,"dataSetPercentile",(function(){return q})),r.d(t,"networkData",(function(){return K})),r.d(t,"networkHierarchy",(function(){return Q})),r.d(t,"animalIds",(function(){return ee})),r.d(t,"addToDataset",(function(){return te})),r.d(t,"setDataSetPercentile",(function(){return re})),r.d(t,"setMetaData",(function(){return ne})),r.d(t,"setSwarmData",(function(){return ae})),r.d(t,"setDatasetFeature",(function(){return ie})),r.d(t,"setNetworkData",(function(){return oe})),r.d(t,"setHierarchyData",(function(){return se})),r.d(t,"setAnimalIds",(function(){return le}));colorbrewer.BuYlBu;let i={};var o=r(0);let s=!0;function l(e){s="boolean"==typeof e&&e}function d(){l(!1),$("#play-button").removeClass("active"),$("#play-button").prop("disabled",!0),$("#play-icons").hide(),$("#play-loading").show()}function c(){l(!0),$("#play-button").addClass("active"),$("#play-button").prop("disabled",!1),$("#play-loading").hide(),$("#play-icons").show()}function h(e){let t=[.05,.25,.5,.75,.95],r=[];if(0===e.length)return 0;e.sort((function(e,t){return e-t}));for(let n=0;n<t.length;n++){let a=(e.length-1)*t[n],i=Math.floor(a),o=i+1,s=a%1;o>=e.length?r.push(e[i]):r.push(e[i]*(1-s)+e[o]*s)}return r}function p(){$(".draw-details").click((function(){$(this).find("input:checkbox").prop("checked")?new C(this,J).disableLineChart():($(".trendChartData").hide(),$("#trendChartLegend").hide(),$("#lineChartLegend").show(),$(".lineChartButton").prop("checked",!0).prop("disabled",!1),$(".line-chart-check-box").attr("disabled",!1),$(".lineChartLine").attr("visibility","visible"))}))}String.prototype.hashCode=function(){var e,t=0;if(0===this.length)return t;for(e=0;e<this.length;e++)t=(t<<5)-t+this.charCodeAt(e),t|=0;return t},d3.selection.prototype.moveToBack=function(){return this.each((function(){var e=this.parentNode.firstChild;e&&this.parentNode.insertBefore(this,e)}))};let u,m,f,g,v={},y=1;class x{constructor(){this.minPoint=parameters.min.geometry.coordinates,this.maxPoint=parameters.max.geometry.coordinates,this.tankWidth=1.02*(this.maxPoint[0]-this.minPoint[0]),this.tankHeight=1.02*(this.maxPoint[1]-this.minPoint[1]),this.indexTime=0,this.svgContainer=d3.select("#main-vis").classed("svg-container",!0).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 "+this.tankWidth+" "+this.tankHeight).classed("svg-content",!0).attr("id","main-vis-svg"),this.zoom=d3.zoom().scaleExtent([1,6]).on("zoom",()=>{d3.event.transform.x=Math.min(0,this.tankWidth*(d3.event.transform.k-1),Math.max(this.tankWidth*(1-d3.event.transform.k),d3.event.transform.x)),d3.event.transform.y=Math.min(0,this.tankHeight*(d3.event.transform.k-1),Math.max(this.tankHeight*(1-d3.event.transform.k),d3.event.transform.y)),this.zoomGroup.attr("transform",d3.event.transform),gXaxis.call(xAxis.scale(d3.event.transform.rescaleX(m))),gYaxis.call(yAxis.scale(d3.event.transform.rescaleY(f)))}),this.zoomGroup=this.svgContainer.append("svg:g"),this.tank=this.zoomGroup.append("svg:g").attr("class","tank").attr("transform",()=>"scale("+(parameters.inverted_x?-1:1)+","+(parameters.inverted_y?-1:1)+")"),this.activeScale="black",this.colorScale={type:"Linear",color:colorbrewer.BuYlBu},this.legendWidth=550,this.legendHeight=60,this.svgLegend=d3.select("#main-vis-legend-div").append("svg").attr("id","main-vis-legend").attr("width",this.legendWidth).attr("height",this.legendHeight),this.medoidAnimal=-1,this.activeAnimals=[],this.arrayAnimals=X.filter(e=>e.t===this.indexTime),this.id=$(".show-dendrogram.btn-primary").attr("data"),this.playBoolean=!0,this.hierarchyLevels={},this.hierarchyGroupStdev={},this.brush=d3.brush().extent([[0,0],[this.tankWidth,this.tankHeight]]),this.svgLegend_netw=d3.select("#hierarchy-legend-div"),this.dendrozoom=this.zoomGroup,this.networkColor={},this.hierarchyColors={},this.networkHierarchy=Q,this.spatialView=d3.select(".tank"),this.tooltipDiv=d3.select("#dendrogram-tooltip").style("left","0px").style("top","0px").on("mouseover",()=>{this.tooltipDiv.style("opacity",1)})}setIndexTime(e){"number"==typeof e&&this.indexTime<=J.length?this.indexTime=e:this.indexTime=0}setActiveScale(e){this.activeScale=e}setActiveAnimals(e){this.activeAnimals=e}decIndexTime(){this.indexTime=this.indexTime-1}updateLineChart(){if(d3.select("#lineChartTimeLine")&&J[Math.ceil(this.indexTime/y)]){let e=Math.ceil(this.indexTime/y);this.indexTime%25==0&&(d3.select("#convex_hull_areaLineValue").text(J[e].convex_hull_area+"mm²"),d3.select("#speedLineValue").text(J[e].speed+"mm/s"),d3.select("#accelerationLineValue").text(J[e].acceleration+"mm/s²"),d3.select("#distance_centroidLineValue").text(J[e].distance_centroid+"mm"),d3.select("#directionLineValue").text(J[e].direction+"°"),d3.select("#polarisationLineValue").text(J[e].polarisation)),d3.select("#lineChartTimeLine").attr("transform","translate("+g(e)+",0)")}}returnColorScale(){return"Linear"===this.colorScale.type?d3.scaleLinear().domain(q[this.activeScale]).range(this.colorScale.color):"Threshold"===this.colorScale.type?d3.scaleThreshold().domain(q[this.activeScale]).range(this.colorScale.color):void 0}initColorPicker(){d3.select(".colors-body").selectAll(".palette").data(d3.entries(colorbrewer)).enter().append("span").attr("class","palette").attr("title",e=>e.key).on("click",e=>{$(".palette").removeClass("selected"),$('.palette[title="'+e.key+'"]').addClass("selected"),this.colorScale.color=colorbrewer[e.key],this.changelegend(),$("#play-button").hasClass("active")||(this.decIndexTime(),this.draw())}).selectAll(".swatch").data(e=>e.value).enter().append("span").attr("class","swatch").style("background-color",e=>e),$('.palette[title="BuYlBu"]').addClass("selected")}changelegend(){let e,t;if($("#main-vis-legend-div").show(),"black"!==this.activeScale){var r=this.returnColorScale();e=this.svgLegend.selectAll("rect.legend").data(r.range()),t=this.svgLegend.selectAll("text.legend-text").data(r.domain())}else e=this.svgLegend.selectAll("rect.legend").data([]),t=this.svgLegend.selectAll("text.legend-text").data([]),$("#main-vis-legend-div").hide();e.style("fill",(function(e){return e})),e.enter().append("rect").attr("class","legend").attr("width",50).attr("height",20).attr("y",0).attr("x",(function(e,t){return 50+50*t+"px"})).style("fill",(function(e){return e})),e.exit().remove(),t.text((function(e){return Math.ceil(2*e)/2})),t.enter().append("text").attr("class","legend-text").attr("y",40).attr("x",(function(e,t){return 50+50*t+5+"px"})).text((function(e){return Math.ceil(2*e)/2})),t.exit().remove()}draw(){let e=$('input[type="radio"].group-playback-rate:checked').val(),t=$('input[type="radio"].group-size:checked').val();this.arrayAnimals=X.filter(e=>e.t===this.indexTime),setTimeout(()=>{var e;this.drawDendrogram(),this.svgContainer.select(".frame-text").text(Math.floor(this.indexTime/1500)%60+":"+Math.floor(this.indexTime/parameters.fps)%60+"::"+this.indexTime%parameters.fps),this.indexTime%parameters.fps==0&&(e=this.indexTime,n.slider("value",e));let r,s=this.tank.selectAll("g.animal").data(this.arrayAnimals);if(this.indexTime in K){let e=K[this.indexTime];if(M={},e=e.map(e=>{let t=this.arrayAnimals.filter((function(t){return t.a===e.s}))[0],r=this.arrayAnimals.filter((function(t){return t.a===e.e}))[0];return{node1:t.a,node2:r.a,start:t.p,end:r.p,val:e.v}}),e.forEach((function(e){$("#mc-"+e.node1+"-"+e.node2).css("fill",G(e.val)),$("#mc-"+e.node2+"-"+e.node1).css("fill",G(e.val))})),I){let t=[];for(let r=0;r<e.length;r++)t.push(e[r].val);U(function(e){if(0===e.length)return 0;e.sort((function(e,t){return e-t}));let t=.05*(e.length-1),r=Math.floor(t),n=r+1,a=t%1;return n>=e.length?1-e[r]:1-(e[r]*(1-a)+e[n]*a)}(t))}e=e.filter((function(e){return e.val<=1-W})),r=this.tank.select("#network-group").selectAll("line.network-edges").data(e),r.attr("x1",(function(e){return e.start[0]})).attr("y1",(function(e){return-e.start[1]})).attr("x2",(function(e){return e.end[0]})).attr("y2",(function(e){return-e.end[1]})).attr("stroke",(function(e){return G(1-e.val)})).attr("stroke-opacity",(function(e){return 1-e.val})),r.enter().append("line").attr("class","network-edges").attr("x1",(function(e){return e.start[0]})).attr("y1",(function(e){return-e.start[1]})).attr("x2",(function(e){return e.end[0]})).attr("y2",(function(e){return-e.end[1]})).attr("stroke",(function(e){return G(e.val)})).attr("stroke-opacity",(function(e){return e.val}))}else r=this.tank.selectAll("line.network-edges").data([]);var l,d;r.exit().remove(),$("#draw-triangulation").is(":checked")?((l=this.tank.select("#delaunay-triangulation-group").selectAll("path.delaunay-triangulation").data([J[this.indexTime].triangulation])).attr("d",e=>e),l.enter().append("path").attr("class","delaunay-triangulation").attr("d",e=>e)):l=this.tank.selectAll("path.delaunay-triangulation").data([]),l.exit().remove(),$("#draw-voronoi").is(":checked")?((d="voronoi"in J[0]?this.tank.select("#vornoi-group").selectAll("path.voronoi").data(J[this.indexTime].voronoi.split(";")):this.tank.select("#vornoi-group").selectAll("path.voronoi").data([J[this.indexTime].voronoi])).attr("d",e=>e),d.enter().append("path").attr("class","voronoi").attr("d",e=>e)):d=this.tank.select("#vornoi-group").selectAll("path.voronoi").data([]),d.exit().remove();let c=s.enter().append("g").attr("class","animal").attr("id",e=>"animal-"+e.a);if(c.append("circle").attr("r",1.5*t).attr("cx",e=>e.p[0]).attr("cy",e=>-e.p[1]).on("mouseover",e=>{!function(e){for(let t=0;t<Z.length;t++)e.a===Z[t].animal_id&&(a.style("left",d3.event.pageX+5+"px").style("top",d3.event.pageY-100+"px").style("opacity",1),a.select("#tooltip-animal-id").html(Z[t].animal_id),a.select("#tooltip-species").html(Z[t].species),a.select("#tooltip-sex").html(Z[t].sex),a.select("#tooltip-size").html(Z[t].size),a.select("#tooltip-weight").html(Z[t].weight))}(e)}).on("mouseout",()=>{a.transition().duration(500).style("opacity",0)}).on("click",e=>{this.activeAnimals.includes(e.a)?this.activeAnimals=this.activeAnimals.filter(t=>t!==e.a):this.activeAnimals.push(e.a),$("#play-button").hasClass("active")||(this.indexTime--,this.draw())}),s.select("circle").attr("cx",e=>e.p[0]).attr("cy",e=>-e.p[1]).attr("r",t),c.append("svg:defs").append("svg:marker").attr("id",e=>"arrow-marker-"+e.a).attr("refX",2).attr("refY",6).attr("markerWidth",13).attr("markerHeight",13).attr("orient","auto").append("svg:path").attr("d","M2,2 L2,11 L10,6 L2,2"),c.append("line").attr("class","arrow").attr("marker-end",e=>"url(#arrow-marker-"+e.a+")"),$("#draw-direction").is(":checked")?s.select("line").attr("x1",e=>e.p[0]).attr("y1",e=>-e.p[1]).attr("x2",e=>e.p[0]+2*t).attr("y2",e=>-e.p[1]).attr("transform",e=>"rotate("+-e.direction+" "+e.p[0]+" "+-e.p[1]+")"):$(".arrow").hide(),s.exit().remove(),$("#draw-convex-hull").is(":checked")){var h=this.tank.selectAll("path.hull-path").data([J[this.indexTime].convex_hull]);h.attr("d",e=>e),h.enter().append("path").attr("class","hull-path").attr("d",e=>e)}else h=this.tank.select("path.hull-path").data([]);if(h.exit().remove(),"black"!==this.activeScale){var p=this.returnColorScale();s.transition().duration(10).style("fill",e=>p(e[this.activeScale])).attr("stroke",e=>p(e[this.activeScale]))}else s.style("fill","#000").attr("stroke","#000"),$.isEmptyObject(i)||Object.keys(i).forEach((function(e){d3.select("#animal-"+e).style("fill",i[e]).attr("stroke",i[e])}));this.activeAnimals.length?(s.style("opacity",e=>this.activeAnimals.includes(e.a)?1:.25),$("#remove-active-selected-button").is(":disabled")&&($("#remove-active-selected-button").prop("disabled",!1),$("#visual-parameter-button").prop("disabled",!1)),o.trackingBoolean&&Object(o.addTrackedData)(this.arrayAnimals[0].t,this.activeAnimals)):($("#remove-active-selected-button").is(":disabled")||($("#remove-active-selected-button").prop("disabled",!0),$("#visual-parameter-button").prop("disabled",!0)),s.style("opacity",1)),d3.select(".centroid").attr("cx",()=>"centroid"in J[0]?J[this.indexTime].centroid[0]:0).attr("cy",()=>"centroid"in J[0]?-J[this.indexTime].centroid[1]:0),$("#draw-direction").is(":checked")&&J[this.indexTime].centroid&&$("#draw-centroid").is(":checked")?(d3.select("#centroid-line").classed("hidden",!1),d3.select("#centroid-line").attr("x1",()=>J[this.indexTime].centroid[0]).attr("y1",()=>-J[this.indexTime].centroid[1]).attr("x2",()=>J[this.indexTime].centroid[0]+2*t).attr("y2",()=>-J[this.indexTime].centroid[1]).attr("transform",()=>"rotate("+-J[this.indexTime].direction+" "+J[this.indexTime].centroid[0]+" "+-J[this.indexTime].centroid[1]+")")):d3.select("#centroid-line").attr("class","hidden"),-1!==this.medoidAnimal&&(d3.selectAll("#animal-"+this.medoidAnimal).classed("medoid",!1),this.medoidAnimal=J[this.indexTime].medoid,d3.selectAll("#animal-"+this.medoidAnimal).classed("medoid",!0)),this.indexTime++,this.updateLineChart(),this.indexTime>=J.length?(this.indexTime=0,this.draw()):this.playBoolean&&this.draw()},e)}initDendrogram(){let e=d3.zoom().scaleExtent([1,10]).on("zoom",()=>{d3.event.transform.x=Math.min(0,5e3*(d3.event.transform.k-1),Math.max(5e3*(1-d3.event.transform.k),d3.event.transform.x)),d3.event.transform.y=Math.min(0,5e3*(d3.event.transform.k-1),Math.max(5e3*(1-d3.event.transform.k),d3.event.transform.y)),this.dendrozoom.attr("transform",d3.event.transform)}),t=d3.select("#dendrogram-panel").classed("svg-dendrogram-container",!0).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 5000 5000").classed("svg-content-dendrogram",!0).call(e);z(),this.dendrozoom=t.append("g").attr("transform","translate(20,20)").append("svg:g");d3.tree().size([4800,4800]);$("#dendrogram-panel-level-slider").slider({range:"max",min:2,max:2,step:1,value:this.hierarchyLevels.h0,slide:(e,t)=>{let r=$(".show-dendrogram.btn-primary").attr("data");this.setHierarchyLevel(r,t.value),this.updateDendrogram(),$("#play-button").hasClass("active")||(this.decIndexTime(),this.draw(),this.drawDendrogram())}});let r=100*j;this.svgLegend_netw=d3.select("#hierarchy-legend-div").append("svg").attr("id","hierarchy-legend").attr("width",r).attr("height",60),this.spatialView.append("defs").append("svg:pattern").attr("id","striped").attr("patternUnits","userSpaceOnUse").attr("width","20").attr("height","5").attr("patternTransform","rotate(60)").append("rect").attr("width",5).attr("height",10).attr("transform","translate(0,0)").style("fill","#67000d")}click(e){setActiveAnimals(e.data.name),$("#play-button").hasClass("active")||(this.decIndexTime(),this.draw())}sethierarchyGroupStdev(e,t){e in this.hierarchyGroupStdev?this.hierarchyGroupStdev[e].push(t):this.hierarchyGroupStdev[e]=[t]}resethierarchyGroupStdev(){this.hierarchyGroupStdev={}}getHierarchyLevel(e,t){let r=[],n=this.hierarchyLevels["h"+t],a=e.children;for(let t=1;t<e.height;t++){if(a[0]&&a[0].depth===n){a.forEach((function(e){void 0!==e.data.name&&r.push(e.data.name)}));break}let e=[];a.forEach((function(t){void 0!==t.children&&(e=e.concat(t.children))})),a=e}return r}setHierarchyLevel(e,t){this.hierarchyLevels["h"+e]=t}setHierarchyColor(e){for(let t in this.networkColor)if(t==="h"+e)return void(this.hierarchyColors["h"+e]=this.networkColor[t]);for(let t=0;t<H.length;t++){let r=!0;for(let e in this.hierarchyColors)this.hierarchyColors.hasOwnProperty(e)&&this.hierarchyColors[e]===H[t]&&(r=!1);if(r){if(0===Object.keys(this.networkColor).length)return void(this.hierarchyColors["h"+e]=H[t]);for(let r in this.networkColor)if(this.networkColor[r]!==H[t])return void(this.hierarchyColors["h"+e]=H[t])}}}removeHierarchyColor(e){delete this.hierarchyColors["h"+e]}removeHierarchyLevel(e){delete this.hierarchyLevels["h"+e]}updateDendrogram(){let e=$(".show-dendrogram.btn-primary").attr("data"),t=$(".show-dendrogram.btn-primary").attr("name");$("#dendrogram-panel-name").text(t),$("#dendrogram-panel-level-slider").val(this.hierarchyLevels["h"+e]),$("#dendrogram-panel-level-text").text(this.hierarchyLevels["h"+e])}getHierarchyVertices(e){let t=[];return e.forEach(e=>{let r=[];for(let t=0;t<e.length;t++){let n=this.arrayAnimals.find(r=>r.a===e[t]);n&&r.push([n.p[0],-n.p[1]])}r.length>=3&&t.push(d3.polygonHull(r))}),t}drawHierarchy(){let e=Object.keys(this.networkHierarchy).map((function(e){return e.replace("h","")})),t=[];for(let r=0;r<e.length;r++){let n=this.networkHierarchy["h"+e[r]][this.indexTime],a=d3.hierarchy(n,(function(e){return e.children})),i=20,o=5e3,s=5e3;a=d3.tree().size([s-10*i,o-10*i])(a);let l=a.children[0];E===e[r]&&(networkHierarchyIds=this.getHierarchyLevel(l,e[r])),t.push(this.getHierarchyVertices(this.getHierarchyLevel(l,e[r])))}t.length;let r=this.spatialView.selectAll("g.hierarchy-group").data(t);r.enter().append("g").attr("class",(function(t,r){return"hierarchy-group h"+e[r]})).style("fill",(t,r)=>this.hierarchyColors["h"+e[r]]).attr("stroke",(t,r)=>this.hierarchyColors["h"+e[r]]).moveToBack(),r.attr("class",(function(t,r){return"hierarchy-group h"+e[r]})),r.exit().remove();let n=r.selectAll("path.hierarchy-hull-path").data((function(e){return e}));n.enter().append("path").attr("class","hierarchy-hull-path").attr("d",(function(e){return"M"+e.join("L")+"Z"})),n.attr("d",(function(e){return"M"+e.join("L")+"Z"})),n.exit().remove()}addHighlightSpatialView(e){let t=[];for(let r=0;r<e.length;r++){let n=this.spatialView.select("#animal-"+e[r]),a=n.data()[0].p;t.push([a[0],-a[1]]),n.classed("animal-highlight",!0)}this.spatialView.append("path").attr("class","highlight-hierarchy").attr("d","M"+d3.polygonHull(t).join("L")+"Z")}removeHighlightSpatialView(){d3.selectAll(".animal").classed("animal-highlight",!1),d3.selectAll(".highlight-hierarchy").remove()}drawDendrogram(){var e=t=>{t.children&&t.depth<=2?(t._children=t.children,t._children.forEach(e)):t.children=0};let t=$(".show-dendrogram.btn-primary").attr("data");if(!$.isEmptyObject(this.networkHierarchy)&&t){let n=this.networkHierarchy["h"+t][this.indexTime],a=d3.hierarchy(n,(function(e){return e.children}));a=a.children[0],a.children.forEach(e);let i=20,o=5e3,s=5e3;if(a=d3.tree().size([s-10*i,o-10*i])(a),$(".show-dendrogram.btn-primary").length){$("#dendrogram-panel-level-slider").slider("option","max",a.height-1).slider("value",this.hierarchyLevels["h"+t]);let e=this.dendrozoom.selectAll("path.link").data(a.descendants().slice(1));e.enter().append("path").attr("class","link").attr("d",D),e.attr("d",D),e.exit().remove();let n=this.dendrozoom.selectAll(".node").data(a.descendants());var r=n.enter().append("g").attr("class",(function(e){return"node"+(e.children?" node--internal":" node--leaf")})).attr("transform",(function(e){return"translate("+e.x+","+e.y+")"}));r.append("circle").attr("r",e=>e.depth===this.hierarchyLevels["h"+t]?40+e.data.name.length:20+e.data.name.length).attr("class",e=>{if(e.depth===this.hierarchyLevels["h"+t])return"active-level"}).attr("id",e=>"h"+e.data.name.toString().hashCode()).on("click",this.click).on("mouseover",e=>{this.tooltipDiv.style("left",d3.event.pageX+5+"px").style("top",d3.event.pageY+5+"px").style("opacity",1),this.tooltipDiv.select(".tooltip-span").html(e.data.name.toString()),this.addHighlightSpatialView(e.data.name)}).on("mouseout",()=>{this.tooltipDiv.transition().duration(500).style("opacity",0),this.removeHighlightSpatialView()}),r.append("text").attr("class","dendrogram-text").attr("x",150).attr("y",-150).text(e=>e.data.name.length),r.attr("transform",e=>"translate("+e.x+","+e.y+")"),n.attr("transform",e=>"translate("+e.x+","+e.y+")").select("circle").attr("r",e=>e.depth===this.hierarchyLevels["h"+t]?40+e.data.name.length:20+e.data.name.length).attr("class",e=>e.depth===this.hierarchyLevels["h"+t]?"active-level":"").attr("id",e=>"h"+e.data.name.toString().hashCode()),n.select("text").text(e=>e.data.name.length),n.exit().remove(),Object.keys(this.hierarchyGroupStdev).length?("none"==$("#dendrogram-legend").css("display")&&$("#dendrogram-legend").show(),setTimeout(()=>{n.select("circle").style("fill",(function(e){return"h"+e.data.name.toString().hashCode()in M?standardDeviationColorScale(standardDeviation(M["h"+e.data.name.toString().hashCode()])):e.depth!==(void 0)["h"+this.id]?"":"#000"}))},250)):"none"!==$("#dendrogram-legend").css("display")&&$("#dendrogram-legend").hide()}}$.isEmptyObject(this.networkHierarchy)||this.drawHierarchy()}changeHierarchyLegend(){let e,t;0!==Object.keys(this.hierarchyColors).length||0!==Object.keys(this.networkColor).length?$("#hierarchy-legend-div").show():$("#hierarchy-legend-div").hide();let r=[],n=[];if($(".show-dendrogram").each((e,t)=>{null!=this.hierarchyColors["h"+$(t).attr("data")]&&null!=$(t).attr("name")&&(r.push(this.hierarchyColors["h"+$(t).attr("data")]),n.push($(t).attr("name")))}),0!==Object.keys(this.networkColor).length)for(let e in this.networkColor)-1===r.indexOf(this.networkColor[e])&&(r.push(this.networkColor[e]),n.push("Network"));e=this.svgLegend_netw.selectAll("rect.legend").data(r),t=this.svgLegend_netw.selectAll("text.legend-text").data(n),e.style("fill",(function(e){return e})),e.enter().append("rect").attr("class","legend").attr("width",50).attr("height",20).attr("y",0).attr("x",(function(e,t){return 50+2.5*t*50+"px"})).style("fill",(function(e){return e})),e.exit().remove(),t.text((function(e){return e})),t.enter().append("text").attr("class","legend-text").attr("y",40).attr("x",(function(e,t){return 50+2.5*t*50+"px"})).text((function(e){return e})),t.exit().remove()}setnetworkColor(e){e>=0?this.networkColor["h"+e]="#08306b":this.networkColor={},this.changeHierarchyLegend()}setHierarchyData(e,t){0===Object.keys(e).length&&e.constructor===Object?(delete this.networkHierarchy["h"+t],this.removeHierarchyLevel(t),this.removeHierarchyColor(t)):(this.networkHierarchy["h"+t]=e,this.setHierarchyLevel(t,2),this.setHierarchyColor(t)),this.changeHierarchyLegend()}getNetworkHierarchyData(e){$.ajax({url:"/api/dataset/network/hierarchy/"+parameters.id+"/"+e,dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:"application/vnd.api+json"},success:t=>{t.length&&this.setHierarchyData(JSON.parse(t[0].hierarchy),e),c()}})}}class k extends x{constructor(e){super(e),this.spatialViewInit()}cp_listener(){$("#play-button").click(()=>{!0===$("#play-button").hasClass("active")?(this.playBoolean=!1,$(".mdi-pause").hide(),$(".mdi-play").show()):(this.playBoolean=!0,$(".mdi-play").hide(),$(".mdi-pause").show(),this.setIndexTime(n.slider("value")),$(".brush").remove(),this.draw())}),$("#next-frame-button").click(()=>{!0===$("#play-button").hasClass("active")&&(this.playBoolean=!1),$("#play-button").removeClass("active"),this.draw()}),$("#brushing-button").click(()=>{this.playBoolean=!1,$("#play-button").removeClass("active"),$("#brushing-button").hasClass("active")?$(".brush").remove():(this.brush=d3.brush().extent([[0,0],[this.tankWidth,this.tankHeight]]).on("end",()=>{var e=d3.event.selection;this.activeAnimals=[],this.arrayAnimals.map(t=>{var r=[t.p[0],t.p[1]];e[0][0]<=r[0]&&r[0]<=e[1][0]&&e[0][1]<=r[1]&&r[1]<=e[1][1]&&this.activeAnimals.push(t.a)}),$("#play-button").hasClass("active"),$("#brushing-button").removeClass("active"),$(".brush").remove()}),d3.select("#main-vis-svg").append("g").attr("class","brush").call(this.brush))}),$("#remove-active-selected-button").click(()=>{$("#remove-active-selected-button").is(":disabled")||($("#remove-active-selected-button").prop("disabled",!0),this.setActiveAnimals([]),resetTrackedData(),$("#visual-parameter-button").prop("disabled",!0).removeClass("active"),$("#play-button").hasClass("active")||(this.decIndexTime(),this.draw()))}),$("#visual-parameter-button").click(()=>{!0===$("#visual-parameter-button").hasClass("active")?setTrackingBoolean(!1):setTrackingBoolean(!0)}),$("#calculate-parameter-button").click(()=>{$("#calculate-parameter-button").hasClass("active")||(setTrackingBoolean(!1),sendTrackedData(),$("#calculate-parameter-button").prop("disabled",!0),$("#calculate-parameter-button").removeClass("active"),$("#visual-parameter-button").removeClass("active"))}),$("#background-color").change(()=>{let e=$('input[type="radio"].group-background:checked').val();$("#main-vis-svg").css("background-color",e)}),$("#draw-axis").on("change",()=>{this.checked?($("#main-vis g.x.axis").show(),$("#main-vis g.y.axis").show()):($("#main-vis g.x.axis").hide(),$("#main-vis g.y.axis").hide())}),$("#draw-time").on("change",()=>{this.checked?$("#main-vis .frame-text").show():$("#main-vis .frame-text").hide()}),$("#network-background").on("change",()=>{this.checked?setNetworkBackground(!0):setNetworkBackground(!1)}),$("#network-background-limit").val(1),$("#network-background-limit").on("change",()=>{let e=$(this).val();$.isNumeric(e)&&e>0?setNetworkBackgroundLimit(e):$(this).val(1)}),$("#color-scale-radio-form input").on("change",()=>{this.colorScale.type=$("input[name=color-scale-radio]:checked","#color-scale-radio-form").val(),$("#play-button").hasClass("active")||(this.decIndexTime(),this.draw())})}sf_listeners(){$("#draw-direction").click(()=>{$("#draw-direction").is(":checked")?("direction"in X[0]||(d(),Y("direction")),$(".arrow").show()):$(".arrow").hide(),$("#play-button").hasClass("active")||this.decIndexTime()}),$("#draw-medoid").click(()=>{$("#draw-medoid").is(":checked")?("medoid"in J[0]||F("medoid"),this.setMedoidAnimal(J[this.indexTime].medoid),d3.selectAll("#animal-"+this.medoidAnimal).classed("medoid",!0)):(d3.selectAll("#animal-"+this.medoidAnimal).classed("medoid",!1),this.setMedoidAnimal(-1))}),$("#draw-centroid").click(()=>{$("#draw-centroid").is(":checked")?("centroid"in J[0]||F("centroid"),$("#g-centroid").show()):$("#g-centroid").hide()}),$("#draw-convex-hull").click(()=>{$("#draw-convex-hull").is(":checked")&&("hull"in J[0]||F("convex_hull"))}),$("#draw-triangulation").click(()=>{$("#draw-triangulation").is(":checked")&&("triangulation"in J[0]||F("triangulation"),$("#play-button").hasClass("active")||this.decIndexTime())}),$("#draw-voronoi").click(()=>{$("#draw-voronoi").is(":checked")&&("voronoi"in J[0]||F("voronoi"),$("#play-button").hasClass("active")||this.decIndexTime())})}af_listeners(){$("#draw-speed").click(()=>{$(".draw-details").hide().find("input:checkbox").prop("checked",!0).click(),$("#draw-speed").is(":checked")?("speed"in X[0]||(d(),Y("speed")),$("#draw-speed-details").show(),$("#draw-acceleration").prop("checked",!1),$("#draw-distance_centroid").prop("checked",!1),$("#draw-midline_offset").prop("checked",!1),this.setActiveScale("speed")):($("#draw-speed-details").hide(),this.setActiveScale("black")),d3.selectAll(".colorLegend *").remove(),this.changelegend(),$("#play-button").hasClass("active")||this.decIndexTime()}),$("#draw-acceleration").click(()=>{$(".draw-details").hide().find("input:checkbox").prop("checked",!0).click(),$("#draw-acceleration").is(":checked")?("acceleration"in X[0]||(d(),Y("acceleration")),$("#draw-acceleration-details").show(),$("#draw-speed").prop("checked",!1),$("#draw-distance_centroid").prop("checked",!1),$("#draw-midline_offset").prop("checked",!1),this.setActiveScale("acceleration")):($("#draw-acceleration-details").hide(),this.setActiveScale("black")),$(".draw-details.active").click(),d3.selectAll(".colorLegend *").remove(),this.changelegend(),$("#play-button").hasClass("active")||this.decIndexTime()}),$("#draw-distance_centroid").click(()=>{$(".draw-details").hide().find("input:checkbox").prop("checked",!0).click(),$("#draw-distance_centroid").is(":checked")?("distance_centroid"in X[0]||(d(),Y("distance_centroid")),$("#draw-distance_centroid-details").show(),$("#draw-speed").prop("checked",!1),$("#draw-acceleration").prop("checked",!1),$("#draw-midline_offset").prop("checked",!1),this.setActiveScale("distance_centroid")):($("#draw-distance_centroid-details").hide(),this.setActiveScale("black")),$(".draw-details.active").click(),d3.selectAll(".colorLegend *").remove(),this.changelegend(),$("#play-button").hasClass("active")||this.decIndexTime()}),$("#draw-midline_offset").click(()=>{$(".draw-details").hide().find("input:checkbox").prop("checked",!0).click(),$("#draw-midline_offset").is(":checked")?("draw-midline_offset"in X[0]||(d(),Y("midline_offset")),$("#draw-midline_offset-details").show(),$("#draw-speed").prop("checked",!1),$("#draw-acceleration").prop("checked",!1),$("#draw-distance_centroid").prop("checked",!1),T("midline_offset")):T("black"),$(".draw-details.active").click(),d3.selectAll(".colorLegend *").remove(),this.changelegend(),$("#play-button").hasClass("active")||(this.decIndexTime(),this.draw())})}md_listeners(){$(".metadata-swatch.metadata-swatch-clickable").click((function(){let e=$(this).attr("value"),t=$(this).css("background-color");$("#metadata-row-"+e+" #preview").css("background-color",t),"rgb(255, 255, 255)"===t?i[e]&&delete i[e]:i[e]=t})),$("#group-metadata :input").change((function(){resetIndividualMetadata();let e=$(this).attr("value"),t=[];if("sex"===e){$("#metadata-div").modal("toggle");for(let r=0;r<Z.length;r++)t.push(Z[r][e].toLowerCase());t=Array.from(new Set(t));let r=["#7fc97f","#386cb0"];for(let n=0;n<Z.length;n++)for(let a=0;a<t.length;a++)Z[n][e].toLowerCase()===t[a]&&(i[Z[n].animal_id]=r[a]);$("#metadata-input").hide()}else{$("#metadata-input").show();for(let r=0;r<Z.length;r++)t.push(Z[r][e]);let r=d3.quantile(t,.25),n=d3.quantile(t,.75);$("#bl-avg").val(r),$("#ab-avg").val(n),colorMetadata()}})),$(".number-spinner button").click((function(){let e=$(this),t=e.closest(".number-spinner").find("input").val().trim(),r=0;r="up"==e.attr("data-dir")?parseFloat(t)+.1:t>0?parseFloat(t)-.1:0,r=Math.round(100*r)/100,e.closest(".number-spinner").find("input").val(r),colorMetadata()})),$(".number-spinner input").on("input",(function(){colorMetadata()})),$("#metadata-reset").click((function(){$("#metadata-input").hide(),resetIndividualMetadata()}))}initShowDendrogramListener(e){$("#show-dendrogram-"+e).click((function(){let e=$(this).attr("id");$(".show-dendrogram").each((function(t,r){$(r).attr("id")===e&&!1===$(r).hasClass("btn-primary")?($(r).addClass("btn-primary"),$(r).find("#btn-left").hide(),$(r).find("#btn-right").show()):($(r).removeClass("btn-primary"),$(r).find("#btn-left").show(),$(r).find("#btn-right").hide())})),$(".show-dendrogram.btn-primary").length?$("#dendrogram-panel").show():$("#dendrogram-panel").hide(),$("#play-button").hasClass("active")||(this.decIndexTime(),this.draw(),this.drawDendrogram())}))}h_listeners(){var e;$(".hiearchy-checkbox").on("change",(function(){e=$(this)})),$(".hiearchy-checkbox").on("change",()=>{let t=e.attr("data"),r=e.attr("name");if(e.prop("checked")&&$(".show-dendrogram").length<j)d(),this.getNetworkHierarchyData(t),function(e,t){$(".show-dendrogram").length<j&&($("#dendrogram-buttons-div").append('<button type="button" id="show-dendrogram-'+e+'" data='+e+" name="+t+' class="show-dendrogram btn btn-block" data-toggle="button" aria-pressed="false" autocomplete="off"> <span class="btn-label" id="btn-left"> <i class="mdi mdi-arrow-collapse-left"></i>&nbsp&nbsp Show '+t+'</span><span class="btn-label" id="btn-right"> <i class="mdi mdi-arrow-collapse-right"></i>&nbsp&nbsp Hide '+t+" </span></button> <br>"),$("#show-dendrogram-"+e).find("#btn-right").hide())}(t,r),this.initShowDendrogramListener(t),$("#dendrogram-buttons-div").show();else{let e=$("#show-dendrogram-"+t).hasClass("btn-primary");this.setHierarchyData({},t),function(e){$("#show-dendrogram-"+e).next().remove(),$("#show-dendrogram-"+e).remove()}(t),d3.select("g.h"+t).remove(),!0===e&&$("#dendrogram-panel").hide(),0===$(".show-dendrogram").length&&$("#dendrogram-buttons-div").hide()}$(".show-dendrogram").length?($("#main-vis-div").removeClass("col-md-12"),$("#main-vis-div").addClass("col-md-8")):($("#main-vis-div").removeClass("col-md-8"),$("#main-vis-div").addClass("col-md-12"))}),$(".network-hierarchy-checkbox").on("change",()=>{let e=$(this);$(".network-hierarchy-checkbox").prop("checked",!1),e.prop("checked",!0),e.prop("checked")?setNetworkHierarchy(e.attr("data")):setNetworkHierarchy(void 0)})}n_listeners(){var e;$("#networks-modal-body button").click((function(){e=$(this).attr("data")})),$("#networks-modal-body button").click(()=>{$("#active-network-name").text($(this).attr("name")),d(),function(e){$.ajax({url:"/api/dataset/network/"+parameters.id+"/"+e,dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:"application/vnd.api+json"},success:function(e){e.length&&oe(JSON.parse(e[0].data)),c()}}),t=e,B=t;var t}(e),this.setnetworkColor(e),$("#network-div").modal("toggle")}),$("#network-remove").click(()=>{oe({}),setNetworkID(-1),this.setnetworkColor(-1),$("#active-network-name").text("")}),$("#network-auto-suggest").click((function(){if($("#network-auto-suggest").hasClass("active")){$("#network-limit-p").show(),$("#network-slider").show(),setNetworkAuto(!1);let e=$("#network-slider").slider("value");U(e),$("#network-limit").val(e)}else $("#network-limit-p").hide(),$("#network-slider").hide(),setNetworkAuto(!0)}))}spatialViewInit(){let e=parameters.min.geometry.coordinates,t=parameters.max.geometry.coordinates;this.tankWidth=1.02*(t[0]-e[0]),this.tankHeight=1.02*(t[1]-e[1]);let r=d3.scaleLinear().domain([e[0],t[0]]).range([e[0],t[0]]),i=d3.axisBottom(r).ticks(10).tickSize(10).tickPadding(5),o=d3.scaleLinear().domain([e[1],t[1]]).range([e[1],t[1]]),s=d3.axisRight(o).ticks(7).tickSize(10).tickPadding(5),l=d3.zoom().scaleExtent([1,6]).on("zoom",()=>{d3.event.transform.x=Math.min(0,this.tankWidth*(d3.event.transform.k-1),Math.max(this.tankWidth*(1-d3.event.transform.k),d3.event.transform.x)),d3.event.transform.y=Math.min(0,this.tankHeight*(d3.event.transform.k-1),Math.max(this.tankHeight*(1-d3.event.transform.k),d3.event.transform.y)),this.zoomGroup.attr("transform",d3.event.transform),c.call(i.scale(d3.event.transform.rescaleX(r))),h.call(s.scale(d3.event.transform.rescaleY(o)))});this.svgContainer=d3.select("#main-vis").classed("svg-container",!0).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 "+this.tankWidth+" "+this.tankHeight).classed("svg-content",!0).attr("id","main-vis-svg").call(l);let d=Math.ceil(this.tankHeight/this.tankWidth*100);$("#main-vis").append($("<style>#main-vis::after {padding-top: "+d+'%;display: block;content: "";}</style> ')),this.zoomGroup=this.svgContainer.append("svg:g"),parameters.background_image&&this.zoomGroup.append("image").attr("xlink:href","/"+parameters.background_image).attr("class","background-image").attr("height",this.tankHeight).attr("width",this.tankWidth).attr("x","0").attr("y","0"),this.tank=this.zoomGroup.append("svg:g").attr("class","tank").attr("transform",()=>"scale("+(parameters.inverted_x?-1:1)+","+(parameters.inverted_y?-1:1)+")"),this.tank.append("g").attr("id","g-centroid").append("circle").attr("class","centroid").attr("r",6).attr("cx",0).attr("cy",0),this.tank.select("#g-centroid").append("svg:defs").append("svg:marker").attr("id","centroid-arrow").attr("refX",2).attr("refY",6).attr("markerWidth",13).attr("markerHeight",13).attr("orient","auto").append("svg:path").attr("d","M2,2 L2,11 L10,6 L2,2"),this.tank.select("#g-centroid").append("line").attr("id","centroid-line").attr("marker-end","url(#centroid-arrow)"),this.tank.append("g").attr("id","network-group"),this.tank.append("g").attr("id","delaunay-triangulation-group"),this.tank.append("g").attr("id","vornoi-group"),this.svgContainer.append("text").attr("class","frame-text").attr("x",30).attr("y",30).text("-- : -- : -- ");let c=this.svgContainer.append("g").attr("class","x axis").call(i),h=this.svgContainer.append("g").attr("class","y axis").call(s);a=d3.select("div.tooltip").style("left","0px").style("top","0px").on("mouseover",(function(){a.style("opacity",1)})),function(){n=$("#slider").slider({min:0,max:J.length,step:25,slide:function(e,t){(void 0)(t.value),$("#play-button").hasClass("active")||(void 0)()}}),$("#network-slider").slider({range:"max",min:0,max:1,step:.01,value:.5,slide:function(e,t){U(t.value),$("#network-limit").val(t.value)}}),$("#network-limit").val(.5);let e=n.slider("option","max"),t=100/e;for(let r=0;r<e;r+=1500)$('<span class="ui-slider-tick"></span>').css("left",t*r+"%").appendTo(n)}(),this.initColorPicker();var p,u;new w(J);this.cp_listener(),this.sf_listeners(),this.af_listeners(),this.md_listeners(),this.n_listeners(),this.h_listeners(),this.initDendrogram(),p=this.tankHeight,u=this.tankWidth,$((function(){$("#main-vis").draggable({containment:"parent"}).resizable({aspectRatio:!0,maxWidth:$("#main-vis-div").width()}).height(.6*p).width(.6*u)})),$("input[type=checkbox]").prop("checked",!1),$("#color-scale-linear").prop("checked",!0),$("#group-size-m").prop("checked",!0),$("#background-white").prop("checked",!0),$("#settings-div input[type=checkbox]").prop("checked",!0),$("#loading").hide(),$("#play-loading").hide(),$(".mdi-play").hide(),$("#metadata-input").hide(),$("#dendrogram-buttons-div").hide(),$("#g-centroid").hide(),$("#line-chart-feature-checkboxes input[type=checkbox]").prop("checked",!0),this.draw()}setMedoidAnimal(e){this.medoidAnimal=e}}class b extends x{constructor(e){super(),this.swarmData=e,this.swarm_features=Object.keys(this.swarmData[0]),this.lineChartWidth=5e3,this.trendChartsElem=["lower-outer-area","lower-inner-area","median-line","upper-inner-area","upper-outer-area"]}}class w extends b{constructor(e){super(e),this.lineChart()}lineChart(){y=Math.ceil(this.swarmData.length/this.lineChartWidth);let e=100,t=10,r=this.swarm_features,n=r.indexOf("time");r.splice(n,1);let a=[];if(this.swarmData.length>this.lineChartWidth){let e=new Array(r.length).fill(0);for(let t=0;t<this.swarmData.length;t++){for(let n=0;n<r.length;n++)e[n]+=this.swarmData[t][r[n]];if(t%y==0){let n={time:t/y};for(let t=0;t<r.length;t++)e[t]=e[t]/y,n[r[t]]=e[t];a.push(n),e=new Array(r.length).fill(0)}}}else a=this.swarmData;g=d3.scaleLinear().domain([0,a.length]).range([0,this.lineChartWidth]),m=d3.scaleLinear().domain([0,a.length]).range([0,this.lineChartWidth]);let i=d3.scaleLinear().domain([0,a.length]).range([0,this.lineChartWidth]),o=d3.axisBottom(m).ticks(10).tickSize(10).tickPadding(5).tickFormat((function(e){return Math.floor(e*y/1500)%60+":"+Math.floor(e*y/parameters.fps)%60+"::"+e*y%parameters.fps}));f=d3.scaleLinear().domain([0,100]).range([500,0]);let s=d3.axisLeft(f).ticks(0).tickSize(10).tickPadding(5),l=()=>{let e=d3.mouse(this);if(e[0]<t||e[0]>this.lineChartWidth||e[1]<0||e[1]>500)return;let r=d3.scaleLinear().domain(g.range()).range(g.domain());this.setIndexTime(Math.floor(r(e[0]-t)*y))},d=d3.zoom().scaleExtent([1,20]).translateExtent([[0,0],[this.lineChartWidth,500]]).extent([[0,0],[this.lineChartWidth,500]]).on("zoom",()=>{let e=d3.event.transform;g=m.domain(e.rescaleX(i).domain());for(let e in x)x.hasOwnProperty(e)&&u.select("#"+e+"Line").attr("d",x[e]);for(let e in v)if(v.hasOwnProperty(e))for(let t=0;t<this.trendChartsElem.length;t++)u.select("#"+e+"TrendChart ."+this.trendChartsElem[t]).attr("d",v[e][this.trendChartsElem[t]]);h.call(o)}),c=d3.select("#swarm-vis").classed("svg-line-chart-container",!0).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 "+this.lineChartWidth+" "+(500+e)).classed("svg-content",!0);u=c.append("svg:g").attr("id","lineChartZoom").attr("transform","translate("+t+",0)");let h=u.append("g").attr("class","x axis-line-chart").attr("transform","translate(0,500)").call(o);u.append("g").attr("class","y axis-line-chart").call(s),u.append("line").attr("class","time-line").attr("id","lineChartTimeLine").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",500);let p=d3.scaleOrdinal(d3.schemeCategory10),x={};for(let e=0;e<r.length;e++){let t=d3.min(a,(function(t){return t[r[e]]})),n=d3.max(a,(function(t){return t[r[e]]})),i=d3.scaleLinear().domain([t,n]).range([0,100]),o=d3.line().x((function(e){return m(e.time)})).y((function(t){return f(i(t[r[e]]))}));x[r[e]]=o,u.append("path").data([a]).attr("id",r[e]+"Line").attr("class","line lineChartLine").style("stroke",p(e)).attr("d",o).attr("name",r[e])}$("#lineChartTimeLine").appendTo("#lineChartZoom"),u.append("rect").attr("class","zoom").attr("width",this.lineChartWidth).attr("height",500).call(d).on("click",l).call(d3.drag().on("drag",l));let k=d3.selectAll(".line");c.append("g").attr("id","lineChartLegend").attr("transform","translate("+e+",550)").selectAll("rect.legend").data(k._groups[0]).enter().each((function(e,t){d3.select(this).append("rect").attr("class","legend").attr("width",100).attr("height",50).attr("x",600*t+"px").style("fill",e.style.stroke),d3.select(this).append("text").attr("id",e.attributes.id.value+"LegendTitle").attr("class","line-chart-legend-text").attr("y",40).attr("x",600*t+100+10+"px").text(e.attributes.name.value+": "),d3.select(this).append("text").attr("id",e.attributes.id.value+"Value").attr("class","line-chart-legend-text").attr("y",40).attr("x",600*t+100+d3.select("#"+e.attributes.id.value+"LegendTitle").node().getComputedTextLength()+10+"px").text("0.0")})),c.append("g").attr("id","trendChartLegend").attr("transform","translate("+e+",550)").selectAll("rect.legend").data(["5% - 95%","25% - 75%","Median"]).enter().each((function(e,t){d3.select(this).append("rect").attr("class","legend").attr("width",100).attr("height",50).attr("x",800*t+"px").style("fill",(function(){return 0===t?"#74a9cf":1===t?"#045a8d":"#525252"})),d3.select(this).append("text").attr("class","line-chart-legend-text").attr("y",40).attr("x",800*t+100+10+"px").text(e)})),$("#trendChartLegend").hide(),this.initLineChartButtons()}initLineChartButtons(){for(let e=0;e<this.swarm_features.length;e++){let t=this.swarm_features[e].split("_").join(" ");t=t.charAt(0).toUpperCase()+t.slice(1),$("#line-chart-feature-checkboxes").append('<tr><th> <div class="pretty p-switch p-fill p-bigger"><input type="checkbox" class="line-chart-check-box" id="draw-'+this.swarm_features[e]+'" data="#'+this.swarm_features[e]+'Line" /><div class="state"><label>'+t+"</label></div></div></th></tr>")}$(".line-chart-check-box").change((function(){let e=$(this);e.prop("checked")?$(e.attr("data")).show():$(e.attr("data")).hide()}))}}class C extends b{constructor(e,t){super(t),this.elem=e,this.trendchart()}disableLineChart(){$(".lineChartButton").prop("checked",!1).prop("disabled",!0),$(".line-chart-check-box").attr("disabled",!0),$(".lineChartLine").attr("visibility","hidden")}trendchart(){let e="";if(this.elem.id.toLowerCase().includes("speed"))e="speed";else if(this.elem.id.toLowerCase().includes("acceleration"))e="acceleration";else if(this.elem.id.toLowerCase().includes("distance_centroid"))e="distance_centroid";else{if(!this.elem.id.toLowerCase().includes("midline_offset"))return;e="midline_offset"}if($("#lineChartLegend").hide(),$("#trendChartLegend").show(),$("#"+e+"TrendChart").length)$("#"+e+"TrendChart").show();else{let t=[],r=ee.length;for(let n=0;n<J.length;n++){let a=[];for(let t=0;t<r;t++)X[n*r+t]&&a.push(X[n*r+t][e]);t.push(h(a))}if(t.length>this.lineChartWidth){let e=[],r=[0,0,0,0,0];for(let n=0;n<t.length;n++){for(let e=0;e<r.length;e++)r[e]+=t[n][e];if(n%y==0){for(let e=0;e<r.length;e++)r[e]+=r[e]/y;e.push(r),r=[0,0,0,0,0]}}t=e}let n=d3.min(t,(function(e){return e[0]})),a=d3.max(t,(function(e){return e[4]})),i=d3.scaleLinear().domain([n,a]).range([0,100]),o=u.append("g").attr("id",e+"TrendChart").attr("class","trendChartData");$(".zoom").appendTo("#lineChartZoom"),$("#lineChartTimeLine").appendTo("#lineChartZoom"),v[e]={};for(let r=0;r<this.trendChartsElem.length;r++){let n;r<2?n=d3.area().x((function(e,t){return m(t)})).y0((function(e){return f(i(e[r+1]))})).y1((function(e){return f(i(e[r]))})):2===r?n=d3.line().x((function(e,t){return m(t)})).y((function(e){return f(i(e[r]))})):r>2&&(n=d3.area().x((function(e,t){return m(t)})).y0((function(e){return f(i(e[r]))})).y1((function(e){return f(i(e[r-1]))}))),v[e][this.trendChartsElem[r]]=n,o.append("path").data([t]).attr("class",this.trendChartsElem[r]).attr("d",n)}}}}function T(e){activeScale=e}let L,A={},_=d3.scaleThreshold().domain([0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]).range(["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"]);const j=4;let S={},M={},H=["#7fc97f","#386cb0","#e7298a","#ff9900"];function D(e){return"M"+e.x+","+e.y+"V"+e.parent.y+"H"+e.parent.x}function O(){let e,t;0!==Object.keys(S).length||0!==Object.keys(N).length?$("#hierarchy-legend-div").show():$("#hierarchy-legend-div").hide();let r=[],n=[];if($(".show-dendrogram").each((function(e,t){null!=S["h"+$(t).attr("data")]&&null!=$(t).attr("name")&&(r.push(S["h"+$(t).attr("data")]),n.push($(t).attr("name")))})),0!==Object.keys(N).length)for(let e in N)-1===r.indexOf(N[e])&&(r.push(N[e]),n.push("Network"));e=L.selectAll("rect.legend").data(r),t=L.selectAll("text.legend-text").data(n),e.style("fill",(function(e){return e})),e.enter().append("rect").attr("class","legend").attr("width",50).attr("height",20).attr("y",0).attr("x",(function(e,t){return 50+2.5*t*50+"px"})).style("fill",(function(e){return e})),e.exit().remove(),t.text((function(e){return e})),t.enter().append("text").attr("class","legend-text").attr("y",40).attr("x",(function(e,t){return 50+2.5*t*50+"px"})).text((function(e){return e})),t.exit().remove()}function z(){let e,t,r=d3.select("#dendrogram-panel").append("svg").attr("id","dendrogram-legend").attr("width",550).attr("height",60);$("#dendrogram-legend").hide();let n=_.range();e=r.selectAll("rect.legend").data(n),t=r.selectAll("text.legend-text").data(["low","","","","","","","","high"]),e.enter().append("rect").attr("class","legend").attr("width",50).attr("height",20).attr("y",0).attr("x",(function(e,t){return 50*t+"px"})).style("fill",(function(e){return e})),t.enter().append("text").attr("class","legend-text").attr("y",40).attr("x",(function(e,t){return 50*t+"px"})).text((function(e){return e}))}let E,B,I=!1,W=.5,N={},G=d3.scaleThreshold().domain([0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]).range(["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"]);function U(e){W=e}var P;function R(){let e=[];$.ajax({url:"/api/percentile/"+parameters.id,dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:"application/vnd.api+json"},success:function(t){for(let r=0;r<t.length;r++)e[t[r].feature]=[t[r].min,t[r].p1,t[r].p2,t[r].p3,t[r].p5,t[r].p7,t[r].p8,t[r].p9,t[r].max];re(e),function(e){for(var t in e)if(e.hasOwnProperty(t)){let e=t.split("_").join(" ");e=e.charAt(0).toUpperCase()+e.slice(1),$("#absolute-feature-checkboxes").append('<tr><th> <div class="pretty p-switch p-fill p-bigger"><input type="checkbox" id="draw-'+t+'"/><div class="state"><label>'+e+'</label></div></div><div class="float-right draw-details" id="draw-'+t+'-details"><div class="pretty p-icon p-toggle p-plain"><input type="checkbox" id="draw-'+t+'-input" /><div class="state p-success-o p-on"><i class="mdi mdi-image-area"></i><label></label></div><div class="state p-off"><i class="mdi mdi-image-off"></i><label></label></div></div></div></th></tr>')}$(".draw-details").hide(),p()}(e)}})}function V(){$.ajax({url:"/api/dataset/networks/"+parameters.id,dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:"application/vnd.api+json"},success:function(e){!function(e){if(e.length)for(let t=0;t<e.length;t++)e[t].finished&&$("#networks-hierarchies-table tbody").append("<tr><td>"+e[t].name+'</td> <td> <button type="button" class="btn btn-default" data='+e[t].network_id+" name="+e[t].name+'><span class="mdi mdi-graphql" aria-hidden="true"></span></button></td> <td><div class="pretty p-switch p-fill"><input type="checkbox" class="hiearchy-checkbox" data="'+e[t].network_id+'" name="'+e[t].name+'"><div class="state p-success"><label></label></div></div></td><td>---</td>');else $("#networks-hierarchies-table").append("There is no network data for this dataset")}(e)}})}function Y(e){$.ajax({url:"/api/dataset/"+parameters.id+"/"+e,dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:"application/vnd.api+json"},success:function(t){ie(t,e),c()}})}function F(e){d(),$.ajax({url:"/api/dataset/"+parameters.id+"/"+e,dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:"application/vnd.api+json"},success:function(t){ae(t,e),c()}})}r(1);let X=[],Z=[],J=[],q={},K={},Q={},ee={};function te(e){X=X.concat(e)}function re(e){q=e}function ne(e){Z=e,function(){let e=["#fff","#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628"];if(Z.length)for(let t=0;t<Z.length;t++)$("#metadata-table").find("tbody").append($('<tr id="metadata-row-'+Z[t].animal_id+'">').append($("<td>").append(Z[t].animal_id)).append($("<td>").append(Z[t].species)).append($("<td>").append(Z[t].sex)).append($("<td>").append(Z[t].size)).append($("<td>").append(Z[t].weight)).append($("<td>").append('<div class="dropdown">\n                                              <a class="dropdown-toggle btn btn-default btn-color" data-toggle="dropdown" href="#">\n                                              <div id="preview" class="metadata-swatch" style="background-color:#fff"></div>\n                                              <input class="color-field" value="White" style="display:none;">\n                                              </a>\n                                              <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel"> '+function(t){let r="";for(let n=0;n<e.length;n++)r+='<div class="metadata-swatch metadata-swatch-clickable" style="background-color:'+e[n]+'" value="'+t+'"></div>';return r}(Z[t].animal_id)+"</ul></div>")));else $("#metadata-table").find("tbody").append("There is no metadata for this dataset")}()}function ae(e,t){for(let r=0;r<e.length;r++)void 0===J[r]&&J.push({}),e[r]&&!isNaN(e[r])?J[r][t]=+e[r]:J[r][t]=e[r]}function ie(e,t){for(let r=0;r<e.length;r++)void 0===X[r]&&X.push({}),X[r][t]=+e[r]}function oe(e){K=e}function se(e,t){0===Object.keys(e).length&&e.constructor===Object?(delete Q["h"+t],(void 0)(t),delete S["h"+t]):(Q["h"+t]=e,function(e,t){A["h"+e]=t}(t,2),function(e){for(let t in N)if(t==="h"+e)return void(S["h"+e]=N[t]);for(let t=0;t<H.length;t++){let r=!0;for(let e in S)S.hasOwnProperty(e)&&S[e]===H[t]&&(r=!1);if(r){if(0===Object.keys(N).length)return void(S["h"+e]=H[t]);for(let r in N)if(N[r]!==H[t])return void(S["h"+e]=H[t])}}}(t)),O()}function le(e){ee=e}$(document).ready((function(){window.EventSource?((P=new EventSource("/api/movement_only/"+parameters.id)).onmessage=function(e){"close"===e.data?(P.close(),window.setTimeout((function e(){$.active>0?window.setTimeout(e,100):new k}),100)):te(JSON.parse(e.data))},P.addEventListener("error",(function(e){e.readyState==EventSource.CLOSED&&alert("Streaming error")}),!1)):alert("Webbrowser does not support streaming"),R(),$.ajax({url:"/api/dataset/"+parameters.id+"/animal_ids",dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:"application/vnd.api+json"},success:function(e){le(e)}}),function(){const e=["swarm_time","swarm_speed","swarm_acceleration","swarm_convex_hull_area","swarm_distance_centroid","swarm_direction","swarm_polarisation"];for(let t=0;t<e.length;t++)$.ajax({url:"/api/dataset/"+parameters.id+"/"+e[t],dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:"application/vnd.api+json"},success:function(r){ae(r,e[t].replace("swarm_",""))}})}(),$.ajax({url:"/api/metadata/"+parameters.id,dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:"application/vnd.api+json"},success:function(e){ne(e)}}),V()}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vZXhwbG9yZS9leHBsb3JlLmNzcz9lNzJlIiwid2VicGFjazovLy8uL2V4cGxvcmUvZXhwbG9yZS5jc3MiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9saWIvdXJscy5qcyIsIndlYnBhY2s6Ly8vLi9leHBsb3JlL3NwYXRpYWxfdmlldy9pbnRlcmFjdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9leHBsb3JlL3NwYXRpYWxfdmlldy9jb2xvcl9waWNrZXIuanMiLCJ3ZWJwYWNrOi8vLy4vZXhwbG9yZS9tZXRhZGF0YS5qcyIsIndlYnBhY2s6Ly8vLi9leHBsb3JlL2xpc3RlbmVyLmpzIiwid2VicGFjazovLy8uL2V4cGxvcmUvaGVscGVycy5qcyIsIndlYnBhY2s6Ly8vLi9leHBsb3JlL3NwYXRpYWxfdmlldy9zcGF0aWFsX3ZpZXcuanMiLCJ3ZWJwYWNrOi8vLy4vZXhwbG9yZS9oaWVyYXJjaHkuanMiLCJ3ZWJwYWNrOi8vLy4vZXhwbG9yZS9hamF4X3F1ZXJpZXMuanMiLCJ3ZWJwYWNrOi8vLy4vZXhwbG9yZS9uZXR3b3JrLmpzIiwid2VicGFjazovLy8uL2V4cGxvcmUvbGluZV9jaGFydC5qcyIsIndlYnBhY2s6Ly8vLi9leHBsb3JlL2V4cGxvcmUuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJjb250ZW50Iiwib3B0aW9ucyIsInRyYW5zZm9ybSIsInVuZGVmaW5lZCIsImxvY2FscyIsIl9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyIsInB1c2giLCJ1c2VTb3VyY2VNYXAiLCJsaXN0IiwidG9TdHJpbmciLCJ0aGlzIiwibWFwIiwiaXRlbSIsImNzc01hcHBpbmciLCJidG9hIiwic291cmNlTWFwcGluZyIsInNvdXJjZU1hcCIsImJhc2U2NCIsInVuZXNjYXBlIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiSlNPTiIsInN0cmluZ2lmeSIsImRhdGEiLCJjb25jYXQiLCJzb3VyY2VVUkxzIiwic291cmNlcyIsInNvdXJjZSIsInNvdXJjZVJvb3QiLCJqb2luIiwiY3NzV2l0aE1hcHBpbmdUb1N0cmluZyIsIm1lZGlhUXVlcnkiLCJkZWR1cGUiLCJhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzIiwibGVuZ3RoIiwiaWQiLCJfaSIsImZuIiwibWVtbyIsInN0eWxlc0luRG9tIiwiaXNPbGRJRSIsIndpbmRvdyIsImRvY3VtZW50IiwiYWxsIiwiYXRvYiIsImFwcGx5IiwiYXJndW1lbnRzIiwiZ2V0VGFyZ2V0IiwidGFyZ2V0IiwicXVlcnlTZWxlY3RvciIsImdldEVsZW1lbnQiLCJzdHlsZVRhcmdldCIsIkhUTUxJRnJhbWVFbGVtZW50IiwiY29udGVudERvY3VtZW50IiwiaGVhZCIsImUiLCJzaW5nbGV0b24iLCJzaW5nbGV0b25Db3VudGVyIiwic3R5bGVzSW5zZXJ0ZWRBdFRvcCIsImZpeFVybHMiLCJhZGRTdHlsZXNUb0RvbSIsInN0eWxlcyIsImRvbVN0eWxlIiwicmVmcyIsImoiLCJwYXJ0cyIsImFkZFN0eWxlIiwibGlzdFRvU3R5bGVzIiwibmV3U3R5bGVzIiwiYmFzZSIsInBhcnQiLCJjc3MiLCJtZWRpYSIsImluc2VydFN0eWxlRWxlbWVudCIsInN0eWxlIiwiaW5zZXJ0SW50byIsIkVycm9yIiwibGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AiLCJpbnNlcnRBdCIsIm5leHRTaWJsaW5nIiwiaW5zZXJ0QmVmb3JlIiwiYXBwZW5kQ2hpbGQiLCJmaXJzdENoaWxkIiwiYmVmb3JlIiwicmVtb3ZlU3R5bGVFbGVtZW50IiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwiaWR4IiwiaW5kZXhPZiIsInNwbGljZSIsImNyZWF0ZVN0eWxlRWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJhdHRycyIsInR5cGUiLCJhZGRBdHRycyIsImVsIiwia2V5cyIsImZvckVhY2giLCJzZXRBdHRyaWJ1dGUiLCJvYmoiLCJ1cGRhdGUiLCJyZW1vdmUiLCJyZXN1bHQiLCJzdHlsZUluZGV4IiwiYXBwbHlUb1NpbmdsZXRvblRhZyIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsInJldm9rZU9iamVjdFVSTCIsIkJsb2IiLCJsaW5rIiwicmVsIiwiY3JlYXRlTGlua0VsZW1lbnQiLCJ1cGRhdGVMaW5rIiwiaHJlZiIsImFwcGx5VG9UYWciLCJuZXdPYmoiLCJERUJVRyIsIm5ld0xpc3QiLCJtYXlSZW1vdmUiLCJ0ZXh0U3RvcmUiLCJyZXBsYWNlVGV4dCIsImluZGV4IiwicmVwbGFjZW1lbnQiLCJmaWx0ZXIiLCJCb29sZWFuIiwic3R5bGVTaGVldCIsImNzc1RleHQiLCJjc3NOb2RlIiwiY3JlYXRlVGV4dE5vZGUiLCJjaGlsZE5vZGVzIiwiYXV0b0ZpeFVybHMiLCJjb252ZXJ0VG9BYnNvbHV0ZVVybHMiLCJibG9iIiwib2xkU3JjIiwibG9jYXRpb24iLCJiYXNlVXJsIiwicHJvdG9jb2wiLCJob3N0IiwiY3VycmVudERpciIsInBhdGhuYW1lIiwicmVwbGFjZSIsImZ1bGxNYXRjaCIsIm9yaWdVcmwiLCJuZXdVcmwiLCJ1bnF1b3RlZE9yaWdVcmwiLCJ0cmltIiwiJDEiLCJ0ZXN0Iiwic2xpZGVyIiwidG9vbHRpcCIsImNvbG9yYnJld2VyIiwiQnVZbEJ1IiwibWV0YWRhdGFDb2xvciIsInBsYXlCb29sZWFuIiwic2V0UGxheUJvb2xlYW4iLCJkaXNhYmxlUGxheUJ1dHRvbiIsIiQiLCJyZW1vdmVDbGFzcyIsInByb3AiLCJoaWRlIiwic2hvdyIsImVuYWJsZVBsYXlCdXR0b24iLCJhZGRDbGFzcyIsInBlcmNlbnRpbGVzTGluZUNoYXJ0IiwiYXJyIiwic29ydCIsImEiLCJiIiwibG93ZXIiLCJNYXRoIiwiZmxvb3IiLCJ1cHBlciIsIndlaWdodCIsImluaXRUcmVuZENoYXJ0TGlzdGVuZXIiLCJjbGljayIsImZpbmQiLCJzd2FybURhdGEiLCJkaXNhYmxlTGluZUNoYXJ0IiwiYXR0ciIsIlN0cmluZyIsImhhc2hDb2RlIiwiaGFzaCIsImNoYXJDb2RlQXQiLCJkMyIsInNlbGVjdGlvbiIsIm1vdmVUb0JhY2siLCJlYWNoIiwiem9vbUdyb3VwIiwiem9vbUZ1bmN0aW9uIiwidHJlbmRDaGFydHNab29tIiwicmF0aW8iLCJtaW5Qb2ludCIsInBhcmFtZXRlcnMiLCJtYXhQb2ludCIsInRhbmtXaWR0aCIsInRhbmtIZWlnaHQiLCJpbmRleFRpbWUiLCJzdmdDb250YWluZXIiLCJzZWxlY3QiLCJjbGFzc2VkIiwiYXBwZW5kIiwiem9vbSIsInNjYWxlRXh0ZW50Iiwib24iLCJldmVudCIsIngiLCJtaW4iLCJrIiwibWF4IiwieSIsImdYYXhpcyIsInhBeGlzIiwic2NhbGUiLCJyZXNjYWxlWCIsImdZYXhpcyIsInlBeGlzIiwicmVzY2FsZVkiLCJ0YW5rIiwiaW52ZXJ0ZWRfeCIsImludmVydGVkX3kiLCJhY3RpdmVTY2FsZSIsImNvbG9yU2NhbGUiLCJjb2xvciIsImxlZ2VuZFdpZHRoIiwibGVnZW5kSGVpZ2h0Iiwic3ZnTGVnZW5kIiwibWVkb2lkQW5pbWFsIiwiYWN0aXZlQW5pbWFscyIsImFycmF5QW5pbWFscyIsImRhdGFzZXQiLCJoaWVyYXJjaHlMZXZlbHMiLCJoaWVyYXJjaHlHcm91cFN0ZGV2IiwiYnJ1c2giLCJleHRlbnQiLCJzdmdMZWdlbmRfbmV0dyIsImRlbmRyb3pvb20iLCJuZXR3b3JrQ29sb3IiLCJoaWVyYXJjaHlDb2xvcnMiLCJuZXR3b3JrSGllcmFyY2h5Iiwic3BhdGlhbFZpZXciLCJ0b29sdGlwRGl2IiwiY2VpbCIsInRtcCIsInRleHQiLCJzY2FsZUxpbmVhciIsImRvbWFpbiIsInJhbmdlIiwic2NhbGVUaHJlc2hvbGQiLCJzZWxlY3RBbGwiLCJlbnRyaWVzIiwiZW50ZXIiLCJjaGFuZ2VsZWdlbmQiLCJoYXNDbGFzcyIsImRlY0luZGV4VGltZSIsImRyYXciLCJsZWdlbmQiLCJsZWdlbmRUZXh0IiwidG1wU2NhbGUiLCJyZXR1cm5Db2xvclNjYWxlIiwiZXhpdCIsInRpbWVUb1dhaXQiLCJ2YWwiLCJhbmltYWxTY2FsZSIsInNldFRpbWVvdXQiLCJkcmF3RGVuZHJvZ3JhbSIsIm5ldHdvcmtWaXMiLCJzdmdBbmltYWxzIiwibmV0d29ya0RhdGEiLCJuZXR3b3JrIiwiYW5pbWFsMSIsImFuaW1hbDIiLCJuZXR3b3JrQ29sb3JTY2FsZSIsIm5ldHdvcmtBdXRvIiwidG1wQXJyYXkiLCJzZXROZXR3b3JMaW1pdCIsInBlcmNlbnRpbGVzIiwibmV0d29ya0xpbWl0IiwidHJpYW5ndWxhdGlvbiIsInZvcm9ub2kiLCJpcyIsInNwbGl0IiwiYW5pbWFsR3JvdXBpbmdzIiwiZGF0YXNldE1ldGFkYXRhIiwicGFnZVgiLCJwYWdlWSIsImh0bWwiLCJ0b29sdGlwRnVuY3Rpb24iLCJ0cmFuc2l0aW9uIiwiZHVyYXRpb24iLCJpbmNsdWRlcyIsImh1bGxQYXRoIiwiaXNFbXB0eU9iamVjdCIsImNlbnRyb2lkIiwidXBkYXRlTGluZUNoYXJ0Iiwic3ZnIiwiaW5pdERlbmRyb2dyYW1MZWdlbmQiLCJ0cmVlIiwic2l6ZSIsInN0ZXAiLCJzbGlkZSIsInVpIiwic2V0SGllcmFyY2h5TGV2ZWwiLCJ1cGRhdGVEZW5kcm9ncmFtIiwibWF4TnVtYmVySGllcmFyY2hpZXMiLCJzZXRBY3RpdmVBbmltYWxzIiwicm9vdCIsImhpZXJhcmNoeSIsImxldmVsIiwidG1wX25vZGVzIiwibm9kZSIsInRtcF9ib29sZWFuIiwiaGllcmFyY2hpZXMiLCJjbHVzdGVyIiwidmVydGljZXMiLCJncm91cE1lbWJlciIsInBvbHlnb25IdWxsIiwiaGllcmFyY2h5SWRzIiwiaGllcmFyY2h5VmVydGljZXMiLCJ0cmVlRGF0YSIsIm5vZGVzIiwiY2hpbGRyZW4iLCJtYXJnaW4iLCJ3aWR0aCIsImhlaWdodCIsInRyZWVtYXAiLCJzaG93TmV0d29ya0hpZXJhcmNoeSIsIm5ldHdvcmtIaWVyYXJjaHlJZHMiLCJnZXRIaWVyYXJjaHlMZXZlbCIsImdldEhpZXJhcmNoeVZlcnRpY2VzIiwiaGllcmFyeUh1bGxzIiwiYW5pbWFscyIsInRtcEFuaW1hbCIsInBvaW50IiwiY29sbGFwc2UiLCJkZXB0aCIsIl9jaGlsZHJlbiIsImRlc2NlbmRhbnRzIiwic2xpY2UiLCJkaWFnb25hbExpbmVzIiwibm9kZUVudGVyIiwiYWRkSGlnaGxpZ2h0U3BhdGlhbFZpZXciLCJyZW1vdmVIaWdobGlnaHRTcGF0aWFsVmlldyIsInN0YW5kYXJkRGV2aWF0aW9uQ29sb3JTY2FsZSIsInN0YW5kYXJkRGV2aWF0aW9uIiwiZHJhd0hpZXJhcmNoeSIsImxlZ2VuZERhdGEiLCJsZWdlbmRUZXh0RGF0YSIsIm5ldHdvcmtfaWQiLCJjaGFuZ2VIaWVyYXJjaHlMZWdlbmQiLCJjb25zdHJ1Y3RvciIsInJlbW92ZUhpZXJhcmNoeUxldmVsIiwicmVtb3ZlSGllcmFyY2h5Q29sb3IiLCJzZXRIaWVyYXJjaHlDb2xvciIsImFqYXgiLCJ1cmwiLCJkYXRhVHlwZSIsImNvbnRlbnRUeXBlIiwiaGVhZGVycyIsInN1Y2Nlc3MiLCJzZXRIaWVyYXJjaHlEYXRhIiwicGFyc2UiLCJzdXBlciIsInNwYXRpYWxWaWV3SW5pdCIsInNldEluZGV4VGltZSIsInJlY3QiLCJhbmltYWwiLCJyZXNldFRyYWNrZWREYXRhIiwic2V0VHJhY2tpbmdCb29sZWFuIiwic2VuZFRyYWNrZWREYXRhIiwiY2hhbmdlIiwiY2hlY2tlZCIsInNldE5ldHdvcmtCYWNrZ3JvdW5kIiwiaXNOdW1lcmljIiwic2V0TmV0d29ya0JhY2tncm91bmRMaW1pdCIsImdldERhdGFzZXRGZWF0dXJlIiwiZ2V0U3dhcm1EYXRhc2V0RmVhdHVyZSIsInNldE1lZG9pZEFuaW1hbCIsInNldEFjdGl2ZVNjYWxlIiwiY29sb3JSR0IiLCJyZXNldEluZGl2aWR1YWxNZXRhZGF0YSIsIm1vZGFsIiwidG9Mb3dlckNhc2UiLCJBcnJheSIsImZyb20iLCJTZXQiLCJjb2xvcnMiLCJibEF2ZyIsInF1YW50aWxlIiwiYWJBdmciLCJjb2xvck1ldGFkYXRhIiwiYnRuIiwib2xkVmFsdWUiLCJjbG9zZXN0IiwibmV3VmFsIiwicGFyc2VGbG9hdCIsInJvdW5kIiwiY2xpY2tlZEJ1dHRvbklEIiwiYnV0dG9uIiwiY2hlY2tib3giLCJnZXROZXR3b3JrSGllcmFyY2h5RGF0YSIsImFkZEhpZXJhcmNoeUJ1dHRvbiIsImluaXRTaG93RGVuZHJvZ3JhbUxpc3RlbmVyIiwidG1wQWN0aXZlIiwibmV4dCIsInJlbW92ZUhpZXJhcmNoeUJ1dHRvbiIsInNldE5ldHdvcmtIaWVyYXJjaHkiLCJzZXROZXR3b3JrRGF0YSIsIm5ldHdvcmtJRCIsImdldE5ldHdvcmtEYXRhIiwic2V0bmV0d29ya0NvbG9yIiwic2V0TmV0d29ya0lEIiwic2V0TmV0d29ya0F1dG8iLCJsaW1pdCIsImF4aXNCb3R0b20iLCJ0aWNrcyIsInRpY2tTaXplIiwidGlja1BhZGRpbmciLCJheGlzUmlnaHQiLCJwZXJjZW50YWdlIiwiYmFja2dyb3VuZF9pbWFnZSIsInNwYWNlIiwiYXBwZW5kVG8iLCJpbml0U2xpZGVycyIsImluaXRDb2xvclBpY2tlciIsIkxpbmVDaGFydCIsImNwX2xpc3RlbmVyIiwic2ZfbGlzdGVuZXJzIiwiYWZfbGlzdGVuZXJzIiwibWRfbGlzdGVuZXJzIiwibl9saXN0ZW5lcnMiLCJoX2xpc3RlbmVycyIsImluaXREZW5kcm9ncmFtIiwiZHJhZ2dhYmxlIiwiY29udGFpbm1lbnQiLCJyZXNpemFibGUiLCJhc3BlY3RSYXRpbyIsIm1heFdpZHRoIiwiQ2hhcnQiLCJzd2FybV9mZWF0dXJlcyIsImxpbmVDaGFydFdpZHRoIiwidHJlbmRDaGFydHNFbGVtIiwibGluZUNoYXJ0IiwibGluZUNoYXJ0RGF0YSIsImZpbGwiLCJ0bXBfb2JqZWN0IiwieDIiLCJ0aWNrRm9ybWF0IiwiYXhpc0xlZnQiLCJkcmFnZ2VkIiwiY29vcmRzIiwibW91c2UiLCJ0cmFuc2xhdGVFeHRlbnQiLCJsaW5lcyIsInN3YXJtTGluZUNoYXJ0IiwibGluZV9jb2xvcnMiLCJzY2FsZU9yZGluYWwiLCJzY2hlbWVDYXRlZ29yeTEwIiwibm9ybWFsaXphdGlvblNjYWxlIiwibGluZSIsImRyYWciLCJjaGFydExpbmVzIiwiX2dyb3VwcyIsInN0cm9rZSIsImF0dHJpYnV0ZXMiLCJnZXRDb21wdXRlZFRleHRMZW5ndGgiLCJpbml0TGluZUNoYXJ0QnV0dG9ucyIsImNhcGl0YWxpemVkX2ZlYXR1cmVfc3RyaW5nIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJlbGVtIiwidHJlbmRjaGFydCIsImZlYXR1cmUiLCJ0cmVuZENoYXJ0RGF0YSIsIm51bV9hbmltYWxzIiwiYW5pbWFsSWRzIiwidG1wVHJlbmRDaGFydERhdGEiLCJ0cmVuZENoYXJ0IiwidGVtcCIsImFyZWEiLCJ5MCIsInkxIiwicGFyZW50IiwiZGVuZHJvZ3JhbUxlZ2VuZCIsImdldFBlcmNlbnRpbGUiLCJkYXRhU2V0UGVyY2VudGlsZSIsInNldERhdGFTZXRQZXJjZW50aWxlIiwiYWRkQWJzb2x1dGVGZWF0dXJlQnV0dG9ucyIsImdldE5ldHdvcmtEYXRhQnV0dG9uIiwiYWRkTmV0d29ya0J1dHRvbnMiLCJzZXREYXRhc2V0RmVhdHVyZSIsInNldFN3YXJtRGF0YSIsImFkZFRvRGF0YXNldCIsInNldE1ldGFEYXRhIiwicmVzdWx0U3RyaW5nIiwiaW5pdGlhbGl6ZU1ldGFkZGF0YSIsImlzTmFOIiwic2V0QW5pbWFsSWRzIiwicmVhZHkiLCJFdmVudFNvdXJjZSIsIm9ubWVzc2FnZSIsImNsb3NlIiwiY2hlY2tQZW5kaW5nUmVxdWVzdCIsImFjdGl2ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZWFkeVN0YXRlIiwiQ0xPU0VEIiwiYWxlcnQiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElBQVVGLEVBQVFyQixFQUFvQnFCLElBQy9CLEVBQVBFLEVBQVUsT0FBT0YsRUFDcEIsR0FBVyxFQUFQRSxHQUE4QixpQkFBVkYsR0FBc0JBLEdBQVNBLEVBQU1HLFdBQVksT0FBT0gsRUFDaEYsSUFBSUks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RnBCIiwiZmlsZSI6ImV4cGxvcmUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNik7XG4iLCJcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9leHBsb3JlLmNzc1wiKTtcblxuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cbnZhciB0cmFuc2Zvcm07XG52YXIgaW5zZXJ0SW50bztcblxuXG5cbnZhciBvcHRpb25zID0ge1wiaG1yXCI6dHJ1ZX1cblxub3B0aW9ucy50cmFuc2Zvcm0gPSB0cmFuc2Zvcm1cbm9wdGlvbnMuaW5zZXJ0SW50byA9IHVuZGVmaW5lZDtcblxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9saWIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2FscztcblxuaWYobW9kdWxlLmhvdCkge1xuXHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9leHBsb3JlLmNzc1wiLCBmdW5jdGlvbigpIHtcblx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vZXhwbG9yZS5jc3NcIik7XG5cblx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblxuXHRcdHZhciBsb2NhbHMgPSAoZnVuY3Rpb24oYSwgYikge1xuXHRcdFx0dmFyIGtleSwgaWR4ID0gMDtcblxuXHRcdFx0Zm9yKGtleSBpbiBhKSB7XG5cdFx0XHRcdGlmKCFiIHx8IGFba2V5XSAhPT0gYltrZXldKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRcdGlkeCsrO1xuXHRcdFx0fVxuXG5cdFx0XHRmb3Ioa2V5IGluIGIpIGlkeC0tO1xuXG5cdFx0XHRyZXR1cm4gaWR4ID09PSAwO1xuXHRcdH0oY29udGVudC5sb2NhbHMsIG5ld0NvbnRlbnQubG9jYWxzKSk7XG5cblx0XHRpZighbG9jYWxzKSB0aHJvdyBuZXcgRXJyb3IoJ0Fib3J0aW5nIENTUyBITVIgZHVlIHRvIGNoYW5nZWQgY3NzLW1vZHVsZXMgbG9jYWxzLicpO1xuXG5cdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHR9KTtcblxuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn0iLCIvLyBJbXBvcnRzXG52YXIgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fID0gcmVxdWlyZShcIi4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIik7XG5leHBvcnRzID0gX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fKGZhbHNlKTtcbi8vIE1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLyogSWNvbnMgZm9yIGJvb3RzdHJhcCA0ICovXFxyXFxuXFxyXFxuLm1kaTo6YmVmb3JlIHtcXHJcXG4gICAgZm9udC1zaXplOiAyNHB4O1xcclxcbiAgICBsaW5lLWhlaWdodDogMTRweDtcXHJcXG59XFxyXFxuXFxyXFxuLmJ0biAubWRpOjpiZWZvcmUge1xcclxcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XFxyXFxuICAgIHRvcDogNHB4O1xcclxcbn1cXHJcXG5cXHJcXG4uYnRuLXhzIC5tZGk6OmJlZm9yZSB7XFxyXFxuICAgIGZvbnQtc2l6ZTogMThweDtcXHJcXG4gICAgdG9wOiAzcHg7XFxyXFxufVxcclxcblxcclxcbi5idG4tc20gLm1kaTo6YmVmb3JlIHtcXHJcXG4gICAgZm9udC1zaXplOiAxOHB4O1xcclxcbiAgICB0b3A6IDNweDtcXHJcXG59XFxyXFxuXFxyXFxuLmRyb3Bkb3duLW1lbnUgLm1kaSB7XFxyXFxuICAgIHdpZHRoOiAxOHB4O1xcclxcbn1cXHJcXG5cXHJcXG4uZHJvcGRvd24tbWVudSAubWRpOjpiZWZvcmUge1xcclxcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XFxyXFxuICAgIHRvcDogNHB4O1xcclxcbiAgICBsZWZ0OiAtOHB4O1xcclxcbn1cXHJcXG5cXHJcXG4ubmF2IC5tZGk6OmJlZm9yZSB7XFxyXFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXHJcXG4gICAgdG9wOiA0cHg7XFxyXFxufVxcclxcblxcclxcbi5uYXZiYXIgLm5hdmJhci10b2dnbGUgLm1kaTo6YmVmb3JlIHtcXHJcXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xcclxcbiAgICB0b3A6IDRweDtcXHJcXG4gICAgY29sb3I6ICNGRkY7XFxyXFxufVxcclxcblxcclxcbi5icmVhZGNydW1iIC5tZGk6OmJlZm9yZSB7XFxyXFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXHJcXG4gICAgdG9wOiA0cHg7XFxyXFxufVxcclxcblxcclxcbi5icmVhZGNydW1iIGE6aG92ZXIge1xcclxcbiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XFxyXFxufVxcclxcblxcclxcbi5icmVhZGNydW1iIGE6aG92ZXIgc3BhbiB7XFxyXFxuICAgIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lO1xcclxcbn1cXHJcXG5cXHJcXG4uYWxlcnQgLm1kaTo6YmVmb3JlIHtcXHJcXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xcclxcbiAgICB0b3A6IDRweDtcXHJcXG4gICAgbWFyZ2luLXJpZ2h0OiAycHg7XFxyXFxufVxcclxcblxcclxcbi5pbnB1dC1ncm91cC1hZGRvbiAubWRpOjpiZWZvcmUge1xcclxcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XFxyXFxuICAgIHRvcDogM3B4O1xcclxcbn1cXHJcXG5cXHJcXG4ubmF2YmFyLWJyYW5kIC5tZGk6OmJlZm9yZSB7XFxyXFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXHJcXG4gICAgdG9wOiAycHg7XFxyXFxuICAgIG1hcmdpbi1yaWdodDogMnB4O1xcclxcbn1cXHJcXG5cXHJcXG4ubGlzdC1ncm91cC1pdGVtIC5tZGk6OmJlZm9yZSB7XFxyXFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXHJcXG4gICAgdG9wOiAzcHg7XFxyXFxuICAgIGxlZnQ6IC0zcHhcXHJcXG59XFxyXFxuXFxyXFxuLyogU1ZHIGVsZW1lbnRzIGFuZCB0ZXh0ICovXFxyXFxuXFxyXFxuI21haW4tdmlzIHtcXHJcXG4gICAgbWFyZ2luLWJvdHRvbTogMTBweDtcXHJcXG59XFxyXFxuXFxyXFxuLnN2Zy1jb250YWluZXIge1xcclxcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxyXFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXHJcXG4gICAgd2lkdGg6IDEwMCU7XFxyXFxuICAgIC8qIGFzcGVjdCByYXRpbyAqL1xcclxcbiAgICB2ZXJ0aWNhbC1hbGlnbjogdG9wO1xcclxcbiAgICBvdmVyZmxvdzogdmlzaWJsZTtcXHJcXG59XFxyXFxuXFxyXFxuLnN2Zy1jb250ZW50IHtcXHJcXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcclxcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxyXFxuICAgIGJvcmRlcjogMXB4IHNvbGlkICMwMDA7XFxyXFxufVxcclxcblxcclxcbiNtYWluLXZpcy1sZWdlbmQtZGl2IHtcXHJcXG4gICAgZGlzcGxheTogbm9uZTtcXHJcXG59XFxyXFxuXFxyXFxuI2hpZXJhcmNoeS1sZWdlbmQtZGl2IHtcXHJcXG4gICAgZGlzcGxheTogbm9uZTtcXHJcXG59XFxyXFxuXFxyXFxuI21haW4tdmlzLWxlZ2VuZCB7XFxyXFxuICAgIGZsb2F0OiByaWdodDtcXHJcXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcclxcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XFxyXFxuICAgIG92ZXJmbG93OiB2aXNpYmxlO1xcclxcbiAgICB0b3A6IDEwcHg7XFxyXFxuICAgIGxlZnQ6IDEwcHg7XFxyXFxufVxcclxcblxcclxcbiNoaWVyYXJjaHktbGVnZW5kIHtcXHJcXG4gICAgZmxvYXQ6IGxlZnQ7XFxyXFxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXHJcXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xcclxcbiAgICBvdmVyZmxvdzogdmlzaWJsZTtcXHJcXG4gICAgdG9wOiAxMHB4O1xcclxcbiAgICBsZWZ0OiAxMHB4O1xcclxcbn1cXHJcXG5cXHJcXG4uc3ZnLWNvbnRlbnQtZGVuZHJvZ3JhbSB7XFxyXFxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXHJcXG4gICAgYm9yZGVyOiAxcHggc29saWQgIzAwMDtcXHJcXG59XFxyXFxuXFxyXFxuLnN2Zy1saW5lLWNoYXJ0LWNvbnRhaW5lciB7XFxyXFxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXHJcXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xcclxcbiAgICB3aWR0aDogMTAwJTtcXHJcXG4gICAgaGVpZ2h0OiBhdXRvO1xcclxcbiAgICAvKiBkZXBlbmRzIG9uIHN2ZyByYXRpbyAqL1xcclxcbiAgICBwYWRkaW5nLWJvdHRvbTogMTclO1xcclxcbiAgICAvKiBhc3BlY3QgcmF0aW8gKi9cXHJcXG4gICAgdmVydGljYWwtYWxpZ246IHRvcDtcXHJcXG4gICAgb3ZlcmZsb3c6IHZpc2libGU7XFxyXFxufVxcclxcblxcclxcbi5zdmctZGVuZHJvZ3JhbS1jb250YWluZXIge1xcclxcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxyXFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXHJcXG4gICAgaGVpZ2h0OiBhdXRvO1xcclxcbiAgICB2ZXJ0aWNhbC1hbGlnbjogdG9wO1xcclxcbiAgICBvdmVyZmxvdzogdmlzaWJsZTtcXHJcXG59XFxyXFxuXFxyXFxuLmF4aXMgcGF0aCB7XFxyXFxuICAgIGRpc3BsYXk6IG5vbmU7XFxyXFxufVxcclxcblxcclxcbi5heGlzIGxpbmUge1xcclxcbiAgICBzdHJva2Utb3BhY2l0eTogMC4zO1xcclxcbiAgICBzaGFwZS1yZW5kZXJpbmc6IGNyaXNwRWRnZXM7XFxyXFxufVxcclxcblxcclxcbi54IHtcXHJcXG4gICAgZm9udC1zaXplOiAxZW07XFxyXFxufVxcclxcblxcclxcbi55IHtcXHJcXG4gICAgZm9udC1zaXplOiAxZW07XFxyXFxufVxcclxcblxcclxcbi5heGlzLWxpbmUtY2hhcnQgcGF0aCBsaW5lIHtcXHJcXG4gICAgZmlsbDogbm9uZTtcXHJcXG4gICAgc3Ryb2tlOiAjMDAwO1xcclxcbiAgICBzaGFwZS1yZW5kZXJpbmc6IGNyaXNwRWRnZXM7XFxyXFxufVxcclxcblxcclxcbi5saW5lIHtcXHJcXG4gICAgZmlsbDogbm9uZTtcXHJcXG4gICAgc3Ryb2tlLXdpZHRoOiA1cHg7XFxyXFxufVxcclxcblxcclxcbi8qIFRpbWUgICovXFxyXFxuXFxyXFxuLmZyYW1lLXRleHQge1xcclxcbiAgICBtYXJnaW4tdG9wOiAwO1xcclxcbiAgICBtYXJnaW4tYm90dG9tOiAwO1xcclxcbiAgICBmb250LXNpemU6IDJlbTtcXHJcXG4gICAgY29sb3I6IGluaGVyaXQ7XFxyXFxuICAgIGZvbnQtd2VpZ2h0OiA1MDA7XFxyXFxuICAgIGxpbmUtaGVpZ2h0OiAxLjE7XFxyXFxufVxcclxcblxcclxcbi8qIFNsaWRlciB0aWNrcyAgKi9cXHJcXG5cXHJcXG4udWktc2xpZGVyLXRpY2sge1xcclxcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxyXFxuICAgIHdpZHRoOiAzcHg7XFxyXFxuICAgIGJhY2tncm91bmQ6ICMzMzdhYjc7XFxyXFxuICAgIGhlaWdodDogMC44ZW07XFxyXFxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXHJcXG59XFxyXFxuXFxyXFxuLyogTGFvZGluZyBnaWYgICAqL1xcclxcblxcclxcbiNsb2FkaW5nIHtcXHJcXG4gICAgZGlzcGxheTogYmxvY2s7XFxyXFxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcXHJcXG59XFxyXFxuXFxyXFxuLyogQ29sb3IgbGVnZW5kICAgICovXFxyXFxuXFxyXFxuLmxlZ2VuZCB7XFxyXFxuICAgIGZvbnQtc2l6ZTogMTJweDtcXHJcXG4gICAgc3Ryb2tlOiAjMDAwO1xcclxcbn1cXHJcXG5cXHJcXG4ubGVnZW5kLXRleHQge1xcclxcbiAgICBmb250LXNpemU6IDEuMmVtO1xcclxcbiAgICBjb2xvcjogaW5oZXJpdDtcXHJcXG4gICAgbGluZS1oZWlnaHQ6IDEuMTtcXHJcXG59XFxyXFxuXFxyXFxuLmxpbmUtY2hhcnQtbGVnZW5kLXRleHQge1xcclxcbiAgICBmb250LXNpemU6IDJlbTtcXHJcXG4gICAgY29sb3I6IGluaGVyaXQ7XFxyXFxuICAgIGxpbmUtaGVpZ2h0OiAxLjE7XFxyXFxufVxcclxcblxcclxcbi50aW1lLWxpbmUge1xcclxcbiAgICBmaWxsOiBub25lO1xcclxcbiAgICBzdHJva2Utd2lkdGg6IDVweDtcXHJcXG4gICAgc3Ryb2tlOiAjMDAwO1xcclxcbn1cXHJcXG5cXHJcXG4vKnN3YXJtIGZlYXR1cmVzICovXFxyXFxuXFxyXFxuLmNlbnRyb2lkIHtcXHJcXG4gICAgZmlsbC1vcGFjaXR5OiAwO1xcclxcbiAgICBzdHJva2U6ICNlNzI5OGE7XFxyXFxuICAgIHN0cm9rZS13aWR0aDogM3B4O1xcclxcbn1cXHJcXG5cXHJcXG4ubWVkb2lkIHtcXHJcXG4gICAgZmlsbDogI2U3Mjk4YSAhaW1wb3J0YW50O1xcclxcbiAgICBzdHJva2U6ICNlNzI5OGEgIWltcG9ydGFudDtcXHJcXG59XFxyXFxuXFxyXFxuLmh1bGwtcGF0aCB7XFxyXFxuICAgIGZpbGw6ICNmZmY7XFxyXFxuICAgIGZpbGwtb3BhY2l0eTogMDtcXHJcXG4gICAgc3Ryb2tlLXdpZHRoOiAzO1xcclxcbiAgICBzdHJva2U6ICMyNTI1MjU7XFxyXFxuICAgIHN0cm9rZS1vcGFjaXR5OiAwLjU7XFxyXFxufVxcclxcblxcclxcbi5oaWVyYXJjaHktZ3JvdXAge1xcclxcbiAgICBzdHJva2Utd2lkdGg6IDEwO1xcclxcbiAgICBzdHJva2UtbGluZWpvaW46IHJvdW5kO1xcclxcbiAgICBvcGFjaXR5OiAwLjI7XFxyXFxufVxcclxcblxcclxcbi5kZWxhdW5heS10cmlhbmd1bGF0aW9uIHtcXHJcXG4gICAgZmlsbC1vcGFjaXR5OiAwO1xcclxcbiAgICBzdHJva2Utd2lkdGg6IDI7XFxyXFxuICAgIHN0cm9rZTogIzAwMDtcXHJcXG4gICAgc3Ryb2tlLW9wYWNpdHk6IDAuNDtcXHJcXG59XFxyXFxuXFxyXFxuLyogQ29sb3IgYnJld2VyIHBpY2tlciBkaXYgKi9cXHJcXG5cXHJcXG4ucGFsZXR0ZSB7XFxyXFxuICAgIGN1cnNvcjogcG9pbnRlcjtcXHJcXG4gICAgZGlzcGxheTogdGFibGU7XFxyXFxuICAgIHZlcnRpY2FsLWFsaWduOiBib3R0b207XFxyXFxuICAgIG1hcmdpbjogNHB4IDAgNHB4IDRweDtcXHJcXG4gICAgYmFja2dyb3VuZDogI2ZmZjtcXHJcXG4gICAgYm9yZGVyOiBzb2xpZCAxcHggI2FhYTtcXHJcXG59XFxyXFxuXFxyXFxuLnN3YXRjaCB7XFxyXFxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXHJcXG4gICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcXHJcXG4gICAgd2lkdGg6IDIycHg7XFxyXFxuICAgIGhlaWdodDogMjJweDtcXHJcXG59XFxyXFxuXFxyXFxuLnZvcm9ub2kge1xcclxcbiAgICBmaWxsLW9wYWNpdHk6IDA7XFxyXFxuICAgIHN0cm9rZS13aWR0aDogMztcXHJcXG4gICAgc3Ryb2tlOiAjMDAwO1xcclxcbiAgICBzdHJva2Utb3BhY2l0eTogMC4yO1xcclxcbn1cXHJcXG5cXHJcXG4vKiBUb29sdGlwICovXFxyXFxuXFxyXFxuZGl2LnRvb2x0aXAge1xcclxcbiAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcXHJcXG4gICAgb3BhY2l0eTogMDtcXHJcXG4gICAgYmFja2dyb3VuZDogcmdiKDI1NSwgMjU1LCAyNTUpICFpbXBvcnRhbnQ7XFxyXFxuICAgIGJvcmRlci1sZWZ0LWNvbG9yOiAjMWI4MDllICFpbXBvcnRhbnQ7XFxyXFxuICAgIGJvcmRlcjogMXB4IHNvbGlkICNlZWU7XFxyXFxuICAgIGJvcmRlci1sZWZ0LXdpZHRoOiA1cHg7XFxyXFxuICAgIGJvcmRlci1yYWRpdXM6IDNweDtcXHJcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcclxcbn1cXHJcXG5cXHJcXG5kaXYudG9vbHRpcCB0YWJsZSB0ZDpudGgtY2hpbGQoMikge1xcclxcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxyXFxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xcclxcbn1cXHJcXG5cXHJcXG4udG9vbHRpcC1zcGFuIHtcXHJcXG4gICAgZGlzcGxheTogYmxvY2s7XFxyXFxuICAgIHdpZHRoOiAxNTBweDtcXHJcXG4gICAgd29yZC13cmFwOiBicmVhay13b3JkO1xcclxcbiAgICBmb250LXNpemU6IDEuNWVtO1xcclxcbn1cXHJcXG5cXHJcXG4udXBwZXItb3V0ZXItYXJlYSwgLmxvd2VyLW91dGVyLWFyZWEge1xcclxcbiAgICBzdHJva2Utd2lkdGg6IDE7XFxyXFxuICAgIGZpbGw6ICM3NGE5Y2Y7XFxyXFxuICAgIHN0cm9rZTogIzM2OTBjMDtcXHJcXG59XFxyXFxuXFxyXFxuLnVwcGVyLWlubmVyLWFyZWEsIC5sb3dlci1pbm5lci1hcmVhIHtcXHJcXG4gICAgc3Ryb2tlLXdpZHRoOiAxO1xcclxcbiAgICBmaWxsOiAjMDQ1YThkO1xcclxcbiAgICBzdHJva2U6ICMwMjM4NTg7XFxyXFxufVxcclxcblxcclxcbi5tZWRpYW4tbGluZSB7XFxyXFxuICAgIGZpbGw6IG5vbmU7XFxyXFxuICAgIHN0cm9rZTogIzUyNTI1MjtcXHJcXG4gICAgc3Ryb2tlLXdpZHRoOiA1O1xcclxcbn1cXHJcXG5cXHJcXG4uc2VsZWN0ZWQge1xcclxcbiAgICBiYWNrZ3JvdW5kOiAjOTk5O1xcclxcbiAgICBib3JkZXI6IDRweCBzb2xpZCAjNGQ0ZDRkO1xcclxcbiAgICAtbW96LWJvcmRlci1yYWRpdXM6IDVweDtcXHJcXG4gICAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiA1cHg7XFxyXFxuICAgIGJveC1zaGFkb3c6IDFweCAycHggNHB4IHJnYmEoMCwgMCwgMCwgLjQpO1xcclxcbn1cXHJcXG5cXHJcXG4uem9vbSB7XFxyXFxuICAgIGZpbGw6IG5vbmU7XFxyXFxuICAgIHBvaW50ZXItZXZlbnRzOiBhbGw7XFxyXFxufVxcclxcblxcclxcbi54LmF4aXMtbGluZS1jaGFydD5nPnRleHQge1xcclxcbiAgICBmb250LXNpemU6IDNlbTtcXHJcXG4gICAgY29sb3I6IGluaGVyaXQ7XFxyXFxuICAgIGxpbmUtaGVpZ2h0OiAxLjE7XFxyXFxufVxcclxcblxcclxcbi5hcnJvdyB7XFxyXFxuICAgIHN0cm9rZS13aWR0aDogMTtcXHJcXG59XFxyXFxuXFxyXFxuI2NlbnRyb2lkLWxpbmUge1xcclxcbiAgICBzdHJva2Utd2lkdGg6IDE7XFxyXFxuICAgIHN0cm9rZTogI2U3Mjk4YTtcXHJcXG59XFxyXFxuXFxyXFxuI2NlbnRyb2lkLWFycm93IHtcXHJcXG4gICAgZmlsbDogI2U3Mjk4YTtcXHJcXG59XFxyXFxuXFxyXFxuLm1ldGFkYXRhLXN3YXRjaCB7XFxyXFxuICAgIHdpZHRoOiAzMHB4O1xcclxcbiAgICBoZWlnaHQ6IDMwcHg7XFxyXFxuICAgIGJvcmRlci1yYWRpdXM6IDNweDtcXHJcXG4gICAgYm9yZGVyOiAycHggc29saWQgIzY2NjtcXHJcXG59XFxyXFxuXFxyXFxuLm1ldGFkYXRhLXN3YXRjaC1jbGlja2FibGU6aG92ZXIge1xcclxcbiAgICBib3JkZXI6IDJweCBzb2xpZCAjMDAwO1xcclxcbiAgICBjdXJzb3I6IHBvaW50ZXI7XFxyXFxufVxcclxcblxcclxcbi5kcm9wZG93bi1tZW51IHtcXHJcXG4gICAgbWluLXdpZHRoOiA0MHB4O1xcclxcbiAgICBwYWRkaW5nOiA1cHg7XFxyXFxufVxcclxcblxcclxcbi5tZXRhZGF0YS1sZWdlbmQge1xcclxcbiAgICBsaXN0LXN0eWxlOiBub25lO1xcclxcbiAgICBtYXJnaW4tdG9wOiAxMHB4O1xcclxcbn1cXHJcXG5cXHJcXG4ubWV0YWRhdGEtbGVnZW5kIGxpIHtcXHJcXG4gICAgZmxvYXQ6IGxlZnQ7XFxyXFxuICAgIG1hcmdpbi1yaWdodDogMTBweDtcXHJcXG59XFxyXFxuXFxyXFxuLm1ldGFkYXRhLWxlZ2VuZCBzcGFuIHtcXHJcXG4gICAgYm9yZGVyOiAycHggc29saWQgIzY2NjtcXHJcXG4gICAgZmxvYXQ6IGxlZnQ7XFxyXFxuICAgIHdpZHRoOiAzMHB4O1xcclxcbiAgICBoZWlnaHQ6IDMwcHg7XFxyXFxufVxcclxcblxcclxcbi5tZXRhZGF0YS1sZWdlbmQgLmJsLWF2ZyB7XFxyXFxuICAgIGJhY2tncm91bmQtY29sb3I6ICM3ZmM5N2Y7XFxyXFxufVxcclxcblxcclxcbi5tZXRhZGF0YS1sZWdlbmQgLmF2ZyB7XFxyXFxuICAgIGJhY2tncm91bmQtY29sb3I6ICNmZGMwODY7XFxyXFxufVxcclxcblxcclxcbi5tZXRhZGF0YS1sZWdlbmQgLmFiLWF2ZyB7XFxyXFxuICAgIGJhY2tncm91bmQtY29sb3I6ICMzODZjYjA7XFxyXFxufVxcclxcblxcclxcbi5uZXR3b3JrLWVkZ2VzIHtcXHJcXG4gICAgZmlsbC1vcGFjaXR5OiAwO1xcclxcbiAgICBzdHJva2Utd2lkdGg6IDI7XFxyXFxufVxcclxcblxcclxcbi5uZXR3b3JrLWJhY2tncm91bmQtZWRnZXMge1xcclxcbiAgICBmaWxsLW9wYWNpdHk6IDA7XFxyXFxuICAgIHN0cm9rZS1vcGFjaXR5OiAwLjI1O1xcclxcbiAgICBzdHJva2U6ICM3MzczNzM7XFxyXFxufVxcclxcblxcclxcbi5ub2RlIHRleHQge1xcclxcbiAgICBmb250OiAxMnB4IHNhbnMtc2VyaWY7XFxyXFxufVxcclxcblxcclxcbi5ub2RlLS1pbnRlcm5hbCB0ZXh0IHtcXHJcXG4gICAgdGV4dC1zaGFkb3c6IDAgMXB4IDAgI2ZmZiwgMCAtMXB4IDAgI2ZmZiwgMXB4IDAgMCAjZmZmLCAtMXB4IDAgMCAjZmZmO1xcclxcbn1cXHJcXG5cXHJcXG4ubGluayB7XFxyXFxuICAgIGZpbGw6IG5vbmU7XFxyXFxuICAgIHN0cm9rZTogIzYzNjM2MztcXHJcXG4gICAgc3Ryb2tlLXdpZHRoOiA1cHg7XFxyXFxufVxcclxcblxcclxcbiNhY3RpdmUtbmV0d29yay1uYW1lIHtcXHJcXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XFxyXFxuICAgIGNvbG9yOiAjMjk2MjkyO1xcclxcbn1cXHJcXG5cXHJcXG4uYWN0aXZlLWxldmVsIHtcXHJcXG4gICAgZmlsbDogIzM4NmNiMDtcXHJcXG59XFxyXFxuXFxyXFxuI2RlbmRyb2dyYW0tcGFuZWwge1xcclxcbiAgICBwb3NpdGlvbjogaW5pdGlhbDtcXHJcXG59XFxyXFxuXFxyXFxuI2RlbmRyb2dyYW0tcGFuZWwge1xcclxcbiAgICBkaXNwbGF5OiBub25lXFxyXFxufVxcclxcblxcclxcbi5zaG93LWRlbmRyb2dyYW0ge1xcclxcbiAgICBmbG9hdDogcmlnaHQ7XFxyXFxuICAgIGJvcmRlci1yYWRpdXM6IDNweDtcXHJcXG4gICAgYm9yZGVyOiAxcHggc29saWQgI0QxRDNENDtcXHJcXG4gICAgZm9udC13ZWlnaHQ6IG5vcm1hbDtcXHJcXG59XFxyXFxuXFxyXFxuLnNob3ctZGVuZHJvZ3JhbTpob3ZlciB7XFxyXFxuICAgIGJhY2tncm91bmQ6ICNEMUQzRDQ7XFxyXFxufVxcclxcblxcclxcbi5kZW5kcm9ncmFtLXRleHQge1xcclxcbiAgICBmb250LXNpemU6IDEwZW0gIWltcG9ydGFudDtcXHJcXG59XFxyXFxuXFxyXFxuLmhpZ2hsaWdodC1oaWVyYXJjaHkge1xcclxcbiAgICBmaWxsOiAjMjUyNTI1O1xcclxcbiAgICBzdHJva2U6ICMyNTI1MjU7XFxyXFxuICAgIHN0cm9rZS13aWR0aDogMTA7XFxyXFxuICAgIHN0cm9rZS1saW5lam9pbjogcm91bmQ7XFxyXFxuICAgIG9wYWNpdHk6IDAuMztcXHJcXG59XFxyXFxuXFxyXFxuLmFuaW1hbC1oaWdobGlnaHQge1xcclxcbiAgICBmaWxsOiAjYzUxYjdkICFpbXBvcnRhbnQ7XFxyXFxufVxcclxcblxcclxcbiNkZW5kcm9ncmFtLWJ1dHRvbnMtZGl2IC5idG4gc3Bhbi5nbHlwaGljb24ge1xcclxcbiAgICBvcGFjaXR5OiAwO1xcclxcbn1cXHJcXG5cXHJcXG4jZGVuZHJvZ3JhbS1idXR0b25zLWRpdiAuYnRuLmFjdGl2ZSBzcGFuLmdseXBoaWNvbiB7XFxyXFxuICAgIG9wYWNpdHk6IDE7XFxyXFxufVxcclxcblxcclxcbiNkZW5kcm9ncmFtLWJ1dHRvbnMtZGl2IHtcXHJcXG4gICAgYm9yZGVyOiAycHggc29saWQgI0QxRDNENDtcXHJcXG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xcclxcbn1cXHJcXG5cXHJcXG4jZGVuZHJvZ3JhbS1sZWdlbmQge1xcclxcbiAgICBtYXJnaW4tbGVmdDogMjBweDtcXHJcXG59XFxyXFxuXFxyXFxuLmludGVyc2VjdGlvbiB7XFxyXFxuICAgIGZpbGw6IHVybCgjc3RyaXBlZCkgIWltcG9ydGFudDtcXHJcXG4gICAgc3Ryb2tlOiAjNjcwMDBkO1xcclxcbn1cXHJcXG5cXHJcXG4uc3ltLWRpZmZlcmVuY2Uge1xcclxcbiAgICBmaWxsOiB1cmwoI3N0cmlwZWQpICFpbXBvcnRhbnQ7XFxyXFxuICAgIHN0cm9rZTogIzY3MDAwZDtcXHJcXG59XFxyXFxuXFxyXFxuLm1vZGFsLWxnIHtcXHJcXG4gICAgbWF4LXdpZHRoOiA4MCU7XFxyXFxufVxcclxcblxcclxcbi5iYWNrZ3JvdW5kLWltYWdlIHtcXHJcXG4gICAgYmFja2dyb3VuZDogI2ZmZjtcXHJcXG59XCIsIFwiXCJdKTtcbi8vIEV4cG9ydHNcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cztcbiIsIlwidXNlIHN0cmljdFwiO1xuXG4vKlxuICBNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuICBBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xuLy8gY3NzIGJhc2UgY29kZSwgaW5qZWN0ZWQgYnkgdGhlIGNzcy1sb2FkZXJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh1c2VTb3VyY2VNYXApIHtcbiAgdmFyIGxpc3QgPSBbXTsgLy8gcmV0dXJuIHRoZSBsaXN0IG9mIG1vZHVsZXMgYXMgY3NzIHN0cmluZ1xuXG4gIGxpc3QudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIHZhciBjb250ZW50ID0gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtLCB1c2VTb3VyY2VNYXApO1xuXG4gICAgICBpZiAoaXRlbVsyXSkge1xuICAgICAgICByZXR1cm4gXCJAbWVkaWEgXCIuY29uY2F0KGl0ZW1bMl0sIFwiIHtcIikuY29uY2F0KGNvbnRlbnQsIFwifVwiKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgfSkuam9pbignJyk7XG4gIH07IC8vIGltcG9ydCBhIGxpc3Qgb2YgbW9kdWxlcyBpbnRvIHRoZSBsaXN0XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG5cblxuICBsaXN0LmkgPSBmdW5jdGlvbiAobW9kdWxlcywgbWVkaWFRdWVyeSwgZGVkdXBlKSB7XG4gICAgaWYgKHR5cGVvZiBtb2R1bGVzID09PSAnc3RyaW5nJykge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICBtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCAnJ11dO1xuICAgIH1cblxuICAgIHZhciBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzID0ge307XG5cbiAgICBpZiAoZGVkdXBlKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1kZXN0cnVjdHVyaW5nXG4gICAgICAgIHZhciBpZCA9IHRoaXNbaV1bMF07XG5cbiAgICAgICAgaWYgKGlkICE9IG51bGwpIHtcbiAgICAgICAgICBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2lkXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgbW9kdWxlcy5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHZhciBpdGVtID0gW10uY29uY2F0KG1vZHVsZXNbX2ldKTtcblxuICAgICAgaWYgKGRlZHVwZSAmJiBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb250aW51ZVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKG1lZGlhUXVlcnkpIHtcbiAgICAgICAgaWYgKCFpdGVtWzJdKSB7XG4gICAgICAgICAgaXRlbVsyXSA9IG1lZGlhUXVlcnk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlbVsyXSA9IFwiXCIuY29uY2F0KG1lZGlhUXVlcnksIFwiIGFuZCBcIikuY29uY2F0KGl0ZW1bMl0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGxpc3QucHVzaChpdGVtKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGxpc3Q7XG59O1xuXG5mdW5jdGlvbiBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0sIHVzZVNvdXJjZU1hcCkge1xuICB2YXIgY29udGVudCA9IGl0ZW1bMV0gfHwgJyc7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItZGVzdHJ1Y3R1cmluZ1xuXG4gIHZhciBjc3NNYXBwaW5nID0gaXRlbVszXTtcblxuICBpZiAoIWNzc01hcHBpbmcpIHtcbiAgICByZXR1cm4gY29udGVudDtcbiAgfVxuXG4gIGlmICh1c2VTb3VyY2VNYXAgJiYgdHlwZW9mIGJ0b2EgPT09ICdmdW5jdGlvbicpIHtcbiAgICB2YXIgc291cmNlTWFwcGluZyA9IHRvQ29tbWVudChjc3NNYXBwaW5nKTtcbiAgICB2YXIgc291cmNlVVJMcyA9IGNzc01hcHBpbmcuc291cmNlcy5tYXAoZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgcmV0dXJuIFwiLyojIHNvdXJjZVVSTD1cIi5jb25jYXQoY3NzTWFwcGluZy5zb3VyY2VSb290IHx8ICcnKS5jb25jYXQoc291cmNlLCBcIiAqL1wiKTtcbiAgICB9KTtcbiAgICByZXR1cm4gW2NvbnRlbnRdLmNvbmNhdChzb3VyY2VVUkxzKS5jb25jYXQoW3NvdXJjZU1hcHBpbmddKS5qb2luKCdcXG4nKTtcbiAgfVxuXG4gIHJldHVybiBbY29udGVudF0uam9pbignXFxuJyk7XG59IC8vIEFkYXB0ZWQgZnJvbSBjb252ZXJ0LXNvdXJjZS1tYXAgKE1JVClcblxuXG5mdW5jdGlvbiB0b0NvbW1lbnQoc291cmNlTWFwKSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICB2YXIgYmFzZTY0ID0gYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKTtcbiAgdmFyIGRhdGEgPSBcInNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LFwiLmNvbmNhdChiYXNlNjQpO1xuICByZXR1cm4gXCIvKiMgXCIuY29uY2F0KGRhdGEsIFwiICovXCIpO1xufSIsIi8qXG5cdE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG5cdEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcbiovXG5cbnZhciBzdHlsZXNJbkRvbSA9IHt9O1xuXG52YXJcdG1lbW9pemUgPSBmdW5jdGlvbiAoZm4pIHtcblx0dmFyIG1lbW87XG5cblx0cmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0XHRpZiAodHlwZW9mIG1lbW8gPT09IFwidW5kZWZpbmVkXCIpIG1lbW8gPSBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHRcdHJldHVybiBtZW1vO1xuXHR9O1xufTtcblxudmFyIGlzT2xkSUUgPSBtZW1vaXplKGZ1bmN0aW9uICgpIHtcblx0Ly8gVGVzdCBmb3IgSUUgPD0gOSBhcyBwcm9wb3NlZCBieSBCcm93c2VyaGFja3Ncblx0Ly8gQHNlZSBodHRwOi8vYnJvd3NlcmhhY2tzLmNvbS8jaGFjay1lNzFkODY5MmY2NTMzNDE3M2ZlZTcxNWMyMjJjYjgwNVxuXHQvLyBUZXN0cyBmb3IgZXhpc3RlbmNlIG9mIHN0YW5kYXJkIGdsb2JhbHMgaXMgdG8gYWxsb3cgc3R5bGUtbG9hZGVyXG5cdC8vIHRvIG9wZXJhdGUgY29ycmVjdGx5IGludG8gbm9uLXN0YW5kYXJkIGVudmlyb25tZW50c1xuXHQvLyBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrLWNvbnRyaWIvc3R5bGUtbG9hZGVyL2lzc3Vlcy8xNzdcblx0cmV0dXJuIHdpbmRvdyAmJiBkb2N1bWVudCAmJiBkb2N1bWVudC5hbGwgJiYgIXdpbmRvdy5hdG9iO1xufSk7XG5cbnZhciBnZXRUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCk7XG59O1xuXG52YXIgZ2V0RWxlbWVudCA9IChmdW5jdGlvbiAoZm4pIHtcblx0dmFyIG1lbW8gPSB7fTtcblxuXHRyZXR1cm4gZnVuY3Rpb24odGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgcGFzc2luZyBmdW5jdGlvbiBpbiBvcHRpb25zLCB0aGVuIHVzZSBpdCBmb3IgcmVzb2x2ZSBcImhlYWRcIiBlbGVtZW50LlxuICAgICAgICAgICAgICAgIC8vIFVzZWZ1bCBmb3IgU2hhZG93IFJvb3Qgc3R5bGUgaS5lXG4gICAgICAgICAgICAgICAgLy8ge1xuICAgICAgICAgICAgICAgIC8vICAgaW5zZXJ0SW50bzogZnVuY3Rpb24gKCkgeyByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNmb29cIikuc2hhZG93Um9vdCB9XG4gICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGFyZ2V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVtb1t0YXJnZXRdID09PSBcInVuZGVmaW5lZFwiKSB7XG5cdFx0XHR2YXIgc3R5bGVUYXJnZXQgPSBnZXRUYXJnZXQuY2FsbCh0aGlzLCB0YXJnZXQpO1xuXHRcdFx0Ly8gU3BlY2lhbCBjYXNlIHRvIHJldHVybiBoZWFkIG9mIGlmcmFtZSBpbnN0ZWFkIG9mIGlmcmFtZSBpdHNlbGZcblx0XHRcdGlmICh3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQgJiYgc3R5bGVUYXJnZXQgaW5zdGFuY2VvZiB3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQpIHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHQvLyBUaGlzIHdpbGwgdGhyb3cgYW4gZXhjZXB0aW9uIGlmIGFjY2VzcyB0byBpZnJhbWUgaXMgYmxvY2tlZFxuXHRcdFx0XHRcdC8vIGR1ZSB0byBjcm9zcy1vcmlnaW4gcmVzdHJpY3Rpb25zXG5cdFx0XHRcdFx0c3R5bGVUYXJnZXQgPSBzdHlsZVRhcmdldC5jb250ZW50RG9jdW1lbnQuaGVhZDtcblx0XHRcdFx0fSBjYXRjaChlKSB7XG5cdFx0XHRcdFx0c3R5bGVUYXJnZXQgPSBudWxsO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRtZW1vW3RhcmdldF0gPSBzdHlsZVRhcmdldDtcblx0XHR9XG5cdFx0cmV0dXJuIG1lbW9bdGFyZ2V0XVxuXHR9O1xufSkoKTtcblxudmFyIHNpbmdsZXRvbiA9IG51bGw7XG52YXJcdHNpbmdsZXRvbkNvdW50ZXIgPSAwO1xudmFyXHRzdHlsZXNJbnNlcnRlZEF0VG9wID0gW107XG5cbnZhclx0Zml4VXJscyA9IHJlcXVpcmUoXCIuL3VybHNcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obGlzdCwgb3B0aW9ucykge1xuXHRpZiAodHlwZW9mIERFQlVHICE9PSBcInVuZGVmaW5lZFwiICYmIERFQlVHKSB7XG5cdFx0aWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJvYmplY3RcIikgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHN0eWxlLWxvYWRlciBjYW5ub3QgYmUgdXNlZCBpbiBhIG5vbi1icm93c2VyIGVudmlyb25tZW50XCIpO1xuXHR9XG5cblx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cblx0b3B0aW9ucy5hdHRycyA9IHR5cGVvZiBvcHRpb25zLmF0dHJzID09PSBcIm9iamVjdFwiID8gb3B0aW9ucy5hdHRycyA6IHt9O1xuXG5cdC8vIEZvcmNlIHNpbmdsZS10YWcgc29sdXRpb24gb24gSUU2LTksIHdoaWNoIGhhcyBhIGhhcmQgbGltaXQgb24gdGhlICMgb2YgPHN0eWxlPlxuXHQvLyB0YWdzIGl0IHdpbGwgYWxsb3cgb24gYSBwYWdlXG5cdGlmICghb3B0aW9ucy5zaW5nbGV0b24gJiYgdHlwZW9mIG9wdGlvbnMuc2luZ2xldG9uICE9PSBcImJvb2xlYW5cIikgb3B0aW9ucy5zaW5nbGV0b24gPSBpc09sZElFKCk7XG5cblx0Ly8gQnkgZGVmYXVsdCwgYWRkIDxzdHlsZT4gdGFncyB0byB0aGUgPGhlYWQ+IGVsZW1lbnRcbiAgICAgICAgaWYgKCFvcHRpb25zLmluc2VydEludG8pIG9wdGlvbnMuaW5zZXJ0SW50byA9IFwiaGVhZFwiO1xuXG5cdC8vIEJ5IGRlZmF1bHQsIGFkZCA8c3R5bGU+IHRhZ3MgdG8gdGhlIGJvdHRvbSBvZiB0aGUgdGFyZ2V0XG5cdGlmICghb3B0aW9ucy5pbnNlcnRBdCkgb3B0aW9ucy5pbnNlcnRBdCA9IFwiYm90dG9tXCI7XG5cblx0dmFyIHN0eWxlcyA9IGxpc3RUb1N0eWxlcyhsaXN0LCBvcHRpb25zKTtcblxuXHRhZGRTdHlsZXNUb0RvbShzdHlsZXMsIG9wdGlvbnMpO1xuXG5cdHJldHVybiBmdW5jdGlvbiB1cGRhdGUgKG5ld0xpc3QpIHtcblx0XHR2YXIgbWF5UmVtb3ZlID0gW107XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGl0ZW0gPSBzdHlsZXNbaV07XG5cdFx0XHR2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcblxuXHRcdFx0ZG9tU3R5bGUucmVmcy0tO1xuXHRcdFx0bWF5UmVtb3ZlLnB1c2goZG9tU3R5bGUpO1xuXHRcdH1cblxuXHRcdGlmKG5ld0xpc3QpIHtcblx0XHRcdHZhciBuZXdTdHlsZXMgPSBsaXN0VG9TdHlsZXMobmV3TGlzdCwgb3B0aW9ucyk7XG5cdFx0XHRhZGRTdHlsZXNUb0RvbShuZXdTdHlsZXMsIG9wdGlvbnMpO1xuXHRcdH1cblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbWF5UmVtb3ZlLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgZG9tU3R5bGUgPSBtYXlSZW1vdmVbaV07XG5cblx0XHRcdGlmKGRvbVN0eWxlLnJlZnMgPT09IDApIHtcblx0XHRcdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKykgZG9tU3R5bGUucGFydHNbal0oKTtcblxuXHRcdFx0XHRkZWxldGUgc3R5bGVzSW5Eb21bZG9tU3R5bGUuaWRdO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcbn07XG5cbmZ1bmN0aW9uIGFkZFN0eWxlc1RvRG9tIChzdHlsZXMsIG9wdGlvbnMpIHtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgaXRlbSA9IHN0eWxlc1tpXTtcblx0XHR2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcblxuXHRcdGlmKGRvbVN0eWxlKSB7XG5cdFx0XHRkb21TdHlsZS5yZWZzKys7XG5cblx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRkb21TdHlsZS5wYXJ0c1tqXShpdGVtLnBhcnRzW2pdKTtcblx0XHRcdH1cblxuXHRcdFx0Zm9yKDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0ZG9tU3R5bGUucGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZhciBwYXJ0cyA9IFtdO1xuXG5cdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRwYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0sIG9wdGlvbnMpKTtcblx0XHRcdH1cblxuXHRcdFx0c3R5bGVzSW5Eb21baXRlbS5pZF0gPSB7aWQ6IGl0ZW0uaWQsIHJlZnM6IDEsIHBhcnRzOiBwYXJ0c307XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIGxpc3RUb1N0eWxlcyAobGlzdCwgb3B0aW9ucykge1xuXHR2YXIgc3R5bGVzID0gW107XG5cdHZhciBuZXdTdHlsZXMgPSB7fTtcblxuXHRmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgaXRlbSA9IGxpc3RbaV07XG5cdFx0dmFyIGlkID0gb3B0aW9ucy5iYXNlID8gaXRlbVswXSArIG9wdGlvbnMuYmFzZSA6IGl0ZW1bMF07XG5cdFx0dmFyIGNzcyA9IGl0ZW1bMV07XG5cdFx0dmFyIG1lZGlhID0gaXRlbVsyXTtcblx0XHR2YXIgc291cmNlTWFwID0gaXRlbVszXTtcblx0XHR2YXIgcGFydCA9IHtjc3M6IGNzcywgbWVkaWE6IG1lZGlhLCBzb3VyY2VNYXA6IHNvdXJjZU1hcH07XG5cblx0XHRpZighbmV3U3R5bGVzW2lkXSkgc3R5bGVzLnB1c2gobmV3U3R5bGVzW2lkXSA9IHtpZDogaWQsIHBhcnRzOiBbcGFydF19KTtcblx0XHRlbHNlIG5ld1N0eWxlc1tpZF0ucGFydHMucHVzaChwYXJ0KTtcblx0fVxuXG5cdHJldHVybiBzdHlsZXM7XG59XG5cbmZ1bmN0aW9uIGluc2VydFN0eWxlRWxlbWVudCAob3B0aW9ucywgc3R5bGUpIHtcblx0dmFyIHRhcmdldCA9IGdldEVsZW1lbnQob3B0aW9ucy5pbnNlcnRJbnRvKVxuXG5cdGlmICghdGFyZ2V0KSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiQ291bGRuJ3QgZmluZCBhIHN0eWxlIHRhcmdldC4gVGhpcyBwcm9iYWJseSBtZWFucyB0aGF0IHRoZSB2YWx1ZSBmb3IgdGhlICdpbnNlcnRJbnRvJyBwYXJhbWV0ZXIgaXMgaW52YWxpZC5cIik7XG5cdH1cblxuXHR2YXIgbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AgPSBzdHlsZXNJbnNlcnRlZEF0VG9wW3N0eWxlc0luc2VydGVkQXRUb3AubGVuZ3RoIC0gMV07XG5cblx0aWYgKG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwidG9wXCIpIHtcblx0XHRpZiAoIWxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wKSB7XG5cdFx0XHR0YXJnZXQuaW5zZXJ0QmVmb3JlKHN0eWxlLCB0YXJnZXQuZmlyc3RDaGlsZCk7XG5cdFx0fSBlbHNlIGlmIChsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcC5uZXh0U2libGluZykge1xuXHRcdFx0dGFyZ2V0Lmluc2VydEJlZm9yZShzdHlsZSwgbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AubmV4dFNpYmxpbmcpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuXHRcdH1cblx0XHRzdHlsZXNJbnNlcnRlZEF0VG9wLnB1c2goc3R5bGUpO1xuXHR9IGVsc2UgaWYgKG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwiYm90dG9tXCIpIHtcblx0XHR0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zLmluc2VydEF0ID09PSBcIm9iamVjdFwiICYmIG9wdGlvbnMuaW5zZXJ0QXQuYmVmb3JlKSB7XG5cdFx0dmFyIG5leHRTaWJsaW5nID0gZ2V0RWxlbWVudChvcHRpb25zLmluc2VydEludG8gKyBcIiBcIiArIG9wdGlvbnMuaW5zZXJ0QXQuYmVmb3JlKTtcblx0XHR0YXJnZXQuaW5zZXJ0QmVmb3JlKHN0eWxlLCBuZXh0U2libGluZyk7XG5cdH0gZWxzZSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiW1N0eWxlIExvYWRlcl1cXG5cXG4gSW52YWxpZCB2YWx1ZSBmb3IgcGFyYW1ldGVyICdpbnNlcnRBdCcgKCdvcHRpb25zLmluc2VydEF0JykgZm91bmQuXFxuIE11c3QgYmUgJ3RvcCcsICdib3R0b20nLCBvciBPYmplY3QuXFxuIChodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay1jb250cmliL3N0eWxlLWxvYWRlciNpbnNlcnRhdClcXG5cIik7XG5cdH1cbn1cblxuZnVuY3Rpb24gcmVtb3ZlU3R5bGVFbGVtZW50IChzdHlsZSkge1xuXHRpZiAoc3R5bGUucGFyZW50Tm9kZSA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuXHRzdHlsZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlKTtcblxuXHR2YXIgaWR4ID0gc3R5bGVzSW5zZXJ0ZWRBdFRvcC5pbmRleE9mKHN0eWxlKTtcblx0aWYoaWR4ID49IDApIHtcblx0XHRzdHlsZXNJbnNlcnRlZEF0VG9wLnNwbGljZShpZHgsIDEpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVN0eWxlRWxlbWVudCAob3B0aW9ucykge1xuXHR2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG5cblx0aWYob3B0aW9ucy5hdHRycy50eXBlID09PSB1bmRlZmluZWQpIHtcblx0XHRvcHRpb25zLmF0dHJzLnR5cGUgPSBcInRleHQvY3NzXCI7XG5cdH1cblxuXHRhZGRBdHRycyhzdHlsZSwgb3B0aW9ucy5hdHRycyk7XG5cdGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zLCBzdHlsZSk7XG5cblx0cmV0dXJuIHN0eWxlO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVMaW5rRWxlbWVudCAob3B0aW9ucykge1xuXHR2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO1xuXG5cdGlmKG9wdGlvbnMuYXR0cnMudHlwZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0b3B0aW9ucy5hdHRycy50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xuXHR9XG5cdG9wdGlvbnMuYXR0cnMucmVsID0gXCJzdHlsZXNoZWV0XCI7XG5cblx0YWRkQXR0cnMobGluaywgb3B0aW9ucy5hdHRycyk7XG5cdGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zLCBsaW5rKTtcblxuXHRyZXR1cm4gbGluaztcbn1cblxuZnVuY3Rpb24gYWRkQXR0cnMgKGVsLCBhdHRycykge1xuXHRPYmplY3Qua2V5cyhhdHRycykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG5cdFx0ZWwuc2V0QXR0cmlidXRlKGtleSwgYXR0cnNba2V5XSk7XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBhZGRTdHlsZSAob2JqLCBvcHRpb25zKSB7XG5cdHZhciBzdHlsZSwgdXBkYXRlLCByZW1vdmUsIHJlc3VsdDtcblxuXHQvLyBJZiBhIHRyYW5zZm9ybSBmdW5jdGlvbiB3YXMgZGVmaW5lZCwgcnVuIGl0IG9uIHRoZSBjc3Ncblx0aWYgKG9wdGlvbnMudHJhbnNmb3JtICYmIG9iai5jc3MpIHtcblx0ICAgIHJlc3VsdCA9IG9wdGlvbnMudHJhbnNmb3JtKG9iai5jc3MpO1xuXG5cdCAgICBpZiAocmVzdWx0KSB7XG5cdCAgICBcdC8vIElmIHRyYW5zZm9ybSByZXR1cm5zIGEgdmFsdWUsIHVzZSB0aGF0IGluc3RlYWQgb2YgdGhlIG9yaWdpbmFsIGNzcy5cblx0ICAgIFx0Ly8gVGhpcyBhbGxvd3MgcnVubmluZyBydW50aW1lIHRyYW5zZm9ybWF0aW9ucyBvbiB0aGUgY3NzLlxuXHQgICAgXHRvYmouY3NzID0gcmVzdWx0O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgIFx0Ly8gSWYgdGhlIHRyYW5zZm9ybSBmdW5jdGlvbiByZXR1cm5zIGEgZmFsc3kgdmFsdWUsIGRvbid0IGFkZCB0aGlzIGNzcy5cblx0ICAgIFx0Ly8gVGhpcyBhbGxvd3MgY29uZGl0aW9uYWwgbG9hZGluZyBvZiBjc3Ncblx0ICAgIFx0cmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgXHRcdC8vIG5vb3Bcblx0ICAgIFx0fTtcblx0ICAgIH1cblx0fVxuXG5cdGlmIChvcHRpb25zLnNpbmdsZXRvbikge1xuXHRcdHZhciBzdHlsZUluZGV4ID0gc2luZ2xldG9uQ291bnRlcisrO1xuXG5cdFx0c3R5bGUgPSBzaW5nbGV0b24gfHwgKHNpbmdsZXRvbiA9IGNyZWF0ZVN0eWxlRWxlbWVudChvcHRpb25zKSk7XG5cblx0XHR1cGRhdGUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIGZhbHNlKTtcblx0XHRyZW1vdmUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIHRydWUpO1xuXG5cdH0gZWxzZSBpZiAoXG5cdFx0b2JqLnNvdXJjZU1hcCAmJlxuXHRcdHR5cGVvZiBVUkwgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBVUkwuY3JlYXRlT2JqZWN0VVJMID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgVVJMLnJldm9rZU9iamVjdFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIEJsb2IgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBidG9hID09PSBcImZ1bmN0aW9uXCJcblx0KSB7XG5cdFx0c3R5bGUgPSBjcmVhdGVMaW5rRWxlbWVudChvcHRpb25zKTtcblx0XHR1cGRhdGUgPSB1cGRhdGVMaW5rLmJpbmQobnVsbCwgc3R5bGUsIG9wdGlvbnMpO1xuXHRcdHJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSk7XG5cblx0XHRcdGlmKHN0eWxlLmhyZWYpIFVSTC5yZXZva2VPYmplY3RVUkwoc3R5bGUuaHJlZik7XG5cdFx0fTtcblx0fSBlbHNlIHtcblx0XHRzdHlsZSA9IGNyZWF0ZVN0eWxlRWxlbWVudChvcHRpb25zKTtcblx0XHR1cGRhdGUgPSBhcHBseVRvVGFnLmJpbmQobnVsbCwgc3R5bGUpO1xuXHRcdHJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSk7XG5cdFx0fTtcblx0fVxuXG5cdHVwZGF0ZShvYmopO1xuXG5cdHJldHVybiBmdW5jdGlvbiB1cGRhdGVTdHlsZSAobmV3T2JqKSB7XG5cdFx0aWYgKG5ld09iaikge1xuXHRcdFx0aWYgKFxuXHRcdFx0XHRuZXdPYmouY3NzID09PSBvYmouY3NzICYmXG5cdFx0XHRcdG5ld09iai5tZWRpYSA9PT0gb2JqLm1lZGlhICYmXG5cdFx0XHRcdG5ld09iai5zb3VyY2VNYXAgPT09IG9iai5zb3VyY2VNYXBcblx0XHRcdCkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdHVwZGF0ZShvYmogPSBuZXdPYmopO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZW1vdmUoKTtcblx0XHR9XG5cdH07XG59XG5cbnZhciByZXBsYWNlVGV4dCA9IChmdW5jdGlvbiAoKSB7XG5cdHZhciB0ZXh0U3RvcmUgPSBbXTtcblxuXHRyZXR1cm4gZnVuY3Rpb24gKGluZGV4LCByZXBsYWNlbWVudCkge1xuXHRcdHRleHRTdG9yZVtpbmRleF0gPSByZXBsYWNlbWVudDtcblxuXHRcdHJldHVybiB0ZXh0U3RvcmUuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJ1xcbicpO1xuXHR9O1xufSkoKTtcblxuZnVuY3Rpb24gYXBwbHlUb1NpbmdsZXRvblRhZyAoc3R5bGUsIGluZGV4LCByZW1vdmUsIG9iaikge1xuXHR2YXIgY3NzID0gcmVtb3ZlID8gXCJcIiA6IG9iai5jc3M7XG5cblx0aWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcblx0XHRzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSByZXBsYWNlVGV4dChpbmRleCwgY3NzKTtcblx0fSBlbHNlIHtcblx0XHR2YXIgY3NzTm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcyk7XG5cdFx0dmFyIGNoaWxkTm9kZXMgPSBzdHlsZS5jaGlsZE5vZGVzO1xuXG5cdFx0aWYgKGNoaWxkTm9kZXNbaW5kZXhdKSBzdHlsZS5yZW1vdmVDaGlsZChjaGlsZE5vZGVzW2luZGV4XSk7XG5cblx0XHRpZiAoY2hpbGROb2Rlcy5sZW5ndGgpIHtcblx0XHRcdHN0eWxlLmluc2VydEJlZm9yZShjc3NOb2RlLCBjaGlsZE5vZGVzW2luZGV4XSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHN0eWxlLmFwcGVuZENoaWxkKGNzc05vZGUpO1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBhcHBseVRvVGFnIChzdHlsZSwgb2JqKSB7XG5cdHZhciBjc3MgPSBvYmouY3NzO1xuXHR2YXIgbWVkaWEgPSBvYmoubWVkaWE7XG5cblx0aWYobWVkaWEpIHtcblx0XHRzdHlsZS5zZXRBdHRyaWJ1dGUoXCJtZWRpYVwiLCBtZWRpYSlcblx0fVxuXG5cdGlmKHN0eWxlLnN0eWxlU2hlZXQpIHtcblx0XHRzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XG5cdH0gZWxzZSB7XG5cdFx0d2hpbGUoc3R5bGUuZmlyc3RDaGlsZCkge1xuXHRcdFx0c3R5bGUucmVtb3ZlQ2hpbGQoc3R5bGUuZmlyc3RDaGlsZCk7XG5cdFx0fVxuXG5cdFx0c3R5bGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XG5cdH1cbn1cblxuZnVuY3Rpb24gdXBkYXRlTGluayAobGluaywgb3B0aW9ucywgb2JqKSB7XG5cdHZhciBjc3MgPSBvYmouY3NzO1xuXHR2YXIgc291cmNlTWFwID0gb2JqLnNvdXJjZU1hcDtcblxuXHQvKlxuXHRcdElmIGNvbnZlcnRUb0Fic29sdXRlVXJscyBpc24ndCBkZWZpbmVkLCBidXQgc291cmNlbWFwcyBhcmUgZW5hYmxlZFxuXHRcdGFuZCB0aGVyZSBpcyBubyBwdWJsaWNQYXRoIGRlZmluZWQgdGhlbiBsZXRzIHR1cm4gY29udmVydFRvQWJzb2x1dGVVcmxzXG5cdFx0b24gYnkgZGVmYXVsdC4gIE90aGVyd2lzZSBkZWZhdWx0IHRvIHRoZSBjb252ZXJ0VG9BYnNvbHV0ZVVybHMgb3B0aW9uXG5cdFx0ZGlyZWN0bHlcblx0Ki9cblx0dmFyIGF1dG9GaXhVcmxzID0gb3B0aW9ucy5jb252ZXJ0VG9BYnNvbHV0ZVVybHMgPT09IHVuZGVmaW5lZCAmJiBzb3VyY2VNYXA7XG5cblx0aWYgKG9wdGlvbnMuY29udmVydFRvQWJzb2x1dGVVcmxzIHx8IGF1dG9GaXhVcmxzKSB7XG5cdFx0Y3NzID0gZml4VXJscyhjc3MpO1xuXHR9XG5cblx0aWYgKHNvdXJjZU1hcCkge1xuXHRcdC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI2NjAzODc1XG5cdFx0Y3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIiArIGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSkgKyBcIiAqL1wiO1xuXHR9XG5cblx0dmFyIGJsb2IgPSBuZXcgQmxvYihbY3NzXSwgeyB0eXBlOiBcInRleHQvY3NzXCIgfSk7XG5cblx0dmFyIG9sZFNyYyA9IGxpbmsuaHJlZjtcblxuXHRsaW5rLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuXG5cdGlmKG9sZFNyYykgVVJMLnJldm9rZU9iamVjdFVSTChvbGRTcmMpO1xufVxuIiwiXG4vKipcbiAqIFdoZW4gc291cmNlIG1hcHMgYXJlIGVuYWJsZWQsIGBzdHlsZS1sb2FkZXJgIHVzZXMgYSBsaW5rIGVsZW1lbnQgd2l0aCBhIGRhdGEtdXJpIHRvXG4gKiBlbWJlZCB0aGUgY3NzIG9uIHRoZSBwYWdlLiBUaGlzIGJyZWFrcyBhbGwgcmVsYXRpdmUgdXJscyBiZWNhdXNlIG5vdyB0aGV5IGFyZSByZWxhdGl2ZSB0byBhXG4gKiBidW5kbGUgaW5zdGVhZCBvZiB0aGUgY3VycmVudCBwYWdlLlxuICpcbiAqIE9uZSBzb2x1dGlvbiBpcyB0byBvbmx5IHVzZSBmdWxsIHVybHMsIGJ1dCB0aGF0IG1heSBiZSBpbXBvc3NpYmxlLlxuICpcbiAqIEluc3RlYWQsIHRoaXMgZnVuY3Rpb24gXCJmaXhlc1wiIHRoZSByZWxhdGl2ZSB1cmxzIHRvIGJlIGFic29sdXRlIGFjY29yZGluZyB0byB0aGUgY3VycmVudCBwYWdlIGxvY2F0aW9uLlxuICpcbiAqIEEgcnVkaW1lbnRhcnkgdGVzdCBzdWl0ZSBpcyBsb2NhdGVkIGF0IGB0ZXN0L2ZpeFVybHMuanNgIGFuZCBjYW4gYmUgcnVuIHZpYSB0aGUgYG5wbSB0ZXN0YCBjb21tYW5kLlxuICpcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjc3MpIHtcbiAgLy8gZ2V0IGN1cnJlbnQgbG9jYXRpb25cbiAgdmFyIGxvY2F0aW9uID0gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cubG9jYXRpb247XG5cbiAgaWYgKCFsb2NhdGlvbikge1xuICAgIHRocm93IG5ldyBFcnJvcihcImZpeFVybHMgcmVxdWlyZXMgd2luZG93LmxvY2F0aW9uXCIpO1xuICB9XG5cblx0Ly8gYmxhbmsgb3IgbnVsbD9cblx0aWYgKCFjc3MgfHwgdHlwZW9mIGNzcyAhPT0gXCJzdHJpbmdcIikge1xuXHQgIHJldHVybiBjc3M7XG4gIH1cblxuICB2YXIgYmFzZVVybCA9IGxvY2F0aW9uLnByb3RvY29sICsgXCIvL1wiICsgbG9jYXRpb24uaG9zdDtcbiAgdmFyIGN1cnJlbnREaXIgPSBiYXNlVXJsICsgbG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZSgvXFwvW15cXC9dKiQvLCBcIi9cIik7XG5cblx0Ly8gY29udmVydCBlYWNoIHVybCguLi4pXG5cdC8qXG5cdFRoaXMgcmVndWxhciBleHByZXNzaW9uIGlzIGp1c3QgYSB3YXkgdG8gcmVjdXJzaXZlbHkgbWF0Y2ggYnJhY2tldHMgd2l0aGluXG5cdGEgc3RyaW5nLlxuXG5cdCAvdXJsXFxzKlxcKCAgPSBNYXRjaCBvbiB0aGUgd29yZCBcInVybFwiIHdpdGggYW55IHdoaXRlc3BhY2UgYWZ0ZXIgaXQgYW5kIHRoZW4gYSBwYXJlbnNcblx0ICAgKCAgPSBTdGFydCBhIGNhcHR1cmluZyBncm91cFxuXHQgICAgICg/OiAgPSBTdGFydCBhIG5vbi1jYXB0dXJpbmcgZ3JvdXBcblx0ICAgICAgICAgW14pKF0gID0gTWF0Y2ggYW55dGhpbmcgdGhhdCBpc24ndCBhIHBhcmVudGhlc2VzXG5cdCAgICAgICAgIHwgID0gT1Jcblx0ICAgICAgICAgXFwoICA9IE1hdGNoIGEgc3RhcnQgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICg/OiAgPSBTdGFydCBhbm90aGVyIG5vbi1jYXB0dXJpbmcgZ3JvdXBzXG5cdCAgICAgICAgICAgICAgICAgW14pKF0rICA9IE1hdGNoIGFueXRoaW5nIHRoYXQgaXNuJ3QgYSBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgICAgIHwgID0gT1Jcblx0ICAgICAgICAgICAgICAgICBcXCggID0gTWF0Y2ggYSBzdGFydCBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgICAgICAgICBbXikoXSogID0gTWF0Y2ggYW55dGhpbmcgdGhhdCBpc24ndCBhIHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICAgICAgXFwpICA9IE1hdGNoIGEgZW5kIHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICApICA9IEVuZCBHcm91cFxuICAgICAgICAgICAgICAqXFwpID0gTWF0Y2ggYW55dGhpbmcgYW5kIHRoZW4gYSBjbG9zZSBwYXJlbnNcbiAgICAgICAgICApICA9IENsb3NlIG5vbi1jYXB0dXJpbmcgZ3JvdXBcbiAgICAgICAgICAqICA9IE1hdGNoIGFueXRoaW5nXG4gICAgICAgKSAgPSBDbG9zZSBjYXB0dXJpbmcgZ3JvdXBcblx0IFxcKSAgPSBNYXRjaCBhIGNsb3NlIHBhcmVuc1xuXG5cdCAvZ2kgID0gR2V0IGFsbCBtYXRjaGVzLCBub3QgdGhlIGZpcnN0LiAgQmUgY2FzZSBpbnNlbnNpdGl2ZS5cblx0ICovXG5cdHZhciBmaXhlZENzcyA9IGNzcy5yZXBsYWNlKC91cmxcXHMqXFwoKCg/OlteKShdfFxcKCg/OlteKShdK3xcXChbXikoXSpcXCkpKlxcKSkqKVxcKS9naSwgZnVuY3Rpb24oZnVsbE1hdGNoLCBvcmlnVXJsKSB7XG5cdFx0Ly8gc3RyaXAgcXVvdGVzIChpZiB0aGV5IGV4aXN0KVxuXHRcdHZhciB1bnF1b3RlZE9yaWdVcmwgPSBvcmlnVXJsXG5cdFx0XHQudHJpbSgpXG5cdFx0XHQucmVwbGFjZSgvXlwiKC4qKVwiJC8sIGZ1bmN0aW9uKG8sICQxKXsgcmV0dXJuICQxOyB9KVxuXHRcdFx0LnJlcGxhY2UoL14nKC4qKSckLywgZnVuY3Rpb24obywgJDEpeyByZXR1cm4gJDE7IH0pO1xuXG5cdFx0Ly8gYWxyZWFkeSBhIGZ1bGwgdXJsPyBubyBjaGFuZ2Vcblx0XHRpZiAoL14oI3xkYXRhOnxodHRwOlxcL1xcL3xodHRwczpcXC9cXC98ZmlsZTpcXC9cXC9cXC98XFxzKiQpL2kudGVzdCh1bnF1b3RlZE9yaWdVcmwpKSB7XG5cdFx0ICByZXR1cm4gZnVsbE1hdGNoO1xuXHRcdH1cblxuXHRcdC8vIGNvbnZlcnQgdGhlIHVybCB0byBhIGZ1bGwgdXJsXG5cdFx0dmFyIG5ld1VybDtcblxuXHRcdGlmICh1bnF1b3RlZE9yaWdVcmwuaW5kZXhPZihcIi8vXCIpID09PSAwKSB7XG5cdFx0ICBcdC8vVE9ETzogc2hvdWxkIHdlIGFkZCBwcm90b2NvbD9cblx0XHRcdG5ld1VybCA9IHVucXVvdGVkT3JpZ1VybDtcblx0XHR9IGVsc2UgaWYgKHVucXVvdGVkT3JpZ1VybC5pbmRleE9mKFwiL1wiKSA9PT0gMCkge1xuXHRcdFx0Ly8gcGF0aCBzaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJhc2UgdXJsXG5cdFx0XHRuZXdVcmwgPSBiYXNlVXJsICsgdW5xdW90ZWRPcmlnVXJsOyAvLyBhbHJlYWR5IHN0YXJ0cyB3aXRoICcvJ1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBwYXRoIHNob3VsZCBiZSByZWxhdGl2ZSB0byBjdXJyZW50IGRpcmVjdG9yeVxuXHRcdFx0bmV3VXJsID0gY3VycmVudERpciArIHVucXVvdGVkT3JpZ1VybC5yZXBsYWNlKC9eXFwuXFwvLywgXCJcIik7IC8vIFN0cmlwIGxlYWRpbmcgJy4vJ1xuXHRcdH1cblxuXHRcdC8vIHNlbmQgYmFjayB0aGUgZml4ZWQgdXJsKC4uLilcblx0XHRyZXR1cm4gXCJ1cmwoXCIgKyBKU09OLnN0cmluZ2lmeShuZXdVcmwpICsgXCIpXCI7XG5cdH0pO1xuXG5cdC8vIHNlbmQgYmFjayB0aGUgZml4ZWQgY3NzXG5cdHJldHVybiBmaXhlZENzcztcbn07XG4iLCIvKmVzbGludC1kaXNhYmxlIG5vLXVudXNlZC1sZXRzKi9cclxuLypnbG9iYWwgd2luZG93LCBkMywgJCovXHJcbmltcG9ydCB7XHJcbiAgICBkYXRhc2V0TWV0YWRhdGEsXHJcbiAgICBzd2FybURhdGEsXHJcbiAgICBhbmltYWxJZHNcclxufSBmcm9tICcuLi9leHBsb3JlLmpzJztcclxuXHJcbmltcG9ydCAqIGFzIFNQViBmcm9tICcuL3NwYXRpYWxfdmlldy5qcyc7XHJcblxyXG5pbXBvcnQgKiBhcyBOZXR3b3JrIGZyb20gJy4uL25ldHdvcmsuanMnO1xyXG5cclxuZXhwb3J0IGxldCBzbGlkZXI7IC8vIHRpbWUgc2xpZGVyIG9mIHRoZSBhcHBcclxuZXhwb3J0IGxldCB0b29sdGlwOyAvLyB0b29sdGlwIGZ1bmN0aW9uXHJcblxyXG4vKipcclxuICogQnJ1c2ggZW5kIGZ1bmN0aW9uXHJcbiAqIGFkZCBhY3RpdmUgYW5pbWFscyB0byB0aGUgYXJyYXkgb3IgcmVtb3ZlIHRoZW1cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBicnVzaGVuZCgpIHtcclxuICAgIGxldCBhcnJheUFuaW1hbHMgPSBTUFYuYXJyYXlBbmltYWxzO1xyXG4gICAgbGV0IGFjdGl2ZUFuaW1hbHMgPSBTUFYuYWN0aXZlQW5pbWFscztcclxuICAgIHZhciByZWN0ID0gZDMuZXZlbnQuc2VsZWN0aW9uO1xyXG4gICAgLy9pdGVyYXRlIG92ZXIgdGhlIDE1MSBmaXNoIHRvIGNoZWNrIHdoaWNoIGFyZSBpbiB0aGUgYnJ1c2hcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYW5pbWFsSWRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIHBvaW50ID0gW2FycmF5QW5pbWFsc1tpXVsncCddWzBdLCBhcnJheUFuaW1hbHNbaV1bJ3AnXVsxXV07XHJcbiAgICAgICAgLy9jaGVjayB3aGljaCBmaXNoIGFyZSBpbiAgdGhlIGJydXNoZWQgYXJlYVxyXG4gICAgICAgIGlmICgocmVjdFswXVswXSA8PSBwb2ludFswXSkgJiYgKHBvaW50WzBdIDw9IHJlY3RbMV1bMF0pICYmXHJcbiAgICAgICAgICAgIChyZWN0WzBdWzFdIDw9IHBvaW50WzFdKSAmJiAocG9pbnRbMV0gPD0gcmVjdFsxXVsxXSkpIHtcclxuICAgICAgICAgICAgLy8gUG9pbnQgaXMgaW4gdGhlIGJydXNoXHJcbiAgICAgICAgICAgIGFjdGl2ZUFuaW1hbHMucHVzaChhcnJheUFuaW1hbHNbaV1bJ2EnXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgU1BWLnNldEFjdGl2ZUFuaW1hbHMoYWN0aXZlQW5pbWFscyk7XHJcbiAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpXHJcbiAgICAgICAgLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgIC8vZ28gYmFjayBvbmUgc2Vjb25kIGFuZCBkcmF3IHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgIFNQVi5kZWNJbmRleFRpbWUoKTtcclxuICAgICAgICBTUFYuZHJhdygpO1xyXG4gICAgfVxyXG4gICAgJCgnI2JydXNoaW5nLWJ1dHRvbicpXHJcbiAgICAgICAgLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgIC8vIHJlbW92ZSB0aGUgYnJ1c2hcclxuICAgICQoJy5icnVzaCcpXHJcbiAgICAgICAgLnJlbW92ZSgpO1xyXG59XHJcblxyXG4vKipcclxuICogSW5pdGlhbGl6ZSB0aGUgdG9vbHRpcFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGluaXRUb29sdGlwKCkge1xyXG4gICAgdG9vbHRpcCA9IGQzLnNlbGVjdCgnZGl2LnRvb2x0aXAnKVxyXG4gICAgICAgIC5zdHlsZSgnbGVmdCcsIDAgKyAncHgnKVxyXG4gICAgICAgIC5zdHlsZSgndG9wJywgMCArICdweCcpXHJcbiAgICAgICAgLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdG9vbHRpcFxyXG4gICAgICAgICAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgMSk7XHJcbiAgICAgICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUb29sdGlwIGZ1bmN0aW9uXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBkIC0gZDMgZGF0YSBvYmplY3Qgd2l0aCB0aGUgbWV0YWRhdGEgaW5mb3JtYXRpb25cclxuICpcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB0b29sdGlwRnVuY3Rpb24oZCkge1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhc2V0TWV0YWRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAoZFsnYSddID09PSBkYXRhc2V0TWV0YWRhdGFbaV1bJ2FuaW1hbF9pZCddKSB7XHJcbiAgICAgICAgICAgIHRvb2x0aXBcclxuICAgICAgICAgICAgICAgIC5zdHlsZSgnbGVmdCcsIChkMy5ldmVudC5wYWdlWCArIDUpICsgJ3B4JylcclxuICAgICAgICAgICAgICAgIC5zdHlsZSgndG9wJywgKGQzLmV2ZW50LnBhZ2VZIC0gMTAwKSArICdweCcpXHJcbiAgICAgICAgICAgICAgICAuc3R5bGUoJ29wYWNpdHknLCAxKTtcclxuICAgICAgICAgICAgLy8gc2V0IHRoZSB2YWx1ZXNcclxuICAgICAgICAgICAgLy8gVE9ETyBtYWtlIHRoaXMgbW9kdWxhclxyXG4gICAgICAgICAgICB0b29sdGlwLnNlbGVjdCgnI3Rvb2x0aXAtYW5pbWFsLWlkJylcclxuICAgICAgICAgICAgICAgIC5odG1sKGRhdGFzZXRNZXRhZGF0YVtpXVsnYW5pbWFsX2lkJ10pO1xyXG4gICAgICAgICAgICB0b29sdGlwLnNlbGVjdCgnI3Rvb2x0aXAtc3BlY2llcycpXHJcbiAgICAgICAgICAgICAgICAuaHRtbChkYXRhc2V0TWV0YWRhdGFbaV1bJ3NwZWNpZXMnXSk7XHJcbiAgICAgICAgICAgIHRvb2x0aXAuc2VsZWN0KCcjdG9vbHRpcC1zZXgnKVxyXG4gICAgICAgICAgICAgICAgLmh0bWwoZGF0YXNldE1ldGFkYXRhW2ldWydzZXgnXSk7XHJcbiAgICAgICAgICAgIHRvb2x0aXAuc2VsZWN0KCcjdG9vbHRpcC1zaXplJylcclxuICAgICAgICAgICAgICAgIC5odG1sKGRhdGFzZXRNZXRhZGF0YVtpXVsnc2l6ZSddKTtcclxuICAgICAgICAgICAgdG9vbHRpcC5zZWxlY3QoJyN0b29sdGlwLXdlaWdodCcpXHJcbiAgICAgICAgICAgICAgICAuaHRtbChkYXRhc2V0TWV0YWRhdGFbaV1bJ3dlaWdodCddKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG4vKipcclxuICogSW5pdGlhbGl6ZSB0aGUgdGltZSBzbGlkZXIgYW5kIHRoZSBkeW5hbWljIG5ldHdvcmsgc2xpZGVyXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaW5pdFNsaWRlcnMoKSB7XHJcbiAgICAvLyB0aW1lIHNsaWRlclxyXG4gICAgc2xpZGVyID0gJCgnI3NsaWRlcicpXHJcbiAgICAgICAgLnNsaWRlcih7XHJcbiAgICAgICAgICAgIG1pbjogMCxcclxuICAgICAgICAgICAgbWF4OiBzd2FybURhdGEubGVuZ3RoLFxyXG4gICAgICAgICAgICBzdGVwOiAyNSxcclxuICAgICAgICAgICAgc2xpZGU6IGZ1bmN0aW9uKGV2ZW50LCB1aSkge1xyXG4gICAgICAgICAgICAgICAgU1BWLnNldEluZGV4VGltZSh1aS52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAvLyBpZiBwYXVzZWQgYXBwbHkgY2hhbmdlc1xyXG4gICAgICAgICAgICAgICAgaWYgKCEkKCcjcGxheS1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL3RoaXMgYXBwbHlzIHRoZSBjaGFuZ2VzXHJcbiAgICAgICAgICAgICAgICAgICAgU1BWLmRyYXcoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgLy8gaW5pdGlhbGl6ZSB0aGUgTmV0d29yayBzbGlkZXJcclxuICAgICQoJyNuZXR3b3JrLXNsaWRlcicpXHJcbiAgICAgICAgLnNsaWRlcih7XHJcbiAgICAgICAgICAgIHJhbmdlOiAnbWF4JyxcclxuICAgICAgICAgICAgbWluOiAwLFxyXG4gICAgICAgICAgICBtYXg6IDEsXHJcbiAgICAgICAgICAgIHN0ZXA6IDAuMDEsXHJcbiAgICAgICAgICAgIHZhbHVlOiAwLjUsXHJcbiAgICAgICAgICAgIHNsaWRlOiBmdW5jdGlvbihldmVudCwgdWkpIHtcclxuICAgICAgICAgICAgICAgIE5ldHdvcmsuc2V0TmV0d29yTGltaXQodWkudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgJCgnI25ldHdvcmstbGltaXQnKS52YWwodWkudmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAvLyBzZXQgdGV4dCBmb3IgdGhlIGZpcnN0IGluaXRpYWxpemF0aW9uXHJcbiAgICAkKCcjbmV0d29yay1saW1pdCcpLnZhbCgwLjUpO1xyXG5cclxuICAgIC8vIGdldCB0aGUgbWF4IGZyb20gdGhlIHNsaWRlciB0aGlzIGlzIG5lZWRlZCB0byBjYWxjdWxhdGUgdGhlIHRpY2tzXHJcbiAgICBsZXQgbWF4ID0gc2xpZGVyLnNsaWRlcignb3B0aW9uJywgJ21heCcpO1xyXG4gICAgbGV0IHNwYWNlID0gMTAwIC8gbWF4O1xyXG4gICAgLy9hcHBlbmQgdGhlIG1pbnV0ZSB0aWNrc1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXg7IGkgPSBpICsgMTUwMCkge1xyXG4gICAgICAgICQoJzxzcGFuIGNsYXNzPVwidWktc2xpZGVyLXRpY2tcIj48L3NwYW4+JylcclxuICAgICAgICAgICAgLmNzcygnbGVmdCcsIChzcGFjZSAqIGkpICsgJyUnKVxyXG4gICAgICAgICAgICAuYXBwZW5kVG8oc2xpZGVyKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgU2V0dGVyXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuLyoqXHJcbiAqIFNldCB0aGUgdGltZSBzbGlkZXIgdG8gYSBuZXcgdmFsdWVcclxuICogQHBhcmFtIHtOdW1iZXJ9IHZhbHVlIC0gbmV3IHZhbHVlIGZvciB0aGUgdGltZSBzbGlkZXJcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRUaW1lU2xpZGVyKHZhbHVlKSB7XHJcbiAgICBzbGlkZXIuc2xpZGVyKCd2YWx1ZScsIHZhbHVlKTtcclxufSIsIi8qZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLWxldHMqL1xyXG4vKmdsb2JhbCB3aW5kb3csIGQzLCAkLCBjb2xvcmJyZXdlciovXHJcbmltcG9ydCAqIGFzIFNQViBmcm9tICcuL3NwYXRpYWxfdmlldy5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgY2hhbmdlTGVnZW5kXHJcbn0gZnJvbSAnLi9sZWdlbmQuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGRhdGFTZXRQZXJjZW50aWxlXHJcbn0gZnJvbSAnLi4vZXhwbG9yZS5qcyc7XHJcblxyXG5leHBvcnQgbGV0IGNvbG9yU2NhbGUgPSB7XHJcbiAgICB0eXBlOiAnTGluZWFyJyxcclxuICAgIGNvbG9yOiBjb2xvcmJyZXdlci5CdVlsQnVcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSBjb2xvciBzY2FsZVxyXG4gKiBAcmV0dXJuIHtjb2xvclNjYWxlfSBhY3RpdmUgY29sb3Igc2NhbGUgaXMgaW4gbGluZWFyIG9yIHRocmVzaG9sZFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHJldHVybkNvbG9yU2NhbGUoKSB7XHJcbiAgICAvL2lmIGxpbmVhciBpcyBjaG9vc2VuXHJcbiAgICBpZiAoY29sb3JTY2FsZVsndHlwZSddID09PSAnTGluZWFyJykge1xyXG4gICAgICAgIHJldHVybiBkMy5zY2FsZUxpbmVhcigpXHJcbiAgICAgICAgICAgIC5kb21haW4oXHJcbiAgICAgICAgICAgICAgICBkYXRhU2V0UGVyY2VudGlsZVtTUFYuYWN0aXZlU2NhbGVdXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgLnJhbmdlKGNvbG9yU2NhbGVbJ2NvbG9yJ10pO1xyXG4gICAgfSAvL1RocmVzaG9sZCBjb2xvciBzY2FsZVxyXG4gICAgZWxzZSBpZiAoY29sb3JTY2FsZVsndHlwZSddID09PSAnVGhyZXNob2xkJykge1xyXG4gICAgICAgIHJldHVybiBkMy5zY2FsZVRocmVzaG9sZCgpXHJcbiAgICAgICAgICAgIC5kb21haW4oXHJcbiAgICAgICAgICAgICAgICBkYXRhU2V0UGVyY2VudGlsZVtTUFYuYWN0aXZlU2NhbGVdXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgLnJhbmdlKGNvbG9yU2NhbGVbJ2NvbG9yJ10pO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogSW5pdGlhbGl6ZSB0aGUgY29sb3IgcGlja2VyXHJcbiAqIHdpdGggYWxsIGxpc3RlbmVycyBpbmNsdWRlZFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGluaXRDb2xvclBpY2tlcigpIHtcclxuICAgIGQzLnNlbGVjdCgnLmNvbG9ycy1ib2R5JylcclxuICAgICAgICAuc2VsZWN0QWxsKCcucGFsZXR0ZScpXHJcbiAgICAgICAgLmRhdGEoZDMuZW50cmllcyhjb2xvcmJyZXdlcikpXHJcbiAgICAgICAgLmVudGVyKClcclxuICAgICAgICAuYXBwZW5kKCdzcGFuJylcclxuICAgICAgICAuYXR0cignY2xhc3MnLCAncGFsZXR0ZScpXHJcbiAgICAgICAgLmF0dHIoJ3RpdGxlJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZC5rZXk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAvLyBoaWdodGxpZ2h0IHRoZSByaWdodCBwYWxldHRlXHJcbiAgICAgICAgICAgICQoJy5wYWxldHRlJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICQoJy5wYWxldHRlW3RpdGxlPVwiJyArIGQua2V5ICsgJ1wiXScpLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICBjb2xvclNjYWxlLmNvbG9yID0gY29sb3JicmV3ZXJbZC5rZXldO1xyXG4gICAgICAgICAgICBjaGFuZ2VMZWdlbmQoKTtcclxuICAgICAgICAgICAgaWYgKCEkKCcjcGxheS1idXR0b24nKVxyXG4gICAgICAgICAgICAgICAgLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgLy9nbyBiYWNrIG9uZSBzZWNvbmQgYW5kIGRyYXcgdGhlIG5leHQgZnJhbWVcclxuICAgICAgICAgICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuICAgICAgICAgICAgICAgIFNQVi5kZWNJbmRleFRpbWUoKTtcclxuICAgICAgICAgICAgICAgIFNQVi5kcmF3KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC5zZWxlY3RBbGwoJy5zd2F0Y2gnKVxyXG4gICAgICAgIC5kYXRhKGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGQudmFsdWU7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgIC5hcHBlbmQoJ3NwYW4nKVxyXG4gICAgICAgIC5hdHRyKCdjbGFzcycsICdzd2F0Y2gnKVxyXG4gICAgICAgIC5zdHlsZSgnYmFja2dyb3VuZC1jb2xvcicsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgLy8gaGlnaGxpZ2h0IHRoZSBzZWxlY3RlZCBjb2xvciBzY2hlbWVcclxuICAgICQoJy5wYWxldHRlW3RpdGxlPVwiQnVZbEJ1XCJdJykuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbn1cclxuIiwiLyplc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtbGV0cyovXHJcbi8qZ2xvYmFsIHdpbmRvdywgJCwgKi9cclxuLy8gaW1wb3J0ICogYXMgc3B2IGZyb20gJy4vc3BhdGlhbF92aWV3LmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBkYXRhc2V0TWV0YWRhdGFcclxufSBmcm9tICcuL2V4cGxvcmUuanMnO1xyXG5cclxuXHJcbmV4cG9ydCBsZXQgbWV0YWRhdGFDb2xvciA9IHt9OyAvLyBzYXZlIHRoZSBtZXRhZGF0YSBjb2xvcmluZ1xyXG5cclxuLyoqXHJcbiAqIEluaXQgTWV0YWRhdGEgYnV0dG9ucyBcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplTWV0YWRkYXRhKCkge1xyXG4gICAgbGV0IGNvbG9ycyA9IFsnI2ZmZicsICcjZTQxYTFjJywgJyMzNzdlYjgnLCAnIzRkYWY0YScsICcjOTg0ZWEzJywgJyNmZjdmMDAnLCAnI2ZmZmYzMycsICcjYTY1NjI4J107XHJcbiAgICAvLyBhZGQgdGhlIGRhdGEgdG8gdGhlIG1ldGFkYXRhIG1vZGFsXHJcbiAgICBpZiAoZGF0YXNldE1ldGFkYXRhLmxlbmd0aCkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YXNldE1ldGFkYXRhLmxlbmd0aDsgaSsrKSB7XHJcblxyXG4gICAgICAgICAgICAkKCcjbWV0YWRhdGEtdGFibGUnKS5maW5kKCd0Ym9keScpXHJcbiAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzx0ciBpZD1cIm1ldGFkYXRhLXJvdy0nICsgZGF0YXNldE1ldGFkYXRhW2ldWydhbmltYWxfaWQnXSArICdcIj4nKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPHRkPicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoZGF0YXNldE1ldGFkYXRhW2ldWydhbmltYWxfaWQnXSkpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8dGQ+JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChkYXRhc2V0TWV0YWRhdGFbaV1bJ3NwZWNpZXMnXSkpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8dGQ+JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChkYXRhc2V0TWV0YWRhdGFbaV1bJ3NleCddKSlcclxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzx0ZD4nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGRhdGFzZXRNZXRhZGF0YVtpXVsnc2l6ZSddKSlcclxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzx0ZD4nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGRhdGFzZXRNZXRhZGF0YVtpXVsnd2VpZ2h0J10pKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPHRkPicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoYDxkaXYgY2xhc3M9XCJkcm9wZG93blwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9XCJkcm9wZG93bi10b2dnbGUgYnRuIGJ0bi1kZWZhdWx0IGJ0bi1jb2xvclwiIGRhdGEtdG9nZ2xlPVwiZHJvcGRvd25cIiBocmVmPVwiI1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD1cInByZXZpZXdcIiBjbGFzcz1cIm1ldGFkYXRhLXN3YXRjaFwiIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjojZmZmXCI+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJjb2xvci1maWVsZFwiIHZhbHVlPVwiV2hpdGVcIiBzdHlsZT1cImRpc3BsYXk6bm9uZTtcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz1cImRyb3Bkb3duLW1lbnVcIiByb2xlPVwibWVudVwiIGFyaWEtbGFiZWxsZWRieT1cImRMYWJlbFwiPiBgICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3VsdFN0cmluZyA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29sb3JzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFN0cmluZyArPSAnPGRpdiBjbGFzcz1cIm1ldGFkYXRhLXN3YXRjaCBtZXRhZGF0YS1zd2F0Y2gtY2xpY2thYmxlXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOicgKyBjb2xvcnNbaV0gKyAnXCIgdmFsdWU9XCInICsgaWQgKyAnXCI+PC9kaXY+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFN0cmluZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oZGF0YXNldE1ldGFkYXRhW2ldWydhbmltYWxfaWQnXSkgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwvdWw+PC9kaXY+JylcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJCgnI21ldGFkYXRhLXRhYmxlJykuZmluZCgndGJvZHknKVxyXG4gICAgICAgICAgICAuYXBwZW5kKCdUaGVyZSBpcyBubyBtZXRhZGF0YSBmb3IgdGhpcyBkYXRhc2V0Jyk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG4vKipcclxuICogU2l6ZSBhbmQgd2VpZ2h0IGNvbG9yaW5nIGZvciB0aGUgbWV0YWRhdGFcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjb2xvck1ldGFkYXRhKCkge1xyXG4gICAgcmVzZXRJbmRpdmlkdWFsTWV0YWRhdGEoKTtcclxuICAgIC8vIGdldCB0aGUgaW5wdXQgdmFsdWVzXHJcbiAgICBsZXQgdmFsdWUgPSAkKCcjZ3JvdXAtbWV0YWRhdGEgLmJ0bi5idG4tZGVmYXVsdC5hY3RpdmUgaW5wdXQnKVxyXG4gICAgICAgIC5hdHRyKCd2YWx1ZScpO1xyXG4gICAgbGV0IGJsQXZnID0gJCgnI2JsLWF2ZycpLnZhbCgpO1xyXG4gICAgbGV0IGFiQXZnID0gJCgnI2FiLWF2ZycpLnZhbCgpO1xyXG4gICAgLy8gY29sb3Igc2NoZW1lIGZvciB0aGUgaW5wdXRzXHJcbiAgICBsZXQgY29sb3JzID0gWycjN2ZjOTdmJywgJyNmZGMwODYnLCAnIzM4NmNiMCddO1xyXG4gICAgLy8gY29sb3IgdGhlIGFuaW1hbHNcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YXNldE1ldGFkYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGRhdGFzZXRNZXRhZGF0YVtpXVt2YWx1ZV0gPCBibEF2Zykge1xyXG4gICAgICAgICAgICBtZXRhZGF0YUNvbG9yW2RhdGFzZXRNZXRhZGF0YVtpXVsnYW5pbWFsX2lkJ11dID0gY29sb3JzWzBdO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YXNldE1ldGFkYXRhW2ldW3ZhbHVlXSA+IGFiQXZnKSB7XHJcbiAgICAgICAgICAgIG1ldGFkYXRhQ29sb3JbZGF0YXNldE1ldGFkYXRhW2ldWydhbmltYWxfaWQnXV0gPSBjb2xvcnNbMl07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbWV0YWRhdGFDb2xvcltkYXRhc2V0TWV0YWRhdGFbaV1bJ2FuaW1hbF9pZCddXSA9IGNvbG9yc1sxXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogTWV0YWRhdGEgcmVzZXQgYWxsIGluZGl2aWR1YWwgbWV0YWRhdGEgaW5wdXQgZmllbGRzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRJbmRpdmlkdWFsTWV0YWRhdGEoKSB7XHJcbiAgICBtZXRhZGF0YUNvbG9yID0ge307XHJcbiAgICAkKCcuZHJvcGRvd24gI3ByZXZpZXcnKVxyXG4gICAgICAgIC5jc3MoJ2JhY2tncm91bmQtY29sb3InLCAncmdiKDI1NSwgMjU1LCAyNTUpJyk7XHJcbn1cclxuIiwiLyplc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtbGV0cyovXHJcbi8qZ2xvYmFsIHdpbmRvdywgZDMsICQsIFNldCovXHJcblxyXG5pbXBvcnQgKiBhcyBTUFYgZnJvbSAnLi9zcGF0aWFsX3ZpZXcvc3BhdGlhbF92aWV3LmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBkaXNhYmxlUGxheUJ1dHRvblxyXG59IGZyb20gJy4vaGVscGVycy5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgYnJ1c2hlbmQsXHJcbiAgICBzbGlkZXJcclxufSBmcm9tICcuL3NwYXRpYWxfdmlldy9pbnRlcmFjdGlvbi5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgY2hhbmdlTGVnZW5kLFxyXG59IGZyb20gJy4vc3BhdGlhbF92aWV3L2xlZ2VuZC5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgbWV0YWRhdGFDb2xvcixcclxuICAgIHJlc2V0SW5kaXZpZHVhbE1ldGFkYXRhLFxyXG4gICAgY29sb3JNZXRhZGF0YVxyXG59IGZyb20gJy4vbWV0YWRhdGEuanMnO1xyXG5cclxuXHJcbmltcG9ydCB7XHJcbiAgICBzZXROZXR3b3JrQXV0byxcclxuICAgIHNldE5ldHdvckxpbWl0LFxyXG4gICAgc2V0TmV0d29ya0hpZXJhcmNoeSxcclxuICAgIHNldG5ldHdvcmtDb2xvcixcclxuICAgIHNldE5ldHdvcmtJRCxcclxuICAgIHNldE5ldHdvcmtCYWNrZ3JvdW5kLFxyXG4gICAgc2V0TmV0d29ya0JhY2tncm91bmRMaW1pdFxyXG59IGZyb20gJy4vbmV0d29yay5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgZGF0YXNldCxcclxuICAgIHN3YXJtRGF0YSxcclxuICAgIGRhdGFzZXRNZXRhZGF0YSxcclxuICAgIHNldE5ldHdvcmtEYXRhLFxyXG4gICAgc2V0SGllcmFyY2h5RGF0YVxyXG59IGZyb20gJy4vZXhwbG9yZS5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgZ2V0RGF0YXNldEZlYXR1cmUsXHJcbiAgICBnZXROZXR3b3JrRGF0YSxcclxuICAgIGdldFN3YXJtRGF0YXNldEZlYXR1cmUsXHJcbiAgICBnZXROZXR3b3JrSGllcmFyY2h5RGF0YVxyXG59IGZyb20gJy4vYWpheF9xdWVyaWVzLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBjb2xvclNjYWxlXHJcbn0gZnJvbSAnLi9zcGF0aWFsX3ZpZXcvY29sb3JfcGlja2VyJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBhZGRIaWVyYXJjaHlCdXR0b24sXHJcbiAgICByZW1vdmVIaWVyYXJjaHlCdXR0b24sXHJcbiAgICBtYXhOdW1iZXJIaWVyYXJjaGllcyxcclxuICAgIHNldFNldE9wZXJhdGlvbixcclxuICAgIC8vRHJhd2VyXHJcbn0gZnJvbSAnLi9oaWVyYXJjaHkuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIHNldFRyYWNraW5nQm9vbGVhbixcclxuICAgIHJlc2V0VHJhY2tlZERhdGEsXHJcbiAgICBzZW5kVHJhY2tlZERhdGFcclxufSBmcm9tICcuL3Zpc3VhbF9wYXJhbWV0ZXIuanMnO1xyXG5cclxubGV0IGJydXNoOyAvLyBicnVzaGluZyB2YXJpYWJsZVxyXG5leHBvcnQgbGV0IHBsYXlCb29sZWFuID0gdHJ1ZTsgLy8gcGF1c2UgYW5kIHBsYXkgYm9vbGVhblxyXG5cclxuXHJcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgIEdldHRlciBhbmQgc2V0dGVyXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuLyoqXHJcbiAqIFNldCBwbGF5IGJvb2xlYW5cclxuICogQHBhcmFtIHtCb29sZWFufSB2YWx1ZSAtIHBhdXNlIChmYWxzZSkgb3IgcGxheSAodHJ1ZSlcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRQbGF5Qm9vbGVhbih2YWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgcGxheUJvb2xlYW4gPSB2YWx1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcGxheUJvb2xlYW4gPSBmYWxzZTtcclxuICAgIH1cclxufVxyXG4iLCIvKmVzbGludC1kaXNhYmxlIG5vLXVudXNlZC1sZXRzKi9cclxuLypnbG9iYWwgd2luZG93LCQsIGQzLCovXHJcbi8vIGltcG9ydCAqIGFzIHNwdiBmcm9tICcuL3NwYXRpYWxfdmlldy5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgZHJhdyxcclxuICAgIFRyZW5kQ2hhcnRcclxufSBmcm9tICcuL3NwYXRpYWxfdmlldy9zcGF0aWFsX3ZpZXcuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIHNldFBsYXlCb29sZWFuXHJcbn0gZnJvbSAnLi9saXN0ZW5lci5qcyc7XHJcblxyXG5cclxuaW1wb3J0IHtcclxuICAgIHN3YXJtRGF0YVxyXG59IGZyb20gJy4vZXhwbG9yZS5qcyc7XHJcbi8qKlxyXG4gKiBEaXNhYmxlIHRoZSBwbGF5IGJ1dHRvbiAtLT4gTG9hZGluZyBzeW1ib2xcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBkaXNhYmxlUGxheUJ1dHRvbigpIHtcclxuICAgIHNldFBsYXlCb29sZWFuKGZhbHNlKTtcclxuICAgICQoJyNwbGF5LWJ1dHRvbicpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICQoJyNwbGF5LWJ1dHRvbicpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcbiAgICAkKCcjcGxheS1pY29ucycpLmhpZGUoKTtcclxuICAgICQoJyNwbGF5LWxvYWRpbmcnKS5zaG93KCk7XHJcblxyXG59XHJcblxyXG4vKipcclxuICogRW5hYmxlIHRoZSBwbGF5IGJ1dHRvbiByZW1vdmUgbG9hZGluZyBzeW1ib2xcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBlbmFibGVQbGF5QnV0dG9uKCkge1xyXG4gICAgc2V0UGxheUJvb2xlYW4odHJ1ZSk7XHJcbiAgICAkKCcjcGxheS1idXR0b24nKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAkKCcjcGxheS1idXR0b24nKS5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcclxuICAgICQoJyNwbGF5LWxvYWRpbmcnKS5oaWRlKCk7XHJcbiAgICAkKCcjcGxheS1pY29ucycpLnNob3coKTtcclxuICAgIC8vZHJhdygpO1xyXG59XHJcblxyXG4vKipcclxuICogUmV0dXJuICAuMDUgcGVyY2VudGlsZXMgb2YgdGhlIGFycmF5XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcGVyY2VudGlsZXMoYXJyKSB7XHJcbiAgICBsZXQgcCA9IDAuMDU7XHJcbiAgICBpZiAoYXJyLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG4gICAgYXJyLnNvcnQoZnVuY3Rpb24oYSwgYikge1xyXG4gICAgICAgIHJldHVybiBhIC0gYjtcclxuICAgIH0pO1xyXG4gICAgbGV0IGluZGV4ID0gKGFyci5sZW5ndGggLSAxKSAqIHA7XHJcbiAgICBsZXQgbG93ZXIgPSBNYXRoLmZsb29yKGluZGV4KTtcclxuICAgIGxldCB1cHBlciA9IGxvd2VyICsgMTtcclxuICAgIGxldCB3ZWlnaHQgPSBpbmRleCAlIDE7XHJcbiAgICBpZiAodXBwZXIgPj0gYXJyLmxlbmd0aCkge1xyXG4gICAgICAgIHJldHVybiAxIC0gYXJyW2xvd2VyXTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIDEgLSAoYXJyW2xvd2VyXSAqICgxIC0gd2VpZ2h0KSArIGFyclt1cHBlcl0gKiB3ZWlnaHQpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogUmV0dXJuIHRoZSAwNSwgMjUsIDUwLCA3NSwgOTUgcGVyY2VudGlsZXMgb2YgdGhlIGFycmF5XHJcbiAqXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcGVyY2VudGlsZXNMaW5lQ2hhcnQoYXJyKSB7XHJcbiAgICBsZXQgcCA9IFswLjA1LCAwLjI1LCAwLjUsIDAuNzUsIDAuOTVdO1xyXG4gICAgbGV0IHJlc3VsdCA9IFtdO1xyXG4gICAgaWYgKGFyci5sZW5ndGggPT09IDApIHtcclxuICAgICAgICByZXR1cm4gMDtcclxuICAgIH1cclxuICAgIGFyci5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcclxuICAgICAgICByZXR1cm4gYSAtIGI7XHJcbiAgICB9KTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGxldCBpbmRleCA9IChhcnIubGVuZ3RoIC0gMSkgKiBwW2ldO1xyXG4gICAgICAgIGxldCBsb3dlciA9IE1hdGguZmxvb3IoaW5kZXgpO1xyXG4gICAgICAgIGxldCB1cHBlciA9IGxvd2VyICsgMTtcclxuICAgICAgICBsZXQgd2VpZ2h0ID0gaW5kZXggJSAxO1xyXG4gICAgICAgIGlmICh1cHBlciA+PSBhcnIubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGFycltsb3dlcl0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGFycltsb3dlcl0gKiAoMSAtIHdlaWdodCkgKyBhcnJbdXBwZXJdICogd2VpZ2h0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG4vKipcclxuICogTGluZSBjaGFydCBkZXRhaWxzIGNsaWNrIGxpc3RlbmVyXHJcbiAqL1xyXG5mdW5jdGlvbiBpbml0VHJlbmRDaGFydExpc3RlbmVyKCkge1xyXG4gICAgJCgnLmRyYXctZGV0YWlscycpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmICgkKHRoaXMpLmZpbmQoJ2lucHV0OmNoZWNrYm94JykucHJvcCgnY2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgIC8vZGlzYWJsZUxpbmVDaGFydCgpO1xyXG4gICAgICAgICAgICB2YXIgdHJlbmRjaGFydCA9IG5ldyBUcmVuZENoYXJ0KHRoaXMsIHN3YXJtRGF0YSk7XHJcbiAgICAgICAgICAgIHRyZW5kY2hhcnQuZGlzYWJsZUxpbmVDaGFydCgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlbW92ZVRyZW5kQ2hhcnQoKTtcclxuICAgICAgICAgICAgZW5hYmxlTGluZUNoYXJ0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBMaW5lIGNoYXJ0IGRldGFpbHMgY2xpY2sgbGlzdGVuZXJcclxuICovXHJcbmZ1bmN0aW9uIGRpc2FibGVMaW5lQ2hhcnQoKSB7XHJcbiAgICAkKCcubGluZUNoYXJ0QnV0dG9uJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgJCgnLmxpbmUtY2hhcnQtY2hlY2stYm94JykuYXR0cignZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICQoJy5saW5lQ2hhcnRMaW5lJykuYXR0cigndmlzaWJpbGl0eScsICdoaWRkZW4nKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIExpbmUgY2hhcnQgZGV0YWlscyBjbGljayBsaXN0ZW5lclxyXG4gKi9cclxuZnVuY3Rpb24gZW5hYmxlTGluZUNoYXJ0KCkge1xyXG4gICAgJCgnLmxpbmVDaGFydEJ1dHRvbicpLnByb3AoJ2NoZWNrZWQnLCB0cnVlKS5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcclxuICAgICQoJy5saW5lLWNoYXJ0LWNoZWNrLWJveCcpLmF0dHIoJ2Rpc2FibGVkJywgZmFsc2UpO1xyXG4gICAgJCgnLmxpbmVDaGFydExpbmUnKS5hdHRyKCd2aXNpYmlsaXR5JywgJ3Zpc2libGUnKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEhpZGUgdGhlIHRyZW5kIGNoYXJ0XHJcbiAqL1xyXG5mdW5jdGlvbiByZW1vdmVUcmVuZENoYXJ0KCkge1xyXG4gICAgJCgnLnRyZW5kQ2hhcnREYXRhJykuaGlkZSgpO1xyXG4gICAgJCgnI3RyZW5kQ2hhcnRMZWdlbmQnKS5oaWRlKCk7XHJcbiAgICAkKCcjbGluZUNoYXJ0TGVnZW5kJykuc2hvdygpO1xyXG59XHJcblxyXG5cclxuXHJcbi8qKlxyXG4gKiBBZGQgdGhlIGFic29sdXRlIGZlYXR1cmUgY2hlY2tib3hlcyBpbiB0aGUgZmVhdHVyZSBwYW5lbCBleHBvcnQgdG8gYWpheFxyXG4gKlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGFkZEFic29sdXRlRmVhdHVyZUJ1dHRvbnMoZGF0YVNldFBlcmNlbnRpbGUpIHtcclxuICAgIC8vIGl0ZXJhdGUgb3ZlciB0aGUgb2JqZWN0XHJcbiAgICBmb3IgKHZhciBrZXkgaW4gZGF0YVNldFBlcmNlbnRpbGUpIHtcclxuICAgICAgICBpZiAoZGF0YVNldFBlcmNlbnRpbGUuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICAvLyBnZW5lcmF0ZSB0ZXh0IGZvciB0aGUgZGlzcGxheWVkIGJ1dHRvblxyXG4gICAgICAgICAgICBsZXQgY2FwaXRhbGl6ZWRfZmVhdHVyZV9zdHJpbmcgPSBrZXkuc3BsaXQoJ18nKS5qb2luKCcgJyk7XHJcbiAgICAgICAgICAgIGNhcGl0YWxpemVkX2ZlYXR1cmVfc3RyaW5nID0gY2FwaXRhbGl6ZWRfZmVhdHVyZV9zdHJpbmcuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBjYXBpdGFsaXplZF9mZWF0dXJlX3N0cmluZy5zbGljZSgxKTtcclxuICAgICAgICAgICAgLy8gYWRkIHRoZSBidXR0b25cclxuICAgICAgICAgICAgJCgnI2Fic29sdXRlLWZlYXR1cmUtY2hlY2tib3hlcycpLmFwcGVuZCgnPHRyPjx0aD4nICtcclxuICAgICAgICAgICAgICAgICcgPGRpdiBjbGFzcz1cInByZXR0eSBwLXN3aXRjaCBwLWZpbGwgcC1iaWdnZXJcIj48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgaWQ9XCJkcmF3LScgKyBrZXkgK1xyXG4gICAgICAgICAgICAgICAgJ1wiLz48ZGl2IGNsYXNzPVwic3RhdGVcIj48bGFiZWw+JyArIGNhcGl0YWxpemVkX2ZlYXR1cmVfc3RyaW5nICsgJzwvbGFiZWw+PC9kaXY+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAvLyBxdWFudGlsZSBncmFwaFxyXG4gICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJmbG9hdC1yaWdodCBkcmF3LWRldGFpbHNcIiBpZD1cImRyYXctJyArIGtleSArICctZGV0YWlsc1wiPjxkaXYgY2xhc3M9XCJwcmV0dHkgcC1pY29uIHAtdG9nZ2xlIHAtcGxhaW5cIj48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgaWQ9XCJkcmF3LScgKyBrZXkgKyAnLWlucHV0XCIgLz4nICtcclxuICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwic3RhdGUgcC1zdWNjZXNzLW8gcC1vblwiPjxpIGNsYXNzPVwibWRpIG1kaS1pbWFnZS1hcmVhXCI+PC9pPjxsYWJlbD48L2xhYmVsPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJzdGF0ZSBwLW9mZlwiPjxpIGNsYXNzPVwibWRpIG1kaS1pbWFnZS1vZmZcIj48L2k+PGxhYmVsPjwvbGFiZWw+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAnPC9kaXY+PC9kaXY+PC90aD48L3RyPicpO1xyXG5cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBoaWRlIHRoZSBlbGVtZW50c1xyXG4gICAgJCgnLmRyYXctZGV0YWlscycpLmhpZGUoKTtcclxuICAgIC8vIGluaXQgdGhlIGxpc3Rlcm5lcnNcclxuICBpbml0VHJlbmRDaGFydExpc3RlbmVyKCk7XHJcblxyXG59XHJcblxyXG4vLyBnZW5lcmF0ZSBoYXNoIGNvZGVzIGZyb20gc3RyaW5nc1xyXG4vLyBzb3VyY2U6IGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzc2MTY0NjEvZ2VuZXJhdGUtYS1oYXNoLWZyb20tc3RyaW5nLWluLWphdmFzY3JpcHQtanF1ZXJ5XHJcblN0cmluZy5wcm90b3R5cGUuaGFzaENvZGUgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBoYXNoID0gMCxcclxuICAgICAgICBpLCBjaHI7XHJcbiAgICBpZiAodGhpcy5sZW5ndGggPT09IDApIHJldHVybiBoYXNoO1xyXG4gICAgZm9yIChpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjaHIgPSB0aGlzLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgaGFzaCA9ICgoaGFzaCA8PCA1KSAtIGhhc2gpICsgY2hyO1xyXG4gICAgICAgIGhhc2ggfD0gMDsgLy8gQ29udmVydCB0byAzMmJpdCBpbnRlZ2VyXHJcbiAgICB9XHJcbiAgICByZXR1cm4gaGFzaDtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBDYWxjdWxhdGUgdGhlIHN0YW5kYXJkRGV2aWF0aW9uIG9mIGFuIGFycmF5IG9mIG51bWJlcnNcclxuICogQHBhcmFtIHtBcnJheX0gYXJyIC0gYXJyYXkgb2YgbnVtYmVyc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHN0YW5kYXJkRGV2aWF0aW9uKGFycikge1xyXG4gICAgaWYgKGFyciBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgbGV0IG1lYW4gPSBhcnIucmVkdWNlKGZ1bmN0aW9uKHB2LCBjdikge1xyXG4gICAgICAgICAgICByZXR1cm4gcHYgKyBjdjtcclxuICAgICAgICB9LCAwKSAvIGFyci5sZW5ndGg7XHJcbiAgICAgICAgbGV0IHRtcCA9IGFyci5tYXAoZnVuY3Rpb24obnVtKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLnBvdyhudW0gLSBtZWFuLCAyKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KHRtcC5yZWR1Y2UoZnVuY3Rpb24ocHYsIGN2KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwdiArIGN2O1xyXG4gICAgICAgIH0sIDApIC8gdG1wLmxlbmd0aCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBNb3ZlIGVsZW1lbnQgaW4gU1ZHIGludG8gYmFja2dyb3VuZCBkb25lIGJ5IG1vdmluZyBpdCB0byBmaXJzdCBlbGVtZW50XHJcbiAqL1xyXG5kMy5zZWxlY3Rpb24ucHJvdG90eXBlLm1vdmVUb0JhY2sgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGZpcnN0Q2hpbGQgPSB0aGlzLnBhcmVudE5vZGUuZmlyc3RDaGlsZDtcclxuICAgICAgICBpZiAoZmlyc3RDaGlsZCkge1xyXG4gICAgICAgICAgICB0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMsIGZpcnN0Q2hpbGQpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIE1ha2UgdGhlIG1haW4gdmlzIHNwYXRpYWwgdmlldyByZXNpemFibGVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBtYWtlUmVzaXphYmxlKGhlaWdodCwgd2lkdGgpIHtcclxuICAgICQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJCgnI21haW4tdmlzJylcclxuICAgICAgICAgICAgLmRyYWdnYWJsZSh7XHJcbiAgICAgICAgICAgICAgICBjb250YWlubWVudDogJ3BhcmVudCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnJlc2l6YWJsZSh7XHJcbiAgICAgICAgICAgICAgICBhc3BlY3RSYXRpbzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG1heFdpZHRoOiAkKCcjbWFpbi12aXMtZGl2Jykud2lkdGgoKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuaGVpZ2h0KGhlaWdodCAqIDAuNilcclxuICAgICAgICAgICAgLndpZHRoKHdpZHRoICogMC42KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogUmVzZXQgdGhlIGJ1dHRvbnMgYW5kIGNoZWNrYm94ZXNcclxuICogSGlkZSBpY29ucyAtIG5lZWRlZCBiZWNhdXNlIG9mIGJvb3RzdHJhcCBidWdcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0Q29uZmlnKCkge1xyXG4gICAgJCgnaW5wdXRbdHlwZT1jaGVja2JveF0nKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xyXG4gICAgLy9zZXQgdGhlIGNvbG9yIHNjYWxlIGZ1bmN0aW9uIHRvIGxpbmVhclxyXG4gICAgJCgnI2NvbG9yLXNjYWxlLWxpbmVhcicpXHJcbiAgICAgICAgLnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcclxuICAgICQoJyNncm91cC1zaXplLW0nKVxyXG4gICAgICAgIC5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XHJcbiAgICAkKCcjYmFja2dyb3VuZC13aGl0ZScpXHJcbiAgICAgICAgLnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcclxuICAgICQoJyNzZXR0aW5ncy1kaXYgaW5wdXRbdHlwZT1jaGVja2JveF0nKVxyXG4gICAgICAgIC5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XHJcbiAgICAvL2hpZGUgdGhlIGxvYWRpbmcgZ2lmXHJcbiAgICAkKCcjbG9hZGluZycpXHJcbiAgICAgICAgLmhpZGUoKTtcclxuICAgIC8vIG5lZWRlZCBkdWUgdG8galF1ZXJ5IGluY29tcGF0aWJpbGl0eVxyXG4gICAgJCgnI3BsYXktbG9hZGluZycpLmhpZGUoKTtcclxuICAgICQoJy5tZGktcGxheScpLmhpZGUoKTtcclxuICAgICQoJyNtZXRhZGF0YS1pbnB1dCcpLmhpZGUoKTtcclxuICAgICQoJyNkZW5kcm9ncmFtLWJ1dHRvbnMtZGl2JykuaGlkZSgpO1xyXG4gICAgJCgnI2ctY2VudHJvaWQnKS5oaWRlKCk7XHJcbiAgICAvL2NoZWNrIGxpbmUgY2hhcnQgZHJhdyBhbGwgbGluZXNcclxuICAgICQoJyNsaW5lLWNoYXJ0LWZlYXR1cmUtY2hlY2tib3hlcyBpbnB1dFt0eXBlPWNoZWNrYm94XScpXHJcbiAgICAgICAgLnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcclxufVxyXG4iLCIvKmVzbGludC1kaXNhYmxlIG5vLXVudXNlZC1sZXRzKi9cclxuLypnbG9iYWwgd2luZG93LCAkLGQzLCBwYXJhbWV0ZXJzLCBjb2xvcmJyZXdlciwgU2V0ICovXHJcbid1c2Ugc3RyaWN0JztcclxuaW1wb3J0IHtcclxuICAgIGRhdGFzZXQsXHJcbiAgICBuZXR3b3JrRGF0YSxcclxuICAgIHN3YXJtRGF0YSxcclxuICAgIGFuaW1hbElkcyxcclxuICAgIGRhdGFzZXRNZXRhZGF0YSxcclxuICAgIHNldE5ldHdvcmtEYXRhLFxyXG4gICAgLy9zZXRIaWVyYXJjaHlEYXRhLFxyXG4gICAgZGF0YVNldFBlcmNlbnRpbGUsXHJcbiAgICBuZXR3b3JrSGllcmFyY2h5XHJcbn0gZnJvbSAnLi4vZXhwbG9yZS5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgbmV0d29ya0NvbG9yU2NhbGUsXHJcbiAgICBuZXR3b3JrQXV0byxcclxuICAgIHNldE5ldHdvckxpbWl0LFxyXG4gICAgbmV0d29ya0xpbWl0LFxyXG4gICAgc2hvd05ldHdvcmtIaWVyYXJjaHksXHJcbiAgICBzZXRuZXR3b3JrQ29sb3JcclxuICAgIC8vIG5ldHdvcmtJRCxcclxuICAgIC8vIG5ldHdvcmtCYWNrZ3JvdW5kLFxyXG4gICAgLy8gbmV0d29ya0JhY2tncm91bmRMaW1pdFxyXG59IGZyb20gJy4uL25ldHdvcmsuanMnO1xyXG5cclxuXHJcblxyXG5pbXBvcnQge1xyXG4gICAgcGVyY2VudGlsZXMsXHJcbiAgICBtYWtlUmVzaXphYmxlLFxyXG4gICAgZGVmYXVsdENvbmZpZyxcclxuICAgIGRpc2FibGVQbGF5QnV0dG9uLFxyXG4gICAgZW5hYmxlUGxheUJ1dHRvbixcclxuICAgIHBlcmNlbnRpbGVzTGluZUNoYXJ0XHJcbn0gZnJvbSAnLi4vaGVscGVycy5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgc2V0VGltZVNsaWRlcixcclxuICAgIGluaXRUb29sdGlwLFxyXG4gICAgdG9vbHRpcEZ1bmN0aW9uLFxyXG4gICAgaW5pdFNsaWRlcnMsXHJcbiAgICB0b29sdGlwLFxyXG4gICAgc2xpZGVyXHJcbn0gZnJvbSAnLi9pbnRlcmFjdGlvbi5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgbWV0YWRhdGFDb2xvclxyXG59IGZyb20gJy4uL21ldGFkYXRhLmpzJztcclxuXHJcblxyXG5cclxuaW1wb3J0IHtcclxuICAgIGluaXRMaXN0ZW5lcnMsXHJcblxyXG59IGZyb20gJy4uL2xpc3RlbmVyLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBhZGRTcGF0aWFsVmlld0dyb3VwXHJcbn0gZnJvbSAnLi9sZWdlbmQuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIC8vdXBkYXRlRGVuZHJvZ3JhbSxcclxuICAgIC8vc2V0SGllcmFyY2h5TGV2ZWwsXHJcbiAgICAvL2dldEhpZXJhcmNoeUxldmVsLFxyXG4gICAgLy9kcmF3SGllcmFyY2h5LFxyXG4gICAgaW5pdERlbmRyb2dyYW1MZWdlbmQsXHJcbiAgICBhZGRIaWVyYXJjaHlCdXR0b24sXHJcbiAgICByZW1vdmVIaWVyYXJjaHlCdXR0b24sXHJcbiAgICAvL2hpZXJhcmNoeUNvbG9ycyxcclxuICAgIGNvbG9ycyxcclxuICAgIC8vIG5ldHdvcmtIaWVyYXJjaHlJZHMsXHJcbiAgICAvLyBzZXRoaWVyYXJjaHlHcm91cFN0ZGV2LFxyXG4gICAgcmVzZXRoaWVyYXJjaHlHcm91cFN0ZGV2LFxyXG4gICAgaGllcmFyY2h5R3JvdXBTdGRldixcclxuICAgIG1heE51bWJlckhpZXJhcmNoaWVzLFxyXG4gICAgdHJlZW1hcCxcclxuICAgIHNldE9wZXJhdGlvbixcclxuICAgIC8vY29sbGFwc2UsXHJcbiAgICBoaWVyYXJjaHlMZXZlbHMsXHJcbiAgICBkaWFnb25hbExpbmVzLFxyXG4gICAgLy9jbGljayxcclxuICAgIC8vZ2V0SGllcmFyY2h5VmVydGljZXMsXHJcbiAgICBEZW5kcm9ncmFtXHJcbn0gZnJvbSAnLi4vaGllcmFyY2h5LmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICB0cmFja2luZ0Jvb2xlYW4sXHJcbiAgICBhZGRUcmFja2VkRGF0YVxyXG59IGZyb20gJy4uL3Zpc3VhbF9wYXJhbWV0ZXIuanMnO1xyXG5cclxuXHJcbmltcG9ydCB7XHJcbiAgICBnZXREYXRhc2V0RmVhdHVyZSxcclxuICAgIGdldE5ldHdvcmtEYXRhLFxyXG4gICAgZ2V0U3dhcm1EYXRhc2V0RmVhdHVyZSxcclxuICAgIC8vZ2V0TmV0d29ya0hpZXJhcmNoeURhdGFcclxufSBmcm9tICcuLi9hamF4X3F1ZXJpZXMuanMnO1xyXG5cclxuXHJcbiAvLyBzdmcgY29udGFpbmVyIGZvciB0aGUgc3BhdGlhbCB2aWV3XHJcbiAvLyBzdmcgZ3JvdXAgZm9yIHRoZSBzcGF0aWFsIHZpZXcgdGFua1xyXG4vLyBsZXQgbmV0d29ya0Jha0RhdGEgPSB7fTtcclxuXHJcbi8vZXhwb3J0IGxldCBpbmRleFRpbWUgPSAwOyAvLyBhY3R1YWwgdGltZSBtb21lbnQgaW4gdGhlIGFuaW1hdGlvblxyXG5cclxuLy8gYXJyYXkgb2YgYW5pbWFscyBmb3IgdGhlIHNwZWNpZmljIHRpbWUgZnJhbWVcclxuXHJcblxyXG4vLyBEcmF3ZXIgU2V0dXBcclxuXHJcblxyXG5cclxubGV0IEpTT05BUElfTUlNRVRZUEUgPSAnYXBwbGljYXRpb24vdm5kLmFwaStqc29uJztcclxubGV0IHRyZW5kQ2hhcnRzWm9vbSA9IHt9O1xyXG4vL2xldCB0aGlzLnRyZW5kQ2hhcnRzRWxlbSA9IFsnbG93ZXItb3V0ZXItYXJlYScsICdsb3dlci1pbm5lci1hcmVhJywgJ21lZGlhbi1saW5lJywgJ3VwcGVyLWlubmVyLWFyZWEnLCAndXBwZXItb3V0ZXItYXJlYSddO1xyXG4vL2xldCBsaW5lQ2hhcnRXaWR0aCA9IDUwMDA7XHJcblxyXG5cclxuLy8gTGlzdGVuZXIgU2V0dXBcclxuLy8gYnJ1c2hpbmcgdmFyaWFibGVcclxuZXhwb3J0IGxldCBwbGF5Qm9vbGVhbiA9IHRydWU7XHJcblxyXG5cclxuLy8gTGluZWNoYXJ0IFNldHVwXHJcbmxldCByYXRpbyA9IDE7XHJcbmxldCB6b29tR3JvdXA7XHJcbmxldCB4O1xyXG5sZXQgeTtcclxuZXhwb3J0IGxldCB6b29tRnVuY3Rpb247XHJcblxyXG5cclxuXHJcblxyXG5cclxuLyoqXHJcbiogQmFzZSBjbGFzcyBkcmF3ZXJcclxuKi9cclxuXHJcbi8qKlxyXG4gKiBJbml0aWFsaXplIHRoZSBzcGF0aWFsIHZpZXcgd2l0aCBhbGwgdGhlIGltcG9ydGFudCBmYWN0b3JzXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgRHJhd2VyIHtcclxuICAgY29uc3RydWN0b3IoKXtcclxuICAgICB0aGlzLm1pblBvaW50ID0gcGFyYW1ldGVyc1snbWluJ11bJ2dlb21ldHJ5J11bJ2Nvb3JkaW5hdGVzJ107XHJcbiAgICAgdGhpcy5tYXhQb2ludCA9IHBhcmFtZXRlcnNbJ21heCddWydnZW9tZXRyeSddWydjb29yZGluYXRlcyddO1xyXG4gICAgIC8vIGxldCBjb29yZGluYXRlT3JpZ2luID0gcGFyYW1ldGVyc1snY29vcmRpbmF0ZV9vcmlnaW4nXVsnZ2VvbWV0cnknXVsnY29vcmRpbmF0ZXMnXTtcclxuICAgICAvLyB3aWR0aCA9IHdpZHRoICoxLjAyIC0tPiBzbyB0aGVyZSBpcyBhIG1hcmdpbiBpbiB0aGUgc3BhdGlhbCB2aWV3IHdoZXJlIG5vIGFuaW1hbCBpcyBldmVyXHJcbiAgICAgdGhpcy50YW5rV2lkdGggPSAodGhpcy5tYXhQb2ludFswXSAtIHRoaXMubWluUG9pbnRbMF0pICogMS4wMjtcclxuICAgICB0aGlzLnRhbmtIZWlnaHQgPSAodGhpcy5tYXhQb2ludFsxXSAtIHRoaXMubWluUG9pbnRbMV0pICogMS4wMjtcclxuICAgICB0aGlzLmluZGV4VGltZT0wO1xyXG4gICAgIC8vIFRhbmsgQmFzZVxyXG4gICAgIHRoaXMuc3ZnQ29udGFpbmVyID0gZDMuc2VsZWN0KCcjbWFpbi12aXMnKVxyXG4gICAgIC5jbGFzc2VkKCdzdmctY29udGFpbmVyJywgdHJ1ZSlcclxuICAgICAvLyB0byBtYWtlIGl0IHJlc3BvbnNpdmUgd2l0aCBjc3NcclxuICAgICAuYXBwZW5kKCdzdmcnKVxyXG4gICAgIC5hdHRyKCdwcmVzZXJ2ZUFzcGVjdFJhdGlvJywgJ3hNaW5ZTWluIG1lZXQnKVxyXG4gICAgIC5hdHRyKCd2aWV3Qm94JywgJzAgMCAnICsgdGhpcy50YW5rV2lkdGggKyAnICcgKyB0aGlzLnRhbmtIZWlnaHQpXHJcbiAgICAgLy8gYWRkIHRoZSBjbGFzcyBzdmctY29udGVudFxyXG4gICAgIC5jbGFzc2VkKCdzdmctY29udGVudCcsIHRydWUpXHJcbiAgICAgLmF0dHIoJ2lkJywgJ21haW4tdmlzLXN2ZycpXHJcblxyXG5cclxuICAgICB0aGlzLnpvb20gPSBkMy56b29tKClcclxuICAgICAgICAgLnNjYWxlRXh0ZW50KFsxLCA2XSlcclxuICAgICAgICAgLm9uKCd6b29tJywgKCk9PntcclxuICAgICAgICAgICAgIC8vY29uc3RyYWluZWQgem9vbWluZ1xyXG4gICAgICAgICAgICAgLy8gbW9kaWZ5IHRoZSB0cmFuc2xhdGUgc28gdGhhdCBpdCBuZXZlciBleGl0cyB0aGUgdGFua1xyXG4gICAgICAgICAgICAgZDMuZXZlbnQudHJhbnNmb3JtLnggPSBNYXRoLm1pbigwLCB0aGlzLnRhbmtXaWR0aCAqIChkMy5ldmVudC50cmFuc2Zvcm0uayAtIDEpLFxyXG4gICAgICAgICAgICAgICAgIE1hdGgubWF4KHRoaXMudGFua1dpZHRoICogKDEgLSBkMy5ldmVudC50cmFuc2Zvcm0uayksIGQzLmV2ZW50LnRyYW5zZm9ybS54KSk7XHJcblxyXG4gICAgICAgICAgICAgZDMuZXZlbnQudHJhbnNmb3JtLnkgPSBNYXRoLm1pbigwLCB0aGlzLnRhbmtIZWlnaHQgKiAoZDMuZXZlbnQudHJhbnNmb3JtLmsgLSAxKSxcclxuICAgICAgICAgICAgICAgICBNYXRoLm1heCh0aGlzLnRhbmtIZWlnaHQgKiAoMSAtIGQzLmV2ZW50LnRyYW5zZm9ybS5rKSwgZDMuZXZlbnQudHJhbnNmb3JtLnkpKTtcclxuXHJcbiAgICAgICAgICAgICAvLyB0cmFuc2xhdGUgYW5kIHNjYWxlXHJcbiAgICAgICAgICAgICB0aGlzLnpvb21Hcm91cC5hdHRyKCd0cmFuc2Zvcm0nLCBkMy5ldmVudC50cmFuc2Zvcm0pO1xyXG5cclxuICAgICAgICAgICAgIC8vIHJlc2NhbGUgdGhlIGF4aXNcclxuICAgICAgICAgICAgIGdYYXhpcy5jYWxsKHhBeGlzLnNjYWxlKGQzLmV2ZW50LnRyYW5zZm9ybS5yZXNjYWxlWCh4KSkpO1xyXG4gICAgICAgICAgICAgZ1lheGlzLmNhbGwoeUF4aXMuc2NhbGUoZDMuZXZlbnQudHJhbnNmb3JtLnJlc2NhbGVZKHkpKSk7XHJcbiAgICAgICAgIH0pO1xyXG5cclxuICAgICB0aGlzLnpvb21Hcm91cCA9IHRoaXMuc3ZnQ29udGFpbmVyLmFwcGVuZCgnc3ZnOmcnKTtcclxuICAgICB0aGlzLnRhbmsgPSB0aGlzLnpvb21Hcm91cC5hcHBlbmQoJ3N2ZzpnJylcclxuICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3RhbmsnKVxyXG4gICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgKCk9PntcclxuICAgICAgICAgICAgICAgICAgIGxldCB4ID0gcGFyYW1ldGVycy5pbnZlcnRlZF94ID8gLTEgOiAxO1xyXG4gICAgICAgICAgICAgICAgICAgbGV0IHkgPSBwYXJhbWV0ZXJzLmludmVydGVkX3kgPyAtMSA6IDE7XHJcbiAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3NjYWxlKCcgKyB4ICsgJywnICsgeSArICcpJztcclxuICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgLy8gYWN0dWFsIHRpbWUgbW9tZW50IGluIHRoZSBhbmltYXRpb25cclxuXHJcbiAgICAgdGhpcy5hY3RpdmVTY2FsZSA9ICdibGFjayc7IC8vIGNhbiBiZSBzcGVlZCwgYWNjZWxlcmF0aW9uLCAuLiBhbmQgYmxhY2sgKG1lYW5pbmcgbm8gYWN0aXZlIHNjYWxlKVxyXG4gICAgIHRoaXMuY29sb3JTY2FsZSA9IHtcclxuICAgICAgICAgdHlwZTogJ0xpbmVhcicsXHJcbiAgICAgICAgIGNvbG9yOiBjb2xvcmJyZXdlci5CdVlsQnVcclxuICAgICB9O1xyXG4gICAgIHRoaXMubGVnZW5kV2lkdGggPSA1NTA7XHJcbiAgICAgdGhpcy5sZWdlbmRIZWlnaHQgPSA2MDtcclxuXHJcbiAgICAgdGhpcy5zdmdMZWdlbmQgPSBkMy5zZWxlY3QoJyNtYWluLXZpcy1sZWdlbmQtZGl2JylcclxuICAgICAgICAgLmFwcGVuZCgnc3ZnJylcclxuICAgICAgICAgLmF0dHIoJ2lkJywgJ21haW4tdmlzLWxlZ2VuZCcpXHJcbiAgICAgICAgIC5hdHRyKCd3aWR0aCcsIHRoaXMubGVnZW5kV2lkdGgpXHJcbiAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCB0aGlzLmxlZ2VuZEhlaWdodCk7XHJcblxyXG4gICAgIHRoaXMubWVkb2lkQW5pbWFsID0gLTE7IC8vIHdoaWNoIGFuaW1hbCBpcyB0aGUgbWVkb2lkICgtMSBpcyBubyBhbmltYWwpXHJcbiAgICAgdGhpcy5hY3RpdmVBbmltYWxzID0gW107IC8vIGFjdGl2ZSBzZWxlY3RlZCBhbmltYWxzXHJcbiAgICAgdGhpcy5hcnJheUFuaW1hbHMgPSBkYXRhc2V0LmZpbHRlcigoZCk9PntcclxuICAgICAgICAgcmV0dXJuIGRbJ3QnXSA9PT0gdGhpcy5pbmRleFRpbWU7XHJcbiAgICAgfSk7Ly8gYXJyYXkgb2YgYW5pbWFscyBmb3IgdGhlIHNwZWNpZmljIHRpbWUgZnJhbWVcclxuICAgICB0aGlzLmlkID0gJCgnLnNob3ctZGVuZHJvZ3JhbS5idG4tcHJpbWFyeScpLmF0dHIoJ2RhdGEnKTtcclxuICAgICB0aGlzLnBsYXlCb29sZWFuID0gdHJ1ZTtcclxuICAgICB0aGlzLmhpZXJhcmNoeUxldmVscyA9IHt9O1xyXG4gICAgIHRoaXMuaGllcmFyY2h5R3JvdXBTdGRldiA9IHt9O1xyXG4gICAgIHRoaXMuYnJ1c2ggPSBkMy5icnVzaCgpXHJcbiAgICAgICAgIC5leHRlbnQoW1xyXG4gICAgICAgICAgICAgWzAsIDBdLFxyXG4gICAgICAgICAgICAgW3RoaXMudGFua1dpZHRoLCB0aGlzLnRhbmtIZWlnaHRdXHJcbiAgICAgICAgIF0pO1xyXG4gICAgIHRoaXMuc3ZnTGVnZW5kX25ldHcgPSBkMy5zZWxlY3QoJyNoaWVyYXJjaHktbGVnZW5kLWRpdicpO1xyXG4gICAgIHRoaXMuZGVuZHJvem9vbSA9IHRoaXMuem9vbUdyb3VwO1xyXG4gICAgIHRoaXMubmV0d29ya0NvbG9yID0ge307XHJcbiAgICAgdGhpcy5oaWVyYXJjaHlDb2xvcnMgPSB7fTtcclxuICAgICB0aGlzLm5ldHdvcmtIaWVyYXJjaHkgPSBuZXR3b3JrSGllcmFyY2h5O1xyXG4gICAgIHRoaXMuc3BhdGlhbFZpZXcgPSBkMy5zZWxlY3QoJy50YW5rJyk7XHJcbiAgICAgdGhpcy50b29sdGlwRGl2ID0gZDMuc2VsZWN0KCcjZGVuZHJvZ3JhbS10b29sdGlwJylcclxuICAgICAgICAgLnN0eWxlKCdsZWZ0JywgMCArICdweCcpXHJcbiAgICAgICAgIC5zdHlsZSgndG9wJywgMCArICdweCcpXHJcbiAgICAgICAgIC5vbignbW91c2VvdmVyJywgKCk9PntcclxuICAgICAgICAgICAgIHRoaXMudG9vbHRpcERpdlxyXG4gICAgICAgICAgICAgICAgIC5zdHlsZSgnb3BhY2l0eScsIDEpO1xyXG4gICAgICAgICB9KTtcclxuXHJcblxyXG5cclxuXHJcbiAgIH1cclxuICAgc2V0SW5kZXhUaW1lKHZhbHVlKSB7XHJcbiAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyAmJiAodGhpcy5pbmRleFRpbWUgPD0gc3dhcm1EYXRhLmxlbmd0aCkpIHtcclxuICAgICAgICAgICB0aGlzLmluZGV4VGltZSA9IHZhbHVlO1xyXG4gICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICB0aGlzLmluZGV4VGltZSA9IDA7XHJcbiAgICAgICB9XHJcbiAgIH1cclxuICAgc2V0QWN0aXZlU2NhbGUodmFsdWUpIHtcclxuICAgICAgIHRoaXMuYWN0aXZlU2NhbGUgPSB2YWx1ZTtcclxuICB9XHJcbiAgIHNldEFjdGl2ZUFuaW1hbHModmFsdWUpIHtcclxuICAgICAgdGhpcy5hY3RpdmVBbmltYWxzID0gdmFsdWU7XHJcbiAgfVxyXG4gICBkZWNJbmRleFRpbWUoKSB7XHJcbiAgICAgICB0aGlzLmluZGV4VGltZSA9IHRoaXMuaW5kZXhUaW1lIC0gMTtcclxuICAgfVxyXG4gICB1cGRhdGVMaW5lQ2hhcnQoKSB7XHJcbiAgICAgICBpZiAoZDMuc2VsZWN0KCcjbGluZUNoYXJ0VGltZUxpbmUnKSAmJiBzd2FybURhdGFbTWF0aC5jZWlsKHRoaXMuaW5kZXhUaW1lIC8gcmF0aW8pXSkge1xyXG4gICAgICAgICAgIGxldCB0bXAgPSBNYXRoLmNlaWwodGhpcy5pbmRleFRpbWUgLyByYXRpbyk7XHJcbiAgICAgICAgICAgLy91cGRhdGUgdGhlIGxpbmUgY2hhcnQgbGVnZW5kIHRleHQgdmFsdWVzIHBlciBzZWNvbmRcclxuICAgICAgICAgICBpZiAodGhpcy5pbmRleFRpbWUgJSAyNSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAvLyBUT0RPIGNoYW5nZSB0aGlzIHRvIGEgbW9yZSBtb2R1bGFyIHdheVxyXG4gICAgICAgICAgICAgICBkMy5zZWxlY3QoJyNjb252ZXhfaHVsbF9hcmVhTGluZVZhbHVlJylcclxuICAgICAgICAgICAgICAgICAgIC50ZXh0KChzd2FybURhdGFbdG1wXVsnY29udmV4X2h1bGxfYXJlYSddKSArICdtbcKyJyk7XHJcbiAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnI3NwZWVkTGluZVZhbHVlJylcclxuICAgICAgICAgICAgICAgICAgIC50ZXh0KHN3YXJtRGF0YVt0bXBdWydzcGVlZCddICsgJ21tL3MnKTtcclxuICAgICAgICAgICAgICAgZDMuc2VsZWN0KCcjYWNjZWxlcmF0aW9uTGluZVZhbHVlJylcclxuICAgICAgICAgICAgICAgICAgIC50ZXh0KHN3YXJtRGF0YVt0bXBdWydhY2NlbGVyYXRpb24nXSArICdtbS9zwrInKTtcclxuICAgICAgICAgICAgICAgZDMuc2VsZWN0KCcjZGlzdGFuY2VfY2VudHJvaWRMaW5lVmFsdWUnKVxyXG4gICAgICAgICAgICAgICAgICAgLnRleHQoc3dhcm1EYXRhW3RtcF1bJ2Rpc3RhbmNlX2NlbnRyb2lkJ10gKyAnbW0nKTtcclxuICAgICAgICAgICAgICAgZDMuc2VsZWN0KCcjZGlyZWN0aW9uTGluZVZhbHVlJylcclxuICAgICAgICAgICAgICAgICAgIC50ZXh0KHN3YXJtRGF0YVt0bXBdWydkaXJlY3Rpb24nXSArICfCsCcpO1xyXG4gICAgICAgICAgICAgICBkMy5zZWxlY3QoJyNwb2xhcmlzYXRpb25MaW5lVmFsdWUnKVxyXG4gICAgICAgICAgICAgICAgICAgLnRleHQoc3dhcm1EYXRhW3RtcF1bJ3BvbGFyaXNhdGlvbiddKTtcclxuICAgICAgICAgICB9XHJcbiAgICAgICAgICAgZDMuc2VsZWN0KCcjbGluZUNoYXJ0VGltZUxpbmUnKVxyXG4gICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgem9vbUZ1bmN0aW9uKHRtcCkgKyAnLDApJyk7XHJcbiAgICAgICB9XHJcbiAgIH1cclxuICAgcmV0dXJuQ29sb3JTY2FsZSgpIHtcclxuICAgICAgIC8vaWYgbGluZWFyIGlzIGNob29zZW5cclxuICAgICAgIGlmICh0aGlzLmNvbG9yU2NhbGVbJ3R5cGUnXSA9PT0gJ0xpbmVhcicpIHtcclxuICAgICAgICAgICByZXR1cm4gZDMuc2NhbGVMaW5lYXIoKVxyXG4gICAgICAgICAgICAgICAuZG9tYWluKFxyXG4gICAgICAgICAgICAgICAgICAgZGF0YVNldFBlcmNlbnRpbGVbdGhpcy5hY3RpdmVTY2FsZV1cclxuICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAucmFuZ2UodGhpcy5jb2xvclNjYWxlWydjb2xvciddKTtcclxuICAgICAgIH0gLy9UaHJlc2hvbGQgY29sb3Igc2NhbGVcclxuICAgICAgIGVsc2UgaWYgKHRoaXMuY29sb3JTY2FsZVsndHlwZSddID09PSAnVGhyZXNob2xkJykge1xyXG4gICAgICAgICAgIHJldHVybiBkMy5zY2FsZVRocmVzaG9sZCgpXHJcbiAgICAgICAgICAgICAgIC5kb21haW4oXHJcbiAgICAgICAgICAgICAgICAgICBkYXRhU2V0UGVyY2VudGlsZVt0aGlzLmFjdGl2ZVNjYWxlXVxyXG4gICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgIC5yYW5nZSh0aGlzLmNvbG9yU2NhbGVbJ2NvbG9yJ10pO1xyXG4gICAgICAgfVxyXG4gICB9XHJcbiAgIGluaXRDb2xvclBpY2tlcigpIHtcclxuICAgICAgIGQzLnNlbGVjdCgnLmNvbG9ycy1ib2R5JylcclxuICAgICAgICAgICAuc2VsZWN0QWxsKCcucGFsZXR0ZScpXHJcbiAgICAgICAgICAgLmRhdGEoZDMuZW50cmllcyhjb2xvcmJyZXdlcikpXHJcbiAgICAgICAgICAgLmVudGVyKClcclxuICAgICAgICAgICAuYXBwZW5kKCdzcGFuJylcclxuICAgICAgICAgICAuYXR0cignY2xhc3MnLCAncGFsZXR0ZScpXHJcbiAgICAgICAgICAgLmF0dHIoJ3RpdGxlJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgIHJldHVybiBkLmtleTtcclxuICAgICAgICAgICB9KVxyXG4gICAgICAgICAgIC5vbignY2xpY2snLCAoZCk9PntcclxuICAgICAgICAgICAgICAgLy8gaGlnaHRsaWdodCB0aGUgcmlnaHQgcGFsZXR0ZVxyXG4gICAgICAgICAgICAgICAkKCcucGFsZXR0ZScpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAkKCcucGFsZXR0ZVt0aXRsZT1cIicgKyBkLmtleSArICdcIl0nKS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgdGhpcy5jb2xvclNjYWxlLmNvbG9yID0gY29sb3JicmV3ZXJbZC5rZXldO1xyXG4gICAgICAgICAgICAgICB0aGlzLmNoYW5nZWxlZ2VuZCgpO1xyXG4gICAgICAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpXHJcbiAgICAgICAgICAgICAgICAgICAuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgICAgICAgdGhpcy5kZWNJbmRleFRpbWUoKTtcclxuICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgfSlcclxuICAgICAgICAgICAuc2VsZWN0QWxsKCcuc3dhdGNoJylcclxuICAgICAgICAgICAuZGF0YSgoZCk9PntcclxuICAgICAgICAgICAgICAgcmV0dXJuIGQudmFsdWU7XHJcbiAgICAgICAgICAgfSlcclxuICAgICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgIC5hcHBlbmQoJ3NwYW4nKVxyXG4gICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdzd2F0Y2gnKVxyXG4gICAgICAgICAgIC5zdHlsZSgnYmFja2dyb3VuZC1jb2xvcicsIChkKT0+e1xyXG4gICAgICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAvLyBoaWdobGlnaHQgdGhlIHNlbGVjdGVkIGNvbG9yIHNjaGVtZVxyXG4gICAgICAgJCgnLnBhbGV0dGVbdGl0bGU9XCJCdVlsQnVcIl0nKS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcclxuICAgfVxyXG4gICBjaGFuZ2VsZWdlbmQoKSB7XHJcbiAgICAgICBsZXQgbGVnZW5kOyAvLyB0aGUgY29sb3IgbGVnZW5kXHJcbiAgICAgICBsZXQgbGVnZW5kVGV4dDsgLy8gY29sb3IgbGVnZW5kIHRleHRcclxuICAgICAgIC8vIHZhcnMgZm9yIHRoZSBsZWdlbmRcclxuICAgICAgIGxldCBsZWdlbmRTd2F0Y2hXaWR0aCA9IDUwO1xyXG4gICAgICAgbGV0IGxlZ2VuZFN3YXRjaEhlaWdodCA9IDIwO1xyXG4gICAgICAgLy8gbGV0IGRpZmZlcmVudENvbG9ycyA9IDA7XHJcblxyXG5cclxuICAgICAgIC8vIFNob3cgdGhlIHN2ZyBmaXJzdCBvZiBhbGxcclxuICAgICAgICQoJyNtYWluLXZpcy1sZWdlbmQtZGl2JylcclxuICAgICAgICAgICAuc2hvdygpO1xyXG5cclxuICAgICAgIC8vY2hhbmdlIHRoZSBjb2xvcnMgb2YgdGhlIGFuaW1hbHNcclxuICAgICAgIGlmICh0aGlzLmFjdGl2ZVNjYWxlICE9PSAnYmxhY2snKSB7XHJcbiAgICAgICAgICAgdmFyIHRtcFNjYWxlID0gdGhpcy5yZXR1cm5Db2xvclNjYWxlKCk7XHJcbiAgICAgICAgICAgLy8gb25jZSB0aGUgZmlsbCBmb3IgdGhlIGhlYWRzIGFuZCB0aGUgc3Ryb2tlIGZvciB0aGUgcGF0aFxyXG4gICAgICAgICAgIGxlZ2VuZCA9IHRoaXMuc3ZnTGVnZW5kLnNlbGVjdEFsbCgncmVjdC5sZWdlbmQnKVxyXG4gICAgICAgICAgICAgICAuZGF0YSh0bXBTY2FsZS5yYW5nZSgpKTtcclxuXHJcbiAgICAgICAgICAgbGVnZW5kVGV4dCA9IHRoaXMuc3ZnTGVnZW5kLnNlbGVjdEFsbCgndGV4dC5sZWdlbmQtdGV4dCcpXHJcbiAgICAgICAgICAgICAgIC5kYXRhKHRtcFNjYWxlLmRvbWFpbigpKTtcclxuICAgICAgICAgICAvLyBkaWZmZXJlbnRDb2xvcnMgPSB0bXBTY2FsZS5yYW5nZSgpXHJcbiAgICAgICAgICAgLy8gLmxlbmd0aDtcclxuICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgbGVnZW5kID0gdGhpcy5zdmdMZWdlbmQuc2VsZWN0QWxsKCdyZWN0LmxlZ2VuZCcpXHJcbiAgICAgICAgICAgICAgIC5kYXRhKFtdKTtcclxuICAgICAgICAgICBsZWdlbmRUZXh0ID0gdGhpcy5zdmdMZWdlbmQuc2VsZWN0QWxsKCd0ZXh0LmxlZ2VuZC10ZXh0JylcclxuICAgICAgICAgICAgICAgLmRhdGEoW10pO1xyXG4gICAgICAgICAgIC8vIGhpZGUgdGhlIGRpdiBhZ2FpblxyXG4gICAgICAgICAgICQoJyNtYWluLXZpcy1sZWdlbmQtZGl2JylcclxuICAgICAgICAgICAgICAgLmhpZGUoKTtcclxuICAgICAgIH1cclxuXHJcbiAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0gTGVnZW5kIHN3YXRjaGVzICAtLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAvLyBVUERBVEUgLSBsZWdlbmRcclxuICAgICAgIGxlZ2VuZC5zdHlsZSgnZmlsbCcsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgIH0pO1xyXG4gICAgICAgLy8gRU5URVIgLSBsZWdlbmRcclxuICAgICAgIGxlZ2VuZFxyXG4gICAgICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgICAgLmFwcGVuZCgncmVjdCcpXHJcbiAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xlZ2VuZCcpXHJcbiAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgbGVnZW5kU3dhdGNoV2lkdGgpXHJcbiAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGxlZ2VuZFN3YXRjaEhlaWdodClcclxuICAgICAgICAgICAuYXR0cigneScsIDApXHJcbiAgICAgICAgICAgLmF0dHIoJ3gnLCBmdW5jdGlvbihkLCBpKSB7XHJcbiAgICAgICAgICAgICAgIHJldHVybiAobGVnZW5kU3dhdGNoV2lkdGggKyBpICogbGVnZW5kU3dhdGNoV2lkdGgpICsgJ3B4JztcclxuICAgICAgICAgICB9KVxyXG4gICAgICAgICAgIC5zdHlsZSgnZmlsbCcsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICAgICAgICAgfSk7XHJcbiAgICAgICAvLyBFWElUIC0gbGVnZW5kXHJcbiAgICAgICBsZWdlbmQuZXhpdCgpXHJcbiAgICAgICAgICAgLnJlbW92ZSgpO1xyXG5cclxuICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLSBUZXh0ICAtLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAvLyBVUERBVEUgLSBsZWdlbmQgdGV4dFxyXG4gICAgICAgbGVnZW5kVGV4dC50ZXh0KGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICByZXR1cm4gTWF0aC5jZWlsKGQgKiAyKSAvIDI7XHJcbiAgICAgICB9KTtcclxuICAgICAgIC8vIEVOVEVSIC0gbGVnZW5kIHRleHRcclxuICAgICAgIGxlZ2VuZFRleHRcclxuICAgICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgIC5hcHBlbmQoJ3RleHQnKVxyXG4gICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsZWdlbmQtdGV4dCcpXHJcbiAgICAgICAgICAgLmF0dHIoJ3knLCAyICogbGVnZW5kU3dhdGNoSGVpZ2h0KVxyXG4gICAgICAgICAgIC5hdHRyKCd4JywgZnVuY3Rpb24oZCwgaSkge1xyXG4gICAgICAgICAgICAgICAvLyBwbHVzIDUgaGFzIHRvIGJlIGNoYW5nZWRcclxuICAgICAgICAgICAgICAgcmV0dXJuIChsZWdlbmRTd2F0Y2hXaWR0aCArIGkgKiBsZWdlbmRTd2F0Y2hXaWR0aCArIDUpICsgJ3B4JztcclxuICAgICAgICAgICB9KVxyXG4gICAgICAgICAgIC50ZXh0KGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguY2VpbChkICogMikgLyAyO1xyXG4gICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgIC8vIEVYSVQgLSBsZWdlbmQgdGV4dFxyXG4gICAgICAgbGVnZW5kVGV4dC5leGl0KClcclxuICAgICAgICAgICAucmVtb3ZlKCk7XHJcbiAgIH1cclxuXHJcbiAgIGRyYXcoKSB7XHJcblxyXG4gICAgICAgLy91cGRhdGUgdGltZSB0byB3YWl0IGFrYSBzcGVlZCBvZiByZXBsYXlcclxuICAgICAgIGxldCB0aW1lVG9XYWl0ID0gJCgnaW5wdXRbdHlwZT1cInJhZGlvXCJdLmdyb3VwLXBsYXliYWNrLXJhdGU6Y2hlY2tlZCcpXHJcbiAgICAgICAgICAgLnZhbCgpO1xyXG4gICAgICAgLy9zY2FsZSB0aGUgc2l6ZSBieSB0aGlzIG51bWJlclxyXG4gICAgICAgbGV0IGFuaW1hbFNjYWxlID0gJCgnaW5wdXRbdHlwZT1cInJhZGlvXCJdLmdyb3VwLXNpemU6Y2hlY2tlZCcpXHJcbiAgICAgICAgICAgLnZhbCgpO1xyXG5cclxuICAgICAgIC8vZ2V0IHRoZSBuZXh0IGFuaW1hbHNcclxuICAgICAgIHRoaXMuYXJyYXlBbmltYWxzID0gZGF0YXNldC5maWx0ZXIoKGQpPT57XHJcbiAgICAgICAgICAgcmV0dXJuIGRbJ3QnXSA9PT0gdGhpcy5pbmRleFRpbWU7XHJcbiAgICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAvL3RoZSB0aW1lb3V0IGlzIHNldCBhZnRlciBvbmUgdXBkYXRlIDMwIG1zXHJcbiAgICAgICBzZXRUaW1lb3V0KCgpPT57XHJcbiAgICAgICAgICAgICAgIC8vIGRyYXcgaGllcmFyY2h5XHJcbiAgICAgICAgICAgICAgIHRoaXMuZHJhd0RlbmRyb2dyYW0oKTtcclxuICAgICAgICAgICAgICAgLy9jaGFuZ2UgdGhlIHRpbWUgZnJhbWUgdGV4dFxyXG4gICAgICAgICAgICAgICB0aGlzLnN2Z0NvbnRhaW5lci5zZWxlY3QoJy5mcmFtZS10ZXh0JylcclxuICAgICAgICAgICAgICAgICAgIC50ZXh0KE1hdGguZmxvb3IodGhpcy5pbmRleFRpbWUgLyAxNTAwKSAlIDYwICsgJzonICsgTWF0aC5mbG9vcih0aGlzLmluZGV4VGltZSAvIHBhcmFtZXRlcnNbJ2ZwcyddKSAlIDYwICsgJzo6JyArIHRoaXMuaW5kZXhUaW1lICUgcGFyYW1ldGVyc1snZnBzJ10pO1xyXG4gICAgICAgICAgICAgICAvLyBpZiBhIHNlY29uZCBoYXMgY2hhbmdlZCBtb3ZlIHRoZSBzbGlkZXJcclxuICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5kZXhUaW1lICUgcGFyYW1ldGVyc1snZnBzJ10gPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgIHNldFRpbWVTbGlkZXIodGhpcy5pbmRleFRpbWUpO1xyXG4gICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICBsZXQgc3ZnQW5pbWFscyA9IHRoaXMudGFuay5zZWxlY3RBbGwoJ2cuYW5pbWFsJylcclxuICAgICAgICAgICAgICAgICAgIC5kYXRhKHRoaXMuYXJyYXlBbmltYWxzKTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIE5ldHdvcmsgdmlzXHJcbiAgICAgICAgICAgICAgIGxldCBuZXR3b3JrVmlzO1xyXG4gICAgICAgICAgICAgICAvLyBsZXQgbmV0d29ya1Zpc0JhaztcclxuICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5kZXhUaW1lIGluIG5ldHdvcmtEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICBsZXQgbmV0d29yayA9IG5ldHdvcmtEYXRhW3RoaXMuaW5kZXhUaW1lXTtcclxuICAgICAgICAgICAgICAgICAgIC8vIHJlc2V0IHRoZSBncm91cCBzdGFuZGFyZCBkZXZpYXRpb24gZm9yIHRoZSBoaWVyYXJoY3lcclxuICAgICAgICAgICAgICAgICAgIC8vIG5lZWRlZCBmb3IgY29sb3Jpbmcgb2YgdGhlIGRlbmRyb2dyYW0gbm9kZXMgKHZhcmlhY25lKVxyXG4gICAgICAgICAgICAgICAgICAgcmVzZXRoaWVyYXJjaHlHcm91cFN0ZGV2KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgLy8gZGlzcGxheSB0aGUgd2hvbGUgbmV0d29ya1xyXG4gICAgICAgICAgICAgICAgICAgbmV0d29yayA9IG5ldHdvcmsubWFwKChpdGVtKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGxldCBhbmltYWwxID0gdGhpcy5hcnJheUFuaW1hbHMuZmlsdGVyKGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqWydhJ10gPT09IGl0ZW1bJ3MnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICBsZXQgYW5pbWFsMiA9IHRoaXMuYXJyYXlBbmltYWxzLmZpbHRlcihmdW5jdGlvbihvYmopIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9ialsnYSddID09PSBpdGVtWydlJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgJ25vZGUxJzogYW5pbWFsMVsnYSddLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAnbm9kZTInOiBhbmltYWwyWydhJ10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICdzdGFydCc6IGFuaW1hbDFbJ3AnXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2VuZCc6IGFuaW1hbDJbJ3AnXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3ZhbCc6IGl0ZW1bJ3YnXVxyXG4gICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICBuZXR3b3JrLmZvckVhY2goZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICQoKCcjbWMtJyArIGRbJ25vZGUxJ10gKyAnLScgKyBkWydub2RlMiddKSkuY3NzKCdmaWxsJywgbmV0d29ya0NvbG9yU2NhbGUoZFsndmFsJ10pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAkKCgnI21jLScgKyBkWydub2RlMiddICsgJy0nICsgZFsnbm9kZTEnXSkpLmNzcygnZmlsbCcsIG5ldHdvcmtDb2xvclNjYWxlKGRbJ3ZhbCddKSk7XHJcbiAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICBpZiAobmV0d29ya0F1dG8pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICBsZXQgdG1wQXJyYXkgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5ldHdvcmsubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wQXJyYXkucHVzaChuZXR3b3JrW2ldWyd2YWwnXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgIHNldE5ldHdvckxpbWl0KHBlcmNlbnRpbGVzKHRtcEFycmF5KSk7XHJcbiAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICBuZXR3b3JrID0gbmV0d29yay5maWx0ZXIoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkWyd2YWwnXSA8PSAoMSAtIG5ldHdvcmtMaW1pdCk7XHJcbiAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgIC8vIERBVEEgSk9JTlxyXG4gICAgICAgICAgICAgICAgICAgbmV0d29ya1ZpcyA9IHRoaXMudGFuay5zZWxlY3QoJyNuZXR3b3JrLWdyb3VwJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuc2VsZWN0QWxsKCdsaW5lLm5ldHdvcmstZWRnZXMnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5kYXRhKG5ldHdvcmspO1xyXG4gICAgICAgICAgICAgICAgICAgLy8gVVBEQVRFXHJcbiAgICAgICAgICAgICAgICAgICBuZXR3b3JrVmlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gxJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZFsnc3RhcnQnXVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd5MScsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC1kWydzdGFydCddWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gyJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZFsnZW5kJ11bMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneTInLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtZFsnZW5kJ11bMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV0d29ya0NvbG9yU2NhbGUoKDEgLSBkWyd2YWwnXSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZS1vcGFjaXR5JywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMSAtIGRbJ3ZhbCddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgLy9FTlRFUlxyXG5cclxuICAgICAgICAgICAgICAgICAgIG5ldHdvcmtWaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJ2xpbmUnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICduZXR3b3JrLWVkZ2VzJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneDEnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkWydzdGFydCddWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3kxJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLWRbJ3N0YXJ0J11bMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneDInLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkWydlbmQnXVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd5MicsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC1kWydlbmQnXVsxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2UnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXR3b3JrQ29sb3JTY2FsZShkWyd2YWwnXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlLW9wYWNpdHknLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkWyd2YWwnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICBuZXR3b3JrVmlzID0gdGhpcy50YW5rLnNlbGVjdEFsbCgnbGluZS5uZXR3b3JrLWVkZ2VzJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuZGF0YShbXSk7XHJcblxyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIC8vIEVYSVQgLSBuZXR3b3JrXHJcbiAgICAgICAgICAgICAgIG5ldHdvcmtWaXMuZXhpdCgpXHJcbiAgICAgICAgICAgICAgICAgICAucmVtb3ZlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyBkZWxhdW5heSB0cmlhbmd1bGF0aW9uXHJcbiAgICAgICAgICAgICAgIC8vIERBVEEgSk9JTiAgLSB0cmlhbmd1bGF0aW9uXHJcbiAgICAgICAgICAgICAgIHZhciB0cmlhbmd1bGF0aW9uO1xyXG4gICAgICAgICAgICAgICBpZiAoJCgnI2RyYXctdHJpYW5ndWxhdGlvbicpXHJcbiAgICAgICAgICAgICAgICAgICAuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICAgICAgIHRyaWFuZ3VsYXRpb24gPSB0aGlzLnRhbmsuc2VsZWN0KCcjZGVsYXVuYXktdHJpYW5ndWxhdGlvbi1ncm91cCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnNlbGVjdEFsbCgncGF0aC5kZWxhdW5heS10cmlhbmd1bGF0aW9uJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuZGF0YShbc3dhcm1EYXRhW3RoaXMuaW5kZXhUaW1lXVsndHJpYW5ndWxhdGlvbiddXSk7XHJcbiAgICAgICAgICAgICAgICAgICAvLyBVUERBVEUgLSB0cmlhbmd1bGF0aW9uXHJcbiAgICAgICAgICAgICAgICAgICB0cmlhbmd1bGF0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2QnLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAvL0VOVEVSIC0gdHJpYW5ndWxhdGlvblxyXG4gICAgICAgICAgICAgICAgICAgdHJpYW5ndWxhdGlvbi5lbnRlcigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgncGF0aCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2RlbGF1bmF5LXRyaWFuZ3VsYXRpb24nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdkJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgdHJpYW5ndWxhdGlvbiA9IHRoaXMudGFuay5zZWxlY3RBbGwoJ3BhdGguZGVsYXVuYXktdHJpYW5ndWxhdGlvbicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmRhdGEoW10pO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIC8vIEVYSVQgLSB0cmlhbmd1bGF0aW9uXHJcbiAgICAgICAgICAgICAgIHRyaWFuZ3VsYXRpb24uZXhpdCgpXHJcbiAgICAgICAgICAgICAgICAgICAucmVtb3ZlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyBWb3Jvbm9pXHJcbiAgICAgICAgICAgICAgIC8vIERBVEEgSk9JTiAgLSB2b3Jvbm9pXHJcbiAgICAgICAgICAgICAgIHZhciB2b3Jvbm9pO1xyXG4gICAgICAgICAgICAgICBpZiAoJCgnI2RyYXctdm9yb25vaScpXHJcbiAgICAgICAgICAgICAgICAgICAuaXMoJzpjaGVja2VkJykpIHtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgLy9hcHBlbmQgdGhlIGdyb3VwIGZvciB0aGUgdm9yb25vaSBwYXRoc1xyXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBhIHdvcmthcm91bmQgdG8gYXZvaWQgdm9yb25vaSBzdG9wcGluZyBhdCBzcGxpdCBpZiBlbXB0eSB2YWx1ZS5cclxuICAgICAgICAgICAgICAgIGlmICghKCd2b3Jvbm9pJyBpbiBzd2FybURhdGFbMF0pKXtcclxuICAgICAgICAgICAgICAgICAgIHZvcm9ub2kgPSB0aGlzLnRhbmtcclxuICAgICAgICAgICAgICAgICAgICAgICAuc2VsZWN0KCcjdm9ybm9pLWdyb3VwJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuc2VsZWN0QWxsKCdwYXRoLnZvcm9ub2knKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5kYXRhKFtzd2FybURhdGFbdGhpcy5pbmRleFRpbWVdWyd2b3Jvbm9pJ11dKVxyXG4gICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgdm9yb25vaSA9IHRoaXMudGFua1xyXG4gICAgICAgICAgICAgICAgICAgICAgIC5zZWxlY3QoJyN2b3Jub2ktZ3JvdXAnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5zZWxlY3RBbGwoJ3BhdGgudm9yb25vaScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmRhdGEoc3dhcm1EYXRhW3RoaXMuaW5kZXhUaW1lXVsndm9yb25vaSddLnNwbGl0KCc7JykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAvLyBVUERBVEUgLSB2b3Jvbm9pXHJcbiAgICAgICAgICAgICAgICAgICB2b3Jvbm9pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2QnLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAvL0VOVEVSIC0gdm9yb25vaVxyXG4gICAgICAgICAgICAgICAgICAgdm9yb25vaS5lbnRlcigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgncGF0aCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3Zvcm9ub2knKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdkJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgIHZvcm9ub2kgPSB0aGlzLnRhbmsuc2VsZWN0KCcjdm9ybm9pLWdyb3VwJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuc2VsZWN0QWxsKCdwYXRoLnZvcm9ub2knKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5kYXRhKFtdKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAvLyBFWElUIC0gdm9yb25vaVxyXG4gICAgICAgICAgICAgICB2b3Jvbm9pLmV4aXQoKVxyXG4gICAgICAgICAgICAgICAgICAgLnJlbW92ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgLy9FTlRFUiAtIGFwcGVuZCB0aGUgYW5pbWFsIGdyb3Vwc1xyXG4gICAgICAgICAgICAgICBsZXQgYW5pbWFsR3JvdXBpbmdzID0gc3ZnQW5pbWFsc1xyXG4gICAgICAgICAgICAgICAgICAgLmVudGVyKClcclxuICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2FuaW1hbCcpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignaWQnLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2FuaW1hbC0nICsgZFsnYSddO1xyXG4gICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyBBcHBlbmQgdGhlIGNpcmNsZXMgZm9yIGVhY2ggYW5pbWFsIHRvIHRoZSBhbmltYWxncm91cFxyXG4gICAgICAgICAgICAgICBhbmltYWxHcm91cGluZ3MuYXBwZW5kKCdjaXJjbGUnKVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ3InLCAxLjUgKiBhbmltYWxTY2FsZSlcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjeCcsIChkKT0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZFsncCddWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjeScsIChkKT0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLWRbJ3AnXVsxXTtcclxuICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAub24oJ21vdXNlb3ZlcicsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXBGdW5jdGlvbihkKTtcclxuICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAub24oJ21vdXNlb3V0JywgKCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICB0b29sdGlwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC50cmFuc2l0aW9uKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLmR1cmF0aW9uKDUwMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgMCk7XHJcbiAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgLy8gYWRkIG9uIGNsaWNrIGZvciB0aGUgYWN0aXZlIGZpc2hzXHJcbiAgICAgICAgICAgICAgICAgICAub24oJ2NsaWNrJywgKGQpPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZUFuaW1hbHMuaW5jbHVkZXMoZFsnYSddKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUFuaW1hbHMgPSB0aGlzLmFjdGl2ZUFuaW1hbHMuZmlsdGVyKGl0ZW0gPT4gaXRlbSAhPT0gZFsnYSddKTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUFuaW1hbHMucHVzaChkWydhJ10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9nbyBiYWNrIG9uZSBzZWNvbmQgYW5kIGRyYXcgdGhlIG5leHQgZnJhbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4VGltZS0tO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIFVQREFURSAtIGFuaW1hbHMgY2lyY2xlc1xyXG4gICAgICAgICAgICAgICBzdmdBbmltYWxzLnNlbGVjdCgnY2lyY2xlJylcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjeCcsIChkKT0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZFsncCddWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjeScsIChkKT0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLWRbJ3AnXVsxXTtcclxuICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cigncicsIGFuaW1hbFNjYWxlKTtcclxuICAgICAgICAgICAgICAgLy8gQXBwZW5kIGZvciBlYWNoIGdyb3VwIHRoZSBhcnJvdywgbmVlZGVkIGZvciBjb2xvcmluZ1xyXG4gICAgICAgICAgICAgICBhbmltYWxHcm91cGluZ3MuYXBwZW5kKCdzdmc6ZGVmcycpXHJcbiAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCdzdmc6bWFya2VyJylcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnYXJyb3ctbWFya2VyLScgKyBkWydhJ107XHJcbiAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ3JlZlgnLCAyKVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ3JlZlknLCA2KVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ21hcmtlcldpZHRoJywgMTMpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignbWFya2VySGVpZ2h0JywgMTMpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignb3JpZW50JywgJ2F1dG8nKVxyXG4gICAgICAgICAgICAgICAgICAgLmFwcGVuZCgnc3ZnOnBhdGgnKVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2QnLCAnTTIsMiBMMiwxMSBMMTAsNiBMMiwyJyk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyBBcHBlbmQgdGhlIGxpbmUgZm9yIHRoZSBkaXJlY3Rpb24gYXJyb3dcclxuICAgICAgICAgICAgICAgYW5pbWFsR3JvdXBpbmdzXHJcbiAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCdsaW5lJylcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdhcnJvdycpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignbWFya2VyLWVuZCcsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAndXJsKCNhcnJvdy1tYXJrZXItJyArIGRbJ2EnXSArICcpJztcclxuICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgLy9leGVjdXRlIG9ubHkgd2hlbiBkcmF3IGRpcmVjdGlvbiBidXR0b24gaXMgY2hlY2tlZFxyXG4gICAgICAgICAgICAgICBpZiAoJCgnI2RyYXctZGlyZWN0aW9uJylcclxuICAgICAgICAgICAgICAgICAgIC5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgLy8gVVBEQVRFIGFuaW1hbCBkaXJlY3Rpb24gYXJyb3dcclxuICAgICAgICAgICAgICAgICAgIHN2Z0FuaW1hbHMuc2VsZWN0KCdsaW5lJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneDEnLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRbJ3AnXVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd5MScsIChkKT0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC1kWydwJ11bMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneDInLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChkWydwJ11bMF0gKyAyICogYW5pbWFsU2NhbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3kyJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoLWRbJ3AnXVsxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAncm90YXRlKCcgKyAtZFsnZGlyZWN0aW9uJ10gKyAnICcgKyBkWydwJ11bMF0gKyAnICcgKyAtZFsncCddWzFdICsgJyknO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgLy8gaGlkZSB0aGUgYXJyb3dzXHJcbiAgICAgICAgICAgICAgICAgICAkKCcuYXJyb3cnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgIC8vIEVYSVQgLSB0aGUgZ3JvdXBzXHJcbiAgICAgICAgICAgICAgIHN2Z0FuaW1hbHMuZXhpdCgpXHJcbiAgICAgICAgICAgICAgICAgICAucmVtb3ZlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAvL0NvbnZleCBodWxsXHJcbiAgICAgICAgICAgICAgIGlmICgkKCcjZHJhdy1jb252ZXgtaHVsbCcpXHJcbiAgICAgICAgICAgICAgICAgICAuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICAgICAgIC8vIERBVEEgSk9JTiAtIHBhdGhzXHJcbiAgICAgICAgICAgICAgICAgICB2YXIgaHVsbFBhdGggPSB0aGlzLnRhbmsuc2VsZWN0QWxsKCdwYXRoLmh1bGwtcGF0aCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmRhdGEoW3N3YXJtRGF0YVt0aGlzLmluZGV4VGltZV1bJ2NvbnZleF9odWxsJ11dKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAvLyBVUERBVEUgLSBodWxsIHBhdGhcclxuICAgICAgICAgICAgICAgICAgIGh1bGxQYXRoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2QnLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgLy8gRU5URVIgLSBodWxsIHBhdGhzXHJcbiAgICAgICAgICAgICAgICAgICBodWxsUGF0aC5lbnRlcigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgncGF0aCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2h1bGwtcGF0aCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2QnLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgLy8gZHJhdyBubyBodWxsXHJcbiAgICAgICAgICAgICAgICAgICBodWxsUGF0aCA9IHRoaXMudGFuay5zZWxlY3QoJ3BhdGguaHVsbC1wYXRoJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuZGF0YShbXSk7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgLy8gRVhJVCAtIGh1bGwgcGF0aHNcclxuICAgICAgICAgICAgICAgaHVsbFBhdGguZXhpdCgpXHJcbiAgICAgICAgICAgICAgICAgICAucmVtb3ZlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAvL2NoYW5nZSB0aGUgY29sb3JzIG9mIHRoZSBmaXNoXHJcbiAgICAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZVNjYWxlICE9PSAnYmxhY2snKSB7XHJcbiAgICAgICAgICAgICAgICAgICAvLyBvbmNlIHRoZSBmaWxsIGZvciB0aGUgaGVhZHMgYW5kIHRoZSBzdHJva2UgZm9yIHRoZSBwYXRoXHJcbiAgICAgICAgICAgICAgICAgICB2YXIgdG1wU2NhbGUgPSB0aGlzLnJldHVybkNvbG9yU2NhbGUoKTtcclxuICAgICAgICAgICAgICAgICAgIHN2Z0FuaW1hbHNcclxuICAgICAgICAgICAgICAgICAgICAgICAudHJhbnNpdGlvbigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmR1cmF0aW9uKDEwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5zdHlsZSgnZmlsbCcsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG1wU2NhbGUoZFt0aGlzLmFjdGl2ZVNjYWxlXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0bXBTY2FsZShkW3RoaXMuYWN0aXZlU2NhbGVdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgIC8vY29sb3IgZXZlcnkgZmlzaCBibGFja1xyXG4gICAgICAgICAgICAgICAgICAgc3ZnQW5pbWFsc1xyXG4gICAgICAgICAgICAgICAgICAgICAgIC5zdHlsZSgnZmlsbCcsICcjMDAwJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlJywgJyMwMDAnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICBpZiAoISQuaXNFbXB0eU9iamVjdChtZXRhZGF0YUNvbG9yKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKG1ldGFkYXRhQ29sb3IpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGQzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2VsZWN0KCcjYW5pbWFsLScgKyBrZXkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ2ZpbGwnLCBtZXRhZGF0YUNvbG9yW2tleV0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlJywgbWV0YWRhdGFDb2xvcltrZXldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgLy9jaGFuZ2Ugb3BhY3RpeSBpZiB0aGUgZmlzaCBpcyBzZWxlY3RlZFxyXG4gICAgICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVBbmltYWxzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgc3ZnQW5pbWFsc1xyXG4gICAgICAgICAgICAgICAgICAgICAgIC5zdHlsZSgnb3BhY2l0eScsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVBbmltYWxzLmluY2x1ZGVzKGRbJ2EnXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDAuMjU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgIGlmICgkKCcjcmVtb3ZlLWFjdGl2ZS1zZWxlY3RlZC1idXR0b24nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5pcygnOmRpc2FibGVkJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAkKCcjcmVtb3ZlLWFjdGl2ZS1zZWxlY3RlZC1idXR0b24nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgJCgnI3Zpc3VhbC1wYXJhbWV0ZXItYnV0dG9uJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgLy8gaWYgdHJhY2tpbmcgaXMgb25cclxuICAgICAgICAgICAgICAgICAgIGlmICh0cmFja2luZ0Jvb2xlYW4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICBhZGRUcmFja2VkRGF0YSh0aGlzLmFycmF5QW5pbWFsc1swXVsndCddLCB0aGlzLmFjdGl2ZUFuaW1hbHMpO1xyXG4gICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgaWYgKCEkKCcjcmVtb3ZlLWFjdGl2ZS1zZWxlY3RlZC1idXR0b24nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5pcygnOmRpc2FibGVkJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAkKCcjcmVtb3ZlLWFjdGl2ZS1zZWxlY3RlZC1idXR0b24nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAkKCcjdmlzdWFsLXBhcmFtZXRlci1idXR0b24nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgIC8vIG5vcm1hbCBvcGFjaXR5XHJcbiAgICAgICAgICAgICAgICAgICBzdmdBbmltYWxzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgMSk7XHJcbiAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgIC8vZHJhdyBjZW50cm9pZFxyXG4gICAgICAgICAgICAgICBkMy5zZWxlY3QoJy5jZW50cm9pZCcpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignY3gnLCAoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGlmICgnY2VudHJvaWQnIGluIHN3YXJtRGF0YVswXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3dhcm1EYXRhW3RoaXMuaW5kZXhUaW1lXVsnY2VudHJvaWQnXVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2N5JywgKCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICBpZiAoJ2NlbnRyb2lkJyBpbiBzd2FybURhdGFbMF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC1zd2FybURhdGFbdGhpcy5pbmRleFRpbWVdWydjZW50cm9pZCddWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICBpZiAoJCgnI2RyYXctZGlyZWN0aW9uJykuaXMoJzpjaGVja2VkJykgJiZcclxuICAgICAgICAgICAgICAgICAgIHN3YXJtRGF0YVt0aGlzLmluZGV4VGltZV0uY2VudHJvaWQgJiZcclxuICAgICAgICAgICAgICAgICAgICQoJyNkcmF3LWNlbnRyb2lkJykuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnI2NlbnRyb2lkLWxpbmUnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdoaWRkZW4nLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAvLyBVUERBVEUgYW5pbWFsIGRpcmVjdGlvbiBhcnJvd1xyXG4gICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KCcjY2VudHJvaWQtbGluZScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gxJywgKCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN3YXJtRGF0YVt0aGlzLmluZGV4VGltZV1bJ2NlbnRyb2lkJ11bMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneTEnLCAoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLXN3YXJtRGF0YVt0aGlzLmluZGV4VGltZV1bJ2NlbnRyb2lkJ11bMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneDInLCAoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHN3YXJtRGF0YVt0aGlzLmluZGV4VGltZV1bJ2NlbnRyb2lkJ11bMF0gKyAyICogYW5pbWFsU2NhbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3kyJywgKCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC1zd2FybURhdGFbdGhpcy5pbmRleFRpbWVdWydjZW50cm9pZCddWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICgpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAncm90YXRlKCcgKyAtc3dhcm1EYXRhW3RoaXMuaW5kZXhUaW1lXVsnZGlyZWN0aW9uJ10gKyAnICcgKyBzd2FybURhdGFbdGhpcy5pbmRleFRpbWVdWydjZW50cm9pZCddWzBdICsgJyAnICsgLXN3YXJtRGF0YVt0aGlzLmluZGV4VGltZV1bJ2NlbnRyb2lkJ11bMV0gKyAnKSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAvLyBoaWRlIHRoZSBhcnJvd3NcclxuICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnI2NlbnRyb2lkLWxpbmUnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdoaWRkZW4nKTtcclxuICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgLy8gbWVkb2lkXHJcbiAgICAgICAgICAgICAgIGlmICh0aGlzLm1lZG9pZEFuaW1hbCAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgnI2FuaW1hbC0nICsgdGhpcy5tZWRvaWRBbmltYWwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ21lZG9pZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgIHRoaXMubWVkb2lkQW5pbWFsID0gc3dhcm1EYXRhW3RoaXMuaW5kZXhUaW1lXVsnbWVkb2lkJ107XHJcbiAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoJyNhbmltYWwtJyArIHRoaXMubWVkb2lkQW5pbWFsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdtZWRvaWQnLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgLy9uZXh0IGZyYW1lXHJcbiAgICAgICAgICAgICAgIHRoaXMuaW5kZXhUaW1lKys7XHJcblxyXG4gICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUxpbmVDaGFydCgpO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgIC8vY2hlY2sgaWYgcGxheSBidXR0b24gaXMgYWN0aXZlIGFuZCBpZiB0aGUgYW5pbWF0aW9uIGlzIG5vdCBmaW5pc2hlZFxyXG4gICAgICAgICAgICAgICBpZiAodGhpcy5pbmRleFRpbWUgPj0gc3dhcm1EYXRhLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgLy9zdGFydCBhZ2FpbiBmcm9tIHRoZSBzdGFydFxyXG4gICAgICAgICAgICAgICAgICAgdGhpcy5pbmRleFRpbWUgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wbGF5Qm9vbGVhbikge1xyXG4gICAgICAgICAgICAgICAgICAgLy9tZWFzdXJlIGV4ZWN1dGlvbiB0aW1lXHJcbiAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXcoKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgdGltZVRvV2FpdCk7XHJcbiAgIH1cclxuXHJcbiAgIGluaXREZW5kcm9ncmFtKCkge1xyXG4gICAgICAgLy8gY29uc3RhbmN0IGZhY3RvcnMgZm9yIHRoZSBkZW5kZ3JvZ3JhbVxyXG4gICAgICAgbGV0IG1hcmdpbiA9IDIwLFxyXG4gICAgICAgICAgIHdpZHRoID0gNTAwMCxcclxuICAgICAgICAgICBoZWlnaHQgPSA1MDAwO1xyXG5cclxuICAgICAgIC8vIHpvb20gZnVuY3Rpb24gZm9yIHRoZSBkZW5kcm9ncmFtXHJcbiAgICAgICBsZXQgem9vbSA9IGQzLnpvb20oKVxyXG4gICAgICAgICAgIC5zY2FsZUV4dGVudChbMSwgMTBdKVxyXG4gICAgICAgICAgIC5vbignem9vbScsICgpPT57XHJcbiAgICAgICAgICAgICAgIC8vY29uc3RyYWluZWQgem9vbWluZ1xyXG4gICAgICAgICAgICAgICBkMy5ldmVudC50cmFuc2Zvcm0ueCA9IE1hdGgubWluKDAsIHdpZHRoICogKGQzLmV2ZW50LnRyYW5zZm9ybS5rIC0gMSksXHJcbiAgICAgICAgICAgICAgICAgICBNYXRoLm1heCh3aWR0aCAqICgxIC0gZDMuZXZlbnQudHJhbnNmb3JtLmspLCBkMy5ldmVudC50cmFuc2Zvcm0ueCkpO1xyXG5cclxuICAgICAgICAgICAgICAgZDMuZXZlbnQudHJhbnNmb3JtLnkgPSBNYXRoLm1pbigwLCBoZWlnaHQgKiAoZDMuZXZlbnQudHJhbnNmb3JtLmsgLSAxKSxcclxuICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KGhlaWdodCAqICgxIC0gZDMuZXZlbnQudHJhbnNmb3JtLmspLCBkMy5ldmVudC50cmFuc2Zvcm0ueSkpO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gdHJhbnNsYXRlIGFuZCBzY2FsZVxyXG4gICAgICAgICAgICAgICB0aGlzLmRlbmRyb3pvb20uYXR0cigndHJhbnNmb3JtJywgZDMuZXZlbnQudHJhbnNmb3JtKTtcclxuICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAvLyBzdmcgY29udGFpbmVyIGZvciB0aGUgZGVuZHJvZ3JhbVxyXG4gICAgICAgbGV0IHN2ZyA9IGQzLnNlbGVjdCgnI2RlbmRyb2dyYW0tcGFuZWwnKVxyXG4gICAgICAgICAgIC5jbGFzc2VkKCdzdmctZGVuZHJvZ3JhbS1jb250YWluZXInLCB0cnVlKVxyXG4gICAgICAgICAgIC5hcHBlbmQoJ3N2ZycpXHJcbiAgICAgICAgICAgLmF0dHIoJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLCAneE1pbllNaW4gbWVldCcpXHJcbiAgICAgICAgICAgLmF0dHIoJ3ZpZXdCb3gnLCAnMCAwICcgKyB3aWR0aCArICcgJyArIGhlaWdodClcclxuICAgICAgICAgICAvLyBhZGQgdGhlIGNsYXNzIHN2Zy1jb250ZW50XHJcbiAgICAgICAgICAgLmNsYXNzZWQoJ3N2Zy1jb250ZW50LWRlbmRyb2dyYW0nLCB0cnVlKVxyXG4gICAgICAgICAgIC5jYWxsKHpvb20pO1xyXG5cclxuICAgICAgIGluaXREZW5kcm9ncmFtTGVnZW5kKCk7XHJcblxyXG4gICAgICAgLy8gYXBwZW5kIHRoZSB6b29tIGdyb3VwIHRvIHRoZSBzdmdcclxuICAgICAgIHRoaXMuZGVuZHJvem9vbSA9IHN2Zy5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyBtYXJnaW4gKyAnLCcgKyBtYXJnaW4gKyAnKScpXHJcbiAgICAgICAgICAgLmFwcGVuZCgnc3ZnOmcnKTtcclxuXHJcbiAgICAgICAvLyBkMyB0cmVlXHJcbiAgICAgICBsZXQgdHJlZW1hcCA9IGQzLnRyZWUoKSAvL2QzLmNsdXN0ZXIoKVxyXG4gICAgICAgICAgIC5zaXplKFsoaGVpZ2h0IC0gMTAgKiBtYXJnaW4pLCAod2lkdGggLSAxMCAqIG1hcmdpbildKTtcclxuXHJcbiAgICAgICAvLyBzZXQgdGhlIHNwYXRpYWwgdmlldyAtIG5lZWRlZCB0byBhZGQgdGhlIGNsdXN0ZXJpbmcgdG8gdGhlIHNwYXRpYWwgdmlldyB3aW5kb3dcclxuICAgICAgIC8vdGhpcy5zcGF0aWFsVmlldyA9IGQzLnNlbGVjdCgnLnRhbmsnKTtcclxuXHJcbiAgICAgICAvLyBpbml0IGRlbmRyb2dyYW0gc2xpZGVyXHJcbiAgICAgICAvLyBpbml0aWFsaXplIHRoZSBOZXR3b3JrIHNsaWRlclxyXG4gICAgICAgJCgnI2RlbmRyb2dyYW0tcGFuZWwtbGV2ZWwtc2xpZGVyJylcclxuICAgICAgICAgICAuc2xpZGVyKHtcclxuICAgICAgICAgICAgICAgcmFuZ2U6ICdtYXgnLFxyXG4gICAgICAgICAgICAgICBtaW46IDIsXHJcbiAgICAgICAgICAgICAgIG1heDogMixcclxuICAgICAgICAgICAgICAgc3RlcDogMSxcclxuICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuaGllcmFyY2h5TGV2ZWxzWydoMCddLFxyXG4gICAgICAgICAgICAgICBzbGlkZTogKGV2ZW50LCB1aSk9PntcclxuICAgICAgICAgICAgICAgICAgIGxldCBpZCA9ICQoJy5zaG93LWRlbmRyb2dyYW0uYnRuLXByaW1hcnknKS5hdHRyKCdkYXRhJyk7XHJcbiAgICAgICAgICAgICAgICAgICB0aGlzLnNldEhpZXJhcmNoeUxldmVsKGlkLCB1aS52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZURlbmRyb2dyYW0oKTtcclxuICAgICAgICAgICAgICAgICAgIC8vIGlmIG5vIGFuaW1hdGlvbiBpcyBhY3RpdmUgZHJhdyB0aGUgbmV3IGNsdXN0ZXJpbmcgYW5kIGRlbmRyb2dyYW1cclxuICAgICAgICAgICAgICAgICAgIC8vIGRyYXdEZW5kcm9ncmFtKCk7XHJcbiAgICAgICAgICAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIC8vZ28gYmFjayBvbmUgc2Vjb25kIGFuZCBkcmF3IHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3RGVuZHJvZ3JhbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgfSk7XHJcbiAgICAgICAvLyBpbml0IHRoZSB0b29sdGlwIGZvciB0aGUgZGVuZHJvZ3JhbVxyXG5cclxuICAgICAgIC8vIGluaXQgdGhlIGhpZXJhcmNoeSBsZWdlbmRcclxuICAgICAgIGxldCBsZWdlbmRXaWR0aCA9IG1heE51bWJlckhpZXJhcmNoaWVzICogMTAwO1xyXG4gICAgICAgbGV0IGxlZ2VuZEhlaWdodCA9IDYwO1xyXG5cclxuICAgICAgIHRoaXMuc3ZnTGVnZW5kX25ldHcgPSBkMy5zZWxlY3QoJyNoaWVyYXJjaHktbGVnZW5kLWRpdicpXHJcbiAgICAgICAgICAgLmFwcGVuZCgnc3ZnJylcclxuICAgICAgICAgICAuYXR0cignaWQnLCAnaGllcmFyY2h5LWxlZ2VuZCcpXHJcbiAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgbGVnZW5kV2lkdGgpXHJcbiAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGxlZ2VuZEhlaWdodCk7XHJcblxyXG4gICAgICAgLy8gYWRkIHBhdHRlcm4gZm9yIHN0cmlwZWQgYmFja2dyb3VuZCBvZiBpbnRlcnNlY3Rpb25zIGV0Yy5cclxuICAgICAgIHRoaXMuc3BhdGlhbFZpZXcuYXBwZW5kKCdkZWZzJylcclxuICAgICAgICAgICAuYXBwZW5kKCdzdmc6cGF0dGVybicpXHJcbiAgICAgICAgICAgLmF0dHIoJ2lkJywgJ3N0cmlwZWQnKVxyXG4gICAgICAgICAgIC5hdHRyKCdwYXR0ZXJuVW5pdHMnLCAndXNlclNwYWNlT25Vc2UnKVxyXG4gICAgICAgICAgIC5hdHRyKCd3aWR0aCcsICcyMCcpXHJcbiAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsICc1JylcclxuICAgICAgICAgICAuYXR0cigncGF0dGVyblRyYW5zZm9ybScsICdyb3RhdGUoNjApJylcclxuICAgICAgICAgICAuYXBwZW5kKCdyZWN0JylcclxuICAgICAgICAgICAuYXR0cignd2lkdGgnLCA1KVxyXG4gICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCAxMClcclxuICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgwLDApJylcclxuICAgICAgICAgICAuc3R5bGUoJ2ZpbGwnLCAnIzY3MDAwZCcpO1xyXG5cclxuICAgfTtcclxuICAgY2xpY2soZCkge1xyXG4gICAgICAgc2V0QWN0aXZlQW5pbWFscyhkWydkYXRhJ11bJ25hbWUnXSk7XHJcbiAgICAgICAvLyBpZiBubyBhbmltYXRpb24gaXMgYWN0aXZlIGRyYXcgdGhlIGRyYXcgb25lIHN0ZXBcclxuICAgICAgIGlmICghJCgnI3BsYXktYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgdGhpcy5kZWNJbmRleFRpbWUoKTtcclxuICAgICAgICAgICB0aGlzLmRyYXcoKTtcclxuICAgICAgIH1cclxuICAgfVxyXG4gICBzZXRoaWVyYXJjaHlHcm91cFN0ZGV2KGtleSwgdmFsdWUpIHtcclxuICAgICAgIGlmIChrZXkgaW4gdGhpcy5oaWVyYXJjaHlHcm91cFN0ZGV2KSB7XHJcbiAgICAgICAgICAgdGhpcy5oaWVyYXJjaHlHcm91cFN0ZGV2W2tleV0ucHVzaCh2YWx1ZSk7XHJcbiAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgIHRoaXMuaGllcmFyY2h5R3JvdXBTdGRldltrZXldID0gW3ZhbHVlXTtcclxuICAgICAgIH1cclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIFJlc2V0IGhpZXJhcmNoeSBncm91cCBzdGFuZGFyZCBkZXZpYXRpb25cclxuICAgICovXHJcbiAgIHJlc2V0aGllcmFyY2h5R3JvdXBTdGRldigpIHtcclxuICAgICAgIHRoaXMuaGllcmFyY2h5R3JvdXBTdGRldiA9IHt9O1xyXG4gICB9XHJcbiAgIGdldEhpZXJhcmNoeUxldmVsKHJvb3QsIGhpZXJhcmNoeSkge1xyXG4gICAgbGV0IHJlc3VsdCA9IFtdO1xyXG4gICAgbGV0IGxldmVsID0gdGhpcy5oaWVyYXJjaHlMZXZlbHNbJ2gnICsgaGllcmFyY2h5XTtcclxuXHJcbiAgICAvLyBzZWNvbmQgbGV2ZWwgb2YgdGhlIGFycmF5XHJcbiAgICBsZXQgdG1wX25vZGVzID0gcm9vdFsnY2hpbGRyZW4nXTtcclxuICAgIC8vIGl0ZXJhdGUgdGhyb3VnaCB0aGUgdHJlZVxyXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCByb290WydoZWlnaHQnXTsgaSsrKSB7XHJcbiAgICAgICAgLy8gY2hlY2sgaWYgd2UgYXJlIGF0IHRoZSBzZWFyY2hlZCBsZXZlbFxyXG4gICAgICAgIGlmICh0bXBfbm9kZXNbMF0gJiYgdG1wX25vZGVzWzBdWydkZXB0aCddID09PSBsZXZlbCkge1xyXG4gICAgICAgICAgICAvLyBhZGQgZWFjaCBjbHVzdGVyIHRvIHRoZSByZXN1bHQgc2V0XHJcbiAgICAgICAgICAgIHRtcF9ub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uKG5vZGUpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygbm9kZVsnZGF0YSddWyduYW1lJ10gIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobm9kZVsnZGF0YSddWyduYW1lJ10pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGdldCBhbGwgY2hpbGRyZW4gb2YgYSBzcGVjaWZpYyBsZXZlbCBpbiB0aGUgdHJlZVxyXG4gICAgICAgIGxldCB0bXAgPSBbXTtcclxuICAgICAgICB0bXBfbm9kZXMuZm9yRWFjaChmdW5jdGlvbihub2RlKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygbm9kZVsnY2hpbGRyZW4nXSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgIHRtcCA9IHRtcC5jb25jYXQobm9kZVsnY2hpbGRyZW4nXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0bXBfbm9kZXMgPSB0bXA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbiAgIHNldEhpZXJhcmNoeUxldmVsKGhpZXJhcmNoeSwgbGV2ZWwpIHtcclxuICAgICAvLyBUT0RPIGNhdGNoIGNhc2VzIDwgMCBhbmQgYmlnZ2VyIHRoYW4gb3ZlcmFsbCBoZWlnaHRcclxuICAgICB0aGlzLmhpZXJhcmNoeUxldmVsc1snaCcgKyBoaWVyYXJjaHldID0gbGV2ZWw7XHJcbiAgICB9XHJcbiAgIHNldEhpZXJhcmNoeUNvbG9yKGhpZXJhcmNoeSkge1xyXG4gICAgICAgIC8vIGNoZWNrIGlmIHRoZSBoaWVyYXJjaHkgaXMgYWxyZWFkeSBzaG93biBhcyBuZXR3b3JrXHJcbiAgICAgICAgLy8gdGFrZSB0aGUgc2FtZSBjb2xvclxyXG4gICAgICAgIGZvciAobGV0IGtleSBpbiB0aGlzLm5ldHdvcmtDb2xvcikge1xyXG4gICAgICAgICAgICBpZiAoa2V5ID09PSAoJ2gnICsgaGllcmFyY2h5KSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oaWVyYXJjaHlDb2xvcnNbJ2gnICsgaGllcmFyY2h5XSA9IHRoaXMubmV0d29ya0NvbG9yW2tleV07XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGhpZXJhcmNoeSBpcyBub3QgdmlzdWFsaXplZCBhbHJlYWR5IGFzIGEgbmV0d29ya1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29sb3JzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCB0bXBfYm9vbGVhbiA9IHRydWU7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiB0aGlzLmhpZXJhcmNoeUNvbG9ycykge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmhpZXJhcmNoeUNvbG9ycy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaGllcmFyY2h5Q29sb3JzW2tleV0gPT09IGNvbG9yc1tpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0bXBfYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRtcF9ib29sZWFuKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiBhIG5ldHdvcmsgaXMgZGVwaWN0ZWRcclxuICAgICAgICAgICAgICAgIC8vIGlmIHNvIHNraXAgdGhlIGNvbG9yIHdoaWNoIGlzIGFscmVhZHkgY2hvb3NlbiBmb3IgdGhlIG5ldHdvcmtcclxuICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLm5ldHdvcmtDb2xvcikubGVuZ3RoICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIHRoaXMubmV0d29ya0NvbG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm5ldHdvcmtDb2xvcltrZXldICE9PSBjb2xvcnNbaV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGllcmFyY2h5Q29sb3JzWydoJyArIGhpZXJhcmNoeV0gPSBjb2xvcnNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGllcmFyY2h5Q29sb3JzWydoJyArIGhpZXJhcmNoeV0gPSBjb2xvcnNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgcmVtb3ZlSGllcmFyY2h5Q29sb3IoaGllcmFyY2h5KSB7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMuaGllcmFyY2h5Q29sb3JzWydoJyArIGhpZXJhcmNoeV07XHJcbiAgICB9XHJcbiAgIHJlbW92ZUhpZXJhcmNoeUxldmVsKGhpZXJhcmNoeSkge1xyXG4gICAgICAvLyBUT0RPIGNhdGNoIGNhc2VzIDwgMCBhbmQgYmlnZ2VyIHRoYW4gb3ZlcmFsbCBoZWlnaHRcclxuICAgICAgZGVsZXRlIHRoaXMuaGllcmFyY2h5TGV2ZWxzWydoJyArIGhpZXJhcmNoeV07XHJcbiAgfVxyXG4gICB1cGRhdGVEZW5kcm9ncmFtKCkge1xyXG4gICAgIC8vIGdldCB0aGUgaW1wb3J0YW50IGluZm9cclxuICAgICBsZXQgaWQgPSAkKCcuc2hvdy1kZW5kcm9ncmFtLmJ0bi1wcmltYXJ5JykuYXR0cignZGF0YScpO1xyXG4gICAgIGxldCBuYW1lID0gJCgnLnNob3ctZGVuZHJvZ3JhbS5idG4tcHJpbWFyeScpLmF0dHIoJ25hbWUnKTtcclxuICAgICAvLyBzZXQgdGhlIG5hbWUgb2YgdGhlIGRpc3BsYXllZCBoaWVyYXJjaHlcclxuICAgICAkKCcjZGVuZHJvZ3JhbS1wYW5lbC1uYW1lJykudGV4dChuYW1lKTtcclxuXHJcbiAgICAgLy8gc2V0IHNsaWRlciBhbmQgIHRleHQgdmFsdWVcclxuICAgICAkKCcjZGVuZHJvZ3JhbS1wYW5lbC1sZXZlbC1zbGlkZXInKS52YWwodGhpcy5oaWVyYXJjaHlMZXZlbHNbJ2gnICsgaWRdKTtcclxuICAgICAkKCcjZGVuZHJvZ3JhbS1wYW5lbC1sZXZlbC10ZXh0JykudGV4dCh0aGlzLmhpZXJhcmNoeUxldmVsc1snaCcgKyBpZF0pO1xyXG5cclxufVxyXG4gICBnZXRIaWVyYXJjaHlWZXJ0aWNlcyhoaWVyYXJjaGllcykge1xyXG4gICAgICAgbGV0IHJlc3VsdCA9IFtdOyAvLyByZXN1bHQgc2V0XHJcbiAgICAgICBoaWVyYXJjaGllcy5mb3JFYWNoKChjbHVzdGVyKT0+e1xyXG4gICAgICAgICAgIGxldCB2ZXJ0aWNlcyA9IFtdOyAvLyB2ZXJ0aWNlcyBvZiB0aGUgY2x1c3RlcnMgaW4gdGhlIHNwYXRpYWwgdmlld1xyXG4gICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgY2x1c3Rlci5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICBsZXQgZ3JvdXBNZW1iZXIgPSB0aGlzLmFycmF5QW5pbWFscy5maW5kKGQgPT4gZFsnYSddID09PSBjbHVzdGVyW2pdKTtcclxuICAgICAgICAgICAgICAgaWYgKGdyb3VwTWVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICB2ZXJ0aWNlcy5wdXNoKFtncm91cE1lbWJlclsncCddWzBdLCAtZ3JvdXBNZW1iZXJbJ3AnXVsxXV0pO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgICAgIC8vIEFuZHJldyBtb250b25lIGNoYWluIGFsZ29yaXRobSByZXV0cm5zIGZvciBwb2ludHMgZmV3ZXIgdGhhbiAzIG51bGxcclxuICAgICAgICAgICBpZiAodmVydGljZXMubGVuZ3RoID49IDMpIHtcclxuICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goZDMucG9seWdvbkh1bGwodmVydGljZXMpKTtcclxuICAgICAgICAgICB9XHJcbiAgICAgICB9KTtcclxuICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgIH1cclxuICAgZHJhd0hpZXJhcmNoeSgpIHtcclxuICAgICAgIC8vIGlkIG9mIHRoZSBoaWVyYXJjaHkgZS5nLiBbMSw1LDNdXHJcbiAgICAgICBsZXQgaGllcmFyY2h5SWRzID0gT2JqZWN0LmtleXModGhpcy5uZXR3b3JrSGllcmFyY2h5KS5tYXAoZnVuY3Rpb24oeCkge1xyXG4gICAgICAgICAgIHJldHVybiB4LnJlcGxhY2UoJ2gnLCAnJyk7XHJcbiAgICAgICB9KTtcclxuICAgICAgIC8vICBUaGUgY2x1c3RlcmluZyBpbiBhbiAyRCBhcnJheSB3aXRoIHdoaWNoIGFuaW1hbCBpZCBiZWxvbmdzIHRvIHdoaWNoIGdyb3VwXHJcbiAgICAgICBsZXQgaGllcmFyY2h5VmVydGljZXMgPSBbXTtcclxuXHJcbiAgICAgICAvLyBpdGVyYXRlIG92ZXIgdGhlIGhpZXJhcmNoeSBkYXRhIHRvIGdldCB0aGUgaGllcmFyY2h5IGFuaW1hbCBpZHMgcGVyIGNsdXN0ZXJpbmcgYW5kIGdyb3VwaW5nXHJcbiAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhpZXJhcmNoeUlkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgIGxldCB0cmVlRGF0YSA9IHRoaXMubmV0d29ya0hpZXJhcmNoeVsnaCcgKyBoaWVyYXJjaHlJZHNbaV1dW3RoaXMuaW5kZXhUaW1lXTtcclxuICAgICAgICAgICBsZXQgbm9kZXMgPSBkMy5oaWVyYXJjaHkodHJlZURhdGEsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgcmV0dXJuIGQuY2hpbGRyZW47XHJcbiAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgbGV0IG1hcmdpbiA9IDIwLFxyXG4gICAgICAgICAgICAgICB3aWR0aCA9IDUwMDAsXHJcbiAgICAgICAgICAgICAgIGhlaWdodCA9IDUwMDA7XHJcblxyXG4gICAgICAgICAgIC8vIGQzIHRyZWVcclxuICAgICAgICAgICBsZXQgdHJlZW1hcCA9IGQzLnRyZWUoKSAvL2QzLmNsdXN0ZXIoKVxyXG4gICAgICAgICAgICAgICAuc2l6ZShbKGhlaWdodCAtIDEwICogbWFyZ2luKSwgKHdpZHRoIC0gMTAgKiBtYXJnaW4pXSk7XHJcbiAgICAgICAgICAgbm9kZXMgPSB0cmVlbWFwKG5vZGVzKTtcclxuICAgICAgICAgICBsZXQgcm9vdCA9IG5vZGVzWydjaGlsZHJlbiddWzBdO1xyXG4gICAgICAgICAgIGlmIChzaG93TmV0d29ya0hpZXJhcmNoeSA9PT0gaGllcmFyY2h5SWRzW2ldKSB7XHJcbiAgICAgICAgICAgICAgIG5ldHdvcmtIaWVyYXJjaHlJZHMgPSB0aGlzLmdldEhpZXJhcmNoeUxldmVsKHJvb3QsIGhpZXJhcmNoeUlkc1tpXSk7XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgICAgIC8vIGFkZCB0aGUgdmVydGljZXMgaW50byB0aGUgYXJyYXlcclxuICAgICAgICAgICBoaWVyYXJjaHlWZXJ0aWNlcy5wdXNoKHRoaXMuZ2V0SGllcmFyY2h5VmVydGljZXModGhpcy5nZXRIaWVyYXJjaHlMZXZlbChyb290LCBoaWVyYXJjaHlJZHNbaV0pKSk7XHJcbiAgICAgICB9XHJcblxyXG4gICAgICAgLy8gaWYgbW9yZSB0aGFuIDIgaGllcmFyY2hpZXMgYXJlIGRyYXduXHJcbiAgICAgICBpZiAoaGllcmFyY2h5VmVydGljZXMubGVuZ3RoID4gMCkge1xyXG5cclxuICAgICAgIH1cclxuICAgICAgIC8vIERBVEEgSm9pblxyXG4gICAgICAgbGV0IGhpZXJhcmNoaWVzID0gdGhpcy5zcGF0aWFsVmlld1xyXG4gICAgICAgICAgIC5zZWxlY3RBbGwoJ2cuaGllcmFyY2h5LWdyb3VwJylcclxuICAgICAgICAgICAuZGF0YShoaWVyYXJjaHlWZXJ0aWNlcyk7XHJcbiAgICAgICAvLyBFTlRFUiB0aGUgZ3JvdXBzIC0gYWRkcyBhIHNwZWNpZmljIGlkIGFuZCBjb2xvclxyXG4gICAgICAgaGllcmFyY2hpZXNcclxuICAgICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgIC5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgIC5hdHRyKCdjbGFzcycsIGZ1bmN0aW9uKGQsIGkpIHtcclxuICAgICAgICAgICAgICAgaWYgKHNldE9wZXJhdGlvbiA9PT0gJ2ludGVyc2VjdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgIHJldHVybiAnaGllcmFyY2h5LWdyb3VwIGludGVyc2VjdGlvbic7XHJcbiAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2V0T3BlcmF0aW9uID09PSAnc3ltLWRpZmZlcmVuY2UnKSB7XHJcbiAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2hpZXJhcmNoeS1ncm91cCBzeW0tZGlmZmVyZW5jZSc7XHJcbiAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2hpZXJhcmNoeS1ncm91cCBoJyArIGhpZXJhcmNoeUlkc1tpXTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgLnN0eWxlKCdmaWxsJywgKGQsIGkpPT57XHJcbiAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmhpZXJhcmNoeUNvbG9yc1snaCcgKyBoaWVyYXJjaHlJZHNbaV1dO1xyXG4gICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgLmF0dHIoJ3N0cm9rZScsIChkLCBpKT0+e1xyXG4gICAgICAgICAgICAgICByZXR1cm4gdGhpcy5oaWVyYXJjaHlDb2xvcnNbJ2gnICsgaGllcmFyY2h5SWRzW2ldXTtcclxuICAgICAgICAgICB9KVxyXG4gICAgICAgICAgIC5tb3ZlVG9CYWNrKCk7XHJcblxyXG4gICAgICAgLy8gVVBEQVRFIC0gdGhlIGNsYXNzIG5lZWRlZCBmb3IgaW50ZXJzZWN0aW9uIGFuZCBzeW1tZXRyaWMgZGlmZmVyZW5jZVxyXG4gICAgICAgaGllcmFyY2hpZXMuYXR0cignY2xhc3MnLCBmdW5jdGlvbihkLCBpKSB7XHJcbiAgICAgICAgICAgaWYgKHNldE9wZXJhdGlvbiA9PT0gJ2ludGVyc2VjdGlvbicpIHtcclxuICAgICAgICAgICAgICAgcmV0dXJuICdoaWVyYXJjaHktZ3JvdXAgaW50ZXJzZWN0aW9uJztcclxuICAgICAgICAgICB9IGVsc2UgaWYgKHNldE9wZXJhdGlvbiA9PT0gJ3N5bS1kaWZmZXJlbmNlJykge1xyXG4gICAgICAgICAgICAgICByZXR1cm4gJ2hpZXJhcmNoeS1ncm91cCBzeW0tZGlmZmVyZW5jZSc7XHJcbiAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgcmV0dXJuICdoaWVyYXJjaHktZ3JvdXAgaCcgKyBoaWVyYXJjaHlJZHNbaV07XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgfSk7XHJcblxyXG4gICAgICAgLy8gRVhJVFxyXG4gICAgICAgaGllcmFyY2hpZXMuZXhpdCgpXHJcbiAgICAgICAgICAgLnJlbW92ZSgpO1xyXG5cclxuICAgICAgIC8vIEhpZXJhY2h5IGh1bGxzIGFkZGVkIHRvIHRoZSBzcGF0aWFsIHZpZXcgLSBnZXQgdGhlIHBvaW50cyBmb3IgZWFjaCBhbmltYWwgaW4gdGhlXHJcbiAgICAgICAvLyBzcGF0aWFsIHZpZXcgc28gdGhhdCBhIGNvbnZleCBodWxsIGNhbiBiZSBjYWxjdWxhdGVkXHJcbiAgICAgICBsZXQgaGllcmFyeUh1bGxzID0gaGllcmFyY2hpZXMuc2VsZWN0QWxsKCdwYXRoLmhpZXJhcmNoeS1odWxsLXBhdGgnKVxyXG4gICAgICAgICAgIC5kYXRhKGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgLy8gRU5URVIgYW5kIGNhbGN1bGF0ZSB0aGUgY29udmV4IGh1bGxcclxuICAgICAgIGhpZXJhcnlIdWxsc1xyXG4gICAgICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgICAgLmFwcGVuZCgncGF0aCcpXHJcbiAgICAgICAgICAgLy8gLmF0dHIoJ2lkJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgIC8vICAgICByZXR1cm4gJ2hwJyArIGQuam9pbignJykucmVwbGFjZSgvLC9nLCAnJyk7XHJcbiAgICAgICAgICAgLy8gfSlcclxuICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnaGllcmFyY2h5LWh1bGwtcGF0aCcpXHJcbiAgICAgICAgICAgLmF0dHIoJ2QnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgIC8vIHJldHVybiBkcmF3TGluZShkKTtcclxuICAgICAgICAgICAgICAgcmV0dXJuICdNJyArIGQuam9pbignTCcpICsgJ1onO1xyXG4gICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgIC8vIFVQREFURSB0aGUgY29udmV4IGh1bGxcclxuICAgICAgIGhpZXJhcnlIdWxsc1xyXG4gICAgICAgICAgIC5hdHRyKCdkJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAvLyByZXR1cm4gZHJhd0xpbmUoZCk7XHJcbiAgICAgICAgICAgICAgIHJldHVybiAnTScgKyBkLmpvaW4oJ0wnKSArICdaJztcclxuICAgICAgICAgICB9KTtcclxuICAgICAgIC8vIC5hdHRyKCdpZCcsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgIC8vIHJldHVybiAnaHAnICsgZC5qb2luKCcnKS5yZXBsYWNlKC8sL2csICcnKTtcclxuICAgICAgIC8vIH0pO1xyXG4gICAgICAgLy8gRVhJVFxyXG4gICAgICAgaGllcmFyeUh1bGxzLmV4aXQoKVxyXG4gICAgICAgICAgIC5yZW1vdmUoKTtcclxuXHJcbiAgIH1cclxuICAgYWRkSGlnaGxpZ2h0U3BhdGlhbFZpZXcoYW5pbWFscykge1xyXG4gICAgICAgLy8gcG9pbnRzIHRvIGNhbGN1bGF0ZSB0aGUgY29udmV4IGh1bGwgb2YgdGhlIGhpZ2hsaWdodCBjbHVzdGVyXHJcbiAgICAgICBsZXQgdmVydGljZXMgPSBbXTtcclxuICAgICAgIC8vIGl0ZXJhdGUgdGhyb3VnaCB0aGUgb2JqZWN0cyBpbiB0aGUgY2x1c3RlclxyXG4gICAgICAgLy8gZ2V0IHRoZSBwb2ludHMgYW5kIGhpZ2hsaWdodCB0aGUgYW5pbWFsc1xyXG4gICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbmltYWxzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgbGV0IHRtcEFuaW1hbCA9IHRoaXMuc3BhdGlhbFZpZXcuc2VsZWN0KCcjYW5pbWFsLScgKyBhbmltYWxzW2ldKTtcclxuICAgICAgICAgICBsZXQgcG9pbnQgPSB0bXBBbmltYWwuZGF0YSgpWzBdWydwJ107XHJcbiAgICAgICAgICAgdmVydGljZXMucHVzaChbcG9pbnRbMF0sIC1wb2ludFsxXV0pO1xyXG5cclxuICAgICAgICAgICB0bXBBbmltYWwuY2xhc3NlZCgnYW5pbWFsLWhpZ2hsaWdodCcsIHRydWUpO1xyXG4gICAgICAgfVxyXG4gICAgICAgLy8gYWRkIGEgcG9seWdvbiBodWxsIGluIHRoZSBzcGF0aWFsIHZpZXdcclxuICAgICAgIHRoaXMuc3BhdGlhbFZpZXcuYXBwZW5kKCdwYXRoJylcclxuICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnaGlnaGxpZ2h0LWhpZXJhcmNoeScpXHJcbiAgICAgICAgICAgLmF0dHIoJ2QnLCAoJ00nICsgZDMucG9seWdvbkh1bGwodmVydGljZXMpLmpvaW4oJ0wnKSArICdaJykpO1xyXG4gICB9XHJcblxyXG4gICByZW1vdmVIaWdobGlnaHRTcGF0aWFsVmlldygpIHtcclxuICAgICAgIC8vIHJlbW92ZSB0aGUgY29sb3JpbmcgYW5kIHRoZSBoaWVyYXJjaHkgaGlnaGxpZ2h0IGh1bGxcclxuICAgICAgIGQzLnNlbGVjdEFsbCgnLmFuaW1hbCcpLmNsYXNzZWQoJ2FuaW1hbC1oaWdobGlnaHQnLCBmYWxzZSk7XHJcbiAgICAgICBkMy5zZWxlY3RBbGwoJy5oaWdobGlnaHQtaGllcmFyY2h5JykucmVtb3ZlKCk7XHJcbiAgIH1cclxuICAgZHJhd0RlbmRyb2dyYW0oKSB7XHJcblxyXG5cclxuICAgICAgICAgdmFyIGNvbGxhcHNlID0gKGQpPT57XHJcbiAgICAgICAgICAvL2lmIChkLmNoaWxkcmVuICYmIGQuZGVwdGggPD0gdGhpcy5oaWVyYXJjaHlMZXZlbHNbJ2gnICsgdGhpcy5pZF0pXHJcbiAgICAgICAgICBpZiAoZC5jaGlsZHJlbiAmJiBkLmRlcHRoIDw9IDIpIHtcclxuICAgICAgICAgICAgICBkLl9jaGlsZHJlbiA9IGQuY2hpbGRyZW47XHJcbiAgICAgICAgICAgICAgZC5fY2hpbGRyZW4uZm9yRWFjaChjb2xsYXBzZSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGQuY2hpbGRyZW4gPSAwO1xyXG4gICAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgICAgIC8vIGdldCB0aGUgYWN0aXZlIGRlbmRyb2dyYW1cclxuICAgICAgIGxldCBpZCA9ICQoJy5zaG93LWRlbmRyb2dyYW0uYnRuLXByaW1hcnknKS5hdHRyKCdkYXRhJyk7XHJcbiAgICAgICAvLyBpZiBkYXRhIGlzIGF2YWlhYmxlIGRyYXcgaGllcmFyY2h5IGNsdXN0ZXJzIGFuZCBhIGJ1dHRvbiBpcyBhY3RpdmUgc2VsY3RlZFxyXG4gICAgICAgaWYgKCEkLmlzRW1wdHlPYmplY3QodGhpcy5uZXR3b3JrSGllcmFyY2h5KSAmJiBpZCkge1xyXG4gICAgICAgICAgIC8vIGdldCB0aGUgZGF0YSBhbmQgdHJhbnNmb3JtIGl0XHJcbiAgICAgICAgICAgbGV0IHRyZWVEYXRhID0gdGhpcy5uZXR3b3JrSGllcmFyY2h5WydoJyArIGlkXVt0aGlzLmluZGV4VGltZV07XHJcblxyXG4gICAgICAgICAgIGxldCBub2RlcyA9IGQzLmhpZXJhcmNoeSh0cmVlRGF0YSwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICByZXR1cm4gZC5jaGlsZHJlbjtcclxuICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAvLyBza2lwIHRoZSByb290IG5vZGVcclxuICAgICAgICAgICBub2RlcyA9IG5vZGVzLmNoaWxkcmVuWzBdO1xyXG4gICAgICAgICAgIC8vIGNvbGxhcHNlIHRoZSB0cmVlXHJcbiAgICAgICAgICAgbm9kZXMuY2hpbGRyZW4uZm9yRWFjaChjb2xsYXBzZSk7XHJcblxyXG4gICAgICAgICAgIGxldCBtYXJnaW4gPSAyMCxcclxuICAgICAgICAgICAgICAgd2lkdGggPSA1MDAwLFxyXG4gICAgICAgICAgICAgICBoZWlnaHQgPSA1MDAwO1xyXG5cclxuICAgICAgICAgICAvLyBkMyB0cmVlXHJcbiAgICAgICAgICAgbGV0IHRyZWVtYXAgPSBkMy50cmVlKCkgLy9kMy5jbHVzdGVyKClcclxuICAgICAgICAgICAgICAgLnNpemUoWyhoZWlnaHQgLSAxMCAqIG1hcmdpbiksICh3aWR0aCAtIDEwICogbWFyZ2luKV0pO1xyXG5cclxuXHJcblxyXG4gICAgICAgICAgIC8vIG1hcHMgdGhlIG5vZGUgZGF0YSB0byB0aGUgdHJlZSBsYXlvdXRcclxuICAgICAgICAgICBub2RlcyA9IHRyZWVtYXAobm9kZXMpO1xyXG4gICAgICAgICAgIC8vIGhpZGUgaWYgbm8gbmV0d29yayBpcyBjaG9vc2VuXHJcbiAgICAgICAgICAgaWYgKCQoJy5zaG93LWRlbmRyb2dyYW0uYnRuLXByaW1hcnknKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgLy8gc2V0IHRoZSBuZXcgc2xpZGVyIG1heFxyXG4gICAgICAgICAgICAgICAkKCcjZGVuZHJvZ3JhbS1wYW5lbC1sZXZlbC1zbGlkZXInKVxyXG4gICAgICAgICAgICAgICAgICAgLnNsaWRlcignb3B0aW9uJywgJ21heCcsIChub2Rlc1snaGVpZ2h0J10gLSAxKSlcclxuICAgICAgICAgICAgICAgICAgIC5zbGlkZXIoJ3ZhbHVlJywgdGhpcy5oaWVyYXJjaHlMZXZlbHNbJ2gnICsgaWRdKTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIERBVEEgSk9JTiAtIGxpbmtzIChlZGdlcylcclxuICAgICAgICAgICAgICAgbGV0IGxpbmsgPSB0aGlzLmRlbmRyb3pvb21cclxuICAgICAgICAgICAgICAgICAgIC5zZWxlY3RBbGwoJ3BhdGgubGluaycpXHJcbiAgICAgICAgICAgICAgICAgICAuZGF0YShub2Rlcy5kZXNjZW5kYW50cygpLnNsaWNlKDEpKTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIEVOVEVSXHJcbiAgICAgICAgICAgICAgIGxpbmtcclxuICAgICAgICAgICAgICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCdwYXRoJylcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsaW5rJylcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdkJywgZGlhZ29uYWxMaW5lcyk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyBUcmFuc2l0aW9uIGxpbmtzIHRvIHRoZWlyIG5ldyBwb3NpdGlvbi5cclxuICAgICAgICAgICAgICAgbGlua1xyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2QnLCBkaWFnb25hbExpbmVzKTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIEVYSVRcclxuICAgICAgICAgICAgICAgbGluay5leGl0KClcclxuICAgICAgICAgICAgICAgICAgIC5yZW1vdmUoKTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIERBVEEgSk9JTiAtIG5vZGVzXHJcbiAgICAgICAgICAgICAgIC8vIGFkZHMgZWFjaCBub2RlIGFzIGEgZ3JvdXBcclxuICAgICAgICAgICAgICAgbGV0IG5vZGUgPSB0aGlzLmRlbmRyb3pvb21cclxuICAgICAgICAgICAgICAgICAgIC5zZWxlY3RBbGwoJy5ub2RlJylcclxuICAgICAgICAgICAgICAgICAgIC5kYXRhKG5vZGVzLmRlc2NlbmRhbnRzKCkpO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gYWRkIHRoZSBncm91cHMgdG8gdGhlIGRlbmRncm9ncmFtXHJcbiAgICAgICAgICAgICAgIHZhciBub2RlRW50ZXIgPSBub2RlLmVudGVyKClcclxuICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnbm9kZScgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAoZC5jaGlsZHJlbiA/ICcgbm9kZS0taW50ZXJuYWwnIDogJyBub2RlLS1sZWFmJyk7XHJcbiAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgnICsgZC54ICsgJywnICsgZC55ICsgJyknO1xyXG4gICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyBFTlRFUiAtIGFwcGVuZCBmb3IgZWFjaCBncm91cCBhIG5vZGUgKGNpcmNsZSlcclxuICAgICAgICAgICAgICAgLy8gd2l0aCBoaWdobGlnaHRpbmcgZm9yIHRoZSBhY3RpdmUgY2hvb3NlbiBsZXZlbFxyXG4gICAgICAgICAgICAgICBub2RlRW50ZXIuYXBwZW5kKCdjaXJjbGUnKVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ3InLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICBpZiAoZFsnZGVwdGgnXSA9PT0gdGhpcy5oaWVyYXJjaHlMZXZlbHNbJ2gnICsgaWRdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiA0MCArIGQuZGF0YS5uYW1lLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMjAgKyBkLmRhdGEubmFtZS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGlmIChkWydkZXB0aCddID09PSB0aGlzLmhpZXJhcmNoeUxldmVsc1snaCcgKyBpZF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdhY3RpdmUtbGV2ZWwnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignaWQnLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2gnICsgZFsnZGF0YSddWyduYW1lJ10udG9TdHJpbmcoKS5oYXNoQ29kZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgIC8vIFRPRE8gZmluZCBhIG5pY2UgZnVuY3Rpb24gZm9yIHRoZSBvbiBjbGljayBtZXRob2RcclxuICAgICAgICAgICAgICAgICAgIC5vbignY2xpY2snLCB0aGlzLmNsaWNrKVxyXG4gICAgICAgICAgICAgICAgICAgLm9uKCdtb3VzZW92ZXInLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAvLyB0b29sdGlwIHBvc2l0aW9uIGFuZCB0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b29sdGlwRGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zdHlsZSgnbGVmdCcsIChkMy5ldmVudC5wYWdlWCArIDUpICsgJ3B4JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCd0b3AnLCAoZDMuZXZlbnQucGFnZVkgKyA1KSArICdweCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zdHlsZSgnb3BhY2l0eScsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbHRpcERpdi5zZWxlY3QoJy50b29sdGlwLXNwYW4nKS5odG1sKGRbJ2RhdGEnXVsnbmFtZSddLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCBoaWdobGlnaHQgaW4gdGhlIHNwYXRpYWwgdmlld1xyXG4gICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSB1bmRpb24gb2YgdGhlIHBhdGhzIG1ha2VzIHRoaXMgY29tcGxpY2F0ZWRcclxuICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEhpZ2hsaWdodFNwYXRpYWxWaWV3KGRbJ2RhdGEnXVsnbmFtZSddKTtcclxuICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAub24oJ21vdXNlb3V0JywgKCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2x0aXBEaXYudHJhbnNpdGlvbigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC5kdXJhdGlvbig1MDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zdHlsZSgnb3BhY2l0eScsIDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBoaWdobGlnaHQgaW4gdGhlIHNwYXRpYWwgdmlld1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlSGlnaGxpZ2h0U3BhdGlhbFZpZXcoKTtcclxuICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gYWRkIHRoZSB0ZXh0IC0gIyBudW1iZXIgb2YgYW5pbWFscyBpbiB0aGUgY2x1c3RlclxyXG4gICAgICAgICAgICAgICBub2RlRW50ZXIuYXBwZW5kKCd0ZXh0JylcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdkZW5kcm9ncmFtLXRleHQnKVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gnLCAxNTApXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cigneScsIC0xNTApXHJcbiAgICAgICAgICAgICAgICAgICAudGV4dCgoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5kYXRhLm5hbWUubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyBVUERBVEUgLS0gdXBkYXRlIHRoZSBncm91cHNcclxuICAgICAgICAgICAgICAgbm9kZUVudGVyXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoJyArIGQueCArICcsJyArIGQueSArICcpJztcclxuICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gdXBkYWUgdGhlIG5vZGUgYW5kIGNpcmNsZXNcclxuICAgICAgICAgICAgICAgLy8gd2l0aCBhY3RpdmUtbGV2ZWwgZnVuY3Rpb24gdG8gaGlnaGxpZ2h0IHdoaWNoIGxldmVsIGlzIGNob3NlblxyXG4gICAgICAgICAgICAgICBub2RlXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoJyArIGQueCArICcsJyArIGQueSArICcpJztcclxuICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAuc2VsZWN0KCdjaXJjbGUnKVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ3InLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICBpZiAoZFsnZGVwdGgnXSA9PT0gdGhpcy5oaWVyYXJjaHlMZXZlbHNbJ2gnICtpZF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDQwICsgZC5kYXRhLm5hbWUubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAyMCArIGQuZGF0YS5uYW1lLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgKGQpPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGlmIChkWydkZXB0aCddID09PSB0aGlzLmhpZXJhcmNoeUxldmVsc1snaCcgKyBpZF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdhY3RpdmUtbGV2ZWwnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2lkJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdoJyArIGRbJ2RhdGEnXVsnbmFtZSddLnRvU3RyaW5nKCkuaGFzaENvZGUoKTtcclxuICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSB0ZXh0IG9mIG51bWJlciBvZiBlbnRpdGllc1xyXG4gICAgICAgICAgICAgICBub2RlLnNlbGVjdCgndGV4dCcpXHJcbiAgICAgICAgICAgICAgICAgICAudGV4dCgoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5kYXRhLm5hbWUubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyBFWElUXHJcbiAgICAgICAgICAgICAgIG5vZGUuZXhpdCgpXHJcbiAgICAgICAgICAgICAgICAgICAucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgIC8vIGNvbG9yIHRoZSBkZW5kcm9ncmFtIG5vZGVzIHVzaW5nIHRoZSBzdGFuZGFyZERldmlhdGlvbiBpbiB0aGUgY2x1c3RlclxyXG4gICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5oaWVyYXJjaHlHcm91cFN0ZGV2KS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgIC8vIHNob3cgdGhlIGxlZ2VuZCBmb3IgdGhlIGNvbG9yaW5nXHJcbiAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhoaWVyYXJjaHlHcm91cFN0ZGV2KTtcclxuICAgICAgICAgICAgICAgICAgIC8vIFRPRE8gbGVnZW5kIGhlcmVcclxuICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdKVU1QUyBIRVJFJyk7XHJcbiAgICAgICAgICAgICAgICAgICBpZiAoJCgnI2RlbmRyb2dyYW0tbGVnZW5kJykuY3NzKCdkaXNwbGF5JykgPT0gJ25vbmUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgJCgnI2RlbmRyb2dyYW0tbGVnZW5kJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgLy8gSU1QT1JUQU5UIC0gYXN5bmMgcHJvYmxlbXNcclxuICAgICAgICAgICAgICAgICAgIC8vIFRPRE8gc29sdmUgdGhpcyAtIHZlcnkgc2xvd1xyXG4gICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIG5vZGUuc2VsZWN0KCdjaXJjbGUnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ2ZpbGwnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhoaWVyYXJjaHlHcm91cFN0ZGV2KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCgnaCcgKyBkWydkYXRhJ11bJ25hbWUnXS50b1N0cmluZygpLmhhc2hDb2RlKCkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCgnaCcgKyBkWydkYXRhJ11bJ25hbWUnXS50b1N0cmluZygpLmhhc2hDb2RlKCkpIGluIGhpZXJhcmNoeUdyb3VwU3RkZXYpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb2xvciB0aGUgbm9kZXMgYnkgY2FsY3VsYXRpbmcgdGhlIHN0YW5kYXJkRGV2aWF0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmb3IgZWFjaCBjbHVzdGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvbmx5IGFjdGl2ZSBpcyBzaG93IGluIGNsdXN0ZXIgaXMgY2hvb3NlblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCgnaCcgKyBkWydkYXRhJ11bJ25hbWUnXS50b1N0cmluZygpLmhhc2hDb2RlKCkpIGluIGhpZXJhcmNoeUdyb3VwU3RkZXYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnaGVsbG8nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhzdGFuZGFyZERldmlhdGlvbihoaWVyYXJjaHlHcm91cFN0ZGV2WygnaCcgKyBkWydkYXRhJ11bJ25hbWUnXS50b1N0cmluZygpLmhhc2hDb2RlKCkpXSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdGFuZGFyZERldmlhdGlvbkNvbG9yU2NhbGUoc3RhbmRhcmREZXZpYXRpb24oaGllcmFyY2h5R3JvdXBTdGRldlsoJ2gnICsgZFsnZGF0YSddWyduYW1lJ10udG9TdHJpbmcoKS5oYXNoQ29kZSgpKV0pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZFsnZGVwdGgnXSAhPT0gaGllcmFyY2h5TGV2ZWxzWydoJyArdGhpcy5pZF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnIzAwMCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgfSwgMjUwKTtcclxuICAgICAgICAgICAgICAgfSBlbHNlIGlmICgkKCcjZGVuZHJvZ3JhbS1sZWdlbmQnKS5jc3MoJ2Rpc3BsYXknKSAhPT0gJ25vbmUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAkKCcjZGVuZHJvZ3JhbS1sZWdlbmQnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICB9XHJcbiAgICAgICB9XHJcbiAgICAgICBpZiAoISQuaXNFbXB0eU9iamVjdCh0aGlzLm5ldHdvcmtIaWVyYXJjaHkpKSB7XHJcbiAgICAgICAgICAgLy8gZHJhdyB0aGUgaGllcmFyY2h5IGluIHNwYXRpYWwgdmlld1xyXG4gICAgICAgICAgIHRoaXMuZHJhd0hpZXJhcmNoeSgpO1xyXG4gICAgICAgfVxyXG4gICAgICAgLy90aGlzLmRyYXdIaWVyYXJjaHkoKTtcclxuICAgfVxyXG5cclxuICAgY2hhbmdlSGllcmFyY2h5TGVnZW5kKCkge1xyXG4gICAgICAgbGV0IGxlZ2VuZDsgLy8gdGhlIGNvbG9yIGxlZ2VuZFxyXG4gICAgICAgbGV0IGxlZ2VuZFRleHQ7IC8vIGNvbG9yIGxlZ2VuZCB0ZXh0XHJcbiAgICAgICAvLyB2YXJzIGZvciB0aGUgbGVnZW5kXHJcbiAgICAgICBsZXQgbGVnZW5kU3dhdGNoV2lkdGggPSA1MDtcclxuICAgICAgIGxldCBsZWdlbmRTd2F0Y2hIZWlnaHQgPSAyMDtcclxuICAgICAgIC8vIFNob3cgb3IgaGlkZSB0aGUgc3ZnIGVsZW1lbnRcclxuICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLmhpZXJhcmNoeUNvbG9ycykubGVuZ3RoICE9PSAwIHx8IE9iamVjdC5rZXlzKHRoaXMubmV0d29ya0NvbG9yKS5sZW5ndGggIT09IDApIHtcclxuICAgICAgICAgICAkKCcjaGllcmFyY2h5LWxlZ2VuZC1kaXYnKS5zaG93KCk7XHJcbiAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICQoJyNoaWVyYXJjaHktbGVnZW5kLWRpdicpLmhpZGUoKTtcclxuICAgICAgIH1cclxuXHJcbiAgICAgICBsZXQgbGVnZW5kRGF0YSA9IFtdO1xyXG4gICAgICAgbGV0IGxlZ2VuZFRleHREYXRhID0gW107XHJcbiAgICAgICAvLyBnZXQgdGhlIHJlcXVpcmVkIGRhdGFcclxuICAgICAgICQoJy5zaG93LWRlbmRyb2dyYW0nKS5lYWNoKChpLCBvYmopPT57XHJcbiAgICAgICAgICAgLy8gY2hlY2sgaWYgZGF0YSBpcyBub3QgdW5kZWZpbmVkXHJcbiAgICAgICAgICAgaWYgKHRoaXMuaGllcmFyY2h5Q29sb3JzWydoJyArICQob2JqKS5hdHRyKCdkYXRhJyldICE9IG51bGwgJiYgJChvYmopLmF0dHIoJ25hbWUnKSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgIGxlZ2VuZERhdGEucHVzaCh0aGlzLmhpZXJhcmNoeUNvbG9yc1snaCcgKyAkKG9iaikuYXR0cignZGF0YScpXSk7XHJcbiAgICAgICAgICAgICAgIGxlZ2VuZFRleHREYXRhLnB1c2goJChvYmopLmF0dHIoJ25hbWUnKSk7XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgfSk7XHJcbiAgICAgICAvLyBhZGQgdGhlIG5ldHdvcmsgY29sb3JcclxuICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLm5ldHdvcmtDb2xvcikubGVuZ3RoICE9PSAwKSB7XHJcbiAgICAgICAgICAgZm9yIChsZXQga2V5IGluIHRoaXMubmV0d29ya0NvbG9yKSB7XHJcbiAgICAgICAgICAgICAgIGlmIChsZWdlbmREYXRhLmluZGV4T2YodGhpcy5uZXR3b3JrQ29sb3Jba2V5XSkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICBsZWdlbmREYXRhLnB1c2godGhpcy5uZXR3b3JrQ29sb3Jba2V5XSk7XHJcbiAgICAgICAgICAgICAgICAgICBsZWdlbmRUZXh0RGF0YS5wdXNoKCdOZXR3b3JrJyk7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICB9XHJcbiAgICAgICB9XHJcbiAgICAgICAvLyBEQVRBIEpPSU5cclxuICAgICAgIGxlZ2VuZCA9IHRoaXMuc3ZnTGVnZW5kX25ldHcuc2VsZWN0QWxsKCdyZWN0LmxlZ2VuZCcpXHJcbiAgICAgICAgICAgLmRhdGEobGVnZW5kRGF0YSk7XHJcbiAgICAgICBsZWdlbmRUZXh0ID0gdGhpcy5zdmdMZWdlbmRfbmV0dy5zZWxlY3RBbGwoJ3RleHQubGVnZW5kLXRleHQnKVxyXG4gICAgICAgICAgIC5kYXRhKGxlZ2VuZFRleHREYXRhKTtcclxuXHJcbiAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0gTGVnZW5kIHN3YXRjaGVzICAtLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAvLyBVUERBVEUgLSBsZWdlbmRcclxuICAgICAgIGxlZ2VuZC5zdHlsZSgnZmlsbCcsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgIH0pO1xyXG4gICAgICAgLy8gRU5URVIgLSBsZWdlbmRcclxuICAgICAgIGxlZ2VuZFxyXG4gICAgICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgICAgLmFwcGVuZCgncmVjdCcpXHJcbiAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xlZ2VuZCcpXHJcbiAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgbGVnZW5kU3dhdGNoV2lkdGgpXHJcbiAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGxlZ2VuZFN3YXRjaEhlaWdodClcclxuICAgICAgICAgICAuYXR0cigneScsIDApXHJcbiAgICAgICAgICAgLmF0dHIoJ3gnLCBmdW5jdGlvbihkLCBpKSB7XHJcbiAgICAgICAgICAgICAgIHJldHVybiAobGVnZW5kU3dhdGNoV2lkdGggKyAyLjUgKiBpICogbGVnZW5kU3dhdGNoV2lkdGgpICsgJ3B4JztcclxuICAgICAgICAgICB9KVxyXG4gICAgICAgICAgIC5zdHlsZSgnZmlsbCcsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICAgICAgICAgfSk7XHJcbiAgICAgICAvLyBFWElUIC0gbGVnZW5kXHJcbiAgICAgICBsZWdlbmQuZXhpdCgpXHJcbiAgICAgICAgICAgLnJlbW92ZSgpO1xyXG5cclxuICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLSBUZXh0ICAtLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAvLyBVUERBVEUgLSBsZWdlbmQgdGV4dFxyXG4gICAgICAgbGVnZW5kVGV4dC50ZXh0KGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgIH0pO1xyXG4gICAgICAgLy8gRU5URVIgLSBsZWdlbmQgdGV4dFxyXG4gICAgICAgbGVnZW5kVGV4dFxyXG4gICAgICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgICAgLmFwcGVuZCgndGV4dCcpXHJcbiAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xlZ2VuZC10ZXh0JylcclxuICAgICAgICAgICAuYXR0cigneScsIDIgKiBsZWdlbmRTd2F0Y2hIZWlnaHQpXHJcbiAgICAgICAgICAgLmF0dHIoJ3gnLCBmdW5jdGlvbihkLCBpKSB7XHJcbiAgICAgICAgICAgICAgIHJldHVybiAobGVnZW5kU3dhdGNoV2lkdGggKyAyLjUgKiBpICogbGVnZW5kU3dhdGNoV2lkdGgpICsgJ3B4JztcclxuICAgICAgICAgICB9KVxyXG4gICAgICAgICAgIC50ZXh0KGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgLy8gRVhJVCAtIGxlZ2VuZCB0ZXh0XHJcbiAgICAgICBsZWdlbmRUZXh0LmV4aXQoKVxyXG4gICAgICAgICAgIC5yZW1vdmUoKTtcclxuXHJcbiAgIH1cclxuXHJcblxyXG4gICBzZXRuZXR3b3JrQ29sb3IobmV0d29ya19pZCkge1xyXG4gICAgICAgLy8gaWYgaWQgPSAtMSBzZXQgdGhlIGNvbG9yIHRvIG5vdGhpbmdcclxuICAgICAgIGlmIChuZXR3b3JrX2lkID49IDApIHtcclxuICAgICAgICAgICB0aGlzLm5ldHdvcmtDb2xvclsnaCcgKyBuZXR3b3JrX2lkXSA9ICcjMDgzMDZiJztcclxuICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgdGhpcy5uZXR3b3JrQ29sb3IgPSB7fTtcclxuICAgICAgIH1cclxuICAgICAgIHRoaXMuY2hhbmdlSGllcmFyY2h5TGVnZW5kKCk7XHJcbiAgIH1cclxuXHJcbiAgIHNldEhpZXJhcmNoeURhdGEodmFsdWUsIG5ldHdvcmtfaWQpIHtcclxuICAgICAgIC8vIGlmIHRoZSBlbGVtZW50IGlzIGVtcHR5IHJlbW92ZSB0aGUgZWxlbWVudCBmcm9tIHRoZSBuZXR3cm9rSGllcmFyY2h5IG9iamVjdFxyXG4gICAgICAgaWYgKE9iamVjdC5rZXlzKHZhbHVlKS5sZW5ndGggPT09IDAgJiYgdmFsdWUuY29uc3RydWN0b3IgPT09IE9iamVjdCkge1xyXG4gICAgICAgICAgIGRlbGV0ZSB0aGlzLm5ldHdvcmtIaWVyYXJjaHlbJ2gnICsgbmV0d29ya19pZF07XHJcbiAgICAgICAgICAgdGhpcy5yZW1vdmVIaWVyYXJjaHlMZXZlbChuZXR3b3JrX2lkKTtcclxuICAgICAgICAgICB0aGlzLnJlbW92ZUhpZXJhcmNoeUNvbG9yKG5ldHdvcmtfaWQpO1xyXG4gICAgICAgfSAvLyBhZGQgaXQgdG8gdGhlIG5ldHdvcmsgaGllcmFyY2h5XHJcbiAgICAgICBlbHNlIHtcclxuICAgICAgICAgICB0aGlzLm5ldHdvcmtIaWVyYXJjaHlbJ2gnICsgbmV0d29ya19pZF0gPSB2YWx1ZTtcclxuICAgICAgICAgIHRoaXMuc2V0SGllcmFyY2h5TGV2ZWwobmV0d29ya19pZCwgMik7XHJcbiAgICAgICAgICB0aGlzLnNldEhpZXJhcmNoeUNvbG9yKG5ldHdvcmtfaWQpO1xyXG4gICAgICAgfSAvLyB0b28gbWFueSBlbGVtZW50cyBjYW50IGJlIGFkZGVkXHJcblxyXG4gICAgICAgdGhpcy5jaGFuZ2VIaWVyYXJjaHlMZWdlbmQoKTtcclxuICAgfVxyXG5cclxuICAgZ2V0TmV0d29ya0hpZXJhcmNoeURhdGEobmV0d29ya19pZCkge1xyXG4gICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICB1cmw6ICcvYXBpL2RhdGFzZXQvbmV0d29yay9oaWVyYXJjaHkvJyArIHBhcmFtZXRlcnNbJ2lkJ10gKyAnLycgKyBuZXR3b3JrX2lkLFxyXG4gICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgICAgdHlwZTogJ0dFVCcsXHJcbiAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcclxuICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICdBY2NlcHQnOiBKU09OQVBJX01JTUVUWVBFXHJcbiAgICAgICAgICAgfSxcclxuICAgICAgICAgICBzdWNjZXNzOiAoZGF0YSk9PntcclxuICAgICAgICAgICAgICAgaWYgKGRhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICB0aGlzLnNldEhpZXJhcmNoeURhdGEoSlNPTi5wYXJzZShkYXRhWzBdWydoaWVyYXJjaHknXSksIG5ldHdvcmtfaWQpO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIGVuYWJsZVBsYXlCdXR0b24oKTtcclxuICAgICAgICAgICB9XHJcbiAgICAgICB9KTtcclxuICAgfVxyXG5cclxuXHJcblxyXG4gfVxyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBTcGF0aWFsVmlldyBleHRlbmRzIERyYXdlcntcclxuICBjb25zdHJ1Y3RvcihkYXRhKXtcclxuICAgIHN1cGVyKGRhdGEpO1xyXG5cclxuXHJcbiAgICB0aGlzLnNwYXRpYWxWaWV3SW5pdCgpO1xyXG4gICAgLy90aGlzLmNwX2xpc3RlbmVyKCk7XHJcbiAgfVxyXG4gIGNwX2xpc3RlbmVyKCkge1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFBsYXkgb3Igc3RvcCB0aGUgYW5pbWF0aW9uXHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjcGxheS1idXR0b24nKS5jbGljaygoKT0+e1xyXG4gICAgICAgICAgaWYgKCQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgIHRoaXMucGxheUJvb2xlYW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAkKCcubWRpLXBhdXNlJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICQoJy5tZGktcGxheScpLnNob3coKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5wbGF5Qm9vbGVhbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgJCgnLm1kaS1wbGF5JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICQoJy5tZGktcGF1c2UnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgdGhpcy5zZXRJbmRleFRpbWUoc2xpZGVyLnNsaWRlcigndmFsdWUnKSk7XHJcbiAgICAgICAgICAgICAgJCgnLmJydXNoJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFBhdXNlIHRoZSBhbmltYXRpb24gYW5kIHNob3cgb25seSB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI25leHQtZnJhbWUtYnV0dG9uJykuY2xpY2soKCk9PntcclxuICAgICAgICAgIGlmICgkKCcjcGxheS1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICB0aGlzLnBsYXlCb29sZWFuID0gZmFsc2U7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAkKCcjcGxheS1idXR0b24nKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICB0aGlzLmRyYXcoKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQnJ1c2hpbmcgYnV0dG9uXHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjYnJ1c2hpbmctYnV0dG9uJykuY2xpY2soKCk9PntcclxuICAgICAgICAgIC8vc3RvcCB0aGUgYW5pbWF0aW9uXHJcblxyXG4gICAgICAgICAgdGhpcy5wbGF5Qm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgICAgICAgJCgnI3BsYXktYnV0dG9uJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgaWYgKCEkKCcjYnJ1c2hpbmctYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgLy9kZWZpbmUgdGhlIGJydXNoXHJcbiAgICAgICAgICAgICAgdGhpcy5icnVzaCA9IGQzLmJydXNoKClcclxuICAgICAgICAgICAgICAgICAgLmV4dGVudChbXHJcbiAgICAgICAgICAgICAgICAgICAgICBbMCwgMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICBbdGhpcy50YW5rV2lkdGgsIHRoaXMudGFua0hlaWdodF1cclxuICAgICAgICAgICAgICAgICAgXSlcclxuICAgICAgICAgICAgICAgICAgLm9uKCdlbmQnLCAoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgLy9sZXQgYXJyYXlBbmltYWxzID0gdGhpcy5hcnJheUFuaW1hbHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAvL2xldCBhY3RpdmVBbmltYWxzID0gdGhpcy5hY3RpdmVBbmltYWxzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlY3QgPSBkMy5ldmVudC5zZWxlY3Rpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUFuaW1hbHMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAvL2l0ZXJhdGUgb3ZlciB0aGUgMTUxIGZpc2ggdG8gY2hlY2sgd2hpY2ggYXJlIGluIHRoZSBicnVzaFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXJyYXlBbmltYWxzLm1hcCgoYW5pbWFsKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBbYW5pbWFsWydwJ11bMF0sIGFuaW1hbFsncCddWzFdXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jaGVjayB3aGljaCBmaXNoIGFyZSBpbiAgdGhlIGJydXNoZWQgYXJlYVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHJlY3RbMF1bMF0gPD0gcG9pbnRbMF0pICYmIChwb2ludFswXSA8PSByZWN0WzFdWzBdKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHJlY3RbMF1bMV0gPD0gcG9pbnRbMV0pICYmIChwb2ludFsxXSA8PSByZWN0WzFdWzFdKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUG9pbnQgaXMgaW4gdGhlIGJydXNoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUFuaW1hbHMucHVzaChhbmltYWxbJ2EnXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICB9fSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgIC8vc2V0QWN0aXZlQW5pbWFscyhhY3RpdmVBbmltYWxzKTtcclxuXHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhpcy5zZXRBY3RpdmVBbmltYWxzKHRoaXMuYWN0aXZlQW5pbWFscyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vZ28gYmFjayBvbmUgc2Vjb25kIGFuZCBkcmF3IHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhpcy5kZWNJbmRleFRpbWUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1NQVi5kcmF3KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjYnJ1c2hpbmctYnV0dG9uJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIHRoZSBicnVzaFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmJydXNoJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIC8vYWRkIHRoZSBicnVzaFxyXG4gICAgICAgICAgICAgIGQzLnNlbGVjdCgnI21haW4tdmlzLXN2ZycpXHJcbiAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnYnJ1c2gnKVxyXG4gICAgICAgICAgICAgICAgICAuY2FsbCh0aGlzLmJydXNoKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgLy8gcmVtb3ZlIHRoZSBicnVzaFxyXG4gICAgICAgICAgICAgICQoJy5icnVzaCcpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBVbnNlbGVjdCBhbGwgYnV0dG9uXHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjcmVtb3ZlLWFjdGl2ZS1zZWxlY3RlZC1idXR0b24nKS5jbGljaygoKT0+e1xyXG4gICAgICAgICAgaWYgKCEkKCcjcmVtb3ZlLWFjdGl2ZS1zZWxlY3RlZC1idXR0b24nKS5pcygnOmRpc2FibGVkJykpIHtcclxuICAgICAgICAgICAgICAkKCcjcmVtb3ZlLWFjdGl2ZS1zZWxlY3RlZC1idXR0b24nKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlQW5pbWFscyhbXSk7XHJcbiAgICAgICAgICAgICAgLy8gdHJhY2tpbmcgb2YgZGF0YSBmb3IgdmlzdWFsIHBhcmFtZXRlciBzdWdnZXN0aW9uXHJcbiAgICAgICAgICAgICAgcmVzZXRUcmFja2VkRGF0YSgpO1xyXG4gICAgICAgICAgICAgICQoJyN2aXN1YWwtcGFyYW1ldGVyLWJ1dHRvbicpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cclxuICAgICAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgICAgICAvL3RoaXMgYXBwbHlzIHRoZSBjaGFuZ2VzXHJcblxyXG4gICAgICAgICAgICAgICAgICB0aGlzLmRlY0luZGV4VGltZSgpO1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLmRyYXcoKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFRyYWNrIHZpc3VhbCBwYXJhbWV0ZXIgYnV0dG9uXHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjdmlzdWFsLXBhcmFtZXRlci1idXR0b24nKS5jbGljaygoKT0+e1xyXG4gICAgICAgICAgaWYgKCQoJyN2aXN1YWwtcGFyYW1ldGVyLWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgIHNldFRyYWNraW5nQm9vbGVhbihmYWxzZSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHNldFRyYWNraW5nQm9vbGVhbih0cnVlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogU2VuZCB0aGUgdHJhY2tlZCB2aWEgYSBhamF4IHF1ZXJ5IHRvIHRoZSBzZXJ2ZXIgdG8gY2FsY3VsYXRlIHRoZSBwYXJhbWV0ZXJzXHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjY2FsY3VsYXRlLXBhcmFtZXRlci1idXR0b24nKS5jbGljaygoKT0+e1xyXG4gICAgICAgICAgaWYgKCEkKCcjY2FsY3VsYXRlLXBhcmFtZXRlci1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICBzZXRUcmFja2luZ0Jvb2xlYW4oZmFsc2UpO1xyXG4gICAgICAgICAgICAgIHNlbmRUcmFja2VkRGF0YSgpO1xyXG5cclxuICAgICAgICAgICAgICAvLyBkaXNhYmxlIGJvdGggYnV0dG9ucyBhbmQgcmVtb3ZlIHRoZSBhY3RpdmUgb25lXHJcbiAgICAgICAgICAgICAgJCgnI2NhbGN1bGF0ZS1wYXJhbWV0ZXItYnV0dG9uJykucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICAgICAgICAgICAkKCcjY2FsY3VsYXRlLXBhcmFtZXRlci1idXR0b24nKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgJCgnI3Zpc3VhbC1wYXJhbWV0ZXItYnV0dG9uJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBTcGF0aWFsIHZpZXcgYmFja2dyb3VuZCBjb2xvclxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2JhY2tncm91bmQtY29sb3InKS5jaGFuZ2UoKCk9PntcclxuICAgICAgICAgIGxldCBjb2xvciA9ICQoJ2lucHV0W3R5cGU9XCJyYWRpb1wiXS5ncm91cC1iYWNrZ3JvdW5kOmNoZWNrZWQnKS52YWwoKTtcclxuICAgICAgICAgICQoJyNtYWluLXZpcy1zdmcnKS5jc3MoJ2JhY2tncm91bmQtY29sb3InLCBjb2xvcik7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFNob3cgdGhlIHNwYXRpYWwgdmlldyBheGlzIGJ1dHRvblxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2RyYXctYXhpcycpLm9uKCdjaGFuZ2UnLCAoKT0+IHtcclxuICAgICAgICAgIGlmICh0aGlzLmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAkKCcjbWFpbi12aXMgZy54LmF4aXMnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgJCgnI21haW4tdmlzIGcueS5heGlzJykuc2hvdygpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAkKCcjbWFpbi12aXMgZy54LmF4aXMnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgJCgnI21haW4tdmlzIGcueS5heGlzJykuaGlkZSgpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogU2hvdyB0aGUgZnJhbWUgKHRpbWUpIG51bWJlciBpbiB0aGUgc3BhdGlhbCB2aWV3IGJ1dHRvblxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2RyYXctdGltZScpLm9uKCdjaGFuZ2UnLCAoKT0+e1xyXG4gICAgICAgICAgaWYgKHRoaXMuY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICQoJyNtYWluLXZpcyAuZnJhbWUtdGV4dCcpLnNob3coKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgJCgnI21haW4tdmlzIC5mcmFtZS10ZXh0JykuaGlkZSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBEcmF3IHRoZSBuZXR3b3JrIGJhY2tncm91bmQgY29sb3JcclxuICAgICAgICovXHJcbiAgICAgICQoJyNuZXR3b3JrLWJhY2tncm91bmQnKS5vbignY2hhbmdlJywgKCk9PiB7XHJcbiAgICAgICAgICBpZiAodGhpcy5jaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgc2V0TmV0d29ya0JhY2tncm91bmQodHJ1ZSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHNldE5ldHdvcmtCYWNrZ3JvdW5kKGZhbHNlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogU2V0IHRoZSBuZXR3b3JrIGJhY2tncm91bmQgZWRnZSBsaW1pdFxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI25ldHdvcmstYmFja2dyb3VuZC1saW1pdCcpLnZhbCgxKTtcclxuICAgICAgJCgnI25ldHdvcmstYmFja2dyb3VuZC1saW1pdCcpLm9uKCdjaGFuZ2UnLCAoKT0+e1xyXG4gICAgICAgICAgbGV0IHZhbCA9ICQodGhpcykudmFsKCk7XHJcbiAgICAgICAgICBpZiAoJC5pc051bWVyaWModmFsKSAmJiB2YWwgPiAwKSB7XHJcbiAgICAgICAgICAgICAgc2V0TmV0d29ya0JhY2tncm91bmRMaW1pdCh2YWwpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAkKHRoaXMpLnZhbCgxKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQ29sb3IgU2NhbGUgRnVuY3Rpb24gUmFkaW8gYnV0dG9uc1xyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2NvbG9yLXNjYWxlLXJhZGlvLWZvcm0gaW5wdXQnKS5vbignY2hhbmdlJywgKCk9PntcclxuICAgICAgICAgIHRoaXMuY29sb3JTY2FsZVsndHlwZSddID0gJCgnaW5wdXRbbmFtZT1jb2xvci1zY2FsZS1yYWRpb106Y2hlY2tlZCcsICcjY29sb3Itc2NhbGUtcmFkaW8tZm9ybScpLnZhbCgpO1xyXG4gICAgICAgICAgaWYgKCEkKCcjcGxheS1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuICAgICAgICAgICAgICB0aGlzLmRlY0luZGV4VGltZSgpO1xyXG4gICAgICAgICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICB9XHJcbiAgc2ZfbGlzdGVuZXJzKCkge1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIERyYXcgZGlyZWN0aW9uIGFycm93IG9mIHRoZSBhbmltYWxcclxuICAgICAgICovXHJcbiAgICAgICQoJyNkcmF3LWRpcmVjdGlvbicpLmNsaWNrKCgpPT57XHJcbiAgICAgICAgICBpZiAoJCgnI2RyYXctZGlyZWN0aW9uJykuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICBpZiAoISgnZGlyZWN0aW9uJyBpbiBkYXRhc2V0WzBdKSkge1xyXG4gICAgICAgICAgICAgICAgICBkaXNhYmxlUGxheUJ1dHRvbigpO1xyXG4gICAgICAgICAgICAgICAgICAvLyBhamF4IHF1ZXJ5IHRvIGdldCBkaXJlY3Rpb24gZGF0YVxyXG4gICAgICAgICAgICAgICAgICBnZXREYXRhc2V0RmVhdHVyZSgnZGlyZWN0aW9uJyk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICQoJy5hcnJvdycpLnNob3coKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgJCgnLmFycm93JykuaGlkZSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKCEkKCcjcGxheS1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuICAgICAgICAgICAgICB0aGlzLmRlY0luZGV4VGltZSgpO1xyXG4gICAgICAgICAgICAgIC8vdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIERyYXcgbWVkb2lkIGluIGNvbG9yIGJ1dHRvblxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2RyYXctbWVkb2lkJykuY2xpY2soKCkgPT4ge1xyXG4gICAgICAgICAgaWYgKCQoJyNkcmF3LW1lZG9pZCcpLmlzKCc6Y2hlY2tlZCcpKSB7XHJcblxyXG4gICAgICAgICAgICAgIGlmICghKCdtZWRvaWQnIGluIHN3YXJtRGF0YVswXSkpIHtcclxuICAgICAgICAgICAgICAgICAgZ2V0U3dhcm1EYXRhc2V0RmVhdHVyZSgnbWVkb2lkJyk7XHJcblxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB0aGlzLnNldE1lZG9pZEFuaW1hbChzd2FybURhdGFbdGhpcy5pbmRleFRpbWVdWydtZWRvaWQnXSk7XHJcbiAgICAgICAgICAgICAgLy8gZGlzcGxheSB0aGUgbWVkb2lkXHJcbiAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCcjYW5pbWFsLScgKyB0aGlzLm1lZG9pZEFuaW1hbClcclxuICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ21lZG9pZCcsIHRydWUpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAvLyBkbyBub3QgZGlzcGxheSB0aGUgbWVkb2lkIGZpc2hcclxuICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoJyNhbmltYWwtJyArIHRoaXMubWVkb2lkQW5pbWFsKVxyXG4gICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnbWVkb2lkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgIHRoaXMuc2V0TWVkb2lkQW5pbWFsKC0xKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogRHJhdyBjZW50cm9pZCBidXR0b25cclxuICAgICAgICovXHJcbiAgICAgICQoJyNkcmF3LWNlbnRyb2lkJykuY2xpY2soKCk9PntcclxuICAgICAgICAgIGlmICgkKCcjZHJhdy1jZW50cm9pZCcpLmlzKCc6Y2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICAgaWYgKCEoJ2NlbnRyb2lkJyBpbiBzd2FybURhdGFbMF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgIGdldFN3YXJtRGF0YXNldEZlYXR1cmUoJ2NlbnRyb2lkJyk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIC8vIGRpc3BsYXkgdGhlIGNlbnRyb2lkXHJcbiAgICAgICAgICAgICAgJCgnI2ctY2VudHJvaWQnKS5zaG93KCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIC8vIGhpZGUgdGhlIGNlbnRyb2lkXHJcbiAgICAgICAgICAgICAgJCgnI2ctY2VudHJvaWQnKS5oaWRlKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBEcmF3IGNvbnZleCBodWxsIGluIGNvbG9yIGJ1dHRvblxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2RyYXctY29udmV4LWh1bGwnKS5jbGljaygoKT0+e1xyXG4gICAgICAgICAgaWYgKCQoJyNkcmF3LWNvbnZleC1odWxsJykuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICBpZiAoISgnaHVsbCcgaW4gc3dhcm1EYXRhWzBdKSkge1xyXG4gICAgICAgICAgICAgICAgICBnZXRTd2FybURhdGFzZXRGZWF0dXJlKCdjb252ZXhfaHVsbCcpO1xyXG5cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBEcmF3IHRyaWFuZ3VsYXRpb25cclxuICAgICAgICovXHJcbiAgICAgICQoJyNkcmF3LXRyaWFuZ3VsYXRpb24nKS5jbGljaygoKT0+e1xyXG4gICAgICAgICAgaWYgKCQoJyNkcmF3LXRyaWFuZ3VsYXRpb24nKS5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgIGlmICghKCd0cmlhbmd1bGF0aW9uJyBpbiBzd2FybURhdGFbMF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2VyZScpO1xyXG4gICAgICAgICAgICAgICAgICBnZXRTd2FybURhdGFzZXRGZWF0dXJlKCd0cmlhbmd1bGF0aW9uJyk7XHJcbiAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coc3dhcm1EYXRhW3RoaXMuaW5kZXhUaW1lXVsndHJpYW5ndWxhdGlvbiddKTtcclxuXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGlmICghJCgnI3BsYXktYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgIC8vZ28gYmFjayBvbmUgc2Vjb25kIGFuZCBkcmF3IHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAgICAgICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuICAgICAgICAgICAgICAgICAgdGhpcy5kZWNJbmRleFRpbWUoKTtcclxuICAgICAgICAgICAgICAgICAgLy90aGlzLmRyYXcoKTtcclxuXHJcblxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIERyYXcgdm9yb25vaVxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2RyYXctdm9yb25vaScpLmNsaWNrKCgpPT57XHJcbiAgICAgICAgICBpZiAoJCgnI2RyYXctdm9yb25vaScpLmlzKCc6Y2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICAgaWYgKCEoJ3Zvcm9ub2knIGluIHN3YXJtRGF0YVswXSkpIHtcclxuICAgICAgICAgICAgICAgICAgZ2V0U3dhcm1EYXRhc2V0RmVhdHVyZSgndm9yb25vaScpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgICAgICAvL3RoaXMgYXBwbHlzIHRoZSBjaGFuZ2VzXHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgICAgICAgICAgIC8vdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG5cclxuICB9XHJcbiAgYWZfbGlzdGVuZXJzKCkge1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIERyYXcgU3BlZWQgYnV0dG9uXHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjZHJhdy1zcGVlZCcpLmNsaWNrKCgpPT57XHJcbiAgICAgICAgICAkKCcuZHJhdy1kZXRhaWxzJykuaGlkZSgpXHJcbiAgICAgICAgICAgICAgLmZpbmQoJ2lucHV0OmNoZWNrYm94JykucHJvcCgnY2hlY2tlZCcsIHRydWUpLmNsaWNrKCk7XHJcbiAgICAgICAgICBpZiAoJCgnI2RyYXctc3BlZWQnKS5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgIC8vIGxvYWQgYWJzb2x1dGUgZmVhdHVyZSBzcGVlZCBkYXRhIG9uY2VcclxuICAgICAgICAgICAgICBpZiAoISgnc3BlZWQnIGluIGRhdGFzZXRbMF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgIGRpc2FibGVQbGF5QnV0dG9uKCk7XHJcbiAgICAgICAgICAgICAgICAgIC8vIGFqYXggcXVlcnkgdG8gZ2V0IHRoZSBhYnNvbHV0ZSBmZWF0dXJlIHNwZWVkXHJcbiAgICAgICAgICAgICAgICAgIGdldERhdGFzZXRGZWF0dXJlKCdzcGVlZCcpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAvLyAkKCcuZHJhdy1kZXRhaWxzJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICQoJyNkcmF3LXNwZWVkLWRldGFpbHMnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgJCgnI2RyYXctYWNjZWxlcmF0aW9uJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAkKCcjZHJhdy1kaXN0YW5jZV9jZW50cm9pZCcpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgJCgnI2RyYXctbWlkbGluZV9vZmZzZXQnKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlU2NhbGUoJ3NwZWVkJyk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICQoJyNkcmF3LXNwZWVkLWRldGFpbHMnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVTY2FsZSgnYmxhY2snKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC8vY2hhbmdlIGNvbG9yIGxlZ2VuZFxyXG4gICAgICAgICAgZDMuc2VsZWN0QWxsKCcuY29sb3JMZWdlbmQgKicpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgdGhpcy5jaGFuZ2VsZWdlbmQoKTtcclxuXHJcbiAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgIC8vZ28gYmFjayBvbmUgc2Vjb25kIGFuZCBkcmF3IHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgIHRoaXMuZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgICAgICAgLy90aGlzLmRyYXcoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogRHJhdyBhY2NlbGVyYXRpb24gYnV0dG9uXHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjZHJhdy1hY2NlbGVyYXRpb24nKS5jbGljaygoKT0+e1xyXG4gICAgICAgICAgJCgnLmRyYXctZGV0YWlscycpLmhpZGUoKVxyXG4gICAgICAgICAgICAgIC5maW5kKCdpbnB1dDpjaGVja2JveCcpLnByb3AoJ2NoZWNrZWQnLCB0cnVlKS5jbGljaygpO1xyXG4gICAgICAgICAgaWYgKCQoJyNkcmF3LWFjY2VsZXJhdGlvbicpLmlzKCc6Y2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICAgLy8gbG9hZCBhYnNvbHV0ZSBmZWF0dXJlIGFjY2VsZXJhdGlvbiBkYXRhIG9uY2VcclxuICAgICAgICAgICAgICBpZiAoISgnYWNjZWxlcmF0aW9uJyBpbiBkYXRhc2V0WzBdKSkge1xyXG4gICAgICAgICAgICAgICAgICBkaXNhYmxlUGxheUJ1dHRvbigpO1xyXG4gICAgICAgICAgICAgICAgICAvLyBhamF4IHF1ZXJ5IHRvIGdldCB0aGUgYWJzb2x1dGUgZmVhdHVyZSBhY2NlbGVyYXRpb25cclxuICAgICAgICAgICAgICAgICAgZ2V0RGF0YXNldEZlYXR1cmUoJ2FjY2VsZXJhdGlvbicpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAkKCcjZHJhdy1hY2NlbGVyYXRpb24tZGV0YWlscycpLnNob3coKTtcclxuICAgICAgICAgICAgICAkKCcjZHJhdy1zcGVlZCcpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgJCgnI2RyYXctZGlzdGFuY2VfY2VudHJvaWQnKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICQoJyNkcmF3LW1pZGxpbmVfb2Zmc2V0JykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICB0aGlzLnNldEFjdGl2ZVNjYWxlKCdhY2NlbGVyYXRpb24nKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgJCgnI2RyYXctYWNjZWxlcmF0aW9uLWRldGFpbHMnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVTY2FsZSgnYmxhY2snKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgICQoJy5kcmF3LWRldGFpbHMuYWN0aXZlJykuY2xpY2soKTtcclxuICAgICAgICAgIC8vY2hhbmdlIGNvbG9yIGxlZ2VuZFxyXG4gICAgICAgICAgZDMuc2VsZWN0QWxsKCcuY29sb3JMZWdlbmQgKicpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgdGhpcy5jaGFuZ2VsZWdlbmQoKTtcclxuXHJcbiAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgIC8vZ28gYmFjayBvbmUgc2Vjb25kIGFuZCBkcmF3IHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgIHRoaXMuZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgICAgICAgLy90aGlzLmRyYXcoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogRHJhdyBkaXN0YW5jZSB0byBjZW50cm9pZCBidXR0b25cclxuICAgICAgICovXHJcbiAgICAgICQoJyNkcmF3LWRpc3RhbmNlX2NlbnRyb2lkJykuY2xpY2soKCk9PntcclxuICAgICAgICAgICQoJy5kcmF3LWRldGFpbHMnKS5oaWRlKClcclxuICAgICAgICAgICAgICAuZmluZCgnaW5wdXQ6Y2hlY2tib3gnKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSkuY2xpY2soKTtcclxuICAgICAgICAgIGlmICgkKCcjZHJhdy1kaXN0YW5jZV9jZW50cm9pZCcpLmlzKCc6Y2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICAgLy8gbG9hZCBhYnNvbHV0ZSBmZWF0dXJlIGRpc3RhbmNlX2NlbnRyb2lkIGRhdGEgb25jZVxyXG4gICAgICAgICAgICAgIGlmICghKCdkaXN0YW5jZV9jZW50cm9pZCcgaW4gZGF0YXNldFswXSkpIHtcclxuICAgICAgICAgICAgICAgICAgZGlzYWJsZVBsYXlCdXR0b24oKTtcclxuICAgICAgICAgICAgICAgICAgLy8gYWpheCBxdWVyeSB0byBnZXQgdGhlIGFic29sdXRlIGZlYXR1cmUgZGlzdGFuY2VfY2VudHJvaWRcclxuICAgICAgICAgICAgICAgICAgZ2V0RGF0YXNldEZlYXR1cmUoJ2Rpc3RhbmNlX2NlbnRyb2lkJyk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICQoJyNkcmF3LWRpc3RhbmNlX2NlbnRyb2lkLWRldGFpbHMnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgJCgnI2RyYXctc3BlZWQnKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICQoJyNkcmF3LWFjY2VsZXJhdGlvbicpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgJCgnI2RyYXctbWlkbGluZV9vZmZzZXQnKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlU2NhbGUoJ2Rpc3RhbmNlX2NlbnRyb2lkJyk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICQoJyNkcmF3LWRpc3RhbmNlX2NlbnRyb2lkLWRldGFpbHMnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVTY2FsZSgnYmxhY2snKTtcclxuXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAkKCcuZHJhdy1kZXRhaWxzLmFjdGl2ZScpLmNsaWNrKCk7XHJcblxyXG4gICAgICAgICAgLy9jaGFuZ2UgY29sb3IgbGVnZW5kXHJcbiAgICAgICAgICBkMy5zZWxlY3RBbGwoJy5jb2xvckxlZ2VuZCAqJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICB0aGlzLmNoYW5nZWxlZ2VuZCgpO1xyXG5cclxuICAgICAgICAgIGlmICghJCgnI3BsYXktYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgLy9nbyBiYWNrIG9uZSBzZWNvbmQgYW5kIGRyYXcgdGhlIG5leHQgZnJhbWVcclxuICAgICAgICAgICAgICAvL3RoaXMgYXBwbHlzIHRoZSBjaGFuZ2VzXHJcbiAgICAgICAgICAgICAgdGhpcy5kZWNJbmRleFRpbWUoKTtcclxuICAgICAgICAgICAgICAvL3RoaXMuZHJhdygpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBEcmF3IG1pZGxpbmUgb2Zmc2V0XHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjZHJhdy1taWRsaW5lX29mZnNldCcpLmNsaWNrKCgpPT57XHJcbiAgICAgICAgICAkKCcuZHJhdy1kZXRhaWxzJykuaGlkZSgpXHJcbiAgICAgICAgICAgICAgLmZpbmQoJ2lucHV0OmNoZWNrYm94JykucHJvcCgnY2hlY2tlZCcsIHRydWUpLmNsaWNrKCk7XHJcbiAgICAgICAgICBpZiAoJCgnI2RyYXctbWlkbGluZV9vZmZzZXQnKS5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgIC8vIGxvYWQgYWJzb2x1dGUgZmVhdHVyZSBkcmF3LW1pZGxpbmVfb2Zmc2V0IGRhdGEgb25jZVxyXG4gICAgICAgICAgICAgIGlmICghKCdkcmF3LW1pZGxpbmVfb2Zmc2V0JyBpbiBkYXRhc2V0WzBdKSkge1xyXG4gICAgICAgICAgICAgICAgICBkaXNhYmxlUGxheUJ1dHRvbigpO1xyXG4gICAgICAgICAgICAgICAgICAvLyBhamF4IHF1ZXJ5IHRvIGdldCB0aGUgYWJzb2x1dGUgZmVhdHVyZSBtaWRsaW5lX29mZnNldFxyXG4gICAgICAgICAgICAgICAgICBnZXREYXRhc2V0RmVhdHVyZSgnbWlkbGluZV9vZmZzZXQnKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgJCgnI2RyYXctbWlkbGluZV9vZmZzZXQtZGV0YWlscycpLnNob3coKTtcclxuICAgICAgICAgICAgICAkKCcjZHJhdy1zcGVlZCcpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgJCgnI2RyYXctYWNjZWxlcmF0aW9uJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAkKCcjZHJhdy1kaXN0YW5jZV9jZW50cm9pZCcpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgc2V0QWN0aXZlU2NhbGUoJ21pZGxpbmVfb2Zmc2V0Jyk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHNldEFjdGl2ZVNjYWxlKCdibGFjaycpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgJCgnLmRyYXctZGV0YWlscy5hY3RpdmUnKS5jbGljaygpO1xyXG4gICAgICAgICAgLy9jaGFuZ2UgY29sb3IgbGVnZW5kXHJcbiAgICAgICAgICBkMy5zZWxlY3RBbGwoJy5jb2xvckxlZ2VuZCAqJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICB0aGlzLmNoYW5nZWxlZ2VuZCgpO1xyXG5cclxuICAgICAgICAgIGlmICghJCgnI3BsYXktYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgLy9nbyBiYWNrIG9uZSBzZWNvbmQgYW5kIGRyYXcgdGhlIG5leHQgZnJhbWVcclxuICAgICAgICAgICAgICAvL3RoaXMgYXBwbHlzIHRoZSBjaGFuZ2VzXHJcbiAgICAgICAgICAgICAgdGhpcy5kZWNJbmRleFRpbWUoKTtcclxuICAgICAgICAgICAgICB0aGlzLmRyYXcoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gIH1cclxuICBtZF9saXN0ZW5lcnMoKSB7XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBNZXRhZGF0YSBzd2F0Y2ggZnVuY3Rpb25zIGNvbG9yaW5nIGluZGl2aWR1YWwgYW5pbWFsc1xyXG4gICAgICAgKi9cclxuICAgICAgJCgnLm1ldGFkYXRhLXN3YXRjaC5tZXRhZGF0YS1zd2F0Y2gtY2xpY2thYmxlJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBsZXQgaWQgPSAkKHRoaXMpLmF0dHIoJ3ZhbHVlJyk7XHJcbiAgICAgICAgICBsZXQgY29sb3JSR0IgPSAkKHRoaXMpLmNzcygnYmFja2dyb3VuZC1jb2xvcicpO1xyXG4gICAgICAgICAgLy8gc2V0IHRoZSBjb2xvciBvZiB0aGUgc3dhdGNoIHByZXZpZXdcclxuICAgICAgICAgICQoJyNtZXRhZGF0YS1yb3ctJyArIGlkICsgJyAjcHJldmlldycpXHJcbiAgICAgICAgICAgICAgLmNzcygnYmFja2dyb3VuZC1jb2xvcicsIGNvbG9yUkdCKTtcclxuICAgICAgICAgIC8vIGlmIHdoaXRlIHRoYW4gcmVzZXQgdGhlIGNvbG9yXHJcbiAgICAgICAgICBpZiAoY29sb3JSR0IgPT09ICdyZ2IoMjU1LCAyNTUsIDI1NSknKSB7XHJcbiAgICAgICAgICAgICAgaWYgKG1ldGFkYXRhQ29sb3JbaWRdKSB7XHJcbiAgICAgICAgICAgICAgICAgIGRlbGV0ZSBtZXRhZGF0YUNvbG9yW2lkXTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIG1ldGFkYXRhQ29sb3JbaWRdID0gY29sb3JSR0I7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIE1ldGFkYXRhIGdyb3VwIG1ldGFkYXRhIGZ1bmN0aW9ucyBmb3IgaW5zdGFuY2UgY29sb3Igc2V4XHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjZ3JvdXAtbWV0YWRhdGEgOmlucHV0JykuY2hhbmdlKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgLy8gcmVzZXQgdGhlIG1ldGFkYXQgYWNvbG9yaW5nXHJcbiAgICAgICAgICByZXNldEluZGl2aWR1YWxNZXRhZGF0YSgpO1xyXG5cclxuICAgICAgICAgIGxldCB2YWx1ZSA9ICQodGhpcykuYXR0cigndmFsdWUnKTtcclxuICAgICAgICAgIGxldCB0bXAgPSBbXTtcclxuXHJcbiAgICAgICAgICAvLyBtZXRhZGF0YSBzZXggaXMgY2hvb3NlbiAtIGNvbG9yaW5nIGJhc2VkIG9uIG0gYW5kIGZcclxuICAgICAgICAgIGlmICh2YWx1ZSA9PT0gJ3NleCcpIHtcclxuICAgICAgICAgICAgICAkKCcjbWV0YWRhdGEtZGl2JykubW9kYWwoJ3RvZ2dsZScpO1xyXG4gICAgICAgICAgICAgIC8vIGNsb3NlIGFuZCBjb2xvciBoZXJlXHJcbiAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhc2V0TWV0YWRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgdG1wLnB1c2goZGF0YXNldE1ldGFkYXRhW2ldW3ZhbHVlXS50b0xvd2VyQ2FzZSgpKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgLy8gY3JlYXRlIGEgc2V0IG9mIGluZGl2aWR1YWwgc3RyaW5ncyBpbiBzZXhcclxuICAgICAgICAgICAgICB0bXAgPSBBcnJheS5mcm9tKG5ldyBTZXQodG1wKSk7XHJcbiAgICAgICAgICAgICAgbGV0IGNvbG9ycyA9IFsnIzdmYzk3ZicsICcjMzg2Y2IwJ107XHJcblxyXG4gICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YXNldE1ldGFkYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdG1wLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YXNldE1ldGFkYXRhW2ldW3ZhbHVlXS50b0xvd2VyQ2FzZSgpID09PSB0bXBbal0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGQgdGhlIGNvbG9yaW5nIHRvIHRoZSBtZXRhZGF0YWNvbG9yIG9iamVjdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhQ29sb3JbZGF0YXNldE1ldGFkYXRhW2ldWydhbmltYWxfaWQnXV0gPSBjb2xvcnNbal07XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgJCgnI21ldGFkYXRhLWlucHV0JykuaGlkZSgpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAkKCcjbWV0YWRhdGEtaW5wdXQnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgLy8gc2V0IHZhbHVlcyBvZiBpbnB1dHNcclxuICAgICAgICAgICAgICAvLyBoZXJlIGFyZSBhdXRvbWF0aWNhbGx5IGlucHV0IHZhbHVlcyBjYWxjdWxhdGVkXHJcbiAgICAgICAgICAgICAgLy8gLjI1IGFuZCAuNzUgcGVyY2VudGlsZXMgYXJlIHVzZWRcclxuICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGFzZXRNZXRhZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICB0bXAucHVzaChkYXRhc2V0TWV0YWRhdGFbaV1bdmFsdWVdKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgbGV0IGJsQXZnID0gZDMucXVhbnRpbGUodG1wLCAwLjI1KTsgLy8gYmVsb3cgYXZlcmFnZSB2YWx1ZVxyXG4gICAgICAgICAgICAgIGxldCBhYkF2ZyA9IGQzLnF1YW50aWxlKHRtcCwgMC43NSk7IC8vIGFib3ZlIGF2ZXJhZ2VcclxuICAgICAgICAgICAgICAkKCcjYmwtYXZnJykudmFsKGJsQXZnKTtcclxuICAgICAgICAgICAgICAkKCcjYWItYXZnJykudmFsKGFiQXZnKTtcclxuICAgICAgICAgICAgICAvLyBjb2xvciB0aGUgYW5pbWFsc1xyXG4gICAgICAgICAgICAgIGNvbG9yTWV0YWRhdGEoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogTWV0YWRhdGEgZ3JvdXAgbWV0YWRhdGEgaW5wdXQgc3Bpbm5lclxyXG4gICAgICAgKiArLy0gMC4xIHRvIHRoZSBpbnB1dCB2YWx1ZVxyXG4gICAgICAgKi9cclxuICAgICAgJCgnLm51bWJlci1zcGlubmVyIGJ1dHRvbicpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgbGV0IGJ0biA9ICQodGhpcyksXHJcbiAgICAgICAgICAgICAgb2xkVmFsdWUgPSBidG4uY2xvc2VzdCgnLm51bWJlci1zcGlubmVyJykuZmluZCgnaW5wdXQnKS52YWwoKS50cmltKCksXHJcbiAgICAgICAgICAgICAgbmV3VmFsID0gMDtcclxuXHJcbiAgICAgICAgICBpZiAoYnRuLmF0dHIoJ2RhdGEtZGlyJykgPT0gJ3VwJykge1xyXG4gICAgICAgICAgICAgIG5ld1ZhbCA9IHBhcnNlRmxvYXQob2xkVmFsdWUpICsgMC4xO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBpZiAob2xkVmFsdWUgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgIG5ld1ZhbCA9IHBhcnNlRmxvYXQob2xkVmFsdWUpIC0gMC4xO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgIG5ld1ZhbCA9IDA7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgbmV3VmFsID0gTWF0aC5yb3VuZChuZXdWYWwgKiAxMDApIC8gMTAwOyAtXHJcbiAgICAgICAgICBidG4uY2xvc2VzdCgnLm51bWJlci1zcGlubmVyJykuZmluZCgnaW5wdXQnKS52YWwobmV3VmFsKTtcclxuICAgICAgICAgIC8vIGNoYW5nZSB0aGUgY29sb3JpbmdcclxuICAgICAgICAgIGNvbG9yTWV0YWRhdGEoKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogTWV0YWRhdGEgaW5wdXQgZmllbGRzIGNoYW5nZVxyXG4gICAgICAgKi9cclxuICAgICAgJCgnLm51bWJlci1zcGlubmVyIGlucHV0Jykub24oJ2lucHV0JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBjb2xvck1ldGFkYXRhKCk7XHJcbiAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBSZXNldCBhbGwgbWV0YWRhdGEgaW5wdXQgcGFyYW1ldGVyc1xyXG4gICAgICAgKi9cclxuICAgICAgJCgnI21ldGFkYXRhLXJlc2V0JykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAkKCcjbWV0YWRhdGEtaW5wdXQnKS5oaWRlKCk7XHJcbiAgICAgICAgICByZXNldEluZGl2aWR1YWxNZXRhZGF0YSgpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgfVxyXG4gIGluaXRTaG93RGVuZHJvZ3JhbUxpc3RlbmVyKGlkKSB7XHJcblxyXG4gICAgICAkKCcjc2hvdy1kZW5kcm9ncmFtLScgKyBpZCkuY2xpY2soZnVuY3Rpb24oKXtcclxuICAgICAgICAgIGxldCBjbGlja2VkQnV0dG9uSUQgPSAkKHRoaXMpLmF0dHIoJ2lkJyk7XHJcbiAgICAgICAgICAvLyBpdGVyYXRlIG92ZXIgYWxsIGJ1dHRvbnMgYW5kIGN1c3RvbSBoaWdobGlnaHQganVzdCBvbmUgb3Igbm9uZVxyXG4gICAgICAgICAgJCgnLnNob3ctZGVuZHJvZ3JhbScpLmVhY2goZnVuY3Rpb24oaSwgYnV0dG9uKXtcclxuICAgICAgICAgICAgICAvLyBhY3RpdmUgZm91bmQgYnV0dG9uXHJcbiAgICAgICAgICAgICAgaWYgKCQoYnV0dG9uKS5hdHRyKCdpZCcpID09PSBjbGlja2VkQnV0dG9uSUQgJiYgJChidXR0b24pLmhhc0NsYXNzKCdidG4tcHJpbWFyeScpID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAkKGJ1dHRvbikuYWRkQ2xhc3MoJ2J0bi1wcmltYXJ5Jyk7XHJcbiAgICAgICAgICAgICAgICAgICQoYnV0dG9uKS5maW5kKCcjYnRuLWxlZnQnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICQoYnV0dG9uKS5maW5kKCcjYnRuLXJpZ2h0Jykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAvLyBUT0RPIGFkZCBoZXJlIGEgcmVzaXplIG9mIHRoZSBtYWluIHZpc1xyXG4gICAgICAgICAgICAgICAgICAvLyAkKCcjZGVuZHJvZ3JhbS1wYW5lbCcpLmluc2VydEFmdGVyKCQodGhpcykpO1xyXG4gICAgICAgICAgICAgIH0gLy8gcmVtb3ZlIGhpZ2hsaWdodFxyXG4gICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAkKGJ1dHRvbikucmVtb3ZlQ2xhc3MoJ2J0bi1wcmltYXJ5Jyk7XHJcbiAgICAgICAgICAgICAgICAgICQoYnV0dG9uKS5maW5kKCcjYnRuLWxlZnQnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICQoYnV0dG9uKS5maW5kKCcjYnRuLXJpZ2h0JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIC8vIHNob3cgZGVuZHJvZ3JhbVxyXG4gICAgICAgICAgaWYgKCQoJy5zaG93LWRlbmRyb2dyYW0uYnRuLXByaW1hcnknKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAkKCcjZGVuZHJvZ3JhbS1wYW5lbCcpLnNob3coKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgJCgnI2RlbmRyb2dyYW0tcGFuZWwnKS5oaWRlKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgIC8vZ28gYmFjayBvbmUgc2Vjb25kIGFuZCBkcmF3IHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgIHRoaXMuZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgICAgICAgdGhpcy5kcmF3RGVuZHJvZ3JhbSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICB9XHJcbiAgaF9saXN0ZW5lcnMoKSB7XHJcbiAgICAgIHZhciBjaGVja2JveDtcclxuXHJcbiAgICAgIC8vIFN0b3JlIGdpdmVuIGNoZWNrYm94IGluIHZhcmlhYmxlXHJcbiAgICAgICQoJy5oaWVhcmNoeS1jaGVja2JveCcpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGNoZWNrYm94ID0gJCh0aGlzKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgIC8vIFVzZSBjaGVja2JveCB0byBkcmF3IGRlbmRyb2dyYW1cclxuICAgICAgJCgnLmhpZWFyY2h5LWNoZWNrYm94Jykub24oJ2NoYW5nZScsICgpPT57XHJcblxyXG4gICAgICAgICAgbGV0IGlkID0gY2hlY2tib3guYXR0cignZGF0YScpO1xyXG4gICAgICAgICAgbGV0IG5hbWUgPSBjaGVja2JveC5hdHRyKCduYW1lJyk7XHJcbiAgICAgICAgICBsZXQgY2hlY2tlZCA9IGNoZWNrYm94LnByb3AoJ2NoZWNrZWQnKTtcclxuXHJcbiAgICAgICAgICBpZiAoY2hlY2tlZCAmJiAkKCcuc2hvdy1kZW5kcm9ncmFtJykubGVuZ3RoIDwgbWF4TnVtYmVySGllcmFyY2hpZXMpIHtcclxuICAgICAgICAgICAgICBkaXNhYmxlUGxheUJ1dHRvbigpO1xyXG4gICAgICAgICAgICAgIHRoaXMuZ2V0TmV0d29ya0hpZXJhcmNoeURhdGEoaWQpO1xyXG5cclxuICAgICAgICAgICAgICBhZGRIaWVyYXJjaHlCdXR0b24oaWQsIG5hbWUpO1xyXG4gICAgICAgICAgICAgIHRoaXMuaW5pdFNob3dEZW5kcm9ncmFtTGlzdGVuZXIoaWQpO1xyXG4gICAgICAgICAgICAgICQoJyNkZW5kcm9ncmFtLWJ1dHRvbnMtZGl2Jykuc2hvdygpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLy8gZWxzZSBpZiAoJCgnLnNob3ctZGVuZHJvZ3JhbScpLmxlbmd0aCA9PT0gbWF4TnVtYmVySGllcmFyY2hpZXMpIHtcclxuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdNYXggbnVtYmVyIG9mIGhpZXJhcmNoaWVzIGlzOiAnICsgbWF4TnVtYmVySGllcmFyY2hpZXMpO1xyXG4gICAgICAgICAgLy9UT0RPIGltcGxlbWVudCB0aGlzIGhlcmVcclxuICAgICAgICAgIC8vIG5vdGljZSB1c2VyIHRoYXQgaXQgaXMgbm90IHBvc3NpYmxlIHRvIHNob3cgbW9yZSB0aGFuIG4gaGllcmFyY2hpZXNcclxuICAgICAgICAgIC8vICAgICAgICAgIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XHJcbiAgICAgICAgICAvLyAgIDxzdHJvbmc+SW5mbyE8L3N0cm9uZz4gQXR0ZW50aW9uIHVzZXIgLlxyXG4gICAgICAgICAgLy8gPC9kaXY+XHJcbiAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAvLyB0bXAgdmFyaWFibGUgdG8gc2F2ZSBpZiB0aGUgYnV0dG9uIHdoaWNoIGlzIGdvaW5nIHRvIGJlIHJlbW92ZWRcclxuICAgICAgICAgICAgICAvLyB3YXMgYWN0aXZlXHJcbiAgICAgICAgICAgICAgbGV0IHRtcEFjdGl2ZSA9ICQoJyNzaG93LWRlbmRyb2dyYW0tJyArIGlkKS5oYXNDbGFzcygnYnRuLXByaW1hcnknKTtcclxuICAgICAgICAgICAgICB0aGlzLnNldEhpZXJhcmNoeURhdGEoe30sIGlkKTtcclxuXHJcbiAgICAgICAgICAgICAgcmVtb3ZlSGllcmFyY2h5QnV0dG9uKGlkKTtcclxuICAgICAgICAgICAgICAvLyBUT0RPIGZpbmQgYmV0dGVyIHdheSBoZXJlXHJcbiAgICAgICAgICAgICAgZDMuc2VsZWN0KCdnLmgnICsgaWQpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgIC8vIHJlbW92ZSB0aGUgZGVuZHJvZ3JhbSBhbmQgdGhlIHBhbmVsIGlmIHRoZSByZW1vdmVkIGVsZW1lbnQgd2FzIGNoZWNrZWRcclxuICAgICAgICAgICAgICBpZiAodG1wQWN0aXZlID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICQoJyNkZW5kcm9ncmFtLXBhbmVsJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBpZiAoJCgnLnNob3ctZGVuZHJvZ3JhbScpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAkKCcjZGVuZHJvZ3JhbS1idXR0b25zLWRpdicpLmhpZGUoKTtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLy8gcmVzaXplIHRoZSBtYWluIHN2Z1xyXG4gICAgICAgICAgaWYgKCQoJy5zaG93LWRlbmRyb2dyYW0nKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAkKCcjbWFpbi12aXMtZGl2JykucmVtb3ZlQ2xhc3MoJ2NvbC1tZC0xMicpO1xyXG4gICAgICAgICAgICAgICQoJyNtYWluLXZpcy1kaXYnKS5hZGRDbGFzcygnY29sLW1kLTgnKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgJCgnI21haW4tdmlzLWRpdicpLnJlbW92ZUNsYXNzKCdjb2wtbWQtOCcpO1xyXG4gICAgICAgICAgICAgICQoJyNtYWluLXZpcy1kaXYnKS5hZGRDbGFzcygnY29sLW1kLTEyJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFZpc3VhbGl6ZSB0aGUgbmV0d29yayBvbmx5IGluIHRoZSBjaG9vc2VuIGhpZXJhcmNoeVxyXG4gICAgICAgKi9cclxuICAgICAgJCgnLm5ldHdvcmstaGllcmFyY2h5LWNoZWNrYm94Jykub24oJ2NoYW5nZScsICgpPT57XHJcbiAgICAgICAgICAvLyBnZXQgdGhlIGluZm8gZm9yIHRoZSBjbGlja2VkIGJ1dHRvblxyXG4gICAgICAgICAgbGV0IGNoZWNrYm94ID0gJCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAvLyByZXNldCBhbGwgdGhlIG90aGVyIGFjdGl2ZSBjaGVja2JveGVzXHJcbiAgICAgICAgICAkKCcubmV0d29yay1oaWVyYXJjaHktY2hlY2tib3gnKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xyXG4gICAgICAgICAgY2hlY2tib3gucHJvcCgnY2hlY2tlZCcsIHRydWUpO1xyXG5cclxuICAgICAgICAgIGlmIChjaGVja2JveC5wcm9wKCdjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICAvLyBzZXQgdGhlIG5ldHdvcmsgaWRcclxuICAgICAgICAgICAgICBzZXROZXR3b3JrSGllcmFyY2h5KGNoZWNrYm94LmF0dHIoJ2RhdGEnKSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHNldE5ldHdvcmtIaWVyYXJjaHkodW5kZWZpbmVkKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG59XHJcbiAgbl9saXN0ZW5lcnMoKSB7XHJcbiAgICAvKipcclxuICAgICAqIE5ldHdvcmsgYnV0dG9ucyBjbGlja2VkIC0gZ2V0IHRoZSBkYXRhXHJcbiAgICAgKi9cclxuICAgIHZhciBuZXR3b3JrX2lkO1xyXG5cclxuICAgICQoJyNuZXR3b3Jrcy1tb2RhbC1ib2R5IGJ1dHRvbicpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIG5ldHdvcmtfaWQgPSAkKHRoaXMpLmF0dHIoJ2RhdGEnKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgJCgnI25ldHdvcmtzLW1vZGFsLWJvZHkgYnV0dG9uJykuY2xpY2soKCk9PntcclxuICAgICAgICAvLyBhZGQgdGhlIG5hbWUgb2YgdGhlIGNob29zZW4gbmV0d29yayB0byB0aGUgTmV0d29yayBtb2RhbFxyXG4gICAgICAgICQoJyNhY3RpdmUtbmV0d29yay1uYW1lJykudGV4dCgkKHRoaXMpLmF0dHIoJ25hbWUnKSk7XHJcblxyXG4gICAgICAgIGRpc2FibGVQbGF5QnV0dG9uKCk7XHJcbiAgICAgICAgZ2V0TmV0d29ya0RhdGEobmV0d29ya19pZCk7XHJcbiAgICAgICAgLy8gc2V0IHRoZSBjb2xvciBvZiB0aGUgbmV0d29ya1xyXG4gICAgICAgIHRoaXMuc2V0bmV0d29ya0NvbG9yKG5ldHdvcmtfaWQpO1xyXG4gICAgICAgICQoJyNuZXR3b3JrLWRpdicpLm1vZGFsKCd0b2dnbGUnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogTmV0d29yayBidXR0b25zIGNsaWNrZWQgLSBnZXQgdGhlIGRhdGFcclxuICAgICAqL1xyXG4gICAgJCgnI25ldHdvcmstcmVtb3ZlJykuY2xpY2soKCk9PntcclxuICAgICAgICBzZXROZXR3b3JrRGF0YSh7fSk7XHJcbiAgICAgICAgc2V0TmV0d29ya0lEKC0xKTtcclxuICAgICAgICAvLyByZW1vdmUgdGhlIG5ldHdvcmsgY29sb3JcclxuICAgICAgICB0aGlzLnNldG5ldHdvcmtDb2xvcigtMSk7XHJcbiAgICAgICAgJCgnI2FjdGl2ZS1uZXR3b3JrLW5hbWUnKS50ZXh0KCcnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogTmV0d29yayBhdXRvIGJ1dHRvbiBzZXQgYWNpdmUgb3IgcmVtb3ZlXHJcbiAgICAgKi9cclxuICAgICQoJyNuZXR3b3JrLWF1dG8tc3VnZ2VzdCcpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmICghJCgnI25ldHdvcmstYXV0by1zdWdnZXN0JykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICQoJyNuZXR3b3JrLWxpbWl0LXAnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICQoJyNuZXR3b3JrLXNsaWRlcicpLmhpZGUoKTtcclxuXHJcbiAgICAgICAgICAgIHNldE5ldHdvcmtBdXRvKHRydWUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQoJyNuZXR3b3JrLWxpbWl0LXAnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICQoJyNuZXR3b3JrLXNsaWRlcicpLnNob3coKTtcclxuICAgICAgICAgICAgc2V0TmV0d29ya0F1dG8oZmFsc2UpO1xyXG4gICAgICAgICAgICBsZXQgbGltaXQgPSAkKCcjbmV0d29yay1zbGlkZXInKS5zbGlkZXIoJ3ZhbHVlJyk7XHJcbiAgICAgICAgICAgIHNldE5ldHdvckxpbWl0KGxpbWl0KTtcclxuICAgICAgICAgICAgJCgnI25ldHdvcmstbGltaXQnKS52YWwobGltaXQpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxufVxyXG5cclxuXHJcbiAgc3BhdGlhbFZpZXdJbml0KCl7XHJcblxyXG5cclxuXHJcbiAgICAgIGxldCBtaW5Qb2ludCA9IHBhcmFtZXRlcnNbJ21pbiddWydnZW9tZXRyeSddWydjb29yZGluYXRlcyddO1xyXG4gICAgICBsZXQgbWF4UG9pbnQgPSBwYXJhbWV0ZXJzWydtYXgnXVsnZ2VvbWV0cnknXVsnY29vcmRpbmF0ZXMnXTtcclxuICAgICAgLy8gbGV0IGNvb3JkaW5hdGVPcmlnaW4gPSBwYXJhbWV0ZXJzWydjb29yZGluYXRlX29yaWdpbiddWydnZW9tZXRyeSddWydjb29yZGluYXRlcyddO1xyXG4gICAgICAvLyB3aWR0aCA9IHdpZHRoICoxLjAyIC0tPiBzbyB0aGVyZSBpcyBhIG1hcmdpbiBpbiB0aGUgc3BhdGlhbCB2aWV3IHdoZXJlIG5vIGFuaW1hbCBpcyBldmVyXHJcbiAgICAgIHRoaXMudGFua1dpZHRoID0gKG1heFBvaW50WzBdIC0gbWluUG9pbnRbMF0pICogMS4wMjtcclxuICAgICAgdGhpcy50YW5rSGVpZ2h0ID0gKG1heFBvaW50WzFdIC0gbWluUG9pbnRbMV0pICogMS4wMjtcclxuICAgICAgLy9YIGFuZCBZIGF4aXNcclxuICAgICAgbGV0IHggPSBkMy5zY2FsZUxpbmVhcigpXHJcbiAgICAgICAgICAuZG9tYWluKFttaW5Qb2ludFswXSwgbWF4UG9pbnRbMF1dKVxyXG4gICAgICAgICAgLnJhbmdlKFttaW5Qb2ludFswXSwgbWF4UG9pbnRbMF1dKTtcclxuXHJcbiAgICAgIGxldCB4QXhpcyA9IGQzLmF4aXNCb3R0b20oeClcclxuICAgICAgICAgIC50aWNrcygxMClcclxuICAgICAgICAgIC50aWNrU2l6ZSgxMClcclxuICAgICAgICAgIC50aWNrUGFkZGluZyg1KTtcclxuXHJcbiAgICAgIGxldCB5ID0gZDMuc2NhbGVMaW5lYXIoKVxyXG4gICAgICAgICAgLmRvbWFpbihbbWluUG9pbnRbMV0sIG1heFBvaW50WzFdXSlcclxuICAgICAgICAgIC5yYW5nZShbbWluUG9pbnRbMV0sIG1heFBvaW50WzFdXSk7XHJcblxyXG4gICAgICBsZXQgeUF4aXMgPSBkMy5heGlzUmlnaHQoeSlcclxuICAgICAgICAgIC50aWNrcyg3KVxyXG4gICAgICAgICAgLnRpY2tTaXplKDEwKVxyXG4gICAgICAgICAgLnRpY2tQYWRkaW5nKDUpO1xyXG5cclxuICAgICAgLy8gWk9PTUlORyBBTkQgUEFOTklORyBTVFVGRlxyXG5cclxuICAgICAgbGV0IHpvb20gPSBkMy56b29tKClcclxuICAgICAgICAgIC5zY2FsZUV4dGVudChbMSwgNl0pXHJcbiAgICAgICAgICAub24oJ3pvb20nLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgLy9jb25zdHJhaW5lZCB6b29taW5nXHJcbiAgICAgICAgICAgICAgLy8gbW9kaWZ5IHRoZSB0cmFuc2xhdGUgc28gdGhhdCBpdCBuZXZlciBleGl0cyB0aGUgdGFua1xyXG4gICAgICAgICAgICAgIGQzLmV2ZW50LnRyYW5zZm9ybS54ID0gTWF0aC5taW4oMCwgdGhpcy50YW5rV2lkdGggKiAoZDMuZXZlbnQudHJhbnNmb3JtLmsgLSAxKSxcclxuICAgICAgICAgICAgICAgICAgTWF0aC5tYXgodGhpcy50YW5rV2lkdGggKiAoMSAtIGQzLmV2ZW50LnRyYW5zZm9ybS5rKSwgZDMuZXZlbnQudHJhbnNmb3JtLngpKTtcclxuXHJcbiAgICAgICAgICAgICAgZDMuZXZlbnQudHJhbnNmb3JtLnkgPSBNYXRoLm1pbigwLCB0aGlzLnRhbmtIZWlnaHQgKiAoZDMuZXZlbnQudHJhbnNmb3JtLmsgLSAxKSxcclxuICAgICAgICAgICAgICAgICAgTWF0aC5tYXgodGhpcy50YW5rSGVpZ2h0ICogKDEgLSBkMy5ldmVudC50cmFuc2Zvcm0uayksIGQzLmV2ZW50LnRyYW5zZm9ybS55KSk7XHJcblxyXG4gICAgICAgICAgICAgIC8vIHRyYW5zbGF0ZSBhbmQgc2NhbGVcclxuICAgICAgICAgICAgICB0aGlzLnpvb21Hcm91cC5hdHRyKCd0cmFuc2Zvcm0nLCBkMy5ldmVudC50cmFuc2Zvcm0pO1xyXG5cclxuICAgICAgICAgICAgICAvLyByZXNjYWxlIHRoZSBheGlzXHJcbiAgICAgICAgICAgICAgZ1hheGlzLmNhbGwoeEF4aXMuc2NhbGUoZDMuZXZlbnQudHJhbnNmb3JtLnJlc2NhbGVYKHgpKSk7XHJcbiAgICAgICAgICAgICAgZ1lheGlzLmNhbGwoeUF4aXMuc2NhbGUoZDMuZXZlbnQudHJhbnNmb3JtLnJlc2NhbGVZKHkpKSk7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgIC8vdGhlIHN2ZyBjb250YWluZXJcclxuICAgICAgdGhpcy5zdmdDb250YWluZXIgPSBkMy5zZWxlY3QoJyNtYWluLXZpcycpXHJcbiAgICAgICAgICAgIC5jbGFzc2VkKCdzdmctY29udGFpbmVyJywgdHJ1ZSlcclxuICAgICAgICAgICAgLy8gdG8gbWFrZSBpdCByZXNwb25zaXZlIHdpdGggY3NzXHJcbiAgICAgICAgICAgIC5hcHBlbmQoJ3N2ZycpXHJcbiAgICAgICAgICAgIC5hdHRyKCdwcmVzZXJ2ZUFzcGVjdFJhdGlvJywgJ3hNaW5ZTWluIG1lZXQnKVxyXG4gICAgICAgICAgICAuYXR0cigndmlld0JveCcsICcwIDAgJyArIHRoaXMudGFua1dpZHRoICsgJyAnICsgdGhpcy50YW5rSGVpZ2h0KVxyXG4gICAgICAgICAgICAvLyBhZGQgdGhlIGNsYXNzIHN2Zy1jb250ZW50XHJcbiAgICAgICAgICAgIC5jbGFzc2VkKCdzdmctY29udGVudCcsIHRydWUpXHJcbiAgICAgICAgICAgIC5hdHRyKCdpZCcsICdtYWluLXZpcy1zdmcnKVxyXG4gICAgICAgICAgICAuY2FsbCh6b29tKTtcclxuXHJcbiAgICAgIC8qIGRlcGVuZHMgb24gc3ZnIHJhdGlvLCBmb3IgZS5nIDEyNDAvMTkwMCA9IDAuNjUgc28gcGFkZGluZy1ib3R0b20gPSA2NSUgKi9cclxuICAgICAgbGV0IHBlcmNlbnRhZ2UgPSBNYXRoLmNlaWwoKHRoaXMudGFua0hlaWdodCAvIHRoaXMudGFua1dpZHRoKSAqIDEwMCk7XHJcbiAgICAgICQoJyNtYWluLXZpcycpLmFwcGVuZCgkKCc8c3R5bGU+I21haW4tdmlzOjphZnRlciB7cGFkZGluZy10b3A6ICcgKyBwZXJjZW50YWdlICsgJyU7ZGlzcGxheTogYmxvY2s7Y29udGVudDogXCJcIjt9PC9zdHlsZT4gJykpO1xyXG5cclxuICAgICAgdGhpcy56b29tR3JvdXAgPSB0aGlzLnN2Z0NvbnRhaW5lci5hcHBlbmQoJ3N2ZzpnJyk7XHJcblxyXG4gICAgICAvLyBWaXN1YWxpemUgdGhlIGJhY2tncm91bmQgaW1hZ2UgaWYgaXQgaXMgdXBsb2FkZWRcclxuICAgICAgaWYgKHBhcmFtZXRlcnMuYmFja2dyb3VuZF9pbWFnZSkge1xyXG4gICAgICAgICAgdGhpcy56b29tR3JvdXBcclxuICAgICAgICAgICAgICAuYXBwZW5kKCdpbWFnZScpXHJcbiAgICAgICAgICAgICAgLmF0dHIoJ3hsaW5rOmhyZWYnLCAnLycgKyBwYXJhbWV0ZXJzLmJhY2tncm91bmRfaW1hZ2UpXHJcbiAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2JhY2tncm91bmQtaW1hZ2UnKVxyXG4gICAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCB0aGlzLnRhbmtIZWlnaHQpXHJcbiAgICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgdGhpcy50YW5rV2lkdGgpXHJcbiAgICAgICAgICAgICAgLmF0dHIoJ3gnLCAnMCcpXHJcbiAgICAgICAgICAgICAgLmF0dHIoJ3knLCAnMCcpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvL2FwcGVuZCB0aGUgdGFuayBncm91cCB3aXRoIGEgdHJhbnNmb3JtYXRpb24gd2hpY2ggcm90YXRlcyB0aGUgeSBheGlzXHJcbiAgICAgIHRoaXMudGFuayA9IHRoaXMuem9vbUdyb3VwLmFwcGVuZCgnc3ZnOmcnKVxyXG4gICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3RhbmsnKVxyXG4gICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICgpPT57XHJcbiAgICAgICAgICAgICAgbGV0IHggPSBwYXJhbWV0ZXJzLmludmVydGVkX3ggPyAtMSA6IDE7XHJcbiAgICAgICAgICAgICAgbGV0IHkgPSBwYXJhbWV0ZXJzLmludmVydGVkX3kgPyAtMSA6IDE7XHJcbiAgICAgICAgICAgICAgcmV0dXJuICdzY2FsZSgnICsgeCArICcsJyArIHkgKyAnKSc7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgIC8vYWRkIHRoZSBjZW50cm9pZFxyXG4gICAgICB0aGlzLnRhbmsuYXBwZW5kKCdnJylcclxuICAgICAgICAgIC5hdHRyKCdpZCcsICdnLWNlbnRyb2lkJylcclxuICAgICAgICAgIC5hcHBlbmQoJ2NpcmNsZScpXHJcbiAgICAgICAgICAuYXR0cignY2xhc3MnLCAnY2VudHJvaWQnKVxyXG4gICAgICAgICAgLmF0dHIoJ3InLCA2KVxyXG4gICAgICAgICAgLmF0dHIoJ2N4JywgMClcclxuICAgICAgICAgIC5hdHRyKCdjeScsIDApO1xyXG5cclxuICAgICAgLy8gYXJyb3cgZm9yIHRoZSBjZW50cm9pZCBkaXJlY3Rpb25cclxuICAgICAgdGhpcy50YW5rLnNlbGVjdCgnI2ctY2VudHJvaWQnKVxyXG4gICAgICAgICAgLmFwcGVuZCgnc3ZnOmRlZnMnKVxyXG4gICAgICAgICAgLmFwcGVuZCgnc3ZnOm1hcmtlcicpXHJcbiAgICAgICAgICAuYXR0cignaWQnLCAnY2VudHJvaWQtYXJyb3cnKVxyXG4gICAgICAgICAgLmF0dHIoJ3JlZlgnLCAyKVxyXG4gICAgICAgICAgLmF0dHIoJ3JlZlknLCA2KVxyXG4gICAgICAgICAgLmF0dHIoJ21hcmtlcldpZHRoJywgMTMpXHJcbiAgICAgICAgICAuYXR0cignbWFya2VySGVpZ2h0JywgMTMpXHJcbiAgICAgICAgICAuYXR0cignb3JpZW50JywgJ2F1dG8nKVxyXG4gICAgICAgICAgLmFwcGVuZCgnc3ZnOnBhdGgnKVxyXG4gICAgICAgICAgLmF0dHIoJ2QnLCAnTTIsMiBMMiwxMSBMMTAsNiBMMiwyJyk7XHJcblxyXG4gICAgICAvLyBBcHBlbmQgdGhlIGxpbmUgZm9yIHRoZSBkaXJlY3Rpb24gYXJyb3dcclxuICAgICAgdGhpcy50YW5rLnNlbGVjdCgnI2ctY2VudHJvaWQnKVxyXG4gICAgICAgICAgLmFwcGVuZCgnbGluZScpXHJcbiAgICAgICAgICAuYXR0cignaWQnLCAnY2VudHJvaWQtbGluZScpXHJcbiAgICAgICAgICAuYXR0cignbWFya2VyLWVuZCcsICd1cmwoI2NlbnRyb2lkLWFycm93KScpO1xyXG5cclxuICAgICAgLy9hcHBlbmQgbmV0d29yayAgZ3JvdXBcclxuICAgICAgdGhpcy50YW5rLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAuYXR0cignaWQnLCAnbmV0d29yay1ncm91cCcpO1xyXG5cclxuICAgICAgLy9hcHBlbmQgZGVsYXVuYXktdHJpYW5ndWxhdGlvbiBncm91cFxyXG4gICAgICB0aGlzLnRhbmsuYXBwZW5kKCdnJylcclxuICAgICAgICAgIC5hdHRyKCdpZCcsICdkZWxhdW5heS10cmlhbmd1bGF0aW9uLWdyb3VwJyk7XHJcblxyXG4gICAgICAvL2FwcGVuZCB2b3Jvbm9pIGdyb3VwXHJcbiAgICAgIHRoaXMudGFuay5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgLmF0dHIoJ2lkJywgJ3Zvcm5vaS1ncm91cCcpO1xyXG5cclxuICAgICAgLy9hcHBlbmQgdGhlIGZyYW1lIHRpbWUgdGV4dFxyXG4gICAgICB0aGlzLnN2Z0NvbnRhaW5lci5hcHBlbmQoJ3RleHQnKVxyXG4gICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2ZyYW1lLXRleHQnKVxyXG4gICAgICAgICAgLmF0dHIoJ3gnLCAzMClcclxuICAgICAgICAgIC5hdHRyKCd5JywgMzApXHJcbiAgICAgICAgICAudGV4dCgnLS0gOiAtLSA6IC0tICcpO1xyXG5cclxuICAgICAgLy8gYWRkIHRoZSBheGlzXHJcbiAgICAgIGxldCBnWGF4aXMgPSB0aGlzLnN2Z0NvbnRhaW5lci5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3ggYXhpcycpXHJcbiAgICAgICAgICAuY2FsbCh4QXhpcyk7XHJcblxyXG4gICAgICBsZXQgZ1lheGlzID0gdGhpcy5zdmdDb250YWluZXIuYXBwZW5kKCdnJylcclxuICAgICAgICAgIC5hdHRyKCdjbGFzcycsICd5IGF4aXMnKVxyXG4gICAgICAgICAgLmNhbGwoeUF4aXMpO1xyXG5cclxuICAgICAgLy8gaW5pdCBzdHVmZiBmcm9tIG90aGVyIG1vZHVsZXNcclxuICAgICAgaW5pdFRvb2x0aXAoKTtcclxuICAgICAgaW5pdFNsaWRlcnMoKTtcclxuXHJcbiAgICAgIHRoaXMuaW5pdENvbG9yUGlja2VyKCk7XHJcbiAgICAgIHZhciBsaW5lY2hhcnQgPSBuZXcgTGluZUNoYXJ0KHN3YXJtRGF0YSk7XHJcbiAgICAgIHRoaXMuY3BfbGlzdGVuZXIoKTtcclxuICAgICAgdGhpcy5zZl9saXN0ZW5lcnMoKTtcclxuICAgICAgdGhpcy5hZl9saXN0ZW5lcnMoKTtcclxuICAgICAgdGhpcy5tZF9saXN0ZW5lcnMoKTtcclxuICAgICAgdGhpcy5uX2xpc3RlbmVycygpO1xyXG4gICAgICB0aGlzLmhfbGlzdGVuZXJzKCk7XHJcbiAgICAgIC8vdmFyIGRlbmRyb2dyYW0gPSBuZXcgRGVuZHJvZ3JhbSgpO1xyXG4vL2ZpbmRpbml0XHJcbiAgICAgIHRoaXMuaW5pdERlbmRyb2dyYW0oKTtcclxuICAgICAgbWFrZVJlc2l6YWJsZSh0aGlzLnRhbmtIZWlnaHQsIHRoaXMudGFua1dpZHRoKTtcclxuICAgICAgZGVmYXVsdENvbmZpZygpO1xyXG4gICAgICAvLyBzdGFydCB0aGUgYW5pbWF0aW9uXHJcbiAgICAgIHRoaXMuZHJhdygpO1xyXG4gIH07XHJcbiAgc2V0TWVkb2lkQW5pbWFsKHZhbHVlKSB7XHJcbiAgICAgIHRoaXMubWVkb2lkQW5pbWFsID0gdmFsdWU7XHJcbiAgfVxyXG5cclxufVxyXG5cclxuXHJcblxyXG5cclxuY2xhc3MgQ2hhcnQgZXh0ZW5kcyBEcmF3ZXIge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGRhdGEpIHtcclxuICAgIHN1cGVyKClcclxuICAgICAgLy8gbG9hZCBpbiBhcmd1bWVudHMgZnJvbSBjb25maWcgb2JqZWN0XHJcbiAgICB0aGlzLnN3YXJtRGF0YSA9IGRhdGE7XHJcbiAgICB0aGlzLnN3YXJtX2ZlYXR1cmVzID0gT2JqZWN0LmtleXModGhpcy5zd2FybURhdGFbMF0pO1xyXG4gICAgdGhpcy5saW5lQ2hhcnRXaWR0aCA9IDUwMDA7XHJcbiAgICB0aGlzLnRyZW5kQ2hhcnRzRWxlbSA9IFsnbG93ZXItb3V0ZXItYXJlYScsICdsb3dlci1pbm5lci1hcmVhJywgJ21lZGlhbi1saW5lJywgJ3VwcGVyLWlubmVyLWFyZWEnLCAndXBwZXItb3V0ZXItYXJlYSddO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgKiBpbml0IHRoZSBsaW5lIGNoYXJ0IGFuZCBhbHNvIHRoZSB0cmVuZCBjaGFydFxyXG4gICAgICovXHJcblxyXG5cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIExpbmVDaGFydCBleHRlbmRzIENoYXJ0IHtcclxuICAgIGNvbnN0cnVjdG9yKGRhdGEpe1xyXG4gICAgc3VwZXIoZGF0YSlcclxuICAgIHRoaXMubGluZUNoYXJ0KCk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGxpbmVDaGFydCgpIHtcclxuXHJcbiAgICAgIHJhdGlvID0gTWF0aC5jZWlsKHRoaXMuc3dhcm1EYXRhLmxlbmd0aCAvIHRoaXMubGluZUNoYXJ0V2lkdGgpO1xyXG5cclxuICAgICAgLy8gU3dhcm0gZmVhdHVyZXMgbGluZSBjaGFydFxyXG4gICAgICBsZXQgbGluZUNoYXJ0SGVpZ2h0ID0gNTAwOyAvLyB0aGUgbGluZSBjaGFydCBoZWlnaHRcclxuICAgICAgbGV0IG1hcmdpbiA9IHtcclxuICAgICAgICAgIHRvcDogMTAsXHJcbiAgICAgICAgICByaWdodDogMCxcclxuICAgICAgICAgIGJvdHRvbTogMTAwLFxyXG4gICAgICAgICAgbGVmdDogMTBcclxuICAgICAgfTtcclxuICAgICAgbGV0IG1hcmdpblRvTGVnZW5kID0gNTA7XHJcblxyXG4gICAgICBsZXQgc3dhcm1fZmVhdHVyZXMgPSB0aGlzLnN3YXJtX2ZlYXR1cmVzO1xyXG4gICAgICAvLyByZW1vdmUgdGhlIHRpbWUga2V5XHJcbiAgICAgIGxldCBpbmRleCA9IHN3YXJtX2ZlYXR1cmVzLmluZGV4T2YoJ3RpbWUnKTtcclxuICAgICAgc3dhcm1fZmVhdHVyZXMuc3BsaWNlKGluZGV4LCAxKTtcclxuXHJcbiAgICAgIGxldCBsaW5lQ2hhcnREYXRhID0gW107XHJcbiAgICAgIC8vIGFnZ3JlZ2F0ZSBhbmQgYXZlcmFnZSB0aGUgc3dhcm0gZGF0YSB0byB0aGlzLmxpbmVDaGFydFdpZHRoIHBvaW50cyBpbiB0aGUgbGluZSBjaGFydFxyXG4gICAgICBpZiAodGhpcy5zd2FybURhdGEubGVuZ3RoID4gdGhpcy5saW5lQ2hhcnRXaWR0aCkge1xyXG4gICAgICAgICAgLy8gdG1wIGFycmF5IGZvciB0aGUgYWdncmVnYXRlZCBhbmQgYXZlcmFnZWQgZmVhdHVyZXNcclxuICAgICAgICAgIGxldCB0bXAgPSBuZXcgQXJyYXkoc3dhcm1fZmVhdHVyZXMubGVuZ3RoKS5maWxsKDApO1xyXG5cclxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zd2FybURhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAvLyBhZ2dyZWdhdGUgdGhlIGZlYXR1cmVzIGluIHRoZSB0ZW1wIGFycmF5XHJcbiAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzd2FybV9mZWF0dXJlcy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICB0bXBbal0gKz0gdGhpcy5zd2FybURhdGFbaV1bc3dhcm1fZmVhdHVyZXNbal1dO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAvLyBpZiB0aGUgcmF0aW8gaXMgemVybyB0aGVuIGF2ZXJhZ2UgaXQgYW5kIHNldCBpdCB0byB6ZXJvXHJcbiAgICAgICAgICAgICAgaWYgKGkgJSByYXRpbyA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICBsZXQgdG1wX29iamVjdCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICd0aW1lJzogaSAvIHJhdGlvXHJcbiAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHN3YXJtX2ZlYXR1cmVzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0bXBbal0gPSB0bXBbal0gLyByYXRpbztcclxuICAgICAgICAgICAgICAgICAgICAgIHRtcF9vYmplY3Rbc3dhcm1fZmVhdHVyZXNbal1dID0gdG1wW2pdO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICBsaW5lQ2hhcnREYXRhLnB1c2godG1wX29iamVjdCk7XHJcbiAgICAgICAgICAgICAgICAgIHRtcCA9IG5ldyBBcnJheShzd2FybV9mZWF0dXJlcy5sZW5ndGgpLmZpbGwoMCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgbGluZUNoYXJ0RGF0YSA9IHRoaXMuc3dhcm1EYXRhO1xyXG4gICAgICB9XHJcbiAgICAgIC8vY29uc29sZS5sb2cobGluZUNoYXJ0RGF0YSk7XHJcbiAgICAgIHpvb21GdW5jdGlvbiA9IGQzLnNjYWxlTGluZWFyKClcclxuICAgICAgICAgIC5kb21haW4oWzAsIGxpbmVDaGFydERhdGEubGVuZ3RoXSlcclxuICAgICAgICAgIC5yYW5nZShbMCwgdGhpcy5saW5lQ2hhcnRXaWR0aF0pO1xyXG5cclxuXHJcbiAgICAgIC8vIHggYXhpcyBzY2FsZSAtIG1pbnVzIG1hcmdpbkxpbmVDaGFydCAgbmVlZGVkXHJcbiAgICAgIHggPSBkMy5zY2FsZUxpbmVhcigpXHJcbiAgICAgICAgICAuZG9tYWluKFswLCBsaW5lQ2hhcnREYXRhLmxlbmd0aF0pXHJcbiAgICAgICAgICAucmFuZ2UoWzAsIHRoaXMubGluZUNoYXJ0V2lkdGhdKTtcclxuICAgICAgbGV0IHgyID0gZDMuc2NhbGVMaW5lYXIoKVxyXG4gICAgICAgICAgLmRvbWFpbihbMCwgbGluZUNoYXJ0RGF0YS5sZW5ndGhdKVxyXG4gICAgICAgICAgLnJhbmdlKFswLCB0aGlzLmxpbmVDaGFydFdpZHRoXSk7XHJcbiAgICAgIC8vIGRlZmluZSB3aGVyZSB0aGUgYXhpcyBpcyBldGNcclxuICAgICAgbGV0IHhBeGlzID0gZDMuYXhpc0JvdHRvbSh4KVxyXG4gICAgICAgICAgLnRpY2tzKDEwKVxyXG4gICAgICAgICAgLnRpY2tTaXplKDEwKVxyXG4gICAgICAgICAgLnRpY2tQYWRkaW5nKDUpXHJcbiAgICAgICAgICAudGlja0Zvcm1hdChmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKGQgKiByYXRpbykgLyAxNTAwKSAlIDYwICsgJzonICsgTWF0aC5mbG9vcigoZCAqIHJhdGlvKSAvIHBhcmFtZXRlcnNbJ2ZwcyddKSAlIDYwICsgJzo6JyArIChkICogcmF0aW8pICUgcGFyYW1ldGVyc1snZnBzJ107XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgIC8vIHkgYXhpcyBzY2FsZSB3aGljaCBpcyBub3JtYWxpemVkXHJcbiAgICAgIHkgPSBkMy5zY2FsZUxpbmVhcigpXHJcbiAgICAgICAgICAuZG9tYWluKFswLCAxMDBdKVxyXG4gICAgICAgICAgLnJhbmdlKFtsaW5lQ2hhcnRIZWlnaHQsIDBdKTtcclxuICAgICAgLy8gZGVmaW5lIHdoZXJlIHRoZSBheGlzIGlzIGV0Y1xyXG4gICAgICBsZXQgeUF4aXMgPSBkMy5heGlzTGVmdCh5KVxyXG4gICAgICAgICAgLnRpY2tzKDApXHJcbiAgICAgICAgICAudGlja1NpemUoMTApXHJcbiAgICAgICAgICAudGlja1BhZGRpbmcoNSk7XHJcblxyXG4gICAgICBsZXQgZHJhZ2dlZCA9ICgpPT57XHJcbiAgICAgICAgICAvLyBkcmFnZ2VkIGZ1bmN0aW9uIGdldCB0aGUgY29vcmRpbmF0ZXMgYW5kIGNhbGN1bGF0ZSB0aGUgdGltZSBtb21lbnQgZnJvbSB0aGlzXHJcbiAgICAgICAgICBsZXQgY29vcmRzID0gZDMubW91c2UodGhpcyk7XHJcbiAgICAgICAgICBpZiAoY29vcmRzWzBdIDwgbWFyZ2luLmxlZnQgfHwgY29vcmRzWzBdID4gdGhpcy5saW5lQ2hhcnRXaWR0aCB8fCBjb29yZHNbMV0gPCAwIHx8IGNvb3Jkc1sxXSA+IGxpbmVDaGFydEhlaWdodCkge1xyXG4gICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC8vIHRtcCBzY2FsZSB0byBpbmNsdWRlIHRoZSB6b29tIGZhY3RvclxyXG4gICAgICAgICAgbGV0IHRtcFNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKVxyXG4gICAgICAgICAgICAgIC5kb21haW4oem9vbUZ1bmN0aW9uLnJhbmdlKCkpXHJcbiAgICAgICAgICAgICAgLnJhbmdlKHpvb21GdW5jdGlvbi5kb21haW4oKSk7XHJcbiAgICAgICAgICAvLyBzZXQgdGhlIG5ldyB0aW1lXHJcbiAgICAgICAgICB0aGlzLnNldEluZGV4VGltZShNYXRoLmZsb29yKCh0bXBTY2FsZShjb29yZHNbMF0gLSBtYXJnaW4ubGVmdCkpICogcmF0aW8pKTtcclxuICAgICAgfTtcclxuICAgICAgbGV0IHpvb20gPSBkMy56b29tKClcclxuICAgICAgICAgIC5zY2FsZUV4dGVudChbMSwgMjBdKVxyXG4gICAgICAgICAgLnRyYW5zbGF0ZUV4dGVudChbXHJcbiAgICAgICAgICAgICAgWzAsIDBdLFxyXG4gICAgICAgICAgICAgIFt0aGlzLmxpbmVDaGFydFdpZHRoLCBsaW5lQ2hhcnRIZWlnaHRdXHJcbiAgICAgICAgICBdKVxyXG4gICAgICAgICAgLmV4dGVudChbXHJcbiAgICAgICAgICAgICAgWzAsIDBdLFxyXG4gICAgICAgICAgICAgIFt0aGlzLmxpbmVDaGFydFdpZHRoLCBsaW5lQ2hhcnRIZWlnaHRdXHJcbiAgICAgICAgICBdKVxyXG4gICAgICAgICAgLm9uKCd6b29tJywgKCk9PntcclxuICAgICAgICAgICAgICAvLyBnZXQgdGhlIHRyYW5zZm9ybSBmYWN0b3JcclxuICAgICAgICAgICAgICBsZXQgdCA9IGQzLmV2ZW50LnRyYW5zZm9ybTtcclxuICAgICAgICAgICAgICAvLyBjaGFuZ2Ugc2NhbGluZyBmdW5jdGlvblxyXG4gICAgICAgICAgICAgIHpvb21GdW5jdGlvbiA9IHguZG9tYWluKHQucmVzY2FsZVgoeDIpLmRvbWFpbigpKTtcclxuICAgICAgICAgICAgICAvLyB6b29tIGVhY2ggYXZhaWFibGUgbGluZVxyXG4gICAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiBsaW5lcykge1xyXG4gICAgICAgICAgICAgICAgICBpZiAobGluZXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgem9vbUdyb3VwLnNlbGVjdCgoJyMnICsga2V5ICsgJ0xpbmUnKSkuYXR0cignZCcsIGxpbmVzW2tleV0pO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIC8vIHpvb20gdGhlIHRyZW5kIGNoYXJ0c1xyXG4gICAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiB0cmVuZENoYXJ0c1pvb20pIHtcclxuICAgICAgICAgICAgICAgICAgaWYgKHRyZW5kQ2hhcnRzWm9vbS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudHJlbmRDaGFydHNFbGVtLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgem9vbUdyb3VwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZWxlY3QoKCcjJyArIGtleSArICdUcmVuZENoYXJ0IC4nICsgdGhpcy50cmVuZENoYXJ0c0VsZW1baV0pKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignZCcsIHRyZW5kQ2hhcnRzWm9vbVtrZXldW3RoaXMudHJlbmRDaGFydHNFbGVtW2ldXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgLy8gcmVzY2FsZSB0aGUgYXhpc1xyXG4gICAgICAgICAgICAgIGdYYXhpcy5jYWxsKHhBeGlzKTtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gbWFrZSB0aGUgc3ZnIHJlc2l6YWJsZVxyXG4gICAgICBsZXQgc3dhcm1MaW5lQ2hhcnQgPSBkMy5zZWxlY3QoJyNzd2FybS12aXMnKVxyXG4gICAgICAgICAgLmNsYXNzZWQoJ3N2Zy1saW5lLWNoYXJ0LWNvbnRhaW5lcicsIHRydWUpXHJcbiAgICAgICAgICAvLyB0byBtYWtlIGl0IHJlc3BvbnNpdmUgd2l0aCBjc3NcclxuICAgICAgICAgIC5hcHBlbmQoJ3N2ZycpXHJcbiAgICAgICAgICAuYXR0cigncHJlc2VydmVBc3BlY3RSYXRpbycsICd4TWluWU1pbiBtZWV0JylcclxuXHJcbiAgICAgICAgICAuYXR0cigndmlld0JveCcsICcwIDAgJyArIHRoaXMubGluZUNoYXJ0V2lkdGggKyAnICcgKyAobGluZUNoYXJ0SGVpZ2h0ICsgbWFyZ2luLmJvdHRvbSkpXHJcbiAgICAgICAgICAvLyBhZGQgdGhlIGNsYXNzIHN2Zy1jb250ZW50XHJcbiAgICAgICAgICAuY2xhc3NlZCgnc3ZnLWNvbnRlbnQnLCB0cnVlKTtcclxuXHJcbiAgICAgIHpvb21Hcm91cCA9IHN3YXJtTGluZUNoYXJ0XHJcbiAgICAgICAgICAuYXBwZW5kKCdzdmc6ZycpXHJcbiAgICAgICAgICAuYXR0cignaWQnLCAnbGluZUNoYXJ0Wm9vbScpXHJcbiAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgbWFyZ2luLmxlZnQgKyAnLDApJyk7XHJcblxyXG4gICAgICAvLyBhcHBlbmQgYSBncm91cCBmb3IgdGhlIHggYXhpc1xyXG4gICAgICAvLyBhZGQgdGhlIGF4aXNcclxuICAgICAgbGV0IGdYYXhpcyA9IHpvb21Hcm91cC5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3ggYXhpcy1saW5lLWNoYXJ0JylcclxuICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKDAsJyArIGxpbmVDaGFydEhlaWdodCArICcpJylcclxuICAgICAgICAgIC5jYWxsKHhBeGlzKTtcclxuXHJcbiAgICAgIC8vIGFwcGVuZCBhIGdyb3VwIGZvciB0aGUgeSBheGlzXHJcbiAgICAgIHpvb21Hcm91cC5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3kgYXhpcy1saW5lLWNoYXJ0JylcclxuICAgICAgICAgIC5jYWxsKHlBeGlzKTtcclxuXHJcblxyXG4gICAgICAvLyB0aGUgdGltZSBsaW5lIGFwcGVuZCB0aGUgbGluZVxyXG4gICAgICB6b29tR3JvdXAuYXBwZW5kKCdsaW5lJylcclxuICAgICAgICAgIC5hdHRyKCdjbGFzcycsICd0aW1lLWxpbmUnKVxyXG4gICAgICAgICAgLmF0dHIoJ2lkJywgJ2xpbmVDaGFydFRpbWVMaW5lJylcclxuICAgICAgICAgIC5hdHRyKCd4MScsIDApXHJcbiAgICAgICAgICAuYXR0cigneTEnLCAwKVxyXG4gICAgICAgICAgLmF0dHIoJ3gyJywgMClcclxuICAgICAgICAgIC5hdHRyKCd5MicsIGxpbmVDaGFydEhlaWdodCk7XHJcblxyXG4gICAgICAgICAgLy8gY29sb3JzIGZvciB0aGUgbGluZXNcclxuICAgICAgICAgIGxldCBsaW5lX2NvbG9ycyA9IGQzLnNjYWxlT3JkaW5hbChkMy5zY2hlbWVDYXRlZ29yeTEwKTtcclxuICAgICAgICAgIGxldCBsaW5lcyA9IHt9O1xyXG4gICAgICAgICAgLy8gYWRkIHRoZSBsaW5lcyB0byB0aGUgbGluZSBjaGFydFxyXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzd2FybV9mZWF0dXJlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgIGxldCBtaW4gPSBkMy5taW4obGluZUNoYXJ0RGF0YSwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gZFtzd2FybV9mZWF0dXJlc1tpXV07XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgbGV0IG1heCA9IGQzLm1heChsaW5lQ2hhcnREYXRhLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBkW3N3YXJtX2ZlYXR1cmVzW2ldXTtcclxuICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgbGV0IG5vcm1hbGl6YXRpb25TY2FsZSA9IGQzLnNjYWxlTGluZWFyKCkuZG9tYWluKFttaW4sIG1heF0pLnJhbmdlKFswLCAxMDBdKTtcclxuICAgICAgICAgICAgICBsZXQgbGluZSA9IGQzLmxpbmUoKVxyXG4gICAgICAgICAgICAgICAgICAueChmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geChkWyd0aW1lJ10pO1xyXG4gICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAueShmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geShub3JtYWxpemF0aW9uU2NhbGUoZFtzd2FybV9mZWF0dXJlc1tpXV0pKTtcclxuICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgbGluZXNbc3dhcm1fZmVhdHVyZXNbaV1dID0gbGluZTtcclxuICAgICAgICAgICAgICAvL2FwcGVuZCB0aGUgbGluZSB0byB0aGUgbGluZSBjaGFydFxyXG4gICAgICAgICAgICAgIHpvb21Hcm91cC5hcHBlbmQoJ3BhdGgnKVxyXG4gICAgICAgICAgICAgICAgICAuZGF0YShbbGluZUNoYXJ0RGF0YV0pXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsIChzd2FybV9mZWF0dXJlc1tpXSArICdMaW5lJykpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsaW5lIGxpbmVDaGFydExpbmUnKVxyXG4gICAgICAgICAgICAgICAgICAuc3R5bGUoJ3N0cm9rZScsIGxpbmVfY29sb3JzKGkpKVxyXG4gICAgICAgICAgICAgICAgICAuYXR0cignZCcsIGxpbmUpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCduYW1lJywgc3dhcm1fZmVhdHVyZXNbaV0pO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICQoJyNsaW5lQ2hhcnRUaW1lTGluZScpLmFwcGVuZFRvKCcjbGluZUNoYXJ0Wm9vbScpO1xyXG4gICAgICAgICAgLy8gYXBwZW5kIHRoZSB6b29tIHJlY3RhbmdsZVxyXG4gICAgICAgICAgem9vbUdyb3VwLmFwcGVuZCgncmVjdCcpXHJcbiAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3pvb20nKVxyXG4gICAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIHRoaXMubGluZUNoYXJ0V2lkdGgpXHJcbiAgICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGxpbmVDaGFydEhlaWdodClcclxuICAgICAgICAgICAgICAuY2FsbCh6b29tKVxyXG4gICAgICAgICAgICAgIC5vbignY2xpY2snLCBkcmFnZ2VkKVxyXG4gICAgICAgICAgICAgIC5jYWxsKGQzLmRyYWcoKVxyXG4gICAgICAgICAgICAgICAgICAub24oJ2RyYWcnLCBkcmFnZ2VkKVxyXG4gICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAvLyBhcHBlbmQgdGhlIGxlZ2VuZCBmb3IgdGhlIGxpbmUgY2hhcnRcclxuICAgICAgLy8gdmFycyBmb3IgdGhlIGxlZ2VuZFxyXG4gICAgICBsZXQgbGVnZW5kV2lkdGggPSAxMDA7XHJcbiAgICAgIGxldCBsZWdlbmRIZWlnaHQgPSA1MDtcclxuXHJcbiAgICAgIC8vc2VsZWN0IGFsbCB0aGUgbGluZXNcclxuICAgICAgbGV0IGNoYXJ0TGluZXMgPSBkMy5zZWxlY3RBbGwoJy5saW5lJyk7XHJcblxyXG4gICAgICAvL2FwcGVuZCBhIGdyb3VwIGZvciB0aGUgbGVnZW5kXHJcbiAgICAgIHN3YXJtTGluZUNoYXJ0XHJcbiAgICAgICAgICAuYXBwZW5kKCdnJylcclxuICAgICAgICAgIC5hdHRyKCdpZCcsICdsaW5lQ2hhcnRMZWdlbmQnKVxyXG4gICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIG1hcmdpbi5ib3R0b20gKyAnLCcgKyAobGluZUNoYXJ0SGVpZ2h0ICsgbWFyZ2luVG9MZWdlbmQpICsgJyknKVxyXG4gICAgICAgICAgLnNlbGVjdEFsbCgncmVjdC5sZWdlbmQnKVxyXG4gICAgICAgICAgLmRhdGEoY2hhcnRMaW5lcy5fZ3JvdXBzWzBdKVxyXG4gICAgICAgICAgLmVudGVyKClcclxuICAgICAgICAgIC8vYXBwZW5kIHRoZSB3aG9sZSBsZWdlbmQgaW4gYSBlYWNoIGZ1bmN0aW9uXHJcbiAgICAgICAgICAuZWFjaChmdW5jdGlvbihkLCBpKSB7XHJcbiAgICAgICAgICAgICAgbGV0IHNwYWNpbmcgPSA2MDA7XHJcbiAgICAgICAgICAgICAgbGV0IHRleHRTcGFjZSA9IDQwO1xyXG4gICAgICAgICAgICAgIC8vIGFwcGVuZCB0aGUgcmVjdGFuZ2xlcyBmb3IgdGhlIGxlZ2VuZFxyXG4gICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5hcHBlbmQoJ3JlY3QnKVxyXG4gICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGVnZW5kJylcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgbGVnZW5kV2lkdGgpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCBsZWdlbmRIZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCd4JywgKHNwYWNpbmcgKiBpKSArICdweCcpXHJcbiAgICAgICAgICAgICAgICAgIC5zdHlsZSgnZmlsbCcsIGQuc3R5bGUuc3Ryb2tlKTtcclxuXHJcbiAgICAgICAgICAgICAgLy8gYXBwZW5kIHRoZSB0ZXh0IGZvciB0aGUgbGVnZW5kXHJcbiAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmFwcGVuZCgndGV4dCcpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsIGQuYXR0cmlidXRlcy5pZC52YWx1ZSArICdMZWdlbmRUaXRsZScpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsaW5lLWNoYXJ0LWxlZ2VuZC10ZXh0JylcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ3knLCB0ZXh0U3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCd4JywgKHNwYWNpbmcgKiBpICsgbGVnZW5kV2lkdGggKyAxMCkgKyAncHgnKVxyXG4gICAgICAgICAgICAgICAgICAudGV4dChkLmF0dHJpYnV0ZXMubmFtZS52YWx1ZSArICc6ICcpO1xyXG5cclxuICAgICAgICAgICAgICAvL2FwcGVuZCB0aGUgdGV4dCBmb3IgdGhlIHZhbHVlIG9mIHRoZSBsaW5lXHJcbiAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmFwcGVuZCgndGV4dCcpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsIGQuYXR0cmlidXRlcy5pZC52YWx1ZSArICdWYWx1ZScpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsaW5lLWNoYXJ0LWxlZ2VuZC10ZXh0JylcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ3knLCB0ZXh0U3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCd4JywgKHNwYWNpbmcgKiBpICsgbGVnZW5kV2lkdGggK1xyXG4gICAgICAgICAgICAgICAgICAgICAgLy90aGUgbmV4dCBleHByZXNzaW9uIGdldHMgdGhlIHRleHQgbGVuZ3RoXHJcbiAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QoJyMnICsgZC5hdHRyaWJ1dGVzLmlkLnZhbHVlICsgJ0xlZ2VuZFRpdGxlJykubm9kZSgpLmdldENvbXB1dGVkVGV4dExlbmd0aCgpICtcclxuICAgICAgICAgICAgICAgICAgICAgIDEwKSArICdweCcpXHJcbiAgICAgICAgICAgICAgICAgIC50ZXh0KCcwLjAnKTtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgLy9hcHBlbmQgYSBsZWdlbmQgZ3JvdXAgZm9yIHRoZSB0cmVuZCBjaGFydHNcclxuICAgICAgc3dhcm1MaW5lQ2hhcnRcclxuICAgICAgICAgIC5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgLmF0dHIoJ2lkJywgJ3RyZW5kQ2hhcnRMZWdlbmQnKVxyXG4gICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIG1hcmdpbi5ib3R0b20gKyAnLCcgKyAobGluZUNoYXJ0SGVpZ2h0ICsgbWFyZ2luVG9MZWdlbmQpICsgJyknKVxyXG4gICAgICAgICAgLnNlbGVjdEFsbCgncmVjdC5sZWdlbmQnKVxyXG4gICAgICAgICAgLmRhdGEoWyc1JSAtIDk1JScsICcyNSUgLSA3NSUnLCAnTWVkaWFuJ10pXHJcbiAgICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgLy9hcHBlbmQgdGhlIHdob2xlIGxlZ2VuZCBpbiBhIGVhY2ggZnVuY3Rpb25cclxuICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uKGQsIGkpIHtcclxuICAgICAgICAgICAgICBsZXQgc3BhY2luZyA9IDgwMDtcclxuICAgICAgICAgICAgICBsZXQgdGV4dFNwYWNlID0gNDA7XHJcbiAgICAgICAgICAgICAgLy8gYXBwZW5kIHRoZSByZWN0YW5nbGVzIGZvciB0aGUgbGVnZW5kXHJcbiAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmFwcGVuZCgncmVjdCcpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsZWdlbmQnKVxyXG4gICAgICAgICAgICAgICAgICAuYXR0cignd2lkdGgnLCBsZWdlbmRXaWR0aClcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGxlZ2VuZEhlaWdodClcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gnLCAoc3BhY2luZyAqIGkpICsgJ3B4JylcclxuICAgICAgICAgICAgICAgICAgLnN0eWxlKCdmaWxsJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnIzc0YTljZic7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGkgPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyMwNDVhOGQnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyM1MjUyNTInO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgLy8gYXBwZW5kIHRoZSB0ZXh0IGZvciB0aGUgbGVnZW5kXHJcbiAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmFwcGVuZCgndGV4dCcpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsaW5lLWNoYXJ0LWxlZ2VuZC10ZXh0JylcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ3knLCB0ZXh0U3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCd4JywgKHNwYWNpbmcgKiBpICsgbGVnZW5kV2lkdGggKyAxMCkgKyAncHgnKVxyXG4gICAgICAgICAgICAgICAgICAudGV4dChkKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAkKCcjdHJlbmRDaGFydExlZ2VuZCcpLmhpZGUoKTtcclxuXHJcbiAgICAgIHRoaXMuaW5pdExpbmVDaGFydEJ1dHRvbnMoKVxyXG5cclxuXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJbml0IGxpbmUgY2hhcnQgYnV0dG9uIGxpc3RlbmVyc1xyXG4gICAqL1xyXG4gIGluaXRMaW5lQ2hhcnRCdXR0b25zKCkge1xyXG4gICAgICAvLyBhZGQgdGhlIExpbmUgY2hhcnQgYnV0dG9ucyB0byB0aGUgZmVhdHVyZSBwYW5lbFxyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc3dhcm1fZmVhdHVyZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGxldCBjYXBpdGFsaXplZF9mZWF0dXJlX3N0cmluZyA9IHRoaXMuc3dhcm1fZmVhdHVyZXNbaV0uc3BsaXQoJ18nKS5qb2luKCcgJyk7XHJcbiAgICAgICAgICBjYXBpdGFsaXplZF9mZWF0dXJlX3N0cmluZyA9IGNhcGl0YWxpemVkX2ZlYXR1cmVfc3RyaW5nLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2FwaXRhbGl6ZWRfZmVhdHVyZV9zdHJpbmcuc2xpY2UoMSk7XHJcblxyXG4gICAgICAgICAgJCgnI2xpbmUtY2hhcnQtZmVhdHVyZS1jaGVja2JveGVzJylcclxuICAgICAgICAgICAgICAuYXBwZW5kKCc8dHI+PHRoPiA8ZGl2IGNsYXNzPVwicHJldHR5IHAtc3dpdGNoIHAtZmlsbCBwLWJpZ2dlclwiPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBjbGFzcz1cImxpbmUtY2hhcnQtY2hlY2stYm94XCIgaWQ9XCJkcmF3LScgK1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnN3YXJtX2ZlYXR1cmVzW2ldICsgJ1wiIGRhdGE9XCIjJyArIHRoaXMuc3dhcm1fZmVhdHVyZXNbaV0gKyAnTGluZVwiIC8+PGRpdiBjbGFzcz1cInN0YXRlXCI+PGxhYmVsPicgK1xyXG4gICAgICAgICAgICAgICAgICBjYXBpdGFsaXplZF9mZWF0dXJlX3N0cmluZyArICc8L2xhYmVsPjwvZGl2PjwvZGl2PjwvdGg+PC90cj4nKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgJCgnLmxpbmUtY2hhcnQtY2hlY2stYm94JykuY2hhbmdlKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgbGV0IGNoZWNrYm94ID0gJCh0aGlzKTtcclxuICAgICAgICAgIGlmIChjaGVja2JveC5wcm9wKCdjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICAkKGNoZWNrYm94LmF0dHIoJ2RhdGEnKSkuc2hvdygpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAkKGNoZWNrYm94LmF0dHIoJ2RhdGEnKSkuaGlkZSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG5cclxufVxyXG5cclxuLyoqXHJcbiAqIEFkZCBhIHRyZW5kIGNoYXJ0IHNob3dpbmcgbWVkaWFuIGFuZCBwZXJjZW50aWxlc1xyXG4gKiAvLyAtIHdoaWNoIGZlYXR1cmVcclxuICovXHJcbmV4cG9ydCBjbGFzcyBUcmVuZENoYXJ0IGV4dGVuZHMgQ2hhcnR7XHJcbiAgICBjb25zdHJ1Y3RvcihlbGVtLCBzd2FybURhdGEpe1xyXG4gICAgICBzdXBlcihzd2FybURhdGEpO1xyXG4gICAgICB0aGlzLmVsZW0gPSBlbGVtO1xyXG5cclxuICAgICAgdGhpcy50cmVuZGNoYXJ0KCk7XHJcbiAgICAgIC8vdGhpcy5kaXNhYmxlTGluZUNoYXJ0KCk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGRpc2FibGVMaW5lQ2hhcnQoKSB7XHJcbiAgICAgICAgJCgnLmxpbmVDaGFydEJ1dHRvbicpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSkucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICAgICAkKCcubGluZS1jaGFydC1jaGVjay1ib3gnKS5hdHRyKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgICAgICQoJy5saW5lQ2hhcnRMaW5lJykuYXR0cigndmlzaWJpbGl0eScsICdoaWRkZW4nKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgdHJlbmRjaGFydCgpe1xyXG4gICAgLy8gY2hlY2sgd2hpY2ggZmVhdHVyZSB0byBkaXNwbGF5IGluIHRoZSB0cmVuZCBjaGFydFxyXG4gICAgbGV0IGZlYXR1cmUgPSAnJztcclxuICAgIGlmICh0aGlzLmVsZW1bJ2lkJ10udG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnc3BlZWQnKSkge1xyXG4gICAgICAgIGZlYXR1cmUgPSAnc3BlZWQnO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmVsZW1bJ2lkJ10udG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnYWNjZWxlcmF0aW9uJykpIHtcclxuICAgICAgICBmZWF0dXJlID0gJ2FjY2VsZXJhdGlvbic7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuZWxlbVsnaWQnXS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdkaXN0YW5jZV9jZW50cm9pZCcpKSB7XHJcbiAgICAgICAgZmVhdHVyZSA9ICdkaXN0YW5jZV9jZW50cm9pZCc7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuZWxlbVsnaWQnXS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdtaWRsaW5lX29mZnNldCcpKSB7XHJcbiAgICAgICAgZmVhdHVyZSA9ICdtaWRsaW5lX29mZnNldCc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIC8vIGRhdGEgaXMgbm90IGxvYWRlZCBmdWxseSAtLSByZXR1cm5cclxuICAgIC8vaWYgKCFkYXRhc2V0WzBdW2ZlYXR1cmVdKSB7XHJcbiAgICAvLyAgICByZXR1cm47XHJcbiAgICAvL31cclxuICAgIC8vIGNoYW5nZSB0byB0aGUgdHJlbmQgY2hhcnQgbGVnZW5kXHJcbiAgICAkKCcjbGluZUNoYXJ0TGVnZW5kJykuaGlkZSgpO1xyXG4gICAgJCgnI3RyZW5kQ2hhcnRMZWdlbmQnKS5zaG93KCk7XHJcbiAgICAvLyBjaGVjayBpZiBhbHJlYWR5IGNvbXB1dGVkIGFuZCBvbmx5IGhpZGRlblxyXG4gICAgaWYgKCEkKCgnIycgKyBmZWF0dXJlICsgJ1RyZW5kQ2hhcnQnKSkubGVuZ3RoKSB7XHJcbiAgICAgICAgLy8gZ2V0IHRoZSBkYXRhIGZvciB0aGUgdHJlbmQgY2hhcnRcclxuICAgICAgICBsZXQgdHJlbmRDaGFydERhdGEgPSBbXTtcclxuICAgICAgICBsZXQgbnVtX2FuaW1hbHMgPSBhbmltYWxJZHMubGVuZ3RoO1xyXG4gICAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgcGVyY2V0aWxlcyBmb3IgZXZlcnkgdGltZSBzdGVwXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzd2FybURhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IHRtcCA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IG51bV9hbmltYWxzOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhc2V0W2kgKiBudW1fYW5pbWFscyArIGpdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG1wLnB1c2goZGF0YXNldFtpICogbnVtX2FuaW1hbHMgKyBqXVtmZWF0dXJlXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdHJlbmRDaGFydERhdGEucHVzaChwZXJjZW50aWxlc0xpbmVDaGFydCh0bXApKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy9hZ2dyZWdhdGUgYW5kIGF2ZXJhZ2UgdGhlIHRyZW5kQ2hhcnREYXRhIHRvIHRoaXMubGluZUNoYXJ0V2lkdGggZGF0YSBwb2ludHNcclxuICAgICAgICBpZiAodHJlbmRDaGFydERhdGEubGVuZ3RoID4gdGhpcy5saW5lQ2hhcnRXaWR0aCkge1xyXG4gICAgICAgICAgICBsZXQgdG1wVHJlbmRDaGFydERhdGEgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIC8vIFtwZXJjMDUscGVyYzI1LHBlcmM1MCxwZXJjNzUscGVyYzk1XVxyXG4gICAgICAgICAgICBsZXQgdG1wID0gWzAsIDAsIDAsIDAsIDBdO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmVuZENoYXJ0RGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgLy8gYWdncmVnYXRlXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRtcC5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRtcFtqXSArPSB0cmVuZENoYXJ0RGF0YVtpXVtqXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIGRpdmlkZVxyXG4gICAgICAgICAgICAgICAgaWYgKGkgJSByYXRpbyA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdG1wLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRtcFtqXSArPSB0bXBbal0gLyByYXRpbztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy9hZGQgdG8gdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgdG1wVHJlbmRDaGFydERhdGEucHVzaCh0bXApO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFtwZXJjMDUscGVyYzI1LHBlcmM1MCxwZXJjNzUscGVyYzk1XVxyXG4gICAgICAgICAgICAgICAgICAgIHRtcCA9IFswLCAwLCAwLCAwLCAwXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0cmVuZENoYXJ0RGF0YSA9IHRtcFRyZW5kQ2hhcnREYXRhO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBnZXQgbWluIGFuZCBtYXggZm9yIHRoZSBub3JtYWxpemF0aW9uXHJcbiAgICAgICAgbGV0IG1pbiA9IGQzLm1pbih0cmVuZENoYXJ0RGF0YSwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZFswXTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBsZXQgbWF4ID0gZDMubWF4KHRyZW5kQ2hhcnREYXRhLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkWzRdO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGxldCBub3JtYWxpemF0aW9uU2NhbGUgPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbbWluLCBtYXhdKS5yYW5nZShbMCwgMTAwXSk7XHJcblxyXG4gICAgICAgIC8vIGFkZCBhIGdyb3VwIGZvciB0aGUgdHJlbmQgY2hhcnRcclxuICAgICAgICBsZXQgdHJlbmRDaGFydCA9IHpvb21Hcm91cC5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAuYXR0cignaWQnLCAoZmVhdHVyZSArICdUcmVuZENoYXJ0JykpXHJcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICd0cmVuZENoYXJ0RGF0YScpO1xyXG4gICAgICAgIC8vIGFwcGVuZCB0aGUgem9vbSByZWN0YW5nbGUgYWdhaW4gdG8gdGhlIGVuZCBvZiB0aGUgZ3JvdXBcclxuICAgICAgICAkKCcuem9vbScpLmFwcGVuZFRvKCcjbGluZUNoYXJ0Wm9vbScpO1xyXG4gICAgICAgICQoJyNsaW5lQ2hhcnRUaW1lTGluZScpLmFwcGVuZFRvKCcjbGluZUNoYXJ0Wm9vbScpO1xyXG4gICAgICAgIC8vIHZhciB0byBzYXZlIHRoZSBmdW5jdGlvbnMgZm9yIHRoZSB6b29tXHJcbiAgICAgICAgdHJlbmRDaGFydHNab29tW2ZlYXR1cmVdID0ge307XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy50cmVuZENoYXJ0c0VsZW0ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgLy8gZnVuY3Rpb25zIGZvciB0aGUgdXBwZXIgYW5kIGlubmVyIGFyZWFzIGFuZCB0aGUgbWVkaWFuXHJcbiAgICAgICAgICAgIGxldCB0ZW1wO1xyXG4gICAgICAgICAgICAvLyBsb3dlciBvdXRlciBhcmVhIGFuZCBsb3dlciBpbm5lciBhcmVhXHJcbiAgICAgICAgICAgIGlmIChpIDwgMikge1xyXG4gICAgICAgICAgICAgICAgdGVtcCA9IGQzLmFyZWEoKVxyXG4gICAgICAgICAgICAgICAgICAgIC54KGZ1bmN0aW9uKGQsIGopIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHgoaik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAueTAoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geShub3JtYWxpemF0aW9uU2NhbGUoZFsoaSArIDEpXSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLnkxKGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHkobm9ybWFsaXphdGlvblNjYWxlKGRbaV0pKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBtZWRpYW4gbGluZVxyXG4gICAgICAgICAgICBlbHNlIGlmIChpID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wID0gZDMubGluZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgLngoZnVuY3Rpb24oZCwgaikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geChqKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC55KGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHkobm9ybWFsaXphdGlvblNjYWxlKGRbaV0pKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyB1cHBlciBpbm5lciBhcmVhIGFuZCB1cHBlciBvdXRlciBhcmVhXHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGkgPiAyKSB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wID0gZDMuYXJlYSgpXHJcbiAgICAgICAgICAgICAgICAgICAgLngoZnVuY3Rpb24oZCwgaikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geChqKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC55MChmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB5KG5vcm1hbGl6YXRpb25TY2FsZShkW2ldKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAueTEoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geShub3JtYWxpemF0aW9uU2NhbGUoZFsoaSAtIDEpXSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHNhdmUgdGhpcyBmb3IgdGhlIGxhdGVyIHpvb21cclxuICAgICAgICAgICAgdHJlbmRDaGFydHNab29tW2ZlYXR1cmVdW3RoaXMudHJlbmRDaGFydHNFbGVtW2ldXSA9IHRlbXA7XHJcbiAgICAgICAgICAgIC8vIGFwcGVuZCBpdCB0byB0aGUgcGF0aFxyXG4gICAgICAgICAgICB0cmVuZENoYXJ0LmFwcGVuZCgncGF0aCcpXHJcbiAgICAgICAgICAgICAgICAuZGF0YShbdHJlbmRDaGFydERhdGFdKVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgdGhpcy50cmVuZENoYXJ0c0VsZW1baV0pXHJcbiAgICAgICAgICAgICAgICAuYXR0cignZCcsIHRlbXApO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gc2hvdyB0aGUgdHJlbmQgY2hhcnRcclxuICAgICAgICAkKCgnIycgKyBmZWF0dXJlICsgJ1RyZW5kQ2hhcnQnKSkuc2hvdygpO1xyXG4gICAgfVxyXG59XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBVcGRhdGUgdGhlIGxpbmUgY2hhcnQgZmllbGRzIGFuZCB0aGUgbGluZSBjaGFydCB0aW1lIGxpbmVcclxuICovXHJcblxyXG5cclxuXHJcbi8qKlxyXG4gKiBEcmF3aW5nIGZ1bmN0aW9uIC0gaXMgY2FsbGVkIGZvciBlYWNoIHRpbWVzdGVwXHJcbiAqIGluZGV4VGltZSBzYXZlcyB0aGUgY3VycmVudCB0aW1lXHJcbiAqL1xyXG5cclxuXHJcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgIFNldHRlclxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbi8qKlxyXG4gKiBTZXQgdGhlIGluZGV4IHRpbWUgdG8gYSBuZXcgdmFsdWVcclxuICogQHBhcmFtIHtOdW1iZXJ9IHZhbHVlIC0gbmV3IHRpbWUgc3RlcFxyXG4gKi9cclxuXHJcblxyXG4vKipcclxuICogRGVjcmVhc2UgdGltZSBieSAxXHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBTZXQgdGhlIHRoZSBuZXcgYWN0aXZlIHNjYWxlIC0gZS5nLiBzcGVlZCwgYWNjZWxlcmF0aW9uLCBibGFjayBldGMuXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZSAtIGFjdGl2ZSBzY2FsZSBmb3IgdGhlIGluZGl2aWR1YWwgYW5pbWFsc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldEFjdGl2ZVNjYWxlKHZhbHVlKSB7XHJcbiAgICBhY3RpdmVTY2FsZSA9IHZhbHVlO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IHRoZSBuZXcgbWVkb2lkIGFuaW1hbFxyXG4gKiBAcGFyYW0ge051bWJlcn0gdmFsdWUgLSBVbmlxdWV0aGlzLmlkIG9mIHRoZSBhbmltYWxcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRNZWRvaWRBbmltYWwodmFsdWUpIHtcclxuICAgIG1lZG9pZEFuaW1hbCA9IHZhbHVlO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IHRoZSBzZWxlY3RlZCBhbmQgaGlnaGxpZ2h0ZWQgYW5pbWFsc1xyXG4gKiBAcGFyYW0ge2FycmF5fSB2YWx1ZSAtIGFycmF5IG9mIHVucWl1ZXRoaXMuaWQgb2YgdGhlIGFuaW1hbHNcclxuICovXHJcbiIsIi8qZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLWxldHMqL1xyXG4vKmdsb2JhbCB3aW5kb3csJCwgZDMsIFBvbHlCb29sLCBwYXJhbWV0ZXJzLCBTZXQqL1xyXG4vLyBpbXBvcnQgKiBhcyBzcHYgZnJvbSAnLi9zcGF0aWFsX3ZpZXcuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIG5ldHdvcmtIaWVyYXJjaHlcclxufSBmcm9tICcuL2V4cGxvcmUuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGluZGV4VGltZSxcclxuICAgIGFycmF5QW5pbWFscyxcclxuICAgIHNldEFjdGl2ZUFuaW1hbHMsXHJcbiAgICBkZWNJbmRleFRpbWUsXHJcbiAgICBEcmF3ZXJcclxufSBmcm9tICcuL3NwYXRpYWxfdmlldy9zcGF0aWFsX3ZpZXcuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIHNob3dOZXR3b3JrSGllcmFyY2h5LFxyXG4gICAgbmV0d29ya0NvbG9yLFxyXG4gICAgbmV0d29ya0NvbG9yU2NhbGUsXHJcbiAgICBuZXR3b3JrQXV0byxcclxuICAgIHNldE5ldHdvckxpbWl0LFxyXG4gICAgbmV0d29ya0xpbWl0LFxyXG59IGZyb20gJy4vbmV0d29yay5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgc3RhbmRhcmREZXZpYXRpb25cclxufSBmcm9tICcuL2hlbHBlcnMuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIHNldFRpbWVTbGlkZXIsXHJcbiAgICBpbml0VG9vbHRpcCxcclxuICAgIHRvb2x0aXBGdW5jdGlvbixcclxuICAgIGluaXRTbGlkZXJzLFxyXG4gICAgdG9vbHRpcFxyXG59IGZyb20gJy4vc3BhdGlhbF92aWV3L2ludGVyYWN0aW9uLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICAvL2xpbmVDaGFydCxcclxuICAgIHVwZGF0ZUxpbmVDaGFydCxcclxuICAgIExpbmVDaGFydFxyXG59IGZyb20gJy4vbGluZV9jaGFydC5qcyc7XHJcblxyXG4vL2xldCB6b29tR3JvdXA7IC8vIHpvb20gZ3JvdXAgZm9yIHRoZSBzcGVjaWZpYyBkZW5kcm9ncmFtXHJcbmxldCB0cmVlbWFwOyAvLyBiZWlkZVxyXG5sZXQgdG9vbHRpcERpdjtcclxubGV0IHNwYXRpYWxWaWV3OyAvLyBnZXQgdGhlIHNwYXRpYWwgdmlldyBzdmcgZnJvbSB0aGUgbWFpbiB2aXNcclxubGV0IHN2Z0xlZ2VuZDtcclxubGV0IGhpZXJhcmNoeUxldmVscyA9IHt9O1xyXG5sZXQgc2V0T3BlcmF0aW9uID0gJ3VuaW9uJztcclxubGV0IGlkOyAvLyBuZWVkZWQgZm9yIHRoZSBjb2xsYXBzZSBmdW5jdGlvblxyXG4vL1N0YXRpYyBjb2xvciBzY2FsZSBmb3IgdGhlIGRlbmRyb2dyYW0gdmFyaWFjbmUgY29sb3JpbmdcclxubGV0IHN0YW5kYXJkRGV2aWF0aW9uQ29sb3JTY2FsZSA9IGQzLnNjYWxlVGhyZXNob2xkKClcclxuICAgIC5kb21haW4oXHJcbiAgICAgICAgWzAsIC4xLCAuMiwgLjMsIC40LCAuNSwgLjYsIC43LCAuOCwgLjksIDFdXHJcbiAgICApXHJcbiAgICAucmFuZ2UoWycjZjdmYmZmJywgJyNkZWViZjcnLCAnI2M2ZGJlZicsICcjOWVjYWUxJywgJyM2YmFlZDYnLCAnIzQyOTJjNicsICcjMjE3MWI1JywgJyMwODUxOWMnLCAnIzA4MzA2YiddKTtcclxuXHJcbmV4cG9ydCBjb25zdCBtYXhOdW1iZXJIaWVyYXJjaGllcyA9IDQ7XHJcbmV4cG9ydCBsZXQgbmV0d29ya0hpZXJhcmNoeUlkcyA9IFtdO1xyXG5leHBvcnQgbGV0IGhpZXJhcmNoeUNvbG9ycyA9IHt9O1xyXG5leHBvcnQgbGV0IGhpZXJhcmNoeUdyb3VwU3RkZXYgPSB7fTtcclxuLy8gVE9ETyBhZGQgbW9yZSBjb2xvcnNcclxuZXhwb3J0IGxldCBjb2xvcnMgPSBbJyM3ZmM5N2YnLCAnIzM4NmNiMCcsICcjZTcyOThhJywgJyNmZjk5MDAnXTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIERlbmRyb2dyYW0gZXh0ZW5kcyBEcmF3ZXJ7XHJcbiAgY29uc3RydWN0b3IoKXtcclxuICAgIHN1cGVyKCk7XHJcbiAgICB0aGlzLmluaXREZW5kcm9ncmFtKClcclxuICB9XHJcblxyXG4gIGluaXREZW5kcm9ncmFtKCkge1xyXG4gICAgICAvLyBjb25zdGFuY3QgZmFjdG9ycyBmb3IgdGhlIGRlbmRncm9ncmFtXHJcbiAgICAgIGxldCBtYXJnaW4gPSAyMCxcclxuICAgICAgICAgIHdpZHRoID0gNTAwMCxcclxuICAgICAgICAgIGhlaWdodCA9IDUwMDA7XHJcblxyXG4gICAgICAvLyB6b29tIGZ1bmN0aW9uIGZvciB0aGUgZGVuZHJvZ3JhbVxyXG4gICAgICBsZXQgem9vbSA9IGQzLnpvb20oKVxyXG4gICAgICAgICAgLnNjYWxlRXh0ZW50KFsxLCAxMF0pXHJcbiAgICAgICAgICAub24oJ3pvb20nLCAoKT0+e1xyXG4gICAgICAgICAgICAgIC8vY29uc3RyYWluZWQgem9vbWluZ1xyXG4gICAgICAgICAgICAgIGQzLmV2ZW50LnRyYW5zZm9ybS54ID0gTWF0aC5taW4oMCwgd2lkdGggKiAoZDMuZXZlbnQudHJhbnNmb3JtLmsgLSAxKSxcclxuICAgICAgICAgICAgICAgICAgTWF0aC5tYXgod2lkdGggKiAoMSAtIGQzLmV2ZW50LnRyYW5zZm9ybS5rKSwgZDMuZXZlbnQudHJhbnNmb3JtLngpKTtcclxuXHJcbiAgICAgICAgICAgICAgZDMuZXZlbnQudHJhbnNmb3JtLnkgPSBNYXRoLm1pbigwLCBoZWlnaHQgKiAoZDMuZXZlbnQudHJhbnNmb3JtLmsgLSAxKSxcclxuICAgICAgICAgICAgICAgICAgTWF0aC5tYXgoaGVpZ2h0ICogKDEgLSBkMy5ldmVudC50cmFuc2Zvcm0uayksIGQzLmV2ZW50LnRyYW5zZm9ybS55KSk7XHJcblxyXG4gICAgICAgICAgICAgIC8vIHRyYW5zbGF0ZSBhbmQgc2NhbGVcclxuICAgICAgICAgICAgICB0aGlzLnpvb21Hcm91cC5hdHRyKCd0cmFuc2Zvcm0nLCBkMy5ldmVudC50cmFuc2Zvcm0pO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBzdmcgY29udGFpbmVyIGZvciB0aGUgZGVuZHJvZ3JhbVxyXG4gICAgICBsZXQgc3ZnID0gZDMuc2VsZWN0KCcjZGVuZHJvZ3JhbS1wYW5lbCcpXHJcbiAgICAgICAgICAuY2xhc3NlZCgnc3ZnLWRlbmRyb2dyYW0tY29udGFpbmVyJywgdHJ1ZSlcclxuICAgICAgICAgIC5hcHBlbmQoJ3N2ZycpXHJcbiAgICAgICAgICAuYXR0cigncHJlc2VydmVBc3BlY3RSYXRpbycsICd4TWluWU1pbiBtZWV0JylcclxuICAgICAgICAgIC5hdHRyKCd2aWV3Qm94JywgJzAgMCAnICsgd2lkdGggKyAnICcgKyBoZWlnaHQpXHJcbiAgICAgICAgICAvLyBhZGQgdGhlIGNsYXNzIHN2Zy1jb250ZW50XHJcbiAgICAgICAgICAuY2xhc3NlZCgnc3ZnLWNvbnRlbnQtZGVuZHJvZ3JhbScsIHRydWUpXHJcbiAgICAgICAgICAuY2FsbCh6b29tKTtcclxuXHJcbiAgICAgIGluaXREZW5kcm9ncmFtTGVnZW5kKCk7XHJcblxyXG4gICAgICAvLyBhcHBlbmQgdGhlIHpvb20gZ3JvdXAgdG8gdGhlIHN2Z1xyXG4gICAgICB0aGlzLnpvb21Hcm91cCA9IHN2Zy5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIG1hcmdpbiArICcsJyArIG1hcmdpbiArICcpJylcclxuICAgICAgICAgIC5hcHBlbmQoJ3N2ZzpnJyk7XHJcblxyXG4gICAgICAvLyBkMyB0cmVlXHJcbiAgICAgIHRyZWVtYXAgPSBkMy50cmVlKCkgLy9kMy5jbHVzdGVyKClcclxuICAgICAgICAgIC5zaXplKFsoaGVpZ2h0IC0gMTAgKiBtYXJnaW4pLCAod2lkdGggLSAxMCAqIG1hcmdpbildKTtcclxuXHJcbiAgICAgIC8vIHNldCB0aGUgc3BhdGlhbCB2aWV3IC0gbmVlZGVkIHRvIGFkZCB0aGUgY2x1c3RlcmluZyB0byB0aGUgc3BhdGlhbCB2aWV3IHdpbmRvd1xyXG4gICAgICBzcGF0aWFsVmlldyA9IGQzLnNlbGVjdCgnLnRhbmsnKTtcclxuXHJcbiAgICAgIC8vIGluaXQgZGVuZHJvZ3JhbSBzbGlkZXJcclxuICAgICAgLy8gaW5pdGlhbGl6ZSB0aGUgTmV0d29yayBzbGlkZXJcclxuICAgICAgJCgnI2RlbmRyb2dyYW0tcGFuZWwtbGV2ZWwtc2xpZGVyJylcclxuICAgICAgICAgIC5zbGlkZXIoe1xyXG4gICAgICAgICAgICAgIHJhbmdlOiAnbWF4JyxcclxuICAgICAgICAgICAgICBtaW46IDIsXHJcbiAgICAgICAgICAgICAgbWF4OiAyLFxyXG4gICAgICAgICAgICAgIHN0ZXA6IDEsXHJcbiAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuaGllcmFyY2h5TGV2ZWxzWydoMCddLFxyXG4gICAgICAgICAgICAgIHNsaWRlOiAoZXZlbnQsIHVpKT0+e1xyXG4gICAgICAgICAgICAgICAgICBsZXQgaWQgPSAkKCcuc2hvdy1kZW5kcm9ncmFtLmJ0bi1wcmltYXJ5JykuYXR0cignZGF0YScpO1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnNldEhpZXJhcmNoeUxldmVsKGlkLCB1aS52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRGVuZHJvZ3JhbSgpO1xyXG4gICAgICAgICAgICAgICAgICAvLyBpZiBubyBhbmltYXRpb24gaXMgYWN0aXZlIGRyYXcgdGhlIG5ldyBjbHVzdGVyaW5nIGFuZCBkZW5kcm9ncmFtXHJcbiAgICAgICAgICAgICAgICAgIC8vIGRyYXdEZW5kcm9ncmFtKCk7XHJcbiAgICAgICAgICAgICAgICAgIGlmICghJCgnI3BsYXktYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWNJbmRleFRpbWUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3RGVuZHJvZ3JhbSgpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBpbml0IHRoZSB0b29sdGlwIGZvciB0aGUgZGVuZHJvZ3JhbVxyXG4gICAgICB0b29sdGlwRGl2ID0gZDMuc2VsZWN0KCcjZGVuZHJvZ3JhbS10b29sdGlwJylcclxuICAgICAgICAgIC5zdHlsZSgnbGVmdCcsIDAgKyAncHgnKVxyXG4gICAgICAgICAgLnN0eWxlKCd0b3AnLCAwICsgJ3B4JylcclxuICAgICAgICAgIC5vbignbW91c2VvdmVyJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgdG9vbHRpcERpdlxyXG4gICAgICAgICAgICAgICAgICAuc3R5bGUoJ29wYWNpdHknLCAxKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAvLyBpbml0IHRoZSBoaWVyYXJjaHkgbGVnZW5kXHJcbiAgICAgIGxldCBsZWdlbmRXaWR0aCA9IG1heE51bWJlckhpZXJhcmNoaWVzICogMTAwO1xyXG4gICAgICBsZXQgbGVnZW5kSGVpZ2h0ID0gNjA7XHJcblxyXG4gICAgICBzdmdMZWdlbmQgPSBkMy5zZWxlY3QoJyNoaWVyYXJjaHktbGVnZW5kLWRpdicpXHJcbiAgICAgICAgICAuYXBwZW5kKCdzdmcnKVxyXG4gICAgICAgICAgLmF0dHIoJ2lkJywgJ2hpZXJhcmNoeS1sZWdlbmQnKVxyXG4gICAgICAgICAgLmF0dHIoJ3dpZHRoJywgbGVnZW5kV2lkdGgpXHJcbiAgICAgICAgICAuYXR0cignaGVpZ2h0JywgbGVnZW5kSGVpZ2h0KTtcclxuXHJcbiAgICAgIC8vIGFkZCBwYXR0ZXJuIGZvciBzdHJpcGVkIGJhY2tncm91bmQgb2YgaW50ZXJzZWN0aW9ucyBldGMuXHJcbiAgICAgIHNwYXRpYWxWaWV3LmFwcGVuZCgnZGVmcycpXHJcbiAgICAgICAgICAuYXBwZW5kKCdzdmc6cGF0dGVybicpXHJcbiAgICAgICAgICAuYXR0cignaWQnLCAnc3RyaXBlZCcpXHJcbiAgICAgICAgICAuYXR0cigncGF0dGVyblVuaXRzJywgJ3VzZXJTcGFjZU9uVXNlJylcclxuICAgICAgICAgIC5hdHRyKCd3aWR0aCcsICcyMCcpXHJcbiAgICAgICAgICAuYXR0cignaGVpZ2h0JywgJzUnKVxyXG4gICAgICAgICAgLmF0dHIoJ3BhdHRlcm5UcmFuc2Zvcm0nLCAncm90YXRlKDYwKScpXHJcbiAgICAgICAgICAuYXBwZW5kKCdyZWN0JylcclxuICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIDUpXHJcbiAgICAgICAgICAuYXR0cignaGVpZ2h0JywgMTApXHJcbiAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgwLDApJylcclxuICAgICAgICAgIC5zdHlsZSgnZmlsbCcsICcjNjcwMDBkJyk7XHJcblxyXG4gIH07XHJcblxyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEluaXRpYWxpemUgdGhlIGRlbmRyb2dyYW1cclxuICovXHJcblxyXG5cclxuLyoqXHJcbiAqIERyYXcgdGhlIGRlbmRncm9ncmFtIGZvciBvbmUgc3RlcFxyXG4gKiBGdXJ0aGVyIGNhbGxzIHRoZSBkcmF3SGllcmFyY2h5IGZ1bmN0aW9uXHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBDb2xsYXBzZSBmdW5jdGlvbiAtIG9ubHkgc2hvdyB0aGUgYWN0aXZlIGxldmVsIGFuZCBvbmUgc3ViIGxldmVsXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY29sbGFwc2UoZCkge1xyXG4gICAgaWYgKGQuY2hpbGRyZW4gJiYgZC5kZXB0aCA8PSBoaWVyYXJjaHlMZXZlbHNbJ2gnICsgaWRdKSB7XHJcbiAgICAgICAgZC5fY2hpbGRyZW4gPSBkLmNoaWxkcmVuO1xyXG4gICAgICAgIGQuX2NoaWxkcmVuLmZvckVhY2goY29sbGFwc2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBkLmNoaWxkcmVuID0gbnVsbDtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIERyYXcgdGhlIGFsbCBoaWVyYXJjaGllcyBpbiB0aGUgc3BhdGlhbCB2aWV3XHJcbiAqIGFkZCBhIGdyb3VwIHdpdGggdGhlIGlkcyBvZiB0aGUgYW5pbWFscyBpbiBpdCB0byB0aGUgdmlld1xyXG4gKiB3aXRoIHBhdGggY2hpbGQgZWxlbWVudHNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBkcmF3SGllcmFyY2h5KCkge1xyXG4gICAgLy8gaWQgb2YgdGhlIGhpZXJhcmNoeSBlLmcuIFsxLDUsM11cclxuICAgIGxldCBoaWVyYXJjaHlJZHMgPSBPYmplY3Qua2V5cyhuZXR3b3JrSGllcmFyY2h5KS5tYXAoZnVuY3Rpb24oeCkge1xyXG4gICAgICAgIHJldHVybiB4LnJlcGxhY2UoJ2gnLCAnJyk7XHJcbiAgICB9KTtcclxuICAgIC8vICBUaGUgY2x1c3RlcmluZyBpbiBhbiAyRCBhcnJheSB3aXRoIHdoaWNoIGFuaW1hbCBpZCBiZWxvbmdzIHRvIHdoaWNoIGdyb3VwXHJcbiAgICBsZXQgaGllcmFyY2h5VmVydGljZXMgPSBbXTtcclxuXHJcbiAgICAvLyBpdGVyYXRlIG92ZXIgdGhlIGhpZXJhcmNoeSBkYXRhIHRvIGdldCB0aGUgaGllcmFyY2h5IGFuaW1hbCBpZHMgcGVyIGNsdXN0ZXJpbmcgYW5kIGdyb3VwaW5nXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhpZXJhcmNoeUlkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGxldCB0cmVlRGF0YSA9IG5ldHdvcmtIaWVyYXJjaHlbJ2gnICsgaGllcmFyY2h5SWRzW2ldXVtpbmRleFRpbWVdO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHRyZWVEYXRhKTtcclxuICAgICAgICBsZXQgbm9kZXMgPSBkMy5oaWVyYXJjaHkodHJlZURhdGEsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGQuY2hpbGRyZW47XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG5vZGVzID0gdHJlZW1hcChub2Rlcyk7XHJcbiAgICAgICAgbGV0IHJvb3QgPSBub2Rlc1snY2hpbGRyZW4nXVswXTtcclxuICAgICAgICBpZiAoc2hvd05ldHdvcmtIaWVyYXJjaHkgPT09IGhpZXJhcmNoeUlkc1tpXSkge1xyXG4gICAgICAgICAgICBuZXR3b3JrSGllcmFyY2h5SWRzID0gZ2V0SGllcmFyY2h5TGV2ZWwocm9vdCwgaGllcmFyY2h5SWRzW2ldKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gYWRkIHRoZSB2ZXJ0aWNlcyBpbnRvIHRoZSBhcnJheVxyXG4gICAgICAgIGhpZXJhcmNoeVZlcnRpY2VzLnB1c2goZ2V0SGllcmFyY2h5VmVydGljZXMoZ2V0SGllcmFyY2h5TGV2ZWwocm9vdCwgaGllcmFyY2h5SWRzW2ldKSkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGlmIG1vcmUgdGhhbiAyIGhpZXJhcmNoaWVzIGFyZSBkcmF3blxyXG4gICAgaWYgKGhpZXJhcmNoeVZlcnRpY2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAvLyB1bmlvbiB0aGUgbGlzdCBvZiBwb2x5Z29ucyB0byBvbmUgcG9seWdvblxyXG4gICAgICAgIC8vIGZvciAobGV0IGkgPSAwOyBpIDwgaGllcmFyY2h5SWRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgLy8gICAgIGhpZXJhcmNoeVZlcnRpY2VzW2ldID0gdW5pb25Qb2x5Z29ucyhoaWVyYXJjaHlWZXJ0aWNlc1tpXSk7XHJcbiAgICAgICAgLy8gfVxyXG5cclxuICAgICAgICAvLyB0cmFuc2Zvcm0gYW5kIGNhbGN1bGF0ZSB0aGUgaW50ZXJzZWN0aW9uIHBvbHlnb25zIG9mIHRoZSBuIGhpZXJhcmNoaWVzXHJcbiAgICAgICAgLy8gaWYgKHNldE9wZXJhdGlvbiA9PT0gJ2ludGVyc2VjdGlvbicpIHtcclxuICAgICAgICAvLyAgICAgLy8gdGVtcCBzb2x1dGlvbiBvZiB0d28gaW50ZXJzZWN0aW9uc1xyXG4gICAgICAgIC8vICAgICBsZXQgdG1wSW50ZXJzZWN0aW9uID0gaGllcmFyY2h5VmVydGljZXNbMF07XHJcbiAgICAgICAgLy8gICAgIC8vIGl0ZXJhdGUgb3ZlciB0aGUgaGllcmFyY2hpZXMgYW5kIGludGVyc2VjdCBhbGwgb2YgdGhlbVxyXG4gICAgICAgIC8vICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGhpZXJhcmNoeVZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgLy8gICAgICAgICAvLyBpbnRlcnNlY3Rpb25cclxuICAgICAgICAvLyAgICAgICAgIHRtcEludGVyc2VjdGlvbiA9IFBvbHlCb29sLmludGVyc2VjdCh7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgcmVnaW9uczogdG1wSW50ZXJzZWN0aW9uLCAvLyBsaXN0IG9mIHJlZ2lvbnNcclxuICAgICAgICAvLyAgICAgICAgICAgICBpbnZlcnRlZDogZmFsc2UgLy8gaXMgdGhpcyBwb2x5Z29uIGludmVydGVkP1xyXG4gICAgICAgIC8vICAgICAgICAgfSwge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIHJlZ2lvbnM6IGhpZXJhcmNoeVZlcnRpY2VzW2ldLFxyXG4gICAgICAgIC8vICAgICAgICAgICAgIGludmVydGVkOiBmYWxzZVxyXG4gICAgICAgIC8vICAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gICAgICAgICAvLyBjb252ZXJ0IGl0IGFnYWluXHJcbiAgICAgICAgLy8gICAgICAgICB0bXBJbnRlcnNlY3Rpb24gPSB0bXBJbnRlcnNlY3Rpb25bJ3JlZ2lvbnMnXTtcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gICAgIC8vIHJlc3VsdFxyXG4gICAgICAgIC8vICAgICBoaWVyYXJjaHlWZXJ0aWNlcyA9IFt0bXBJbnRlcnNlY3Rpb25dO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICAvLyAvLyB0cmFuc2Zvcm0gYW5kIGNhbGN1bGF0ZSB0aGUgc3ltbWV0cmljIGRpZmZlcmVuY2UgcG9seWdvbnMgb2YgdGhlIG4gaGllcmFyY2hpZXNcclxuICAgICAgICAvLyBlbHNlIGlmIChzZXRPcGVyYXRpb24gPT09ICdzeW0tZGlmZmVyZW5jZScpIHtcclxuICAgICAgICAvLyAgICAgLy8geG9yID0gVW5pb24gb2YgYWxsIGhpZXJhcmNoaWVzIC0gaW50ZXJzZWN0aW9uIG9mIGFsbCBoaWVyYXJjaGllc1xyXG4gICAgICAgIC8vICAgICAvLyB0ZW1wIHNvbHV0aW9uIG9mIHR3byBpbnRlcnNlY3Rpb25zXHJcbiAgICAgICAgLy8gICAgIGxldCB0bXBJbnRlcnNlY3Rpb24gPSBoaWVyYXJjaHlWZXJ0aWNlc1swXTtcclxuICAgICAgICAvLyAgICAgLy8gaXRlcmF0ZSBvdmVyIHRoZSBoaWVyYXJjaGllcyBhbmQgaW50ZXJzZWN0IGFsbCBvZiB0aGVtXHJcbiAgICAgICAgLy8gICAgIGZvciAobGV0IGkgPSAxOyBpIDwgaGllcmFyY2h5VmVydGljZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAvLyAgICAgICAgIC8vIGludGVyc2VjdGlvblxyXG4gICAgICAgIC8vICAgICAgICAgdG1wSW50ZXJzZWN0aW9uID0gUG9seUJvb2wuaW50ZXJzZWN0KHtcclxuICAgICAgICAvLyAgICAgICAgICAgICByZWdpb25zOiB0bXBJbnRlcnNlY3Rpb24sIC8vIGxpc3Qgb2YgcmVnaW9uc1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIGludmVydGVkOiBmYWxzZSAvLyBpcyB0aGlzIHBvbHlnb24gaW52ZXJ0ZWQ/XHJcbiAgICAgICAgLy8gICAgICAgICB9LCB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgcmVnaW9uczogaGllcmFyY2h5VmVydGljZXNbaV0sXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgaW52ZXJ0ZWQ6IGZhbHNlXHJcbiAgICAgICAgLy8gICAgICAgICB9KTtcclxuICAgICAgICAvLyAgICAgICAgIC8vIGNvbnZlcnQgaXQgYWdhaW5cclxuICAgICAgICAvLyAgICAgICAgIHRtcEludGVyc2VjdGlvbiA9IHRtcEludGVyc2VjdGlvblsncmVnaW9ucyddO1xyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gICAgIC8vIGludGVyc2VjdGlvbiByZXN1bHRcclxuICAgICAgICAvLyAgICAgbGV0IGludGVyc2VjdGlvbkhpZXJhcmNoeVBvbHlnb25zID0gdG1wSW50ZXJzZWN0aW9uO1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gICAgIC8vIHVuaW9uXHJcbiAgICAgICAgLy8gICAgIGxldCB0bXBVbmlvbiA9IGhpZXJhcmNoeVZlcnRpY2VzWzBdO1xyXG4gICAgICAgIC8vICAgICAvLyBpdGVyYXRlIG92ZXIgdGhlIGhpZXJhcmNoaWVzIGFuZCBpbnRlcnNlY3QgYWxsIG9mIHRoZW1cclxuICAgICAgICAvLyAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBoaWVyYXJjaHlWZXJ0aWNlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIC8vICAgICAgICAgLy8gaW50ZXJzZWN0aW9uXHJcbiAgICAgICAgLy8gICAgICAgICB0bXBVbmlvbiA9IFBvbHlCb29sLnVuaW9uKHtcclxuICAgICAgICAvLyAgICAgICAgICAgICByZWdpb25zOiB0bXBVbmlvbiwgLy8gbGlzdCBvZiByZWdpb25zXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgaW52ZXJ0ZWQ6IGZhbHNlIC8vIGlzIHRoaXMgcG9seWdvbiBpbnZlcnRlZD9cclxuICAgICAgICAvLyAgICAgICAgIH0sIHtcclxuICAgICAgICAvLyAgICAgICAgICAgICByZWdpb25zOiBoaWVyYXJjaHlWZXJ0aWNlc1tpXSxcclxuICAgICAgICAvLyAgICAgICAgICAgICBpbnZlcnRlZDogZmFsc2VcclxuICAgICAgICAvLyAgICAgICAgIH0pO1xyXG4gICAgICAgIC8vICAgICAgICAgLy8gY29udmVydCBpdCBhZ2FpblxyXG4gICAgICAgIC8vICAgICAgICAgdG1wVW5pb24gPSB0bXBVbmlvblsncmVnaW9ucyddO1xyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gICAgIGxldCB1bmlvbkhpZXJhcmNoeVBvbHlnb25zID0gdG1wVW5pb247XHJcbiAgICAgICAgLy9cclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vICAgICAvLyBzeW1tZXRyaWMgZGlmZmVyZW5jZVxyXG4gICAgICAgIC8vICAgICBsZXQgdG1wRGlmZmVyZW5jZSA9IFBvbHlCb29sLnhvcih7XHJcbiAgICAgICAgLy8gICAgICAgICByZWdpb25zOiB1bmlvbkhpZXJhcmNoeVBvbHlnb25zLCAvLyBsaXN0IG9mIHJlZ2lvbnNcclxuICAgICAgICAvLyAgICAgICAgIGludmVydGVkOiBmYWxzZSAvLyBpcyB0aGlzIHBvbHlnb24gaW52ZXJ0ZWQ/XHJcbiAgICAgICAgLy8gICAgIH0sIHtcclxuICAgICAgICAvLyAgICAgICAgIHJlZ2lvbnM6IGludGVyc2VjdGlvbkhpZXJhcmNoeVBvbHlnb25zLFxyXG4gICAgICAgIC8vICAgICAgICAgaW52ZXJ0ZWQ6IGZhbHNlXHJcbiAgICAgICAgLy8gICAgIH0pO1xyXG4gICAgICAgIC8vICAgICAvLyBjb252ZXJ0IGl0IGFnYWluXHJcbiAgICAgICAgLy8gICAgIHRtcERpZmZlcmVuY2UgPSB0bXBEaWZmZXJlbmNlWydyZWdpb25zJ107XHJcbiAgICAgICAgLy8gICAgIC8vIHJlc3VsdFxyXG4gICAgICAgIC8vICAgICBoaWVyYXJjaHlWZXJ0aWNlcyA9IFt0bXBEaWZmZXJlbmNlXTtcclxuICAgICAgICAvLyB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gREFUQSBKb2luXHJcbiAgICBsZXQgaGllcmFyY2hpZXMgPSBzcGF0aWFsVmlld1xyXG4gICAgICAgIC5zZWxlY3RBbGwoJ2cuaGllcmFyY2h5LWdyb3VwJylcclxuICAgICAgICAuZGF0YShoaWVyYXJjaHlWZXJ0aWNlcyk7XHJcblxyXG4gICAgLy8gRU5URVIgdGhlIGdyb3VwcyAtIGFkZHMgYSBzcGVjaWZpYyBpZCBhbmQgY29sb3JcclxuICAgIGhpZXJhcmNoaWVzXHJcbiAgICAgICAgLmVudGVyKClcclxuICAgICAgICAuYXBwZW5kKCdnJylcclxuICAgICAgICAuYXR0cignY2xhc3MnLCBmdW5jdGlvbihkLCBpKSB7XHJcbiAgICAgICAgICAgIGlmIChzZXRPcGVyYXRpb24gPT09ICdpbnRlcnNlY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2hpZXJhcmNoeS1ncm91cCBpbnRlcnNlY3Rpb24nO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNldE9wZXJhdGlvbiA9PT0gJ3N5bS1kaWZmZXJlbmNlJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdoaWVyYXJjaHktZ3JvdXAgc3ltLWRpZmZlcmVuY2UnO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdoaWVyYXJjaHktZ3JvdXAgaCcgKyBoaWVyYXJjaHlJZHNbaV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC5zdHlsZSgnZmlsbCcsIGZ1bmN0aW9uKGQsIGkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGhpZXJhcmNoeUNvbG9yc1snaCcgKyBoaWVyYXJjaHlJZHNbaV1dO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmF0dHIoJ3N0cm9rZScsIGZ1bmN0aW9uKGQsIGkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGhpZXJhcmNoeUNvbG9yc1snaCcgKyBoaWVyYXJjaHlJZHNbaV1dO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLm1vdmVUb0JhY2soKTtcclxuXHJcbiAgICAvLyBVUERBVEUgLSB0aGUgY2xhc3MgbmVlZGVkIGZvciBpbnRlcnNlY3Rpb24gYW5kIHN5bW1ldHJpYyBkaWZmZXJlbmNlXHJcbiAgICBoaWVyYXJjaGllcy5hdHRyKCdjbGFzcycsIGZ1bmN0aW9uKGQsIGkpIHtcclxuICAgICAgICBpZiAoc2V0T3BlcmF0aW9uID09PSAnaW50ZXJzZWN0aW9uJykge1xyXG4gICAgICAgICAgICByZXR1cm4gJ2hpZXJhcmNoeS1ncm91cCBpbnRlcnNlY3Rpb24nO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoc2V0T3BlcmF0aW9uID09PSAnc3ltLWRpZmZlcmVuY2UnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnaGllcmFyY2h5LWdyb3VwIHN5bS1kaWZmZXJlbmNlJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gJ2hpZXJhcmNoeS1ncm91cCBoJyArIGhpZXJhcmNoeUlkc1tpXTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBFWElUXHJcbiAgICBoaWVyYXJjaGllcy5leGl0KClcclxuICAgICAgICAucmVtb3ZlKCk7XHJcblxyXG4gICAgLy8gSGllcmFjaHkgaHVsbHMgYWRkZWQgdG8gdGhlIHNwYXRpYWwgdmlldyAtIGdldCB0aGUgcG9pbnRzIGZvciBlYWNoIGFuaW1hbCBpbiB0aGVcclxuICAgIC8vIHNwYXRpYWwgdmlldyBzbyB0aGF0IGEgY29udmV4IGh1bGwgY2FuIGJlIGNhbGN1bGF0ZWRcclxuICAgIGxldCBoaWVyYXJ5SHVsbHMgPSBoaWVyYXJjaGllcy5zZWxlY3RBbGwoJ3BhdGguaGllcmFyY2h5LWh1bGwtcGF0aCcpXHJcbiAgICAgICAgLmRhdGEoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAvLyBFTlRFUiBhbmQgY2FsY3VsYXRlIHRoZSBjb252ZXggaHVsbFxyXG4gICAgaGllcmFyeUh1bGxzXHJcbiAgICAgICAgLmVudGVyKClcclxuICAgICAgICAuYXBwZW5kKCdwYXRoJylcclxuICAgICAgICAvLyAuYXR0cignaWQnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgLy8gICAgIHJldHVybiAnaHAnICsgZC5qb2luKCcnKS5yZXBsYWNlKC8sL2csICcnKTtcclxuICAgICAgICAvLyB9KVxyXG4gICAgICAgIC5hdHRyKCdjbGFzcycsICdoaWVyYXJjaHktaHVsbC1wYXRoJylcclxuICAgICAgICAuYXR0cignZCcsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgLy8gcmV0dXJuIGRyYXdMaW5lKGQpO1xyXG4gICAgICAgICAgICByZXR1cm4gJ00nICsgZC5qb2luKCdMJykgKyAnWic7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgLy8gVVBEQVRFIHRoZSBjb252ZXggaHVsbFxyXG4gICAgaGllcmFyeUh1bGxzXHJcbiAgICAgICAgLmF0dHIoJ2QnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgIC8vIHJldHVybiBkcmF3TGluZShkKTtcclxuICAgICAgICAgICAgcmV0dXJuICdNJyArIGQuam9pbignTCcpICsgJ1onO1xyXG4gICAgICAgIH0pO1xyXG4gICAgLy8gLmF0dHIoJ2lkJywgZnVuY3Rpb24oZCkge1xyXG4gICAgLy8gcmV0dXJuICdocCcgKyBkLmpvaW4oJycpLnJlcGxhY2UoLywvZywgJycpO1xyXG4gICAgLy8gfSk7XHJcbiAgICAvLyBFWElUXHJcbiAgICBoaWVyYXJ5SHVsbHMuZXhpdCgpXHJcbiAgICAgICAgLnJlbW92ZSgpO1xyXG5cclxufVxyXG5cclxuLyoqXHJcbiAqIFVuaW9uIG11bHRpcGxlIHBvbHlnb25zIHRvZ2V0aGVyIC0gbmVlZGVkIG9yIGVsc2UgdGhlcmUgd2lsbCBiZSBob2xlcyBpbiB0aGUgaW50ZXJzZWN0aW9uc1xyXG4gKiBAcGFyYW0ge2FycmF5fSBwb2x5Z29ucyAtIGFycmF5IG9mIGFycmF5IG9mIHBvaW50c1xyXG4gKi9cclxuLy8gZnVuY3Rpb24gdW5pb25Qb2x5Z29ucyhwb2x5Z29ucykge1xyXG4vLyAgICAgLy8gY29uc29sZS5sb2cocG9seWdvbnMpO1xyXG4vLyAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwb2x5Z29ucy5sZW5ndGg7IGkrKykge1xyXG4vLyAgICAgICAgIHBvbHlnb25zW2ldID0ge1xyXG4vLyAgICAgICAgICAgICByZWdpb25zOiBbcG9seWdvbnNbaV1dLFxyXG4vLyAgICAgICAgICAgICBpbnZlcnRlZDogZmFsc2UgLy8gaXMgdGhpcyBwb2x5Z29uIGludmVydGVkP1xyXG4vLyAgICAgICAgIH07XHJcbi8vICAgICB9XHJcbi8vICAgICAvLyB1bmlvbiBhIGxpc3Qgb2YgcG9seWdvbnMgdG9nZXRoZXJcclxuLy8gICAgIGxldCBzZWdtZW50cyA9IFBvbHlCb29sLnNlZ21lbnRzKHBvbHlnb25zWzBdKTtcclxuLy8gICAgIGZvciAobGV0IGkgPSAxOyBpIDwgcG9seWdvbnMubGVuZ3RoOyBpKyspIHtcclxuLy8gICAgICAgICBsZXQgc2VnMiA9IFBvbHlCb29sLnNlZ21lbnRzKHBvbHlnb25zW2ldKTtcclxuLy8gICAgICAgICBsZXQgY29tYiA9IFBvbHlCb29sLmNvbWJpbmUoc2VnbWVudHMsIHNlZzIpO1xyXG4vLyAgICAgICAgIHNlZ21lbnRzID0gUG9seUJvb2wuc2VsZWN0VW5pb24oY29tYik7XHJcbi8vICAgICB9XHJcbi8vICAgICByZXR1cm4gUG9seUJvb2wucG9seWdvbihzZWdtZW50cylbJ3JlZ2lvbnMnXTtcclxuLy8gfVxyXG5cclxuLyoqXHJcbiAqIEVkZ2UgZHJhd2luZyBtZXRob2Qgb2YgdGhlIGRlbmRyb2dyYW1cclxuICogQHBhcmFtIHtvYmplY3R9IGQgLSBUcmVlbWFwIGVsZW1lbnRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBkaWFnb25hbExpbmVzKGQpIHtcclxuICAgIHJldHVybiAnTScgKyBkLnggKyAnLCcgKyBkLnkgK1xyXG4gICAgICAgICdWJyArIGQucGFyZW50LnkgKyAnSCcgKyBkLnBhcmVudC54O1xyXG59XHJcblxyXG4vKipcclxuICogT24gY2xpY2sgZnVuY3Rpb24gLSBoaWdobGlnaHQgdGhlIGVsZW1lbnRzIGluIHRoZSBzcGF0aWFsIHZpZXdcclxuICogQHBhcmFtIHtvYmplY3R9IGQgLSBUcmVlbWFwIGVsZW1lbnRcclxuICovXHJcbmZ1bmN0aW9uIGNsaWNrKGQpIHtcclxuICAgIHNldEFjdGl2ZUFuaW1hbHMoZFsnZGF0YSddWyduYW1lJ10pO1xyXG4gICAgLy8gaWYgbm8gYW5pbWF0aW9uIGlzIGFjdGl2ZSBkcmF3IHRoZSBkcmF3IG9uZSBzdGVwXHJcbiAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgIGRlY0luZGV4VGltZSgpO1xyXG4gICAgICAgIGRyYXcoKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBhbGwgdGhlIGNsdXN0ZXJpbmcgb2YgYSBzcGVjaWZpYyBsZXZlbCBpbiB0aGUgZGVuZHJvZ3JhbSB0cmVlXHJcbiAqIEZvciBpbnN0YW5jZSBhbGwgY2x1c3RlcnMgZnJvbSBsZXZlbCA1XHJcbiAqIEBwYXJhbSB7b2JqZWN0fSByb290IC0gUm9vdCBvZiB0aGUgdHJlZW1hcFxyXG4gKiBAcGFyYW0ge251bWJlcn0gaGllYXJjaHkgLSBOdW1iZXIgb2YgaGllcmFyY2h5IGZyb20gWzAtM11cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRIaWVyYXJjaHlMZXZlbChyb290LCBoaWVyYXJjaHkpIHtcclxuICAgIGxldCByZXN1bHQgPSBbXTtcclxuICAgIGxldCBsZXZlbCA9IGhpZXJhcmNoeUxldmVsc1snaCcgKyBoaWVyYXJjaHldO1xyXG5cclxuICAgIC8vIHNlY29uZCBsZXZlbCBvZiB0aGUgYXJyYXlcclxuICAgIGxldCB0bXBfbm9kZXMgPSByb290WydjaGlsZHJlbiddO1xyXG4gICAgLy8gaXRlcmF0ZSB0aHJvdWdoIHRoZSB0cmVlXHJcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IHJvb3RbJ2hlaWdodCddOyBpKyspIHtcclxuICAgICAgICAvLyBjaGVjayBpZiB3ZSBhcmUgYXQgdGhlIHNlYXJjaGVkIGxldmVsXHJcbiAgICAgICAgaWYgKHRtcF9ub2Rlc1swXSAmJiB0bXBfbm9kZXNbMF1bJ2RlcHRoJ10gPT09IGxldmVsKSB7XHJcbiAgICAgICAgICAgIC8vIGFkZCBlYWNoIGNsdXN0ZXIgdG8gdGhlIHJlc3VsdCBzZXRcclxuICAgICAgICAgICAgdG1wX25vZGVzLmZvckVhY2goZnVuY3Rpb24obm9kZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBub2RlWydkYXRhJ11bJ25hbWUnXSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChub2RlWydkYXRhJ11bJ25hbWUnXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gZ2V0IGFsbCBjaGlsZHJlbiBvZiBhIHNwZWNpZmljIGxldmVsIGluIHRoZSB0cmVlXHJcbiAgICAgICAgbGV0IHRtcCA9IFtdO1xyXG4gICAgICAgIHRtcF9ub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uKG5vZGUpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBub2RlWydjaGlsZHJlbiddICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgdG1wID0gdG1wLmNvbmNhdChub2RlWydjaGlsZHJlbiddKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRtcF9ub2RlcyA9IHRtcDtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXR1cm4gdGhlIHNwZWNpZmljIHZlcnRpY2VzIG9mIGEgY2x1c3RlcmluZyBpbiB0aGUgc3BhdGlhbCB2aWV3XHJcbiAqIFJldHVybiBhbiBhcnJheSBvZiBwb2ludHMgW1t4LHldW3gseV0uLi5dXHJcbiAqIEBwYXJhbSB7QXJyYXl9IGhpZXJhcmNoaWVzIC0gQXJyYXkgb2YgYXJyYXlzIHdpdGggZWFjaCBhcnJheSBjb250YWlucyBhbGwgdGhlIGlkcyBmb3IgYSBzcGVjaWZpYyBjbHVzdGVyaW5nXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0SGllcmFyY2h5VmVydGljZXMoaGllcmFyY2hpZXMpIHtcclxuICAgIGxldCByZXN1bHQgPSBbXTsgLy8gcmVzdWx0IHNldFxyXG4gICAgaGllcmFyY2hpZXMuZm9yRWFjaChmdW5jdGlvbihjbHVzdGVyKSB7XHJcbiAgICAgICAgbGV0IHZlcnRpY2VzID0gW107IC8vIHZlcnRpY2VzIG9mIHRoZSBjbHVzdGVycyBpbiB0aGUgc3BhdGlhbCB2aWV3XHJcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBjbHVzdGVyLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgIGxldCBncm91cE1lbWJlciA9IGFycmF5QW5pbWFscy5maW5kKGQgPT4gZFsnYSddID09PSBjbHVzdGVyW2pdKTtcclxuICAgICAgICAgICAgaWYgKGdyb3VwTWVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICB2ZXJ0aWNlcy5wdXNoKFtncm91cE1lbWJlclsncCddWzBdLCAtZ3JvdXBNZW1iZXJbJ3AnXVsxXV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEFuZHJldyBtb250b25lIGNoYWluIGFsZ29yaXRobSByZXV0cm5zIGZvciBwb2ludHMgZmV3ZXIgdGhhbiAzIG51bGxcclxuICAgICAgICBpZiAodmVydGljZXMubGVuZ3RoID49IDMpIHtcclxuICAgICAgICAgICAgcmVzdWx0LnB1c2goZDMucG9seWdvbkh1bGwodmVydGljZXMpKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXQgdGhlIGFjdGl2ZSBsZXZlbCBmb3IgYSBzcGVjaWZpYyBkZW5kcm9ncmFtXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBoaWVyYXJjaHkgLSBIaWVyYXJjaHkgY2FuIGJlIGZyb20gWzAtM11cclxuICogQHBhcmFtIHtudW1iZXJ9IGxldmVsIC0gTmV3IGFjdGl2ZSBsZXZlbFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldEhpZXJhcmNoeUxldmVsKGhpZXJhcmNoeSwgbGV2ZWwpIHtcclxuICAgIC8vIFRPRE8gY2F0Y2ggY2FzZXMgPCAwIGFuZCBiaWdnZXIgdGhhbiBvdmVyYWxsIGhlaWdodFxyXG4gICAgaGllcmFyY2h5TGV2ZWxzWydoJyArIGhpZXJhcmNoeV0gPSBsZXZlbDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlbW92ZSB0aGUgZW50cnkgZm9yIHRoZSBoaWVyYXJjaCBsZXZlbFxyXG4gKiBAcGFyYW0ge251bWJlcn0gaGllcmFyY2h5IC0gSGllcmFyY2h5XHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBTZXQgdGhlIGFjdGl2ZSBjb2xvciBmb3IgYSBzcGVjaWZpYyBkZW5kcm9ncmFtXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBoaWVyYXJjaHkgLSBIaWVyYXJjaHkgY2FuIGJlIGZyb20gWzAtM11cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRIaWVyYXJjaHlDb2xvcihoaWVyYXJjaHkpIHtcclxuICAgIC8vIGNoZWNrIGlmIHRoZSBoaWVyYXJjaHkgaXMgYWxyZWFkeSBzaG93biBhcyBuZXR3b3JrXHJcbiAgICAvLyB0YWtlIHRoZSBzYW1lIGNvbG9yXHJcbiAgICBmb3IgKGxldCBrZXkgaW4gbmV0d29ya0NvbG9yKSB7XHJcbiAgICAgICAgaWYgKGtleSA9PT0gKCdoJyArIGhpZXJhcmNoeSkpIHtcclxuICAgICAgICAgICAgaGllcmFyY2h5Q29sb3JzWydoJyArIGhpZXJhcmNoeV0gPSBuZXR3b3JrQ29sb3Jba2V5XTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIGhpZXJhcmNoeSBpcyBub3QgdmlzdWFsaXplZCBhbHJlYWR5IGFzIGEgbmV0d29ya1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2xvcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBsZXQgdG1wX2Jvb2xlYW4gPSB0cnVlO1xyXG4gICAgICAgIGZvciAobGV0IGtleSBpbiBoaWVyYXJjaHlDb2xvcnMpIHtcclxuICAgICAgICAgICAgaWYgKGhpZXJhcmNoeUNvbG9ycy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaGllcmFyY2h5Q29sb3JzW2tleV0gPT09IGNvbG9yc1tpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRtcF9ib29sZWFuID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRtcF9ib29sZWFuKSB7XHJcbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIGEgbmV0d29yayBpcyBkZXBpY3RlZFxyXG4gICAgICAgICAgICAvLyBpZiBzbyBza2lwIHRoZSBjb2xvciB3aGljaCBpcyBhbHJlYWR5IGNob29zZW4gZm9yIHRoZSBuZXR3b3JrXHJcbiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhuZXR3b3JrQ29sb3IpLmxlbmd0aCAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIG5ldHdvcmtDb2xvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXR3b3JrQ29sb3Jba2V5XSAhPT0gY29sb3JzW2ldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZXJhcmNoeUNvbG9yc1snaCcgKyBoaWVyYXJjaHldID0gY29sb3JzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaGllcmFyY2h5Q29sb3JzWydoJyArIGhpZXJhcmNoeV0gPSBjb2xvcnNbaV07XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogUmVtb3ZlIHRoZSBjb2xvciBmb3IgdGhlIGhpZXJhcmNoIGxldmVsXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBoaWVyYXJjaHkgLSBIaWVyYXJjaHlcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVIaWVyYXJjaHlDb2xvcihoaWVyYXJjaHkpIHtcclxuICAgIGRlbGV0ZSBoaWVyYXJjaHlDb2xvcnNbJ2gnICsgaGllcmFyY2h5XTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEFkZCB0aGUgaGllcmFyY2h5IGJ1dHRvbiB0byB0aGUgZGl2XHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBpZCAtIEhpZXJhcmNoeSBvZiB0aGUgaWRcclxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgLSBOZXcgYWN0aXZlIGxldmVsXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gYWRkSGllcmFyY2h5QnV0dG9uKGlkLCBuYW1lKSB7XHJcbiAgICBpZiAoJCgnLnNob3ctZGVuZHJvZ3JhbScpLmxlbmd0aCA8IG1heE51bWJlckhpZXJhcmNoaWVzKSB7XHJcbiAgICAgICAgJCgnI2RlbmRyb2dyYW0tYnV0dG9ucy1kaXYnKS5hcHBlbmQoJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGlkPVwic2hvdy1kZW5kcm9ncmFtLScgKyBpZCArICdcIiBkYXRhPScgKyBpZCArICcgbmFtZT0nICsgbmFtZSArXHJcbiAgICAgICAgICAgICcgY2xhc3M9XCJzaG93LWRlbmRyb2dyYW0gYnRuIGJ0bi1ibG9ja1wiIGRhdGEtdG9nZ2xlPVwiYnV0dG9uXCIgYXJpYS1wcmVzc2VkPVwiZmFsc2VcIiBhdXRvY29tcGxldGU9XCJvZmZcIj4nICtcclxuICAgICAgICAgICAgJyA8c3BhbiBjbGFzcz1cImJ0bi1sYWJlbFwiIGlkPVwiYnRuLWxlZnRcIj4gPGkgY2xhc3M9XCJtZGkgbWRpLWFycm93LWNvbGxhcHNlLWxlZnRcIj48L2k+Jm5ic3AmbmJzcCBTaG93ICcgKyBuYW1lICsgJzwvc3Bhbj4nICtcclxuICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwiYnRuLWxhYmVsXCIgaWQ9XCJidG4tcmlnaHRcIj4gPGkgY2xhc3M9XCJtZGkgbWRpLWFycm93LWNvbGxhcHNlLXJpZ2h0XCI+PC9pPiZuYnNwJm5ic3AgSGlkZSAnICsgbmFtZSArICcgPC9zcGFuPjwvYnV0dG9uPiA8YnI+J1xyXG4gICAgICAgICk7XHJcbiAgICAgICAgJCgnI3Nob3ctZGVuZHJvZ3JhbS0nICsgaWQpLmZpbmQoJyNidG4tcmlnaHQnKS5oaWRlKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZW1vdmUgYSBzcGVjaWZpYyBoaWVyYXJjaHkgYnV0dG9uIHRvIHRoZSBkaXZcclxuICogQHBhcmFtIHtudW1iZXJ9IGlkIC0gSGllcmFyY2h5IG9mIHRoZSBpZFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUhpZXJhcmNoeUJ1dHRvbihpZCkge1xyXG4gICAgLy8gcmVtb3ZlIHRoZSBmb2xsb3dpbmcgbGluZSBicmVhayBhbmQgZWxlbWVudFxyXG4gICAgJCgnI3Nob3ctZGVuZHJvZ3JhbS0nICsgaWQpLm5leHQoKS5yZW1vdmUoKTtcclxuICAgICQoJyNzaG93LWRlbmRyb2dyYW0tJyArIGlkKS5yZW1vdmUoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZSBzbGlkZXIgYW5kIHRleHQgaW4gdGhlIGRlbmRyb2dyYW0gcGFuZWxcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVEZW5kcm9ncmFtKCkge1xyXG4gICAgLy8gZ2V0IHRoZSBpbXBvcnRhbnQgaW5mb1xyXG4gICAgbGV0IGlkID0gJCgnLnNob3ctZGVuZHJvZ3JhbS5idG4tcHJpbWFyeScpLmF0dHIoJ2RhdGEnKTtcclxuICAgIGxldCBuYW1lID0gJCgnLnNob3ctZGVuZHJvZ3JhbS5idG4tcHJpbWFyeScpLmF0dHIoJ25hbWUnKTtcclxuICAgIC8vIHNldCB0aGUgbmFtZSBvZiB0aGUgZGlzcGxheWVkIGhpZXJhcmNoeVxyXG4gICAgJCgnI2RlbmRyb2dyYW0tcGFuZWwtbmFtZScpLnRleHQobmFtZSk7XHJcblxyXG4gICAgLy8gc2V0IHNsaWRlciBhbmQgIHRleHQgdmFsdWVcclxuICAgICQoJyNkZW5kcm9ncmFtLXBhbmVsLWxldmVsLXNsaWRlcicpLnZhbChoaWVyYXJjaHlMZXZlbHNbJ2gnICsgaWRdKTtcclxuICAgICQoJyNkZW5kcm9ncmFtLXBhbmVsLWxldmVsLXRleHQnKS50ZXh0KGhpZXJhcmNoeUxldmVsc1snaCcgKyBpZF0pO1xyXG5cclxufVxyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZSBoaWVyYXJjaHkgbGVnZW5kXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY2hhbmdlSGllcmFyY2h5TGVnZW5kKCkge1xyXG4gICAgbGV0IGxlZ2VuZDsgLy8gdGhlIGNvbG9yIGxlZ2VuZFxyXG4gICAgbGV0IGxlZ2VuZFRleHQ7IC8vIGNvbG9yIGxlZ2VuZCB0ZXh0XHJcbiAgICAvLyB2YXJzIGZvciB0aGUgbGVnZW5kXHJcbiAgICBsZXQgbGVnZW5kU3dhdGNoV2lkdGggPSA1MDtcclxuICAgIGxldCBsZWdlbmRTd2F0Y2hIZWlnaHQgPSAyMDtcclxuXHJcbiAgICAvLyBTaG93IG9yIGhpZGUgdGhlIHN2ZyBlbGVtZW50XHJcbiAgICBpZiAoT2JqZWN0LmtleXMoaGllcmFyY2h5Q29sb3JzKS5sZW5ndGggIT09IDAgfHwgT2JqZWN0LmtleXMobmV0d29ya0NvbG9yKS5sZW5ndGggIT09IDApIHtcclxuICAgICAgICAkKCcjaGllcmFyY2h5LWxlZ2VuZC1kaXYnKS5zaG93KCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgICQoJyNoaWVyYXJjaHktbGVnZW5kLWRpdicpLmhpZGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgbGVnZW5kRGF0YSA9IFtdO1xyXG4gICAgbGV0IGxlZ2VuZFRleHREYXRhID0gW107XHJcbiAgICAvLyBnZXQgdGhlIHJlcXVpcmVkIGRhdGFcclxuICAgICQoJy5zaG93LWRlbmRyb2dyYW0nKS5lYWNoKGZ1bmN0aW9uKGksIG9iaikge1xyXG4gICAgICAgIC8vIGNoZWNrIGlmIGRhdGEgaXMgbm90IHVuZGVmaW5lZFxyXG4gICAgICAgIGlmIChoaWVyYXJjaHlDb2xvcnNbJ2gnICsgJChvYmopLmF0dHIoJ2RhdGEnKV0gIT0gbnVsbCAmJiAkKG9iaikuYXR0cignbmFtZScpICE9IG51bGwpIHtcclxuICAgICAgICAgICAgbGVnZW5kRGF0YS5wdXNoKGhpZXJhcmNoeUNvbG9yc1snaCcgKyAkKG9iaikuYXR0cignZGF0YScpXSk7XHJcbiAgICAgICAgICAgIGxlZ2VuZFRleHREYXRhLnB1c2goJChvYmopLmF0dHIoJ25hbWUnKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAvLyBhZGQgdGhlIG5ldHdvcmsgY29sb3JcclxuICAgIGlmIChPYmplY3Qua2V5cyhuZXR3b3JrQ29sb3IpLmxlbmd0aCAhPT0gMCkge1xyXG4gICAgICAgIGZvciAobGV0IGtleSBpbiBuZXR3b3JrQ29sb3IpIHtcclxuICAgICAgICAgICAgaWYgKGxlZ2VuZERhdGEuaW5kZXhPZihuZXR3b3JrQ29sb3Jba2V5XSkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBsZWdlbmREYXRhLnB1c2gobmV0d29ya0NvbG9yW2tleV0pO1xyXG4gICAgICAgICAgICAgICAgbGVnZW5kVGV4dERhdGEucHVzaCgnTmV0d29yaycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gREFUQSBKT0lOXHJcbiAgICBsZWdlbmQgPSBzdmdMZWdlbmQuc2VsZWN0QWxsKCdyZWN0LmxlZ2VuZCcpXHJcbiAgICAgICAgLmRhdGEobGVnZW5kRGF0YSk7XHJcbiAgICBsZWdlbmRUZXh0ID0gc3ZnTGVnZW5kLnNlbGVjdEFsbCgndGV4dC5sZWdlbmQtdGV4dCcpXHJcbiAgICAgICAgLmRhdGEobGVnZW5kVGV4dERhdGEpO1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLSBMZWdlbmQgc3dhdGNoZXMgIC0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIFVQREFURSAtIGxlZ2VuZFxyXG4gICAgbGVnZW5kLnN0eWxlKCdmaWxsJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgIHJldHVybiBkO1xyXG4gICAgfSk7XHJcbiAgICAvLyBFTlRFUiAtIGxlZ2VuZFxyXG4gICAgbGVnZW5kXHJcbiAgICAgICAgLmVudGVyKClcclxuICAgICAgICAuYXBwZW5kKCdyZWN0JylcclxuICAgICAgICAuYXR0cignY2xhc3MnLCAnbGVnZW5kJylcclxuICAgICAgICAuYXR0cignd2lkdGgnLCBsZWdlbmRTd2F0Y2hXaWR0aClcclxuICAgICAgICAuYXR0cignaGVpZ2h0JywgbGVnZW5kU3dhdGNoSGVpZ2h0KVxyXG4gICAgICAgIC5hdHRyKCd5JywgMClcclxuICAgICAgICAuYXR0cigneCcsIGZ1bmN0aW9uKGQsIGkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChsZWdlbmRTd2F0Y2hXaWR0aCArIDIuNSAqIGkgKiBsZWdlbmRTd2F0Y2hXaWR0aCkgKyAncHgnO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnN0eWxlKCdmaWxsJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgICB9KTtcclxuICAgIC8vIEVYSVQgLSBsZWdlbmRcclxuICAgIGxlZ2VuZC5leGl0KClcclxuICAgICAgICAucmVtb3ZlKCk7XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tIFRleHQgIC0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIFVQREFURSAtIGxlZ2VuZCB0ZXh0XHJcbiAgICBsZWdlbmRUZXh0LnRleHQoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgIHJldHVybiBkO1xyXG4gICAgfSk7XHJcbiAgICAvLyBFTlRFUiAtIGxlZ2VuZCB0ZXh0XHJcbiAgICBsZWdlbmRUZXh0XHJcbiAgICAgICAgLmVudGVyKClcclxuICAgICAgICAuYXBwZW5kKCd0ZXh0JylcclxuICAgICAgICAuYXR0cignY2xhc3MnLCAnbGVnZW5kLXRleHQnKVxyXG4gICAgICAgIC5hdHRyKCd5JywgMiAqIGxlZ2VuZFN3YXRjaEhlaWdodClcclxuICAgICAgICAuYXR0cigneCcsIGZ1bmN0aW9uKGQsIGkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChsZWdlbmRTd2F0Y2hXaWR0aCArIDIuNSAqIGkgKiBsZWdlbmRTd2F0Y2hXaWR0aCkgKyAncHgnO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRleHQoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAvLyBFWElUIC0gbGVnZW5kIHRleHRcclxuICAgIGxlZ2VuZFRleHQuZXhpdCgpXHJcbiAgICAgICAgLnJlbW92ZSgpO1xyXG5cclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBJbml0aWFsaXplIHRoZSBkZW5kcm9ncmFtIGxlZ2VuZFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGluaXREZW5kcm9ncmFtTGVnZW5kKCkge1xyXG4gICAgbGV0IGxlZ2VuZFdpZHRoID0gNTUwO1xyXG4gICAgbGV0IGxlZ2VuZEhlaWdodCA9IDYwO1xyXG5cclxuICAgIGxldCBkZW5kcm9ncmFtTGVnZW5kID0gZDMuc2VsZWN0KCcjZGVuZHJvZ3JhbS1wYW5lbCcpXHJcbiAgICAgICAgLmFwcGVuZCgnc3ZnJylcclxuICAgICAgICAuYXR0cignaWQnLCAnZGVuZHJvZ3JhbS1sZWdlbmQnKVxyXG4gICAgICAgIC5hdHRyKCd3aWR0aCcsIGxlZ2VuZFdpZHRoKVxyXG4gICAgICAgIC5hdHRyKCdoZWlnaHQnLCBsZWdlbmRIZWlnaHQpO1xyXG5cclxuICAgICQoJyNkZW5kcm9ncmFtLWxlZ2VuZCcpLmhpZGUoKTtcclxuXHJcbiAgICBsZXQgbGVnZW5kOyAvLyB0aGUgY29sb3IgbGVnZW5kXHJcbiAgICBsZXQgbGVnZW5kVGV4dDsgLy8gY29sb3IgbGVnZW5kIHRleHRcclxuICAgIC8vIHZhcnMgZm9yIHRoZSBsZWdlbmRcclxuICAgIGxldCBsZWdlbmRTd2F0Y2hXaWR0aCA9IDUwO1xyXG4gICAgbGV0IGxlZ2VuZFN3YXRjaEhlaWdodCA9IDIwO1xyXG5cclxuICAgIGxldCBsZWdlbmREYXRhID0gc3RhbmRhcmREZXZpYXRpb25Db2xvclNjYWxlLnJhbmdlKCk7XHJcbiAgICAvL1RPRE8gY2hhbmdlIHRoaXMgdG8gYmV0dGVyIHNvbHV0aW9uXHJcbiAgICBsZXQgbGVnZW5kVGV4dERhdGEgPSBbJ2xvdycsICcnLCAnJywgJycsICcnLCAnJywgJycsICcnLCAnaGlnaCddO1xyXG5cclxuICAgIGxlZ2VuZCA9IGRlbmRyb2dyYW1MZWdlbmQuc2VsZWN0QWxsKCdyZWN0LmxlZ2VuZCcpXHJcbiAgICAgICAgLmRhdGEobGVnZW5kRGF0YSk7XHJcbiAgICBsZWdlbmRUZXh0ID0gZGVuZHJvZ3JhbUxlZ2VuZC5zZWxlY3RBbGwoJ3RleHQubGVnZW5kLXRleHQnKVxyXG4gICAgICAgIC5kYXRhKGxlZ2VuZFRleHREYXRhKTtcclxuXHJcbiAgICAvLyBFTlRFUiAtIGxlZ2VuZFxyXG4gICAgbGVnZW5kXHJcbiAgICAgICAgLmVudGVyKClcclxuICAgICAgICAuYXBwZW5kKCdyZWN0JylcclxuICAgICAgICAuYXR0cignY2xhc3MnLCAnbGVnZW5kJylcclxuICAgICAgICAuYXR0cignd2lkdGgnLCBsZWdlbmRTd2F0Y2hXaWR0aClcclxuICAgICAgICAuYXR0cignaGVpZ2h0JywgbGVnZW5kU3dhdGNoSGVpZ2h0KVxyXG4gICAgICAgIC5hdHRyKCd5JywgMClcclxuICAgICAgICAuYXR0cigneCcsIGZ1bmN0aW9uKGQsIGkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChpICogbGVnZW5kU3dhdGNoV2lkdGgpICsgJ3B4JztcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5zdHlsZSgnZmlsbCcsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tIFRleHQgIC0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIEVOVEVSIC0gbGVnZW5kIHRleHRcclxuICAgIGxlZ2VuZFRleHRcclxuICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgIC5hcHBlbmQoJ3RleHQnKVxyXG4gICAgICAgIC5hdHRyKCdjbGFzcycsICdsZWdlbmQtdGV4dCcpXHJcbiAgICAgICAgLmF0dHIoJ3knLCAyICogbGVnZW5kU3dhdGNoSGVpZ2h0KVxyXG4gICAgICAgIC5hdHRyKCd4JywgZnVuY3Rpb24oZCwgaSkge1xyXG4gICAgICAgICAgICByZXR1cm4gKGkgKiBsZWdlbmRTd2F0Y2hXaWR0aCkgKyAncHgnO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRleHQoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldCB0aGUgc2V0IG9wZXJhdGlvblxyXG4gKiBAcGFyYW0ge3N0cmluZ30gb3BlcmF0aW9uIC0gZS5nLiBcInVuaW9uXCIgXCJpbnRlcnNlY3Rpb25cIiBcInN5bS1kaWZmZXJlbmNlXCJcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRTZXRPcGVyYXRpb24odmFsdWUpIHtcclxuICAgIHNldE9wZXJhdGlvbiA9IHZhbHVlO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IHRoZSBoaWVyYXJjaHkgZ3JvdXAgc3RhbmRhcmQgZGV2aWF0aW9uXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXkgLSB1bmlxdWUgaGFzaCBpZCBmb3IgdGhlIGdyb3VwXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSAtIHVuaXF1ZSBoYXNoIGlkIGZvciB0aGUgZ3JvdXBcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRoaWVyYXJjaHlHcm91cFN0ZGV2KGtleSwgdmFsdWUpIHtcclxuICAgIGlmIChrZXkgaW4gaGllcmFyY2h5R3JvdXBTdGRldikge1xyXG4gICAgICAgIGhpZXJhcmNoeUdyb3VwU3RkZXZba2V5XS5wdXNoKHZhbHVlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaGllcmFyY2h5R3JvdXBTdGRldltrZXldID0gW3ZhbHVlXTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFJlc2V0IGhpZXJhcmNoeSBncm91cCBzdGFuZGFyZCBkZXZpYXRpb25cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiByZXNldGhpZXJhcmNoeUdyb3VwU3RkZXYoKSB7XHJcbiAgICBoaWVyYXJjaHlHcm91cFN0ZGV2ID0ge307XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBIaWdobGlnaHQgYSBzdWJzZXQgb2YgYW5pbWFscyBpbiB0aGUgc3BhdGlhbCB2aWV3XHJcbiAqIEBwYXJhbSB7YXJyYXl9IGFuaW1hbHMgLSBhcnJheSBvZiBhbmltYWwgaWRzIHdoaWNoIGhhdmUgdG8gYmUgaGlnaGxpZ2h0ZWRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRIaWdobGlnaHRTcGF0aWFsVmlldyhhbmltYWxzKSB7XHJcbiAgICAvLyBwb2ludHMgdG8gY2FsY3VsYXRlIHRoZSBjb252ZXggaHVsbCBvZiB0aGUgaGlnaGxpZ2h0IGNsdXN0ZXJcclxuICAgIGxldCB2ZXJ0aWNlcyA9IFtdO1xyXG4gICAgLy8gaXRlcmF0ZSB0aHJvdWdoIHRoZSBvYmplY3RzIGluIHRoZSBjbHVzdGVyXHJcbiAgICAvLyBnZXQgdGhlIHBvaW50cyBhbmQgaGlnaGxpZ2h0IHRoZSBhbmltYWxzXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFuaW1hbHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBsZXQgdG1wQW5pbWFsID0gc3BhdGlhbFZpZXcuc2VsZWN0KCcjYW5pbWFsLScgKyBhbmltYWxzW2ldKTtcclxuICAgICAgICBsZXQgcG9pbnQgPSB0bXBBbmltYWwuZGF0YSgpWzBdWydwJ107XHJcbiAgICAgICAgdmVydGljZXMucHVzaChbcG9pbnRbMF0sIC1wb2ludFsxXV0pO1xyXG5cclxuICAgICAgICB0bXBBbmltYWwuY2xhc3NlZCgnYW5pbWFsLWhpZ2hsaWdodCcsIHRydWUpO1xyXG4gICAgfVxyXG4gICAgLy8gYWRkIGEgcG9seWdvbiBodWxsIGluIHRoZSBzcGF0aWFsIHZpZXdcclxuICAgIHNwYXRpYWxWaWV3LmFwcGVuZCgncGF0aCcpXHJcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2hpZ2hsaWdodC1oaWVyYXJjaHknKVxyXG4gICAgICAgIC5hdHRyKCdkJywgKCdNJyArIGQzLnBvbHlnb25IdWxsKHZlcnRpY2VzKS5qb2luKCdMJykgKyAnWicpKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlbW92ZSB0aGUgaGlnaGxpZ2h0IGluIHRoZSBzcGF0aWFsIHZpZXdcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVIaWdobGlnaHRTcGF0aWFsVmlldygpIHtcclxuICAgIC8vIHJlbW92ZSB0aGUgY29sb3JpbmcgYW5kIHRoZSBoaWVyYXJjaHkgaGlnaGxpZ2h0IGh1bGxcclxuICAgIGQzLnNlbGVjdEFsbCgnLmFuaW1hbCcpLmNsYXNzZWQoJ2FuaW1hbC1oaWdobGlnaHQnLCBmYWxzZSk7XHJcbiAgICBkMy5zZWxlY3RBbGwoJy5oaWdobGlnaHQtaGllcmFyY2h5JykucmVtb3ZlKCk7XHJcbn1cclxuIiwiLyplc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtbGV0cyovXHJcbi8qZ2xvYmFsIHdpbmRvdywgJCwgcGFyYW1ldGVycyAqL1xyXG5cclxubGV0IEpTT05BUElfTUlNRVRZUEUgPSAnYXBwbGljYXRpb24vdm5kLmFwaStqc29uJztcclxudmFyIHNvdXJjZTtcclxuXHJcbmltcG9ydCB7XHJcbiAgICBhZGRUb0RhdGFzZXQsXHJcbiAgICBzZXREYXRhU2V0UGVyY2VudGlsZSxcclxuICAgIHNldFN3YXJtRGF0YSxcclxuICAgIHNldE1ldGFEYXRhLFxyXG4gICAgc2V0RGF0YXNldEZlYXR1cmUsXHJcbiAgICBzZXROZXR3b3JrRGF0YSxcclxuICAgIHNldEhpZXJhcmNoeURhdGEsXHJcbiAgICBzZXRBbmltYWxJZHNcclxufSBmcm9tICcuL2V4cGxvcmUuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGFkZE5ldHdvcmtCdXR0b25zLFxyXG4gICAgc2V0TmV0d29ya0lEXHJcbn0gZnJvbSAnLi9uZXR3b3JrLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBlbmFibGVQbGF5QnV0dG9uLFxyXG4gICAgZGlzYWJsZVBsYXlCdXR0b24sXHJcbiAgICBhZGRBYnNvbHV0ZUZlYXR1cmVCdXR0b25zXHJcbn0gZnJvbSAnLi9oZWxwZXJzLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBTcGF0aWFsVmlld1xyXG59IGZyb20gJy4vc3BhdGlhbF92aWV3L3NwYXRpYWxfdmlldy5qcyc7XHJcblxyXG4vLyBpbXBvcnQge1xyXG4vLyAgICAgcmVzcG9uc2VQYXJhbWV0ZXJzXHJcbi8vIH0gZnJvbSAnLi92aXN1YWxfcGFyYW1ldGVyLmpzJztcclxuXHJcblxyXG4vKipcclxuICogU3RyZWFtIHRoZSBtb3ZlbWVudCBkYXRhIGZyb20gdGhlIEFQSVxyXG4gKiBMb2FkcyBvbmx5IHRoZSBleHBsaWNpdCBtb3ZlbWVudCBkYXRhXHJcbiAqL1xyXG4vL2NvbnNvbGUubG9nKGRhdGEpO1xyXG5leHBvcnQgZnVuY3Rpb24gc3RyZWFtTW92ZW1lbnREYXRhKCkge1xyXG4gICAgaWYgKHdpbmRvdy5FdmVudFNvdXJjZSkge1xyXG4gICAgICAgIHNvdXJjZSA9IG5ldyBFdmVudFNvdXJjZSgnL2FwaS9tb3ZlbWVudF9vbmx5LycgKyBwYXJhbWV0ZXJzWydpZCddKTtcclxuICAgICAgICBzb3VyY2Uub25tZXNzYWdlID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICBpZiAoZS5kYXRhID09PSAnY2xvc2UnKSB7XHJcbiAgICAgICAgICAgICAgICBzb3VyY2UuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIC8vIGlmIGFsbCBhamF4IHF1ZXJpZXMgYXJlIGNvbXBlbHRlIGluaXRpYWxpemVcclxuICAgICAgICAgICAgICAgIChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBjaGVja1BlbmRpbmdSZXF1ZXN0KCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJC5hY3RpdmUgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChjaGVja1BlbmRpbmdSZXF1ZXN0LCAxMDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2aWV3ID0gbmV3IFNwYXRpYWxWaWV3KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoY2hlY2tQZW5kaW5nUmVxdWVzdCwgMTAwKTtcclxuICAgICAgICAgICAgICAgIH0pKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhZGRUb0RhdGFzZXQoSlNPTi5wYXJzZShlLmRhdGEpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHNvdXJjZS5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgaWYgKGUucmVhZHlTdGF0ZSA9PSBFdmVudFNvdXJjZS5DTE9TRUQpIHtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KCdTdHJlYW1pbmcgZXJyb3InKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIGZhbHNlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYWxlcnQoJ1dlYmJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBzdHJlYW1pbmcnKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCB0aGUgcGVyY2VudGlsZSBkYXRhIGZyb20gdGhlIGFwaSBleHBvcnQgdG8gZXhwbG9yZS5qc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFBlcmNlbnRpbGUoKSB7XHJcbiAgICBsZXQgZGF0YVNldFBlcmNlbnRpbGUgPSBbXTtcclxuICAgICQuYWpheCh7XHJcbiAgICAgICAgdXJsOiAnL2FwaS9wZXJjZW50aWxlLycgKyBwYXJhbWV0ZXJzWydpZCddLFxyXG4gICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgdHlwZTogJ0dFVCcsXHJcbiAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICdBY2NlcHQnOiBKU09OQVBJX01JTUVUWVBFXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnZlcnQgdGhlIGRhdGFTZXRQZXJjZW50aWxlIGludG8gYW4gYXJyYXlcclxuICAgICAgICAgICAgLy8gW21pbiwgcGVyY2VudGlsZV8xLC4uLixwZXJjZW50aWxlXzksbWF4XVxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGRhdGFTZXRQZXJjZW50aWxlW2RhdGFbaV1bJ2ZlYXR1cmUnXV0gPSBbZGF0YVtpXVsnbWluJ10sIGRhdGFbaV1bJ3AxJ10sIGRhdGFbaV1bJ3AyJ10sIGRhdGFbaV1bJ3AzJ10sIGRhdGFbaV1bJ3A1J10sIGRhdGFbaV1bJ3A3J10sIGRhdGFbaV1bJ3A4J10sIGRhdGFbaV1bJ3A5J10sIGRhdGFbaV1bJ21heCddXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXREYXRhU2V0UGVyY2VudGlsZShkYXRhU2V0UGVyY2VudGlsZSk7XHJcbiAgICAgICAgICAgIGFkZEFic29sdXRlRmVhdHVyZUJ1dHRvbnMoZGF0YVNldFBlcmNlbnRpbGUpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IHRoZSBzd2FybSBmZWF0dXJlcyBmb3IgdGhlIGxpbmUgY2hhcnQgZnJvbSB0aGUgYXBpXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3dhcm1GZWF0dXJlcygpIHtcclxuICAgIGNvbnN0IHN3YXJtX2ZlYXR1cmVzID0gWydzd2FybV90aW1lJywgJ3N3YXJtX3NwZWVkJywgJ3N3YXJtX2FjY2VsZXJhdGlvbicsICdzd2FybV9jb252ZXhfaHVsbF9hcmVhJyxcclxuICAgICAgICAnc3dhcm1fZGlzdGFuY2VfY2VudHJvaWQnLCAnc3dhcm1fZGlyZWN0aW9uJywgJ3N3YXJtX3BvbGFyaXNhdGlvbidcclxuICAgIF07XHJcblxyXG4gICAgLy8gZ2V0IGFsbCB0aGUgb3RoZXIgc3dhcm0gZmVhdHVyZXMgZm9yIHRoZSBsaW5lIGNoYXJ0XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN3YXJtX2ZlYXR1cmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiAnL2FwaS9kYXRhc2V0LycgKyBwYXJhbWV0ZXJzWydpZCddICsgJy8nICsgc3dhcm1fZmVhdHVyZXNbaV0sXHJcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgICAgIHR5cGU6ICdHRVQnLFxyXG4gICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAnQWNjZXB0JzogSlNPTkFQSV9NSU1FVFlQRVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZmVhdHVyZSA9IHN3YXJtX2ZlYXR1cmVzW2ldLnJlcGxhY2UoJ3N3YXJtXycsICcnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzZXRTd2FybURhdGEoZGF0YSwgZmVhdHVyZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCB0aGUgbWVhZGF0YSBpbmZvcm1hdGlvblxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldE1ldGFEYXRhKCkge1xyXG4gICAgJC5hamF4KHtcclxuICAgICAgICB1cmw6ICcvYXBpL21ldGFkYXRhLycgKyBwYXJhbWV0ZXJzWydpZCddLFxyXG4gICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgdHlwZTogJ0dFVCcsXHJcbiAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICdBY2NlcHQnOiBKU09OQVBJX01JTUVUWVBFXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgIHNldE1ldGFEYXRhKGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IHRoZSBuZXR3b3JrIGRhdGFzZXRzIGZvciB0aGUgYnV0dG9uc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldE5ldHdvcmtEYXRhQnV0dG9uKCkge1xyXG4gICAgJC5hamF4KHtcclxuICAgICAgICB1cmw6ICcvYXBpL2RhdGFzZXQvbmV0d29ya3MvJyArIHBhcmFtZXRlcnNbJ2lkJ10sXHJcbiAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICB0eXBlOiAnR0VUJyxcclxuICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgJ0FjY2VwdCc6IEpTT05BUElfTUlNRVRZUEVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgYWRkTmV0d29ya0J1dHRvbnMoZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIHNwZWNpZmMgZmVhdHVyZVxyXG4gKiBAcGFyYW0ge1N0cmluZ30gZmVhdHVyZSAtIGZvciBpbnN0YW5jZSBzcGVlZCwgYWNjZWxlcmF0aW9uIGV0Yy5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXREYXRhc2V0RmVhdHVyZShmZWF0dXJlKSB7XHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICAgIHVybDogJy9hcGkvZGF0YXNldC8nICsgcGFyYW1ldGVyc1snaWQnXSArICcvJyArIGZlYXR1cmUsXHJcbiAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICB0eXBlOiAnR0VUJyxcclxuICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgJ0FjY2VwdCc6IEpTT05BUElfTUlNRVRZUEVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgLy8gYWRkIHRoZSBzcGVlZCBmZWF0dXJlIHRvIHRoZSBkYXRhc2V0XHJcbiAgICAgICAgICAgIHNldERhdGFzZXRGZWF0dXJlKGRhdGEsIGZlYXR1cmUpO1xyXG4gICAgICAgICAgICBlbmFibGVQbGF5QnV0dG9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIHNwZWNpZmMgc3dhcm0gZmVhdHVyZVxyXG4gKiBAcGFyYW0ge1N0cmluZ30gZmVhdHVyZSAtIGZvciBpbnN0YW5jZSBjZW50cm9pZCwgbWVkb2lkIGV0Yy5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRTd2FybURhdGFzZXRGZWF0dXJlKGZlYXR1cmUpIHtcclxuICAgIGRpc2FibGVQbGF5QnV0dG9uKCk7XHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICAgIHVybDogJy9hcGkvZGF0YXNldC8nICsgcGFyYW1ldGVyc1snaWQnXSArICcvJyArIGZlYXR1cmUsXHJcbiAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICB0eXBlOiAnR0VUJyxcclxuICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgJ0FjY2VwdCc6IEpTT05BUElfTUlNRVRZUEVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgLy8gYWRkIHRoZSBzcGVlZCBmZWF0dXJlIHRvIHRoZSBkYXRhc2V0XHJcbiAgICAgICAgICAgIHNldFN3YXJtRGF0YShkYXRhLCBmZWF0dXJlKTtcclxuICAgICAgICAgICAgZW5hYmxlUGxheUJ1dHRvbigpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IHRoZSBuZXR3b3JrIGZvciB0aGUgc3BlY2lmaWMgbmV0d29ya19pZFxyXG4gKiBAcGFyYW0ge1N0cmluZ30gbmV0d29ya19pZCAtIHVuaXF1ZSBuZXR3b3JrIGlkIG9mIGEgZGF0YXNldC5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXROZXR3b3JrRGF0YShuZXR3b3JrX2lkKSB7XHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICAgIHVybDogJy9hcGkvZGF0YXNldC9uZXR3b3JrLycgKyBwYXJhbWV0ZXJzWydpZCddICsgJy8nICsgbmV0d29ya19pZCxcclxuICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgIHR5cGU6ICdHRVQnLFxyXG4gICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAnQWNjZXB0JzogSlNPTkFQSV9NSU1FVFlQRVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHNldE5ldHdvcmtEYXRhKEpTT04ucGFyc2UoZGF0YVswXVsnZGF0YSddKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZW5hYmxlUGxheUJ1dHRvbigpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgLy8gbmVlZGVkIGZvciBzdGFuZGFyZCBEZXZpYXRpb24gaW4gZGVuZHJvZ3JhbVxyXG4gICAgc2V0TmV0d29ya0lEKG5ldHdvcmtfaWQpO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IHRoZSBuZXR3b3JrIGhpZXJhcmNoeSBmb3IgdGhlIHNwZWNpZmljIG5ldHdvcmtfaWRcclxuICogQHBhcmFtIHtTdHJpbmd9IG5ldHdvcmtfaWQgLSB1bmlxdWUgbmV0d29yayBpZCBvZiBhIGRhdGFzZXQuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0TmV0d29ya0hpZXJhcmNoeURhdGEobmV0d29ya19pZCkge1xyXG4gICAgJC5hamF4KHtcclxuICAgICAgICB1cmw6ICcvYXBpL2RhdGFzZXQvbmV0d29yay9oaWVyYXJjaHkvJyArIHBhcmFtZXRlcnNbJ2lkJ10gKyAnLycgKyBuZXR3b3JrX2lkLFxyXG4gICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgdHlwZTogJ0dFVCcsXHJcbiAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICdBY2NlcHQnOiBKU09OQVBJX01JTUVUWVBFXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgc2V0SGllcmFyY2h5RGF0YShKU09OLnBhcnNlKGRhdGFbMF1bJ2hpZXJhcmNoeSddKSwgbmV0d29ya19pZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZW5hYmxlUGxheUJ1dHRvbigpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IHRoZSBkaXN0aW5jdCBhbmltYWwgaWRzIGZvciBhIHNwZWNpZmMgZGF0YXNldFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEFuaW1hbElkcygpIHtcclxuICAgICQuYWpheCh7XHJcbiAgICAgICAgdXJsOiAnL2FwaS9kYXRhc2V0LycgKyBwYXJhbWV0ZXJzWydpZCddICsgJy9hbmltYWxfaWRzJyxcclxuICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgIHR5cGU6ICdHRVQnLFxyXG4gICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAnQWNjZXB0JzogSlNPTkFQSV9NSU1FVFlQRVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICBzZXRBbmltYWxJZHMoZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8vIC8qKlxyXG4vLyAgKiBWaXN1YWwgcGFyYW1ldGVyIHN1Z2dlc3Rpb24gYWpheCBxdWVyeVxyXG4vLyAgKiBAcGFyYW0ge0FycmF5fSB0cmFja2VkRGF0YSAtIHRyYWNrZWQgZGF0YSB3aXRoIC5cclxuLy8gICovXHJcbi8vIGV4cG9ydCBmdW5jdGlvbiBnZXRTdWdnZXN0ZWRQYXJhbWV0ZXJzKHRyYWNrZWREYXRhKSB7XHJcbi8vICAgICAkLmFqYXgoe1xyXG4vLyAgICAgICAgIHVybDogJy9hcGkvZGF0YXNldC92aXN1YWxfcGFyYW1ldGVyLycgKyBwYXJhbWV0ZXJzWydpZCddLFxyXG4vLyAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbi8vICAgICAgICAgdHlwZTogJ1BPU1QnLFxyXG4vLyAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcsXHJcbi8vICAgICAgICAgaGVhZGVyczoge1xyXG4vLyAgICAgICAgICAgICAnQWNjZXB0JzogSlNPTkFQSV9NSU1FVFlQRVxyXG4vLyAgICAgICAgIH0sXHJcbi8vICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xyXG4vLyAgICAgICAgICAgICByZXNwb25zZVBhcmFtZXRlcnMoZGF0YSk7XHJcbi8vICAgICAgICAgfSxcclxuLy8gICAgICAgICBkYXRhOiB0cmFja2VkRGF0YVxyXG4vLyAgICAgfSk7XHJcbi8vXHJcbi8vIH1cclxuIiwiLyplc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtbGV0cyovXHJcbi8qZ2xvYmFsIHdpbmRvdywgJCwgZDMgKi9cclxuaW1wb3J0IHtcclxuICAgIGhpZXJhcmNoeUNvbG9ycyxcclxuICAgIGNvbG9ycyxcclxuICAgIGNoYW5nZUhpZXJhcmNoeUxlZ2VuZFxyXG59IGZyb20gJy4vaGllcmFyY2h5LmpzJztcclxuXHJcblxyXG5cclxuZXhwb3J0IGxldCBuZXR3b3JrQXV0byA9IGZhbHNlOyAvLyBpZiB0cnVlIHRoZSBuZXR3b3JrIGVkZ2UgbGltaXQgaXMgYXV0b21hdGljYWxseSBzdWdnZXN0ZWRcclxuZXhwb3J0IGxldCBuZXR3b3JrTGltaXQgPSAwLjU7XHJcbmV4cG9ydCBsZXQgc2hvd05ldHdvcmtIaWVyYXJjaHk7XHJcbmV4cG9ydCBsZXQgbmV0d29ya0NvbG9yID0ge307XHJcbmV4cG9ydCBsZXQgbmV0d29ya0lEO1xyXG5leHBvcnQgbGV0IG5ldHdvcmtCYWNrZ3JvdW5kID0gdHJ1ZTtcclxuZXhwb3J0IGxldCBuZXR3b3JrQmFja2dyb3VuZExpbWl0ID0gMTsgLy9kcmF3IGJhY2tncm91bmQgbGluZSBpZiBsaW1pdCBpcyBleGNlZWRlZFxyXG4vLyBmaXhlZCBjb2xvciBzY2FsZSBmb3IgdGhlIG5ldHdvcmtcclxuXHJcbi8qKlxyXG4gKiBjb2xvciBzY2FsZSBmb3IgbmV0d29yayAtIHJhbmdlIGlzIGRlZmluZWQgZHluYW1pYyBiYXNlZCBvbiB0aGUgaGllcmFyaGN5IGNvbG9yXHJcbiAqL1xyXG5leHBvcnQgbGV0IG5ldHdvcmtDb2xvclNjYWxlID0gZDMuc2NhbGVUaHJlc2hvbGQoKVxyXG4gICAgLmRvbWFpbihcclxuICAgICAgICBbMCwgLjEsIC4yLCAuMywgLjQsIC41LCAuNiwgLjcsIC44LCAuOSwgMV1cclxuICAgICkucmFuZ2UoWycjZjdmYmZmJywgJyNkZWViZjcnLCAnI2M2ZGJlZicsICcjOWVjYWUxJywgJyM2YmFlZDYnLCAnIzQyOTJjNicsICcjMjE3MWI1JywgJyMwODUxOWMnLCAnIzA4MzA2YiddKTtcclxuXHJcblxyXG4vKipcclxuICogQWRkIHRoZSBuZXR3b3JrICBzZWxlY3QgYnV0dG9ucyBhbmQgaGllcmFyY2h5IGNoZWNrYm94ZXMgdG8gdGhlIG5ldHdvcmsgbW9kYWxcclxuICogQHBhcmFtIHthcnJheX0gZGF0YSAtIEFycmF5IG9mIG5ldHdvcmsgZGF0YVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGFkZE5ldHdvcmtCdXR0b25zKGRhdGEpIHtcclxuICAgIGlmIChkYXRhLmxlbmd0aCkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZGF0YVtpXVsnZmluaXNoZWQnXSkge1xyXG4gICAgICAgICAgICAgICAgJCgnI25ldHdvcmtzLWhpZXJhcmNoaWVzLXRhYmxlIHRib2R5JylcclxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCc8dHI+PHRkPicgKyBkYXRhW2ldWyduYW1lJ10gKyAnPC90ZD4gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8dGQ+IDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0XCIgZGF0YT0nICsgZGF0YVtpXVsnbmV0d29ya19pZCddICsgJyBuYW1lPScgKyBkYXRhW2ldWyduYW1lJ10gK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPjxzcGFuIGNsYXNzPVwibWRpIG1kaS1ncmFwaHFsXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9zcGFuPjwvYnV0dG9uPjwvdGQ+ICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPHRkPjxkaXYgY2xhc3M9XCJwcmV0dHkgcC1zd2l0Y2ggcC1maWxsXCI+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGNsYXNzPVwiaGllYXJjaHktY2hlY2tib3hcIiBkYXRhPVwiJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbaV1bJ25ldHdvcmtfaWQnXSArICdcIiBuYW1lPVwiJyArIGRhdGFbaV1bJ25hbWUnXSArICdcIj48ZGl2IGNsYXNzPVwic3RhdGUgcC1zdWNjZXNzXCI+PGxhYmVsPjwvbGFiZWw+PC9kaXY+PC9kaXY+PC90ZD4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzx0ZD4tLS08L3RkPidcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gJzx0ZD48ZGl2IGNsYXNzPVwicHJldHR5IHAtc3dpdGNoIHAtZmlsbFwiPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBjbGFzcz1cIm5ldHdvcmstaGllcmFyY2h5LWNoZWNrYm94XCIgZGF0YT1cIicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkYXRhW2ldWyduZXR3b3JrX2lkJ10gKyAnXCI+PGRpdiBjbGFzcz1cInN0YXRlIHAtc3VjY2Vzc1wiPjxsYWJlbD48L2xhYmVsPjwvZGl2PjwvZGl2PjwvdGQ+J1xyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgICQoJyNuZXR3b3Jrcy1oaWVyYXJjaGllcy10YWJsZScpXHJcbiAgICAgICAgICAgIC5hcHBlbmQoJ1RoZXJlIGlzIG5vIG5ldHdvcmsgZGF0YSBmb3IgdGhpcyBkYXRhc2V0Jyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgU2V0dGVyXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuLyoqXHJcbiAqIFNldCB0aGUgbmV0d29yayBhdXRvIHZhbHVlIC0gaWYgdHJ1ZSB0aGFuIHRoZSBuZXR3b3JrIGxpbWl0IGlzIHNldCB0byB0aGUgMC45NSBwZXJjZW50aWxlIG9mIGFsbCB2YWx1ZXNcclxuICogQHBhcmFtIHtCb29sZWFufSB2YWx1ZVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldE5ldHdvcmtBdXRvKHZhbHVlKSB7XHJcbiAgICBuZXR3b3JrQXV0byA9IHZhbHVlO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IHRoZSBuZXR3b3JrIGxpbWl0IHdpdGggdGhlIHNwZWNpZmljIG5ldHdvcmsgc2xpZGVyIC0gY3VzdG9tXHJcbiAqIDAgPSBzaW1pbGFyIGFuZCAxIHVuc2ltaWxhciBmb3IgdGhlIHNwZWNpZmljIHRpbWUgbW9tZW50XHJcbiAqIEBwYXJhbSB7TnVtYmVyfSB2YWx1ZSAtIGJldHdlZW4gMCBhbmQgMVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldE5ldHdvckxpbWl0KHZhbHVlKSB7XHJcbiAgICBuZXR3b3JrTGltaXQgPSB2YWx1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldCB0aGUgbmV0d29yayBpbiBoaWVyYXJjaHkgKGUuZy4gaDApIGZpbHRlclxyXG4gKiBAcGFyYW0ge051bWJlcn0gaGllcmFyY2h5IC0gZS5nLiAwLW5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXROZXR3b3JrSGllcmFyY2h5KHZhbHVlKSB7XHJcbiAgICBzaG93TmV0d29ya0hpZXJhcmNoeSA9IHZhbHVlO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IHRoZSBuZXR3b3JrIG5ldHdvcmsgaWQgLSBuZWVkZWQgZm9yIGhpZXJhcmNoeSBzdGFuZGFyZCBkZXZpYXRpb24gY29sb3JpbmdcclxuICogQHBhcmFtIHtOdW1iZXJ9IHZhbHVlIC0gZS5nLiAwLW5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXROZXR3b3JrSUQodmFsdWUpIHtcclxuICAgIG5ldHdvcmtJRCA9IHZhbHVlO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IG5ldHdvcmsgY29sb3Igc2NhbGUgcmFuZ2VcclxuICogQHBhcmFtIHtOdW1iZXJ9IGlkIC0gaWQgb2YgdGhlIG5ldHdvcmtcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRuZXR3b3JrQ29sb3IobmV0d29ya19pZCkge1xyXG4gICAgLy8gaWYgaWQgPSAtMSBzZXQgdGhlIGNvbG9yIHRvIG5vdGhpbmdcclxuICAgIGlmIChuZXR3b3JrX2lkID49IDApIHtcclxuICAgICAgICBuZXR3b3JrQ29sb3JbJ2gnICsgbmV0d29ya19pZF0gPSAnIzA4MzA2Yic7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIG5ldHdvcmtDb2xvciA9IHt9O1xyXG4gICAgfVxyXG4gICAgY2hhbmdlSGllcmFyY2h5TGVnZW5kKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXQgdGhlIGJvb2xlYW4gdmFsdWUgZm9yIHRoZSBuZXR3b3JrIGJhY2tncm91bmQgY29sb3JcclxuICogQHBhcmFtIHtCb29sZWFufSB2YWx1ZSAtIHRydWUgb3IgZmFsc2VcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXROZXR3b3JrQmFja2dyb3VuZCh2YWx1ZSkge1xyXG4gICAgbmV0d29ya0JhY2tncm91bmQgPSB2YWx1ZTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBTZXQgdGhlIG5ldHdvcmsgYmFja2dyb3VuZCBjb2xvciBsaW1pdCAtIGRyYXcgYmFja2dyb3VuZCBsaW5lIGlmIGxpbWl0IGlzIGV4Y2VlZGVkXHJcbiAqIEBwYXJhbSB7SW50ZWdlcn0gdmFsdWUgLSBuZXcgbGltaXRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXROZXR3b3JrQmFja2dyb3VuZExpbWl0KHZhbHVlKSB7XHJcbiAgICBuZXR3b3JrQmFja2dyb3VuZExpbWl0ID0gdmFsdWU7XHJcbn0iLCIvKmVzbGludC1kaXNhYmxlIG5vLXVudXNlZC1sZXRzKi9cclxuLypnbG9iYWwgd2luZG93LCBkMywgJCwgcGFyYW1ldGVycyovXHJcbmltcG9ydCB7XHJcbiAgICBzZXRJbmRleFRpbWUsXHJcbiAgICBEcmF3ZXJcclxufSBmcm9tICcuL3NwYXRpYWxfdmlldy9zcGF0aWFsX3ZpZXcuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIHN3YXJtRGF0YSxcclxuICAgIGRhdGFzZXQsXHJcbiAgICBhbmltYWxJZHNcclxufSBmcm9tICcuL2V4cGxvcmUuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIHBlcmNlbnRpbGVzTGluZUNoYXJ0XHJcbn0gZnJvbSAnLi9oZWxwZXJzLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBpbmRleFRpbWUsXHJcbn0gZnJvbSAnLi9zcGF0aWFsX3ZpZXcvc3BhdGlhbF92aWV3JztcclxuXHJcblxyXG5cclxuXHJcbmV4cG9ydCBsZXQgem9vbUZ1bmN0aW9uO1xyXG5cclxubGV0IHRyZW5kQ2hhcnRzWm9vbSA9IHt9O1xyXG4vL2xldCB0aGlzLnRyZW5kQ2hhcnRzRWxlbSA9IFsnbG93ZXItb3V0ZXItYXJlYScsICdsb3dlci1pbm5lci1hcmVhJywgJ21lZGlhbi1saW5lJywgJ3VwcGVyLWlubmVyLWFyZWEnLCAndXBwZXItb3V0ZXItYXJlYSddO1xyXG4vL2xldCBsaW5lQ2hhcnRXaWR0aCA9IDUwMDA7XHJcbmxldCByYXRpbyA9IDE7XHJcbmxldCB6b29tR3JvdXA7XHJcbmxldCB4O1xyXG5sZXQgeTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbi8vcmF0aW8gPSBNYXRoLmNlaWwoc3dhcm1EYXRhLmxlbmd0aCAvIHRoaXMubGluZUNoYXJ0V2lkdGgpO1xyXG4gICAgLy9jb25zb2xlLmxvZyhzd2FybURhdGEpO1xyXG4gICAgLy9sZXQgcmVzdWx0ID0gc3dhcm1EYXRhLm1hcChvYmogPT4gKHt0aW1lOm9iai50aW1lLCBkaXN0X2NlbjpvYmouZGlzdGFuY2VfY2VudHJvaWR9KSk7XHJcbiAgICAvL2NvbnNvbGUubG9nKHJlc3VsdCk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuLy9saW5lY2hhcnQuZHJhdygpO1xyXG4vL2xldCBzd2FybURhdCA9IG5ldyBzd2FybURhdGEoKTtcclxuIiwiLyplc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtbGV0cyovXHJcbi8qZ2xvYmFsIHdpbmRvdywgJCAqL1xyXG4vLyBpbXBvcnQgYWxsIGpzXHJcbmltcG9ydCAqIGFzIHF1ZXJpZXMgZnJvbSAnLi9hamF4X3F1ZXJpZXMuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGluaXRpYWxpemVNZXRhZGRhdGFcclxufSBmcm9tICcuL21ldGFkYXRhLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBzZXRIaWVyYXJjaHlMZXZlbCxcclxuICAgIHJlbW92ZUhpZXJhcmNoeUxldmVsLFxyXG4gICAgc2V0SGllcmFyY2h5Q29sb3IsXHJcbiAgICByZW1vdmVIaWVyYXJjaHlDb2xvcixcclxuICAgIGNoYW5nZUhpZXJhcmNoeUxlZ2VuZFxyXG59IGZyb20gJy4vaGllcmFyY2h5LmpzJztcclxuXHJcbi8vIGltcG9ydCBjc3NcclxuaW1wb3J0ICcuL2V4cGxvcmUuY3NzJztcclxuXHJcbmltcG9ydCBDaGFydCBmcm9tICcuL2xpbmVfY2hhcnQuanMnO1xyXG5cclxuZXhwb3J0IGxldCBkYXRhc2V0ID0gW107IC8vIG1haW4gZGF0YXNldCB3aXRoIHZhbHVlcyBmb3IgZWFjaCBpbmRpdmlkdWFsIGFuaW1hbFxyXG5leHBvcnQgbGV0IGRhdGFzZXRNZXRhZGF0YSA9IFtdOyAvLyBtZXRhZGF0YXNldCBmb3IgZWFjaCBpbmRpdmlkdWFsIGZpc2hcclxuZXhwb3J0IGxldCBzd2FybURhdGEgPSBbXTsgLy8gc3dhcm1kYXRhIGZvciBsaW5lY2hhcnQgYW5kIGFsc28gb3RoZXIgc3dhcm0gZmVhdHVyZXNcclxuZXhwb3J0IGxldCBkYXRhU2V0UGVyY2VudGlsZSA9IHt9OyAvLyBwZWNlbnRpbGVzIG5lZWRlZCBmb3IgdGhlIGNvbG9yIG1hcHBpbmdcclxuZXhwb3J0IGxldCBuZXR3b3JrRGF0YSA9IHt9OyAvLyBuZXR3b3JrIGRhdGFcclxuZXhwb3J0IGxldCBuZXR3b3JrSGllcmFyY2h5ID0ge307IC8vIG5ldHdvcmsgaGllcmFyY2h5IGRhdGFcclxuZXhwb3J0IGxldCBhbmltYWxJZHMgPSB7fTsgLy8gZGlzdGluY3QgYW5pbWFsIGlkc1xyXG5cclxuXHJcblxyXG4vKipcclxuICogR2V0IHRoZSBiYXNpYyBkYXRhIHRvIGdldCB0aGUgdG9vbCBydW5uaW5nLlxyXG4gKiBhZnRlciB0aGUgcGVuZGluZyBhamF4IHF1ZXJpZXMgYXJlIGZpbmlzaGVkXHJcbiAqIHRoZSB0b29sIGlzIGRyYXduXHJcbiAqL1xyXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcclxuICAgIC8vIGNvbnNvbGUubG9nKHBhcmFtZXRlcnMpO1xyXG5cclxuICAgIC8vIGdldCB0aGUgbW92ZW1lbnQgZGF0YVxyXG4gICAgcXVlcmllcy5zdHJlYW1Nb3ZlbWVudERhdGEoKTtcclxuXHJcbiAgICAvLyBnZXQgdGhlIGRhdGFTZXRQZXJjZW50aWxlXHJcbiAgICBxdWVyaWVzLmdldFBlcmNlbnRpbGUoKTtcclxuXHJcbiAgICAvLyBnZXQgdGhlIGRpc3RpbmN0IGFuaW1hbCBpZHMgZm9yIHRoZSB3aG9sZSBkYXRhc2V0XHJcbiAgICBxdWVyaWVzLmdldEFuaW1hbElkcygpO1xyXG5cclxuICAgIC8vIGdldCB0aGUgc3dhcm0gZmVhdHVyZXMgZm9yIHRoZSBsaW5lIGNoYXJ0XHJcbiAgICBxdWVyaWVzLmdldFN3YXJtRmVhdHVyZXMoKTtcclxuXHJcbiAgICAvLyBnZXQgdGhlIG1ldGFkYXRhIGFuZCBpbml0aWFsaXplIHRoZSBtZXRhZGEgd2luZG93XHJcbiAgICBxdWVyaWVzLmdldE1ldGFEYXRhKCk7XHJcblxyXG4gICAgLy8gZ2V0IHRoZSBpbmZvcm1hdGlvbiBpZiB0aGVyZSBhcmUgYWxyZWFkeSBuZXR3b3JrcyBjcmVhdGVkIGZvciB0aGlzIGRhc3Rhc2V0XHJcbiAgICBxdWVyaWVzLmdldE5ldHdvcmtEYXRhQnV0dG9uKCk7XHJcbn0pO1xyXG5cclxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgR2V0dGVyIGFuZCBzZXR0ZXJcclxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4vKipcclxuICogQ29uY2FjdCB0byB0aGUgbWFpbiBkYXRhc2V0XHJcbiAqIHRoZSBpZGVhIGlzIHRvIHVzZSB0aGlzIG9uZSBkYXkgZm9yIGxhenkgbG9hZGluZ1xyXG4gKiBAcGFyYW0ge2FycmF5fSB2YWx1ZSAtIGFycmF5IG9mIG1vdmVtZW50IGRhdGFzZXRzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gYWRkVG9EYXRhc2V0KHZhbHVlKSB7XHJcbiAgICBkYXRhc2V0ID0gZGF0YXNldC5jb25jYXQodmFsdWUpO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IGRhdGFzZXQgcGVyY2VudGlsZVxyXG4gKiBAcGFyYW0ge2FycmF5fSB2YWx1ZSAtIGFycmF5IG9mIGFycmFyeXNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXREYXRhU2V0UGVyY2VudGlsZSh2YWx1ZSkge1xyXG4gICAgZGF0YVNldFBlcmNlbnRpbGUgPSB2YWx1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldCBkYXRhc2V0IG1ldGFkYXRhXHJcbiAqIEBwYXJhbSB7YXJyYXl9IHZhbHVlIC0gYXJyYXlcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRNZXRhRGF0YSh2YWx1ZSkge1xyXG4gICAgZGF0YXNldE1ldGFkYXRhID0gdmFsdWU7XHJcbiAgICAvLyBpbml0aWFsaXplIHRoZSBtZXRhZGF0YSBtb2RhbFxyXG4gICAgaW5pdGlhbGl6ZU1ldGFkZGF0YSgpO1xyXG59XHJcblxyXG4vKipcclxuICogQWRkIGEgbmV3IGZlYXR1cmUgZGltZW5zaW9uIHRvIHRoZSBzd2FybSBkYXRhc2V0XHJcbiAqIEBwYXJhbSB7YXJyYXl9IGRhdGEgLSBBcnJheSBvZiBzd2FybSB2YWx1ZXMgY29uc2lzdGluZyBvZiBbZmVhdHVyZV8wLGZlYXR1cmVfMSwuLi5dXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBmZWF0dXJlIC0gc3RyaW5nIGFycmF5IG9mIHRoZSBmZWF0dXJlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2V0U3dhcm1EYXRhKGRhdGEsIGZlYXR1cmUpIHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIC8vIGFkZCB0aGUgdGhlIG9iamVjdCB0byB0aGUgYXJyYXkgaWYgdGhlcmUgaXMgbm8gZWxlbWVudCB5ZXRcclxuICAgICAgICBpZiAodHlwZW9mIHN3YXJtRGF0YVtpXSA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgc3dhcm1EYXRhLnB1c2goe30pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gY2hlY2sgaWYgaW50ZWdlciBvciBmbG9hdFxyXG4gICAgICAgIGlmIChkYXRhW2ldICYmICEoaXNOYU4oZGF0YVtpXSkpKSB7XHJcbiAgICAgICAgICAgIHN3YXJtRGF0YVtpXVtmZWF0dXJlXSA9ICtkYXRhW2ldO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGlzIHN0cmluZ1xyXG4gICAgICAgICAgICBzd2FybURhdGFbaV1bZmVhdHVyZV0gPSBkYXRhW2ldO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBZGQgYSBuZXcgZmVhdHVyZSBkaW1lbnNpb24gdG8gdGhlIGRhdGFzZXRcclxuICogQHBhcmFtIHthcnJheX0gZGF0YSAtIEFycmF5IG9mIGZlYXR1cmVzIHZhbHVlcyBjb25zaXN0aW5nIG9mIFtmZWF0dXJlXzAsIGZlYXR1cmVfMSwuLi5dXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBmZWF0dXJlIC0gc3RyaW5nIGFycmF5IG9mIHRoZSBmZWF0dXJlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2V0RGF0YXNldEZlYXR1cmUoZGF0YSwgZmVhdHVyZSkge1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgLy8gYWRkIHRoZSB0aGUgb2JqZWN0IHRvIHRoZSBhcnJheSBpZiB0aGVyZSBpcyBubyBlbGVtZW50IHlldFxyXG4gICAgICAgIGlmICh0eXBlb2YgZGF0YXNldFtpXSA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgZGF0YXNldC5wdXNoKHt9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gcGFyc2UgdGhlIGludFxyXG4gICAgICAgIGRhdGFzZXRbaV1bZmVhdHVyZV0gPSArZGF0YVtpXTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFNldCB0aGUgbmV0d29yayB2YWx1ZVxyXG4gKiBAcGFyYW0ge2FycmF5fSB2YWx1ZSAtIEFycmF5IG9mIG9mIGFycmF5cyB3aXRoIGFsbCB2YWx1ZXNcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tIHRoZSBjYWxjdWxhdGVkIGFkamFjZW5jeSBtYXRyaXhcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXROZXR3b3JrRGF0YSh2YWx1ZSkge1xyXG4gICAgbmV0d29ya0RhdGEgPSB2YWx1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldCB0aGUgbmV0d29yayBoaWVhcmhjeSB2YWx1ZVxyXG4gKiBAcGFyYW0ge2FycmF5fSB2YWx1ZSAtIEFycmF5IG9mIG9mIGFycmF5cyB3aXRoIGFsbCB2YWx1ZXNcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICB3aXRoIGhpZXJhcmNoeVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldEhpZXJhcmNoeURhdGEodmFsdWUsIG5ldHdvcmtfaWQpIHtcclxuICAgIC8vIGlmIHRoZSBlbGVtZW50IGlzIGVtcHR5IHJlbW92ZSB0aGUgZWxlbWVudCBmcm9tIHRoZSBuZXR3cm9rSGllcmFyY2h5IG9iamVjdFxyXG4gICAgaWYgKE9iamVjdC5rZXlzKHZhbHVlKS5sZW5ndGggPT09IDAgJiYgdmFsdWUuY29uc3RydWN0b3IgPT09IE9iamVjdCkge1xyXG4gICAgICAgIGRlbGV0ZSBuZXR3b3JrSGllcmFyY2h5WydoJyArIG5ldHdvcmtfaWRdO1xyXG4gICAgICAgIHJlbW92ZUhpZXJhcmNoeUxldmVsKG5ldHdvcmtfaWQpO1xyXG4gICAgICAgIHJlbW92ZUhpZXJhcmNoeUNvbG9yKG5ldHdvcmtfaWQpO1xyXG4gICAgfSAvLyBhZGQgaXQgdG8gdGhlIG5ldHdvcmsgaGllcmFyY2h5XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBuZXR3b3JrSGllcmFyY2h5WydoJyArIG5ldHdvcmtfaWRdID0gdmFsdWU7XHJcbiAgICAgICAgc2V0SGllcmFyY2h5TGV2ZWwobmV0d29ya19pZCwgMik7XHJcbiAgICAgICAgc2V0SGllcmFyY2h5Q29sb3IobmV0d29ya19pZCk7XHJcbiAgICB9IC8vIHRvbyBtYW55IGVsZW1lbnRzIGNhbnQgYmUgYWRkZWRcclxuXHJcbiAgICBjaGFuZ2VIaWVyYXJjaHlMZWdlbmQoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldCBhbmltYWwgaWRzIGRhdGFzZXRcclxuICogQHBhcmFtIHthcnJheX0gaWRzIC0gQXJyYXkgb2YgYWxsIGRpc3RpbmN0IGFuaW1hbCBpZHNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRBbmltYWxJZHModmFsdWUpIHtcclxuICAgIGFuaW1hbElkcyA9IHZhbHVlO1xyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=