!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=6)}([function(e,t){},function(e,t,r){var n=r(2);"string"==typeof n&&(n=[[e.i,n,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};r(4)(n,a);n.locals&&(e.exports=n.locals)},function(e,t,r){(t=r(3)(!1)).push([e.i,"/* Icons for bootstrap 4 */\r\n\r\n.mdi::before {\r\n    font-size: 24px;\r\n    line-height: 14px;\r\n}\r\n\r\n.btn .mdi::before {\r\n    position: relative;\r\n    top: 4px;\r\n}\r\n\r\n.btn-xs .mdi::before {\r\n    font-size: 18px;\r\n    top: 3px;\r\n}\r\n\r\n.btn-sm .mdi::before {\r\n    font-size: 18px;\r\n    top: 3px;\r\n}\r\n\r\n.dropdown-menu .mdi {\r\n    width: 18px;\r\n}\r\n\r\n.dropdown-menu .mdi::before {\r\n    position: relative;\r\n    top: 4px;\r\n    left: -8px;\r\n}\r\n\r\n.nav .mdi::before {\r\n    position: relative;\r\n    top: 4px;\r\n}\r\n\r\n.navbar .navbar-toggle .mdi::before {\r\n    position: relative;\r\n    top: 4px;\r\n    color: #FFF;\r\n}\r\n\r\n.breadcrumb .mdi::before {\r\n    position: relative;\r\n    top: 4px;\r\n}\r\n\r\n.breadcrumb a:hover {\r\n    text-decoration: none;\r\n}\r\n\r\n.breadcrumb a:hover span {\r\n    text-decoration: underline;\r\n}\r\n\r\n.alert .mdi::before {\r\n    position: relative;\r\n    top: 4px;\r\n    margin-right: 2px;\r\n}\r\n\r\n.input-group-addon .mdi::before {\r\n    position: relative;\r\n    top: 3px;\r\n}\r\n\r\n.navbar-brand .mdi::before {\r\n    position: relative;\r\n    top: 2px;\r\n    margin-right: 2px;\r\n}\r\n\r\n.list-group-item .mdi::before {\r\n    position: relative;\r\n    top: 3px;\r\n    left: -3px\r\n}\r\n\r\n/* SVG elements and text */\r\n\r\n#main-vis {\r\n    margin-bottom: 10px;\r\n}\r\n\r\n.svg-container {\r\n    display: inline-block;\r\n    position: relative;\r\n    width: 100%;\r\n    /* aspect ratio */\r\n    vertical-align: top;\r\n    overflow: visible;\r\n}\r\n\r\n.svg-content {\r\n    display: inline-block;\r\n    position: absolute;\r\n    border: 1px solid #000;\r\n}\r\n\r\n#main-vis-legend-div {\r\n    display: none;\r\n}\r\n\r\n#hierarchy-legend-div {\r\n    display: none;\r\n}\r\n\r\n#main-vis-legend {\r\n    float: right;\r\n    display: inline-block;\r\n    position: relative;\r\n    overflow: visible;\r\n    top: 10px;\r\n    left: 10px;\r\n}\r\n\r\n#hierarchy-legend {\r\n    float: left;\r\n    display: inline-block;\r\n    position: relative;\r\n    overflow: visible;\r\n    top: 10px;\r\n    left: 10px;\r\n}\r\n\r\n.svg-content-dendrogram {\r\n    display: inline-block;\r\n    border: 1px solid #000;\r\n}\r\n\r\n.svg-line-chart-container {\r\n    display: inline-block;\r\n    position: relative;\r\n    width: 100%;\r\n    height: auto;\r\n    /* depends on svg ratio */\r\n    padding-bottom: 17%;\r\n    /* aspect ratio */\r\n    vertical-align: top;\r\n    overflow: visible;\r\n}\r\n\r\n.svg-dendrogram-container {\r\n    display: inline-block;\r\n    position: relative;\r\n    height: auto;\r\n    vertical-align: top;\r\n    overflow: visible;\r\n}\r\n\r\n.axis path {\r\n    display: none;\r\n}\r\n\r\n.axis line {\r\n    stroke-opacity: 0.3;\r\n    shape-rendering: crispEdges;\r\n}\r\n\r\n.x {\r\n    font-size: 1em;\r\n}\r\n\r\n.y {\r\n    font-size: 1em;\r\n}\r\n\r\n.axis-line-chart path line {\r\n    fill: none;\r\n    stroke: #000;\r\n    shape-rendering: crispEdges;\r\n}\r\n\r\n.line {\r\n    fill: none;\r\n    stroke-width: 5px;\r\n}\r\n\r\n/* Time  */\r\n\r\n.frame-text {\r\n    margin-top: 0;\r\n    margin-bottom: 0;\r\n    font-size: 2em;\r\n    color: inherit;\r\n    font-weight: 500;\r\n    line-height: 1.1;\r\n}\r\n\r\n/* Slider ticks  */\r\n\r\n.ui-slider-tick {\r\n    display: inline-block;\r\n    width: 3px;\r\n    background: #337ab7;\r\n    height: 0.8em;\r\n    position: absolute;\r\n}\r\n\r\n/* Laoding gif   */\r\n\r\n#loading {\r\n    display: block;\r\n    text-align: center;\r\n}\r\n\r\n/* Color legend    */\r\n\r\n.legend {\r\n    font-size: 12px;\r\n    stroke: #000;\r\n}\r\n\r\n.legend-text {\r\n    font-size: 1.2em;\r\n    color: inherit;\r\n    line-height: 1.1;\r\n}\r\n\r\n.line-chart-legend-text {\r\n    font-size: 2em;\r\n    color: inherit;\r\n    line-height: 1.1;\r\n}\r\n\r\n.time-line {\r\n    fill: none;\r\n    stroke-width: 5px;\r\n    stroke: #000;\r\n}\r\n\r\n/*swarm features */\r\n\r\n.centroid {\r\n    fill-opacity: 0;\r\n    stroke: #e7298a;\r\n    stroke-width: 3px;\r\n}\r\n\r\n.medoid {\r\n    fill: #e7298a !important;\r\n    stroke: #e7298a !important;\r\n}\r\n\r\n.hull-path {\r\n    fill: #fff;\r\n    fill-opacity: 0;\r\n    stroke-width: 3;\r\n    stroke: #252525;\r\n    stroke-opacity: 0.5;\r\n}\r\n\r\n.hierarchy-group {\r\n    stroke-width: 10;\r\n    stroke-linejoin: round;\r\n    opacity: 0.2;\r\n}\r\n\r\n.delaunay-triangulation {\r\n    fill-opacity: 0;\r\n    stroke-width: 2;\r\n    stroke: #000;\r\n    stroke-opacity: 0.4;\r\n}\r\n\r\n/* Color brewer picker div */\r\n\r\n.palette {\r\n    cursor: pointer;\r\n    display: table;\r\n    vertical-align: bottom;\r\n    margin: 4px 0 4px 4px;\r\n    background: #fff;\r\n    border: solid 1px #aaa;\r\n}\r\n\r\n.swatch {\r\n    display: inline-block;\r\n    vertical-align: middle;\r\n    width: 22px;\r\n    height: 22px;\r\n}\r\n\r\n.voronoi {\r\n    fill-opacity: 0;\r\n    stroke-width: 3;\r\n    stroke: #000;\r\n    stroke-opacity: 0.2;\r\n}\r\n\r\n/* Tooltip */\r\n\r\ndiv.tooltip {\r\n    pointer-events: none;\r\n    opacity: 0;\r\n    background: rgb(255, 255, 255) !important;\r\n    border-left-color: #1b809e !important;\r\n    border: 1px solid #eee;\r\n    border-left-width: 5px;\r\n    border-radius: 3px;\r\n    position: absolute;\r\n}\r\n\r\ndiv.tooltip table td:nth-child(2) {\r\n    text-align: center;\r\n    font-weight: bold;\r\n}\r\n\r\n.tooltip-span {\r\n    display: block;\r\n    width: 150px;\r\n    word-wrap: break-word;\r\n    font-size: 1.5em;\r\n}\r\n\r\n.upper-outer-area, .lower-outer-area {\r\n    stroke-width: 1;\r\n    fill: #74a9cf;\r\n    stroke: #3690c0;\r\n}\r\n\r\n.upper-inner-area, .lower-inner-area {\r\n    stroke-width: 1;\r\n    fill: #045a8d;\r\n    stroke: #023858;\r\n}\r\n\r\n.median-line {\r\n    fill: none;\r\n    stroke: #525252;\r\n    stroke-width: 5;\r\n}\r\n\r\n.selected {\r\n    background: #999;\r\n    border: 4px solid #4d4d4d;\r\n    -moz-border-radius: 5px;\r\n    -webkit-border-radius: 5px;\r\n    box-shadow: 1px 2px 4px rgba(0, 0, 0, .4);\r\n}\r\n\r\n.zoom {\r\n    fill: none;\r\n    pointer-events: all;\r\n}\r\n\r\n.x.axis-line-chart>g>text {\r\n    font-size: 3em;\r\n    color: inherit;\r\n    line-height: 1.1;\r\n}\r\n\r\n.arrow {\r\n    stroke-width: 1;\r\n}\r\n\r\n#centroid-line {\r\n    stroke-width: 1;\r\n    stroke: #e7298a;\r\n}\r\n\r\n#centroid-arrow {\r\n    fill: #e7298a;\r\n}\r\n\r\n.metadata-swatch {\r\n    width: 30px;\r\n    height: 30px;\r\n    border-radius: 3px;\r\n    border: 2px solid #666;\r\n}\r\n\r\n.metadata-swatch-clickable:hover {\r\n    border: 2px solid #000;\r\n    cursor: pointer;\r\n}\r\n\r\n.dropdown-menu {\r\n    min-width: 40px;\r\n    padding: 5px;\r\n}\r\n\r\n.metadata-legend {\r\n    list-style: none;\r\n    margin-top: 10px;\r\n}\r\n\r\n.metadata-legend li {\r\n    float: left;\r\n    margin-right: 10px;\r\n}\r\n\r\n.metadata-legend span {\r\n    border: 2px solid #666;\r\n    float: left;\r\n    width: 30px;\r\n    height: 30px;\r\n}\r\n\r\n.metadata-legend .bl-avg {\r\n    background-color: #7fc97f;\r\n}\r\n\r\n.metadata-legend .avg {\r\n    background-color: #fdc086;\r\n}\r\n\r\n.metadata-legend .ab-avg {\r\n    background-color: #386cb0;\r\n}\r\n\r\n.network-edges {\r\n    fill-opacity: 0;\r\n    stroke-width: 2;\r\n}\r\n\r\n.network-background-edges {\r\n    fill-opacity: 0;\r\n    stroke-opacity: 0.25;\r\n    stroke: #737373;\r\n}\r\n\r\n.node text {\r\n    font: 12px sans-serif;\r\n}\r\n\r\n.node--internal text {\r\n    text-shadow: 0 1px 0 #fff, 0 -1px 0 #fff, 1px 0 0 #fff, -1px 0 0 #fff;\r\n}\r\n\r\n.link {\r\n    fill: none;\r\n    stroke: #636363;\r\n    stroke-width: 5px;\r\n}\r\n\r\n#active-network-name {\r\n    font-weight: bold;\r\n    color: #296292;\r\n}\r\n\r\n.active-level {\r\n    fill: #386cb0;\r\n}\r\n\r\n#dendrogram-panel {\r\n    position: initial;\r\n}\r\n\r\n#dendrogram-panel {\r\n    display: none\r\n}\r\n\r\n.show-dendrogram {\r\n    float: right;\r\n    border-radius: 3px;\r\n    border: 1px solid #D1D3D4;\r\n    font-weight: normal;\r\n}\r\n\r\n.show-dendrogram:hover {\r\n    background: #D1D3D4;\r\n}\r\n\r\n.dendrogram-text {\r\n    font-size: 10em !important;\r\n}\r\n\r\n.highlight-hierarchy {\r\n    fill: #252525;\r\n    stroke: #252525;\r\n    stroke-width: 10;\r\n    stroke-linejoin: round;\r\n    opacity: 0.3;\r\n}\r\n\r\n.animal-highlight {\r\n    fill: #c51b7d !important;\r\n}\r\n\r\n#dendrogram-buttons-div .btn span.glyphicon {\r\n    opacity: 0;\r\n}\r\n\r\n#dendrogram-buttons-div .btn.active span.glyphicon {\r\n    opacity: 1;\r\n}\r\n\r\n#dendrogram-buttons-div {\r\n    border: 2px solid #D1D3D4;\r\n    border-radius: 5px;\r\n}\r\n\r\n#dendrogram-legend {\r\n    margin-left: 20px;\r\n}\r\n\r\n.intersection {\r\n    fill: url(#striped) !important;\r\n    stroke: #67000d;\r\n}\r\n\r\n.sym-difference {\r\n    fill: url(#striped) !important;\r\n    stroke: #67000d;\r\n}\r\n\r\n.modal-lg {\r\n    max-width: 80%;\r\n}\r\n\r\n.background-image {\r\n    background: #fff;\r\n}",""]),e.exports=t},function(e,t,r){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r=e[1]||"",n=e[3];if(!n)return r;if(t&&"function"==typeof btoa){var a=(o=n,s=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(l," */")),i=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[r].concat(i).concat([a]).join("\n")}var o,s,l;return[r].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(r,"}"):r})).join("")},t.i=function(e,r,n){"string"==typeof e&&(e=[[null,e,""]]);var a={};if(n)for(var i=0;i<this.length;i++){var o=this[i][0];null!=o&&(a[o]=!0)}for(var s=0;s<e.length;s++){var l=[].concat(e[s]);n&&a[l[0]]||(r&&(l[2]?l[2]="".concat(r," and ").concat(l[2]):l[2]=r),t.push(l))}},t}},function(e,t,r){var n,a,i={},o=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===a&&(a=n.apply(this,arguments)),a}),s=function(e){return document.querySelector(e)},l=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var r=s.call(this,e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}}(),d=null,c=0,h=[],p=r(5);function u(e,t){for(var r=0;r<e.length;r++){var n=e[r],a=i[n.id];if(a){a.refs++;for(var o=0;o<a.parts.length;o++)a.parts[o](n.parts[o]);for(;o<n.parts.length;o++)a.parts.push(x(n.parts[o],t))}else{var s=[];for(o=0;o<n.parts.length;o++)s.push(x(n.parts[o],t));i[n.id]={id:n.id,refs:1,parts:s}}}}function m(e,t){for(var r=[],n={},a=0;a<e.length;a++){var i=e[a],o=t.base?i[0]+t.base:i[0],s={css:i[1],media:i[2],sourceMap:i[3]};n[o]?n[o].parts.push(s):r.push(n[o]={id:o,parts:[s]})}return r}function f(e,t){var r=l(e.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=h[h.length-1];if("top"===e.insertAt)n?n.nextSibling?r.insertBefore(t,n.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),h.push(t);else if("bottom"===e.insertAt)r.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var a=l(e.insertInto+" "+e.insertAt.before);r.insertBefore(t,a)}}function g(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=h.indexOf(e);t>=0&&h.splice(t,1)}function v(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),b(t,e.attrs),f(e,t),t}function b(e,t){Object.keys(t).forEach((function(r){e.setAttribute(r,t[r])}))}function x(e,t){var r,n,a,i;if(t.transform&&e.css){if(!(i=t.transform(e.css)))return function(){};e.css=i}if(t.singleton){var o=c++;r=d||(d=v(t)),n=w.bind(null,r,o,!1),a=w.bind(null,r,o,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",b(t,e.attrs),f(e,t),t}(t),n=C.bind(null,r,t),a=function(){g(r),r.href&&URL.revokeObjectURL(r.href)}):(r=v(t),n=$.bind(null,r),a=function(){g(r)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else a()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=o()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var r=m(e,t);return u(r,t),function(e){for(var n=[],a=0;a<r.length;a++){var o=r[a];(s=i[o.id]).refs--,n.push(s)}e&&u(m(e,t),t);for(a=0;a<n.length;a++){var s;if(0===(s=n[a]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete i[s.id]}}}};var y,k=(y=[],function(e,t){return y[e]=t,y.filter(Boolean).join("\n")});function w(e,t,r,n){var a=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=k(t,a);else{var i=document.createTextNode(a),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(i,o[t]):e.appendChild(i)}}function $(e,t){var r=t.css,n=t.media;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}function C(e,t,r){var n=r.css,a=r.sourceMap,i=void 0===t.convertToAbsoluteUrls&&a;(t.convertToAbsoluteUrls||i)&&(n=p(n)),a&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");var o=new Blob([n],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var r=t.protocol+"//"+t.host,n=r+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var a,i=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?e:(a=0===i.indexOf("//")?i:0===i.indexOf("/")?r+i:n+i.replace(/^\.\//,""),"url("+JSON.stringify(a)+")")}))}},function(e,t,r){"use strict";let n,a;r.r(t),r.d(t,"dataset",(function(){return F})),r.d(t,"datasetMetadata",(function(){return X})),r.d(t,"swarmData",(function(){return J})),r.d(t,"dataSetPercentile",(function(){return Z})),r.d(t,"networkData",(function(){return q})),r.d(t,"networkHierarchy",(function(){return K})),r.d(t,"animalIds",(function(){return Q})),r.d(t,"addToDataset",(function(){return ee})),r.d(t,"setDataSetPercentile",(function(){return te})),r.d(t,"setMetaData",(function(){return re})),r.d(t,"setSwarmData",(function(){return ne})),r.d(t,"setDatasetFeature",(function(){return ae})),r.d(t,"setNetworkData",(function(){return ie})),r.d(t,"setHierarchyData",(function(){return oe})),r.d(t,"setAnimalIds",(function(){return se}));colorbrewer.BuYlBu;let i={};var o=r(0);let s=!0;function l(e){s="boolean"==typeof e&&e}function d(){l(!1),$("#play-button").removeClass("active"),$("#play-button").prop("disabled",!0),$("#play-icons").hide(),$("#play-loading").show()}function c(){l(!0),$("#play-button").addClass("active"),$("#play-button").prop("disabled",!1),$("#play-loading").hide(),$("#play-icons").show()}function h(e){let t=[.05,.25,.5,.75,.95],r=[];if(0===e.length)return 0;e.sort((function(e,t){return e-t}));for(let n=0;n<t.length;n++){let a=(e.length-1)*t[n],i=Math.floor(a),o=i+1,s=a%1;o>=e.length?r.push(e[i]):r.push(e[i]*(1-s)+e[o]*s)}return r}function p(){$(".draw-details").click((function(){$(this).find("input:checkbox").prop("checked")?new C(this,J).disableLineChart():($(".trendChartData").hide(),$("#trendChartLegend").hide(),$("#lineChartLegend").show(),$(".lineChartButton").prop("checked",!0).prop("disabled",!1),$(".line-chart-check-box").attr("disabled",!1),$(".lineChartLine").attr("visibility","visible"))}))}String.prototype.hashCode=function(){var e,t=0;if(0===this.length)return t;for(e=0;e<this.length;e++)t=(t<<5)-t+this.charCodeAt(e),t|=0;return t},d3.selection.prototype.moveToBack=function(){return this.each((function(){var e=this.parentNode.firstChild;e&&this.parentNode.insertBefore(this,e)}))};let u,m,f,g,v={},b=1;class x{constructor(){this.indexTime=0,this.svgContainer=d3.select("#main-vis"),this.zoom=d3.zoom().scaleExtent([1,6]).on("zoom",()=>{d3.event.transform.x=Math.min(0,this.tankWidth*(d3.event.transform.k-1),Math.max(this.tankWidth*(1-d3.event.transform.k),d3.event.transform.x)),d3.event.transform.y=Math.min(0,this.tankHeight*(d3.event.transform.k-1),Math.max(this.tankHeight*(1-d3.event.transform.k),d3.event.transform.y)),this.zoomGroup.attr("transform",d3.event.transform),gXaxis.call(xAxis.scale(d3.event.transform.rescaleX(m))),gYaxis.call(yAxis.scale(d3.event.transform.rescaleY(f)))}),this.zoomGroup=this.svgContainer.append("svg:g"),this.tank=this.zoomGroup.append("svg:g").attr("class","tank").attr("transform",()=>"scale("+(parameters.inverted_x?-1:1)+","+(parameters.inverted_y?-1:1)+")"),this.activeScale="black",this.colorScale={type:"Linear",color:colorbrewer.BuYlBu},this.legendWidth=550,this.legendHeight=60,this.svgLegend=d3.select("#main-vis-legend-div").append("svg").attr("id","main-vis-legend").attr("width",this.legendWidth).attr("height",this.legendHeight),this.medoidAnimal=-1,this.activeAnimals=[],this.arrayAnimals=F.filter(e=>e.t===this.indexTime),this.id=$(".show-dendrogram.btn-primary").attr("data"),this.playBoolean=!0,this.hierarchyLevels={},this.hierarchyGroupStdev={},this.brush=d3.brush().extent([[0,0],[this.tankWidth,this.tankHeight]]),this.svgLegend_netw=d3.select("#hierarchy-legend-div"),this.dendrozoom=this.zoomGroup,this.networkColor={}}setIndexTime(e){"number"==typeof e&&this.indexTime<=J.length?this.indexTime=e:this.indexTime=0}setActiveScale(e){this.activeScale=e}setActiveAnimals(e){this.activeAnimals=e}decIndexTime(){this.indexTime=this.indexTime-1}updateLineChart(){if(d3.select("#lineChartTimeLine")&&J[Math.ceil(this.indexTime/b)]){let e=Math.ceil(this.indexTime/b);this.indexTime%25==0&&(d3.select("#convex_hull_areaLineValue").text(J[e].convex_hull_area+"mm²"),d3.select("#speedLineValue").text(J[e].speed+"mm/s"),d3.select("#accelerationLineValue").text(J[e].acceleration+"mm/s²"),d3.select("#distance_centroidLineValue").text(J[e].distance_centroid+"mm"),d3.select("#directionLineValue").text(J[e].direction+"°"),d3.select("#polarisationLineValue").text(J[e].polarisation)),d3.select("#lineChartTimeLine").attr("transform","translate("+g(e)+",0)")}}returnColorScale(){return"Linear"===this.colorScale.type?d3.scaleLinear().domain(Z[this.activeScale]).range(this.colorScale.color):"Threshold"===this.colorScale.type?d3.scaleThreshold().domain(Z[this.activeScale]).range(this.colorScale.color):void 0}initColorPicker(){d3.select(".colors-body").selectAll(".palette").data(d3.entries(colorbrewer)).enter().append("span").attr("class","palette").attr("title",e=>e.key).on("click",e=>{$(".palette").removeClass("selected"),$('.palette[title="'+e.key+'"]').addClass("selected"),this.colorScale.color=colorbrewer[e.key],this.changelegend(),$("#play-button").hasClass("active")||(this.decIndexTime(),this.draw())}).selectAll(".swatch").data(e=>e.value).enter().append("span").attr("class","swatch").style("background-color",e=>e),$('.palette[title="BuYlBu"]').addClass("selected")}changelegend(){let e,t;if($("#main-vis-legend-div").show(),"black"!==this.activeScale){var r=this.returnColorScale();e=this.svgLegend.selectAll("rect.legend").data(r.range()),t=this.svgLegend.selectAll("text.legend-text").data(r.domain())}else e=this.svgLegend.selectAll("rect.legend").data([]),t=this.svgLegend.selectAll("text.legend-text").data([]),$("#main-vis-legend-div").hide();e.style("fill",(function(e){return e})),e.enter().append("rect").attr("class","legend").attr("width",50).attr("height",20).attr("y",0).attr("x",(function(e,t){return 50+50*t+"px"})).style("fill",(function(e){return e})),e.exit().remove(),t.text((function(e){return Math.ceil(2*e)/2})),t.enter().append("text").attr("class","legend-text").attr("y",40).attr("x",(function(e,t){return 50+50*t+5+"px"})).text((function(e){return Math.ceil(2*e)/2})),t.exit().remove()}draw(){let e=$('input[type="radio"].group-playback-rate:checked').val(),t=$('input[type="radio"].group-size:checked').val();this.arrayAnimals=F.filter(e=>e.t===this.indexTime),setTimeout(()=>{var e;this.drawDendrogram(),this.svgContainer.select(".frame-text").text(Math.floor(this.indexTime/1500)%60+":"+Math.floor(this.indexTime/parameters.fps)%60+"::"+this.indexTime%parameters.fps),this.indexTime%parameters.fps==0&&(e=this.indexTime,n.slider("value",e));let r,s=this.tank.selectAll("g.animal").data(this.arrayAnimals);if(this.indexTime in q){let e=q[this.indexTime];if(j={},e=e.map(e=>{let t=this.arrayAnimals.filter((function(t){return t.a===e.s}))[0],r=this.arrayAnimals.filter((function(t){return t.a===e.e}))[0];return{node1:t.a,node2:r.a,start:t.p,end:r.p,val:e.v}}),e.forEach((function(e){$("#mc-"+e.node1+"-"+e.node2).css("fill",W(e.val)),$("#mc-"+e.node2+"-"+e.node1).css("fill",W(e.val))})),H){let t=[];for(let r=0;r<e.length;r++)t.push(e[r].val);G(function(e){if(0===e.length)return 0;e.sort((function(e,t){return e-t}));let t=.05*(e.length-1),r=Math.floor(t),n=r+1,a=t%1;return n>=e.length?1-e[r]:1-(e[r]*(1-a)+e[n]*a)}(t))}e=e.filter((function(e){return e.val<=1-B})),r=this.tank.select("#network-group").selectAll("line.network-edges").data(e),r.attr("x1",(function(e){return e.start[0]})).attr("y1",(function(e){return-e.start[1]})).attr("x2",(function(e){return e.end[0]})).attr("y2",(function(e){return-e.end[1]})).attr("stroke",(function(e){return W(1-e.val)})).attr("stroke-opacity",(function(e){return 1-e.val})),r.enter().append("line").attr("class","network-edges").attr("x1",(function(e){return e.start[0]})).attr("y1",(function(e){return-e.start[1]})).attr("x2",(function(e){return e.end[0]})).attr("y2",(function(e){return-e.end[1]})).attr("stroke",(function(e){return W(e.val)})).attr("stroke-opacity",(function(e){return e.val}))}else r=this.tank.selectAll("line.network-edges").data([]);var l,d;r.exit().remove(),$("#draw-triangulation").is(":checked")?((l=this.tank.select("#delaunay-triangulation-group").selectAll("path.delaunay-triangulation").data([J[this.indexTime].triangulation])).attr("d",e=>e),l.enter().append("path").attr("class","delaunay-triangulation").attr("d",e=>e)):l=this.tank.selectAll("path.delaunay-triangulation").data([]),l.exit().remove(),$("#draw-voronoi").is(":checked")?((d="voronoi"in J[0]?this.tank.select("#vornoi-group").selectAll("path.voronoi").data(J[this.indexTime].voronoi.split(";")):this.tank.select("#vornoi-group").selectAll("path.voronoi").data([J[this.indexTime].voronoi])).attr("d",e=>e),d.enter().append("path").attr("class","voronoi").attr("d",e=>e)):d=this.tank.select("#vornoi-group").selectAll("path.voronoi").data([]),d.exit().remove();let c=s.enter().append("g").attr("class","animal").attr("id",e=>"animal-"+e.a);if(c.append("circle").attr("r",1.5*t).attr("cx",e=>e.p[0]).attr("cy",e=>-e.p[1]).on("mouseover",e=>{!function(e){for(let t=0;t<X.length;t++)e.a===X[t].animal_id&&(a.style("left",d3.event.pageX+5+"px").style("top",d3.event.pageY-100+"px").style("opacity",1),a.select("#tooltip-animal-id").html(X[t].animal_id),a.select("#tooltip-species").html(X[t].species),a.select("#tooltip-sex").html(X[t].sex),a.select("#tooltip-size").html(X[t].size),a.select("#tooltip-weight").html(X[t].weight))}(e)}).on("mouseout",()=>{a.transition().duration(500).style("opacity",0)}).on("click",e=>{this.activeAnimals.includes(e.a)?this.activeAnimals=this.activeAnimals.filter(t=>t!==e.a):this.activeAnimals.push(e.a),$("#play-button").hasClass("active")||(this.indexTime--,this.draw())}),s.select("circle").attr("cx",e=>e.p[0]).attr("cy",e=>-e.p[1]).attr("r",t),c.append("svg:defs").append("svg:marker").attr("id",e=>"arrow-marker-"+e.a).attr("refX",2).attr("refY",6).attr("markerWidth",13).attr("markerHeight",13).attr("orient","auto").append("svg:path").attr("d","M2,2 L2,11 L10,6 L2,2"),c.append("line").attr("class","arrow").attr("marker-end",e=>"url(#arrow-marker-"+e.a+")"),$("#draw-direction").is(":checked")?s.select("line").attr("x1",e=>e.p[0]).attr("y1",e=>-e.p[1]).attr("x2",e=>e.p[0]+2*t).attr("y2",e=>-e.p[1]).attr("transform",e=>"rotate("+-e.direction+" "+e.p[0]+" "+-e.p[1]+")"):$(".arrow").hide(),s.exit().remove(),$("#draw-convex-hull").is(":checked")){var h=this.tank.selectAll("path.hull-path").data([J[this.indexTime].convex_hull]);h.attr("d",e=>e),h.enter().append("path").attr("class","hull-path").attr("d",e=>e)}else h=this.tank.select("path.hull-path").data([]);if(h.exit().remove(),"black"!==this.activeScale){var p=this.returnColorScale();s.transition().duration(10).style("fill",e=>p(e[this.activeScale])).attr("stroke",e=>p(e[this.activeScale]))}else s.style("fill","#000").attr("stroke","#000"),$.isEmptyObject(i)||Object.keys(i).forEach((function(e){d3.select("#animal-"+e).style("fill",i[e]).attr("stroke",i[e])}));this.activeAnimals.length?(s.style("opacity",e=>this.activeAnimals.includes(e.a)?1:.25),$("#remove-active-selected-button").is(":disabled")&&($("#remove-active-selected-button").prop("disabled",!1),$("#visual-parameter-button").prop("disabled",!1)),o.trackingBoolean&&Object(o.addTrackedData)(this.arrayAnimals[0].t,this.activeAnimals)):($("#remove-active-selected-button").is(":disabled")||($("#remove-active-selected-button").prop("disabled",!0),$("#visual-parameter-button").prop("disabled",!0)),s.style("opacity",1)),d3.select(".centroid").attr("cx",()=>"centroid"in J[0]?J[this.indexTime].centroid[0]:0).attr("cy",()=>"centroid"in J[0]?-J[this.indexTime].centroid[1]:0),$("#draw-direction").is(":checked")&&J[this.indexTime].centroid&&$("#draw-centroid").is(":checked")?(d3.select("#centroid-line").classed("hidden",!1),d3.select("#centroid-line").attr("x1",()=>J[this.indexTime].centroid[0]).attr("y1",()=>-J[this.indexTime].centroid[1]).attr("x2",()=>J[this.indexTime].centroid[0]+2*t).attr("y2",()=>-J[this.indexTime].centroid[1]).attr("transform",()=>"rotate("+-J[this.indexTime].direction+" "+J[this.indexTime].centroid[0]+" "+-J[this.indexTime].centroid[1]+")")):d3.select("#centroid-line").attr("class","hidden"),-1!==this.medoidAnimal&&(d3.selectAll("#animal-"+this.medoidAnimal).classed("medoid",!1),this.medoidAnimal=J[this.indexTime].medoid,d3.selectAll("#animal-"+this.medoidAnimal).classed("medoid",!0)),this.indexTime++,this.updateLineChart(),this.indexTime>=J.length?(this.indexTime=0,this.draw()):this.playBoolean&&this.draw()},e)}initDendrogram(){let e=d3.zoom().scaleExtent([1,10]).on("zoom",()=>{d3.event.transform.x=Math.min(0,5e3*(d3.event.transform.k-1),Math.max(5e3*(1-d3.event.transform.k),d3.event.transform.x)),d3.event.transform.y=Math.min(0,5e3*(d3.event.transform.k-1),Math.max(5e3*(1-d3.event.transform.k),d3.event.transform.y)),this.dendrozoom.attr("transform",d3.event.transform)}),t=d3.select("#dendrogram-panel").classed("svg-dendrogram-container",!0).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 5000 5000").classed("svg-content-dendrogram",!0).call(e);D(),this.dendrozoom=t.append("g").attr("transform","translate(20,20)").append("svg:g");d3.tree().size([4800,4800]);let r,n=d3.select(".tank");$("#dendrogram-panel-level-slider").slider({range:"max",min:2,max:2,step:1,value:this.hierarchyLevels.h0,slide:(e,t)=>{let r=$(".show-dendrogram.btn-primary").attr("data");this.setHierarchyLevel(r,t.value),this.updateDendrogram(),$("#play-button").hasClass("active")||(this.decIndexTime(),this.draw(),this.drawDendrogram())}}),r=d3.select("#dendrogram-tooltip").style("left","0px").style("top","0px").on("mouseover",(function(){r.style("opacity",1)}));let a=100*_;this.svgLegend_netw=d3.select("#hierarchy-legend-div").append("svg").attr("id","hierarchy-legend").attr("width",a).attr("height",60),n.append("defs").append("svg:pattern").attr("id","striped").attr("patternUnits","userSpaceOnUse").attr("width","20").attr("height","5").attr("patternTransform","rotate(60)").append("rect").attr("width",5).attr("height",10).attr("transform","translate(0,0)").style("fill","#67000d")}click(e){setActiveAnimals(e.data.name),$("#play-button").hasClass("active")||(this.decIndexTime(),this.draw())}sethierarchyGroupStdev(e,t){e in this.hierarchyGroupStdev?this.hierarchyGroupStdev[e].push(t):this.hierarchyGroupStdev[e]=[t]}resethierarchyGroupStdev(){this.hierarchyGroupStdev={}}getHierarchyLevel(e,t){let r=[],n=this.hierarchyLevels["h"+t],a=e.children;for(let t=1;t<e.height;t++){if(a[0]&&a[0].depth===n){a.forEach((function(e){void 0!==e.data.name&&r.push(e.data.name)}));break}let e=[];a.forEach((function(t){void 0!==t.children&&(e=e.concat(t.children))})),a=e}return r}setHierarchyLevel(e,t){this.hierarchyLevels["h"+e]=t}setHierarchyColor(e){for(let t in this.networkColor)if(t==="h"+e)return void(S["h"+e]=this.networkColor[t]);for(let t=0;t<colors.length;t++){let r=!0;for(let e in S)S.hasOwnProperty(e)&&S[e]===colors[t]&&(r=!1);if(r){if(0===Object.keys(this.networkColor).length)return void(S["h"+e]=colors[t]);for(let r in this.networkColor)if(this.networkColor[r]!==colors[t])return void(S["h"+e]=colors[t])}}}removeHierarchyColor(e){delete S["h"+e]}removeHierarchyLevel(e){delete this.hierarchyLevels["h"+e]}updateDendrogram(){let e=$(".show-dendrogram.btn-primary").attr("data"),t=$(".show-dendrogram.btn-primary").attr("name");$("#dendrogram-panel-name").text(t),$("#dendrogram-panel-level-slider").val(this.hierarchyLevels["h"+e]),$("#dendrogram-panel-level-text").text(this.hierarchyLevels["h"+e])}getHierarchyVertices(e){let t=[];return e.forEach(e=>{let r=[];for(let t=0;t<e.length;t++){let n=this.arrayAnimals.find(r=>r.a===e[t]);n&&r.push([n.p[0],-n.p[1]])}r.length>=3&&t.push(d3.polygonHull(r))}),t}drawHierarchy(){let e=Object.keys(K).map((function(e){return e.replace("h","")})),t=[];for(let r=0;r<e.length;r++){let n=K["h"+e[r]][this.indexTime],a=d3.hierarchy(n,(function(e){return e.children})),i=20,o=5e3,s=5e3;a=d3.tree().size([s-10*i,o-10*i])(a);let l=a.children[0];E===e[r]&&(networkHierarchyIds=this.getHierarchyLevel(l,e[r])),t.push(this.getHierarchyVertices(this.getHierarchyLevel(l,e[r])))}t.length;let r=d3.select(".tank").selectAll("g.hierarchy-group").data(t);r.enter().append("g").attr("class",(function(t,r){return"hierarchy-group h"+e[r]})).style("fill",(function(t,r){return S["h"+e[r]]})).attr("stroke",(function(t,r){return S["h"+e[r]]})).moveToBack(),r.attr("class",(function(t,r){return"hierarchy-group h"+e[r]})),r.exit().remove();let n=r.selectAll("path.hierarchy-hull-path").data((function(e){return e}));n.enter().append("path").attr("class","hierarchy-hull-path").attr("d",(function(e){return"M"+e.join("L")+"Z"})),n.attr("d",(function(e){return"M"+e.join("L")+"Z"})),n.exit().remove()}drawDendrogram(){var e=t=>{t.children&&t.depth<=2?(t._children=t.children,t._children.forEach(e)):t.children=0};let t=$(".show-dendrogram.btn-primary").attr("data");if(!$.isEmptyObject(K)&&t){let n=K["h"+t][this.indexTime],a=d3.hierarchy(n,(function(e){return e.children}));a=a.children[0],a.children.forEach(e);let i=20,o=5e3,s=5e3;if(a=d3.tree().size([s-10*i,o-10*i])(a),$(".show-dendrogram.btn-primary").length){$("#dendrogram-panel-level-slider").slider("option","max",a.height-1).slider("value",this.hierarchyLevels["h"+t]);let e=this.dendrozoom.selectAll("path.link").data(a.descendants().slice(1));e.enter().append("path").attr("class","link").attr("d",z),e.attr("d",z),e.exit().remove();let n=this.dendrozoom.selectAll(".node").data(a.descendants());var r=n.enter().append("g").attr("class",(function(e){return"node"+(e.children?" node--internal":" node--leaf")})).attr("transform",(function(e){return"translate("+e.x+","+e.y+")"}));r.append("circle").attr("r",e=>e.depth===this.hierarchyLevels["h"+t]?40+e.data.name.length:20+e.data.name.length).attr("class",e=>{if(e.depth===this.hierarchyLevels["h"+t])return"active-level"}).attr("id",e=>"h"+e.data.name.toString().hashCode()).on("click",this.click).on("mouseover",(function(e){tooltipDiv.style("left",d3.event.pageX+5+"px").style("top",d3.event.pageY+5+"px").style("opacity",1),tooltipDiv.select(".tooltip-span").html(e.data.name.toString()),addHighlightSpatialView(e.data.name)})).on("mouseout",(function(){tooltipDiv.transition().duration(500).style("opacity",0),removeHighlightSpatialView()})),r.append("text").attr("class","dendrogram-text").attr("x",150).attr("y",-150).text(e=>e.data.name.length),r.attr("transform",e=>"translate("+e.x+","+e.y+")"),n.attr("transform",e=>"translate("+e.x+","+e.y+")").select("circle").attr("r",e=>e.depth===this.hierarchyLevels["h"+t]?40+e.data.name.length:20+e.data.name.length).attr("class",e=>e.depth===this.hierarchyLevels["h"+t]?"active-level":"").attr("id",e=>"h"+e.data.name.toString().hashCode()),n.select("text").text(e=>e.data.name.length),n.exit().remove(),Object.keys(this.hierarchyGroupStdev).length?(console.log("runs"),"none"==$("#dendrogram-legend").css("display")&&$("#dendrogram-legend").show(),setTimeout(()=>{n.select("circle").style("fill",(function(e){return"h"+e.data.name.toString().hashCode()in j?standardDeviationColorScale(standardDeviation(j["h"+e.data.name.toString().hashCode()])):e.depth!==(void 0)["h"+this.id]?"":"#000"}))},250)):"none"!==$("#dendrogram-legend").css("display")&&$("#dendrogram-legend").hide()}}$.isEmptyObject(K)||this.drawHierarchy()}changeHierarchyLegend(){let e,t;0!==Object.keys(S).length||0!==Object.keys(this.networkColor).length?(console.log("applys"),$("#hierarchy-legend-div").show()):$("#hierarchy-legend-div").hide();let r=[],n=[];if($(".show-dendrogram").each((function(e,t){null!=S["h"+$(t).attr("data")]&&null!=$(t).attr("name")&&(r.push(S["h"+$(t).attr("data")]),n.push($(t).attr("name")))})),0!==Object.keys(this.networkColor).length)for(let e in this.networkColor)-1===r.indexOf(this.networkColor[e])&&(r.push(this.networkColor[e]),n.push("Network"));e=this.svgLegend_netw.selectAll("rect.legend").data(r),t=this.svgLegend_netw.selectAll("text.legend-text").data(n),e.style("fill",(function(e){return e})),e.enter().append("rect").attr("class","legend").attr("width",50).attr("height",20).attr("y",0).attr("x",(function(e,t){return 50+2.5*t*50+"px"})).style("fill",(function(e){return e})),e.exit().remove(),t.text((function(e){return e})),t.enter().append("text").attr("class","legend-text").attr("y",40).attr("x",(function(e,t){return 50+2.5*t*50+"px"})).text((function(e){return e})),t.exit().remove()}setnetworkColor(e){e>=0?this.networkColor["h"+e]="#08306b":(console.log("color nothing"),this.networkColor={}),this.changeHierarchyLegend()}}class y extends x{constructor(e){super(e),this.spatialViewInit()}cp_listener(){$("#play-button").click(()=>{!0===$("#play-button").hasClass("active")?(this.playBoolean=!1,$(".mdi-pause").hide(),$(".mdi-play").show()):(this.playBoolean=!0,$(".mdi-play").hide(),$(".mdi-pause").show(),this.setIndexTime(n.slider("value")),$(".brush").remove(),this.draw())}),$("#next-frame-button").click(()=>{!0===$("#play-button").hasClass("active")&&(this.playBoolean=!1),$("#play-button").removeClass("active"),this.draw()}),$("#brushing-button").click(()=>{this.playBoolean=!1,$("#play-button").removeClass("active"),$("#brushing-button").hasClass("active")?$(".brush").remove():(this.brush=d3.brush().extent([[0,0],[this.tankWidth,this.tankHeight]]).on("end",()=>{var e=d3.event.selection;this.activeAnimals=[],this.arrayAnimals.map(t=>{var r=[t.p[0],t.p[1]];e[0][0]<=r[0]&&r[0]<=e[1][0]&&e[0][1]<=r[1]&&r[1]<=e[1][1]&&this.activeAnimals.push(t.a)}),console.log(this.activeAnimals),$("#play-button").hasClass("active"),$("#brushing-button").removeClass("active"),$(".brush").remove()}),d3.select("#main-vis-svg").append("g").attr("class","brush").call(this.brush))}),$("#remove-active-selected-button").click(()=>{$("#remove-active-selected-button").is(":disabled")||($("#remove-active-selected-button").prop("disabled",!0),this.setActiveAnimals([]),resetTrackedData(),$("#visual-parameter-button").prop("disabled",!0).removeClass("active"),$("#play-button").hasClass("active")||(this.decIndexTime(),this.draw()))}),$("#visual-parameter-button").click(()=>{!0===$("#visual-parameter-button").hasClass("active")?setTrackingBoolean(!1):setTrackingBoolean(!0)}),$("#calculate-parameter-button").click(()=>{$("#calculate-parameter-button").hasClass("active")||(setTrackingBoolean(!1),sendTrackedData(),$("#calculate-parameter-button").prop("disabled",!0),$("#calculate-parameter-button").removeClass("active"),$("#visual-parameter-button").removeClass("active"))}),$("#background-color").change(()=>{let e=$('input[type="radio"].group-background:checked').val();$("#main-vis-svg").css("background-color",e)}),$("#draw-axis").on("change",()=>{this.checked?($("#main-vis g.x.axis").show(),$("#main-vis g.y.axis").show()):($("#main-vis g.x.axis").hide(),$("#main-vis g.y.axis").hide())}),$("#draw-time").on("change",()=>{this.checked?$("#main-vis .frame-text").show():$("#main-vis .frame-text").hide()}),$("#network-background").on("change",()=>{this.checked?setNetworkBackground(!0):setNetworkBackground(!1)}),$("#network-background-limit").val(1),$("#network-background-limit").on("change",()=>{let e=$(this).val();$.isNumeric(e)&&e>0?setNetworkBackgroundLimit(e):$(this).val(1)}),$("#color-scale-radio-form input").on("change",()=>{this.colorScale.type=$("input[name=color-scale-radio]:checked","#color-scale-radio-form").val(),$("#play-button").hasClass("active")||(this.decIndexTime(),this.draw())})}sf_listeners(){$("#draw-direction").click(()=>{$("#draw-direction").is(":checked")?("direction"in F[0]||(d(),V("direction")),$(".arrow").show()):$(".arrow").hide(),$("#play-button").hasClass("active")||this.decIndexTime()}),$("#draw-medoid").click(()=>{$("#draw-medoid").is(":checked")?("medoid"in J[0]||Y("medoid"),this.setMedoidAnimal(J[this.indexTime].medoid),d3.selectAll("#animal-"+this.medoidAnimal).classed("medoid",!0)):(d3.selectAll("#animal-"+this.medoidAnimal).classed("medoid",!1),this.setMedoidAnimal(-1))}),$("#draw-centroid").click(()=>{$("#draw-centroid").is(":checked")?("centroid"in J[0]||Y("centroid"),$("#g-centroid").show()):$("#g-centroid").hide()}),$("#draw-convex-hull").click(()=>{$("#draw-convex-hull").is(":checked")&&("hull"in J[0]||Y("convex_hull"))}),$("#draw-triangulation").click(()=>{$("#draw-triangulation").is(":checked")&&("triangulation"in J[0]||Y("triangulation"),$("#play-button").hasClass("active")||this.decIndexTime())}),$("#draw-voronoi").click(()=>{$("#draw-voronoi").is(":checked")&&("voronoi"in J[0]||Y("voronoi"),$("#play-button").hasClass("active")||this.decIndexTime())})}af_listeners(){$("#draw-speed").click(()=>{$(".draw-details").hide().find("input:checkbox").prop("checked",!0).click(),$("#draw-speed").is(":checked")?("speed"in F[0]||(d(),V("speed")),$("#draw-speed-details").show(),$("#draw-acceleration").prop("checked",!1),$("#draw-distance_centroid").prop("checked",!1),$("#draw-midline_offset").prop("checked",!1),this.setActiveScale("speed")):($("#draw-speed-details").hide(),this.setActiveScale("black")),d3.selectAll(".colorLegend *").remove(),this.changelegend(),$("#play-button").hasClass("active")||this.decIndexTime()}),$("#draw-acceleration").click(()=>{$(".draw-details").hide().find("input:checkbox").prop("checked",!0).click(),$("#draw-acceleration").is(":checked")?("acceleration"in F[0]||(d(),V("acceleration")),$("#draw-acceleration-details").show(),$("#draw-speed").prop("checked",!1),$("#draw-distance_centroid").prop("checked",!1),$("#draw-midline_offset").prop("checked",!1),this.setActiveScale("acceleration")):($("#draw-acceleration-details").hide(),this.setActiveScale("black")),$(".draw-details.active").click(),d3.selectAll(".colorLegend *").remove(),this.changelegend(),$("#play-button").hasClass("active")||this.decIndexTime()}),$("#draw-distance_centroid").click(()=>{$(".draw-details").hide().find("input:checkbox").prop("checked",!0).click(),$("#draw-distance_centroid").is(":checked")?(console.log("checked"),"distance_centroid"in F[0]||(d(),V("distance_centroid")),console.log(F),$("#draw-distance_centroid-details").show(),$("#draw-speed").prop("checked",!1),$("#draw-acceleration").prop("checked",!1),$("#draw-midline_offset").prop("checked",!1),this.setActiveScale("distance_centroid")):(console.log("black"),$("#draw-distance_centroid-details").hide(),this.setActiveScale("black")),$(".draw-details.active").click(),d3.selectAll(".colorLegend *").remove(),this.changelegend(),$("#play-button").hasClass("active")||this.decIndexTime()}),$("#draw-midline_offset").click(()=>{$(".draw-details").hide().find("input:checkbox").prop("checked",!0).click(),$("#draw-midline_offset").is(":checked")?("draw-midline_offset"in F[0]||(d(),V("midline_offset")),$("#draw-midline_offset-details").show(),$("#draw-speed").prop("checked",!1),$("#draw-acceleration").prop("checked",!1),$("#draw-distance_centroid").prop("checked",!1),T("midline_offset")):T("black"),$(".draw-details.active").click(),d3.selectAll(".colorLegend *").remove(),this.changelegend(),$("#play-button").hasClass("active")||(this.decIndexTime(),this.draw())})}md_listeners(){$(".metadata-swatch.metadata-swatch-clickable").click((function(){let e=$(this).attr("value"),t=$(this).css("background-color");$("#metadata-row-"+e+" #preview").css("background-color",t),"rgb(255, 255, 255)"===t?i[e]&&delete i[e]:i[e]=t})),$("#group-metadata :input").change((function(){resetIndividualMetadata();let e=$(this).attr("value"),t=[];if("sex"===e){$("#metadata-div").modal("toggle");for(let r=0;r<X.length;r++)t.push(X[r][e].toLowerCase());t=Array.from(new Set(t));let r=["#7fc97f","#386cb0"];for(let n=0;n<X.length;n++)for(let a=0;a<t.length;a++)X[n][e].toLowerCase()===t[a]&&(i[X[n].animal_id]=r[a]);$("#metadata-input").hide()}else{$("#metadata-input").show();for(let r=0;r<X.length;r++)t.push(X[r][e]);let r=d3.quantile(t,.25),n=d3.quantile(t,.75);$("#bl-avg").val(r),$("#ab-avg").val(n),colorMetadata()}})),$(".number-spinner button").click((function(){let e=$(this),t=e.closest(".number-spinner").find("input").val().trim(),r=0;r="up"==e.attr("data-dir")?parseFloat(t)+.1:t>0?parseFloat(t)-.1:0,r=Math.round(100*r)/100,e.closest(".number-spinner").find("input").val(r),colorMetadata()})),$(".number-spinner input").on("input",(function(){colorMetadata()})),$("#metadata-reset").click((function(){$("#metadata-input").hide(),resetIndividualMetadata()}))}initShowDendrogramListener(e){$("#show-dendrogram-"+e).click((function(){let e=$(this).attr("id");$(".show-dendrogram").each((function(t,r){$(r).attr("id")===e&&!1===$(r).hasClass("btn-primary")?($(r).addClass("btn-primary"),$(r).find("#btn-left").hide(),$(r).find("#btn-right").show()):($(r).removeClass("btn-primary"),$(r).find("#btn-left").show(),$(r).find("#btn-right").hide())})),$(".show-dendrogram.btn-primary").length?$("#dendrogram-panel").show():$("#dendrogram-panel").hide(),$("#play-button").hasClass("active")||(this.decIndexTime(),this.draw(),this.drawDendrogram())}))}h_listeners(){var e;$(".hiearchy-checkbox").on("change",(function(){e=$(this)})),$(".hiearchy-checkbox").on("change",()=>{console.log("jumps");let t=e.attr("data"),r=e.attr("name"),n=e.prop("checked");if(console.log(n),n&&$(".show-dendrogram").length<_)d(),a=t,$.ajax({url:"/api/dataset/network/hierarchy/"+parameters.id+"/"+a,dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:N},success:function(e){e.length&&oe(JSON.parse(e[0].hierarchy),a),c()}}),function(e,t){$(".show-dendrogram").length<_&&($("#dendrogram-buttons-div").append('<button type="button" id="show-dendrogram-'+e+'" data='+e+" name="+t+' class="show-dendrogram btn btn-block" data-toggle="button" aria-pressed="false" autocomplete="off"> <span class="btn-label" id="btn-left"> <i class="mdi mdi-arrow-collapse-left"></i>&nbsp&nbsp Show '+t+'</span><span class="btn-label" id="btn-right"> <i class="mdi mdi-arrow-collapse-right"></i>&nbsp&nbsp Hide '+t+" </span></button> <br>"),$("#show-dendrogram-"+e).find("#btn-right").hide())}(t,r),this.initShowDendrogramListener(t),$("#dendrogram-buttons-div").show();else{let e=$("#show-dendrogram-"+t).hasClass("btn-primary");oe({},t),function(e){$("#show-dendrogram-"+e).next().remove(),$("#show-dendrogram-"+e).remove()}(t),d3.select("g.h"+t).remove(),!0===e&&$("#dendrogram-panel").hide(),0===$(".show-dendrogram").length&&$("#dendrogram-buttons-div").hide()}var a;$(".show-dendrogram").length?($("#main-vis-div").removeClass("col-md-12"),$("#main-vis-div").addClass("col-md-8")):($("#main-vis-div").removeClass("col-md-8"),$("#main-vis-div").addClass("col-md-12"))}),$(".network-hierarchy-checkbox").on("change",()=>{let e=$(this);$(".network-hierarchy-checkbox").prop("checked",!1),e.prop("checked",!0),e.prop("checked")?setNetworkHierarchy(e.attr("data")):setNetworkHierarchy(void 0)})}n_listeners(){var e;$("#networks-modal-body button").click((function(){e=$(this).attr("data")})),$("#networks-modal-body button").click(()=>{$("#active-network-name").text($(this).attr("name")),d(),function(e){$.ajax({url:"/api/dataset/network/"+parameters.id+"/"+e,dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:N},success:function(e){e.length&&ie(JSON.parse(e[0].data)),c()}}),t=e,O=t;var t}(e),this.setnetworkColor(e),$("#network-div").modal("toggle")}),$("#network-remove").click(()=>{ie({}),setNetworkID(-1),this.setnetworkColor(-1),$("#active-network-name").text("")}),$("#network-auto-suggest").click((function(){if($("#network-auto-suggest").hasClass("active")){$("#network-limit-p").show(),$("#network-slider").show(),setNetworkAuto(!1);let e=$("#network-slider").slider("value");G(e),$("#network-limit").val(e)}else $("#network-limit-p").hide(),$("#network-slider").hide(),setNetworkAuto(!0)}))}spatialViewInit(){let e=parameters.min.geometry.coordinates,t=parameters.max.geometry.coordinates;this.tankWidth=1.02*(t[0]-e[0]),this.tankHeight=1.02*(t[1]-e[1]);let r=d3.scaleLinear().domain([e[0],t[0]]).range([e[0],t[0]]),i=d3.axisBottom(r).ticks(10).tickSize(10).tickPadding(5),o=d3.scaleLinear().domain([e[1],t[1]]).range([e[1],t[1]]),s=d3.axisRight(o).ticks(7).tickSize(10).tickPadding(5),l=d3.zoom().scaleExtent([1,6]).on("zoom",()=>{d3.event.transform.x=Math.min(0,this.tankWidth*(d3.event.transform.k-1),Math.max(this.tankWidth*(1-d3.event.transform.k),d3.event.transform.x)),d3.event.transform.y=Math.min(0,this.tankHeight*(d3.event.transform.k-1),Math.max(this.tankHeight*(1-d3.event.transform.k),d3.event.transform.y)),this.zoomGroup.attr("transform",d3.event.transform),c.call(i.scale(d3.event.transform.rescaleX(r))),h.call(s.scale(d3.event.transform.rescaleY(o)))});this.svgContainer=d3.select("#main-vis").classed("svg-container",!0).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 "+this.tankWidth+" "+this.tankHeight).classed("svg-content",!0).attr("id","main-vis-svg").call(l);let d=Math.ceil(this.tankHeight/this.tankWidth*100);$("#main-vis").append($("<style>#main-vis::after {padding-top: "+d+'%;display: block;content: "";}</style> ')),this.zoomGroup=this.svgContainer.append("svg:g"),parameters.background_image&&this.zoomGroup.append("image").attr("xlink:href","/"+parameters.background_image).attr("class","background-image").attr("height",this.tankHeight).attr("width",this.tankWidth).attr("x","0").attr("y","0"),this.tank=this.zoomGroup.append("svg:g").attr("class","tank").attr("transform",()=>"scale("+(parameters.inverted_x?-1:1)+","+(parameters.inverted_y?-1:1)+")"),this.tank.append("g").attr("id","g-centroid").append("circle").attr("class","centroid").attr("r",6).attr("cx",0).attr("cy",0),this.tank.select("#g-centroid").append("svg:defs").append("svg:marker").attr("id","centroid-arrow").attr("refX",2).attr("refY",6).attr("markerWidth",13).attr("markerHeight",13).attr("orient","auto").append("svg:path").attr("d","M2,2 L2,11 L10,6 L2,2"),this.tank.select("#g-centroid").append("line").attr("id","centroid-line").attr("marker-end","url(#centroid-arrow)"),this.tank.append("g").attr("id","network-group"),this.tank.append("g").attr("id","delaunay-triangulation-group"),this.tank.append("g").attr("id","vornoi-group"),this.svgContainer.append("text").attr("class","frame-text").attr("x",30).attr("y",30).text("-- : -- : -- ");let c=this.svgContainer.append("g").attr("class","x axis").call(i),h=this.svgContainer.append("g").attr("class","y axis").call(s);a=d3.select("div.tooltip").style("left","0px").style("top","0px").on("mouseover",(function(){a.style("opacity",1)})),function(){n=$("#slider").slider({min:0,max:J.length,step:25,slide:function(e,t){(void 0)(t.value),$("#play-button").hasClass("active")||(void 0)()}}),$("#network-slider").slider({range:"max",min:0,max:1,step:.01,value:.5,slide:function(e,t){G(t.value),$("#network-limit").val(t.value)}}),$("#network-limit").val(.5);let e=n.slider("option","max"),t=100/e;for(let r=0;r<e;r+=1500)$('<span class="ui-slider-tick"></span>').css("left",t*r+"%").appendTo(n)}(),this.initColorPicker();var p,u;new w(J);this.cp_listener(),this.sf_listeners(),this.af_listeners(),this.md_listeners(),this.n_listeners(),this.h_listeners(),this.initDendrogram(),p=this.tankHeight,u=this.tankWidth,$((function(){$("#main-vis").draggable({containment:"parent"}).resizable({aspectRatio:!0,maxWidth:$("#main-vis-div").width()}).height(.6*p).width(.6*u)})),$("input[type=checkbox]").prop("checked",!1),$("#color-scale-linear").prop("checked",!0),$("#group-size-m").prop("checked",!0),$("#background-white").prop("checked",!0),$("#settings-div input[type=checkbox]").prop("checked",!0),$("#loading").hide(),$("#play-loading").hide(),$(".mdi-play").hide(),$("#metadata-input").hide(),$("#dendrogram-buttons-div").hide(),$("#g-centroid").hide(),$("#line-chart-feature-checkboxes input[type=checkbox]").prop("checked",!0),this.draw()}setMedoidAnimal(e){this.medoidAnimal=e}}class k extends x{constructor(e){super(),this.swarmData=e,this.swarm_features=Object.keys(this.swarmData[0]),this.lineChartWidth=5e3,this.trendChartsElem=["lower-outer-area","lower-inner-area","median-line","upper-inner-area","upper-outer-area"]}}class w extends k{constructor(e){super(e),this.lineChart()}lineChart(){b=Math.ceil(this.swarmData.length/this.lineChartWidth);let e=100,t=10,r=this.swarm_features,n=r.indexOf("time");r.splice(n,1);let a=[];if(this.swarmData.length>this.lineChartWidth){let e=new Array(r.length).fill(0);for(let t=0;t<this.swarmData.length;t++){for(let n=0;n<r.length;n++)e[n]+=this.swarmData[t][r[n]];if(t%b==0){let n={time:t/b};for(let t=0;t<r.length;t++)e[t]=e[t]/b,n[r[t]]=e[t];a.push(n),e=new Array(r.length).fill(0)}}}else a=this.swarmData;g=d3.scaleLinear().domain([0,a.length]).range([0,this.lineChartWidth]),m=d3.scaleLinear().domain([0,a.length]).range([0,this.lineChartWidth]);let i=d3.scaleLinear().domain([0,a.length]).range([0,this.lineChartWidth]),o=d3.axisBottom(m).ticks(10).tickSize(10).tickPadding(5).tickFormat((function(e){return Math.floor(e*b/1500)%60+":"+Math.floor(e*b/parameters.fps)%60+"::"+e*b%parameters.fps}));f=d3.scaleLinear().domain([0,100]).range([500,0]);let s=d3.axisLeft(f).ticks(0).tickSize(10).tickPadding(5),l=()=>{let e=d3.mouse(this);if(e[0]<t||e[0]>this.lineChartWidth||e[1]<0||e[1]>500)return;let r=d3.scaleLinear().domain(g.range()).range(g.domain());this.setIndexTime(Math.floor(r(e[0]-t)*b))},d=d3.zoom().scaleExtent([1,20]).translateExtent([[0,0],[this.lineChartWidth,500]]).extent([[0,0],[this.lineChartWidth,500]]).on("zoom",()=>{let e=d3.event.transform;g=m.domain(e.rescaleX(i).domain());for(let e in x)x.hasOwnProperty(e)&&u.select("#"+e+"Line").attr("d",x[e]);for(let e in v)if(v.hasOwnProperty(e))for(let t=0;t<this.trendChartsElem.length;t++)u.select("#"+e+"TrendChart ."+this.trendChartsElem[t]).attr("d",v[e][this.trendChartsElem[t]]);h.call(o)}),c=d3.select("#swarm-vis").classed("svg-line-chart-container",!0).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 "+this.lineChartWidth+" "+(500+e)).classed("svg-content",!0);u=c.append("svg:g").attr("id","lineChartZoom").attr("transform","translate("+t+",0)");let h=u.append("g").attr("class","x axis-line-chart").attr("transform","translate(0,500)").call(o);u.append("g").attr("class","y axis-line-chart").call(s),u.append("line").attr("class","time-line").attr("id","lineChartTimeLine").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",500);let p=d3.scaleOrdinal(d3.schemeCategory10),x={};for(let e=0;e<r.length;e++){let t=d3.min(a,(function(t){return t[r[e]]})),n=d3.max(a,(function(t){return t[r[e]]})),i=d3.scaleLinear().domain([t,n]).range([0,100]),o=d3.line().x((function(e){return m(e.time)})).y((function(t){return f(i(t[r[e]]))}));x[r[e]]=o,u.append("path").data([a]).attr("id",r[e]+"Line").attr("class","line lineChartLine").style("stroke",p(e)).attr("d",o).attr("name",r[e])}$("#lineChartTimeLine").appendTo("#lineChartZoom"),u.append("rect").attr("class","zoom").attr("width",this.lineChartWidth).attr("height",500).call(d).on("click",l).call(d3.drag().on("drag",l));let y=d3.selectAll(".line");c.append("g").attr("id","lineChartLegend").attr("transform","translate("+e+",550)").selectAll("rect.legend").data(y._groups[0]).enter().each((function(e,t){d3.select(this).append("rect").attr("class","legend").attr("width",100).attr("height",50).attr("x",600*t+"px").style("fill",e.style.stroke),d3.select(this).append("text").attr("id",e.attributes.id.value+"LegendTitle").attr("class","line-chart-legend-text").attr("y",40).attr("x",600*t+100+10+"px").text(e.attributes.name.value+": "),d3.select(this).append("text").attr("id",e.attributes.id.value+"Value").attr("class","line-chart-legend-text").attr("y",40).attr("x",600*t+100+d3.select("#"+e.attributes.id.value+"LegendTitle").node().getComputedTextLength()+10+"px").text("0.0")})),c.append("g").attr("id","trendChartLegend").attr("transform","translate("+e+",550)").selectAll("rect.legend").data(["5% - 95%","25% - 75%","Median"]).enter().each((function(e,t){d3.select(this).append("rect").attr("class","legend").attr("width",100).attr("height",50).attr("x",800*t+"px").style("fill",(function(){return 0===t?"#74a9cf":1===t?"#045a8d":"#525252"})),d3.select(this).append("text").attr("class","line-chart-legend-text").attr("y",40).attr("x",800*t+100+10+"px").text(e)})),$("#trendChartLegend").hide(),this.initLineChartButtons()}initLineChartButtons(){for(let e=0;e<this.swarm_features.length;e++){let t=this.swarm_features[e].split("_").join(" ");t=t.charAt(0).toUpperCase()+t.slice(1),$("#line-chart-feature-checkboxes").append('<tr><th> <div class="pretty p-switch p-fill p-bigger"><input type="checkbox" class="line-chart-check-box" id="draw-'+this.swarm_features[e]+'" data="#'+this.swarm_features[e]+'Line" /><div class="state"><label>'+t+"</label></div></div></th></tr>")}$(".line-chart-check-box").change((function(){let e=$(this);e.prop("checked")?$(e.attr("data")).show():$(e.attr("data")).hide()}))}}class C extends k{constructor(e,t){super(t),this.elem=e,this.trendchart()}disableLineChart(){$(".lineChartButton").prop("checked",!1).prop("disabled",!0),$(".line-chart-check-box").attr("disabled",!0),$(".lineChartLine").attr("visibility","hidden")}trendchart(){let e="";if(this.elem.id.toLowerCase().includes("speed"))e="speed";else if(this.elem.id.toLowerCase().includes("acceleration"))e="acceleration";else if(this.elem.id.toLowerCase().includes("distance_centroid"))e="distance_centroid";else{if(!this.elem.id.toLowerCase().includes("midline_offset"))return;e="midline_offset"}if($("#lineChartLegend").hide(),$("#trendChartLegend").show(),$("#"+e+"TrendChart").length)$("#"+e+"TrendChart").show();else{let t=[],r=Q.length;for(let n=0;n<J.length;n++){let a=[];for(let t=0;t<r;t++)F[n*r+t]&&a.push(F[n*r+t][e]);t.push(h(a))}if(t.length>this.lineChartWidth){let e=[],r=[0,0,0,0,0];for(let n=0;n<t.length;n++){for(let e=0;e<r.length;e++)r[e]+=t[n][e];if(n%b==0){for(let e=0;e<r.length;e++)r[e]+=r[e]/b;e.push(r),r=[0,0,0,0,0]}}t=e}let n=d3.min(t,(function(e){return e[0]})),a=d3.max(t,(function(e){return e[4]})),i=d3.scaleLinear().domain([n,a]).range([0,100]),o=u.append("g").attr("id",e+"TrendChart").attr("class","trendChartData");$(".zoom").appendTo("#lineChartZoom"),$("#lineChartTimeLine").appendTo("#lineChartZoom"),v[e]={};for(let r=0;r<this.trendChartsElem.length;r++){let n;r<2?n=d3.area().x((function(e,t){return m(t)})).y0((function(e){return f(i(e[r+1]))})).y1((function(e){return f(i(e[r]))})):2===r?n=d3.line().x((function(e,t){return m(t)})).y((function(e){return f(i(e[r]))})):r>2&&(n=d3.area().x((function(e,t){return m(t)})).y0((function(e){return f(i(e[r]))})).y1((function(e){return f(i(e[r-1]))}))),v[e][this.trendChartsElem[r]]=n,o.append("path").data([t]).attr("class",this.trendChartsElem[r]).attr("d",n)}}}}function T(e){activeScale=e}let L={},A=d3.scaleThreshold().domain([0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]).range(["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"]);const _=4;let S={},j={},M=["#7fc97f","#386cb0","#e7298a","#ff9900"];function z(e){return"M"+e.x+","+e.y+"V"+e.parent.y+"H"+e.parent.x}function D(){let e,t,r=d3.select("#dendrogram-panel").append("svg").attr("id","dendrogram-legend").attr("width",550).attr("height",60);$("#dendrogram-legend").hide();let n=A.range();e=r.selectAll("rect.legend").data(n),t=r.selectAll("text.legend-text").data(["low","","","","","","","","high"]),e.enter().append("rect").attr("class","legend").attr("width",50).attr("height",20).attr("y",0).attr("x",(function(e,t){return 50*t+"px"})).style("fill",(function(e){return e})),t.enter().append("text").attr("class","legend-text").attr("y",40).attr("x",(function(e,t){return 50*t+"px"})).text((function(e){return e}))}let E,O,H=!1,B=.5,I={},W=d3.scaleThreshold().domain([0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]).range(["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"]);function G(e){B=e}let N="application/vnd.api+json";var U;function R(){let e=[];$.ajax({url:"/api/percentile/"+parameters.id,dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:N},success:function(t){for(let r=0;r<t.length;r++)e[t[r].feature]=[t[r].min,t[r].p1,t[r].p2,t[r].p3,t[r].p5,t[r].p7,t[r].p8,t[r].p9,t[r].max];te(e),function(e){for(var t in e)if(e.hasOwnProperty(t)){let e=t.split("_").join(" ");e=e.charAt(0).toUpperCase()+e.slice(1),$("#absolute-feature-checkboxes").append('<tr><th> <div class="pretty p-switch p-fill p-bigger"><input type="checkbox" id="draw-'+t+'"/><div class="state"><label>'+e+'</label></div></div><div class="float-right draw-details" id="draw-'+t+'-details"><div class="pretty p-icon p-toggle p-plain"><input type="checkbox" id="draw-'+t+'-input" /><div class="state p-success-o p-on"><i class="mdi mdi-image-area"></i><label></label></div><div class="state p-off"><i class="mdi mdi-image-off"></i><label></label></div></div></div></th></tr>')}$(".draw-details").hide(),p()}(e)}})}function P(){$.ajax({url:"/api/dataset/networks/"+parameters.id,dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:N},success:function(e){!function(e){if(e.length)for(let t=0;t<e.length;t++)e[t].finished&&$("#networks-hierarchies-table tbody").append("<tr><td>"+e[t].name+'</td> <td> <button type="button" class="btn btn-default" data='+e[t].network_id+" name="+e[t].name+'><span class="mdi mdi-graphql" aria-hidden="true"></span></button></td> <td><div class="pretty p-switch p-fill"><input type="checkbox" class="hiearchy-checkbox" data="'+e[t].network_id+'" name="'+e[t].name+'"><div class="state p-success"><label></label></div></div></td><td>---</td>');else $("#networks-hierarchies-table").append("There is no network data for this dataset")}(e)}})}function V(e){$.ajax({url:"/api/dataset/"+parameters.id+"/"+e,dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:N},success:function(t){ae(t,e),c()}})}function Y(e){d(),$.ajax({url:"/api/dataset/"+parameters.id+"/"+e,dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:N},success:function(t){ne(t,e),c()}})}r(1);let F=[],X=[],J=[],Z={},q={},K={},Q={};function ee(e){F=F.concat(e)}function te(e){Z=e}function re(e){X=e,function(){let e=["#fff","#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628"];if(X.length)for(let t=0;t<X.length;t++)$("#metadata-table").find("tbody").append($('<tr id="metadata-row-'+X[t].animal_id+'">').append($("<td>").append(X[t].animal_id)).append($("<td>").append(X[t].species)).append($("<td>").append(X[t].sex)).append($("<td>").append(X[t].size)).append($("<td>").append(X[t].weight)).append($("<td>").append('<div class="dropdown">\n                                              <a class="dropdown-toggle btn btn-default btn-color" data-toggle="dropdown" href="#">\n                                              <div id="preview" class="metadata-swatch" style="background-color:#fff"></div>\n                                              <input class="color-field" value="White" style="display:none;">\n                                              </a>\n                                              <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel"> '+function(t){let r="";for(let n=0;n<e.length;n++)r+='<div class="metadata-swatch metadata-swatch-clickable" style="background-color:'+e[n]+'" value="'+t+'"></div>';return r}(X[t].animal_id)+"</ul></div>")));else $("#metadata-table").find("tbody").append("There is no metadata for this dataset")}()}function ne(e,t){for(let r=0;r<e.length;r++)void 0===J[r]&&J.push({}),e[r]&&!isNaN(e[r])?J[r][t]=+e[r]:J[r][t]=e[r]}function ae(e,t){for(let r=0;r<e.length;r++)void 0===F[r]&&F.push({}),F[r][t]=+e[r]}function ie(e){q=e}function oe(e,t){0===Object.keys(e).length&&e.constructor===Object?(delete K["h"+t],delete L["h"+t],function(e){delete S["h"+e]}(t)):(K["h"+t]=e,function(e,t){L["h"+e]=t}(t,2),function(e){for(let t in I)if(t==="h"+e)return void(S["h"+e]=I[t]);for(let t=0;t<M.length;t++){let r=!0;for(let e in S)S.hasOwnProperty(e)&&S[e]===M[t]&&(r=!1);if(r){if(0===Object.keys(I).length)return void(S["h"+e]=M[t]);for(let r in I)if(I[r]!==M[t])return void(S["h"+e]=M[t])}}}(t))}function se(e){Q=e}$(document).ready((function(){window.EventSource?((U=new EventSource("/api/movement_only/"+parameters.id)).onmessage=function(e){"close"===e.data?(U.close(),window.setTimeout((function e(){$.active>0?window.setTimeout(e,100):new y}),100)):ee(JSON.parse(e.data))},U.addEventListener("error",(function(e){e.readyState==EventSource.CLOSED&&alert("Streaming error")}),!1)):alert("Webbrowser does not support streaming"),R(),$.ajax({url:"/api/dataset/"+parameters.id+"/animal_ids",dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:N},success:function(e){se(e)}}),function(){const e=["swarm_time","swarm_speed","swarm_acceleration","swarm_convex_hull_area","swarm_distance_centroid","swarm_direction","swarm_polarisation"];for(let t=0;t<e.length;t++)$.ajax({url:"/api/dataset/"+parameters.id+"/"+e[t],dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:N},success:function(r){ne(r,e[t].replace("swarm_",""))}})}(),$.ajax({url:"/api/metadata/"+parameters.id,dataType:"json",type:"GET",contentType:"application/json; charset=utf-8",headers:{Accept:N},success:function(e){re(e)}}),P()}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vZXhwbG9yZS9leHBsb3JlLmNzcz9lNzJlIiwid2VicGFjazovLy8uL2V4cGxvcmUvZXhwbG9yZS5jc3MiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9saWIvdXJscy5qcyIsIndlYnBhY2s6Ly8vLi9leHBsb3JlL3NwYXRpYWxfdmlldy9pbnRlcmFjdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9leHBsb3JlL3NwYXRpYWxfdmlldy9jb2xvcl9waWNrZXIuanMiLCJ3ZWJwYWNrOi8vLy4vZXhwbG9yZS9tZXRhZGF0YS5qcyIsIndlYnBhY2s6Ly8vLi9leHBsb3JlL2xpc3RlbmVyLmpzIiwid2VicGFjazovLy8uL2V4cGxvcmUvaGVscGVycy5qcyIsIndlYnBhY2s6Ly8vLi9leHBsb3JlL3NwYXRpYWxfdmlldy9zcGF0aWFsX3ZpZXcuanMiLCJ3ZWJwYWNrOi8vLy4vZXhwbG9yZS9oaWVyYXJjaHkuanMiLCJ3ZWJwYWNrOi8vLy4vZXhwbG9yZS9hamF4X3F1ZXJpZXMuanMiLCJ3ZWJwYWNrOi8vLy4vZXhwbG9yZS9uZXR3b3JrLmpzIiwid2VicGFjazovLy8uL2V4cGxvcmUvbGluZV9jaGFydC5qcyIsIndlYnBhY2s6Ly8vLi9leHBsb3JlL2V4cGxvcmUuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJjb250ZW50Iiwib3B0aW9ucyIsInRyYW5zZm9ybSIsInVuZGVmaW5lZCIsImxvY2FscyIsIl9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyIsInB1c2giLCJ1c2VTb3VyY2VNYXAiLCJsaXN0IiwidG9TdHJpbmciLCJ0aGlzIiwibWFwIiwiaXRlbSIsImNzc01hcHBpbmciLCJidG9hIiwic291cmNlTWFwcGluZyIsInNvdXJjZU1hcCIsImJhc2U2NCIsInVuZXNjYXBlIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiSlNPTiIsInN0cmluZ2lmeSIsImRhdGEiLCJjb25jYXQiLCJzb3VyY2VVUkxzIiwic291cmNlcyIsInNvdXJjZSIsInNvdXJjZVJvb3QiLCJqb2luIiwiY3NzV2l0aE1hcHBpbmdUb1N0cmluZyIsIm1lZGlhUXVlcnkiLCJkZWR1cGUiLCJhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzIiwibGVuZ3RoIiwiaWQiLCJfaSIsImZuIiwibWVtbyIsInN0eWxlc0luRG9tIiwiaXNPbGRJRSIsIndpbmRvdyIsImRvY3VtZW50IiwiYWxsIiwiYXRvYiIsImFwcGx5IiwiYXJndW1lbnRzIiwiZ2V0VGFyZ2V0IiwidGFyZ2V0IiwicXVlcnlTZWxlY3RvciIsImdldEVsZW1lbnQiLCJzdHlsZVRhcmdldCIsIkhUTUxJRnJhbWVFbGVtZW50IiwiY29udGVudERvY3VtZW50IiwiaGVhZCIsImUiLCJzaW5nbGV0b24iLCJzaW5nbGV0b25Db3VudGVyIiwic3R5bGVzSW5zZXJ0ZWRBdFRvcCIsImZpeFVybHMiLCJhZGRTdHlsZXNUb0RvbSIsInN0eWxlcyIsImRvbVN0eWxlIiwicmVmcyIsImoiLCJwYXJ0cyIsImFkZFN0eWxlIiwibGlzdFRvU3R5bGVzIiwibmV3U3R5bGVzIiwiYmFzZSIsInBhcnQiLCJjc3MiLCJtZWRpYSIsImluc2VydFN0eWxlRWxlbWVudCIsInN0eWxlIiwiaW5zZXJ0SW50byIsIkVycm9yIiwibGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AiLCJpbnNlcnRBdCIsIm5leHRTaWJsaW5nIiwiaW5zZXJ0QmVmb3JlIiwiYXBwZW5kQ2hpbGQiLCJmaXJzdENoaWxkIiwiYmVmb3JlIiwicmVtb3ZlU3R5bGVFbGVtZW50IiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwiaWR4IiwiaW5kZXhPZiIsInNwbGljZSIsImNyZWF0ZVN0eWxlRWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJhdHRycyIsInR5cGUiLCJhZGRBdHRycyIsImVsIiwia2V5cyIsImZvckVhY2giLCJzZXRBdHRyaWJ1dGUiLCJvYmoiLCJ1cGRhdGUiLCJyZW1vdmUiLCJyZXN1bHQiLCJzdHlsZUluZGV4IiwiYXBwbHlUb1NpbmdsZXRvblRhZyIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsInJldm9rZU9iamVjdFVSTCIsIkJsb2IiLCJsaW5rIiwicmVsIiwiY3JlYXRlTGlua0VsZW1lbnQiLCJ1cGRhdGVMaW5rIiwiaHJlZiIsImFwcGx5VG9UYWciLCJuZXdPYmoiLCJERUJVRyIsIm5ld0xpc3QiLCJtYXlSZW1vdmUiLCJ0ZXh0U3RvcmUiLCJyZXBsYWNlVGV4dCIsImluZGV4IiwicmVwbGFjZW1lbnQiLCJmaWx0ZXIiLCJCb29sZWFuIiwic3R5bGVTaGVldCIsImNzc1RleHQiLCJjc3NOb2RlIiwiY3JlYXRlVGV4dE5vZGUiLCJjaGlsZE5vZGVzIiwiYXV0b0ZpeFVybHMiLCJjb252ZXJ0VG9BYnNvbHV0ZVVybHMiLCJibG9iIiwib2xkU3JjIiwibG9jYXRpb24iLCJiYXNlVXJsIiwicHJvdG9jb2wiLCJob3N0IiwiY3VycmVudERpciIsInBhdGhuYW1lIiwicmVwbGFjZSIsImZ1bGxNYXRjaCIsIm9yaWdVcmwiLCJuZXdVcmwiLCJ1bnF1b3RlZE9yaWdVcmwiLCJ0cmltIiwiJDEiLCJ0ZXN0Iiwic2xpZGVyIiwidG9vbHRpcCIsImNvbG9yYnJld2VyIiwiQnVZbEJ1IiwibWV0YWRhdGFDb2xvciIsInBsYXlCb29sZWFuIiwic2V0UGxheUJvb2xlYW4iLCJkaXNhYmxlUGxheUJ1dHRvbiIsIiQiLCJyZW1vdmVDbGFzcyIsInByb3AiLCJoaWRlIiwic2hvdyIsImVuYWJsZVBsYXlCdXR0b24iLCJhZGRDbGFzcyIsInBlcmNlbnRpbGVzTGluZUNoYXJ0IiwiYXJyIiwic29ydCIsImEiLCJiIiwibG93ZXIiLCJNYXRoIiwiZmxvb3IiLCJ1cHBlciIsIndlaWdodCIsImluaXRUcmVuZENoYXJ0TGlzdGVuZXIiLCJjbGljayIsImZpbmQiLCJzd2FybURhdGEiLCJkaXNhYmxlTGluZUNoYXJ0IiwiYXR0ciIsIlN0cmluZyIsImhhc2hDb2RlIiwiaGFzaCIsImNoYXJDb2RlQXQiLCJkMyIsInNlbGVjdGlvbiIsIm1vdmVUb0JhY2siLCJlYWNoIiwiem9vbUdyb3VwIiwiem9vbUZ1bmN0aW9uIiwidHJlbmRDaGFydHNab29tIiwicmF0aW8iLCJpbmRleFRpbWUiLCJzdmdDb250YWluZXIiLCJzZWxlY3QiLCJ6b29tIiwic2NhbGVFeHRlbnQiLCJvbiIsImV2ZW50IiwieCIsIm1pbiIsInRhbmtXaWR0aCIsImsiLCJtYXgiLCJ5IiwidGFua0hlaWdodCIsImdYYXhpcyIsInhBeGlzIiwic2NhbGUiLCJyZXNjYWxlWCIsImdZYXhpcyIsInlBeGlzIiwicmVzY2FsZVkiLCJhcHBlbmQiLCJ0YW5rIiwicGFyYW1ldGVycyIsImludmVydGVkX3giLCJpbnZlcnRlZF95IiwiYWN0aXZlU2NhbGUiLCJjb2xvclNjYWxlIiwiY29sb3IiLCJsZWdlbmRXaWR0aCIsImxlZ2VuZEhlaWdodCIsInN2Z0xlZ2VuZCIsIm1lZG9pZEFuaW1hbCIsImFjdGl2ZUFuaW1hbHMiLCJhcnJheUFuaW1hbHMiLCJkYXRhc2V0IiwiaGllcmFyY2h5TGV2ZWxzIiwiaGllcmFyY2h5R3JvdXBTdGRldiIsImJydXNoIiwiZXh0ZW50Iiwic3ZnTGVnZW5kX25ldHciLCJkZW5kcm96b29tIiwibmV0d29ya0NvbG9yIiwiY2VpbCIsInRtcCIsInRleHQiLCJzY2FsZUxpbmVhciIsImRvbWFpbiIsInJhbmdlIiwic2NhbGVUaHJlc2hvbGQiLCJzZWxlY3RBbGwiLCJlbnRyaWVzIiwiZW50ZXIiLCJjaGFuZ2VsZWdlbmQiLCJoYXNDbGFzcyIsImRlY0luZGV4VGltZSIsImRyYXciLCJsZWdlbmQiLCJsZWdlbmRUZXh0IiwidG1wU2NhbGUiLCJyZXR1cm5Db2xvclNjYWxlIiwiZXhpdCIsInRpbWVUb1dhaXQiLCJ2YWwiLCJhbmltYWxTY2FsZSIsInNldFRpbWVvdXQiLCJkcmF3RGVuZHJvZ3JhbSIsIm5ldHdvcmtWaXMiLCJzdmdBbmltYWxzIiwibmV0d29ya0RhdGEiLCJuZXR3b3JrIiwiYW5pbWFsMSIsImFuaW1hbDIiLCJuZXR3b3JrQ29sb3JTY2FsZSIsIm5ldHdvcmtBdXRvIiwidG1wQXJyYXkiLCJzZXROZXR3b3JMaW1pdCIsInBlcmNlbnRpbGVzIiwibmV0d29ya0xpbWl0IiwidHJpYW5ndWxhdGlvbiIsInZvcm9ub2kiLCJpcyIsInNwbGl0IiwiYW5pbWFsR3JvdXBpbmdzIiwiZGF0YXNldE1ldGFkYXRhIiwicGFnZVgiLCJwYWdlWSIsImh0bWwiLCJ0b29sdGlwRnVuY3Rpb24iLCJ0cmFuc2l0aW9uIiwiZHVyYXRpb24iLCJpbmNsdWRlcyIsImh1bGxQYXRoIiwiaXNFbXB0eU9iamVjdCIsImNlbnRyb2lkIiwiY2xhc3NlZCIsInVwZGF0ZUxpbmVDaGFydCIsInN2ZyIsImluaXREZW5kcm9ncmFtTGVnZW5kIiwidHJlZSIsInNpemUiLCJ0b29sdGlwRGl2Iiwic3BhdGlhbFZpZXciLCJzdGVwIiwic2xpZGUiLCJ1aSIsInNldEhpZXJhcmNoeUxldmVsIiwidXBkYXRlRGVuZHJvZ3JhbSIsIm1heE51bWJlckhpZXJhcmNoaWVzIiwic2V0QWN0aXZlQW5pbWFscyIsInJvb3QiLCJoaWVyYXJjaHkiLCJsZXZlbCIsInRtcF9ub2RlcyIsIm5vZGUiLCJoaWVyYXJjaHlDb2xvcnMiLCJjb2xvcnMiLCJ0bXBfYm9vbGVhbiIsImhpZXJhcmNoaWVzIiwiY2x1c3RlciIsInZlcnRpY2VzIiwiZ3JvdXBNZW1iZXIiLCJwb2x5Z29uSHVsbCIsImhpZXJhcmNoeUlkcyIsIm5ldHdvcmtIaWVyYXJjaHkiLCJoaWVyYXJjaHlWZXJ0aWNlcyIsInRyZWVEYXRhIiwibm9kZXMiLCJjaGlsZHJlbiIsIm1hcmdpbiIsIndpZHRoIiwiaGVpZ2h0IiwidHJlZW1hcCIsInNob3dOZXR3b3JrSGllcmFyY2h5IiwibmV0d29ya0hpZXJhcmNoeUlkcyIsImdldEhpZXJhcmNoeUxldmVsIiwiZ2V0SGllcmFyY2h5VmVydGljZXMiLCJoaWVyYXJ5SHVsbHMiLCJjb2xsYXBzZSIsImRlcHRoIiwiX2NoaWxkcmVuIiwiZGVzY2VuZGFudHMiLCJzbGljZSIsImRpYWdvbmFsTGluZXMiLCJub2RlRW50ZXIiLCJhZGRIaWdobGlnaHRTcGF0aWFsVmlldyIsInJlbW92ZUhpZ2hsaWdodFNwYXRpYWxWaWV3IiwiY29uc29sZSIsImxvZyIsInN0YW5kYXJkRGV2aWF0aW9uQ29sb3JTY2FsZSIsInN0YW5kYXJkRGV2aWF0aW9uIiwiZHJhd0hpZXJhcmNoeSIsImxlZ2VuZERhdGEiLCJsZWdlbmRUZXh0RGF0YSIsIm5ldHdvcmtfaWQiLCJjaGFuZ2VIaWVyYXJjaHlMZWdlbmQiLCJzdXBlciIsInNwYXRpYWxWaWV3SW5pdCIsInNldEluZGV4VGltZSIsInJlY3QiLCJhbmltYWwiLCJwb2ludCIsInJlc2V0VHJhY2tlZERhdGEiLCJzZXRUcmFja2luZ0Jvb2xlYW4iLCJzZW5kVHJhY2tlZERhdGEiLCJjaGFuZ2UiLCJjaGVja2VkIiwic2V0TmV0d29ya0JhY2tncm91bmQiLCJpc051bWVyaWMiLCJzZXROZXR3b3JrQmFja2dyb3VuZExpbWl0IiwiZ2V0RGF0YXNldEZlYXR1cmUiLCJnZXRTd2FybURhdGFzZXRGZWF0dXJlIiwic2V0TWVkb2lkQW5pbWFsIiwic2V0QWN0aXZlU2NhbGUiLCJjb2xvclJHQiIsInJlc2V0SW5kaXZpZHVhbE1ldGFkYXRhIiwibW9kYWwiLCJ0b0xvd2VyQ2FzZSIsIkFycmF5IiwiZnJvbSIsIlNldCIsImJsQXZnIiwicXVhbnRpbGUiLCJhYkF2ZyIsImNvbG9yTWV0YWRhdGEiLCJidG4iLCJvbGRWYWx1ZSIsImNsb3Nlc3QiLCJuZXdWYWwiLCJwYXJzZUZsb2F0Iiwicm91bmQiLCJjbGlja2VkQnV0dG9uSUQiLCJidXR0b24iLCJjaGVja2JveCIsImFqYXgiLCJ1cmwiLCJkYXRhVHlwZSIsImNvbnRlbnRUeXBlIiwiaGVhZGVycyIsIkpTT05BUElfTUlNRVRZUEUiLCJzdWNjZXNzIiwic2V0SGllcmFyY2h5RGF0YSIsInBhcnNlIiwiYWRkSGllcmFyY2h5QnV0dG9uIiwiaW5pdFNob3dEZW5kcm9ncmFtTGlzdGVuZXIiLCJ0bXBBY3RpdmUiLCJuZXh0IiwicmVtb3ZlSGllcmFyY2h5QnV0dG9uIiwic2V0TmV0d29ya0hpZXJhcmNoeSIsInNldE5ldHdvcmtEYXRhIiwibmV0d29ya0lEIiwiZ2V0TmV0d29ya0RhdGEiLCJzZXRuZXR3b3JrQ29sb3IiLCJzZXROZXR3b3JrSUQiLCJzZXROZXR3b3JrQXV0byIsImxpbWl0IiwibWluUG9pbnQiLCJtYXhQb2ludCIsImF4aXNCb3R0b20iLCJ0aWNrcyIsInRpY2tTaXplIiwidGlja1BhZGRpbmciLCJheGlzUmlnaHQiLCJwZXJjZW50YWdlIiwiYmFja2dyb3VuZF9pbWFnZSIsInNwYWNlIiwiYXBwZW5kVG8iLCJpbml0U2xpZGVycyIsImluaXRDb2xvclBpY2tlciIsIkxpbmVDaGFydCIsImNwX2xpc3RlbmVyIiwic2ZfbGlzdGVuZXJzIiwiYWZfbGlzdGVuZXJzIiwibWRfbGlzdGVuZXJzIiwibl9saXN0ZW5lcnMiLCJoX2xpc3RlbmVycyIsImluaXREZW5kcm9ncmFtIiwiZHJhZ2dhYmxlIiwiY29udGFpbm1lbnQiLCJyZXNpemFibGUiLCJhc3BlY3RSYXRpbyIsIm1heFdpZHRoIiwiQ2hhcnQiLCJzd2FybV9mZWF0dXJlcyIsImxpbmVDaGFydFdpZHRoIiwidHJlbmRDaGFydHNFbGVtIiwibGluZUNoYXJ0IiwibGluZUNoYXJ0RGF0YSIsImZpbGwiLCJ0bXBfb2JqZWN0IiwieDIiLCJ0aWNrRm9ybWF0IiwiYXhpc0xlZnQiLCJkcmFnZ2VkIiwiY29vcmRzIiwibW91c2UiLCJ0cmFuc2xhdGVFeHRlbnQiLCJsaW5lcyIsInN3YXJtTGluZUNoYXJ0IiwibGluZV9jb2xvcnMiLCJzY2FsZU9yZGluYWwiLCJzY2hlbWVDYXRlZ29yeTEwIiwibm9ybWFsaXphdGlvblNjYWxlIiwibGluZSIsImRyYWciLCJjaGFydExpbmVzIiwiX2dyb3VwcyIsInN0cm9rZSIsImF0dHJpYnV0ZXMiLCJnZXRDb21wdXRlZFRleHRMZW5ndGgiLCJpbml0TGluZUNoYXJ0QnV0dG9ucyIsImNhcGl0YWxpemVkX2ZlYXR1cmVfc3RyaW5nIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJlbGVtIiwidHJlbmRjaGFydCIsImZlYXR1cmUiLCJ0cmVuZENoYXJ0RGF0YSIsIm51bV9hbmltYWxzIiwiYW5pbWFsSWRzIiwidG1wVHJlbmRDaGFydERhdGEiLCJ0cmVuZENoYXJ0IiwidGVtcCIsImFyZWEiLCJ5MCIsInkxIiwicGFyZW50IiwiZGVuZHJvZ3JhbUxlZ2VuZCIsImdldFBlcmNlbnRpbGUiLCJkYXRhU2V0UGVyY2VudGlsZSIsInNldERhdGFTZXRQZXJjZW50aWxlIiwiYWRkQWJzb2x1dGVGZWF0dXJlQnV0dG9ucyIsImdldE5ldHdvcmtEYXRhQnV0dG9uIiwiYWRkTmV0d29ya0J1dHRvbnMiLCJzZXREYXRhc2V0RmVhdHVyZSIsInNldFN3YXJtRGF0YSIsImFkZFRvRGF0YXNldCIsInNldE1ldGFEYXRhIiwicmVzdWx0U3RyaW5nIiwiaW5pdGlhbGl6ZU1ldGFkZGF0YSIsImlzTmFOIiwiY29uc3RydWN0b3IiLCJyZW1vdmVIaWVyYXJjaHlDb2xvciIsInNldEhpZXJhcmNoeUNvbG9yIiwic2V0QW5pbWFsSWRzIiwicmVhZHkiLCJFdmVudFNvdXJjZSIsIm9ubWVzc2FnZSIsImNsb3NlIiwiY2hlY2tQZW5kaW5nUmVxdWVzdCIsImFjdGl2ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZWFkeVN0YXRlIiwiQ0xPU0VEIiwiYWxlcnQiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElBQVVGLEVBQVFyQixFQUFvQnFCLElBQy9CLEVBQVBFLEVBQVUsT0FBT0YsRUFDcEIsR0FBVyxFQUFQRSxHQUE4QixpQkFBVkYsR0FBc0JBLEdBQVNBLEVBQU1HLFdBQVksT0FBT0gsRUFDaEYsSUFBSUksRUFBS1gsT0FBT1ksT0FBTyxNQUd2QixHQUZBMUIsRUFBb0Jr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QUFVLE9BQ1Z0UyxLQUFNLE1BQ051UyxZQUFhLGtDQUNiQyxRQUFTLENBQ0wsT0FBVUMsR0FFZEMsUUFBUyxTQUFTaFgsR0FDZHdkLEdBQWF4ZCxNQWxLbEIsV0FDSCxNQUFNMlosRUFBaUIsQ0FBQyxhQUFjLGNBQWUscUJBQXNCLHlCQUN2RSwwQkFBMkIsa0JBQW1CLHNCQUlsRCxJQUFLLElBQUlqZCxFQUFJLEVBQUdBLEVBQUlpZCxFQUFlaFosT0FBUWpFLElBQ3ZDMkwsRUFBRXFPLEtBQUssQ0FDSEMsSUFBSyxnQkFBa0I1SyxXQUFlLEdBQUksSUFBTTROLEVBQWVqZCxHQUMvRGthLFNBQVUsT0FDVnRTLEtBQU0sTUFDTnVTLFlBQWEsa0NBQ2JDLFFBQVMsQ0FDTCxPQUFVQyxHQUVkQyxRQUFTLFNBQVNoWCxHQUdkK2MsR0FBYS9jLEVBRkMyWixFQUFlamQsR0FBRzJLLFFBQVEsU0FBVSxRR3JFOUQsR0hpRkFnQixFQUFFcU8sS0FBSyxDQUNIQyxJQUFLLGlCQUFtQjVLLFdBQWUsR0FDdkM2SyxTQUFVLE9BQ1Z0UyxLQUFNLE1BQ051UyxZQUFhLGtDQUNiQyxRQUFTLENBQ0wsT0FBVUMsR0FFZEMsUUFBUyxTQUFTaFgsR0FDZGlkLEdBQVlqZCxNR3BGcEIiLCJmaWxlIjoiZXhwbG9yZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA2KTtcbiIsIlxudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL2V4cGxvcmUuY3NzXCIpO1xuXG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblxudmFyIHRyYW5zZm9ybTtcbnZhciBpbnNlcnRJbnRvO1xuXG5cblxudmFyIG9wdGlvbnMgPSB7XCJobXJcIjp0cnVlfVxuXG5vcHRpb25zLnRyYW5zZm9ybSA9IHRyYW5zZm9ybVxub3B0aW9ucy5pbnNlcnRJbnRvID0gdW5kZWZpbmVkO1xuXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXMuanNcIikoY29udGVudCwgb3B0aW9ucyk7XG5cbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuXG5pZihtb2R1bGUuaG90KSB7XG5cdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL2V4cGxvcmUuY3NzXCIsIGZ1bmN0aW9uKCkge1xuXHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9leHBsb3JlLmNzc1wiKTtcblxuXHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXG5cdFx0dmFyIGxvY2FscyA9IChmdW5jdGlvbihhLCBiKSB7XG5cdFx0XHR2YXIga2V5LCBpZHggPSAwO1xuXG5cdFx0XHRmb3Ioa2V5IGluIGEpIHtcblx0XHRcdFx0aWYoIWIgfHwgYVtrZXldICE9PSBiW2tleV0pIHJldHVybiBmYWxzZTtcblx0XHRcdFx0aWR4Kys7XG5cdFx0XHR9XG5cblx0XHRcdGZvcihrZXkgaW4gYikgaWR4LS07XG5cblx0XHRcdHJldHVybiBpZHggPT09IDA7XG5cdFx0fShjb250ZW50LmxvY2FscywgbmV3Q29udGVudC5sb2NhbHMpKTtcblxuXHRcdGlmKCFsb2NhbHMpIHRocm93IG5ldyBFcnJvcignQWJvcnRpbmcgQ1NTIEhNUiBkdWUgdG8gY2hhbmdlZCBjc3MtbW9kdWxlcyBsb2NhbHMuJyk7XG5cblx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdH0pO1xuXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufSIsIi8vIEltcG9ydHNcbnZhciBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gPSByZXF1aXJlKFwiLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiKTtcbmV4cG9ydHMgPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oZmFsc2UpO1xuLy8gTW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIvKiBJY29ucyBmb3IgYm9vdHN0cmFwIDQgKi9cXHJcXG5cXHJcXG4ubWRpOjpiZWZvcmUge1xcclxcbiAgICBmb250LXNpemU6IDI0cHg7XFxyXFxuICAgIGxpbmUtaGVpZ2h0OiAxNHB4O1xcclxcbn1cXHJcXG5cXHJcXG4uYnRuIC5tZGk6OmJlZm9yZSB7XFxyXFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXHJcXG4gICAgdG9wOiA0cHg7XFxyXFxufVxcclxcblxcclxcbi5idG4teHMgLm1kaTo6YmVmb3JlIHtcXHJcXG4gICAgZm9udC1zaXplOiAxOHB4O1xcclxcbiAgICB0b3A6IDNweDtcXHJcXG59XFxyXFxuXFxyXFxuLmJ0bi1zbSAubWRpOjpiZWZvcmUge1xcclxcbiAgICBmb250LXNpemU6IDE4cHg7XFxyXFxuICAgIHRvcDogM3B4O1xcclxcbn1cXHJcXG5cXHJcXG4uZHJvcGRvd24tbWVudSAubWRpIHtcXHJcXG4gICAgd2lkdGg6IDE4cHg7XFxyXFxufVxcclxcblxcclxcbi5kcm9wZG93bi1tZW51IC5tZGk6OmJlZm9yZSB7XFxyXFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXHJcXG4gICAgdG9wOiA0cHg7XFxyXFxuICAgIGxlZnQ6IC04cHg7XFxyXFxufVxcclxcblxcclxcbi5uYXYgLm1kaTo6YmVmb3JlIHtcXHJcXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xcclxcbiAgICB0b3A6IDRweDtcXHJcXG59XFxyXFxuXFxyXFxuLm5hdmJhciAubmF2YmFyLXRvZ2dsZSAubWRpOjpiZWZvcmUge1xcclxcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XFxyXFxuICAgIHRvcDogNHB4O1xcclxcbiAgICBjb2xvcjogI0ZGRjtcXHJcXG59XFxyXFxuXFxyXFxuLmJyZWFkY3J1bWIgLm1kaTo6YmVmb3JlIHtcXHJcXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xcclxcbiAgICB0b3A6IDRweDtcXHJcXG59XFxyXFxuXFxyXFxuLmJyZWFkY3J1bWIgYTpob3ZlciB7XFxyXFxuICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcXHJcXG59XFxyXFxuXFxyXFxuLmJyZWFkY3J1bWIgYTpob3ZlciBzcGFuIHtcXHJcXG4gICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XFxyXFxufVxcclxcblxcclxcbi5hbGVydCAubWRpOjpiZWZvcmUge1xcclxcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XFxyXFxuICAgIHRvcDogNHB4O1xcclxcbiAgICBtYXJnaW4tcmlnaHQ6IDJweDtcXHJcXG59XFxyXFxuXFxyXFxuLmlucHV0LWdyb3VwLWFkZG9uIC5tZGk6OmJlZm9yZSB7XFxyXFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXHJcXG4gICAgdG9wOiAzcHg7XFxyXFxufVxcclxcblxcclxcbi5uYXZiYXItYnJhbmQgLm1kaTo6YmVmb3JlIHtcXHJcXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xcclxcbiAgICB0b3A6IDJweDtcXHJcXG4gICAgbWFyZ2luLXJpZ2h0OiAycHg7XFxyXFxufVxcclxcblxcclxcbi5saXN0LWdyb3VwLWl0ZW0gLm1kaTo6YmVmb3JlIHtcXHJcXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xcclxcbiAgICB0b3A6IDNweDtcXHJcXG4gICAgbGVmdDogLTNweFxcclxcbn1cXHJcXG5cXHJcXG4vKiBTVkcgZWxlbWVudHMgYW5kIHRleHQgKi9cXHJcXG5cXHJcXG4jbWFpbi12aXMge1xcclxcbiAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xcclxcbn1cXHJcXG5cXHJcXG4uc3ZnLWNvbnRhaW5lciB7XFxyXFxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXHJcXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xcclxcbiAgICB3aWR0aDogMTAwJTtcXHJcXG4gICAgLyogYXNwZWN0IHJhdGlvICovXFxyXFxuICAgIHZlcnRpY2FsLWFsaWduOiB0b3A7XFxyXFxuICAgIG92ZXJmbG93OiB2aXNpYmxlO1xcclxcbn1cXHJcXG5cXHJcXG4uc3ZnLWNvbnRlbnQge1xcclxcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxyXFxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXHJcXG4gICAgYm9yZGVyOiAxcHggc29saWQgIzAwMDtcXHJcXG59XFxyXFxuXFxyXFxuI21haW4tdmlzLWxlZ2VuZC1kaXYge1xcclxcbiAgICBkaXNwbGF5OiBub25lO1xcclxcbn1cXHJcXG5cXHJcXG4jaGllcmFyY2h5LWxlZ2VuZC1kaXYge1xcclxcbiAgICBkaXNwbGF5OiBub25lO1xcclxcbn1cXHJcXG5cXHJcXG4jbWFpbi12aXMtbGVnZW5kIHtcXHJcXG4gICAgZmxvYXQ6IHJpZ2h0O1xcclxcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxyXFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXHJcXG4gICAgb3ZlcmZsb3c6IHZpc2libGU7XFxyXFxuICAgIHRvcDogMTBweDtcXHJcXG4gICAgbGVmdDogMTBweDtcXHJcXG59XFxyXFxuXFxyXFxuI2hpZXJhcmNoeS1sZWdlbmQge1xcclxcbiAgICBmbG9hdDogbGVmdDtcXHJcXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcclxcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XFxyXFxuICAgIG92ZXJmbG93OiB2aXNpYmxlO1xcclxcbiAgICB0b3A6IDEwcHg7XFxyXFxuICAgIGxlZnQ6IDEwcHg7XFxyXFxufVxcclxcblxcclxcbi5zdmctY29udGVudC1kZW5kcm9ncmFtIHtcXHJcXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcclxcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjMDAwO1xcclxcbn1cXHJcXG5cXHJcXG4uc3ZnLWxpbmUtY2hhcnQtY29udGFpbmVyIHtcXHJcXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcclxcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XFxyXFxuICAgIHdpZHRoOiAxMDAlO1xcclxcbiAgICBoZWlnaHQ6IGF1dG87XFxyXFxuICAgIC8qIGRlcGVuZHMgb24gc3ZnIHJhdGlvICovXFxyXFxuICAgIHBhZGRpbmctYm90dG9tOiAxNyU7XFxyXFxuICAgIC8qIGFzcGVjdCByYXRpbyAqL1xcclxcbiAgICB2ZXJ0aWNhbC1hbGlnbjogdG9wO1xcclxcbiAgICBvdmVyZmxvdzogdmlzaWJsZTtcXHJcXG59XFxyXFxuXFxyXFxuLnN2Zy1kZW5kcm9ncmFtLWNvbnRhaW5lciB7XFxyXFxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXHJcXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xcclxcbiAgICBoZWlnaHQ6IGF1dG87XFxyXFxuICAgIHZlcnRpY2FsLWFsaWduOiB0b3A7XFxyXFxuICAgIG92ZXJmbG93OiB2aXNpYmxlO1xcclxcbn1cXHJcXG5cXHJcXG4uYXhpcyBwYXRoIHtcXHJcXG4gICAgZGlzcGxheTogbm9uZTtcXHJcXG59XFxyXFxuXFxyXFxuLmF4aXMgbGluZSB7XFxyXFxuICAgIHN0cm9rZS1vcGFjaXR5OiAwLjM7XFxyXFxuICAgIHNoYXBlLXJlbmRlcmluZzogY3Jpc3BFZGdlcztcXHJcXG59XFxyXFxuXFxyXFxuLngge1xcclxcbiAgICBmb250LXNpemU6IDFlbTtcXHJcXG59XFxyXFxuXFxyXFxuLnkge1xcclxcbiAgICBmb250LXNpemU6IDFlbTtcXHJcXG59XFxyXFxuXFxyXFxuLmF4aXMtbGluZS1jaGFydCBwYXRoIGxpbmUge1xcclxcbiAgICBmaWxsOiBub25lO1xcclxcbiAgICBzdHJva2U6ICMwMDA7XFxyXFxuICAgIHNoYXBlLXJlbmRlcmluZzogY3Jpc3BFZGdlcztcXHJcXG59XFxyXFxuXFxyXFxuLmxpbmUge1xcclxcbiAgICBmaWxsOiBub25lO1xcclxcbiAgICBzdHJva2Utd2lkdGg6IDVweDtcXHJcXG59XFxyXFxuXFxyXFxuLyogVGltZSAgKi9cXHJcXG5cXHJcXG4uZnJhbWUtdGV4dCB7XFxyXFxuICAgIG1hcmdpbi10b3A6IDA7XFxyXFxuICAgIG1hcmdpbi1ib3R0b206IDA7XFxyXFxuICAgIGZvbnQtc2l6ZTogMmVtO1xcclxcbiAgICBjb2xvcjogaW5oZXJpdDtcXHJcXG4gICAgZm9udC13ZWlnaHQ6IDUwMDtcXHJcXG4gICAgbGluZS1oZWlnaHQ6IDEuMTtcXHJcXG59XFxyXFxuXFxyXFxuLyogU2xpZGVyIHRpY2tzICAqL1xcclxcblxcclxcbi51aS1zbGlkZXItdGljayB7XFxyXFxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXHJcXG4gICAgd2lkdGg6IDNweDtcXHJcXG4gICAgYmFja2dyb3VuZDogIzMzN2FiNztcXHJcXG4gICAgaGVpZ2h0OiAwLjhlbTtcXHJcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcclxcbn1cXHJcXG5cXHJcXG4vKiBMYW9kaW5nIGdpZiAgICovXFxyXFxuXFxyXFxuI2xvYWRpbmcge1xcclxcbiAgICBkaXNwbGF5OiBibG9jaztcXHJcXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xcclxcbn1cXHJcXG5cXHJcXG4vKiBDb2xvciBsZWdlbmQgICAgKi9cXHJcXG5cXHJcXG4ubGVnZW5kIHtcXHJcXG4gICAgZm9udC1zaXplOiAxMnB4O1xcclxcbiAgICBzdHJva2U6ICMwMDA7XFxyXFxufVxcclxcblxcclxcbi5sZWdlbmQtdGV4dCB7XFxyXFxuICAgIGZvbnQtc2l6ZTogMS4yZW07XFxyXFxuICAgIGNvbG9yOiBpbmhlcml0O1xcclxcbiAgICBsaW5lLWhlaWdodDogMS4xO1xcclxcbn1cXHJcXG5cXHJcXG4ubGluZS1jaGFydC1sZWdlbmQtdGV4dCB7XFxyXFxuICAgIGZvbnQtc2l6ZTogMmVtO1xcclxcbiAgICBjb2xvcjogaW5oZXJpdDtcXHJcXG4gICAgbGluZS1oZWlnaHQ6IDEuMTtcXHJcXG59XFxyXFxuXFxyXFxuLnRpbWUtbGluZSB7XFxyXFxuICAgIGZpbGw6IG5vbmU7XFxyXFxuICAgIHN0cm9rZS13aWR0aDogNXB4O1xcclxcbiAgICBzdHJva2U6ICMwMDA7XFxyXFxufVxcclxcblxcclxcbi8qc3dhcm0gZmVhdHVyZXMgKi9cXHJcXG5cXHJcXG4uY2VudHJvaWQge1xcclxcbiAgICBmaWxsLW9wYWNpdHk6IDA7XFxyXFxuICAgIHN0cm9rZTogI2U3Mjk4YTtcXHJcXG4gICAgc3Ryb2tlLXdpZHRoOiAzcHg7XFxyXFxufVxcclxcblxcclxcbi5tZWRvaWQge1xcclxcbiAgICBmaWxsOiAjZTcyOThhICFpbXBvcnRhbnQ7XFxyXFxuICAgIHN0cm9rZTogI2U3Mjk4YSAhaW1wb3J0YW50O1xcclxcbn1cXHJcXG5cXHJcXG4uaHVsbC1wYXRoIHtcXHJcXG4gICAgZmlsbDogI2ZmZjtcXHJcXG4gICAgZmlsbC1vcGFjaXR5OiAwO1xcclxcbiAgICBzdHJva2Utd2lkdGg6IDM7XFxyXFxuICAgIHN0cm9rZTogIzI1MjUyNTtcXHJcXG4gICAgc3Ryb2tlLW9wYWNpdHk6IDAuNTtcXHJcXG59XFxyXFxuXFxyXFxuLmhpZXJhcmNoeS1ncm91cCB7XFxyXFxuICAgIHN0cm9rZS13aWR0aDogMTA7XFxyXFxuICAgIHN0cm9rZS1saW5lam9pbjogcm91bmQ7XFxyXFxuICAgIG9wYWNpdHk6IDAuMjtcXHJcXG59XFxyXFxuXFxyXFxuLmRlbGF1bmF5LXRyaWFuZ3VsYXRpb24ge1xcclxcbiAgICBmaWxsLW9wYWNpdHk6IDA7XFxyXFxuICAgIHN0cm9rZS13aWR0aDogMjtcXHJcXG4gICAgc3Ryb2tlOiAjMDAwO1xcclxcbiAgICBzdHJva2Utb3BhY2l0eTogMC40O1xcclxcbn1cXHJcXG5cXHJcXG4vKiBDb2xvciBicmV3ZXIgcGlja2VyIGRpdiAqL1xcclxcblxcclxcbi5wYWxldHRlIHtcXHJcXG4gICAgY3Vyc29yOiBwb2ludGVyO1xcclxcbiAgICBkaXNwbGF5OiB0YWJsZTtcXHJcXG4gICAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcXHJcXG4gICAgbWFyZ2luOiA0cHggMCA0cHggNHB4O1xcclxcbiAgICBiYWNrZ3JvdW5kOiAjZmZmO1xcclxcbiAgICBib3JkZXI6IHNvbGlkIDFweCAjYWFhO1xcclxcbn1cXHJcXG5cXHJcXG4uc3dhdGNoIHtcXHJcXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcclxcbiAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xcclxcbiAgICB3aWR0aDogMjJweDtcXHJcXG4gICAgaGVpZ2h0OiAyMnB4O1xcclxcbn1cXHJcXG5cXHJcXG4udm9yb25vaSB7XFxyXFxuICAgIGZpbGwtb3BhY2l0eTogMDtcXHJcXG4gICAgc3Ryb2tlLXdpZHRoOiAzO1xcclxcbiAgICBzdHJva2U6ICMwMDA7XFxyXFxuICAgIHN0cm9rZS1vcGFjaXR5OiAwLjI7XFxyXFxufVxcclxcblxcclxcbi8qIFRvb2x0aXAgKi9cXHJcXG5cXHJcXG5kaXYudG9vbHRpcCB7XFxyXFxuICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xcclxcbiAgICBvcGFjaXR5OiAwO1xcclxcbiAgICBiYWNrZ3JvdW5kOiByZ2IoMjU1LCAyNTUsIDI1NSkgIWltcG9ydGFudDtcXHJcXG4gICAgYm9yZGVyLWxlZnQtY29sb3I6ICMxYjgwOWUgIWltcG9ydGFudDtcXHJcXG4gICAgYm9yZGVyOiAxcHggc29saWQgI2VlZTtcXHJcXG4gICAgYm9yZGVyLWxlZnQtd2lkdGg6IDVweDtcXHJcXG4gICAgYm9yZGVyLXJhZGl1czogM3B4O1xcclxcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxyXFxufVxcclxcblxcclxcbmRpdi50b29sdGlwIHRhYmxlIHRkOm50aC1jaGlsZCgyKSB7XFxyXFxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcXHJcXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XFxyXFxufVxcclxcblxcclxcbi50b29sdGlwLXNwYW4ge1xcclxcbiAgICBkaXNwbGF5OiBibG9jaztcXHJcXG4gICAgd2lkdGg6IDE1MHB4O1xcclxcbiAgICB3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7XFxyXFxuICAgIGZvbnQtc2l6ZTogMS41ZW07XFxyXFxufVxcclxcblxcclxcbi51cHBlci1vdXRlci1hcmVhLCAubG93ZXItb3V0ZXItYXJlYSB7XFxyXFxuICAgIHN0cm9rZS13aWR0aDogMTtcXHJcXG4gICAgZmlsbDogIzc0YTljZjtcXHJcXG4gICAgc3Ryb2tlOiAjMzY5MGMwO1xcclxcbn1cXHJcXG5cXHJcXG4udXBwZXItaW5uZXItYXJlYSwgLmxvd2VyLWlubmVyLWFyZWEge1xcclxcbiAgICBzdHJva2Utd2lkdGg6IDE7XFxyXFxuICAgIGZpbGw6ICMwNDVhOGQ7XFxyXFxuICAgIHN0cm9rZTogIzAyMzg1ODtcXHJcXG59XFxyXFxuXFxyXFxuLm1lZGlhbi1saW5lIHtcXHJcXG4gICAgZmlsbDogbm9uZTtcXHJcXG4gICAgc3Ryb2tlOiAjNTI1MjUyO1xcclxcbiAgICBzdHJva2Utd2lkdGg6IDU7XFxyXFxufVxcclxcblxcclxcbi5zZWxlY3RlZCB7XFxyXFxuICAgIGJhY2tncm91bmQ6ICM5OTk7XFxyXFxuICAgIGJvcmRlcjogNHB4IHNvbGlkICM0ZDRkNGQ7XFxyXFxuICAgIC1tb3otYm9yZGVyLXJhZGl1czogNXB4O1xcclxcbiAgICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDVweDtcXHJcXG4gICAgYm94LXNoYWRvdzogMXB4IDJweCA0cHggcmdiYSgwLCAwLCAwLCAuNCk7XFxyXFxufVxcclxcblxcclxcbi56b29tIHtcXHJcXG4gICAgZmlsbDogbm9uZTtcXHJcXG4gICAgcG9pbnRlci1ldmVudHM6IGFsbDtcXHJcXG59XFxyXFxuXFxyXFxuLnguYXhpcy1saW5lLWNoYXJ0Pmc+dGV4dCB7XFxyXFxuICAgIGZvbnQtc2l6ZTogM2VtO1xcclxcbiAgICBjb2xvcjogaW5oZXJpdDtcXHJcXG4gICAgbGluZS1oZWlnaHQ6IDEuMTtcXHJcXG59XFxyXFxuXFxyXFxuLmFycm93IHtcXHJcXG4gICAgc3Ryb2tlLXdpZHRoOiAxO1xcclxcbn1cXHJcXG5cXHJcXG4jY2VudHJvaWQtbGluZSB7XFxyXFxuICAgIHN0cm9rZS13aWR0aDogMTtcXHJcXG4gICAgc3Ryb2tlOiAjZTcyOThhO1xcclxcbn1cXHJcXG5cXHJcXG4jY2VudHJvaWQtYXJyb3cge1xcclxcbiAgICBmaWxsOiAjZTcyOThhO1xcclxcbn1cXHJcXG5cXHJcXG4ubWV0YWRhdGEtc3dhdGNoIHtcXHJcXG4gICAgd2lkdGg6IDMwcHg7XFxyXFxuICAgIGhlaWdodDogMzBweDtcXHJcXG4gICAgYm9yZGVyLXJhZGl1czogM3B4O1xcclxcbiAgICBib3JkZXI6IDJweCBzb2xpZCAjNjY2O1xcclxcbn1cXHJcXG5cXHJcXG4ubWV0YWRhdGEtc3dhdGNoLWNsaWNrYWJsZTpob3ZlciB7XFxyXFxuICAgIGJvcmRlcjogMnB4IHNvbGlkICMwMDA7XFxyXFxuICAgIGN1cnNvcjogcG9pbnRlcjtcXHJcXG59XFxyXFxuXFxyXFxuLmRyb3Bkb3duLW1lbnUge1xcclxcbiAgICBtaW4td2lkdGg6IDQwcHg7XFxyXFxuICAgIHBhZGRpbmc6IDVweDtcXHJcXG59XFxyXFxuXFxyXFxuLm1ldGFkYXRhLWxlZ2VuZCB7XFxyXFxuICAgIGxpc3Qtc3R5bGU6IG5vbmU7XFxyXFxuICAgIG1hcmdpbi10b3A6IDEwcHg7XFxyXFxufVxcclxcblxcclxcbi5tZXRhZGF0YS1sZWdlbmQgbGkge1xcclxcbiAgICBmbG9hdDogbGVmdDtcXHJcXG4gICAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xcclxcbn1cXHJcXG5cXHJcXG4ubWV0YWRhdGEtbGVnZW5kIHNwYW4ge1xcclxcbiAgICBib3JkZXI6IDJweCBzb2xpZCAjNjY2O1xcclxcbiAgICBmbG9hdDogbGVmdDtcXHJcXG4gICAgd2lkdGg6IDMwcHg7XFxyXFxuICAgIGhlaWdodDogMzBweDtcXHJcXG59XFxyXFxuXFxyXFxuLm1ldGFkYXRhLWxlZ2VuZCAuYmwtYXZnIHtcXHJcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzdmYzk3ZjtcXHJcXG59XFxyXFxuXFxyXFxuLm1ldGFkYXRhLWxlZ2VuZCAuYXZnIHtcXHJcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2ZkYzA4NjtcXHJcXG59XFxyXFxuXFxyXFxuLm1ldGFkYXRhLWxlZ2VuZCAuYWItYXZnIHtcXHJcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzM4NmNiMDtcXHJcXG59XFxyXFxuXFxyXFxuLm5ldHdvcmstZWRnZXMge1xcclxcbiAgICBmaWxsLW9wYWNpdHk6IDA7XFxyXFxuICAgIHN0cm9rZS13aWR0aDogMjtcXHJcXG59XFxyXFxuXFxyXFxuLm5ldHdvcmstYmFja2dyb3VuZC1lZGdlcyB7XFxyXFxuICAgIGZpbGwtb3BhY2l0eTogMDtcXHJcXG4gICAgc3Ryb2tlLW9wYWNpdHk6IDAuMjU7XFxyXFxuICAgIHN0cm9rZTogIzczNzM3MztcXHJcXG59XFxyXFxuXFxyXFxuLm5vZGUgdGV4dCB7XFxyXFxuICAgIGZvbnQ6IDEycHggc2Fucy1zZXJpZjtcXHJcXG59XFxyXFxuXFxyXFxuLm5vZGUtLWludGVybmFsIHRleHQge1xcclxcbiAgICB0ZXh0LXNoYWRvdzogMCAxcHggMCAjZmZmLCAwIC0xcHggMCAjZmZmLCAxcHggMCAwICNmZmYsIC0xcHggMCAwICNmZmY7XFxyXFxufVxcclxcblxcclxcbi5saW5rIHtcXHJcXG4gICAgZmlsbDogbm9uZTtcXHJcXG4gICAgc3Ryb2tlOiAjNjM2MzYzO1xcclxcbiAgICBzdHJva2Utd2lkdGg6IDVweDtcXHJcXG59XFxyXFxuXFxyXFxuI2FjdGl2ZS1uZXR3b3JrLW5hbWUge1xcclxcbiAgICBmb250LXdlaWdodDogYm9sZDtcXHJcXG4gICAgY29sb3I6ICMyOTYyOTI7XFxyXFxufVxcclxcblxcclxcbi5hY3RpdmUtbGV2ZWwge1xcclxcbiAgICBmaWxsOiAjMzg2Y2IwO1xcclxcbn1cXHJcXG5cXHJcXG4jZGVuZHJvZ3JhbS1wYW5lbCB7XFxyXFxuICAgIHBvc2l0aW9uOiBpbml0aWFsO1xcclxcbn1cXHJcXG5cXHJcXG4jZGVuZHJvZ3JhbS1wYW5lbCB7XFxyXFxuICAgIGRpc3BsYXk6IG5vbmVcXHJcXG59XFxyXFxuXFxyXFxuLnNob3ctZGVuZHJvZ3JhbSB7XFxyXFxuICAgIGZsb2F0OiByaWdodDtcXHJcXG4gICAgYm9yZGVyLXJhZGl1czogM3B4O1xcclxcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjRDFEM0Q0O1xcclxcbiAgICBmb250LXdlaWdodDogbm9ybWFsO1xcclxcbn1cXHJcXG5cXHJcXG4uc2hvdy1kZW5kcm9ncmFtOmhvdmVyIHtcXHJcXG4gICAgYmFja2dyb3VuZDogI0QxRDNENDtcXHJcXG59XFxyXFxuXFxyXFxuLmRlbmRyb2dyYW0tdGV4dCB7XFxyXFxuICAgIGZvbnQtc2l6ZTogMTBlbSAhaW1wb3J0YW50O1xcclxcbn1cXHJcXG5cXHJcXG4uaGlnaGxpZ2h0LWhpZXJhcmNoeSB7XFxyXFxuICAgIGZpbGw6ICMyNTI1MjU7XFxyXFxuICAgIHN0cm9rZTogIzI1MjUyNTtcXHJcXG4gICAgc3Ryb2tlLXdpZHRoOiAxMDtcXHJcXG4gICAgc3Ryb2tlLWxpbmVqb2luOiByb3VuZDtcXHJcXG4gICAgb3BhY2l0eTogMC4zO1xcclxcbn1cXHJcXG5cXHJcXG4uYW5pbWFsLWhpZ2hsaWdodCB7XFxyXFxuICAgIGZpbGw6ICNjNTFiN2QgIWltcG9ydGFudDtcXHJcXG59XFxyXFxuXFxyXFxuI2RlbmRyb2dyYW0tYnV0dG9ucy1kaXYgLmJ0biBzcGFuLmdseXBoaWNvbiB7XFxyXFxuICAgIG9wYWNpdHk6IDA7XFxyXFxufVxcclxcblxcclxcbiNkZW5kcm9ncmFtLWJ1dHRvbnMtZGl2IC5idG4uYWN0aXZlIHNwYW4uZ2x5cGhpY29uIHtcXHJcXG4gICAgb3BhY2l0eTogMTtcXHJcXG59XFxyXFxuXFxyXFxuI2RlbmRyb2dyYW0tYnV0dG9ucy1kaXYge1xcclxcbiAgICBib3JkZXI6IDJweCBzb2xpZCAjRDFEM0Q0O1xcclxcbiAgICBib3JkZXItcmFkaXVzOiA1cHg7XFxyXFxufVxcclxcblxcclxcbiNkZW5kcm9ncmFtLWxlZ2VuZCB7XFxyXFxuICAgIG1hcmdpbi1sZWZ0OiAyMHB4O1xcclxcbn1cXHJcXG5cXHJcXG4uaW50ZXJzZWN0aW9uIHtcXHJcXG4gICAgZmlsbDogdXJsKCNzdHJpcGVkKSAhaW1wb3J0YW50O1xcclxcbiAgICBzdHJva2U6ICM2NzAwMGQ7XFxyXFxufVxcclxcblxcclxcbi5zeW0tZGlmZmVyZW5jZSB7XFxyXFxuICAgIGZpbGw6IHVybCgjc3RyaXBlZCkgIWltcG9ydGFudDtcXHJcXG4gICAgc3Ryb2tlOiAjNjcwMDBkO1xcclxcbn1cXHJcXG5cXHJcXG4ubW9kYWwtbGcge1xcclxcbiAgICBtYXgtd2lkdGg6IDgwJTtcXHJcXG59XFxyXFxuXFxyXFxuLmJhY2tncm91bmQtaW1hZ2Uge1xcclxcbiAgICBiYWNrZ3JvdW5kOiAjZmZmO1xcclxcbn1cIiwgXCJcIl0pO1xuLy8gRXhwb3J0c1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qXG4gIE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG4gIEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcbiovXG4vLyBjc3MgYmFzZSBjb2RlLCBpbmplY3RlZCBieSB0aGUgY3NzLWxvYWRlclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHVzZVNvdXJjZU1hcCkge1xuICB2YXIgbGlzdCA9IFtdOyAvLyByZXR1cm4gdGhlIGxpc3Qgb2YgbW9kdWxlcyBhcyBjc3Mgc3RyaW5nXG5cbiAgbGlzdC50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgdmFyIGNvbnRlbnQgPSBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0sIHVzZVNvdXJjZU1hcCk7XG5cbiAgICAgIGlmIChpdGVtWzJdKSB7XG4gICAgICAgIHJldHVybiBcIkBtZWRpYSBcIi5jb25jYXQoaXRlbVsyXSwgXCIge1wiKS5jb25jYXQoY29udGVudCwgXCJ9XCIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY29udGVudDtcbiAgICB9KS5qb2luKCcnKTtcbiAgfTsgLy8gaW1wb3J0IGEgbGlzdCBvZiBtb2R1bGVzIGludG8gdGhlIGxpc3RcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcblxuXG4gIGxpc3QuaSA9IGZ1bmN0aW9uIChtb2R1bGVzLCBtZWRpYVF1ZXJ5LCBkZWR1cGUpIHtcbiAgICBpZiAodHlwZW9mIG1vZHVsZXMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgIG1vZHVsZXMgPSBbW251bGwsIG1vZHVsZXMsICcnXV07XG4gICAgfVxuXG4gICAgdmFyIGFscmVhZHlJbXBvcnRlZE1vZHVsZXMgPSB7fTtcblxuICAgIGlmIChkZWR1cGUpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWRlc3RydWN0dXJpbmdcbiAgICAgICAgdmFyIGlkID0gdGhpc1tpXVswXTtcblxuICAgICAgICBpZiAoaWQgIT0gbnVsbCkge1xuICAgICAgICAgIGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaWRdID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBtb2R1bGVzLmxlbmd0aDsgX2krKykge1xuICAgICAgdmFyIGl0ZW0gPSBbXS5jb25jYXQobW9kdWxlc1tfaV0pO1xuXG4gICAgICBpZiAoZGVkdXBlICYmIGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaXRlbVswXV0pIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRpbnVlXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAobWVkaWFRdWVyeSkge1xuICAgICAgICBpZiAoIWl0ZW1bMl0pIHtcbiAgICAgICAgICBpdGVtWzJdID0gbWVkaWFRdWVyeTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtWzJdID0gXCJcIi5jb25jYXQobWVkaWFRdWVyeSwgXCIgYW5kIFwiKS5jb25jYXQoaXRlbVsyXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbGlzdC5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gbGlzdDtcbn07XG5cbmZ1bmN0aW9uIGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSwgdXNlU291cmNlTWFwKSB7XG4gIHZhciBjb250ZW50ID0gaXRlbVsxXSB8fCAnJzsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1kZXN0cnVjdHVyaW5nXG5cbiAgdmFyIGNzc01hcHBpbmcgPSBpdGVtWzNdO1xuXG4gIGlmICghY3NzTWFwcGluZykge1xuICAgIHJldHVybiBjb250ZW50O1xuICB9XG5cbiAgaWYgKHVzZVNvdXJjZU1hcCAmJiB0eXBlb2YgYnRvYSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHZhciBzb3VyY2VNYXBwaW5nID0gdG9Db21tZW50KGNzc01hcHBpbmcpO1xuICAgIHZhciBzb3VyY2VVUkxzID0gY3NzTWFwcGluZy5zb3VyY2VzLm1hcChmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICByZXR1cm4gXCIvKiMgc291cmNlVVJMPVwiLmNvbmNhdChjc3NNYXBwaW5nLnNvdXJjZVJvb3QgfHwgJycpLmNvbmNhdChzb3VyY2UsIFwiICovXCIpO1xuICAgIH0pO1xuICAgIHJldHVybiBbY29udGVudF0uY29uY2F0KHNvdXJjZVVSTHMpLmNvbmNhdChbc291cmNlTWFwcGluZ10pLmpvaW4oJ1xcbicpO1xuICB9XG5cbiAgcmV0dXJuIFtjb250ZW50XS5qb2luKCdcXG4nKTtcbn0gLy8gQWRhcHRlZCBmcm9tIGNvbnZlcnQtc291cmNlLW1hcCAoTUlUKVxuXG5cbmZ1bmN0aW9uIHRvQ29tbWVudChzb3VyY2VNYXApIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG4gIHZhciBiYXNlNjQgPSBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpO1xuICB2YXIgZGF0YSA9IFwic291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsXCIuY29uY2F0KGJhc2U2NCk7XG4gIHJldHVybiBcIi8qIyBcIi5jb25jYXQoZGF0YSwgXCIgKi9cIik7XG59IiwiLypcblx0TUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcblx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cblxudmFyIHN0eWxlc0luRG9tID0ge307XG5cbnZhclx0bWVtb2l6ZSA9IGZ1bmN0aW9uIChmbikge1xuXHR2YXIgbWVtbztcblxuXHRyZXR1cm4gZnVuY3Rpb24gKCkge1xuXHRcdGlmICh0eXBlb2YgbWVtbyA9PT0gXCJ1bmRlZmluZWRcIikgbWVtbyA9IGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdFx0cmV0dXJuIG1lbW87XG5cdH07XG59O1xuXG52YXIgaXNPbGRJRSA9IG1lbW9pemUoZnVuY3Rpb24gKCkge1xuXHQvLyBUZXN0IGZvciBJRSA8PSA5IGFzIHByb3Bvc2VkIGJ5IEJyb3dzZXJoYWNrc1xuXHQvLyBAc2VlIGh0dHA6Ly9icm93c2VyaGFja3MuY29tLyNoYWNrLWU3MWQ4NjkyZjY1MzM0MTczZmVlNzE1YzIyMmNiODA1XG5cdC8vIFRlc3RzIGZvciBleGlzdGVuY2Ugb2Ygc3RhbmRhcmQgZ2xvYmFscyBpcyB0byBhbGxvdyBzdHlsZS1sb2FkZXJcblx0Ly8gdG8gb3BlcmF0ZSBjb3JyZWN0bHkgaW50byBub24tc3RhbmRhcmQgZW52aXJvbm1lbnRzXG5cdC8vIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3dlYnBhY2stY29udHJpYi9zdHlsZS1sb2FkZXIvaXNzdWVzLzE3N1xuXHRyZXR1cm4gd2luZG93ICYmIGRvY3VtZW50ICYmIGRvY3VtZW50LmFsbCAmJiAhd2luZG93LmF0b2I7XG59KTtcblxudmFyIGdldFRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KTtcbn07XG5cbnZhciBnZXRFbGVtZW50ID0gKGZ1bmN0aW9uIChmbikge1xuXHR2YXIgbWVtbyA9IHt9O1xuXG5cdHJldHVybiBmdW5jdGlvbih0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiBwYXNzaW5nIGZ1bmN0aW9uIGluIG9wdGlvbnMsIHRoZW4gdXNlIGl0IGZvciByZXNvbHZlIFwiaGVhZFwiIGVsZW1lbnQuXG4gICAgICAgICAgICAgICAgLy8gVXNlZnVsIGZvciBTaGFkb3cgUm9vdCBzdHlsZSBpLmVcbiAgICAgICAgICAgICAgICAvLyB7XG4gICAgICAgICAgICAgICAgLy8gICBpbnNlcnRJbnRvOiBmdW5jdGlvbiAoKSB7IHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Zvb1wiKS5zaGFkb3dSb290IH1cbiAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0YXJnZXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZW1vW3RhcmdldF0gPT09IFwidW5kZWZpbmVkXCIpIHtcblx0XHRcdHZhciBzdHlsZVRhcmdldCA9IGdldFRhcmdldC5jYWxsKHRoaXMsIHRhcmdldCk7XG5cdFx0XHQvLyBTcGVjaWFsIGNhc2UgdG8gcmV0dXJuIGhlYWQgb2YgaWZyYW1lIGluc3RlYWQgb2YgaWZyYW1lIGl0c2VsZlxuXHRcdFx0aWYgKHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCAmJiBzdHlsZVRhcmdldCBpbnN0YW5jZW9mIHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCkge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdC8vIFRoaXMgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgYWNjZXNzIHRvIGlmcmFtZSBpcyBibG9ja2VkXG5cdFx0XHRcdFx0Ly8gZHVlIHRvIGNyb3NzLW9yaWdpbiByZXN0cmljdGlvbnNcblx0XHRcdFx0XHRzdHlsZVRhcmdldCA9IHN0eWxlVGFyZ2V0LmNvbnRlbnREb2N1bWVudC5oZWFkO1xuXHRcdFx0XHR9IGNhdGNoKGUpIHtcblx0XHRcdFx0XHRzdHlsZVRhcmdldCA9IG51bGw7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdG1lbW9bdGFyZ2V0XSA9IHN0eWxlVGFyZ2V0O1xuXHRcdH1cblx0XHRyZXR1cm4gbWVtb1t0YXJnZXRdXG5cdH07XG59KSgpO1xuXG52YXIgc2luZ2xldG9uID0gbnVsbDtcbnZhclx0c2luZ2xldG9uQ291bnRlciA9IDA7XG52YXJcdHN0eWxlc0luc2VydGVkQXRUb3AgPSBbXTtcblxudmFyXHRmaXhVcmxzID0gcmVxdWlyZShcIi4vdXJsc1wiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihsaXN0LCBvcHRpb25zKSB7XG5cdGlmICh0eXBlb2YgREVCVUcgIT09IFwidW5kZWZpbmVkXCIgJiYgREVCVUcpIHtcblx0XHRpZiAodHlwZW9mIGRvY3VtZW50ICE9PSBcIm9iamVjdFwiKSB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgc3R5bGUtbG9hZGVyIGNhbm5vdCBiZSB1c2VkIGluIGEgbm9uLWJyb3dzZXIgZW52aXJvbm1lbnRcIik7XG5cdH1cblxuXHRvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuXHRvcHRpb25zLmF0dHJzID0gdHlwZW9mIG9wdGlvbnMuYXR0cnMgPT09IFwib2JqZWN0XCIgPyBvcHRpb25zLmF0dHJzIDoge307XG5cblx0Ly8gRm9yY2Ugc2luZ2xlLXRhZyBzb2x1dGlvbiBvbiBJRTYtOSwgd2hpY2ggaGFzIGEgaGFyZCBsaW1pdCBvbiB0aGUgIyBvZiA8c3R5bGU+XG5cdC8vIHRhZ3MgaXQgd2lsbCBhbGxvdyBvbiBhIHBhZ2Vcblx0aWYgKCFvcHRpb25zLnNpbmdsZXRvbiAmJiB0eXBlb2Ygb3B0aW9ucy5zaW5nbGV0b24gIT09IFwiYm9vbGVhblwiKSBvcHRpb25zLnNpbmdsZXRvbiA9IGlzT2xkSUUoKTtcblxuXHQvLyBCeSBkZWZhdWx0LCBhZGQgPHN0eWxlPiB0YWdzIHRvIHRoZSA8aGVhZD4gZWxlbWVudFxuICAgICAgICBpZiAoIW9wdGlvbnMuaW5zZXJ0SW50bykgb3B0aW9ucy5pbnNlcnRJbnRvID0gXCJoZWFkXCI7XG5cblx0Ly8gQnkgZGVmYXVsdCwgYWRkIDxzdHlsZT4gdGFncyB0byB0aGUgYm90dG9tIG9mIHRoZSB0YXJnZXRcblx0aWYgKCFvcHRpb25zLmluc2VydEF0KSBvcHRpb25zLmluc2VydEF0ID0gXCJib3R0b21cIjtcblxuXHR2YXIgc3R5bGVzID0gbGlzdFRvU3R5bGVzKGxpc3QsIG9wdGlvbnMpO1xuXG5cdGFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucyk7XG5cblx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZSAobmV3TGlzdCkge1xuXHRcdHZhciBtYXlSZW1vdmUgPSBbXTtcblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgaXRlbSA9IHN0eWxlc1tpXTtcblx0XHRcdHZhciBkb21TdHlsZSA9IHN0eWxlc0luRG9tW2l0ZW0uaWRdO1xuXG5cdFx0XHRkb21TdHlsZS5yZWZzLS07XG5cdFx0XHRtYXlSZW1vdmUucHVzaChkb21TdHlsZSk7XG5cdFx0fVxuXG5cdFx0aWYobmV3TGlzdCkge1xuXHRcdFx0dmFyIG5ld1N0eWxlcyA9IGxpc3RUb1N0eWxlcyhuZXdMaXN0LCBvcHRpb25zKTtcblx0XHRcdGFkZFN0eWxlc1RvRG9tKG5ld1N0eWxlcywgb3B0aW9ucyk7XG5cdFx0fVxuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBtYXlSZW1vdmUubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBkb21TdHlsZSA9IG1heVJlbW92ZVtpXTtcblxuXHRcdFx0aWYoZG9tU3R5bGUucmVmcyA9PT0gMCkge1xuXHRcdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKSBkb21TdHlsZS5wYXJ0c1tqXSgpO1xuXG5cdFx0XHRcdGRlbGV0ZSBzdHlsZXNJbkRvbVtkb21TdHlsZS5pZF07XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xufTtcblxuZnVuY3Rpb24gYWRkU3R5bGVzVG9Eb20gKHN0eWxlcywgb3B0aW9ucykge1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBpdGVtID0gc3R5bGVzW2ldO1xuXHRcdHZhciBkb21TdHlsZSA9IHN0eWxlc0luRG9tW2l0ZW0uaWRdO1xuXG5cdFx0aWYoZG9tU3R5bGUpIHtcblx0XHRcdGRvbVN0eWxlLnJlZnMrKztcblxuXHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdGRvbVN0eWxlLnBhcnRzW2pdKGl0ZW0ucGFydHNbal0pO1xuXHRcdFx0fVxuXG5cdFx0XHRmb3IoOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRkb21TdHlsZS5wYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0sIG9wdGlvbnMpKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0dmFyIHBhcnRzID0gW107XG5cblx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdHBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xuXHRcdFx0fVxuXG5cdFx0XHRzdHlsZXNJbkRvbVtpdGVtLmlkXSA9IHtpZDogaXRlbS5pZCwgcmVmczogMSwgcGFydHM6IHBhcnRzfTtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gbGlzdFRvU3R5bGVzIChsaXN0LCBvcHRpb25zKSB7XG5cdHZhciBzdHlsZXMgPSBbXTtcblx0dmFyIG5ld1N0eWxlcyA9IHt9O1xuXG5cdGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBpdGVtID0gbGlzdFtpXTtcblx0XHR2YXIgaWQgPSBvcHRpb25zLmJhc2UgPyBpdGVtWzBdICsgb3B0aW9ucy5iYXNlIDogaXRlbVswXTtcblx0XHR2YXIgY3NzID0gaXRlbVsxXTtcblx0XHR2YXIgbWVkaWEgPSBpdGVtWzJdO1xuXHRcdHZhciBzb3VyY2VNYXAgPSBpdGVtWzNdO1xuXHRcdHZhciBwYXJ0ID0ge2NzczogY3NzLCBtZWRpYTogbWVkaWEsIHNvdXJjZU1hcDogc291cmNlTWFwfTtcblxuXHRcdGlmKCFuZXdTdHlsZXNbaWRdKSBzdHlsZXMucHVzaChuZXdTdHlsZXNbaWRdID0ge2lkOiBpZCwgcGFydHM6IFtwYXJ0XX0pO1xuXHRcdGVsc2UgbmV3U3R5bGVzW2lkXS5wYXJ0cy5wdXNoKHBhcnQpO1xuXHR9XG5cblx0cmV0dXJuIHN0eWxlcztcbn1cblxuZnVuY3Rpb24gaW5zZXJ0U3R5bGVFbGVtZW50IChvcHRpb25zLCBzdHlsZSkge1xuXHR2YXIgdGFyZ2V0ID0gZ2V0RWxlbWVudChvcHRpb25zLmluc2VydEludG8pXG5cblx0aWYgKCF0YXJnZXQpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCBmaW5kIGEgc3R5bGUgdGFyZ2V0LiBUaGlzIHByb2JhYmx5IG1lYW5zIHRoYXQgdGhlIHZhbHVlIGZvciB0aGUgJ2luc2VydEludG8nIHBhcmFtZXRlciBpcyBpbnZhbGlkLlwiKTtcblx0fVxuXG5cdHZhciBsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCA9IHN0eWxlc0luc2VydGVkQXRUb3Bbc3R5bGVzSW5zZXJ0ZWRBdFRvcC5sZW5ndGggLSAxXTtcblxuXHRpZiAob3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJ0b3BcIikge1xuXHRcdGlmICghbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3ApIHtcblx0XHRcdHRhcmdldC5pbnNlcnRCZWZvcmUoc3R5bGUsIHRhcmdldC5maXJzdENoaWxkKTtcblx0XHR9IGVsc2UgaWYgKGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wLm5leHRTaWJsaW5nKSB7XG5cdFx0XHR0YXJnZXQuaW5zZXJ0QmVmb3JlKHN0eWxlLCBsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcC5uZXh0U2libGluZyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XG5cdFx0fVxuXHRcdHN0eWxlc0luc2VydGVkQXRUb3AucHVzaChzdHlsZSk7XG5cdH0gZWxzZSBpZiAob3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJib3R0b21cIikge1xuXHRcdHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XG5cdH0gZWxzZSBpZiAodHlwZW9mIG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwib2JqZWN0XCIgJiYgb3B0aW9ucy5pbnNlcnRBdC5iZWZvcmUpIHtcblx0XHR2YXIgbmV4dFNpYmxpbmcgPSBnZXRFbGVtZW50KG9wdGlvbnMuaW5zZXJ0SW50byArIFwiIFwiICsgb3B0aW9ucy5pbnNlcnRBdC5iZWZvcmUpO1xuXHRcdHRhcmdldC5pbnNlcnRCZWZvcmUoc3R5bGUsIG5leHRTaWJsaW5nKTtcblx0fSBlbHNlIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJbU3R5bGUgTG9hZGVyXVxcblxcbiBJbnZhbGlkIHZhbHVlIGZvciBwYXJhbWV0ZXIgJ2luc2VydEF0JyAoJ29wdGlvbnMuaW5zZXJ0QXQnKSBmb3VuZC5cXG4gTXVzdCBiZSAndG9wJywgJ2JvdHRvbScsIG9yIE9iamVjdC5cXG4gKGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrLWNvbnRyaWIvc3R5bGUtbG9hZGVyI2luc2VydGF0KVxcblwiKTtcblx0fVxufVxuXG5mdW5jdGlvbiByZW1vdmVTdHlsZUVsZW1lbnQgKHN0eWxlKSB7XG5cdGlmIChzdHlsZS5wYXJlbnROb2RlID09PSBudWxsKSByZXR1cm4gZmFsc2U7XG5cdHN0eWxlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGUpO1xuXG5cdHZhciBpZHggPSBzdHlsZXNJbnNlcnRlZEF0VG9wLmluZGV4T2Yoc3R5bGUpO1xuXHRpZihpZHggPj0gMCkge1xuXHRcdHN0eWxlc0luc2VydGVkQXRUb3Auc3BsaWNlKGlkeCwgMSk7XG5cdH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlU3R5bGVFbGVtZW50IChvcHRpb25zKSB7XG5cdHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcblxuXHRpZihvcHRpb25zLmF0dHJzLnR5cGUgPT09IHVuZGVmaW5lZCkge1xuXHRcdG9wdGlvbnMuYXR0cnMudHlwZSA9IFwidGV4dC9jc3NcIjtcblx0fVxuXG5cdGFkZEF0dHJzKHN0eWxlLCBvcHRpb25zLmF0dHJzKTtcblx0aW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIHN0eWxlKTtcblxuXHRyZXR1cm4gc3R5bGU7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUxpbmtFbGVtZW50IChvcHRpb25zKSB7XG5cdHZhciBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XG5cblx0aWYob3B0aW9ucy5hdHRycy50eXBlID09PSB1bmRlZmluZWQpIHtcblx0XHRvcHRpb25zLmF0dHJzLnR5cGUgPSBcInRleHQvY3NzXCI7XG5cdH1cblx0b3B0aW9ucy5hdHRycy5yZWwgPSBcInN0eWxlc2hlZXRcIjtcblxuXHRhZGRBdHRycyhsaW5rLCBvcHRpb25zLmF0dHJzKTtcblx0aW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIGxpbmspO1xuXG5cdHJldHVybiBsaW5rO1xufVxuXG5mdW5jdGlvbiBhZGRBdHRycyAoZWwsIGF0dHJzKSB7XG5cdE9iamVjdC5rZXlzKGF0dHJzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0XHRlbC5zZXRBdHRyaWJ1dGUoa2V5LCBhdHRyc1trZXldKTtcblx0fSk7XG59XG5cbmZ1bmN0aW9uIGFkZFN0eWxlIChvYmosIG9wdGlvbnMpIHtcblx0dmFyIHN0eWxlLCB1cGRhdGUsIHJlbW92ZSwgcmVzdWx0O1xuXG5cdC8vIElmIGEgdHJhbnNmb3JtIGZ1bmN0aW9uIHdhcyBkZWZpbmVkLCBydW4gaXQgb24gdGhlIGNzc1xuXHRpZiAob3B0aW9ucy50cmFuc2Zvcm0gJiYgb2JqLmNzcykge1xuXHQgICAgcmVzdWx0ID0gb3B0aW9ucy50cmFuc2Zvcm0ob2JqLmNzcyk7XG5cblx0ICAgIGlmIChyZXN1bHQpIHtcblx0ICAgIFx0Ly8gSWYgdHJhbnNmb3JtIHJldHVybnMgYSB2YWx1ZSwgdXNlIHRoYXQgaW5zdGVhZCBvZiB0aGUgb3JpZ2luYWwgY3NzLlxuXHQgICAgXHQvLyBUaGlzIGFsbG93cyBydW5uaW5nIHJ1bnRpbWUgdHJhbnNmb3JtYXRpb25zIG9uIHRoZSBjc3MuXG5cdCAgICBcdG9iai5jc3MgPSByZXN1bHQ7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgXHQvLyBJZiB0aGUgdHJhbnNmb3JtIGZ1bmN0aW9uIHJldHVybnMgYSBmYWxzeSB2YWx1ZSwgZG9uJ3QgYWRkIHRoaXMgY3NzLlxuXHQgICAgXHQvLyBUaGlzIGFsbG93cyBjb25kaXRpb25hbCBsb2FkaW5nIG9mIGNzc1xuXHQgICAgXHRyZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICBcdFx0Ly8gbm9vcFxuXHQgICAgXHR9O1xuXHQgICAgfVxuXHR9XG5cblx0aWYgKG9wdGlvbnMuc2luZ2xldG9uKSB7XG5cdFx0dmFyIHN0eWxlSW5kZXggPSBzaW5nbGV0b25Db3VudGVyKys7XG5cblx0XHRzdHlsZSA9IHNpbmdsZXRvbiB8fCAoc2luZ2xldG9uID0gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpKTtcblxuXHRcdHVwZGF0ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgZmFsc2UpO1xuXHRcdHJlbW92ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgdHJ1ZSk7XG5cblx0fSBlbHNlIGlmIChcblx0XHRvYmouc291cmNlTWFwICYmXG5cdFx0dHlwZW9mIFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIFVSTC5jcmVhdGVPYmplY3RVUkwgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBVUkwucmV2b2tlT2JqZWN0VVJMID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgQmxvYiA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIGJ0b2EgPT09IFwiZnVuY3Rpb25cIlxuXHQpIHtcblx0XHRzdHlsZSA9IGNyZWF0ZUxpbmtFbGVtZW50KG9wdGlvbnMpO1xuXHRcdHVwZGF0ZSA9IHVwZGF0ZUxpbmsuYmluZChudWxsLCBzdHlsZSwgb3B0aW9ucyk7XG5cdFx0cmVtb3ZlID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0cmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKTtcblxuXHRcdFx0aWYoc3R5bGUuaHJlZikgVVJMLnJldm9rZU9iamVjdFVSTChzdHlsZS5ocmVmKTtcblx0XHR9O1xuXHR9IGVsc2Uge1xuXHRcdHN0eWxlID0gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpO1xuXHRcdHVwZGF0ZSA9IGFwcGx5VG9UYWcuYmluZChudWxsLCBzdHlsZSk7XG5cdFx0cmVtb3ZlID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0cmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKTtcblx0XHR9O1xuXHR9XG5cblx0dXBkYXRlKG9iaik7XG5cblx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlIChuZXdPYmopIHtcblx0XHRpZiAobmV3T2JqKSB7XG5cdFx0XHRpZiAoXG5cdFx0XHRcdG5ld09iai5jc3MgPT09IG9iai5jc3MgJiZcblx0XHRcdFx0bmV3T2JqLm1lZGlhID09PSBvYmoubWVkaWEgJiZcblx0XHRcdFx0bmV3T2JqLnNvdXJjZU1hcCA9PT0gb2JqLnNvdXJjZU1hcFxuXHRcdFx0KSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0dXBkYXRlKG9iaiA9IG5ld09iaik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJlbW92ZSgpO1xuXHRcdH1cblx0fTtcbn1cblxudmFyIHJlcGxhY2VUZXh0ID0gKGZ1bmN0aW9uICgpIHtcblx0dmFyIHRleHRTdG9yZSA9IFtdO1xuXG5cdHJldHVybiBmdW5jdGlvbiAoaW5kZXgsIHJlcGxhY2VtZW50KSB7XG5cdFx0dGV4dFN0b3JlW2luZGV4XSA9IHJlcGxhY2VtZW50O1xuXG5cdFx0cmV0dXJuIHRleHRTdG9yZS5maWx0ZXIoQm9vbGVhbikuam9pbignXFxuJyk7XG5cdH07XG59KSgpO1xuXG5mdW5jdGlvbiBhcHBseVRvU2luZ2xldG9uVGFnIChzdHlsZSwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XG5cdHZhciBjc3MgPSByZW1vdmUgPyBcIlwiIDogb2JqLmNzcztcblxuXHRpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuXHRcdHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IHJlcGxhY2VUZXh0KGluZGV4LCBjc3MpO1xuXHR9IGVsc2Uge1xuXHRcdHZhciBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKTtcblx0XHR2YXIgY2hpbGROb2RlcyA9IHN0eWxlLmNoaWxkTm9kZXM7XG5cblx0XHRpZiAoY2hpbGROb2Rlc1tpbmRleF0pIHN0eWxlLnJlbW92ZUNoaWxkKGNoaWxkTm9kZXNbaW5kZXhdKTtcblxuXHRcdGlmIChjaGlsZE5vZGVzLmxlbmd0aCkge1xuXHRcdFx0c3R5bGUuaW5zZXJ0QmVmb3JlKGNzc05vZGUsIGNoaWxkTm9kZXNbaW5kZXhdKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0c3R5bGUuYXBwZW5kQ2hpbGQoY3NzTm9kZSk7XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIGFwcGx5VG9UYWcgKHN0eWxlLCBvYmopIHtcblx0dmFyIGNzcyA9IG9iai5jc3M7XG5cdHZhciBtZWRpYSA9IG9iai5tZWRpYTtcblxuXHRpZihtZWRpYSkge1xuXHRcdHN0eWxlLnNldEF0dHJpYnV0ZShcIm1lZGlhXCIsIG1lZGlhKVxuXHR9XG5cblx0aWYoc3R5bGUuc3R5bGVTaGVldCkge1xuXHRcdHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcblx0fSBlbHNlIHtcblx0XHR3aGlsZShzdHlsZS5maXJzdENoaWxkKSB7XG5cdFx0XHRzdHlsZS5yZW1vdmVDaGlsZChzdHlsZS5maXJzdENoaWxkKTtcblx0XHR9XG5cblx0XHRzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcblx0fVxufVxuXG5mdW5jdGlvbiB1cGRhdGVMaW5rIChsaW5rLCBvcHRpb25zLCBvYmopIHtcblx0dmFyIGNzcyA9IG9iai5jc3M7XG5cdHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuXG5cdC8qXG5cdFx0SWYgY29udmVydFRvQWJzb2x1dGVVcmxzIGlzbid0IGRlZmluZWQsIGJ1dCBzb3VyY2VtYXBzIGFyZSBlbmFibGVkXG5cdFx0YW5kIHRoZXJlIGlzIG5vIHB1YmxpY1BhdGggZGVmaW5lZCB0aGVuIGxldHMgdHVybiBjb252ZXJ0VG9BYnNvbHV0ZVVybHNcblx0XHRvbiBieSBkZWZhdWx0LiAgT3RoZXJ3aXNlIGRlZmF1bHQgdG8gdGhlIGNvbnZlcnRUb0Fic29sdXRlVXJscyBvcHRpb25cblx0XHRkaXJlY3RseVxuXHQqL1xuXHR2YXIgYXV0b0ZpeFVybHMgPSBvcHRpb25zLmNvbnZlcnRUb0Fic29sdXRlVXJscyA9PT0gdW5kZWZpbmVkICYmIHNvdXJjZU1hcDtcblxuXHRpZiAob3B0aW9ucy5jb252ZXJ0VG9BYnNvbHV0ZVVybHMgfHwgYXV0b0ZpeFVybHMpIHtcblx0XHRjc3MgPSBmaXhVcmxzKGNzcyk7XG5cdH1cblxuXHRpZiAoc291cmNlTWFwKSB7XG5cdFx0Ly8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjY2MDM4NzVcblx0XHRjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiICsgYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSArIFwiICovXCI7XG5cdH1cblxuXHR2YXIgYmxvYiA9IG5ldyBCbG9iKFtjc3NdLCB7IHR5cGU6IFwidGV4dC9jc3NcIiB9KTtcblxuXHR2YXIgb2xkU3JjID0gbGluay5ocmVmO1xuXG5cdGxpbmsuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG5cblx0aWYob2xkU3JjKSBVUkwucmV2b2tlT2JqZWN0VVJMKG9sZFNyYyk7XG59XG4iLCJcbi8qKlxuICogV2hlbiBzb3VyY2UgbWFwcyBhcmUgZW5hYmxlZCwgYHN0eWxlLWxvYWRlcmAgdXNlcyBhIGxpbmsgZWxlbWVudCB3aXRoIGEgZGF0YS11cmkgdG9cbiAqIGVtYmVkIHRoZSBjc3Mgb24gdGhlIHBhZ2UuIFRoaXMgYnJlYWtzIGFsbCByZWxhdGl2ZSB1cmxzIGJlY2F1c2Ugbm93IHRoZXkgYXJlIHJlbGF0aXZlIHRvIGFcbiAqIGJ1bmRsZSBpbnN0ZWFkIG9mIHRoZSBjdXJyZW50IHBhZ2UuXG4gKlxuICogT25lIHNvbHV0aW9uIGlzIHRvIG9ubHkgdXNlIGZ1bGwgdXJscywgYnV0IHRoYXQgbWF5IGJlIGltcG9zc2libGUuXG4gKlxuICogSW5zdGVhZCwgdGhpcyBmdW5jdGlvbiBcImZpeGVzXCIgdGhlIHJlbGF0aXZlIHVybHMgdG8gYmUgYWJzb2x1dGUgYWNjb3JkaW5nIHRvIHRoZSBjdXJyZW50IHBhZ2UgbG9jYXRpb24uXG4gKlxuICogQSBydWRpbWVudGFyeSB0ZXN0IHN1aXRlIGlzIGxvY2F0ZWQgYXQgYHRlc3QvZml4VXJscy5qc2AgYW5kIGNhbiBiZSBydW4gdmlhIHRoZSBgbnBtIHRlc3RgIGNvbW1hbmQuXG4gKlxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGNzcykge1xuICAvLyBnZXQgY3VycmVudCBsb2NhdGlvblxuICB2YXIgbG9jYXRpb24gPSB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHdpbmRvdy5sb2NhdGlvbjtcblxuICBpZiAoIWxvY2F0aW9uKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiZml4VXJscyByZXF1aXJlcyB3aW5kb3cubG9jYXRpb25cIik7XG4gIH1cblxuXHQvLyBibGFuayBvciBudWxsP1xuXHRpZiAoIWNzcyB8fCB0eXBlb2YgY3NzICE9PSBcInN0cmluZ1wiKSB7XG5cdCAgcmV0dXJuIGNzcztcbiAgfVxuXG4gIHZhciBiYXNlVXJsID0gbG9jYXRpb24ucHJvdG9jb2wgKyBcIi8vXCIgKyBsb2NhdGlvbi5ob3N0O1xuICB2YXIgY3VycmVudERpciA9IGJhc2VVcmwgKyBsb2NhdGlvbi5wYXRobmFtZS5yZXBsYWNlKC9cXC9bXlxcL10qJC8sIFwiL1wiKTtcblxuXHQvLyBjb252ZXJ0IGVhY2ggdXJsKC4uLilcblx0Lypcblx0VGhpcyByZWd1bGFyIGV4cHJlc3Npb24gaXMganVzdCBhIHdheSB0byByZWN1cnNpdmVseSBtYXRjaCBicmFja2V0cyB3aXRoaW5cblx0YSBzdHJpbmcuXG5cblx0IC91cmxcXHMqXFwoICA9IE1hdGNoIG9uIHRoZSB3b3JkIFwidXJsXCIgd2l0aCBhbnkgd2hpdGVzcGFjZSBhZnRlciBpdCBhbmQgdGhlbiBhIHBhcmVuc1xuXHQgICAoICA9IFN0YXJ0IGEgY2FwdHVyaW5nIGdyb3VwXG5cdCAgICAgKD86ICA9IFN0YXJ0IGEgbm9uLWNhcHR1cmluZyBncm91cFxuXHQgICAgICAgICBbXikoXSAgPSBNYXRjaCBhbnl0aGluZyB0aGF0IGlzbid0IGEgcGFyZW50aGVzZXNcblx0ICAgICAgICAgfCAgPSBPUlxuXHQgICAgICAgICBcXCggID0gTWF0Y2ggYSBzdGFydCBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgKD86ICA9IFN0YXJ0IGFub3RoZXIgbm9uLWNhcHR1cmluZyBncm91cHNcblx0ICAgICAgICAgICAgICAgICBbXikoXSsgID0gTWF0Y2ggYW55dGhpbmcgdGhhdCBpc24ndCBhIHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICAgICAgfCAgPSBPUlxuXHQgICAgICAgICAgICAgICAgIFxcKCAgPSBNYXRjaCBhIHN0YXJ0IHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICAgICAgICAgIFteKShdKiAgPSBNYXRjaCBhbnl0aGluZyB0aGF0IGlzbid0IGEgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICAgICBcXCkgID0gTWF0Y2ggYSBlbmQgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICkgID0gRW5kIEdyb3VwXG4gICAgICAgICAgICAgICpcXCkgPSBNYXRjaCBhbnl0aGluZyBhbmQgdGhlbiBhIGNsb3NlIHBhcmVuc1xuICAgICAgICAgICkgID0gQ2xvc2Ugbm9uLWNhcHR1cmluZyBncm91cFxuICAgICAgICAgICogID0gTWF0Y2ggYW55dGhpbmdcbiAgICAgICApICA9IENsb3NlIGNhcHR1cmluZyBncm91cFxuXHQgXFwpICA9IE1hdGNoIGEgY2xvc2UgcGFyZW5zXG5cblx0IC9naSAgPSBHZXQgYWxsIG1hdGNoZXMsIG5vdCB0aGUgZmlyc3QuICBCZSBjYXNlIGluc2Vuc2l0aXZlLlxuXHQgKi9cblx0dmFyIGZpeGVkQ3NzID0gY3NzLnJlcGxhY2UoL3VybFxccypcXCgoKD86W14pKF18XFwoKD86W14pKF0rfFxcKFteKShdKlxcKSkqXFwpKSopXFwpL2dpLCBmdW5jdGlvbihmdWxsTWF0Y2gsIG9yaWdVcmwpIHtcblx0XHQvLyBzdHJpcCBxdW90ZXMgKGlmIHRoZXkgZXhpc3QpXG5cdFx0dmFyIHVucXVvdGVkT3JpZ1VybCA9IG9yaWdVcmxcblx0XHRcdC50cmltKClcblx0XHRcdC5yZXBsYWNlKC9eXCIoLiopXCIkLywgZnVuY3Rpb24obywgJDEpeyByZXR1cm4gJDE7IH0pXG5cdFx0XHQucmVwbGFjZSgvXicoLiopJyQvLCBmdW5jdGlvbihvLCAkMSl7IHJldHVybiAkMTsgfSk7XG5cblx0XHQvLyBhbHJlYWR5IGEgZnVsbCB1cmw/IG5vIGNoYW5nZVxuXHRcdGlmICgvXigjfGRhdGE6fGh0dHA6XFwvXFwvfGh0dHBzOlxcL1xcL3xmaWxlOlxcL1xcL1xcL3xcXHMqJCkvaS50ZXN0KHVucXVvdGVkT3JpZ1VybCkpIHtcblx0XHQgIHJldHVybiBmdWxsTWF0Y2g7XG5cdFx0fVxuXG5cdFx0Ly8gY29udmVydCB0aGUgdXJsIHRvIGEgZnVsbCB1cmxcblx0XHR2YXIgbmV3VXJsO1xuXG5cdFx0aWYgKHVucXVvdGVkT3JpZ1VybC5pbmRleE9mKFwiLy9cIikgPT09IDApIHtcblx0XHQgIFx0Ly9UT0RPOiBzaG91bGQgd2UgYWRkIHByb3RvY29sP1xuXHRcdFx0bmV3VXJsID0gdW5xdW90ZWRPcmlnVXJsO1xuXHRcdH0gZWxzZSBpZiAodW5xdW90ZWRPcmlnVXJsLmluZGV4T2YoXCIvXCIpID09PSAwKSB7XG5cdFx0XHQvLyBwYXRoIHNob3VsZCBiZSByZWxhdGl2ZSB0byB0aGUgYmFzZSB1cmxcblx0XHRcdG5ld1VybCA9IGJhc2VVcmwgKyB1bnF1b3RlZE9yaWdVcmw7IC8vIGFscmVhZHkgc3RhcnRzIHdpdGggJy8nXG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIHBhdGggc2hvdWxkIGJlIHJlbGF0aXZlIHRvIGN1cnJlbnQgZGlyZWN0b3J5XG5cdFx0XHRuZXdVcmwgPSBjdXJyZW50RGlyICsgdW5xdW90ZWRPcmlnVXJsLnJlcGxhY2UoL15cXC5cXC8vLCBcIlwiKTsgLy8gU3RyaXAgbGVhZGluZyAnLi8nXG5cdFx0fVxuXG5cdFx0Ly8gc2VuZCBiYWNrIHRoZSBmaXhlZCB1cmwoLi4uKVxuXHRcdHJldHVybiBcInVybChcIiArIEpTT04uc3RyaW5naWZ5KG5ld1VybCkgKyBcIilcIjtcblx0fSk7XG5cblx0Ly8gc2VuZCBiYWNrIHRoZSBmaXhlZCBjc3Ncblx0cmV0dXJuIGZpeGVkQ3NzO1xufTtcbiIsIi8qZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLWxldHMqL1xyXG4vKmdsb2JhbCB3aW5kb3csIGQzLCAkKi9cclxuaW1wb3J0IHtcclxuICAgIGRhdGFzZXRNZXRhZGF0YSxcclxuICAgIHN3YXJtRGF0YSxcclxuICAgIGFuaW1hbElkc1xyXG59IGZyb20gJy4uL2V4cGxvcmUuanMnO1xyXG5cclxuaW1wb3J0ICogYXMgU1BWIGZyb20gJy4vc3BhdGlhbF92aWV3LmpzJztcclxuXHJcbmltcG9ydCAqIGFzIE5ldHdvcmsgZnJvbSAnLi4vbmV0d29yay5qcyc7XHJcblxyXG5leHBvcnQgbGV0IHNsaWRlcjsgLy8gdGltZSBzbGlkZXIgb2YgdGhlIGFwcFxyXG5leHBvcnQgbGV0IHRvb2x0aXA7IC8vIHRvb2x0aXAgZnVuY3Rpb25cclxuXHJcbi8qKlxyXG4gKiBCcnVzaCBlbmQgZnVuY3Rpb25cclxuICogYWRkIGFjdGl2ZSBhbmltYWxzIHRvIHRoZSBhcnJheSBvciByZW1vdmUgdGhlbVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGJydXNoZW5kKCkge1xyXG4gICAgbGV0IGFycmF5QW5pbWFscyA9IFNQVi5hcnJheUFuaW1hbHM7XHJcbiAgICBsZXQgYWN0aXZlQW5pbWFscyA9IFNQVi5hY3RpdmVBbmltYWxzO1xyXG4gICAgdmFyIHJlY3QgPSBkMy5ldmVudC5zZWxlY3Rpb247XHJcbiAgICAvL2l0ZXJhdGUgb3ZlciB0aGUgMTUxIGZpc2ggdG8gY2hlY2sgd2hpY2ggYXJlIGluIHRoZSBicnVzaFxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhbmltYWxJZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2YXIgcG9pbnQgPSBbYXJyYXlBbmltYWxzW2ldWydwJ11bMF0sIGFycmF5QW5pbWFsc1tpXVsncCddWzFdXTtcclxuICAgICAgICAvL2NoZWNrIHdoaWNoIGZpc2ggYXJlIGluICB0aGUgYnJ1c2hlZCBhcmVhXHJcbiAgICAgICAgaWYgKChyZWN0WzBdWzBdIDw9IHBvaW50WzBdKSAmJiAocG9pbnRbMF0gPD0gcmVjdFsxXVswXSkgJiZcclxuICAgICAgICAgICAgKHJlY3RbMF1bMV0gPD0gcG9pbnRbMV0pICYmIChwb2ludFsxXSA8PSByZWN0WzFdWzFdKSkge1xyXG4gICAgICAgICAgICAvLyBQb2ludCBpcyBpbiB0aGUgYnJ1c2hcclxuICAgICAgICAgICAgYWN0aXZlQW5pbWFscy5wdXNoKGFycmF5QW5pbWFsc1tpXVsnYSddKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBTUFYuc2V0QWN0aXZlQW5pbWFscyhhY3RpdmVBbmltYWxzKTtcclxuICAgIGlmICghJCgnI3BsYXktYnV0dG9uJylcclxuICAgICAgICAuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgLy9nbyBiYWNrIG9uZSBzZWNvbmQgYW5kIGRyYXcgdGhlIG5leHQgZnJhbWVcclxuICAgICAgICAvL3RoaXMgYXBwbHlzIHRoZSBjaGFuZ2VzXHJcbiAgICAgICAgU1BWLmRlY0luZGV4VGltZSgpO1xyXG4gICAgICAgIFNQVi5kcmF3KCk7XHJcbiAgICB9XHJcbiAgICAkKCcjYnJ1c2hpbmctYnV0dG9uJylcclxuICAgICAgICAucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgLy8gcmVtb3ZlIHRoZSBicnVzaFxyXG4gICAgJCgnLmJydXNoJylcclxuICAgICAgICAucmVtb3ZlKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbml0aWFsaXplIHRoZSB0b29sdGlwXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaW5pdFRvb2x0aXAoKSB7XHJcbiAgICB0b29sdGlwID0gZDMuc2VsZWN0KCdkaXYudG9vbHRpcCcpXHJcbiAgICAgICAgLnN0eWxlKCdsZWZ0JywgMCArICdweCcpXHJcbiAgICAgICAgLnN0eWxlKCd0b3AnLCAwICsgJ3B4JylcclxuICAgICAgICAub24oJ21vdXNlb3ZlcicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB0b29sdGlwXHJcbiAgICAgICAgICAgICAgICAuc3R5bGUoJ29wYWNpdHknLCAxKTtcclxuICAgICAgICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFRvb2x0aXAgZnVuY3Rpb25cclxuICogQHBhcmFtIHtPYmplY3R9IGQgLSBkMyBkYXRhIG9iamVjdCB3aXRoIHRoZSBtZXRhZGF0YSBpbmZvcm1hdGlvblxyXG4gKlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHRvb2x0aXBGdW5jdGlvbihkKSB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGFzZXRNZXRhZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmIChkWydhJ10gPT09IGRhdGFzZXRNZXRhZGF0YVtpXVsnYW5pbWFsX2lkJ10pIHtcclxuICAgICAgICAgICAgdG9vbHRpcFxyXG4gICAgICAgICAgICAgICAgLnN0eWxlKCdsZWZ0JywgKGQzLmV2ZW50LnBhZ2VYICsgNSkgKyAncHgnKVxyXG4gICAgICAgICAgICAgICAgLnN0eWxlKCd0b3AnLCAoZDMuZXZlbnQucGFnZVkgLSAxMDApICsgJ3B4JylcclxuICAgICAgICAgICAgICAgIC5zdHlsZSgnb3BhY2l0eScsIDEpO1xyXG4gICAgICAgICAgICAvLyBzZXQgdGhlIHZhbHVlc1xyXG4gICAgICAgICAgICAvLyBUT0RPIG1ha2UgdGhpcyBtb2R1bGFyXHJcbiAgICAgICAgICAgIHRvb2x0aXAuc2VsZWN0KCcjdG9vbHRpcC1hbmltYWwtaWQnKVxyXG4gICAgICAgICAgICAgICAgLmh0bWwoZGF0YXNldE1ldGFkYXRhW2ldWydhbmltYWxfaWQnXSk7XHJcbiAgICAgICAgICAgIHRvb2x0aXAuc2VsZWN0KCcjdG9vbHRpcC1zcGVjaWVzJylcclxuICAgICAgICAgICAgICAgIC5odG1sKGRhdGFzZXRNZXRhZGF0YVtpXVsnc3BlY2llcyddKTtcclxuICAgICAgICAgICAgdG9vbHRpcC5zZWxlY3QoJyN0b29sdGlwLXNleCcpXHJcbiAgICAgICAgICAgICAgICAuaHRtbChkYXRhc2V0TWV0YWRhdGFbaV1bJ3NleCddKTtcclxuICAgICAgICAgICAgdG9vbHRpcC5zZWxlY3QoJyN0b29sdGlwLXNpemUnKVxyXG4gICAgICAgICAgICAgICAgLmh0bWwoZGF0YXNldE1ldGFkYXRhW2ldWydzaXplJ10pO1xyXG4gICAgICAgICAgICB0b29sdGlwLnNlbGVjdCgnI3Rvb2x0aXAtd2VpZ2h0JylcclxuICAgICAgICAgICAgICAgIC5odG1sKGRhdGFzZXRNZXRhZGF0YVtpXVsnd2VpZ2h0J10pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbml0aWFsaXplIHRoZSB0aW1lIHNsaWRlciBhbmQgdGhlIGR5bmFtaWMgbmV0d29yayBzbGlkZXJcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpbml0U2xpZGVycygpIHtcclxuICAgIC8vIHRpbWUgc2xpZGVyXHJcbiAgICBzbGlkZXIgPSAkKCcjc2xpZGVyJylcclxuICAgICAgICAuc2xpZGVyKHtcclxuICAgICAgICAgICAgbWluOiAwLFxyXG4gICAgICAgICAgICBtYXg6IHN3YXJtRGF0YS5sZW5ndGgsXHJcbiAgICAgICAgICAgIHN0ZXA6IDI1LFxyXG4gICAgICAgICAgICBzbGlkZTogZnVuY3Rpb24oZXZlbnQsIHVpKSB7XHJcbiAgICAgICAgICAgICAgICBTUFYuc2V0SW5kZXhUaW1lKHVpLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIC8vIGlmIHBhdXNlZCBhcHBseSBjaGFuZ2VzXHJcbiAgICAgICAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuICAgICAgICAgICAgICAgICAgICBTUFYuZHJhdygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAvLyBpbml0aWFsaXplIHRoZSBOZXR3b3JrIHNsaWRlclxyXG4gICAgJCgnI25ldHdvcmstc2xpZGVyJylcclxuICAgICAgICAuc2xpZGVyKHtcclxuICAgICAgICAgICAgcmFuZ2U6ICdtYXgnLFxyXG4gICAgICAgICAgICBtaW46IDAsXHJcbiAgICAgICAgICAgIG1heDogMSxcclxuICAgICAgICAgICAgc3RlcDogMC4wMSxcclxuICAgICAgICAgICAgdmFsdWU6IDAuNSxcclxuICAgICAgICAgICAgc2xpZGU6IGZ1bmN0aW9uKGV2ZW50LCB1aSkge1xyXG4gICAgICAgICAgICAgICAgTmV0d29yay5zZXROZXR3b3JMaW1pdCh1aS52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAkKCcjbmV0d29yay1saW1pdCcpLnZhbCh1aS52YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIC8vIHNldCB0ZXh0IGZvciB0aGUgZmlyc3QgaW5pdGlhbGl6YXRpb25cclxuICAgICQoJyNuZXR3b3JrLWxpbWl0JykudmFsKDAuNSk7XHJcblxyXG4gICAgLy8gZ2V0IHRoZSBtYXggZnJvbSB0aGUgc2xpZGVyIHRoaXMgaXMgbmVlZGVkIHRvIGNhbGN1bGF0ZSB0aGUgdGlja3NcclxuICAgIGxldCBtYXggPSBzbGlkZXIuc2xpZGVyKCdvcHRpb24nLCAnbWF4Jyk7XHJcbiAgICBsZXQgc3BhY2UgPSAxMDAgLyBtYXg7XHJcbiAgICAvL2FwcGVuZCB0aGUgbWludXRlIHRpY2tzXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1heDsgaSA9IGkgKyAxNTAwKSB7XHJcbiAgICAgICAgJCgnPHNwYW4gY2xhc3M9XCJ1aS1zbGlkZXItdGlja1wiPjwvc3Bhbj4nKVxyXG4gICAgICAgICAgICAuY3NzKCdsZWZ0JywgKHNwYWNlICogaSkgKyAnJScpXHJcbiAgICAgICAgICAgIC5hcHBlbmRUbyhzbGlkZXIpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICBTZXR0ZXJcclxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4vKipcclxuICogU2V0IHRoZSB0aW1lIHNsaWRlciB0byBhIG5ldyB2YWx1ZVxyXG4gKiBAcGFyYW0ge051bWJlcn0gdmFsdWUgLSBuZXcgdmFsdWUgZm9yIHRoZSB0aW1lIHNsaWRlclxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldFRpbWVTbGlkZXIodmFsdWUpIHtcclxuICAgIHNsaWRlci5zbGlkZXIoJ3ZhbHVlJywgdmFsdWUpO1xyXG59IiwiLyplc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtbGV0cyovXHJcbi8qZ2xvYmFsIHdpbmRvdywgZDMsICQsIGNvbG9yYnJld2VyKi9cclxuaW1wb3J0ICogYXMgU1BWIGZyb20gJy4vc3BhdGlhbF92aWV3LmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBjaGFuZ2VMZWdlbmRcclxufSBmcm9tICcuL2xlZ2VuZC5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgZGF0YVNldFBlcmNlbnRpbGVcclxufSBmcm9tICcuLi9leHBsb3JlLmpzJztcclxuXHJcbmV4cG9ydCBsZXQgY29sb3JTY2FsZSA9IHtcclxuICAgIHR5cGU6ICdMaW5lYXInLFxyXG4gICAgY29sb3I6IGNvbG9yYnJld2VyLkJ1WWxCdVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIFJldHVybnMgdGhlIGNvbG9yIHNjYWxlXHJcbiAqIEByZXR1cm4ge2NvbG9yU2NhbGV9IGFjdGl2ZSBjb2xvciBzY2FsZSBpcyBpbiBsaW5lYXIgb3IgdGhyZXNob2xkXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcmV0dXJuQ29sb3JTY2FsZSgpIHtcclxuICAgIC8vaWYgbGluZWFyIGlzIGNob29zZW5cclxuICAgIGlmIChjb2xvclNjYWxlWyd0eXBlJ10gPT09ICdMaW5lYXInKSB7XHJcbiAgICAgICAgcmV0dXJuIGQzLnNjYWxlTGluZWFyKClcclxuICAgICAgICAgICAgLmRvbWFpbihcclxuICAgICAgICAgICAgICAgIGRhdGFTZXRQZXJjZW50aWxlW1NQVi5hY3RpdmVTY2FsZV1cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAucmFuZ2UoY29sb3JTY2FsZVsnY29sb3InXSk7XHJcbiAgICB9IC8vVGhyZXNob2xkIGNvbG9yIHNjYWxlXHJcbiAgICBlbHNlIGlmIChjb2xvclNjYWxlWyd0eXBlJ10gPT09ICdUaHJlc2hvbGQnKSB7XHJcbiAgICAgICAgcmV0dXJuIGQzLnNjYWxlVGhyZXNob2xkKClcclxuICAgICAgICAgICAgLmRvbWFpbihcclxuICAgICAgICAgICAgICAgIGRhdGFTZXRQZXJjZW50aWxlW1NQVi5hY3RpdmVTY2FsZV1cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAucmFuZ2UoY29sb3JTY2FsZVsnY29sb3InXSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbml0aWFsaXplIHRoZSBjb2xvciBwaWNrZXJcclxuICogd2l0aCBhbGwgbGlzdGVuZXJzIGluY2x1ZGVkXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaW5pdENvbG9yUGlja2VyKCkge1xyXG4gICAgZDMuc2VsZWN0KCcuY29sb3JzLWJvZHknKVxyXG4gICAgICAgIC5zZWxlY3RBbGwoJy5wYWxldHRlJylcclxuICAgICAgICAuZGF0YShkMy5lbnRyaWVzKGNvbG9yYnJld2VyKSlcclxuICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgIC5hcHBlbmQoJ3NwYW4nKVxyXG4gICAgICAgIC5hdHRyKCdjbGFzcycsICdwYWxldHRlJylcclxuICAgICAgICAuYXR0cigndGl0bGUnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkLmtleTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5vbignY2xpY2snLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgIC8vIGhpZ2h0bGlnaHQgdGhlIHJpZ2h0IHBhbGV0dGVcclxuICAgICAgICAgICAgJCgnLnBhbGV0dGUnKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgJCgnLnBhbGV0dGVbdGl0bGU9XCInICsgZC5rZXkgKyAnXCJdJykuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgIGNvbG9yU2NhbGUuY29sb3IgPSBjb2xvcmJyZXdlcltkLmtleV07XHJcbiAgICAgICAgICAgIGNoYW5nZUxlZ2VuZCgpO1xyXG4gICAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpXHJcbiAgICAgICAgICAgICAgICAuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgICAgU1BWLmRlY0luZGV4VGltZSgpO1xyXG4gICAgICAgICAgICAgICAgU1BWLmRyYXcoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnNlbGVjdEFsbCgnLnN3YXRjaCcpXHJcbiAgICAgICAgLmRhdGEoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZC52YWx1ZTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgLmFwcGVuZCgnc3BhbicpXHJcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3N3YXRjaCcpXHJcbiAgICAgICAgLnN0eWxlKCdiYWNrZ3JvdW5kLWNvbG9yJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAvLyBoaWdobGlnaHQgdGhlIHNlbGVjdGVkIGNvbG9yIHNjaGVtZVxyXG4gICAgJCgnLnBhbGV0dGVbdGl0bGU9XCJCdVlsQnVcIl0nKS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcclxufVxyXG4iLCIvKmVzbGludC1kaXNhYmxlIG5vLXVudXNlZC1sZXRzKi9cclxuLypnbG9iYWwgd2luZG93LCAkLCAqL1xyXG4vLyBpbXBvcnQgKiBhcyBzcHYgZnJvbSAnLi9zcGF0aWFsX3ZpZXcuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGRhdGFzZXRNZXRhZGF0YVxyXG59IGZyb20gJy4vZXhwbG9yZS5qcyc7XHJcblxyXG5cclxuZXhwb3J0IGxldCBtZXRhZGF0YUNvbG9yID0ge307IC8vIHNhdmUgdGhlIG1ldGFkYXRhIGNvbG9yaW5nXHJcblxyXG4vKipcclxuICogSW5pdCBNZXRhZGF0YSBidXR0b25zIFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGluaXRpYWxpemVNZXRhZGRhdGEoKSB7XHJcbiAgICBsZXQgY29sb3JzID0gWycjZmZmJywgJyNlNDFhMWMnLCAnIzM3N2ViOCcsICcjNGRhZjRhJywgJyM5ODRlYTMnLCAnI2ZmN2YwMCcsICcjZmZmZjMzJywgJyNhNjU2MjgnXTtcclxuICAgIC8vIGFkZCB0aGUgZGF0YSB0byB0aGUgbWV0YWRhdGEgbW9kYWxcclxuICAgIGlmIChkYXRhc2V0TWV0YWRhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhc2V0TWV0YWRhdGEubGVuZ3RoOyBpKyspIHtcclxuXHJcbiAgICAgICAgICAgICQoJyNtZXRhZGF0YS10YWJsZScpLmZpbmQoJ3Rib2R5JylcclxuICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPHRyIGlkPVwibWV0YWRhdGEtcm93LScgKyBkYXRhc2V0TWV0YWRhdGFbaV1bJ2FuaW1hbF9pZCddICsgJ1wiPicpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8dGQ+JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChkYXRhc2V0TWV0YWRhdGFbaV1bJ2FuaW1hbF9pZCddKSlcclxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzx0ZD4nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGRhdGFzZXRNZXRhZGF0YVtpXVsnc3BlY2llcyddKSlcclxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzx0ZD4nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGRhdGFzZXRNZXRhZGF0YVtpXVsnc2V4J10pKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPHRkPicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoZGF0YXNldE1ldGFkYXRhW2ldWydzaXplJ10pKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJCgnPHRkPicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoZGF0YXNldE1ldGFkYXRhW2ldWyd3ZWlnaHQnXSkpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKCc8dGQ+JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChgPGRpdiBjbGFzcz1cImRyb3Bkb3duXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBjbGFzcz1cImRyb3Bkb3duLXRvZ2dsZSBidG4gYnRuLWRlZmF1bHQgYnRuLWNvbG9yXCIgZGF0YS10b2dnbGU9XCJkcm9wZG93blwiIGhyZWY9XCIjXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPVwicHJldmlld1wiIGNsYXNzPVwibWV0YWRhdGEtc3dhdGNoXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiNmZmZcIj48L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImNvbG9yLWZpZWxkXCIgdmFsdWU9XCJXaGl0ZVwiIHN0eWxlPVwiZGlzcGxheTpub25lO1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzPVwiZHJvcGRvd24tbWVudVwiIHJvbGU9XCJtZW51XCIgYXJpYS1sYWJlbGxlZGJ5PVwiZExhYmVsXCI+IGAgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzdWx0U3RyaW5nID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2xvcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0U3RyaW5nICs9ICc8ZGl2IGNsYXNzPVwibWV0YWRhdGEtc3dhdGNoIG1ldGFkYXRhLXN3YXRjaC1jbGlja2FibGVcIiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6JyArIGNvbG9yc1tpXSArICdcIiB2YWx1ZT1cIicgKyBpZCArICdcIj48L2Rpdj4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0U3RyaW5nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfShkYXRhc2V0TWV0YWRhdGFbaV1bJ2FuaW1hbF9pZCddKSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC91bD48L2Rpdj4nKVxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAkKCcjbWV0YWRhdGEtdGFibGUnKS5maW5kKCd0Ym9keScpXHJcbiAgICAgICAgICAgIC5hcHBlbmQoJ1RoZXJlIGlzIG5vIG1ldGFkYXRhIGZvciB0aGlzIGRhdGFzZXQnKTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTaXplIGFuZCB3ZWlnaHQgY29sb3JpbmcgZm9yIHRoZSBtZXRhZGF0YVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbG9yTWV0YWRhdGEoKSB7XHJcbiAgICByZXNldEluZGl2aWR1YWxNZXRhZGF0YSgpO1xyXG4gICAgLy8gZ2V0IHRoZSBpbnB1dCB2YWx1ZXNcclxuICAgIGxldCB2YWx1ZSA9ICQoJyNncm91cC1tZXRhZGF0YSAuYnRuLmJ0bi1kZWZhdWx0LmFjdGl2ZSBpbnB1dCcpXHJcbiAgICAgICAgLmF0dHIoJ3ZhbHVlJyk7XHJcbiAgICBsZXQgYmxBdmcgPSAkKCcjYmwtYXZnJykudmFsKCk7XHJcbiAgICBsZXQgYWJBdmcgPSAkKCcjYWItYXZnJykudmFsKCk7XHJcbiAgICAvLyBjb2xvciBzY2hlbWUgZm9yIHRoZSBpbnB1dHNcclxuICAgIGxldCBjb2xvcnMgPSBbJyM3ZmM5N2YnLCAnI2ZkYzA4NicsICcjMzg2Y2IwJ107XHJcbiAgICAvLyBjb2xvciB0aGUgYW5pbWFsc1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhc2V0TWV0YWRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAoZGF0YXNldE1ldGFkYXRhW2ldW3ZhbHVlXSA8IGJsQXZnKSB7XHJcbiAgICAgICAgICAgIG1ldGFkYXRhQ29sb3JbZGF0YXNldE1ldGFkYXRhW2ldWydhbmltYWxfaWQnXV0gPSBjb2xvcnNbMF07XHJcbiAgICAgICAgfSBlbHNlIGlmIChkYXRhc2V0TWV0YWRhdGFbaV1bdmFsdWVdID4gYWJBdmcpIHtcclxuICAgICAgICAgICAgbWV0YWRhdGFDb2xvcltkYXRhc2V0TWV0YWRhdGFbaV1bJ2FuaW1hbF9pZCddXSA9IGNvbG9yc1syXTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBtZXRhZGF0YUNvbG9yW2RhdGFzZXRNZXRhZGF0YVtpXVsnYW5pbWFsX2lkJ11dID0gY29sb3JzWzFdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBNZXRhZGF0YSByZXNldCBhbGwgaW5kaXZpZHVhbCBtZXRhZGF0YSBpbnB1dCBmaWVsZHNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiByZXNldEluZGl2aWR1YWxNZXRhZGF0YSgpIHtcclxuICAgIG1ldGFkYXRhQ29sb3IgPSB7fTtcclxuICAgICQoJy5kcm9wZG93biAjcHJldmlldycpXHJcbiAgICAgICAgLmNzcygnYmFja2dyb3VuZC1jb2xvcicsICdyZ2IoMjU1LCAyNTUsIDI1NSknKTtcclxufVxyXG4iLCIvKmVzbGludC1kaXNhYmxlIG5vLXVudXNlZC1sZXRzKi9cclxuLypnbG9iYWwgd2luZG93LCBkMywgJCwgU2V0Ki9cclxuXHJcbmltcG9ydCAqIGFzIFNQViBmcm9tICcuL3NwYXRpYWxfdmlldy9zcGF0aWFsX3ZpZXcuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGRpc2FibGVQbGF5QnV0dG9uXHJcbn0gZnJvbSAnLi9oZWxwZXJzLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBicnVzaGVuZCxcclxuICAgIHNsaWRlclxyXG59IGZyb20gJy4vc3BhdGlhbF92aWV3L2ludGVyYWN0aW9uLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBjaGFuZ2VMZWdlbmQsXHJcbn0gZnJvbSAnLi9zcGF0aWFsX3ZpZXcvbGVnZW5kLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBtZXRhZGF0YUNvbG9yLFxyXG4gICAgcmVzZXRJbmRpdmlkdWFsTWV0YWRhdGEsXHJcbiAgICBjb2xvck1ldGFkYXRhXHJcbn0gZnJvbSAnLi9tZXRhZGF0YS5qcyc7XHJcblxyXG5cclxuaW1wb3J0IHtcclxuICAgIHNldE5ldHdvcmtBdXRvLFxyXG4gICAgc2V0TmV0d29yTGltaXQsXHJcbiAgICBzZXROZXR3b3JrSGllcmFyY2h5LFxyXG4gICAgc2V0bmV0d29ya0NvbG9yLFxyXG4gICAgc2V0TmV0d29ya0lELFxyXG4gICAgc2V0TmV0d29ya0JhY2tncm91bmQsXHJcbiAgICBzZXROZXR3b3JrQmFja2dyb3VuZExpbWl0XHJcbn0gZnJvbSAnLi9uZXR3b3JrLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBkYXRhc2V0LFxyXG4gICAgc3dhcm1EYXRhLFxyXG4gICAgZGF0YXNldE1ldGFkYXRhLFxyXG4gICAgc2V0TmV0d29ya0RhdGEsXHJcbiAgICBzZXRIaWVyYXJjaHlEYXRhXHJcbn0gZnJvbSAnLi9leHBsb3JlLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBnZXREYXRhc2V0RmVhdHVyZSxcclxuICAgIGdldE5ldHdvcmtEYXRhLFxyXG4gICAgZ2V0U3dhcm1EYXRhc2V0RmVhdHVyZSxcclxuICAgIGdldE5ldHdvcmtIaWVyYXJjaHlEYXRhXHJcbn0gZnJvbSAnLi9hamF4X3F1ZXJpZXMuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGNvbG9yU2NhbGVcclxufSBmcm9tICcuL3NwYXRpYWxfdmlldy9jb2xvcl9waWNrZXInO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGFkZEhpZXJhcmNoeUJ1dHRvbixcclxuICAgIHJlbW92ZUhpZXJhcmNoeUJ1dHRvbixcclxuICAgIG1heE51bWJlckhpZXJhcmNoaWVzLFxyXG4gICAgc2V0U2V0T3BlcmF0aW9uLFxyXG4gICAgLy9EcmF3ZXJcclxufSBmcm9tICcuL2hpZXJhcmNoeS5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgc2V0VHJhY2tpbmdCb29sZWFuLFxyXG4gICAgcmVzZXRUcmFja2VkRGF0YSxcclxuICAgIHNlbmRUcmFja2VkRGF0YVxyXG59IGZyb20gJy4vdmlzdWFsX3BhcmFtZXRlci5qcyc7XHJcblxyXG5sZXQgYnJ1c2g7IC8vIGJydXNoaW5nIHZhcmlhYmxlXHJcbmV4cG9ydCBsZXQgcGxheUJvb2xlYW4gPSB0cnVlOyAvLyBwYXVzZSBhbmQgcGxheSBib29sZWFuXHJcblxyXG5cclxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgR2V0dGVyIGFuZCBzZXR0ZXJcclxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4vKipcclxuICogU2V0IHBsYXkgYm9vbGVhblxyXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHZhbHVlIC0gcGF1c2UgKGZhbHNlKSBvciBwbGF5ICh0cnVlKVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldFBsYXlCb29sZWFuKHZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgICBwbGF5Qm9vbGVhbiA9IHZhbHVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBwbGF5Qm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgfVxyXG59XHJcbiIsIi8qZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLWxldHMqL1xyXG4vKmdsb2JhbCB3aW5kb3csJCwgZDMsKi9cclxuLy8gaW1wb3J0ICogYXMgc3B2IGZyb20gJy4vc3BhdGlhbF92aWV3LmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBkcmF3LFxyXG4gICAgVHJlbmRDaGFydFxyXG59IGZyb20gJy4vc3BhdGlhbF92aWV3L3NwYXRpYWxfdmlldy5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgc2V0UGxheUJvb2xlYW5cclxufSBmcm9tICcuL2xpc3RlbmVyLmpzJztcclxuXHJcblxyXG5pbXBvcnQge1xyXG4gICAgc3dhcm1EYXRhXHJcbn0gZnJvbSAnLi9leHBsb3JlLmpzJztcclxuLyoqXHJcbiAqIERpc2FibGUgdGhlIHBsYXkgYnV0dG9uIC0tPiBMb2FkaW5nIHN5bWJvbFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGRpc2FibGVQbGF5QnV0dG9uKCkge1xyXG4gICAgc2V0UGxheUJvb2xlYW4oZmFsc2UpO1xyXG4gICAgJCgnI3BsYXktYnV0dG9uJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgJCgnI3BsYXktYnV0dG9uJykucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICQoJyNwbGF5LWljb25zJykuaGlkZSgpO1xyXG4gICAgJCgnI3BsYXktbG9hZGluZycpLnNob3coKTtcclxuXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBFbmFibGUgdGhlIHBsYXkgYnV0dG9uIHJlbW92ZSBsb2FkaW5nIHN5bWJvbFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGVuYWJsZVBsYXlCdXR0b24oKSB7XHJcbiAgICBzZXRQbGF5Qm9vbGVhbih0cnVlKTtcclxuICAgICQoJyNwbGF5LWJ1dHRvbicpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICQoJyNwbGF5LWJ1dHRvbicpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xyXG4gICAgJCgnI3BsYXktbG9hZGluZycpLmhpZGUoKTtcclxuICAgICQoJyNwbGF5LWljb25zJykuc2hvdygpO1xyXG4gICAgLy9kcmF3KCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXR1cm4gIC4wNSBwZXJjZW50aWxlcyBvZiB0aGUgYXJyYXlcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBwZXJjZW50aWxlcyhhcnIpIHtcclxuICAgIGxldCBwID0gMC4wNTtcclxuICAgIGlmIChhcnIubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICB9XHJcbiAgICBhcnIuc29ydChmdW5jdGlvbihhLCBiKSB7XHJcbiAgICAgICAgcmV0dXJuIGEgLSBiO1xyXG4gICAgfSk7XHJcbiAgICBsZXQgaW5kZXggPSAoYXJyLmxlbmd0aCAtIDEpICogcDtcclxuICAgIGxldCBsb3dlciA9IE1hdGguZmxvb3IoaW5kZXgpO1xyXG4gICAgbGV0IHVwcGVyID0gbG93ZXIgKyAxO1xyXG4gICAgbGV0IHdlaWdodCA9IGluZGV4ICUgMTtcclxuICAgIGlmICh1cHBlciA+PSBhcnIubGVuZ3RoKSB7XHJcbiAgICAgICAgcmV0dXJuIDEgLSBhcnJbbG93ZXJdO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gMSAtIChhcnJbbG93ZXJdICogKDEgLSB3ZWlnaHQpICsgYXJyW3VwcGVyXSAqIHdlaWdodCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXR1cm4gdGhlIDA1LCAyNSwgNTAsIDc1LCA5NSBwZXJjZW50aWxlcyBvZiB0aGUgYXJyYXlcclxuICpcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBwZXJjZW50aWxlc0xpbmVDaGFydChhcnIpIHtcclxuICAgIGxldCBwID0gWzAuMDUsIDAuMjUsIDAuNSwgMC43NSwgMC45NV07XHJcbiAgICBsZXQgcmVzdWx0ID0gW107XHJcbiAgICBpZiAoYXJyLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG4gICAgYXJyLnNvcnQoZnVuY3Rpb24oYSwgYikge1xyXG4gICAgICAgIHJldHVybiBhIC0gYjtcclxuICAgIH0pO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IGluZGV4ID0gKGFyci5sZW5ndGggLSAxKSAqIHBbaV07XHJcbiAgICAgICAgbGV0IGxvd2VyID0gTWF0aC5mbG9vcihpbmRleCk7XHJcbiAgICAgICAgbGV0IHVwcGVyID0gbG93ZXIgKyAxO1xyXG4gICAgICAgIGxldCB3ZWlnaHQgPSBpbmRleCAlIDE7XHJcbiAgICAgICAgaWYgKHVwcGVyID49IGFyci5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmVzdWx0LnB1c2goYXJyW2xvd2VyXSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVzdWx0LnB1c2goYXJyW2xvd2VyXSAqICgxIC0gd2VpZ2h0KSArIGFyclt1cHBlcl0gKiB3ZWlnaHQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBMaW5lIGNoYXJ0IGRldGFpbHMgY2xpY2sgbGlzdGVuZXJcclxuICovXHJcbmZ1bmN0aW9uIGluaXRUcmVuZENoYXJ0TGlzdGVuZXIoKSB7XHJcbiAgICAkKCcuZHJhdy1kZXRhaWxzJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKCQodGhpcykuZmluZCgnaW5wdXQ6Y2hlY2tib3gnKS5wcm9wKCdjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgLy9kaXNhYmxlTGluZUNoYXJ0KCk7XHJcbiAgICAgICAgICAgIHZhciB0cmVuZGNoYXJ0ID0gbmV3IFRyZW5kQ2hhcnQodGhpcywgc3dhcm1EYXRhKTtcclxuICAgICAgICAgICAgdHJlbmRjaGFydC5kaXNhYmxlTGluZUNoYXJ0KCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVtb3ZlVHJlbmRDaGFydCgpO1xyXG4gICAgICAgICAgICBlbmFibGVMaW5lQ2hhcnQoKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIExpbmUgY2hhcnQgZGV0YWlscyBjbGljayBsaXN0ZW5lclxyXG4gKi9cclxuZnVuY3Rpb24gZGlzYWJsZUxpbmVDaGFydCgpIHtcclxuICAgICQoJy5saW5lQ2hhcnRCdXR0b24nKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcbiAgICAkKCcubGluZS1jaGFydC1jaGVjay1ib3gnKS5hdHRyKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgJCgnLmxpbmVDaGFydExpbmUnKS5hdHRyKCd2aXNpYmlsaXR5JywgJ2hpZGRlbicpO1xyXG59XHJcblxyXG4vKipcclxuICogTGluZSBjaGFydCBkZXRhaWxzIGNsaWNrIGxpc3RlbmVyXHJcbiAqL1xyXG5mdW5jdGlvbiBlbmFibGVMaW5lQ2hhcnQoKSB7XHJcbiAgICAkKCcubGluZUNoYXJ0QnV0dG9uJykucHJvcCgnY2hlY2tlZCcsIHRydWUpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xyXG4gICAgJCgnLmxpbmUtY2hhcnQtY2hlY2stYm94JykuYXR0cignZGlzYWJsZWQnLCBmYWxzZSk7XHJcbiAgICAkKCcubGluZUNoYXJ0TGluZScpLmF0dHIoJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpO1xyXG59XHJcblxyXG4vKipcclxuICogSGlkZSB0aGUgdHJlbmQgY2hhcnRcclxuICovXHJcbmZ1bmN0aW9uIHJlbW92ZVRyZW5kQ2hhcnQoKSB7XHJcbiAgICAkKCcudHJlbmRDaGFydERhdGEnKS5oaWRlKCk7XHJcbiAgICAkKCcjdHJlbmRDaGFydExlZ2VuZCcpLmhpZGUoKTtcclxuICAgICQoJyNsaW5lQ2hhcnRMZWdlbmQnKS5zaG93KCk7XHJcbn1cclxuXHJcblxyXG5cclxuLyoqXHJcbiAqIEFkZCB0aGUgYWJzb2x1dGUgZmVhdHVyZSBjaGVja2JveGVzIGluIHRoZSBmZWF0dXJlIHBhbmVsIGV4cG9ydCB0byBhamF4XHJcbiAqXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gYWRkQWJzb2x1dGVGZWF0dXJlQnV0dG9ucyhkYXRhU2V0UGVyY2VudGlsZSkge1xyXG4gICAgLy8gaXRlcmF0ZSBvdmVyIHRoZSBvYmplY3RcclxuICAgIGZvciAodmFyIGtleSBpbiBkYXRhU2V0UGVyY2VudGlsZSkge1xyXG4gICAgICAgIGlmIChkYXRhU2V0UGVyY2VudGlsZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgIC8vIGdlbmVyYXRlIHRleHQgZm9yIHRoZSBkaXNwbGF5ZWQgYnV0dG9uXHJcbiAgICAgICAgICAgIGxldCBjYXBpdGFsaXplZF9mZWF0dXJlX3N0cmluZyA9IGtleS5zcGxpdCgnXycpLmpvaW4oJyAnKTtcclxuICAgICAgICAgICAgY2FwaXRhbGl6ZWRfZmVhdHVyZV9zdHJpbmcgPSBjYXBpdGFsaXplZF9mZWF0dXJlX3N0cmluZy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGNhcGl0YWxpemVkX2ZlYXR1cmVfc3RyaW5nLnNsaWNlKDEpO1xyXG4gICAgICAgICAgICAvLyBhZGQgdGhlIGJ1dHRvblxyXG4gICAgICAgICAgICAkKCcjYWJzb2x1dGUtZmVhdHVyZS1jaGVja2JveGVzJykuYXBwZW5kKCc8dHI+PHRoPicgK1xyXG4gICAgICAgICAgICAgICAgJyA8ZGl2IGNsYXNzPVwicHJldHR5IHAtc3dpdGNoIHAtZmlsbCBwLWJpZ2dlclwiPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBpZD1cImRyYXctJyArIGtleSArXHJcbiAgICAgICAgICAgICAgICAnXCIvPjxkaXYgY2xhc3M9XCJzdGF0ZVwiPjxsYWJlbD4nICsgY2FwaXRhbGl6ZWRfZmVhdHVyZV9zdHJpbmcgKyAnPC9sYWJlbD48L2Rpdj48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgIC8vIHF1YW50aWxlIGdyYXBoXHJcbiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImZsb2F0LXJpZ2h0IGRyYXctZGV0YWlsc1wiIGlkPVwiZHJhdy0nICsga2V5ICsgJy1kZXRhaWxzXCI+PGRpdiBjbGFzcz1cInByZXR0eSBwLWljb24gcC10b2dnbGUgcC1wbGFpblwiPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBpZD1cImRyYXctJyArIGtleSArICctaW5wdXRcIiAvPicgK1xyXG4gICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJzdGF0ZSBwLXN1Y2Nlc3MtbyBwLW9uXCI+PGkgY2xhc3M9XCJtZGkgbWRpLWltYWdlLWFyZWFcIj48L2k+PGxhYmVsPjwvbGFiZWw+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cInN0YXRlIHAtb2ZmXCI+PGkgY2xhc3M9XCJtZGkgbWRpLWltYWdlLW9mZlwiPjwvaT48bGFiZWw+PC9sYWJlbD48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICc8L2Rpdj48L2Rpdj48L3RoPjwvdHI+Jyk7XHJcblxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIGhpZGUgdGhlIGVsZW1lbnRzXHJcbiAgICAkKCcuZHJhdy1kZXRhaWxzJykuaGlkZSgpO1xyXG4gICAgLy8gaW5pdCB0aGUgbGlzdGVybmVyc1xyXG4gIGluaXRUcmVuZENoYXJ0TGlzdGVuZXIoKTtcclxuXHJcbn1cclxuXHJcbi8vIGdlbmVyYXRlIGhhc2ggY29kZXMgZnJvbSBzdHJpbmdzXHJcbi8vIHNvdXJjZTogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNzYxNjQ2MS9nZW5lcmF0ZS1hLWhhc2gtZnJvbS1zdHJpbmctaW4tamF2YXNjcmlwdC1qcXVlcnlcclxuU3RyaW5nLnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGhhc2ggPSAwLFxyXG4gICAgICAgIGksIGNocjtcclxuICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIGhhc2g7XHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNociA9IHRoaXMuY2hhckNvZGVBdChpKTtcclxuICAgICAgICBoYXNoID0gKChoYXNoIDw8IDUpIC0gaGFzaCkgKyBjaHI7XHJcbiAgICAgICAgaGFzaCB8PSAwOyAvLyBDb252ZXJ0IHRvIDMyYml0IGludGVnZXJcclxuICAgIH1cclxuICAgIHJldHVybiBoYXNoO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIENhbGN1bGF0ZSB0aGUgc3RhbmRhcmREZXZpYXRpb24gb2YgYW4gYXJyYXkgb2YgbnVtYmVyc1xyXG4gKiBAcGFyYW0ge0FycmF5fSBhcnIgLSBhcnJheSBvZiBudW1iZXJzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc3RhbmRhcmREZXZpYXRpb24oYXJyKSB7XHJcbiAgICBpZiAoYXJyIGluc3RhbmNlb2YgQXJyYXkpIHtcclxuICAgICAgICBsZXQgbWVhbiA9IGFyci5yZWR1Y2UoZnVuY3Rpb24ocHYsIGN2KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwdiArIGN2O1xyXG4gICAgICAgIH0sIDApIC8gYXJyLmxlbmd0aDtcclxuICAgICAgICBsZXQgdG1wID0gYXJyLm1hcChmdW5jdGlvbihudW0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIE1hdGgucG93KG51bSAtIG1lYW4sIDIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQodG1wLnJlZHVjZShmdW5jdGlvbihwdiwgY3YpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHB2ICsgY3Y7XHJcbiAgICAgICAgfSwgMCkgLyB0bXAubGVuZ3RoKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIE1vdmUgZWxlbWVudCBpbiBTVkcgaW50byBiYWNrZ3JvdW5kIGRvbmUgYnkgbW92aW5nIGl0IHRvIGZpcnN0IGVsZW1lbnRcclxuICovXHJcbmQzLnNlbGVjdGlvbi5wcm90b3R5cGUubW92ZVRvQmFjayA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgZmlyc3RDaGlsZCA9IHRoaXMucGFyZW50Tm9kZS5maXJzdENoaWxkO1xyXG4gICAgICAgIGlmIChmaXJzdENoaWxkKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcywgZmlyc3RDaGlsZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn07XHJcblxyXG4vKipcclxuICogTWFrZSB0aGUgbWFpbiB2aXMgc3BhdGlhbCB2aWV3IHJlc2l6YWJsZVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VSZXNpemFibGUoaGVpZ2h0LCB3aWR0aCkge1xyXG4gICAgJChmdW5jdGlvbigpIHtcclxuICAgICAgICAkKCcjbWFpbi12aXMnKVxyXG4gICAgICAgICAgICAuZHJhZ2dhYmxlKHtcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5tZW50OiAncGFyZW50J1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAucmVzaXphYmxlKHtcclxuICAgICAgICAgICAgICAgIGFzcGVjdFJhdGlvOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgbWF4V2lkdGg6ICQoJyNtYWluLXZpcy1kaXYnKS53aWR0aCgpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5oZWlnaHQoaGVpZ2h0ICogMC42KVxyXG4gICAgICAgICAgICAud2lkdGgod2lkdGggKiAwLjYpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXNldCB0aGUgYnV0dG9ucyBhbmQgY2hlY2tib3hlc1xyXG4gKiBIaWRlIGljb25zIC0gbmVlZGVkIGJlY2F1c2Ugb2YgYm9vdHN0cmFwIGJ1Z1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRDb25maWcoKSB7XHJcbiAgICAkKCdpbnB1dFt0eXBlPWNoZWNrYm94XScpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAvL3NldCB0aGUgY29sb3Igc2NhbGUgZnVuY3Rpb24gdG8gbGluZWFyXHJcbiAgICAkKCcjY29sb3Itc2NhbGUtbGluZWFyJylcclxuICAgICAgICAucHJvcCgnY2hlY2tlZCcsIHRydWUpO1xyXG4gICAgJCgnI2dyb3VwLXNpemUtbScpXHJcbiAgICAgICAgLnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcclxuICAgICQoJyNiYWNrZ3JvdW5kLXdoaXRlJylcclxuICAgICAgICAucHJvcCgnY2hlY2tlZCcsIHRydWUpO1xyXG4gICAgJCgnI3NldHRpbmdzLWRpdiBpbnB1dFt0eXBlPWNoZWNrYm94XScpXHJcbiAgICAgICAgLnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcclxuICAgIC8vaGlkZSB0aGUgbG9hZGluZyBnaWZcclxuICAgICQoJyNsb2FkaW5nJylcclxuICAgICAgICAuaGlkZSgpO1xyXG4gICAgLy8gbmVlZGVkIGR1ZSB0byBqUXVlcnkgaW5jb21wYXRpYmlsaXR5XHJcbiAgICAkKCcjcGxheS1sb2FkaW5nJykuaGlkZSgpO1xyXG4gICAgJCgnLm1kaS1wbGF5JykuaGlkZSgpO1xyXG4gICAgJCgnI21ldGFkYXRhLWlucHV0JykuaGlkZSgpO1xyXG4gICAgJCgnI2RlbmRyb2dyYW0tYnV0dG9ucy1kaXYnKS5oaWRlKCk7XHJcbiAgICAkKCcjZy1jZW50cm9pZCcpLmhpZGUoKTtcclxuICAgIC8vY2hlY2sgbGluZSBjaGFydCBkcmF3IGFsbCBsaW5lc1xyXG4gICAgJCgnI2xpbmUtY2hhcnQtZmVhdHVyZS1jaGVja2JveGVzIGlucHV0W3R5cGU9Y2hlY2tib3hdJylcclxuICAgICAgICAucHJvcCgnY2hlY2tlZCcsIHRydWUpO1xyXG59XHJcbiIsIi8qZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLWxldHMqL1xyXG4vKmdsb2JhbCB3aW5kb3csICQsZDMsIHBhcmFtZXRlcnMsIGNvbG9yYnJld2VyLCBTZXQgKi9cclxuJ3VzZSBzdHJpY3QnO1xyXG5pbXBvcnQge1xyXG4gICAgZGF0YXNldCxcclxuICAgIG5ldHdvcmtEYXRhLFxyXG4gICAgc3dhcm1EYXRhLFxyXG4gICAgYW5pbWFsSWRzLFxyXG4gICAgZGF0YXNldE1ldGFkYXRhLFxyXG4gICAgc2V0TmV0d29ya0RhdGEsXHJcbiAgICBzZXRIaWVyYXJjaHlEYXRhLFxyXG4gICAgZGF0YVNldFBlcmNlbnRpbGUsXHJcbiAgICBuZXR3b3JrSGllcmFyY2h5XHJcbn0gZnJvbSAnLi4vZXhwbG9yZS5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgbmV0d29ya0NvbG9yU2NhbGUsXHJcbiAgICBuZXR3b3JrQXV0byxcclxuICAgIHNldE5ldHdvckxpbWl0LFxyXG4gICAgbmV0d29ya0xpbWl0LFxyXG4gICAgc2hvd05ldHdvcmtIaWVyYXJjaHksXHJcbiAgICBzZXRuZXR3b3JrQ29sb3JcclxuICAgIC8vIG5ldHdvcmtJRCxcclxuICAgIC8vIG5ldHdvcmtCYWNrZ3JvdW5kLFxyXG4gICAgLy8gbmV0d29ya0JhY2tncm91bmRMaW1pdFxyXG59IGZyb20gJy4uL25ldHdvcmsuanMnO1xyXG5cclxuXHJcblxyXG5pbXBvcnQge1xyXG4gICAgcGVyY2VudGlsZXMsXHJcbiAgICBtYWtlUmVzaXphYmxlLFxyXG4gICAgZGVmYXVsdENvbmZpZyxcclxuICAgIGRpc2FibGVQbGF5QnV0dG9uLFxyXG4gICAgZW5hYmxlUGxheUJ1dHRvbixcclxuICAgIHBlcmNlbnRpbGVzTGluZUNoYXJ0XHJcbn0gZnJvbSAnLi4vaGVscGVycy5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgc2V0VGltZVNsaWRlcixcclxuICAgIGluaXRUb29sdGlwLFxyXG4gICAgdG9vbHRpcEZ1bmN0aW9uLFxyXG4gICAgaW5pdFNsaWRlcnMsXHJcbiAgICB0b29sdGlwLFxyXG4gICAgc2xpZGVyXHJcbn0gZnJvbSAnLi9pbnRlcmFjdGlvbi5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgbWV0YWRhdGFDb2xvclxyXG59IGZyb20gJy4uL21ldGFkYXRhLmpzJztcclxuXHJcblxyXG5cclxuaW1wb3J0IHtcclxuICAgIGluaXRMaXN0ZW5lcnMsXHJcblxyXG59IGZyb20gJy4uL2xpc3RlbmVyLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBhZGRTcGF0aWFsVmlld0dyb3VwXHJcbn0gZnJvbSAnLi9sZWdlbmQuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIC8vdXBkYXRlRGVuZHJvZ3JhbSxcclxuICAgIC8vc2V0SGllcmFyY2h5TGV2ZWwsXHJcbiAgICAvL2dldEhpZXJhcmNoeUxldmVsLFxyXG4gICAgZHJhd0hpZXJhcmNoeSxcclxuICAgIGluaXREZW5kcm9ncmFtTGVnZW5kLFxyXG4gICAgYWRkSGllcmFyY2h5QnV0dG9uLFxyXG4gICAgcmVtb3ZlSGllcmFyY2h5QnV0dG9uLFxyXG4gICAgaGllcmFyY2h5Q29sb3JzLFxyXG4gICAgLy8gbmV0d29ya0hpZXJhcmNoeUlkcyxcclxuICAgIC8vIHNldGhpZXJhcmNoeUdyb3VwU3RkZXYsXHJcbiAgICByZXNldGhpZXJhcmNoeUdyb3VwU3RkZXYsXHJcbiAgICBoaWVyYXJjaHlHcm91cFN0ZGV2LFxyXG4gICAgbWF4TnVtYmVySGllcmFyY2hpZXMsXHJcbiAgICB0cmVlbWFwLFxyXG4gICAgc2V0T3BlcmF0aW9uLFxyXG4gICAgLy9jb2xsYXBzZSxcclxuICAgIGhpZXJhcmNoeUxldmVscyxcclxuICAgIGRpYWdvbmFsTGluZXMsXHJcbiAgICAvL2NsaWNrLFxyXG4gICAgLy9nZXRIaWVyYXJjaHlWZXJ0aWNlcyxcclxuICAgIERlbmRyb2dyYW1cclxufSBmcm9tICcuLi9oaWVyYXJjaHkuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIHRyYWNraW5nQm9vbGVhbixcclxuICAgIGFkZFRyYWNrZWREYXRhXHJcbn0gZnJvbSAnLi4vdmlzdWFsX3BhcmFtZXRlci5qcyc7XHJcblxyXG5cclxuaW1wb3J0IHtcclxuICAgIGdldERhdGFzZXRGZWF0dXJlLFxyXG4gICAgZ2V0TmV0d29ya0RhdGEsXHJcbiAgICBnZXRTd2FybURhdGFzZXRGZWF0dXJlLFxyXG4gICAgZ2V0TmV0d29ya0hpZXJhcmNoeURhdGFcclxufSBmcm9tICcuLi9hamF4X3F1ZXJpZXMuanMnO1xyXG5cclxuXHJcbiAvLyBzdmcgY29udGFpbmVyIGZvciB0aGUgc3BhdGlhbCB2aWV3XHJcbiAvLyBzdmcgZ3JvdXAgZm9yIHRoZSBzcGF0aWFsIHZpZXcgdGFua1xyXG4vLyBsZXQgbmV0d29ya0Jha0RhdGEgPSB7fTtcclxuXHJcbi8vZXhwb3J0IGxldCBpbmRleFRpbWUgPSAwOyAvLyBhY3R1YWwgdGltZSBtb21lbnQgaW4gdGhlIGFuaW1hdGlvblxyXG5cclxuLy8gYXJyYXkgb2YgYW5pbWFscyBmb3IgdGhlIHNwZWNpZmljIHRpbWUgZnJhbWVcclxuXHJcblxyXG4vLyBEcmF3ZXIgU2V0dXBcclxuXHJcblxyXG5cclxuXHJcbmxldCB0cmVuZENoYXJ0c1pvb20gPSB7fTtcclxuLy9sZXQgdGhpcy50cmVuZENoYXJ0c0VsZW0gPSBbJ2xvd2VyLW91dGVyLWFyZWEnLCAnbG93ZXItaW5uZXItYXJlYScsICdtZWRpYW4tbGluZScsICd1cHBlci1pbm5lci1hcmVhJywgJ3VwcGVyLW91dGVyLWFyZWEnXTtcclxuLy9sZXQgbGluZUNoYXJ0V2lkdGggPSA1MDAwO1xyXG5cclxuXHJcbi8vIExpc3RlbmVyIFNldHVwXHJcbi8vIGJydXNoaW5nIHZhcmlhYmxlXHJcbmV4cG9ydCBsZXQgcGxheUJvb2xlYW4gPSB0cnVlO1xyXG5cclxuXHJcbi8vIExpbmVjaGFydCBTZXR1cFxyXG5sZXQgcmF0aW8gPSAxO1xyXG5sZXQgem9vbUdyb3VwO1xyXG5sZXQgeDtcclxubGV0IHk7XHJcbmV4cG9ydCBsZXQgem9vbUZ1bmN0aW9uO1xyXG5cclxuXHJcblxyXG5cclxuXHJcbi8qKlxyXG4qIEJhc2UgY2xhc3MgZHJhd2VyXHJcbiovXHJcblxyXG4vKipcclxuICogSW5pdGlhbGl6ZSB0aGUgc3BhdGlhbCB2aWV3IHdpdGggYWxsIHRoZSBpbXBvcnRhbnQgZmFjdG9yc1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIERyYXdlciB7XHJcbiAgIGNvbnN0cnVjdG9yKCl7XHJcbiAgICAgdGhpcy5pbmRleFRpbWU9MDtcclxuICAgICAvLyBUYW5rIEJhc2VcclxuICAgICB0aGlzLnN2Z0NvbnRhaW5lciA9IGQzLnNlbGVjdCgnI21haW4tdmlzJylcclxuXHJcblxyXG4gICAgIHRoaXMuem9vbSA9IGQzLnpvb20oKVxyXG4gICAgICAgICAuc2NhbGVFeHRlbnQoWzEsIDZdKVxyXG4gICAgICAgICAub24oJ3pvb20nLCAoKT0+e1xyXG4gICAgICAgICAgICAgLy9jb25zdHJhaW5lZCB6b29taW5nXHJcbiAgICAgICAgICAgICAvLyBtb2RpZnkgdGhlIHRyYW5zbGF0ZSBzbyB0aGF0IGl0IG5ldmVyIGV4aXRzIHRoZSB0YW5rXHJcbiAgICAgICAgICAgICBkMy5ldmVudC50cmFuc2Zvcm0ueCA9IE1hdGgubWluKDAsIHRoaXMudGFua1dpZHRoICogKGQzLmV2ZW50LnRyYW5zZm9ybS5rIC0gMSksXHJcbiAgICAgICAgICAgICAgICAgTWF0aC5tYXgodGhpcy50YW5rV2lkdGggKiAoMSAtIGQzLmV2ZW50LnRyYW5zZm9ybS5rKSwgZDMuZXZlbnQudHJhbnNmb3JtLngpKTtcclxuXHJcbiAgICAgICAgICAgICBkMy5ldmVudC50cmFuc2Zvcm0ueSA9IE1hdGgubWluKDAsIHRoaXMudGFua0hlaWdodCAqIChkMy5ldmVudC50cmFuc2Zvcm0uayAtIDEpLFxyXG4gICAgICAgICAgICAgICAgIE1hdGgubWF4KHRoaXMudGFua0hlaWdodCAqICgxIC0gZDMuZXZlbnQudHJhbnNmb3JtLmspLCBkMy5ldmVudC50cmFuc2Zvcm0ueSkpO1xyXG5cclxuICAgICAgICAgICAgIC8vIHRyYW5zbGF0ZSBhbmQgc2NhbGVcclxuICAgICAgICAgICAgIHRoaXMuem9vbUdyb3VwLmF0dHIoJ3RyYW5zZm9ybScsIGQzLmV2ZW50LnRyYW5zZm9ybSk7XHJcblxyXG4gICAgICAgICAgICAgLy8gcmVzY2FsZSB0aGUgYXhpc1xyXG4gICAgICAgICAgICAgZ1hheGlzLmNhbGwoeEF4aXMuc2NhbGUoZDMuZXZlbnQudHJhbnNmb3JtLnJlc2NhbGVYKHgpKSk7XHJcbiAgICAgICAgICAgICBnWWF4aXMuY2FsbCh5QXhpcy5zY2FsZShkMy5ldmVudC50cmFuc2Zvcm0ucmVzY2FsZVkoeSkpKTtcclxuICAgICAgICAgfSk7XHJcbiAgICAgdGhpcy56b29tR3JvdXAgPSB0aGlzLnN2Z0NvbnRhaW5lci5hcHBlbmQoJ3N2ZzpnJyk7XHJcbiAgICAgdGhpcy50YW5rID0gdGhpcy56b29tR3JvdXAuYXBwZW5kKCdzdmc6ZycpXHJcbiAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICd0YW5rJylcclxuICAgICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICgpPT57XHJcbiAgICAgICAgICAgICAgICAgICBsZXQgeCA9IHBhcmFtZXRlcnMuaW52ZXJ0ZWRfeCA/IC0xIDogMTtcclxuICAgICAgICAgICAgICAgICAgIGxldCB5ID0gcGFyYW1ldGVycy5pbnZlcnRlZF95ID8gLTEgOiAxO1xyXG4gICAgICAgICAgICAgICAgICAgcmV0dXJuICdzY2FsZSgnICsgeCArICcsJyArIHkgKyAnKSc7XHJcbiAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgIC8vIGFjdHVhbCB0aW1lIG1vbWVudCBpbiB0aGUgYW5pbWF0aW9uXHJcblxyXG4gICAgIHRoaXMuYWN0aXZlU2NhbGUgPSAnYmxhY2snOyAvLyBjYW4gYmUgc3BlZWQsIGFjY2VsZXJhdGlvbiwgLi4gYW5kIGJsYWNrIChtZWFuaW5nIG5vIGFjdGl2ZSBzY2FsZSlcclxuICAgICB0aGlzLmNvbG9yU2NhbGUgPSB7XHJcbiAgICAgICAgIHR5cGU6ICdMaW5lYXInLFxyXG4gICAgICAgICBjb2xvcjogY29sb3JicmV3ZXIuQnVZbEJ1XHJcbiAgICAgfTtcclxuICAgICB0aGlzLmxlZ2VuZFdpZHRoID0gNTUwO1xyXG4gICAgIHRoaXMubGVnZW5kSGVpZ2h0ID0gNjA7XHJcblxyXG4gICAgIHRoaXMuc3ZnTGVnZW5kID0gZDMuc2VsZWN0KCcjbWFpbi12aXMtbGVnZW5kLWRpdicpXHJcbiAgICAgICAgIC5hcHBlbmQoJ3N2ZycpXHJcbiAgICAgICAgIC5hdHRyKCdpZCcsICdtYWluLXZpcy1sZWdlbmQnKVxyXG4gICAgICAgICAuYXR0cignd2lkdGgnLCB0aGlzLmxlZ2VuZFdpZHRoKVxyXG4gICAgICAgICAuYXR0cignaGVpZ2h0JywgdGhpcy5sZWdlbmRIZWlnaHQpO1xyXG5cclxuICAgICB0aGlzLm1lZG9pZEFuaW1hbCA9IC0xOyAvLyB3aGljaCBhbmltYWwgaXMgdGhlIG1lZG9pZCAoLTEgaXMgbm8gYW5pbWFsKVxyXG4gICAgIHRoaXMuYWN0aXZlQW5pbWFscyA9IFtdOyAvLyBhY3RpdmUgc2VsZWN0ZWQgYW5pbWFsc1xyXG4gICAgIHRoaXMuYXJyYXlBbmltYWxzID0gZGF0YXNldC5maWx0ZXIoKGQpPT57XHJcbiAgICAgICAgIHJldHVybiBkWyd0J10gPT09IHRoaXMuaW5kZXhUaW1lO1xyXG4gICAgIH0pOy8vIGFycmF5IG9mIGFuaW1hbHMgZm9yIHRoZSBzcGVjaWZpYyB0aW1lIGZyYW1lXHJcbiAgICAgdGhpcy5pZCA9ICQoJy5zaG93LWRlbmRyb2dyYW0uYnRuLXByaW1hcnknKS5hdHRyKCdkYXRhJyk7XHJcbiAgICAgdGhpcy5wbGF5Qm9vbGVhbiA9IHRydWU7XHJcbiAgICAgdGhpcy5oaWVyYXJjaHlMZXZlbHMgPSB7fTtcclxuICAgICB0aGlzLmhpZXJhcmNoeUdyb3VwU3RkZXYgPSB7fTtcclxuICAgICB0aGlzLmJydXNoID0gZDMuYnJ1c2goKVxyXG4gICAgICAgICAuZXh0ZW50KFtcclxuICAgICAgICAgICAgIFswLCAwXSxcclxuICAgICAgICAgICAgIFt0aGlzLnRhbmtXaWR0aCwgdGhpcy50YW5rSGVpZ2h0XVxyXG4gICAgICAgICBdKTtcclxuICAgICB0aGlzLnN2Z0xlZ2VuZF9uZXR3ID0gZDMuc2VsZWN0KCcjaGllcmFyY2h5LWxlZ2VuZC1kaXYnKTtcclxuICAgICB0aGlzLmRlbmRyb3pvb20gPSB0aGlzLnpvb21Hcm91cDtcclxuICAgICB0aGlzLm5ldHdvcmtDb2xvciA9IHt9O1xyXG5cclxuXHJcblxyXG5cclxuICAgfVxyXG4gICBzZXRJbmRleFRpbWUodmFsdWUpIHtcclxuICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInICYmICh0aGlzLmluZGV4VGltZSA8PSBzd2FybURhdGEubGVuZ3RoKSkge1xyXG4gICAgICAgICAgIHRoaXMuaW5kZXhUaW1lID0gdmFsdWU7XHJcbiAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgIHRoaXMuaW5kZXhUaW1lID0gMDtcclxuICAgICAgIH1cclxuICAgfVxyXG4gICBzZXRBY3RpdmVTY2FsZSh2YWx1ZSkge1xyXG4gICAgICAgdGhpcy5hY3RpdmVTY2FsZSA9IHZhbHVlO1xyXG4gIH1cclxuICAgc2V0QWN0aXZlQW5pbWFscyh2YWx1ZSkge1xyXG4gICAgICB0aGlzLmFjdGl2ZUFuaW1hbHMgPSB2YWx1ZTtcclxuICB9XHJcbiAgIGRlY0luZGV4VGltZSgpIHtcclxuICAgICAgIHRoaXMuaW5kZXhUaW1lID0gdGhpcy5pbmRleFRpbWUgLSAxO1xyXG4gICB9XHJcbiAgIHVwZGF0ZUxpbmVDaGFydCgpIHtcclxuICAgICAgIGlmIChkMy5zZWxlY3QoJyNsaW5lQ2hhcnRUaW1lTGluZScpICYmIHN3YXJtRGF0YVtNYXRoLmNlaWwodGhpcy5pbmRleFRpbWUgLyByYXRpbyldKSB7XHJcbiAgICAgICAgICAgbGV0IHRtcCA9IE1hdGguY2VpbCh0aGlzLmluZGV4VGltZSAvIHJhdGlvKTtcclxuICAgICAgICAgICAvL3VwZGF0ZSB0aGUgbGluZSBjaGFydCBsZWdlbmQgdGV4dCB2YWx1ZXMgcGVyIHNlY29uZFxyXG4gICAgICAgICAgIGlmICh0aGlzLmluZGV4VGltZSAlIDI1ID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgIC8vIFRPRE8gY2hhbmdlIHRoaXMgdG8gYSBtb3JlIG1vZHVsYXIgd2F5XHJcbiAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnI2NvbnZleF9odWxsX2FyZWFMaW5lVmFsdWUnKVxyXG4gICAgICAgICAgICAgICAgICAgLnRleHQoKHN3YXJtRGF0YVt0bXBdWydjb252ZXhfaHVsbF9hcmVhJ10pICsgJ21twrInKTtcclxuICAgICAgICAgICAgICAgZDMuc2VsZWN0KCcjc3BlZWRMaW5lVmFsdWUnKVxyXG4gICAgICAgICAgICAgICAgICAgLnRleHQoc3dhcm1EYXRhW3RtcF1bJ3NwZWVkJ10gKyAnbW0vcycpO1xyXG4gICAgICAgICAgICAgICBkMy5zZWxlY3QoJyNhY2NlbGVyYXRpb25MaW5lVmFsdWUnKVxyXG4gICAgICAgICAgICAgICAgICAgLnRleHQoc3dhcm1EYXRhW3RtcF1bJ2FjY2VsZXJhdGlvbiddICsgJ21tL3PCsicpO1xyXG4gICAgICAgICAgICAgICBkMy5zZWxlY3QoJyNkaXN0YW5jZV9jZW50cm9pZExpbmVWYWx1ZScpXHJcbiAgICAgICAgICAgICAgICAgICAudGV4dChzd2FybURhdGFbdG1wXVsnZGlzdGFuY2VfY2VudHJvaWQnXSArICdtbScpO1xyXG4gICAgICAgICAgICAgICBkMy5zZWxlY3QoJyNkaXJlY3Rpb25MaW5lVmFsdWUnKVxyXG4gICAgICAgICAgICAgICAgICAgLnRleHQoc3dhcm1EYXRhW3RtcF1bJ2RpcmVjdGlvbiddICsgJ8KwJyk7XHJcbiAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnI3BvbGFyaXNhdGlvbkxpbmVWYWx1ZScpXHJcbiAgICAgICAgICAgICAgICAgICAudGV4dChzd2FybURhdGFbdG1wXVsncG9sYXJpc2F0aW9uJ10pO1xyXG4gICAgICAgICAgIH1cclxuICAgICAgICAgICBkMy5zZWxlY3QoJyNsaW5lQ2hhcnRUaW1lTGluZScpXHJcbiAgICAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyB6b29tRnVuY3Rpb24odG1wKSArICcsMCknKTtcclxuICAgICAgIH1cclxuICAgfVxyXG4gICByZXR1cm5Db2xvclNjYWxlKCkge1xyXG4gICAgICAgLy9pZiBsaW5lYXIgaXMgY2hvb3NlblxyXG4gICAgICAgaWYgKHRoaXMuY29sb3JTY2FsZVsndHlwZSddID09PSAnTGluZWFyJykge1xyXG4gICAgICAgICAgIHJldHVybiBkMy5zY2FsZUxpbmVhcigpXHJcbiAgICAgICAgICAgICAgIC5kb21haW4oXHJcbiAgICAgICAgICAgICAgICAgICBkYXRhU2V0UGVyY2VudGlsZVt0aGlzLmFjdGl2ZVNjYWxlXVxyXG4gICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgIC5yYW5nZSh0aGlzLmNvbG9yU2NhbGVbJ2NvbG9yJ10pO1xyXG4gICAgICAgfSAvL1RocmVzaG9sZCBjb2xvciBzY2FsZVxyXG4gICAgICAgZWxzZSBpZiAodGhpcy5jb2xvclNjYWxlWyd0eXBlJ10gPT09ICdUaHJlc2hvbGQnKSB7XHJcbiAgICAgICAgICAgcmV0dXJuIGQzLnNjYWxlVGhyZXNob2xkKClcclxuICAgICAgICAgICAgICAgLmRvbWFpbihcclxuICAgICAgICAgICAgICAgICAgIGRhdGFTZXRQZXJjZW50aWxlW3RoaXMuYWN0aXZlU2NhbGVdXHJcbiAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgLnJhbmdlKHRoaXMuY29sb3JTY2FsZVsnY29sb3InXSk7XHJcbiAgICAgICB9XHJcbiAgIH1cclxuICAgaW5pdENvbG9yUGlja2VyKCkge1xyXG4gICAgICAgZDMuc2VsZWN0KCcuY29sb3JzLWJvZHknKVxyXG4gICAgICAgICAgIC5zZWxlY3RBbGwoJy5wYWxldHRlJylcclxuICAgICAgICAgICAuZGF0YShkMy5lbnRyaWVzKGNvbG9yYnJld2VyKSlcclxuICAgICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgIC5hcHBlbmQoJ3NwYW4nKVxyXG4gICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdwYWxldHRlJylcclxuICAgICAgICAgICAuYXR0cigndGl0bGUnLCAoZCk9PntcclxuICAgICAgICAgICAgICAgcmV0dXJuIGQua2V5O1xyXG4gICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgLm9uKCdjbGljaycsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAvLyBoaWdodGxpZ2h0IHRoZSByaWdodCBwYWxldHRlXHJcbiAgICAgICAgICAgICAgICQoJy5wYWxldHRlJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICQoJy5wYWxldHRlW3RpdGxlPVwiJyArIGQua2V5ICsgJ1wiXScpLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICB0aGlzLmNvbG9yU2NhbGUuY29sb3IgPSBjb2xvcmJyZXdlcltkLmtleV07XHJcbiAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlbGVnZW5kKCk7XHJcbiAgICAgICAgICAgICAgIGlmICghJCgnI3BsYXktYnV0dG9uJylcclxuICAgICAgICAgICAgICAgICAgIC5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAgICAgIC8vZ28gYmFjayBvbmUgc2Vjb25kIGFuZCBkcmF3IHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAgICAgICAgICAgICAvL3RoaXMgYXBwbHlzIHRoZSBjaGFuZ2VzXHJcbiAgICAgICAgICAgICAgICAgICB0aGlzLmRlY0luZGV4VGltZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICB9KVxyXG4gICAgICAgICAgIC5zZWxlY3RBbGwoJy5zd2F0Y2gnKVxyXG4gICAgICAgICAgIC5kYXRhKChkKT0+e1xyXG4gICAgICAgICAgICAgICByZXR1cm4gZC52YWx1ZTtcclxuICAgICAgICAgICB9KVxyXG4gICAgICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgICAgLmFwcGVuZCgnc3BhbicpXHJcbiAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3N3YXRjaCcpXHJcbiAgICAgICAgICAgLnN0eWxlKCdiYWNrZ3JvdW5kLWNvbG9yJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgIHJldHVybiBkO1xyXG4gICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgIC8vIGhpZ2hsaWdodCB0aGUgc2VsZWN0ZWQgY29sb3Igc2NoZW1lXHJcbiAgICAgICAkKCcucGFsZXR0ZVt0aXRsZT1cIkJ1WWxCdVwiXScpLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICB9XHJcbiAgIGNoYW5nZWxlZ2VuZCgpIHtcclxuICAgICAgIGxldCBsZWdlbmQ7IC8vIHRoZSBjb2xvciBsZWdlbmRcclxuICAgICAgIGxldCBsZWdlbmRUZXh0OyAvLyBjb2xvciBsZWdlbmQgdGV4dFxyXG4gICAgICAgLy8gdmFycyBmb3IgdGhlIGxlZ2VuZFxyXG4gICAgICAgbGV0IGxlZ2VuZFN3YXRjaFdpZHRoID0gNTA7XHJcbiAgICAgICBsZXQgbGVnZW5kU3dhdGNoSGVpZ2h0ID0gMjA7XHJcbiAgICAgICAvLyBsZXQgZGlmZmVyZW50Q29sb3JzID0gMDtcclxuXHJcblxyXG4gICAgICAgLy8gU2hvdyB0aGUgc3ZnIGZpcnN0IG9mIGFsbFxyXG4gICAgICAgJCgnI21haW4tdmlzLWxlZ2VuZC1kaXYnKVxyXG4gICAgICAgICAgIC5zaG93KCk7XHJcblxyXG4gICAgICAgLy9jaGFuZ2UgdGhlIGNvbG9ycyBvZiB0aGUgYW5pbWFsc1xyXG4gICAgICAgaWYgKHRoaXMuYWN0aXZlU2NhbGUgIT09ICdibGFjaycpIHtcclxuICAgICAgICAgICB2YXIgdG1wU2NhbGUgPSB0aGlzLnJldHVybkNvbG9yU2NhbGUoKTtcclxuICAgICAgICAgICAvLyBvbmNlIHRoZSBmaWxsIGZvciB0aGUgaGVhZHMgYW5kIHRoZSBzdHJva2UgZm9yIHRoZSBwYXRoXHJcbiAgICAgICAgICAgbGVnZW5kID0gdGhpcy5zdmdMZWdlbmQuc2VsZWN0QWxsKCdyZWN0LmxlZ2VuZCcpXHJcbiAgICAgICAgICAgICAgIC5kYXRhKHRtcFNjYWxlLnJhbmdlKCkpO1xyXG5cclxuICAgICAgICAgICBsZWdlbmRUZXh0ID0gdGhpcy5zdmdMZWdlbmQuc2VsZWN0QWxsKCd0ZXh0LmxlZ2VuZC10ZXh0JylcclxuICAgICAgICAgICAgICAgLmRhdGEodG1wU2NhbGUuZG9tYWluKCkpO1xyXG4gICAgICAgICAgIC8vIGRpZmZlcmVudENvbG9ycyA9IHRtcFNjYWxlLnJhbmdlKClcclxuICAgICAgICAgICAvLyAubGVuZ3RoO1xyXG4gICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICBsZWdlbmQgPSB0aGlzLnN2Z0xlZ2VuZC5zZWxlY3RBbGwoJ3JlY3QubGVnZW5kJylcclxuICAgICAgICAgICAgICAgLmRhdGEoW10pO1xyXG4gICAgICAgICAgIGxlZ2VuZFRleHQgPSB0aGlzLnN2Z0xlZ2VuZC5zZWxlY3RBbGwoJ3RleHQubGVnZW5kLXRleHQnKVxyXG4gICAgICAgICAgICAgICAuZGF0YShbXSk7XHJcbiAgICAgICAgICAgLy8gaGlkZSB0aGUgZGl2IGFnYWluXHJcbiAgICAgICAgICAgJCgnI21haW4tdmlzLWxlZ2VuZC1kaXYnKVxyXG4gICAgICAgICAgICAgICAuaGlkZSgpO1xyXG4gICAgICAgfVxyXG5cclxuICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLSBMZWdlbmQgc3dhdGNoZXMgIC0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgIC8vIFVQREFURSAtIGxlZ2VuZFxyXG4gICAgICAgbGVnZW5kLnN0eWxlKCdmaWxsJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgIHJldHVybiBkO1xyXG4gICAgICAgfSk7XHJcbiAgICAgICAvLyBFTlRFUiAtIGxlZ2VuZFxyXG4gICAgICAgbGVnZW5kXHJcbiAgICAgICAgICAgLmVudGVyKClcclxuICAgICAgICAgICAuYXBwZW5kKCdyZWN0JylcclxuICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGVnZW5kJylcclxuICAgICAgICAgICAuYXR0cignd2lkdGgnLCBsZWdlbmRTd2F0Y2hXaWR0aClcclxuICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgbGVnZW5kU3dhdGNoSGVpZ2h0KVxyXG4gICAgICAgICAgIC5hdHRyKCd5JywgMClcclxuICAgICAgICAgICAuYXR0cigneCcsIGZ1bmN0aW9uKGQsIGkpIHtcclxuICAgICAgICAgICAgICAgcmV0dXJuIChsZWdlbmRTd2F0Y2hXaWR0aCArIGkgKiBsZWdlbmRTd2F0Y2hXaWR0aCkgKyAncHgnO1xyXG4gICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgLnN0eWxlKCdmaWxsJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgICAgICB9KTtcclxuICAgICAgIC8vIEVYSVQgLSBsZWdlbmRcclxuICAgICAgIGxlZ2VuZC5leGl0KClcclxuICAgICAgICAgICAucmVtb3ZlKCk7XHJcblxyXG4gICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tIFRleHQgIC0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgIC8vIFVQREFURSAtIGxlZ2VuZCB0ZXh0XHJcbiAgICAgICBsZWdlbmRUZXh0LnRleHQoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgIHJldHVybiBNYXRoLmNlaWwoZCAqIDIpIC8gMjtcclxuICAgICAgIH0pO1xyXG4gICAgICAgLy8gRU5URVIgLSBsZWdlbmQgdGV4dFxyXG4gICAgICAgbGVnZW5kVGV4dFxyXG4gICAgICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgICAgLmFwcGVuZCgndGV4dCcpXHJcbiAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xlZ2VuZC10ZXh0JylcclxuICAgICAgICAgICAuYXR0cigneScsIDIgKiBsZWdlbmRTd2F0Y2hIZWlnaHQpXHJcbiAgICAgICAgICAgLmF0dHIoJ3gnLCBmdW5jdGlvbihkLCBpKSB7XHJcbiAgICAgICAgICAgICAgIC8vIHBsdXMgNSBoYXMgdG8gYmUgY2hhbmdlZFxyXG4gICAgICAgICAgICAgICByZXR1cm4gKGxlZ2VuZFN3YXRjaFdpZHRoICsgaSAqIGxlZ2VuZFN3YXRjaFdpZHRoICsgNSkgKyAncHgnO1xyXG4gICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgLnRleHQoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICByZXR1cm4gTWF0aC5jZWlsKGQgKiAyKSAvIDI7XHJcbiAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgLy8gRVhJVCAtIGxlZ2VuZCB0ZXh0XHJcbiAgICAgICBsZWdlbmRUZXh0LmV4aXQoKVxyXG4gICAgICAgICAgIC5yZW1vdmUoKTtcclxuICAgfVxyXG5cclxuICAgZHJhdygpIHtcclxuXHJcbiAgICAgICAvL3VwZGF0ZSB0aW1lIHRvIHdhaXQgYWthIHNwZWVkIG9mIHJlcGxheVxyXG4gICAgICAgbGV0IHRpbWVUb1dhaXQgPSAkKCdpbnB1dFt0eXBlPVwicmFkaW9cIl0uZ3JvdXAtcGxheWJhY2stcmF0ZTpjaGVja2VkJylcclxuICAgICAgICAgICAudmFsKCk7XHJcbiAgICAgICAvL3NjYWxlIHRoZSBzaXplIGJ5IHRoaXMgbnVtYmVyXHJcbiAgICAgICBsZXQgYW5pbWFsU2NhbGUgPSAkKCdpbnB1dFt0eXBlPVwicmFkaW9cIl0uZ3JvdXAtc2l6ZTpjaGVja2VkJylcclxuICAgICAgICAgICAudmFsKCk7XHJcblxyXG4gICAgICAgLy9nZXQgdGhlIG5leHQgYW5pbWFsc1xyXG4gICAgICAgdGhpcy5hcnJheUFuaW1hbHMgPSBkYXRhc2V0LmZpbHRlcigoZCk9PntcclxuICAgICAgICAgICByZXR1cm4gZFsndCddID09PSB0aGlzLmluZGV4VGltZTtcclxuICAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgIC8vdGhlIHRpbWVvdXQgaXMgc2V0IGFmdGVyIG9uZSB1cGRhdGUgMzAgbXNcclxuICAgICAgIHNldFRpbWVvdXQoKCk9PntcclxuICAgICAgICAgICAgICAgLy8gZHJhdyBoaWVyYXJjaHlcclxuICAgICAgICAgICAgICAgdGhpcy5kcmF3RGVuZHJvZ3JhbSgpO1xyXG4gICAgICAgICAgICAgICAvL2NoYW5nZSB0aGUgdGltZSBmcmFtZSB0ZXh0XHJcbiAgICAgICAgICAgICAgIHRoaXMuc3ZnQ29udGFpbmVyLnNlbGVjdCgnLmZyYW1lLXRleHQnKVxyXG4gICAgICAgICAgICAgICAgICAgLnRleHQoTWF0aC5mbG9vcih0aGlzLmluZGV4VGltZSAvIDE1MDApICUgNjAgKyAnOicgKyBNYXRoLmZsb29yKHRoaXMuaW5kZXhUaW1lIC8gcGFyYW1ldGVyc1snZnBzJ10pICUgNjAgKyAnOjonICsgdGhpcy5pbmRleFRpbWUgJSBwYXJhbWV0ZXJzWydmcHMnXSk7XHJcbiAgICAgICAgICAgICAgIC8vIGlmIGEgc2Vjb25kIGhhcyBjaGFuZ2VkIG1vdmUgdGhlIHNsaWRlclxyXG4gICAgICAgICAgICAgICBpZiAodGhpcy5pbmRleFRpbWUgJSBwYXJhbWV0ZXJzWydmcHMnXSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgc2V0VGltZVNsaWRlcih0aGlzLmluZGV4VGltZSk7XHJcbiAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgIGxldCBzdmdBbmltYWxzID0gdGhpcy50YW5rLnNlbGVjdEFsbCgnZy5hbmltYWwnKVxyXG4gICAgICAgICAgICAgICAgICAgLmRhdGEodGhpcy5hcnJheUFuaW1hbHMpO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gTmV0d29yayB2aXNcclxuICAgICAgICAgICAgICAgbGV0IG5ldHdvcmtWaXM7XHJcbiAgICAgICAgICAgICAgIC8vIGxldCBuZXR3b3JrVmlzQmFrO1xyXG4gICAgICAgICAgICAgICBpZiAodGhpcy5pbmRleFRpbWUgaW4gbmV0d29ya0RhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgIGxldCBuZXR3b3JrID0gbmV0d29ya0RhdGFbdGhpcy5pbmRleFRpbWVdO1xyXG4gICAgICAgICAgICAgICAgICAgLy8gcmVzZXQgdGhlIGdyb3VwIHN0YW5kYXJkIGRldmlhdGlvbiBmb3IgdGhlIGhpZXJhcmhjeVxyXG4gICAgICAgICAgICAgICAgICAgLy8gbmVlZGVkIGZvciBjb2xvcmluZyBvZiB0aGUgZGVuZHJvZ3JhbSBub2RlcyAodmFyaWFjbmUpXHJcbiAgICAgICAgICAgICAgICAgICByZXNldGhpZXJhcmNoeUdyb3VwU3RkZXYoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAvLyBkaXNwbGF5IHRoZSB3aG9sZSBuZXR3b3JrXHJcbiAgICAgICAgICAgICAgICAgICBuZXR3b3JrID0gbmV0d29yay5tYXAoKGl0ZW0pPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFuaW1hbDEgPSB0aGlzLmFycmF5QW5pbWFscy5maWx0ZXIoZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmpbJ2EnXSA9PT0gaXRlbVsncyddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGxldCBhbmltYWwyID0gdGhpcy5hcnJheUFuaW1hbHMuZmlsdGVyKGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqWydhJ10gPT09IGl0ZW1bJ2UnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAnbm9kZTEnOiBhbmltYWwxWydhJ10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICdub2RlMic6IGFuaW1hbDJbJ2EnXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3N0YXJ0JzogYW5pbWFsMVsncCddLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAnZW5kJzogYW5pbWFsMlsncCddLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAndmFsJzogaXRlbVsndiddXHJcbiAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgIG5ldHdvcmsuZm9yRWFjaChmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgJCgoJyNtYy0nICsgZFsnbm9kZTEnXSArICctJyArIGRbJ25vZGUyJ10pKS5jc3MoJ2ZpbGwnLCBuZXR3b3JrQ29sb3JTY2FsZShkWyd2YWwnXSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICQoKCcjbWMtJyArIGRbJ25vZGUyJ10gKyAnLScgKyBkWydub2RlMSddKSkuY3NzKCdmaWxsJywgbmV0d29ya0NvbG9yU2NhbGUoZFsndmFsJ10pKTtcclxuICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgIGlmIChuZXR3b3JrQXV0bykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGxldCB0bXBBcnJheSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmV0d29yay5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBBcnJheS5wdXNoKG5ldHdvcmtbaV1bJ3ZhbCddKTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgc2V0TmV0d29yTGltaXQocGVyY2VudGlsZXModG1wQXJyYXkpKTtcclxuICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgIG5ldHdvcmsgPSBuZXR3b3JrLmZpbHRlcihmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRbJ3ZhbCddIDw9ICgxIC0gbmV0d29ya0xpbWl0KTtcclxuICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgLy8gREFUQSBKT0lOXHJcbiAgICAgICAgICAgICAgICAgICBuZXR3b3JrVmlzID0gdGhpcy50YW5rLnNlbGVjdCgnI25ldHdvcmstZ3JvdXAnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5zZWxlY3RBbGwoJ2xpbmUubmV0d29yay1lZGdlcycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmRhdGEobmV0d29yayk7XHJcbiAgICAgICAgICAgICAgICAgICAvLyBVUERBVEVcclxuICAgICAgICAgICAgICAgICAgIG5ldHdvcmtWaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneDEnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkWydzdGFydCddWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3kxJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLWRbJ3N0YXJ0J11bMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneDInLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkWydlbmQnXVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd5MicsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC1kWydlbmQnXVsxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2UnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXR3b3JrQ29sb3JTY2FsZSgoMSAtIGRbJ3ZhbCddKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlLW9wYWNpdHknLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAxIC0gZFsndmFsJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAvL0VOVEVSXHJcblxyXG4gICAgICAgICAgICAgICAgICAgbmV0d29ya1Zpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgnbGluZScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ25ldHdvcmstZWRnZXMnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4MScsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRbJ3N0YXJ0J11bMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneTEnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtZFsnc3RhcnQnXVsxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4MicsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRbJ2VuZCddWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3kyJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLWRbJ2VuZCddWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZScsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldHdvcmtDb2xvclNjYWxlKGRbJ3ZhbCddKTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2Utb3BhY2l0eScsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRbJ3ZhbCddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgIG5ldHdvcmtWaXMgPSB0aGlzLnRhbmsuc2VsZWN0QWxsKCdsaW5lLm5ldHdvcmstZWRnZXMnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5kYXRhKFtdKTtcclxuXHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgLy8gRVhJVCAtIG5ldHdvcmtcclxuICAgICAgICAgICAgICAgbmV0d29ya1Zpcy5leGl0KClcclxuICAgICAgICAgICAgICAgICAgIC5yZW1vdmUoKTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIGRlbGF1bmF5IHRyaWFuZ3VsYXRpb25cclxuICAgICAgICAgICAgICAgLy8gREFUQSBKT0lOICAtIHRyaWFuZ3VsYXRpb25cclxuICAgICAgICAgICAgICAgdmFyIHRyaWFuZ3VsYXRpb247XHJcbiAgICAgICAgICAgICAgIGlmICgkKCcjZHJhdy10cmlhbmd1bGF0aW9uJylcclxuICAgICAgICAgICAgICAgICAgIC5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhbc3dhcm1EYXRhW3RoaXMuaW5kZXhUaW1lXVsndHJpYW5ndWxhdGlvbiddXSk7XHJcbiAgICAgICAgICAgICAgICAgICB0cmlhbmd1bGF0aW9uID0gdGhpcy50YW5rLnNlbGVjdCgnI2RlbGF1bmF5LXRyaWFuZ3VsYXRpb24tZ3JvdXAnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5zZWxlY3RBbGwoJ3BhdGguZGVsYXVuYXktdHJpYW5ndWxhdGlvbicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmRhdGEoW3N3YXJtRGF0YVt0aGlzLmluZGV4VGltZV1bJ3RyaWFuZ3VsYXRpb24nXV0pO1xyXG4gICAgICAgICAgICAgICAgICAgLy8gVVBEQVRFIC0gdHJpYW5ndWxhdGlvblxyXG4gICAgICAgICAgICAgICAgICAgdHJpYW5ndWxhdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdkJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgLy9FTlRFUiAtIHRyaWFuZ3VsYXRpb25cclxuICAgICAgICAgICAgICAgICAgIHRyaWFuZ3VsYXRpb24uZW50ZXIoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJ3BhdGgnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdkZWxhdW5heS10cmlhbmd1bGF0aW9uJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignZCcsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgIHRyaWFuZ3VsYXRpb24gPSB0aGlzLnRhbmsuc2VsZWN0QWxsKCdwYXRoLmRlbGF1bmF5LXRyaWFuZ3VsYXRpb24nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5kYXRhKFtdKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAvLyBFWElUIC0gdHJpYW5ndWxhdGlvblxyXG4gICAgICAgICAgICAgICB0cmlhbmd1bGF0aW9uLmV4aXQoKVxyXG4gICAgICAgICAgICAgICAgICAgLnJlbW92ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gVm9yb25vaVxyXG4gICAgICAgICAgICAgICAvLyBEQVRBIEpPSU4gIC0gdm9yb25vaVxyXG4gICAgICAgICAgICAgICB2YXIgdm9yb25vaTtcclxuICAgICAgICAgICAgICAgaWYgKCQoJyNkcmF3LXZvcm9ub2knKVxyXG4gICAgICAgICAgICAgICAgICAgLmlzKCc6Y2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMuaW5kZXhUaW1lKTtcclxuICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2hvJyk7XHJcbiAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFtzd2FybURhdGFbdGhpcy5pbmRleFRpbWVdWyd2b3Jvbm9pJ11dKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvL2FwcGVuZCB0aGUgZ3JvdXAgZm9yIHRoZSB2b3Jvbm9pIHBhdGhzXHJcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGEgd29ya2Fyb3VuZCB0byBhdm9pZCB2b3Jvbm9pIHN0b3BwaW5nIGF0IHNwbGl0IGlmIGVtcHR5IHZhbHVlLlxyXG4gICAgICAgICAgICAgICAgaWYgKCEoJ3Zvcm9ub2knIGluIHN3YXJtRGF0YVswXSkpe1xyXG4gICAgICAgICAgICAgICAgICAgdm9yb25vaSA9IHRoaXMudGFua1xyXG4gICAgICAgICAgICAgICAgICAgICAgIC5zZWxlY3QoJyN2b3Jub2ktZ3JvdXAnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5zZWxlY3RBbGwoJ3BhdGgudm9yb25vaScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmRhdGEoW3N3YXJtRGF0YVt0aGlzLmluZGV4VGltZV1bJ3Zvcm9ub2knXV0pXHJcbiAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICB2b3Jvbm9pID0gdGhpcy50YW5rXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnNlbGVjdCgnI3Zvcm5vaS1ncm91cCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnNlbGVjdEFsbCgncGF0aC52b3Jvbm9pJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuZGF0YShzd2FybURhdGFbdGhpcy5pbmRleFRpbWVdWyd2b3Jvbm9pJ10uc3BsaXQoJzsnKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhzd2FybURhdGFbdGhpcy5pbmRleFRpbWVdWyd2b3Jvbm9pJ10pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgIC8vIFVQREFURSAtIHZvcm9ub2lcclxuICAgICAgICAgICAgICAgICAgIHZvcm9ub2lcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignZCcsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgIC8vRU5URVIgLSB2b3Jvbm9pXHJcbiAgICAgICAgICAgICAgICAgICB2b3Jvbm9pLmVudGVyKClcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCdwYXRoJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAndm9yb25vaScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2QnLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgdm9yb25vaSA9IHRoaXMudGFuay5zZWxlY3QoJyN2b3Jub2ktZ3JvdXAnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5zZWxlY3RBbGwoJ3BhdGgudm9yb25vaScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmRhdGEoW10pO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIC8vIEVYSVQgLSB2b3Jvbm9pXHJcbiAgICAgICAgICAgICAgIHZvcm9ub2kuZXhpdCgpXHJcbiAgICAgICAgICAgICAgICAgICAucmVtb3ZlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAvL0VOVEVSIC0gYXBwZW5kIHRoZSBhbmltYWwgZ3JvdXBzXHJcbiAgICAgICAgICAgICAgIGxldCBhbmltYWxHcm91cGluZ3MgPSBzdmdBbmltYWxzXHJcbiAgICAgICAgICAgICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgICAgICAgICAgLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnYW5pbWFsJylcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnYW5pbWFsLScgKyBkWydhJ107XHJcbiAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIEFwcGVuZCB0aGUgY2lyY2xlcyBmb3IgZWFjaCBhbmltYWwgdG8gdGhlIGFuaW1hbGdyb3VwXHJcbiAgICAgICAgICAgICAgIGFuaW1hbEdyb3VwaW5ncy5hcHBlbmQoJ2NpcmNsZScpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cigncicsIDEuNSAqIGFuaW1hbFNjYWxlKVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2N4JywgKGQpPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkWydwJ11bMF07XHJcbiAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2N5JywgKGQpPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtZFsncCddWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgIC5vbignbW91c2VvdmVyJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgdG9vbHRpcEZ1bmN0aW9uKGQpO1xyXG4gICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgIC5vbignbW91c2VvdXQnLCAoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRyYW5zaXRpb24oKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24oNTAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ29wYWNpdHknLCAwKTtcclxuICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAvLyBhZGQgb24gY2xpY2sgZm9yIHRoZSBhY3RpdmUgZmlzaHNcclxuICAgICAgICAgICAgICAgICAgIC5vbignY2xpY2snLCAoZCk9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlQW5pbWFscy5pbmNsdWRlcyhkWydhJ10pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlQW5pbWFscyA9IHRoaXMuYWN0aXZlQW5pbWFscy5maWx0ZXIoaXRlbSA9PiBpdGVtICE9PSBkWydhJ10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlQW5pbWFscy5wdXNoKGRbJ2EnXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgIGlmICghJCgnI3BsYXktYnV0dG9uJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAvL3RoaXMgYXBwbHlzIHRoZSBjaGFuZ2VzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZXhUaW1lLS07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gVVBEQVRFIC0gYW5pbWFscyBjaXJjbGVzXHJcbiAgICAgICAgICAgICAgIHN2Z0FuaW1hbHMuc2VsZWN0KCdjaXJjbGUnKVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2N4JywgKGQpPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkWydwJ11bMF07XHJcbiAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2N5JywgKGQpPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtZFsncCddWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdyJywgYW5pbWFsU2NhbGUpO1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhzdmdBbmltYWxzLnNlbGVjdCgnY2lyY2xlJykpO1xyXG4gICAgICAgICAgICAgICAvLyBBcHBlbmQgZm9yIGVhY2ggZ3JvdXAgdGhlIGFycm93LCBuZWVkZWQgZm9yIGNvbG9yaW5nXHJcbiAgICAgICAgICAgICAgIGFuaW1hbEdyb3VwaW5ncy5hcHBlbmQoJ3N2ZzpkZWZzJylcclxuICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJ3N2ZzptYXJrZXInKVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2lkJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdhcnJvdy1tYXJrZXItJyArIGRbJ2EnXTtcclxuICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cigncmVmWCcsIDIpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cigncmVmWScsIDYpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignbWFya2VyV2lkdGgnLCAxMylcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdtYXJrZXJIZWlnaHQnLCAxMylcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdvcmllbnQnLCAnYXV0bycpXHJcbiAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCdzdmc6cGF0aCcpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignZCcsICdNMiwyIEwyLDExIEwxMCw2IEwyLDInKTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIEFwcGVuZCB0aGUgbGluZSBmb3IgdGhlIGRpcmVjdGlvbiBhcnJvd1xyXG4gICAgICAgICAgICAgICBhbmltYWxHcm91cGluZ3NcclxuICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJ2xpbmUnKVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2Fycm93JylcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdtYXJrZXItZW5kJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICd1cmwoI2Fycm93LW1hcmtlci0nICsgZFsnYSddICsgJyknO1xyXG4gICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAvL2V4ZWN1dGUgb25seSB3aGVuIGRyYXcgZGlyZWN0aW9uIGJ1dHRvbiBpcyBjaGVja2VkXHJcbiAgICAgICAgICAgICAgIGlmICgkKCcjZHJhdy1kaXJlY3Rpb24nKVxyXG4gICAgICAgICAgICAgICAgICAgLmlzKCc6Y2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAvLyBVUERBVEUgYW5pbWFsIGRpcmVjdGlvbiBhcnJvd1xyXG4gICAgICAgICAgICAgICAgICAgc3ZnQW5pbWFscy5zZWxlY3QoJ2xpbmUnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4MScsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZFsncCddWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3kxJywgKGQpPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLWRbJ3AnXVsxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4MicsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGRbJ3AnXVswXSArIDIgKiBhbmltYWxTY2FsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneTInLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgtZFsncCddWzFdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdyb3RhdGUoJyArIC1kWydkaXJlY3Rpb24nXSArICcgJyArIGRbJ3AnXVswXSArICcgJyArIC1kWydwJ11bMV0gKyAnKSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAvLyBoaWRlIHRoZSBhcnJvd3NcclxuICAgICAgICAgICAgICAgICAgICQoJy5hcnJvdycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgLy8gRVhJVCAtIHRoZSBncm91cHNcclxuICAgICAgICAgICAgICAgc3ZnQW5pbWFscy5leGl0KClcclxuICAgICAgICAgICAgICAgICAgIC5yZW1vdmUoKTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vQ29udmV4IGh1bGxcclxuICAgICAgICAgICAgICAgaWYgKCQoJyNkcmF3LWNvbnZleC1odWxsJylcclxuICAgICAgICAgICAgICAgICAgIC5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgLy8gREFUQSBKT0lOIC0gcGF0aHNcclxuICAgICAgICAgICAgICAgICAgIHZhciBodWxsUGF0aCA9IHRoaXMudGFuay5zZWxlY3RBbGwoJ3BhdGguaHVsbC1wYXRoJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuZGF0YShbc3dhcm1EYXRhW3RoaXMuaW5kZXhUaW1lXVsnY29udmV4X2h1bGwnXV0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgIC8vIFVQREFURSAtIGh1bGwgcGF0aFxyXG4gICAgICAgICAgICAgICAgICAgaHVsbFBhdGhcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignZCcsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAvLyBFTlRFUiAtIGh1bGwgcGF0aHNcclxuICAgICAgICAgICAgICAgICAgIGh1bGxQYXRoLmVudGVyKClcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCdwYXRoJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnaHVsbC1wYXRoJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignZCcsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAvLyBkcmF3IG5vIGh1bGxcclxuICAgICAgICAgICAgICAgICAgIGh1bGxQYXRoID0gdGhpcy50YW5rLnNlbGVjdCgncGF0aC5odWxsLXBhdGgnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5kYXRhKFtdKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAvLyBFWElUIC0gaHVsbCBwYXRoc1xyXG4gICAgICAgICAgICAgICBodWxsUGF0aC5leGl0KClcclxuICAgICAgICAgICAgICAgICAgIC5yZW1vdmUoKTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vY2hhbmdlIHRoZSBjb2xvcnMgb2YgdGhlIGZpc2hcclxuICAgICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlU2NhbGUgIT09ICdibGFjaycpIHtcclxuICAgICAgICAgICAgICAgICAgIC8vIG9uY2UgdGhlIGZpbGwgZm9yIHRoZSBoZWFkcyBhbmQgdGhlIHN0cm9rZSBmb3IgdGhlIHBhdGhcclxuICAgICAgICAgICAgICAgICAgIHZhciB0bXBTY2FsZSA9IHRoaXMucmV0dXJuQ29sb3JTY2FsZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgc3ZnQW5pbWFsc1xyXG4gICAgICAgICAgICAgICAgICAgICAgIC50cmFuc2l0aW9uKClcclxuICAgICAgICAgICAgICAgICAgICAgICAuZHVyYXRpb24oMTApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdmaWxsJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0bXBTY2FsZShkW3RoaXMuYWN0aXZlU2NhbGVdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2UnLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRtcFNjYWxlKGRbdGhpcy5hY3RpdmVTY2FsZV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgLy9jb2xvciBldmVyeSBmaXNoIGJsYWNrXHJcbiAgICAgICAgICAgICAgICAgICBzdmdBbmltYWxzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdmaWxsJywgJyMwMDAnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2UnLCAnIzAwMCcpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgIGlmICghJC5pc0VtcHR5T2JqZWN0KG1ldGFkYXRhQ29sb3IpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMobWV0YWRhdGFDb2xvcikuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgZDNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZWxlY3QoJyNhbmltYWwtJyArIGtleSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zdHlsZSgnZmlsbCcsIG1ldGFkYXRhQ29sb3Jba2V5XSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2UnLCBtZXRhZGF0YUNvbG9yW2tleV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAvL2NoYW5nZSBvcGFjdGl5IGlmIHRoZSBmaXNoIGlzIHNlbGVjdGVkXHJcbiAgICAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZUFuaW1hbHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICBzdmdBbmltYWxzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZUFuaW1hbHMuaW5jbHVkZXMoZFsnYSddKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMC4yNTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgaWYgKCQoJyNyZW1vdmUtYWN0aXZlLXNlbGVjdGVkLWJ1dHRvbicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmlzKCc6ZGlzYWJsZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICQoJyNyZW1vdmUtYWN0aXZlLXNlbGVjdGVkLWJ1dHRvbicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAkKCcjdmlzdWFsLXBhcmFtZXRlci1idXR0b24nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAvLyBpZiB0cmFja2luZyBpcyBvblxyXG4gICAgICAgICAgICAgICAgICAgaWYgKHRyYWNraW5nQm9vbGVhbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGFkZFRyYWNrZWREYXRhKHRoaXMuYXJyYXlBbmltYWxzWzBdWyd0J10sIHRoaXMuYWN0aXZlQW5pbWFscyk7XHJcbiAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICBpZiAoISQoJyNyZW1vdmUtYWN0aXZlLXNlbGVjdGVkLWJ1dHRvbicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmlzKCc6ZGlzYWJsZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICQoJyNyZW1vdmUtYWN0aXZlLXNlbGVjdGVkLWJ1dHRvbicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICQoJyN2aXN1YWwtcGFyYW1ldGVyLWJ1dHRvbicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgLy8gbm9ybWFsIG9wYWNpdHlcclxuICAgICAgICAgICAgICAgICAgIHN2Z0FuaW1hbHNcclxuICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ29wYWNpdHknLCAxKTtcclxuICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgLy9kcmF3IGNlbnRyb2lkXHJcbiAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnLmNlbnRyb2lkJylcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjeCcsICgpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgaWYgKCdjZW50cm9pZCcgaW4gc3dhcm1EYXRhWzBdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzd2FybURhdGFbdGhpcy5pbmRleFRpbWVdWydjZW50cm9pZCddWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignY3knLCAoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGlmICgnY2VudHJvaWQnIGluIHN3YXJtRGF0YVswXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLXN3YXJtRGF0YVt0aGlzLmluZGV4VGltZV1bJ2NlbnRyb2lkJ11bMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgIGlmICgkKCcjZHJhdy1kaXJlY3Rpb24nKS5pcygnOmNoZWNrZWQnKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgc3dhcm1EYXRhW3RoaXMuaW5kZXhUaW1lXS5jZW50cm9pZCAmJlxyXG4gICAgICAgICAgICAgICAgICAgJCgnI2RyYXctY2VudHJvaWQnKS5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KCcjY2VudHJvaWQtbGluZScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ2hpZGRlbicsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgIC8vIFVQREFURSBhbmltYWwgZGlyZWN0aW9uIGFycm93XHJcbiAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QoJyNjZW50cm9pZC1saW5lJylcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneDEnLCAoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3dhcm1EYXRhW3RoaXMuaW5kZXhUaW1lXVsnY2VudHJvaWQnXVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd5MScsICgpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtc3dhcm1EYXRhW3RoaXMuaW5kZXhUaW1lXVsnY2VudHJvaWQnXVsxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4MicsICgpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoc3dhcm1EYXRhW3RoaXMuaW5kZXhUaW1lXVsnY2VudHJvaWQnXVswXSArIDIgKiBhbmltYWxTY2FsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneTInLCAoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLXN3YXJtRGF0YVt0aGlzLmluZGV4VGltZV1bJ2NlbnRyb2lkJ11bMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgKCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdyb3RhdGUoJyArIC1zd2FybURhdGFbdGhpcy5pbmRleFRpbWVdWydkaXJlY3Rpb24nXSArICcgJyArIHN3YXJtRGF0YVt0aGlzLmluZGV4VGltZV1bJ2NlbnRyb2lkJ11bMF0gKyAnICcgKyAtc3dhcm1EYXRhW3RoaXMuaW5kZXhUaW1lXVsnY2VudHJvaWQnXVsxXSArICcpJztcclxuICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgIC8vIGhpZGUgdGhlIGFycm93c1xyXG4gICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KCcjY2VudHJvaWQtbGluZScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2hpZGRlbicpO1xyXG4gICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAvLyBtZWRvaWRcclxuICAgICAgICAgICAgICAgaWYgKHRoaXMubWVkb2lkQW5pbWFsICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCcjYW5pbWFsLScgKyB0aGlzLm1lZG9pZEFuaW1hbClcclxuICAgICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnbWVkb2lkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgdGhpcy5tZWRvaWRBbmltYWwgPSBzd2FybURhdGFbdGhpcy5pbmRleFRpbWVdWydtZWRvaWQnXTtcclxuICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgnI2FuaW1hbC0nICsgdGhpcy5tZWRvaWRBbmltYWwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ21lZG9pZCcsIHRydWUpO1xyXG4gICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAvL25leHQgZnJhbWVcclxuICAgICAgICAgICAgICAgdGhpcy5pbmRleFRpbWUrKztcclxuXHJcbiAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTGluZUNoYXJ0KCk7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgLy9jaGVjayBpZiBwbGF5IGJ1dHRvbiBpcyBhY3RpdmUgYW5kIGlmIHRoZSBhbmltYXRpb24gaXMgbm90IGZpbmlzaGVkXHJcbiAgICAgICAgICAgICAgIGlmICh0aGlzLmluZGV4VGltZSA+PSBzd2FybURhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAvL3N0YXJ0IGFnYWluIGZyb20gdGhlIHN0YXJ0XHJcbiAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4VGltZSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXcoKTtcclxuICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBsYXlCb29sZWFuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAvL21lYXN1cmUgZXhlY3V0aW9uIHRpbWVcclxuICAgICAgICAgICAgICAgICAgIC8vICAgbGV0IHQxID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAvLyAgIGNvbnNvbGUubG9nKHQxIC0gdDApOyAvLyBpbiBtaWxsaXNlY29uZHNcclxuICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgfSxcclxuICAgICAgICAgICB0aW1lVG9XYWl0KTtcclxuICAgfVxyXG5cclxuICAgaW5pdERlbmRyb2dyYW0oKSB7XHJcbiAgICAgICAvLyBjb25zdGFuY3QgZmFjdG9ycyBmb3IgdGhlIGRlbmRncm9ncmFtXHJcbiAgICAgICBsZXQgbWFyZ2luID0gMjAsXHJcbiAgICAgICAgICAgd2lkdGggPSA1MDAwLFxyXG4gICAgICAgICAgIGhlaWdodCA9IDUwMDA7XHJcblxyXG4gICAgICAgLy8gem9vbSBmdW5jdGlvbiBmb3IgdGhlIGRlbmRyb2dyYW1cclxuICAgICAgIGxldCB6b29tID0gZDMuem9vbSgpXHJcbiAgICAgICAgICAgLnNjYWxlRXh0ZW50KFsxLCAxMF0pXHJcbiAgICAgICAgICAgLm9uKCd6b29tJywgKCk9PntcclxuICAgICAgICAgICAgICAgLy9jb25zdHJhaW5lZCB6b29taW5nXHJcbiAgICAgICAgICAgICAgIGQzLmV2ZW50LnRyYW5zZm9ybS54ID0gTWF0aC5taW4oMCwgd2lkdGggKiAoZDMuZXZlbnQudHJhbnNmb3JtLmsgLSAxKSxcclxuICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KHdpZHRoICogKDEgLSBkMy5ldmVudC50cmFuc2Zvcm0uayksIGQzLmV2ZW50LnRyYW5zZm9ybS54KSk7XHJcblxyXG4gICAgICAgICAgICAgICBkMy5ldmVudC50cmFuc2Zvcm0ueSA9IE1hdGgubWluKDAsIGhlaWdodCAqIChkMy5ldmVudC50cmFuc2Zvcm0uayAtIDEpLFxyXG4gICAgICAgICAgICAgICAgICAgTWF0aC5tYXgoaGVpZ2h0ICogKDEgLSBkMy5ldmVudC50cmFuc2Zvcm0uayksIGQzLmV2ZW50LnRyYW5zZm9ybS55KSk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyB0cmFuc2xhdGUgYW5kIHNjYWxlXHJcbiAgICAgICAgICAgICAgIHRoaXMuZGVuZHJvem9vbS5hdHRyKCd0cmFuc2Zvcm0nLCBkMy5ldmVudC50cmFuc2Zvcm0pO1xyXG4gICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgIC8vIHN2ZyBjb250YWluZXIgZm9yIHRoZSBkZW5kcm9ncmFtXHJcbiAgICAgICBsZXQgc3ZnID0gZDMuc2VsZWN0KCcjZGVuZHJvZ3JhbS1wYW5lbCcpXHJcbiAgICAgICAgICAgLmNsYXNzZWQoJ3N2Zy1kZW5kcm9ncmFtLWNvbnRhaW5lcicsIHRydWUpXHJcbiAgICAgICAgICAgLmFwcGVuZCgnc3ZnJylcclxuICAgICAgICAgICAuYXR0cigncHJlc2VydmVBc3BlY3RSYXRpbycsICd4TWluWU1pbiBtZWV0JylcclxuICAgICAgICAgICAuYXR0cigndmlld0JveCcsICcwIDAgJyArIHdpZHRoICsgJyAnICsgaGVpZ2h0KVxyXG4gICAgICAgICAgIC8vIGFkZCB0aGUgY2xhc3Mgc3ZnLWNvbnRlbnRcclxuICAgICAgICAgICAuY2xhc3NlZCgnc3ZnLWNvbnRlbnQtZGVuZHJvZ3JhbScsIHRydWUpXHJcbiAgICAgICAgICAgLmNhbGwoem9vbSk7XHJcblxyXG4gICAgICAgaW5pdERlbmRyb2dyYW1MZWdlbmQoKTtcclxuXHJcbiAgICAgICAvLyBhcHBlbmQgdGhlIHpvb20gZ3JvdXAgdG8gdGhlIHN2Z1xyXG4gICAgICAgdGhpcy5kZW5kcm96b29tID0gc3ZnLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIG1hcmdpbiArICcsJyArIG1hcmdpbiArICcpJylcclxuICAgICAgICAgICAuYXBwZW5kKCdzdmc6ZycpO1xyXG5cclxuICAgICAgIC8vIGQzIHRyZWVcclxuICAgICAgIGxldCB0cmVlbWFwID0gZDMudHJlZSgpIC8vZDMuY2x1c3RlcigpXHJcbiAgICAgICAgICAgLnNpemUoWyhoZWlnaHQgLSAxMCAqIG1hcmdpbiksICh3aWR0aCAtIDEwICogbWFyZ2luKV0pO1xyXG5cclxuICAgICAgIC8vIHNldCB0aGUgc3BhdGlhbCB2aWV3IC0gbmVlZGVkIHRvIGFkZCB0aGUgY2x1c3RlcmluZyB0byB0aGUgc3BhdGlhbCB2aWV3IHdpbmRvd1xyXG4gICAgICAgbGV0IHNwYXRpYWxWaWV3ID0gZDMuc2VsZWN0KCcudGFuaycpO1xyXG5cclxuICAgICAgIC8vIGluaXQgZGVuZHJvZ3JhbSBzbGlkZXJcclxuICAgICAgIC8vIGluaXRpYWxpemUgdGhlIE5ldHdvcmsgc2xpZGVyXHJcbiAgICAgICAkKCcjZGVuZHJvZ3JhbS1wYW5lbC1sZXZlbC1zbGlkZXInKVxyXG4gICAgICAgICAgIC5zbGlkZXIoe1xyXG4gICAgICAgICAgICAgICByYW5nZTogJ21heCcsXHJcbiAgICAgICAgICAgICAgIG1pbjogMixcclxuICAgICAgICAgICAgICAgbWF4OiAyLFxyXG4gICAgICAgICAgICAgICBzdGVwOiAxLFxyXG4gICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5oaWVyYXJjaHlMZXZlbHNbJ2gwJ10sXHJcbiAgICAgICAgICAgICAgIHNsaWRlOiAoZXZlbnQsIHVpKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgbGV0IGlkID0gJCgnLnNob3ctZGVuZHJvZ3JhbS5idG4tcHJpbWFyeScpLmF0dHIoJ2RhdGEnKTtcclxuICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0SGllcmFyY2h5TGV2ZWwoaWQsIHVpLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRGVuZHJvZ3JhbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgLy8gaWYgbm8gYW5pbWF0aW9uIGlzIGFjdGl2ZSBkcmF3IHRoZSBuZXcgY2x1c3RlcmluZyBhbmQgZGVuZHJvZ3JhbVxyXG4gICAgICAgICAgICAgICAgICAgLy8gZHJhd0RlbmRyb2dyYW0oKTtcclxuICAgICAgICAgICAgICAgICAgIGlmICghJCgnI3BsYXktYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgLy9nbyBiYWNrIG9uZSBzZWNvbmQgYW5kIGRyYXcgdGhlIG5leHQgZnJhbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAvL3RoaXMgYXBwbHlzIHRoZSBjaGFuZ2VzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWNJbmRleFRpbWUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXdEZW5kcm9ncmFtKCk7XHJcbiAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICB9KTtcclxuICAgICAgIGxldCB0b29sdGlwRGl2O1xyXG4gICAgICAgLy8gaW5pdCB0aGUgdG9vbHRpcCBmb3IgdGhlIGRlbmRyb2dyYW1cclxuICAgICAgIHRvb2x0aXBEaXYgPSBkMy5zZWxlY3QoJyNkZW5kcm9ncmFtLXRvb2x0aXAnKVxyXG4gICAgICAgICAgIC5zdHlsZSgnbGVmdCcsIDAgKyAncHgnKVxyXG4gICAgICAgICAgIC5zdHlsZSgndG9wJywgMCArICdweCcpXHJcbiAgICAgICAgICAgLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgdG9vbHRpcERpdlxyXG4gICAgICAgICAgICAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgMSk7XHJcbiAgICAgICAgICAgfSk7XHJcbiAgICAgICAvLyBpbml0IHRoZSBoaWVyYXJjaHkgbGVnZW5kXHJcbiAgICAgICBsZXQgbGVnZW5kV2lkdGggPSBtYXhOdW1iZXJIaWVyYXJjaGllcyAqIDEwMDtcclxuICAgICAgIGxldCBsZWdlbmRIZWlnaHQgPSA2MDtcclxuXHJcbiAgICAgICB0aGlzLnN2Z0xlZ2VuZF9uZXR3ID0gZDMuc2VsZWN0KCcjaGllcmFyY2h5LWxlZ2VuZC1kaXYnKVxyXG4gICAgICAgICAgIC5hcHBlbmQoJ3N2ZycpXHJcbiAgICAgICAgICAgLmF0dHIoJ2lkJywgJ2hpZXJhcmNoeS1sZWdlbmQnKVxyXG4gICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIGxlZ2VuZFdpZHRoKVxyXG4gICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCBsZWdlbmRIZWlnaHQpO1xyXG5cclxuICAgICAgIC8vIGFkZCBwYXR0ZXJuIGZvciBzdHJpcGVkIGJhY2tncm91bmQgb2YgaW50ZXJzZWN0aW9ucyBldGMuXHJcbiAgICAgICBzcGF0aWFsVmlldy5hcHBlbmQoJ2RlZnMnKVxyXG4gICAgICAgICAgIC5hcHBlbmQoJ3N2ZzpwYXR0ZXJuJylcclxuICAgICAgICAgICAuYXR0cignaWQnLCAnc3RyaXBlZCcpXHJcbiAgICAgICAgICAgLmF0dHIoJ3BhdHRlcm5Vbml0cycsICd1c2VyU3BhY2VPblVzZScpXHJcbiAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgJzIwJylcclxuICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgJzUnKVxyXG4gICAgICAgICAgIC5hdHRyKCdwYXR0ZXJuVHJhbnNmb3JtJywgJ3JvdGF0ZSg2MCknKVxyXG4gICAgICAgICAgIC5hcHBlbmQoJ3JlY3QnKVxyXG4gICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIDUpXHJcbiAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIDEwKVxyXG4gICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKDAsMCknKVxyXG4gICAgICAgICAgIC5zdHlsZSgnZmlsbCcsICcjNjcwMDBkJyk7XHJcblxyXG4gICB9O1xyXG4gICBjbGljayhkKSB7XHJcbiAgICAgICBzZXRBY3RpdmVBbmltYWxzKGRbJ2RhdGEnXVsnbmFtZSddKTtcclxuICAgICAgIC8vIGlmIG5vIGFuaW1hdGlvbiBpcyBhY3RpdmUgZHJhdyB0aGUgZHJhdyBvbmUgc3RlcFxyXG4gICAgICAgaWYgKCEkKCcjcGxheS1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICB0aGlzLmRlY0luZGV4VGltZSgpO1xyXG4gICAgICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICAgfVxyXG4gICB9XHJcbiAgIHNldGhpZXJhcmNoeUdyb3VwU3RkZXYoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgaWYgKGtleSBpbiB0aGlzLmhpZXJhcmNoeUdyb3VwU3RkZXYpIHtcclxuICAgICAgICAgICB0aGlzLmhpZXJhcmNoeUdyb3VwU3RkZXZba2V5XS5wdXNoKHZhbHVlKTtcclxuICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgdGhpcy5oaWVyYXJjaHlHcm91cFN0ZGV2W2tleV0gPSBbdmFsdWVdO1xyXG4gICAgICAgfVxyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogUmVzZXQgaGllcmFyY2h5IGdyb3VwIHN0YW5kYXJkIGRldmlhdGlvblxyXG4gICAgKi9cclxuICAgcmVzZXRoaWVyYXJjaHlHcm91cFN0ZGV2KCkge1xyXG4gICAgICAgdGhpcy5oaWVyYXJjaHlHcm91cFN0ZGV2ID0ge307XHJcbiAgIH1cclxuICAgZ2V0SGllcmFyY2h5TGV2ZWwocm9vdCwgaGllcmFyY2h5KSB7XHJcbiAgICBsZXQgcmVzdWx0ID0gW107XHJcbiAgICBsZXQgbGV2ZWwgPSB0aGlzLmhpZXJhcmNoeUxldmVsc1snaCcgKyBoaWVyYXJjaHldO1xyXG5cclxuICAgIC8vIHNlY29uZCBsZXZlbCBvZiB0aGUgYXJyYXlcclxuICAgIGxldCB0bXBfbm9kZXMgPSByb290WydjaGlsZHJlbiddO1xyXG4gICAgLy8gaXRlcmF0ZSB0aHJvdWdoIHRoZSB0cmVlXHJcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IHJvb3RbJ2hlaWdodCddOyBpKyspIHtcclxuICAgICAgICAvLyBjaGVjayBpZiB3ZSBhcmUgYXQgdGhlIHNlYXJjaGVkIGxldmVsXHJcbiAgICAgICAgaWYgKHRtcF9ub2Rlc1swXSAmJiB0bXBfbm9kZXNbMF1bJ2RlcHRoJ10gPT09IGxldmVsKSB7XHJcbiAgICAgICAgICAgIC8vIGFkZCBlYWNoIGNsdXN0ZXIgdG8gdGhlIHJlc3VsdCBzZXRcclxuICAgICAgICAgICAgdG1wX25vZGVzLmZvckVhY2goZnVuY3Rpb24obm9kZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBub2RlWydkYXRhJ11bJ25hbWUnXSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChub2RlWydkYXRhJ11bJ25hbWUnXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gZ2V0IGFsbCBjaGlsZHJlbiBvZiBhIHNwZWNpZmljIGxldmVsIGluIHRoZSB0cmVlXHJcbiAgICAgICAgbGV0IHRtcCA9IFtdO1xyXG4gICAgICAgIHRtcF9ub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uKG5vZGUpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBub2RlWydjaGlsZHJlbiddICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgdG1wID0gdG1wLmNvbmNhdChub2RlWydjaGlsZHJlbiddKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRtcF9ub2RlcyA9IHRtcDtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuICAgc2V0SGllcmFyY2h5TGV2ZWwoaGllcmFyY2h5LCBsZXZlbCkge1xyXG4gICAgIC8vIFRPRE8gY2F0Y2ggY2FzZXMgPCAwIGFuZCBiaWdnZXIgdGhhbiBvdmVyYWxsIGhlaWdodFxyXG4gICAgIHRoaXMuaGllcmFyY2h5TGV2ZWxzWydoJyArIGhpZXJhcmNoeV0gPSBsZXZlbDtcclxuICAgIH1cclxuICAgc2V0SGllcmFyY2h5Q29sb3IoaGllcmFyY2h5KSB7XHJcbiAgICAgICAgLy8gY2hlY2sgaWYgdGhlIGhpZXJhcmNoeSBpcyBhbHJlYWR5IHNob3duIGFzIG5ldHdvcmtcclxuICAgICAgICAvLyB0YWtlIHRoZSBzYW1lIGNvbG9yXHJcbiAgICAgICAgZm9yIChsZXQga2V5IGluIHRoaXMubmV0d29ya0NvbG9yKSB7XHJcbiAgICAgICAgICAgIGlmIChrZXkgPT09ICgnaCcgKyBoaWVyYXJjaHkpKSB7XHJcbiAgICAgICAgICAgICAgICBoaWVyYXJjaHlDb2xvcnNbJ2gnICsgaGllcmFyY2h5XSA9IHRoaXMubmV0d29ya0NvbG9yW2tleV07XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaGllcmFyY2h5IGlzIG5vdCB2aXN1YWxpemVkIGFscmVhZHkgYXMgYSBuZXR3b3JrXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2xvcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IHRtcF9ib29sZWFuID0gdHJ1ZTtcclxuICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIGhpZXJhcmNoeUNvbG9ycykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGhpZXJhcmNoeUNvbG9ycy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhpZXJhcmNoeUNvbG9yc1trZXldID09PSBjb2xvcnNbaV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG1wX2Jvb2xlYW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRtcF9ib29sZWFuKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiBhIG5ldHdvcmsgaXMgZGVwaWN0ZWRcclxuICAgICAgICAgICAgICAgIC8vIGlmIHNvIHNraXAgdGhlIGNvbG9yIHdoaWNoIGlzIGFscmVhZHkgY2hvb3NlbiBmb3IgdGhlIG5ldHdvcmtcclxuICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLm5ldHdvcmtDb2xvcikubGVuZ3RoICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIHRoaXMubmV0d29ya0NvbG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm5ldHdvcmtDb2xvcltrZXldICE9PSBjb2xvcnNbaV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZXJhcmNoeUNvbG9yc1snaCcgKyBoaWVyYXJjaHldID0gY29sb3JzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBoaWVyYXJjaHlDb2xvcnNbJ2gnICsgaGllcmFyY2h5XSA9IGNvbG9yc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICByZW1vdmVIaWVyYXJjaHlDb2xvcihoaWVyYXJjaHkpIHtcclxuICAgICAgICBkZWxldGUgaGllcmFyY2h5Q29sb3JzWydoJyArIGhpZXJhcmNoeV07XHJcbiAgICB9XHJcbiAgIHJlbW92ZUhpZXJhcmNoeUxldmVsKGhpZXJhcmNoeSkge1xyXG4gICAgICAvLyBUT0RPIGNhdGNoIGNhc2VzIDwgMCBhbmQgYmlnZ2VyIHRoYW4gb3ZlcmFsbCBoZWlnaHRcclxuICAgICAgZGVsZXRlIHRoaXMuaGllcmFyY2h5TGV2ZWxzWydoJyArIGhpZXJhcmNoeV07XHJcbiAgfVxyXG4gICB1cGRhdGVEZW5kcm9ncmFtKCkge1xyXG4gICAgIC8vIGdldCB0aGUgaW1wb3J0YW50IGluZm9cclxuICAgICBsZXQgaWQgPSAkKCcuc2hvdy1kZW5kcm9ncmFtLmJ0bi1wcmltYXJ5JykuYXR0cignZGF0YScpO1xyXG4gICAgIGxldCBuYW1lID0gJCgnLnNob3ctZGVuZHJvZ3JhbS5idG4tcHJpbWFyeScpLmF0dHIoJ25hbWUnKTtcclxuICAgICAvLyBzZXQgdGhlIG5hbWUgb2YgdGhlIGRpc3BsYXllZCBoaWVyYXJjaHlcclxuICAgICAkKCcjZGVuZHJvZ3JhbS1wYW5lbC1uYW1lJykudGV4dChuYW1lKTtcclxuXHJcbiAgICAgLy8gc2V0IHNsaWRlciBhbmQgIHRleHQgdmFsdWVcclxuICAgICAkKCcjZGVuZHJvZ3JhbS1wYW5lbC1sZXZlbC1zbGlkZXInKS52YWwodGhpcy5oaWVyYXJjaHlMZXZlbHNbJ2gnICsgaWRdKTtcclxuICAgICAkKCcjZGVuZHJvZ3JhbS1wYW5lbC1sZXZlbC10ZXh0JykudGV4dCh0aGlzLmhpZXJhcmNoeUxldmVsc1snaCcgKyBpZF0pO1xyXG5cclxufVxyXG4gICBnZXRIaWVyYXJjaHlWZXJ0aWNlcyhoaWVyYXJjaGllcykge1xyXG4gICAgICAgbGV0IHJlc3VsdCA9IFtdOyAvLyByZXN1bHQgc2V0XHJcbiAgICAgICBoaWVyYXJjaGllcy5mb3JFYWNoKChjbHVzdGVyKT0+e1xyXG4gICAgICAgICAgIGxldCB2ZXJ0aWNlcyA9IFtdOyAvLyB2ZXJ0aWNlcyBvZiB0aGUgY2x1c3RlcnMgaW4gdGhlIHNwYXRpYWwgdmlld1xyXG4gICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgY2x1c3Rlci5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICBsZXQgZ3JvdXBNZW1iZXIgPSB0aGlzLmFycmF5QW5pbWFscy5maW5kKGQgPT4gZFsnYSddID09PSBjbHVzdGVyW2pdKTtcclxuICAgICAgICAgICAgICAgaWYgKGdyb3VwTWVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICB2ZXJ0aWNlcy5wdXNoKFtncm91cE1lbWJlclsncCddWzBdLCAtZ3JvdXBNZW1iZXJbJ3AnXVsxXV0pO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgICAgIC8vIEFuZHJldyBtb250b25lIGNoYWluIGFsZ29yaXRobSByZXV0cm5zIGZvciBwb2ludHMgZmV3ZXIgdGhhbiAzIG51bGxcclxuICAgICAgICAgICBpZiAodmVydGljZXMubGVuZ3RoID49IDMpIHtcclxuICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goZDMucG9seWdvbkh1bGwodmVydGljZXMpKTtcclxuICAgICAgICAgICB9XHJcbiAgICAgICB9KTtcclxuICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgIH1cclxuICAgZHJhd0hpZXJhcmNoeSgpIHtcclxuICAgICAgIC8vIGlkIG9mIHRoZSBoaWVyYXJjaHkgZS5nLiBbMSw1LDNdXHJcbiAgICAgICBsZXQgaGllcmFyY2h5SWRzID0gT2JqZWN0LmtleXMobmV0d29ya0hpZXJhcmNoeSkubWFwKGZ1bmN0aW9uKHgpIHtcclxuICAgICAgICAgICByZXR1cm4geC5yZXBsYWNlKCdoJywgJycpO1xyXG4gICAgICAgfSk7XHJcbiAgICAgICAvLyAgVGhlIGNsdXN0ZXJpbmcgaW4gYW4gMkQgYXJyYXkgd2l0aCB3aGljaCBhbmltYWwgaWQgYmVsb25ncyB0byB3aGljaCBncm91cFxyXG4gICAgICAgbGV0IGhpZXJhcmNoeVZlcnRpY2VzID0gW107XHJcblxyXG4gICAgICAgLy8gaXRlcmF0ZSBvdmVyIHRoZSBoaWVyYXJjaHkgZGF0YSB0byBnZXQgdGhlIGhpZXJhcmNoeSBhbmltYWwgaWRzIHBlciBjbHVzdGVyaW5nIGFuZCBncm91cGluZ1xyXG4gICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBoaWVyYXJjaHlJZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICBsZXQgdHJlZURhdGEgPSBuZXR3b3JrSGllcmFyY2h5WydoJyArIGhpZXJhcmNoeUlkc1tpXV1bdGhpcy5pbmRleFRpbWVdO1xyXG4gICAgICAgICAgIC8vY29uc29sZS5sb2codHJlZURhdGEpO1xyXG4gICAgICAgICAgIGxldCBub2RlcyA9IGQzLmhpZXJhcmNoeSh0cmVlRGF0YSwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICByZXR1cm4gZC5jaGlsZHJlbjtcclxuICAgICAgICAgICB9KTtcclxuICAgICAgICAgICBsZXQgbWFyZ2luID0gMjAsXHJcbiAgICAgICAgICAgICAgIHdpZHRoID0gNTAwMCxcclxuICAgICAgICAgICAgICAgaGVpZ2h0ID0gNTAwMDtcclxuXHJcbiAgICAgICAgICAgLy8gZDMgdHJlZVxyXG4gICAgICAgICAgIGxldCB0cmVlbWFwID0gZDMudHJlZSgpIC8vZDMuY2x1c3RlcigpXHJcbiAgICAgICAgICAgICAgIC5zaXplKFsoaGVpZ2h0IC0gMTAgKiBtYXJnaW4pLCAod2lkdGggLSAxMCAqIG1hcmdpbildKTtcclxuICAgICAgICAgICBub2RlcyA9IHRyZWVtYXAobm9kZXMpO1xyXG4gICAgICAgICAgIGxldCByb290ID0gbm9kZXNbJ2NoaWxkcmVuJ11bMF07XHJcbiAgICAgICAgICAgaWYgKHNob3dOZXR3b3JrSGllcmFyY2h5ID09PSBoaWVyYXJjaHlJZHNbaV0pIHtcclxuICAgICAgICAgICAgICAgbmV0d29ya0hpZXJhcmNoeUlkcyA9IHRoaXMuZ2V0SGllcmFyY2h5TGV2ZWwocm9vdCwgaGllcmFyY2h5SWRzW2ldKTtcclxuICAgICAgICAgICB9XHJcbiAgICAgICAgICAgLy8gYWRkIHRoZSB2ZXJ0aWNlcyBpbnRvIHRoZSBhcnJheVxyXG4gICAgICAgICAgIGhpZXJhcmNoeVZlcnRpY2VzLnB1c2godGhpcy5nZXRIaWVyYXJjaHlWZXJ0aWNlcyh0aGlzLmdldEhpZXJhcmNoeUxldmVsKHJvb3QsIGhpZXJhcmNoeUlkc1tpXSkpKTtcclxuICAgICAgIH1cclxuXHJcbiAgICAgICAvLyBpZiBtb3JlIHRoYW4gMiBoaWVyYXJjaGllcyBhcmUgZHJhd25cclxuICAgICAgIGlmIChoaWVyYXJjaHlWZXJ0aWNlcy5sZW5ndGggPiAwKSB7XHJcblxyXG4gICAgICAgfVxyXG4gICAgICAgbGV0IHNwYXRpYWxWaWV3ID0gZDMuc2VsZWN0KCcudGFuaycpO1xyXG5cclxuXHJcbiAgICAgICAvLyBEQVRBIEpvaW5cclxuICAgICAgIGxldCBoaWVyYXJjaGllcyA9IHNwYXRpYWxWaWV3XHJcbiAgICAgICAgICAgLnNlbGVjdEFsbCgnZy5oaWVyYXJjaHktZ3JvdXAnKVxyXG4gICAgICAgICAgIC5kYXRhKGhpZXJhcmNoeVZlcnRpY2VzKTtcclxuXHJcbiAgICAgICAvLyBFTlRFUiB0aGUgZ3JvdXBzIC0gYWRkcyBhIHNwZWNpZmljIGlkIGFuZCBjb2xvclxyXG4gICAgICAgaGllcmFyY2hpZXNcclxuICAgICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgIC5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgIC5hdHRyKCdjbGFzcycsIGZ1bmN0aW9uKGQsIGkpIHtcclxuICAgICAgICAgICAgICAgaWYgKHNldE9wZXJhdGlvbiA9PT0gJ2ludGVyc2VjdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgIHJldHVybiAnaGllcmFyY2h5LWdyb3VwIGludGVyc2VjdGlvbic7XHJcbiAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2V0T3BlcmF0aW9uID09PSAnc3ltLWRpZmZlcmVuY2UnKSB7XHJcbiAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2hpZXJhcmNoeS1ncm91cCBzeW0tZGlmZmVyZW5jZSc7XHJcbiAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2hpZXJhcmNoeS1ncm91cCBoJyArIGhpZXJhcmNoeUlkc1tpXTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgLnN0eWxlKCdmaWxsJywgZnVuY3Rpb24oZCwgaSkge1xyXG4gICAgICAgICAgICAgICByZXR1cm4gaGllcmFyY2h5Q29sb3JzWydoJyArIGhpZXJhcmNoeUlkc1tpXV07XHJcbiAgICAgICAgICAgfSlcclxuICAgICAgICAgICAuYXR0cignc3Ryb2tlJywgZnVuY3Rpb24oZCwgaSkge1xyXG4gICAgICAgICAgICAgICByZXR1cm4gaGllcmFyY2h5Q29sb3JzWydoJyArIGhpZXJhcmNoeUlkc1tpXV07XHJcbiAgICAgICAgICAgfSlcclxuICAgICAgICAgICAubW92ZVRvQmFjaygpO1xyXG5cclxuICAgICAgIC8vIFVQREFURSAtIHRoZSBjbGFzcyBuZWVkZWQgZm9yIGludGVyc2VjdGlvbiBhbmQgc3ltbWV0cmljIGRpZmZlcmVuY2VcclxuICAgICAgIGhpZXJhcmNoaWVzLmF0dHIoJ2NsYXNzJywgZnVuY3Rpb24oZCwgaSkge1xyXG4gICAgICAgICAgIGlmIChzZXRPcGVyYXRpb24gPT09ICdpbnRlcnNlY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgIHJldHVybiAnaGllcmFyY2h5LWdyb3VwIGludGVyc2VjdGlvbic7XHJcbiAgICAgICAgICAgfSBlbHNlIGlmIChzZXRPcGVyYXRpb24gPT09ICdzeW0tZGlmZmVyZW5jZScpIHtcclxuICAgICAgICAgICAgICAgcmV0dXJuICdoaWVyYXJjaHktZ3JvdXAgc3ltLWRpZmZlcmVuY2UnO1xyXG4gICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgIHJldHVybiAnaGllcmFyY2h5LWdyb3VwIGgnICsgaGllcmFyY2h5SWRzW2ldO1xyXG4gICAgICAgICAgIH1cclxuICAgICAgIH0pO1xyXG5cclxuICAgICAgIC8vIEVYSVRcclxuICAgICAgIGhpZXJhcmNoaWVzLmV4aXQoKVxyXG4gICAgICAgICAgIC5yZW1vdmUoKTtcclxuXHJcbiAgICAgICAvLyBIaWVyYWNoeSBodWxscyBhZGRlZCB0byB0aGUgc3BhdGlhbCB2aWV3IC0gZ2V0IHRoZSBwb2ludHMgZm9yIGVhY2ggYW5pbWFsIGluIHRoZVxyXG4gICAgICAgLy8gc3BhdGlhbCB2aWV3IHNvIHRoYXQgYSBjb252ZXggaHVsbCBjYW4gYmUgY2FsY3VsYXRlZFxyXG4gICAgICAgbGV0IGhpZXJhcnlIdWxscyA9IGhpZXJhcmNoaWVzLnNlbGVjdEFsbCgncGF0aC5oaWVyYXJjaHktaHVsbC1wYXRoJylcclxuICAgICAgICAgICAuZGF0YShmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgIHJldHVybiBkO1xyXG4gICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgIC8vIEVOVEVSIGFuZCBjYWxjdWxhdGUgdGhlIGNvbnZleCBodWxsXHJcbiAgICAgICBoaWVyYXJ5SHVsbHNcclxuICAgICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgIC5hcHBlbmQoJ3BhdGgnKVxyXG4gICAgICAgICAgIC8vIC5hdHRyKCdpZCcsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAvLyAgICAgcmV0dXJuICdocCcgKyBkLmpvaW4oJycpLnJlcGxhY2UoLywvZywgJycpO1xyXG4gICAgICAgICAgIC8vIH0pXHJcbiAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2hpZXJhcmNoeS1odWxsLXBhdGgnKVxyXG4gICAgICAgICAgIC5hdHRyKCdkJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAvLyByZXR1cm4gZHJhd0xpbmUoZCk7XHJcbiAgICAgICAgICAgICAgIHJldHVybiAnTScgKyBkLmpvaW4oJ0wnKSArICdaJztcclxuICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAvLyBVUERBVEUgdGhlIGNvbnZleCBodWxsXHJcbiAgICAgICBoaWVyYXJ5SHVsbHNcclxuICAgICAgICAgICAuYXR0cignZCcsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgLy8gcmV0dXJuIGRyYXdMaW5lKGQpO1xyXG4gICAgICAgICAgICAgICByZXR1cm4gJ00nICsgZC5qb2luKCdMJykgKyAnWic7XHJcbiAgICAgICAgICAgfSk7XHJcbiAgICAgICAvLyAuYXR0cignaWQnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAvLyByZXR1cm4gJ2hwJyArIGQuam9pbignJykucmVwbGFjZSgvLC9nLCAnJyk7XHJcbiAgICAgICAvLyB9KTtcclxuICAgICAgIC8vIEVYSVRcclxuICAgICAgIGhpZXJhcnlIdWxscy5leGl0KClcclxuICAgICAgICAgICAucmVtb3ZlKCk7XHJcblxyXG4gICB9XHJcbiAgIGRyYXdEZW5kcm9ncmFtKCkge1xyXG5cclxuXHJcbiAgICAgICAgIHZhciBjb2xsYXBzZSA9IChkKT0+e1xyXG4gICAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLmhpZXJhcmNoeUxldmVscyk7XHJcbiAgICAgICAgICAvL2NvbnNvbGUubG9nKGQuY2hpbGRyZW4pO1xyXG4gICAgICAgICAgLy9pZiAoZC5jaGlsZHJlbiAmJiBkLmRlcHRoIDw9IHRoaXMuaGllcmFyY2h5TGV2ZWxzWydoJyArIHRoaXMuaWRdKVxyXG4gICAgICAgICAgaWYgKGQuY2hpbGRyZW4gJiYgZC5kZXB0aCA8PSAyKSB7XHJcbiAgICAgICAgICAgICAgZC5fY2hpbGRyZW4gPSBkLmNoaWxkcmVuO1xyXG4gICAgICAgICAgICAgIGQuX2NoaWxkcmVuLmZvckVhY2goY29sbGFwc2UpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBkLmNoaWxkcmVuID0gMDtcclxuICAgICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAgICAvLyBnZXQgdGhlIGFjdGl2ZSBkZW5kcm9ncmFtXHJcbiAgICAgICBsZXQgaWQgPSAkKCcuc2hvdy1kZW5kcm9ncmFtLmJ0bi1wcmltYXJ5JykuYXR0cignZGF0YScpO1xyXG4gICAgICAgLy8gaWYgZGF0YSBpcyBhdmFpYWJsZSBkcmF3IGhpZXJhcmNoeSBjbHVzdGVycyBhbmQgYSBidXR0b24gaXMgYWN0aXZlIHNlbGN0ZWRcclxuICAgICAgIGlmICghJC5pc0VtcHR5T2JqZWN0KG5ldHdvcmtIaWVyYXJjaHkpICYmIGlkKSB7XHJcbiAgICAgICAgICAgLy8gZ2V0IHRoZSBkYXRhIGFuZCB0cmFuc2Zvcm0gaXRcclxuICAgICAgICAgICBsZXQgdHJlZURhdGEgPSBuZXR3b3JrSGllcmFyY2h5WydoJyArIGlkXVt0aGlzLmluZGV4VGltZV07XHJcblxyXG4gICAgICAgICAgIGxldCBub2RlcyA9IGQzLmhpZXJhcmNoeSh0cmVlRGF0YSwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICByZXR1cm4gZC5jaGlsZHJlbjtcclxuICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAvLyBza2lwIHRoZSByb290IG5vZGVcclxuICAgICAgICAgICBub2RlcyA9IG5vZGVzLmNoaWxkcmVuWzBdO1xyXG4gICAgICAgICAgIC8vIGNvbGxhcHNlIHRoZSB0cmVlXHJcbiAgICAgICAgICAgbm9kZXMuY2hpbGRyZW4uZm9yRWFjaChjb2xsYXBzZSk7XHJcblxyXG4gICAgICAgICAgIGxldCBtYXJnaW4gPSAyMCxcclxuICAgICAgICAgICAgICAgd2lkdGggPSA1MDAwLFxyXG4gICAgICAgICAgICAgICBoZWlnaHQgPSA1MDAwO1xyXG5cclxuICAgICAgICAgICAvLyBkMyB0cmVlXHJcbiAgICAgICAgICAgbGV0IHRyZWVtYXAgPSBkMy50cmVlKCkgLy9kMy5jbHVzdGVyKClcclxuICAgICAgICAgICAgICAgLnNpemUoWyhoZWlnaHQgLSAxMCAqIG1hcmdpbiksICh3aWR0aCAtIDEwICogbWFyZ2luKV0pO1xyXG5cclxuXHJcblxyXG4gICAgICAgICAgIC8vIG1hcHMgdGhlIG5vZGUgZGF0YSB0byB0aGUgdHJlZSBsYXlvdXRcclxuICAgICAgICAgICBub2RlcyA9IHRyZWVtYXAobm9kZXMpO1xyXG4gICAgICAgICAgIC8vY29uc29sZS5sb2cobm9kZXMpO1xyXG5cclxuICAgICAgICAgICAvLyBoaWRlIGlmIG5vIG5ldHdvcmsgaXMgY2hvb3NlblxyXG4gICAgICAgICAgIGlmICgkKCcuc2hvdy1kZW5kcm9ncmFtLmJ0bi1wcmltYXJ5JykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhoaWVyYXJjaHlMZXZlbHMpO1xyXG4gICAgICAgICAgICAgICAvLyBzZXQgdGhlIG5ldyBzbGlkZXIgbWF4XHJcbiAgICAgICAgICAgICAgICQoJyNkZW5kcm9ncmFtLXBhbmVsLWxldmVsLXNsaWRlcicpXHJcbiAgICAgICAgICAgICAgICAgICAuc2xpZGVyKCdvcHRpb24nLCAnbWF4JywgKG5vZGVzWydoZWlnaHQnXSAtIDEpKVxyXG4gICAgICAgICAgICAgICAgICAgLnNsaWRlcigndmFsdWUnLCB0aGlzLmhpZXJhcmNoeUxldmVsc1snaCcgKyBpZF0pO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gREFUQSBKT0lOIC0gbGlua3MgKGVkZ2VzKVxyXG4gICAgICAgICAgICAgICBsZXQgbGluayA9IHRoaXMuZGVuZHJvem9vbVxyXG4gICAgICAgICAgICAgICAgICAgLnNlbGVjdEFsbCgncGF0aC5saW5rJylcclxuICAgICAgICAgICAgICAgICAgIC5kYXRhKG5vZGVzLmRlc2NlbmRhbnRzKCkuc2xpY2UoMSkpO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gRU5URVJcclxuICAgICAgICAgICAgICAgbGlua1xyXG4gICAgICAgICAgICAgICAgICAgLmVudGVyKClcclxuICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJ3BhdGgnKVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xpbmsnKVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2QnLCBkaWFnb25hbExpbmVzKTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIFRyYW5zaXRpb24gbGlua3MgdG8gdGhlaXIgbmV3IHBvc2l0aW9uLlxyXG4gICAgICAgICAgICAgICBsaW5rXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignZCcsIGRpYWdvbmFsTGluZXMpO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gRVhJVFxyXG4gICAgICAgICAgICAgICBsaW5rLmV4aXQoKVxyXG4gICAgICAgICAgICAgICAgICAgLnJlbW92ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gREFUQSBKT0lOIC0gbm9kZXNcclxuICAgICAgICAgICAgICAgLy8gYWRkcyBlYWNoIG5vZGUgYXMgYSBncm91cFxyXG4gICAgICAgICAgICAgICBsZXQgbm9kZSA9IHRoaXMuZGVuZHJvem9vbVxyXG4gICAgICAgICAgICAgICAgICAgLnNlbGVjdEFsbCgnLm5vZGUnKVxyXG4gICAgICAgICAgICAgICAgICAgLmRhdGEobm9kZXMuZGVzY2VuZGFudHMoKSk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyBhZGQgdGhlIGdyb3VwcyB0byB0aGUgZGVuZGdyb2dyYW1cclxuICAgICAgICAgICAgICAgdmFyIG5vZGVFbnRlciA9IG5vZGUuZW50ZXIoKVxyXG4gICAgICAgICAgICAgICAgICAgLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdub2RlJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIChkLmNoaWxkcmVuID8gJyBub2RlLS1pbnRlcm5hbCcgOiAnIG5vZGUtLWxlYWYnKTtcclxuICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAndHJhbnNsYXRlKCcgKyBkLnggKyAnLCcgKyBkLnkgKyAnKSc7XHJcbiAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIEVOVEVSIC0gYXBwZW5kIGZvciBlYWNoIGdyb3VwIGEgbm9kZSAoY2lyY2xlKVxyXG4gICAgICAgICAgICAgICAvLyB3aXRoIGhpZ2hsaWdodGluZyBmb3IgdGhlIGFjdGl2ZSBjaG9vc2VuIGxldmVsXHJcbiAgICAgICAgICAgICAgIG5vZGVFbnRlci5hcHBlbmQoJ2NpcmNsZScpXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cigncicsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGlmIChkWydkZXB0aCddID09PSB0aGlzLmhpZXJhcmNoeUxldmVsc1snaCcgKyBpZF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDQwICsgZC5kYXRhLm5hbWUubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAyMCArIGQuZGF0YS5uYW1lLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRbJ2RlcHRoJ10gPT09IHRoaXMuaGllcmFyY2h5TGV2ZWxzWydoJyArIGlkXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2FjdGl2ZS1sZXZlbCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnaCcgKyBkWydkYXRhJ11bJ25hbWUnXS50b1N0cmluZygpLmhhc2hDb2RlKCk7XHJcbiAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgLy8gVE9ETyBmaW5kIGEgbmljZSBmdW5jdGlvbiBmb3IgdGhlIG9uIGNsaWNrIG1ldGhvZFxyXG4gICAgICAgICAgICAgICAgICAgLm9uKCdjbGljaycsIHRoaXMuY2xpY2spXHJcbiAgICAgICAgICAgICAgICAgICAub24oJ21vdXNlb3ZlcicsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAvLyB0b29sdGlwIHBvc2l0aW9uIGFuZCB0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgdG9vbHRpcERpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ2xlZnQnLCAoZDMuZXZlbnQucGFnZVggKyA1KSArICdweCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zdHlsZSgndG9wJywgKGQzLmV2ZW50LnBhZ2VZICsgNSkgKyAncHgnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ29wYWNpdHknLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICB0b29sdGlwRGl2LnNlbGVjdCgnLnRvb2x0aXAtc3BhbicpLmh0bWwoZFsnZGF0YSddWyduYW1lJ10udG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGhpZ2hsaWdodCBpbiB0aGUgc3BhdGlhbCB2aWV3XHJcbiAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHVuZGlvbiBvZiB0aGUgcGF0aHMgbWFrZXMgdGhpcyBjb21wbGljYXRlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgIGFkZEhpZ2hsaWdodFNwYXRpYWxWaWV3KGRbJ2RhdGEnXVsnbmFtZSddKTtcclxuICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAub24oJ21vdXNlb3V0JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgdG9vbHRpcERpdi50cmFuc2l0aW9uKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLmR1cmF0aW9uKDUwMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGhpZ2hsaWdodCBpbiB0aGUgc3BhdGlhbCB2aWV3XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlSGlnaGxpZ2h0U3BhdGlhbFZpZXcoKTtcclxuICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gYWRkIHRoZSB0ZXh0IC0gIyBudW1iZXIgb2YgYW5pbWFscyBpbiB0aGUgY2x1c3RlclxyXG4gICAgICAgICAgICAgICBub2RlRW50ZXIuYXBwZW5kKCd0ZXh0JylcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdkZW5kcm9ncmFtLXRleHQnKVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gnLCAxNTApXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cigneScsIC0xNTApXHJcbiAgICAgICAgICAgICAgICAgICAudGV4dCgoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5kYXRhLm5hbWUubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyBVUERBVEUgLS0gdXBkYXRlIHRoZSBncm91cHNcclxuICAgICAgICAgICAgICAgbm9kZUVudGVyXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoJyArIGQueCArICcsJyArIGQueSArICcpJztcclxuICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gdXBkYWUgdGhlIG5vZGUgYW5kIGNpcmNsZXNcclxuICAgICAgICAgICAgICAgLy8gd2l0aCBhY3RpdmUtbGV2ZWwgZnVuY3Rpb24gdG8gaGlnaGxpZ2h0IHdoaWNoIGxldmVsIGlzIGNob3NlblxyXG4gICAgICAgICAgICAgICBub2RlXHJcbiAgICAgICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoJyArIGQueCArICcsJyArIGQueSArICcpJztcclxuICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAuc2VsZWN0KCdjaXJjbGUnKVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ3InLCAoZCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICBpZiAoZFsnZGVwdGgnXSA9PT0gdGhpcy5oaWVyYXJjaHlMZXZlbHNbJ2gnICtpZF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDQwICsgZC5kYXRhLm5hbWUubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAyMCArIGQuZGF0YS5uYW1lLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgKGQpPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGlmIChkWydkZXB0aCddID09PSB0aGlzLmhpZXJhcmNoeUxldmVsc1snaCcgKyBpZF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2FjdGl2ZS1sZXZlbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygoJ2gnICsgZFsnZGF0YSddWyduYW1lJ10udG9TdHJpbmcoKS5oYXNoQ29kZSgpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnYWN0aXZlLWxldmVsJztcclxuICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsIChkKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnaCcgKyBkWydkYXRhJ11bJ25hbWUnXS50b1N0cmluZygpLmhhc2hDb2RlKCk7XHJcbiAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgdGV4dCBvZiBudW1iZXIgb2YgZW50aXRpZXNcclxuICAgICAgICAgICAgICAgbm9kZS5zZWxlY3QoJ3RleHQnKVxyXG4gICAgICAgICAgICAgICAgICAgLnRleHQoKGQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuZGF0YS5uYW1lLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gRVhJVFxyXG4gICAgICAgICAgICAgICBub2RlLmV4aXQoKVxyXG4gICAgICAgICAgICAgICAgICAgLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgIC8vY29uc29sZS5sb2coaGllcmFyY2h5R3JvdXBTdGRldik7XHJcbiAgICAgICAgICAgICAgIC8vIGNvbG9yIHRoZSBkZW5kcm9ncmFtIG5vZGVzIHVzaW5nIHRoZSBzdGFuZGFyZERldmlhdGlvbiBpbiB0aGUgY2x1c3RlclxyXG4gICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5oaWVyYXJjaHlHcm91cFN0ZGV2KS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdydW5zJyk7XHJcbiAgICAgICAgICAgICAgICAgICAvLyBzaG93IHRoZSBsZWdlbmQgZm9yIHRoZSBjb2xvcmluZ1xyXG4gICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coaGllcmFyY2h5R3JvdXBTdGRldik7XHJcbiAgICAgICAgICAgICAgICAgICAvLyBUT0RPIGxlZ2VuZCBoZXJlXHJcbiAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnSlVNUFMgSEVSRScpO1xyXG4gICAgICAgICAgICAgICAgICAgaWYgKCQoJyNkZW5kcm9ncmFtLWxlZ2VuZCcpLmNzcygnZGlzcGxheScpID09ICdub25lJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICQoJyNkZW5kcm9ncmFtLWxlZ2VuZCcpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgIC8vIElNUE9SVEFOVCAtIGFzeW5jIHByb2JsZW1zXHJcbiAgICAgICAgICAgICAgICAgICAvLyBUT0RPIHNvbHZlIHRoaXMgLSB2ZXJ5IHNsb3dcclxuICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICBub2RlLnNlbGVjdCgnY2lyY2xlJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdmaWxsJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coaGllcmFyY2h5R3JvdXBTdGRldik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygoJ2gnICsgZFsnZGF0YSddWyduYW1lJ10udG9TdHJpbmcoKS5oYXNoQ29kZSgpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygoJ2gnICsgZFsnZGF0YSddWyduYW1lJ10udG9TdHJpbmcoKS5oYXNoQ29kZSgpKSBpbiBoaWVyYXJjaHlHcm91cFN0ZGV2KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29sb3IgdGhlIG5vZGVzIGJ5IGNhbGN1bGF0aW5nIHRoZSBzdGFuZGFyZERldmlhdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZm9yIGVhY2ggY2x1c3RlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb25seSBhY3RpdmUgaXMgc2hvdyBpbiBjbHVzdGVyIGlzIGNob29zZW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoJ2gnICsgZFsnZGF0YSddWyduYW1lJ10udG9TdHJpbmcoKS5oYXNoQ29kZSgpKSBpbiBoaWVyYXJjaHlHcm91cFN0ZGV2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2hlbGxvJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coc3RhbmRhcmREZXZpYXRpb24oaGllcmFyY2h5R3JvdXBTdGRldlsoJ2gnICsgZFsnZGF0YSddWyduYW1lJ10udG9TdHJpbmcoKS5oYXNoQ29kZSgpKV0pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RhbmRhcmREZXZpYXRpb25Db2xvclNjYWxlKHN0YW5kYXJkRGV2aWF0aW9uKGhpZXJhcmNoeUdyb3VwU3RkZXZbKCdoJyArIGRbJ2RhdGEnXVsnbmFtZSddLnRvU3RyaW5nKCkuaGFzaENvZGUoKSldKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRbJ2RlcHRoJ10gIT09IGhpZXJhcmNoeUxldmVsc1snaCcgK3RoaXMuaWRdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyMwMDAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgIH0sIDI1MCk7XHJcbiAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJCgnI2RlbmRyb2dyYW0tbGVnZW5kJykuY3NzKCdkaXNwbGF5JykgIT09ICdub25lJykge1xyXG4gICAgICAgICAgICAgICAgICAgJCgnI2RlbmRyb2dyYW0tbGVnZW5kJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgfVxyXG4gICAgICAgaWYgKCEkLmlzRW1wdHlPYmplY3QobmV0d29ya0hpZXJhcmNoeSkpIHtcclxuICAgICAgICAgICAvLyBkcmF3IHRoZSBoaWVyYXJjaHkgaW4gc3BhdGlhbCB2aWV3XHJcbiAgICAgICAgICAgdGhpcy5kcmF3SGllcmFyY2h5KCk7XHJcbiAgICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIGNoYW5nZUhpZXJhcmNoeUxlZ2VuZCgpIHtcclxuICAgICAgIGxldCBsZWdlbmQ7IC8vIHRoZSBjb2xvciBsZWdlbmRcclxuICAgICAgIGxldCBsZWdlbmRUZXh0OyAvLyBjb2xvciBsZWdlbmQgdGV4dFxyXG4gICAgICAgLy8gdmFycyBmb3IgdGhlIGxlZ2VuZFxyXG4gICAgICAgbGV0IGxlZ2VuZFN3YXRjaFdpZHRoID0gNTA7XHJcbiAgICAgICBsZXQgbGVnZW5kU3dhdGNoSGVpZ2h0ID0gMjA7XHJcblxyXG4gICAgICAgLy8gU2hvdyBvciBoaWRlIHRoZSBzdmcgZWxlbWVudFxyXG4gICAgICAgaWYgKE9iamVjdC5rZXlzKGhpZXJhcmNoeUNvbG9ycykubGVuZ3RoICE9PSAwIHx8IE9iamVjdC5rZXlzKHRoaXMubmV0d29ya0NvbG9yKS5sZW5ndGggIT09IDApIHtcclxuICAgICAgICAgICBjb25zb2xlLmxvZygnYXBwbHlzJyk7XHJcbiAgICAgICAgICAgJCgnI2hpZXJhcmNoeS1sZWdlbmQtZGl2Jykuc2hvdygpO1xyXG4gICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAkKCcjaGllcmFyY2h5LWxlZ2VuZC1kaXYnKS5oaWRlKCk7XHJcbiAgICAgICB9XHJcblxyXG4gICAgICAgbGV0IGxlZ2VuZERhdGEgPSBbXTtcclxuICAgICAgIGxldCBsZWdlbmRUZXh0RGF0YSA9IFtdO1xyXG4gICAgICAgLy8gZ2V0IHRoZSByZXF1aXJlZCBkYXRhXHJcbiAgICAgICAkKCcuc2hvdy1kZW5kcm9ncmFtJykuZWFjaChmdW5jdGlvbihpLCBvYmopIHtcclxuICAgICAgICAgICAvLyBjaGVjayBpZiBkYXRhIGlzIG5vdCB1bmRlZmluZWRcclxuICAgICAgICAgICBpZiAoaGllcmFyY2h5Q29sb3JzWydoJyArICQob2JqKS5hdHRyKCdkYXRhJyldICE9IG51bGwgJiYgJChvYmopLmF0dHIoJ25hbWUnKSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgIGxlZ2VuZERhdGEucHVzaChoaWVyYXJjaHlDb2xvcnNbJ2gnICsgJChvYmopLmF0dHIoJ2RhdGEnKV0pO1xyXG4gICAgICAgICAgICAgICBsZWdlbmRUZXh0RGF0YS5wdXNoKCQob2JqKS5hdHRyKCduYW1lJykpO1xyXG4gICAgICAgICAgIH1cclxuICAgICAgIH0pO1xyXG4gICAgICAgLy8gYWRkIHRoZSBuZXR3b3JrIGNvbG9yXHJcbiAgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5uZXR3b3JrQ29sb3IpLmxlbmd0aCAhPT0gMCkge1xyXG4gICAgICAgICAgIGZvciAobGV0IGtleSBpbiB0aGlzLm5ldHdvcmtDb2xvcikge1xyXG4gICAgICAgICAgICAgICBpZiAobGVnZW5kRGF0YS5pbmRleE9mKHRoaXMubmV0d29ya0NvbG9yW2tleV0pID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgbGVnZW5kRGF0YS5wdXNoKHRoaXMubmV0d29ya0NvbG9yW2tleV0pO1xyXG4gICAgICAgICAgICAgICAgICAgbGVnZW5kVGV4dERhdGEucHVzaCgnTmV0d29yaycpO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgfVxyXG4gICAgICAgLy8gREFUQSBKT0lOXHJcbiAgICAgICBsZWdlbmQgPSB0aGlzLnN2Z0xlZ2VuZF9uZXR3LnNlbGVjdEFsbCgncmVjdC5sZWdlbmQnKVxyXG4gICAgICAgICAgIC5kYXRhKGxlZ2VuZERhdGEpO1xyXG4gICAgICAgbGVnZW5kVGV4dCA9IHRoaXMuc3ZnTGVnZW5kX25ldHcuc2VsZWN0QWxsKCd0ZXh0LmxlZ2VuZC10ZXh0JylcclxuICAgICAgICAgICAuZGF0YShsZWdlbmRUZXh0RGF0YSk7XHJcblxyXG4gICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tIExlZ2VuZCBzd2F0Y2hlcyAgLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgLy8gVVBEQVRFIC0gbGVnZW5kXHJcbiAgICAgICBsZWdlbmQuc3R5bGUoJ2ZpbGwnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICAgICB9KTtcclxuICAgICAgIC8vIEVOVEVSIC0gbGVnZW5kXHJcbiAgICAgICBsZWdlbmRcclxuICAgICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgIC5hcHBlbmQoJ3JlY3QnKVxyXG4gICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsZWdlbmQnKVxyXG4gICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIGxlZ2VuZFN3YXRjaFdpZHRoKVxyXG4gICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCBsZWdlbmRTd2F0Y2hIZWlnaHQpXHJcbiAgICAgICAgICAgLmF0dHIoJ3knLCAwKVxyXG4gICAgICAgICAgIC5hdHRyKCd4JywgZnVuY3Rpb24oZCwgaSkge1xyXG4gICAgICAgICAgICAgICByZXR1cm4gKGxlZ2VuZFN3YXRjaFdpZHRoICsgMi41ICogaSAqIGxlZ2VuZFN3YXRjaFdpZHRoKSArICdweCc7XHJcbiAgICAgICAgICAgfSlcclxuICAgICAgICAgICAuc3R5bGUoJ2ZpbGwnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgIHJldHVybiBkO1xyXG4gICAgICAgICAgIH0pO1xyXG4gICAgICAgLy8gRVhJVCAtIGxlZ2VuZFxyXG4gICAgICAgbGVnZW5kLmV4aXQoKVxyXG4gICAgICAgICAgIC5yZW1vdmUoKTtcclxuXHJcbiAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0gVGV4dCAgLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgLy8gVVBEQVRFIC0gbGVnZW5kIHRleHRcclxuICAgICAgIGxlZ2VuZFRleHQudGV4dChmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICAgICB9KTtcclxuICAgICAgIC8vIEVOVEVSIC0gbGVnZW5kIHRleHRcclxuICAgICAgIGxlZ2VuZFRleHRcclxuICAgICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgIC5hcHBlbmQoJ3RleHQnKVxyXG4gICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsZWdlbmQtdGV4dCcpXHJcbiAgICAgICAgICAgLmF0dHIoJ3knLCAyICogbGVnZW5kU3dhdGNoSGVpZ2h0KVxyXG4gICAgICAgICAgIC5hdHRyKCd4JywgZnVuY3Rpb24oZCwgaSkge1xyXG4gICAgICAgICAgICAgICByZXR1cm4gKGxlZ2VuZFN3YXRjaFdpZHRoICsgMi41ICogaSAqIGxlZ2VuZFN3YXRjaFdpZHRoKSArICdweCc7XHJcbiAgICAgICAgICAgfSlcclxuICAgICAgICAgICAudGV4dChmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgIHJldHVybiBkO1xyXG4gICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgIC8vIEVYSVQgLSBsZWdlbmQgdGV4dFxyXG4gICAgICAgbGVnZW5kVGV4dC5leGl0KClcclxuICAgICAgICAgICAucmVtb3ZlKCk7XHJcblxyXG4gICB9XHJcblxyXG5cclxuICAgc2V0bmV0d29ya0NvbG9yKG5ldHdvcmtfaWQpIHtcclxuICAgICAgIC8vIGlmIGlkID0gLTEgc2V0IHRoZSBjb2xvciB0byBub3RoaW5nXHJcbiAgICAgICBpZiAobmV0d29ya19pZCA+PSAwKSB7XHJcbiAgICAgICAgICAgdGhpcy5uZXR3b3JrQ29sb3JbJ2gnICsgbmV0d29ya19pZF0gPSAnIzA4MzA2Yic7XHJcbiAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgIGNvbnNvbGUubG9nKCdjb2xvciBub3RoaW5nJyk7XHJcbiAgICAgICAgICAgdGhpcy5uZXR3b3JrQ29sb3IgPSB7fTtcclxuICAgICAgIH1cclxuICAgICAgIHRoaXMuY2hhbmdlSGllcmFyY2h5TGVnZW5kKCk7XHJcbiAgIH1cclxuXHJcblxyXG5cclxuIH1cclxuXHJcblxyXG5leHBvcnQgY2xhc3MgU3BhdGlhbFZpZXcgZXh0ZW5kcyBEcmF3ZXJ7XHJcbiAgY29uc3RydWN0b3IoZGF0YSl7XHJcbiAgICBzdXBlcihkYXRhKTtcclxuXHJcblxyXG4gICAgdGhpcy5zcGF0aWFsVmlld0luaXQoKTtcclxuICAgIC8vdGhpcy5jcF9saXN0ZW5lcigpO1xyXG4gIH1cclxuICBjcF9saXN0ZW5lcigpIHtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBQbGF5IG9yIHN0b3AgdGhlIGFuaW1hdGlvblxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI3BsYXktYnV0dG9uJykuY2xpY2soKCk9PntcclxuICAgICAgICAgIGlmICgkKCcjcGxheS1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICB0aGlzLnBsYXlCb29sZWFuID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgJCgnLm1kaS1wYXVzZScpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAkKCcubWRpLXBsYXknKS5zaG93KCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHRoaXMucGxheUJvb2xlYW4gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICQoJy5tZGktcGxheScpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAkKCcubWRpLXBhdXNlJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgIHRoaXMuc2V0SW5kZXhUaW1lKHNsaWRlci5zbGlkZXIoJ3ZhbHVlJykpO1xyXG4gICAgICAgICAgICAgICQoJy5icnVzaCcpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBQYXVzZSB0aGUgYW5pbWF0aW9uIGFuZCBzaG93IG9ubHkgdGhlIG5leHQgZnJhbWVcclxuICAgICAgICovXHJcbiAgICAgICQoJyNuZXh0LWZyYW1lLWJ1dHRvbicpLmNsaWNrKCgpPT57XHJcbiAgICAgICAgICBpZiAoJCgnI3BsYXktYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5wbGF5Qm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgJCgnI3BsYXktYnV0dG9uJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEJydXNoaW5nIGJ1dHRvblxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2JydXNoaW5nLWJ1dHRvbicpLmNsaWNrKCgpPT57XHJcbiAgICAgICAgICAvL3N0b3AgdGhlIGFuaW1hdGlvblxyXG5cclxuICAgICAgICAgIHRoaXMucGxheUJvb2xlYW4gPSBmYWxzZTtcclxuICAgICAgICAgICQoJyNwbGF5LWJ1dHRvbicpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgIGlmICghJCgnI2JydXNoaW5nLWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgIC8vZGVmaW5lIHRoZSBicnVzaFxyXG4gICAgICAgICAgICAgIHRoaXMuYnJ1c2ggPSBkMy5icnVzaCgpXHJcbiAgICAgICAgICAgICAgICAgIC5leHRlbnQoW1xyXG4gICAgICAgICAgICAgICAgICAgICAgWzAsIDBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgW3RoaXMudGFua1dpZHRoLCB0aGlzLnRhbmtIZWlnaHRdXHJcbiAgICAgICAgICAgICAgICAgIF0pXHJcbiAgICAgICAgICAgICAgICAgIC5vbignZW5kJywgKCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgIC8vbGV0IGFycmF5QW5pbWFscyA9IHRoaXMuYXJyYXlBbmltYWxzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgLy9sZXQgYWN0aXZlQW5pbWFscyA9IHRoaXMuYWN0aXZlQW5pbWFscztcclxuICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWN0ID0gZDMuZXZlbnQuc2VsZWN0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVBbmltYWxzID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgLy9pdGVyYXRlIG92ZXIgdGhlIDE1MSBmaXNoIHRvIGNoZWNrIHdoaWNoIGFyZSBpbiB0aGUgYnJ1c2hcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFycmF5QW5pbWFscy5tYXAoKGFuaW1hbCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBvaW50ID0gW2FuaW1hbFsncCddWzBdLCBhbmltYWxbJ3AnXVsxXV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY2hlY2sgd2hpY2ggZmlzaCBhcmUgaW4gIHRoZSBicnVzaGVkIGFyZWFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChyZWN0WzBdWzBdIDw9IHBvaW50WzBdKSAmJiAocG9pbnRbMF0gPD0gcmVjdFsxXVswXSkgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyZWN0WzBdWzFdIDw9IHBvaW50WzFdKSAmJiAocG9pbnRbMV0gPD0gcmVjdFsxXVsxXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBvaW50IGlzIGluIHRoZSBicnVzaFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVBbmltYWxzLnB1c2goYW5pbWFsWydhJ10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgfX0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmFjdGl2ZUFuaW1hbHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgLy9zZXRBY3RpdmVBbmltYWxzKGFjdGl2ZUFuaW1hbHMpO1xyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgLy90aGlzLnNldEFjdGl2ZUFuaW1hbHModGhpcy5hY3RpdmVBbmltYWxzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghJCgnI3BsYXktYnV0dG9uJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9nbyBiYWNrIG9uZSBzZWNvbmQgYW5kIGRyYXcgdGhlIG5leHQgZnJhbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3RoaXMgYXBwbHlzIHRoZSBjaGFuZ2VzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy90aGlzLmRlY0luZGV4VGltZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vU1BWLmRyYXcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNicnVzaGluZy1idXR0b24nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgdGhlIGJydXNoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuYnJ1c2gnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgLy9hZGQgdGhlIGJydXNoXHJcbiAgICAgICAgICAgICAgZDMuc2VsZWN0KCcjbWFpbi12aXMtc3ZnJylcclxuICAgICAgICAgICAgICAgICAgLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdicnVzaCcpXHJcbiAgICAgICAgICAgICAgICAgIC5jYWxsKHRoaXMuYnJ1c2gpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAvLyByZW1vdmUgdGhlIGJydXNoXHJcbiAgICAgICAgICAgICAgJCgnLmJydXNoJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFVuc2VsZWN0IGFsbCBidXR0b25cclxuICAgICAgICovXHJcbiAgICAgICQoJyNyZW1vdmUtYWN0aXZlLXNlbGVjdGVkLWJ1dHRvbicpLmNsaWNrKCgpPT57XHJcbiAgICAgICAgICBpZiAoISQoJyNyZW1vdmUtYWN0aXZlLXNlbGVjdGVkLWJ1dHRvbicpLmlzKCc6ZGlzYWJsZWQnKSkge1xyXG4gICAgICAgICAgICAgICQoJyNyZW1vdmUtYWN0aXZlLXNlbGVjdGVkLWJ1dHRvbicpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVBbmltYWxzKFtdKTtcclxuICAgICAgICAgICAgICAvLyB0cmFja2luZyBvZiBkYXRhIGZvciB2aXN1YWwgcGFyYW1ldGVyIHN1Z2dlc3Rpb25cclxuICAgICAgICAgICAgICByZXNldFRyYWNrZWREYXRhKCk7XHJcbiAgICAgICAgICAgICAgJCgnI3Zpc3VhbC1wYXJhbWV0ZXItYnV0dG9uJykucHJvcCgnZGlzYWJsZWQnLCB0cnVlKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcblxyXG4gICAgICAgICAgICAgIGlmICghJCgnI3BsYXktYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgIC8vZ28gYmFjayBvbmUgc2Vjb25kIGFuZCBkcmF3IHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAgICAgICAgICAgIC8vdGhpcyBhcHBseXMgdGhlIGNoYW5nZXNcclxuXHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogVHJhY2sgdmlzdWFsIHBhcmFtZXRlciBidXR0b25cclxuICAgICAgICovXHJcbiAgICAgICQoJyN2aXN1YWwtcGFyYW1ldGVyLWJ1dHRvbicpLmNsaWNrKCgpPT57XHJcbiAgICAgICAgICBpZiAoJCgnI3Zpc3VhbC1wYXJhbWV0ZXItYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgc2V0VHJhY2tpbmdCb29sZWFuKGZhbHNlKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgc2V0VHJhY2tpbmdCb29sZWFuKHRydWUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBTZW5kIHRoZSB0cmFja2VkIHZpYSBhIGFqYXggcXVlcnkgdG8gdGhlIHNlcnZlciB0byBjYWxjdWxhdGUgdGhlIHBhcmFtZXRlcnNcclxuICAgICAgICovXHJcbiAgICAgICQoJyNjYWxjdWxhdGUtcGFyYW1ldGVyLWJ1dHRvbicpLmNsaWNrKCgpPT57XHJcbiAgICAgICAgICBpZiAoISQoJyNjYWxjdWxhdGUtcGFyYW1ldGVyLWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgIHNldFRyYWNraW5nQm9vbGVhbihmYWxzZSk7XHJcbiAgICAgICAgICAgICAgc2VuZFRyYWNrZWREYXRhKCk7XHJcblxyXG4gICAgICAgICAgICAgIC8vIGRpc2FibGUgYm90aCBidXR0b25zIGFuZCByZW1vdmUgdGhlIGFjdGl2ZSBvbmVcclxuICAgICAgICAgICAgICAkKCcjY2FsY3VsYXRlLXBhcmFtZXRlci1idXR0b24nKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgICAgICAgICAgICQoJyNjYWxjdWxhdGUtcGFyYW1ldGVyLWJ1dHRvbicpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAkKCcjdmlzdWFsLXBhcmFtZXRlci1idXR0b24nKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFNwYXRpYWwgdmlldyBiYWNrZ3JvdW5kIGNvbG9yXHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjYmFja2dyb3VuZC1jb2xvcicpLmNoYW5nZSgoKT0+e1xyXG4gICAgICAgICAgbGV0IGNvbG9yID0gJCgnaW5wdXRbdHlwZT1cInJhZGlvXCJdLmdyb3VwLWJhY2tncm91bmQ6Y2hlY2tlZCcpLnZhbCgpO1xyXG4gICAgICAgICAgJCgnI21haW4tdmlzLXN2ZycpLmNzcygnYmFja2dyb3VuZC1jb2xvcicsIGNvbG9yKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogU2hvdyB0aGUgc3BhdGlhbCB2aWV3IGF4aXMgYnV0dG9uXHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjZHJhdy1heGlzJykub24oJ2NoYW5nZScsICgpPT4ge1xyXG4gICAgICAgICAgaWYgKHRoaXMuY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICQoJyNtYWluLXZpcyBnLnguYXhpcycpLnNob3coKTtcclxuICAgICAgICAgICAgICAkKCcjbWFpbi12aXMgZy55LmF4aXMnKS5zaG93KCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICQoJyNtYWluLXZpcyBnLnguYXhpcycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAkKCcjbWFpbi12aXMgZy55LmF4aXMnKS5oaWRlKCk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBTaG93IHRoZSBmcmFtZSAodGltZSkgbnVtYmVyIGluIHRoZSBzcGF0aWFsIHZpZXcgYnV0dG9uXHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjZHJhdy10aW1lJykub24oJ2NoYW5nZScsICgpPT57XHJcbiAgICAgICAgICBpZiAodGhpcy5jaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgJCgnI21haW4tdmlzIC5mcmFtZS10ZXh0Jykuc2hvdygpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAkKCcjbWFpbi12aXMgLmZyYW1lLXRleHQnKS5oaWRlKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIERyYXcgdGhlIG5ldHdvcmsgYmFja2dyb3VuZCBjb2xvclxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI25ldHdvcmstYmFja2dyb3VuZCcpLm9uKCdjaGFuZ2UnLCAoKT0+IHtcclxuICAgICAgICAgIGlmICh0aGlzLmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICBzZXROZXR3b3JrQmFja2dyb3VuZCh0cnVlKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgc2V0TmV0d29ya0JhY2tncm91bmQoZmFsc2UpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBTZXQgdGhlIG5ldHdvcmsgYmFja2dyb3VuZCBlZGdlIGxpbWl0XHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjbmV0d29yay1iYWNrZ3JvdW5kLWxpbWl0JykudmFsKDEpO1xyXG4gICAgICAkKCcjbmV0d29yay1iYWNrZ3JvdW5kLWxpbWl0Jykub24oJ2NoYW5nZScsICgpPT57XHJcbiAgICAgICAgICBsZXQgdmFsID0gJCh0aGlzKS52YWwoKTtcclxuICAgICAgICAgIGlmICgkLmlzTnVtZXJpYyh2YWwpICYmIHZhbCA+IDApIHtcclxuICAgICAgICAgICAgICBzZXROZXR3b3JrQmFja2dyb3VuZExpbWl0KHZhbCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICQodGhpcykudmFsKDEpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBDb2xvciBTY2FsZSBGdW5jdGlvbiBSYWRpbyBidXR0b25zXHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjY29sb3Itc2NhbGUtcmFkaW8tZm9ybSBpbnB1dCcpLm9uKCdjaGFuZ2UnLCAoKT0+e1xyXG4gICAgICAgICAgdGhpcy5jb2xvclNjYWxlWyd0eXBlJ10gPSAkKCdpbnB1dFtuYW1lPWNvbG9yLXNjYWxlLXJhZGlvXTpjaGVja2VkJywgJyNjb2xvci1zY2FsZS1yYWRpby1mb3JtJykudmFsKCk7XHJcbiAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgIC8vZ28gYmFjayBvbmUgc2Vjb25kIGFuZCBkcmF3IHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgIHRoaXMuZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuICBzZl9saXN0ZW5lcnMoKSB7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogRHJhdyBkaXJlY3Rpb24gYXJyb3cgb2YgdGhlIGFuaW1hbFxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2RyYXctZGlyZWN0aW9uJykuY2xpY2soKCk9PntcclxuICAgICAgICAgIGlmICgkKCcjZHJhdy1kaXJlY3Rpb24nKS5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgIGlmICghKCdkaXJlY3Rpb24nIGluIGRhdGFzZXRbMF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgIGRpc2FibGVQbGF5QnV0dG9uKCk7XHJcbiAgICAgICAgICAgICAgICAgIC8vIGFqYXggcXVlcnkgdG8gZ2V0IGRpcmVjdGlvbiBkYXRhXHJcbiAgICAgICAgICAgICAgICAgIGdldERhdGFzZXRGZWF0dXJlKCdkaXJlY3Rpb24nKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgJCgnLmFycm93Jykuc2hvdygpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAkKCcuYXJyb3cnKS5oaWRlKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgIC8vZ28gYmFjayBvbmUgc2Vjb25kIGFuZCBkcmF3IHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgIHRoaXMuZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgICAgICAgLy90aGlzLmRyYXcoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogRHJhdyBtZWRvaWQgaW4gY29sb3IgYnV0dG9uXHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjZHJhdy1tZWRvaWQnKS5jbGljaygoKSA9PiB7XHJcbiAgICAgICAgICBpZiAoJCgnI2RyYXctbWVkb2lkJykuaXMoJzpjaGVja2VkJykpIHtcclxuXHJcbiAgICAgICAgICAgICAgaWYgKCEoJ21lZG9pZCcgaW4gc3dhcm1EYXRhWzBdKSkge1xyXG4gICAgICAgICAgICAgICAgICBnZXRTd2FybURhdGFzZXRGZWF0dXJlKCdtZWRvaWQnKTtcclxuXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHRoaXMuc2V0TWVkb2lkQW5pbWFsKHN3YXJtRGF0YVt0aGlzLmluZGV4VGltZV1bJ21lZG9pZCddKTtcclxuICAgICAgICAgICAgICAvLyBkaXNwbGF5IHRoZSBtZWRvaWRcclxuICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoJyNhbmltYWwtJyArIHRoaXMubWVkb2lkQW5pbWFsKVxyXG4gICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnbWVkb2lkJywgdHJ1ZSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIC8vIGRvIG5vdCBkaXNwbGF5IHRoZSBtZWRvaWQgZmlzaFxyXG4gICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgnI2FuaW1hbC0nICsgdGhpcy5tZWRvaWRBbmltYWwpXHJcbiAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdtZWRvaWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgdGhpcy5zZXRNZWRvaWRBbmltYWwoLTEpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBEcmF3IGNlbnRyb2lkIGJ1dHRvblxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2RyYXctY2VudHJvaWQnKS5jbGljaygoKT0+e1xyXG4gICAgICAgICAgaWYgKCQoJyNkcmF3LWNlbnRyb2lkJykuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICBpZiAoISgnY2VudHJvaWQnIGluIHN3YXJtRGF0YVswXSkpIHtcclxuICAgICAgICAgICAgICAgICAgZ2V0U3dhcm1EYXRhc2V0RmVhdHVyZSgnY2VudHJvaWQnKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgLy8gZGlzcGxheSB0aGUgY2VudHJvaWRcclxuICAgICAgICAgICAgICAkKCcjZy1jZW50cm9pZCcpLnNob3coKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgLy8gaGlkZSB0aGUgY2VudHJvaWRcclxuICAgICAgICAgICAgICAkKCcjZy1jZW50cm9pZCcpLmhpZGUoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIERyYXcgY29udmV4IGh1bGwgaW4gY29sb3IgYnV0dG9uXHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjZHJhdy1jb252ZXgtaHVsbCcpLmNsaWNrKCgpPT57XHJcbiAgICAgICAgICBpZiAoJCgnI2RyYXctY29udmV4LWh1bGwnKS5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgIGlmICghKCdodWxsJyBpbiBzd2FybURhdGFbMF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgIGdldFN3YXJtRGF0YXNldEZlYXR1cmUoJ2NvbnZleF9odWxsJyk7XHJcblxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIERyYXcgdHJpYW5ndWxhdGlvblxyXG4gICAgICAgKi9cclxuICAgICAgJCgnI2RyYXctdHJpYW5ndWxhdGlvbicpLmNsaWNrKCgpPT57XHJcbiAgICAgICAgICBpZiAoJCgnI2RyYXctdHJpYW5ndWxhdGlvbicpLmlzKCc6Y2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICAgaWYgKCEoJ3RyaWFuZ3VsYXRpb24nIGluIHN3YXJtRGF0YVswXSkpIHtcclxuICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnZXJlJyk7XHJcbiAgICAgICAgICAgICAgICAgIGdldFN3YXJtRGF0YXNldEZlYXR1cmUoJ3RyaWFuZ3VsYXRpb24nKTtcclxuICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhzd2FybURhdGFbdGhpcy5pbmRleFRpbWVdWyd0cmlhbmd1bGF0aW9uJ10pO1xyXG5cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgaWYgKCEkKCcjcGxheS1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAgICAgLy9nbyBiYWNrIG9uZSBzZWNvbmQgYW5kIGRyYXcgdGhlIG5leHQgZnJhbWVcclxuICAgICAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLmRlY0luZGV4VGltZSgpO1xyXG4gICAgICAgICAgICAgICAgICAvL3RoaXMuZHJhdygpO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogRHJhdyB2b3Jvbm9pXHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjZHJhdy12b3Jvbm9pJykuY2xpY2soKCk9PntcclxuICAgICAgICAgIGlmICgkKCcjZHJhdy12b3Jvbm9pJykuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICBpZiAoISgndm9yb25vaScgaW4gc3dhcm1EYXRhWzBdKSkge1xyXG4gICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdlcmUnKTtcclxuICAgICAgICAgICAgICAgICAgZ2V0U3dhcm1EYXRhc2V0RmVhdHVyZSgndm9yb25vaScpO1xyXG4gICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHN3YXJtRGF0YVt0aGlzLmluZGV4VGltZV1bJ3Zvcm9ub2knXSk7XHJcblxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgICAgICAvL3RoaXMgYXBwbHlzIHRoZSBjaGFuZ2VzXHJcbiAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3RoZXJlJyk7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgICAgICAgICAgIC8vdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG5cclxuICB9XHJcbiAgYWZfbGlzdGVuZXJzKCkge1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIERyYXcgU3BlZWQgYnV0dG9uXHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjZHJhdy1zcGVlZCcpLmNsaWNrKCgpPT57XHJcbiAgICAgICAgICAkKCcuZHJhdy1kZXRhaWxzJykuaGlkZSgpXHJcbiAgICAgICAgICAgICAgLmZpbmQoJ2lucHV0OmNoZWNrYm94JykucHJvcCgnY2hlY2tlZCcsIHRydWUpLmNsaWNrKCk7XHJcbiAgICAgICAgICBpZiAoJCgnI2RyYXctc3BlZWQnKS5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgIC8vIGxvYWQgYWJzb2x1dGUgZmVhdHVyZSBzcGVlZCBkYXRhIG9uY2VcclxuICAgICAgICAgICAgICBpZiAoISgnc3BlZWQnIGluIGRhdGFzZXRbMF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgIGRpc2FibGVQbGF5QnV0dG9uKCk7XHJcbiAgICAgICAgICAgICAgICAgIC8vIGFqYXggcXVlcnkgdG8gZ2V0IHRoZSBhYnNvbHV0ZSBmZWF0dXJlIHNwZWVkXHJcbiAgICAgICAgICAgICAgICAgIGdldERhdGFzZXRGZWF0dXJlKCdzcGVlZCcpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAvLyAkKCcuZHJhdy1kZXRhaWxzJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICQoJyNkcmF3LXNwZWVkLWRldGFpbHMnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgJCgnI2RyYXctYWNjZWxlcmF0aW9uJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAkKCcjZHJhdy1kaXN0YW5jZV9jZW50cm9pZCcpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgJCgnI2RyYXctbWlkbGluZV9vZmZzZXQnKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlU2NhbGUoJ3NwZWVkJyk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICQoJyNkcmF3LXNwZWVkLWRldGFpbHMnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVTY2FsZSgnYmxhY2snKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC8vY2hhbmdlIGNvbG9yIGxlZ2VuZFxyXG4gICAgICAgICAgZDMuc2VsZWN0QWxsKCcuY29sb3JMZWdlbmQgKicpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgdGhpcy5jaGFuZ2VsZWdlbmQoKTtcclxuXHJcbiAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgIC8vZ28gYmFjayBvbmUgc2Vjb25kIGFuZCBkcmF3IHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgIHRoaXMuZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgICAgICAgLy90aGlzLmRyYXcoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogRHJhdyBhY2NlbGVyYXRpb24gYnV0dG9uXHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjZHJhdy1hY2NlbGVyYXRpb24nKS5jbGljaygoKT0+e1xyXG4gICAgICAgICAgJCgnLmRyYXctZGV0YWlscycpLmhpZGUoKVxyXG4gICAgICAgICAgICAgIC5maW5kKCdpbnB1dDpjaGVja2JveCcpLnByb3AoJ2NoZWNrZWQnLCB0cnVlKS5jbGljaygpO1xyXG4gICAgICAgICAgaWYgKCQoJyNkcmF3LWFjY2VsZXJhdGlvbicpLmlzKCc6Y2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICAgLy8gbG9hZCBhYnNvbHV0ZSBmZWF0dXJlIGFjY2VsZXJhdGlvbiBkYXRhIG9uY2VcclxuICAgICAgICAgICAgICBpZiAoISgnYWNjZWxlcmF0aW9uJyBpbiBkYXRhc2V0WzBdKSkge1xyXG4gICAgICAgICAgICAgICAgICBkaXNhYmxlUGxheUJ1dHRvbigpO1xyXG4gICAgICAgICAgICAgICAgICAvLyBhamF4IHF1ZXJ5IHRvIGdldCB0aGUgYWJzb2x1dGUgZmVhdHVyZSBhY2NlbGVyYXRpb25cclxuICAgICAgICAgICAgICAgICAgZ2V0RGF0YXNldEZlYXR1cmUoJ2FjY2VsZXJhdGlvbicpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAkKCcjZHJhdy1hY2NlbGVyYXRpb24tZGV0YWlscycpLnNob3coKTtcclxuICAgICAgICAgICAgICAkKCcjZHJhdy1zcGVlZCcpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgJCgnI2RyYXctZGlzdGFuY2VfY2VudHJvaWQnKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICQoJyNkcmF3LW1pZGxpbmVfb2Zmc2V0JykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICB0aGlzLnNldEFjdGl2ZVNjYWxlKCdhY2NlbGVyYXRpb24nKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgJCgnI2RyYXctYWNjZWxlcmF0aW9uLWRldGFpbHMnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVTY2FsZSgnYmxhY2snKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgICQoJy5kcmF3LWRldGFpbHMuYWN0aXZlJykuY2xpY2soKTtcclxuICAgICAgICAgIC8vY2hhbmdlIGNvbG9yIGxlZ2VuZFxyXG4gICAgICAgICAgZDMuc2VsZWN0QWxsKCcuY29sb3JMZWdlbmQgKicpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgdGhpcy5jaGFuZ2VsZWdlbmQoKTtcclxuXHJcbiAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgIC8vZ28gYmFjayBvbmUgc2Vjb25kIGFuZCBkcmF3IHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgIHRoaXMuZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgICAgICAgLy90aGlzLmRyYXcoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogRHJhdyBkaXN0YW5jZSB0byBjZW50cm9pZCBidXR0b25cclxuICAgICAgICovXHJcbiAgICAgICQoJyNkcmF3LWRpc3RhbmNlX2NlbnRyb2lkJykuY2xpY2soKCk9PntcclxuICAgICAgICAgICQoJy5kcmF3LWRldGFpbHMnKS5oaWRlKClcclxuICAgICAgICAgICAgICAuZmluZCgnaW5wdXQ6Y2hlY2tib3gnKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSkuY2xpY2soKTtcclxuICAgICAgICAgIGlmICgkKCcjZHJhdy1kaXN0YW5jZV9jZW50cm9pZCcpLmlzKCc6Y2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2NoZWNrZWQnKTtcclxuICAgICAgICAgICAgICAvLyBsb2FkIGFic29sdXRlIGZlYXR1cmUgZGlzdGFuY2VfY2VudHJvaWQgZGF0YSBvbmNlXHJcbiAgICAgICAgICAgICAgaWYgKCEoJ2Rpc3RhbmNlX2NlbnRyb2lkJyBpbiBkYXRhc2V0WzBdKSkge1xyXG4gICAgICAgICAgICAgICAgICBkaXNhYmxlUGxheUJ1dHRvbigpO1xyXG4gICAgICAgICAgICAgICAgICAvLyBhamF4IHF1ZXJ5IHRvIGdldCB0aGUgYWJzb2x1dGUgZmVhdHVyZSBkaXN0YW5jZV9jZW50cm9pZFxyXG4gICAgICAgICAgICAgICAgICBnZXREYXRhc2V0RmVhdHVyZSgnZGlzdGFuY2VfY2VudHJvaWQnKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YXNldCk7XHJcbiAgICAgICAgICAgICAgJCgnI2RyYXctZGlzdGFuY2VfY2VudHJvaWQtZGV0YWlscycpLnNob3coKTtcclxuICAgICAgICAgICAgICAkKCcjZHJhdy1zcGVlZCcpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgJCgnI2RyYXctYWNjZWxlcmF0aW9uJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAkKCcjZHJhdy1taWRsaW5lX29mZnNldCcpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVTY2FsZSgnZGlzdGFuY2VfY2VudHJvaWQnKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdibGFjaycpO1xyXG4gICAgICAgICAgICAgICQoJyNkcmF3LWRpc3RhbmNlX2NlbnRyb2lkLWRldGFpbHMnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVTY2FsZSgnYmxhY2snKTtcclxuXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAkKCcuZHJhdy1kZXRhaWxzLmFjdGl2ZScpLmNsaWNrKCk7XHJcblxyXG4gICAgICAgICAgLy9jaGFuZ2UgY29sb3IgbGVnZW5kXHJcbiAgICAgICAgICBkMy5zZWxlY3RBbGwoJy5jb2xvckxlZ2VuZCAqJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICB0aGlzLmNoYW5nZWxlZ2VuZCgpO1xyXG5cclxuICAgICAgICAgIGlmICghJCgnI3BsYXktYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgLy9nbyBiYWNrIG9uZSBzZWNvbmQgYW5kIGRyYXcgdGhlIG5leHQgZnJhbWVcclxuICAgICAgICAgICAgICAvL3RoaXMgYXBwbHlzIHRoZSBjaGFuZ2VzXHJcbiAgICAgICAgICAgICAgdGhpcy5kZWNJbmRleFRpbWUoKTtcclxuICAgICAgICAgICAgICAvL3RoaXMuZHJhdygpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBEcmF3IG1pZGxpbmUgb2Zmc2V0XHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjZHJhdy1taWRsaW5lX29mZnNldCcpLmNsaWNrKCgpPT57XHJcbiAgICAgICAgICAkKCcuZHJhdy1kZXRhaWxzJykuaGlkZSgpXHJcbiAgICAgICAgICAgICAgLmZpbmQoJ2lucHV0OmNoZWNrYm94JykucHJvcCgnY2hlY2tlZCcsIHRydWUpLmNsaWNrKCk7XHJcbiAgICAgICAgICBpZiAoJCgnI2RyYXctbWlkbGluZV9vZmZzZXQnKS5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgIC8vIGxvYWQgYWJzb2x1dGUgZmVhdHVyZSBkcmF3LW1pZGxpbmVfb2Zmc2V0IGRhdGEgb25jZVxyXG4gICAgICAgICAgICAgIGlmICghKCdkcmF3LW1pZGxpbmVfb2Zmc2V0JyBpbiBkYXRhc2V0WzBdKSkge1xyXG4gICAgICAgICAgICAgICAgICBkaXNhYmxlUGxheUJ1dHRvbigpO1xyXG4gICAgICAgICAgICAgICAgICAvLyBhamF4IHF1ZXJ5IHRvIGdldCB0aGUgYWJzb2x1dGUgZmVhdHVyZSBtaWRsaW5lX29mZnNldFxyXG4gICAgICAgICAgICAgICAgICBnZXREYXRhc2V0RmVhdHVyZSgnbWlkbGluZV9vZmZzZXQnKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgJCgnI2RyYXctbWlkbGluZV9vZmZzZXQtZGV0YWlscycpLnNob3coKTtcclxuICAgICAgICAgICAgICAkKCcjZHJhdy1zcGVlZCcpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgJCgnI2RyYXctYWNjZWxlcmF0aW9uJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAkKCcjZHJhdy1kaXN0YW5jZV9jZW50cm9pZCcpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgc2V0QWN0aXZlU2NhbGUoJ21pZGxpbmVfb2Zmc2V0Jyk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHNldEFjdGl2ZVNjYWxlKCdibGFjaycpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgJCgnLmRyYXctZGV0YWlscy5hY3RpdmUnKS5jbGljaygpO1xyXG4gICAgICAgICAgLy9jaGFuZ2UgY29sb3IgbGVnZW5kXHJcbiAgICAgICAgICBkMy5zZWxlY3RBbGwoJy5jb2xvckxlZ2VuZCAqJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICB0aGlzLmNoYW5nZWxlZ2VuZCgpO1xyXG5cclxuICAgICAgICAgIGlmICghJCgnI3BsYXktYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgLy9nbyBiYWNrIG9uZSBzZWNvbmQgYW5kIGRyYXcgdGhlIG5leHQgZnJhbWVcclxuICAgICAgICAgICAgICAvL3RoaXMgYXBwbHlzIHRoZSBjaGFuZ2VzXHJcbiAgICAgICAgICAgICAgdGhpcy5kZWNJbmRleFRpbWUoKTtcclxuICAgICAgICAgICAgICB0aGlzLmRyYXcoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gIH1cclxuICBtZF9saXN0ZW5lcnMoKSB7XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBNZXRhZGF0YSBzd2F0Y2ggZnVuY3Rpb25zIGNvbG9yaW5nIGluZGl2aWR1YWwgYW5pbWFsc1xyXG4gICAgICAgKi9cclxuICAgICAgJCgnLm1ldGFkYXRhLXN3YXRjaC5tZXRhZGF0YS1zd2F0Y2gtY2xpY2thYmxlJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBsZXQgaWQgPSAkKHRoaXMpLmF0dHIoJ3ZhbHVlJyk7XHJcbiAgICAgICAgICBsZXQgY29sb3JSR0IgPSAkKHRoaXMpLmNzcygnYmFja2dyb3VuZC1jb2xvcicpO1xyXG4gICAgICAgICAgLy8gc2V0IHRoZSBjb2xvciBvZiB0aGUgc3dhdGNoIHByZXZpZXdcclxuICAgICAgICAgICQoJyNtZXRhZGF0YS1yb3ctJyArIGlkICsgJyAjcHJldmlldycpXHJcbiAgICAgICAgICAgICAgLmNzcygnYmFja2dyb3VuZC1jb2xvcicsIGNvbG9yUkdCKTtcclxuICAgICAgICAgIC8vIGlmIHdoaXRlIHRoYW4gcmVzZXQgdGhlIGNvbG9yXHJcbiAgICAgICAgICBpZiAoY29sb3JSR0IgPT09ICdyZ2IoMjU1LCAyNTUsIDI1NSknKSB7XHJcbiAgICAgICAgICAgICAgaWYgKG1ldGFkYXRhQ29sb3JbaWRdKSB7XHJcbiAgICAgICAgICAgICAgICAgIGRlbGV0ZSBtZXRhZGF0YUNvbG9yW2lkXTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIG1ldGFkYXRhQ29sb3JbaWRdID0gY29sb3JSR0I7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIE1ldGFkYXRhIGdyb3VwIG1ldGFkYXRhIGZ1bmN0aW9ucyBmb3IgaW5zdGFuY2UgY29sb3Igc2V4XHJcbiAgICAgICAqL1xyXG4gICAgICAkKCcjZ3JvdXAtbWV0YWRhdGEgOmlucHV0JykuY2hhbmdlKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgLy8gcmVzZXQgdGhlIG1ldGFkYXQgYWNvbG9yaW5nXHJcbiAgICAgICAgICByZXNldEluZGl2aWR1YWxNZXRhZGF0YSgpO1xyXG5cclxuICAgICAgICAgIGxldCB2YWx1ZSA9ICQodGhpcykuYXR0cigndmFsdWUnKTtcclxuICAgICAgICAgIGxldCB0bXAgPSBbXTtcclxuXHJcbiAgICAgICAgICAvLyBtZXRhZGF0YSBzZXggaXMgY2hvb3NlbiAtIGNvbG9yaW5nIGJhc2VkIG9uIG0gYW5kIGZcclxuICAgICAgICAgIGlmICh2YWx1ZSA9PT0gJ3NleCcpIHtcclxuICAgICAgICAgICAgICAkKCcjbWV0YWRhdGEtZGl2JykubW9kYWwoJ3RvZ2dsZScpO1xyXG4gICAgICAgICAgICAgIC8vIGNsb3NlIGFuZCBjb2xvciBoZXJlXHJcbiAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhc2V0TWV0YWRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgdG1wLnB1c2goZGF0YXNldE1ldGFkYXRhW2ldW3ZhbHVlXS50b0xvd2VyQ2FzZSgpKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgLy8gY3JlYXRlIGEgc2V0IG9mIGluZGl2aWR1YWwgc3RyaW5ncyBpbiBzZXhcclxuICAgICAgICAgICAgICB0bXAgPSBBcnJheS5mcm9tKG5ldyBTZXQodG1wKSk7XHJcbiAgICAgICAgICAgICAgbGV0IGNvbG9ycyA9IFsnIzdmYzk3ZicsICcjMzg2Y2IwJ107XHJcblxyXG4gICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YXNldE1ldGFkYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdG1wLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YXNldE1ldGFkYXRhW2ldW3ZhbHVlXS50b0xvd2VyQ2FzZSgpID09PSB0bXBbal0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGQgdGhlIGNvbG9yaW5nIHRvIHRoZSBtZXRhZGF0YWNvbG9yIG9iamVjdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhQ29sb3JbZGF0YXNldE1ldGFkYXRhW2ldWydhbmltYWxfaWQnXV0gPSBjb2xvcnNbal07XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgJCgnI21ldGFkYXRhLWlucHV0JykuaGlkZSgpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAkKCcjbWV0YWRhdGEtaW5wdXQnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgLy8gc2V0IHZhbHVlcyBvZiBpbnB1dHNcclxuICAgICAgICAgICAgICAvLyBoZXJlIGFyZSBhdXRvbWF0aWNhbGx5IGlucHV0IHZhbHVlcyBjYWxjdWxhdGVkXHJcbiAgICAgICAgICAgICAgLy8gLjI1IGFuZCAuNzUgcGVyY2VudGlsZXMgYXJlIHVzZWRcclxuICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGFzZXRNZXRhZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICB0bXAucHVzaChkYXRhc2V0TWV0YWRhdGFbaV1bdmFsdWVdKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgbGV0IGJsQXZnID0gZDMucXVhbnRpbGUodG1wLCAwLjI1KTsgLy8gYmVsb3cgYXZlcmFnZSB2YWx1ZVxyXG4gICAgICAgICAgICAgIGxldCBhYkF2ZyA9IGQzLnF1YW50aWxlKHRtcCwgMC43NSk7IC8vIGFib3ZlIGF2ZXJhZ2VcclxuICAgICAgICAgICAgICAkKCcjYmwtYXZnJykudmFsKGJsQXZnKTtcclxuICAgICAgICAgICAgICAkKCcjYWItYXZnJykudmFsKGFiQXZnKTtcclxuICAgICAgICAgICAgICAvLyBjb2xvciB0aGUgYW5pbWFsc1xyXG4gICAgICAgICAgICAgIGNvbG9yTWV0YWRhdGEoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogTWV0YWRhdGEgZ3JvdXAgbWV0YWRhdGEgaW5wdXQgc3Bpbm5lclxyXG4gICAgICAgKiArLy0gMC4xIHRvIHRoZSBpbnB1dCB2YWx1ZVxyXG4gICAgICAgKi9cclxuICAgICAgJCgnLm51bWJlci1zcGlubmVyIGJ1dHRvbicpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgbGV0IGJ0biA9ICQodGhpcyksXHJcbiAgICAgICAgICAgICAgb2xkVmFsdWUgPSBidG4uY2xvc2VzdCgnLm51bWJlci1zcGlubmVyJykuZmluZCgnaW5wdXQnKS52YWwoKS50cmltKCksXHJcbiAgICAgICAgICAgICAgbmV3VmFsID0gMDtcclxuXHJcbiAgICAgICAgICBpZiAoYnRuLmF0dHIoJ2RhdGEtZGlyJykgPT0gJ3VwJykge1xyXG4gICAgICAgICAgICAgIG5ld1ZhbCA9IHBhcnNlRmxvYXQob2xkVmFsdWUpICsgMC4xO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBpZiAob2xkVmFsdWUgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgIG5ld1ZhbCA9IHBhcnNlRmxvYXQob2xkVmFsdWUpIC0gMC4xO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgIG5ld1ZhbCA9IDA7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgbmV3VmFsID0gTWF0aC5yb3VuZChuZXdWYWwgKiAxMDApIC8gMTAwOyAtXHJcbiAgICAgICAgICBidG4uY2xvc2VzdCgnLm51bWJlci1zcGlubmVyJykuZmluZCgnaW5wdXQnKS52YWwobmV3VmFsKTtcclxuICAgICAgICAgIC8vIGNoYW5nZSB0aGUgY29sb3JpbmdcclxuICAgICAgICAgIGNvbG9yTWV0YWRhdGEoKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogTWV0YWRhdGEgaW5wdXQgZmllbGRzIGNoYW5nZVxyXG4gICAgICAgKi9cclxuICAgICAgJCgnLm51bWJlci1zcGlubmVyIGlucHV0Jykub24oJ2lucHV0JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBjb2xvck1ldGFkYXRhKCk7XHJcbiAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBSZXNldCBhbGwgbWV0YWRhdGEgaW5wdXQgcGFyYW1ldGVyc1xyXG4gICAgICAgKi9cclxuICAgICAgJCgnI21ldGFkYXRhLXJlc2V0JykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAkKCcjbWV0YWRhdGEtaW5wdXQnKS5oaWRlKCk7XHJcbiAgICAgICAgICByZXNldEluZGl2aWR1YWxNZXRhZGF0YSgpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgfVxyXG4gIGluaXRTaG93RGVuZHJvZ3JhbUxpc3RlbmVyKGlkKSB7XHJcblxyXG4gICAgICAkKCcjc2hvdy1kZW5kcm9ncmFtLScgKyBpZCkuY2xpY2soZnVuY3Rpb24oKXtcclxuICAgICAgICAgIGxldCBjbGlja2VkQnV0dG9uSUQgPSAkKHRoaXMpLmF0dHIoJ2lkJyk7XHJcbiAgICAgICAgICAvLyBpdGVyYXRlIG92ZXIgYWxsIGJ1dHRvbnMgYW5kIGN1c3RvbSBoaWdobGlnaHQganVzdCBvbmUgb3Igbm9uZVxyXG4gICAgICAgICAgJCgnLnNob3ctZGVuZHJvZ3JhbScpLmVhY2goZnVuY3Rpb24oaSwgYnV0dG9uKXtcclxuICAgICAgICAgICAgICAvLyBhY3RpdmUgZm91bmQgYnV0dG9uXHJcbiAgICAgICAgICAgICAgaWYgKCQoYnV0dG9uKS5hdHRyKCdpZCcpID09PSBjbGlja2VkQnV0dG9uSUQgJiYgJChidXR0b24pLmhhc0NsYXNzKCdidG4tcHJpbWFyeScpID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAkKGJ1dHRvbikuYWRkQ2xhc3MoJ2J0bi1wcmltYXJ5Jyk7XHJcbiAgICAgICAgICAgICAgICAgICQoYnV0dG9uKS5maW5kKCcjYnRuLWxlZnQnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICQoYnV0dG9uKS5maW5kKCcjYnRuLXJpZ2h0Jykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAvLyBUT0RPIGFkZCBoZXJlIGEgcmVzaXplIG9mIHRoZSBtYWluIHZpc1xyXG4gICAgICAgICAgICAgICAgICAvLyAkKCcjZGVuZHJvZ3JhbS1wYW5lbCcpLmluc2VydEFmdGVyKCQodGhpcykpO1xyXG4gICAgICAgICAgICAgIH0gLy8gcmVtb3ZlIGhpZ2hsaWdodFxyXG4gICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAkKGJ1dHRvbikucmVtb3ZlQ2xhc3MoJ2J0bi1wcmltYXJ5Jyk7XHJcbiAgICAgICAgICAgICAgICAgICQoYnV0dG9uKS5maW5kKCcjYnRuLWxlZnQnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICQoYnV0dG9uKS5maW5kKCcjYnRuLXJpZ2h0JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIC8vIHNob3cgZGVuZHJvZ3JhbVxyXG4gICAgICAgICAgaWYgKCQoJy5zaG93LWRlbmRyb2dyYW0uYnRuLXByaW1hcnknKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAkKCcjZGVuZHJvZ3JhbS1wYW5lbCcpLnNob3coKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgJCgnI2RlbmRyb2dyYW0tcGFuZWwnKS5oaWRlKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgIC8vZ28gYmFjayBvbmUgc2Vjb25kIGFuZCBkcmF3IHRoZSBuZXh0IGZyYW1lXHJcbiAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgIHRoaXMuZGVjSW5kZXhUaW1lKCk7XHJcbiAgICAgICAgICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgICAgICAgdGhpcy5kcmF3RGVuZHJvZ3JhbSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICB9XHJcbiAgaF9saXN0ZW5lcnMoKSB7XHJcbiAgICAgIHZhciBjaGVja2JveDtcclxuXHJcbiAgICAgIC8vIFN0b3JlIGdpdmVuIGNoZWNrYm94IGluIHZhcmlhYmxlXHJcbiAgICAgICQoJy5oaWVhcmNoeS1jaGVja2JveCcpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGNoZWNrYm94ID0gJCh0aGlzKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgIC8vIFVzZSBjaGVja2JveCB0byBkcmF3IGRlbmRyb2dyYW1cclxuICAgICAgJCgnLmhpZWFyY2h5LWNoZWNrYm94Jykub24oJ2NoYW5nZScsICgpPT57XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnanVtcHMnKTtcclxuXHJcbiAgICAgICAgICBsZXQgaWQgPSBjaGVja2JveC5hdHRyKCdkYXRhJyk7XHJcbiAgICAgICAgICBsZXQgbmFtZSA9IGNoZWNrYm94LmF0dHIoJ25hbWUnKTtcclxuICAgICAgICAgIGxldCBjaGVja2VkID0gY2hlY2tib3gucHJvcCgnY2hlY2tlZCcpO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coY2hlY2tlZCk7XHJcblxyXG4gICAgICAgICAgaWYgKGNoZWNrZWQgJiYgJCgnLnNob3ctZGVuZHJvZ3JhbScpLmxlbmd0aCA8IG1heE51bWJlckhpZXJhcmNoaWVzKSB7XHJcbiAgICAgICAgICAgICAgZGlzYWJsZVBsYXlCdXR0b24oKTtcclxuICAgICAgICAgICAgICBnZXROZXR3b3JrSGllcmFyY2h5RGF0YShpZCk7XHJcblxyXG4gICAgICAgICAgICAgIGFkZEhpZXJhcmNoeUJ1dHRvbihpZCwgbmFtZSk7XHJcbiAgICAgICAgICAgICAgdGhpcy5pbml0U2hvd0RlbmRyb2dyYW1MaXN0ZW5lcihpZCk7XHJcbiAgICAgICAgICAgICAgJCgnI2RlbmRyb2dyYW0tYnV0dG9ucy1kaXYnKS5zaG93KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyBlbHNlIGlmICgkKCcuc2hvdy1kZW5kcm9ncmFtJykubGVuZ3RoID09PSBtYXhOdW1iZXJIaWVyYXJjaGllcykge1xyXG4gICAgICAgICAgLy8gY29uc29sZS5sb2coJ01heCBudW1iZXIgb2YgaGllcmFyY2hpZXMgaXM6ICcgKyBtYXhOdW1iZXJIaWVyYXJjaGllcyk7XHJcbiAgICAgICAgICAvL1RPRE8gaW1wbGVtZW50IHRoaXMgaGVyZVxyXG4gICAgICAgICAgLy8gbm90aWNlIHVzZXIgdGhhdCBpdCBpcyBub3QgcG9zc2libGUgdG8gc2hvdyBtb3JlIHRoYW4gbiBoaWVyYXJjaGllc1xyXG4gICAgICAgICAgLy8gICAgICAgICAgPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cclxuICAgICAgICAgIC8vICAgPHN0cm9uZz5JbmZvITwvc3Ryb25nPiBBdHRlbnRpb24gdXNlciAuXHJcbiAgICAgICAgICAvLyA8L2Rpdj5cclxuICAgICAgICAgIC8vIH1cclxuICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgIC8vIHRtcCB2YXJpYWJsZSB0byBzYXZlIGlmIHRoZSBidXR0b24gd2hpY2ggaXMgZ29pbmcgdG8gYmUgcmVtb3ZlZFxyXG4gICAgICAgICAgICAgIC8vIHdhcyBhY3RpdmVcclxuICAgICAgICAgICAgICBsZXQgdG1wQWN0aXZlID0gJCgnI3Nob3ctZGVuZHJvZ3JhbS0nICsgaWQpLmhhc0NsYXNzKCdidG4tcHJpbWFyeScpO1xyXG4gICAgICAgICAgICAgIHNldEhpZXJhcmNoeURhdGEoe30sIGlkKTtcclxuXHJcbiAgICAgICAgICAgICAgcmVtb3ZlSGllcmFyY2h5QnV0dG9uKGlkKTtcclxuICAgICAgICAgICAgICAvLyBUT0RPIGZpbmQgYmV0dGVyIHdheSBoZXJlXHJcbiAgICAgICAgICAgICAgZDMuc2VsZWN0KCdnLmgnICsgaWQpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgIC8vIHJlbW92ZSB0aGUgZGVuZHJvZ3JhbSBhbmQgdGhlIHBhbmVsIGlmIHRoZSByZW1vdmVkIGVsZW1lbnQgd2FzIGNoZWNrZWRcclxuICAgICAgICAgICAgICBpZiAodG1wQWN0aXZlID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICQoJyNkZW5kcm9ncmFtLXBhbmVsJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBpZiAoJCgnLnNob3ctZGVuZHJvZ3JhbScpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAkKCcjZGVuZHJvZ3JhbS1idXR0b25zLWRpdicpLmhpZGUoKTtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLy8gcmVzaXplIHRoZSBtYWluIHN2Z1xyXG4gICAgICAgICAgaWYgKCQoJy5zaG93LWRlbmRyb2dyYW0nKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAkKCcjbWFpbi12aXMtZGl2JykucmVtb3ZlQ2xhc3MoJ2NvbC1tZC0xMicpO1xyXG4gICAgICAgICAgICAgICQoJyNtYWluLXZpcy1kaXYnKS5hZGRDbGFzcygnY29sLW1kLTgnKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgJCgnI21haW4tdmlzLWRpdicpLnJlbW92ZUNsYXNzKCdjb2wtbWQtOCcpO1xyXG4gICAgICAgICAgICAgICQoJyNtYWluLXZpcy1kaXYnKS5hZGRDbGFzcygnY29sLW1kLTEyJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFZpc3VhbGl6ZSB0aGUgbmV0d29yayBvbmx5IGluIHRoZSBjaG9vc2VuIGhpZXJhcmNoeVxyXG4gICAgICAgKi9cclxuICAgICAgJCgnLm5ldHdvcmstaGllcmFyY2h5LWNoZWNrYm94Jykub24oJ2NoYW5nZScsICgpPT57XHJcbiAgICAgICAgICAvLyBnZXQgdGhlIGluZm8gZm9yIHRoZSBjbGlja2VkIGJ1dHRvblxyXG4gICAgICAgICAgbGV0IGNoZWNrYm94ID0gJCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAvLyByZXNldCBhbGwgdGhlIG90aGVyIGFjdGl2ZSBjaGVja2JveGVzXHJcbiAgICAgICAgICAkKCcubmV0d29yay1oaWVyYXJjaHktY2hlY2tib3gnKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xyXG4gICAgICAgICAgY2hlY2tib3gucHJvcCgnY2hlY2tlZCcsIHRydWUpO1xyXG5cclxuICAgICAgICAgIGlmIChjaGVja2JveC5wcm9wKCdjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICAvLyBzZXQgdGhlIG5ldHdvcmsgaWRcclxuICAgICAgICAgICAgICBzZXROZXR3b3JrSGllcmFyY2h5KGNoZWNrYm94LmF0dHIoJ2RhdGEnKSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHNldE5ldHdvcmtIaWVyYXJjaHkodW5kZWZpbmVkKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG59XHJcbiAgbl9saXN0ZW5lcnMoKSB7XHJcbiAgICAvKipcclxuICAgICAqIE5ldHdvcmsgYnV0dG9ucyBjbGlja2VkIC0gZ2V0IHRoZSBkYXRhXHJcbiAgICAgKi9cclxuICAgIHZhciBuZXR3b3JrX2lkO1xyXG5cclxuICAgICQoJyNuZXR3b3Jrcy1tb2RhbC1ib2R5IGJ1dHRvbicpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIG5ldHdvcmtfaWQgPSAkKHRoaXMpLmF0dHIoJ2RhdGEnKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgJCgnI25ldHdvcmtzLW1vZGFsLWJvZHkgYnV0dG9uJykuY2xpY2soKCk9PntcclxuICAgICAgICAvLyBhZGQgdGhlIG5hbWUgb2YgdGhlIGNob29zZW4gbmV0d29yayB0byB0aGUgTmV0d29yayBtb2RhbFxyXG4gICAgICAgICQoJyNhY3RpdmUtbmV0d29yay1uYW1lJykudGV4dCgkKHRoaXMpLmF0dHIoJ25hbWUnKSk7XHJcblxyXG4gICAgICAgIGRpc2FibGVQbGF5QnV0dG9uKCk7XHJcbiAgICAgICAgZ2V0TmV0d29ya0RhdGEobmV0d29ya19pZCk7XHJcbiAgICAgICAgLy8gc2V0IHRoZSBjb2xvciBvZiB0aGUgbmV0d29ya1xyXG4gICAgICAgIHRoaXMuc2V0bmV0d29ya0NvbG9yKG5ldHdvcmtfaWQpO1xyXG4gICAgICAgICQoJyNuZXR3b3JrLWRpdicpLm1vZGFsKCd0b2dnbGUnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogTmV0d29yayBidXR0b25zIGNsaWNrZWQgLSBnZXQgdGhlIGRhdGFcclxuICAgICAqL1xyXG4gICAgJCgnI25ldHdvcmstcmVtb3ZlJykuY2xpY2soKCk9PntcclxuICAgICAgICBzZXROZXR3b3JrRGF0YSh7fSk7XHJcbiAgICAgICAgc2V0TmV0d29ya0lEKC0xKTtcclxuICAgICAgICAvLyByZW1vdmUgdGhlIG5ldHdvcmsgY29sb3JcclxuICAgICAgICB0aGlzLnNldG5ldHdvcmtDb2xvcigtMSk7XHJcbiAgICAgICAgJCgnI2FjdGl2ZS1uZXR3b3JrLW5hbWUnKS50ZXh0KCcnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogTmV0d29yayBhdXRvIGJ1dHRvbiBzZXQgYWNpdmUgb3IgcmVtb3ZlXHJcbiAgICAgKi9cclxuICAgICQoJyNuZXR3b3JrLWF1dG8tc3VnZ2VzdCcpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmICghJCgnI25ldHdvcmstYXV0by1zdWdnZXN0JykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICQoJyNuZXR3b3JrLWxpbWl0LXAnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICQoJyNuZXR3b3JrLXNsaWRlcicpLmhpZGUoKTtcclxuXHJcbiAgICAgICAgICAgIHNldE5ldHdvcmtBdXRvKHRydWUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQoJyNuZXR3b3JrLWxpbWl0LXAnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICQoJyNuZXR3b3JrLXNsaWRlcicpLnNob3coKTtcclxuICAgICAgICAgICAgc2V0TmV0d29ya0F1dG8oZmFsc2UpO1xyXG4gICAgICAgICAgICBsZXQgbGltaXQgPSAkKCcjbmV0d29yay1zbGlkZXInKS5zbGlkZXIoJ3ZhbHVlJyk7XHJcbiAgICAgICAgICAgIHNldE5ldHdvckxpbWl0KGxpbWl0KTtcclxuICAgICAgICAgICAgJCgnI25ldHdvcmstbGltaXQnKS52YWwobGltaXQpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxufVxyXG5cclxuXHJcbiAgc3BhdGlhbFZpZXdJbml0KCl7XHJcblxyXG5cclxuXHJcbiAgICAgIGxldCBtaW5Qb2ludCA9IHBhcmFtZXRlcnNbJ21pbiddWydnZW9tZXRyeSddWydjb29yZGluYXRlcyddO1xyXG4gICAgICBsZXQgbWF4UG9pbnQgPSBwYXJhbWV0ZXJzWydtYXgnXVsnZ2VvbWV0cnknXVsnY29vcmRpbmF0ZXMnXTtcclxuICAgICAgLy8gbGV0IGNvb3JkaW5hdGVPcmlnaW4gPSBwYXJhbWV0ZXJzWydjb29yZGluYXRlX29yaWdpbiddWydnZW9tZXRyeSddWydjb29yZGluYXRlcyddO1xyXG4gICAgICAvLyB3aWR0aCA9IHdpZHRoICoxLjAyIC0tPiBzbyB0aGVyZSBpcyBhIG1hcmdpbiBpbiB0aGUgc3BhdGlhbCB2aWV3IHdoZXJlIG5vIGFuaW1hbCBpcyBldmVyXHJcbiAgICAgIHRoaXMudGFua1dpZHRoID0gKG1heFBvaW50WzBdIC0gbWluUG9pbnRbMF0pICogMS4wMjtcclxuICAgICAgdGhpcy50YW5rSGVpZ2h0ID0gKG1heFBvaW50WzFdIC0gbWluUG9pbnRbMV0pICogMS4wMjtcclxuICAgICAgLy9YIGFuZCBZIGF4aXNcclxuICAgICAgbGV0IHggPSBkMy5zY2FsZUxpbmVhcigpXHJcbiAgICAgICAgICAuZG9tYWluKFttaW5Qb2ludFswXSwgbWF4UG9pbnRbMF1dKVxyXG4gICAgICAgICAgLnJhbmdlKFttaW5Qb2ludFswXSwgbWF4UG9pbnRbMF1dKTtcclxuXHJcbiAgICAgIGxldCB4QXhpcyA9IGQzLmF4aXNCb3R0b20oeClcclxuICAgICAgICAgIC50aWNrcygxMClcclxuICAgICAgICAgIC50aWNrU2l6ZSgxMClcclxuICAgICAgICAgIC50aWNrUGFkZGluZyg1KTtcclxuXHJcbiAgICAgIGxldCB5ID0gZDMuc2NhbGVMaW5lYXIoKVxyXG4gICAgICAgICAgLmRvbWFpbihbbWluUG9pbnRbMV0sIG1heFBvaW50WzFdXSlcclxuICAgICAgICAgIC5yYW5nZShbbWluUG9pbnRbMV0sIG1heFBvaW50WzFdXSk7XHJcblxyXG4gICAgICBsZXQgeUF4aXMgPSBkMy5heGlzUmlnaHQoeSlcclxuICAgICAgICAgIC50aWNrcyg3KVxyXG4gICAgICAgICAgLnRpY2tTaXplKDEwKVxyXG4gICAgICAgICAgLnRpY2tQYWRkaW5nKDUpO1xyXG5cclxuICAgICAgLy8gWk9PTUlORyBBTkQgUEFOTklORyBTVFVGRlxyXG5cclxuICAgICAgbGV0IHpvb20gPSBkMy56b29tKClcclxuICAgICAgICAgIC5zY2FsZUV4dGVudChbMSwgNl0pXHJcbiAgICAgICAgICAub24oJ3pvb20nLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgLy9jb25zdHJhaW5lZCB6b29taW5nXHJcbiAgICAgICAgICAgICAgLy8gbW9kaWZ5IHRoZSB0cmFuc2xhdGUgc28gdGhhdCBpdCBuZXZlciBleGl0cyB0aGUgdGFua1xyXG4gICAgICAgICAgICAgIGQzLmV2ZW50LnRyYW5zZm9ybS54ID0gTWF0aC5taW4oMCwgdGhpcy50YW5rV2lkdGggKiAoZDMuZXZlbnQudHJhbnNmb3JtLmsgLSAxKSxcclxuICAgICAgICAgICAgICAgICAgTWF0aC5tYXgodGhpcy50YW5rV2lkdGggKiAoMSAtIGQzLmV2ZW50LnRyYW5zZm9ybS5rKSwgZDMuZXZlbnQudHJhbnNmb3JtLngpKTtcclxuXHJcbiAgICAgICAgICAgICAgZDMuZXZlbnQudHJhbnNmb3JtLnkgPSBNYXRoLm1pbigwLCB0aGlzLnRhbmtIZWlnaHQgKiAoZDMuZXZlbnQudHJhbnNmb3JtLmsgLSAxKSxcclxuICAgICAgICAgICAgICAgICAgTWF0aC5tYXgodGhpcy50YW5rSGVpZ2h0ICogKDEgLSBkMy5ldmVudC50cmFuc2Zvcm0uayksIGQzLmV2ZW50LnRyYW5zZm9ybS55KSk7XHJcblxyXG4gICAgICAgICAgICAgIC8vIHRyYW5zbGF0ZSBhbmQgc2NhbGVcclxuICAgICAgICAgICAgICB0aGlzLnpvb21Hcm91cC5hdHRyKCd0cmFuc2Zvcm0nLCBkMy5ldmVudC50cmFuc2Zvcm0pO1xyXG5cclxuICAgICAgICAgICAgICAvLyByZXNjYWxlIHRoZSBheGlzXHJcbiAgICAgICAgICAgICAgZ1hheGlzLmNhbGwoeEF4aXMuc2NhbGUoZDMuZXZlbnQudHJhbnNmb3JtLnJlc2NhbGVYKHgpKSk7XHJcbiAgICAgICAgICAgICAgZ1lheGlzLmNhbGwoeUF4aXMuc2NhbGUoZDMuZXZlbnQudHJhbnNmb3JtLnJlc2NhbGVZKHkpKSk7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgIC8vdGhlIHN2ZyBjb250YWluZXJcclxuICAgICAgdGhpcy5zdmdDb250YWluZXIgPSBkMy5zZWxlY3QoJyNtYWluLXZpcycpXHJcbiAgICAgICAgICAgIC5jbGFzc2VkKCdzdmctY29udGFpbmVyJywgdHJ1ZSlcclxuICAgICAgICAgICAgLy8gdG8gbWFrZSBpdCByZXNwb25zaXZlIHdpdGggY3NzXHJcbiAgICAgICAgICAgIC5hcHBlbmQoJ3N2ZycpXHJcbiAgICAgICAgICAgIC5hdHRyKCdwcmVzZXJ2ZUFzcGVjdFJhdGlvJywgJ3hNaW5ZTWluIG1lZXQnKVxyXG4gICAgICAgICAgICAuYXR0cigndmlld0JveCcsICcwIDAgJyArIHRoaXMudGFua1dpZHRoICsgJyAnICsgdGhpcy50YW5rSGVpZ2h0KVxyXG4gICAgICAgICAgICAvLyBhZGQgdGhlIGNsYXNzIHN2Zy1jb250ZW50XHJcbiAgICAgICAgICAgIC5jbGFzc2VkKCdzdmctY29udGVudCcsIHRydWUpXHJcbiAgICAgICAgICAgIC5hdHRyKCdpZCcsICdtYWluLXZpcy1zdmcnKVxyXG4gICAgICAgICAgICAuY2FsbCh6b29tKTtcclxuXHJcbiAgICAgIC8qIGRlcGVuZHMgb24gc3ZnIHJhdGlvLCBmb3IgZS5nIDEyNDAvMTkwMCA9IDAuNjUgc28gcGFkZGluZy1ib3R0b20gPSA2NSUgKi9cclxuICAgICAgbGV0IHBlcmNlbnRhZ2UgPSBNYXRoLmNlaWwoKHRoaXMudGFua0hlaWdodCAvIHRoaXMudGFua1dpZHRoKSAqIDEwMCk7XHJcbiAgICAgICQoJyNtYWluLXZpcycpLmFwcGVuZCgkKCc8c3R5bGU+I21haW4tdmlzOjphZnRlciB7cGFkZGluZy10b3A6ICcgKyBwZXJjZW50YWdlICsgJyU7ZGlzcGxheTogYmxvY2s7Y29udGVudDogXCJcIjt9PC9zdHlsZT4gJykpO1xyXG5cclxuICAgICAgdGhpcy56b29tR3JvdXAgPSB0aGlzLnN2Z0NvbnRhaW5lci5hcHBlbmQoJ3N2ZzpnJyk7XHJcblxyXG4gICAgICAvLyBWaXN1YWxpemUgdGhlIGJhY2tncm91bmQgaW1hZ2UgaWYgaXQgaXMgdXBsb2FkZWRcclxuICAgICAgaWYgKHBhcmFtZXRlcnMuYmFja2dyb3VuZF9pbWFnZSkge1xyXG4gICAgICAgICAgdGhpcy56b29tR3JvdXBcclxuICAgICAgICAgICAgICAuYXBwZW5kKCdpbWFnZScpXHJcbiAgICAgICAgICAgICAgLmF0dHIoJ3hsaW5rOmhyZWYnLCAnLycgKyBwYXJhbWV0ZXJzLmJhY2tncm91bmRfaW1hZ2UpXHJcbiAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2JhY2tncm91bmQtaW1hZ2UnKVxyXG4gICAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCB0aGlzLnRhbmtIZWlnaHQpXHJcbiAgICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgdGhpcy50YW5rV2lkdGgpXHJcbiAgICAgICAgICAgICAgLmF0dHIoJ3gnLCAnMCcpXHJcbiAgICAgICAgICAgICAgLmF0dHIoJ3knLCAnMCcpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvL2FwcGVuZCB0aGUgdGFuayBncm91cCB3aXRoIGEgdHJhbnNmb3JtYXRpb24gd2hpY2ggcm90YXRlcyB0aGUgeSBheGlzXHJcbiAgICAgIHRoaXMudGFuayA9IHRoaXMuem9vbUdyb3VwLmFwcGVuZCgnc3ZnOmcnKVxyXG4gICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3RhbmsnKVxyXG4gICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICgpPT57XHJcbiAgICAgICAgICAgICAgbGV0IHggPSBwYXJhbWV0ZXJzLmludmVydGVkX3ggPyAtMSA6IDE7XHJcbiAgICAgICAgICAgICAgbGV0IHkgPSBwYXJhbWV0ZXJzLmludmVydGVkX3kgPyAtMSA6IDE7XHJcbiAgICAgICAgICAgICAgcmV0dXJuICdzY2FsZSgnICsgeCArICcsJyArIHkgKyAnKSc7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgIC8vYWRkIHRoZSBjZW50cm9pZFxyXG4gICAgICB0aGlzLnRhbmsuYXBwZW5kKCdnJylcclxuICAgICAgICAgIC5hdHRyKCdpZCcsICdnLWNlbnRyb2lkJylcclxuICAgICAgICAgIC5hcHBlbmQoJ2NpcmNsZScpXHJcbiAgICAgICAgICAuYXR0cignY2xhc3MnLCAnY2VudHJvaWQnKVxyXG4gICAgICAgICAgLmF0dHIoJ3InLCA2KVxyXG4gICAgICAgICAgLmF0dHIoJ2N4JywgMClcclxuICAgICAgICAgIC5hdHRyKCdjeScsIDApO1xyXG5cclxuICAgICAgLy8gYXJyb3cgZm9yIHRoZSBjZW50cm9pZCBkaXJlY3Rpb25cclxuICAgICAgdGhpcy50YW5rLnNlbGVjdCgnI2ctY2VudHJvaWQnKVxyXG4gICAgICAgICAgLmFwcGVuZCgnc3ZnOmRlZnMnKVxyXG4gICAgICAgICAgLmFwcGVuZCgnc3ZnOm1hcmtlcicpXHJcbiAgICAgICAgICAuYXR0cignaWQnLCAnY2VudHJvaWQtYXJyb3cnKVxyXG4gICAgICAgICAgLmF0dHIoJ3JlZlgnLCAyKVxyXG4gICAgICAgICAgLmF0dHIoJ3JlZlknLCA2KVxyXG4gICAgICAgICAgLmF0dHIoJ21hcmtlcldpZHRoJywgMTMpXHJcbiAgICAgICAgICAuYXR0cignbWFya2VySGVpZ2h0JywgMTMpXHJcbiAgICAgICAgICAuYXR0cignb3JpZW50JywgJ2F1dG8nKVxyXG4gICAgICAgICAgLmFwcGVuZCgnc3ZnOnBhdGgnKVxyXG4gICAgICAgICAgLmF0dHIoJ2QnLCAnTTIsMiBMMiwxMSBMMTAsNiBMMiwyJyk7XHJcblxyXG4gICAgICAvLyBBcHBlbmQgdGhlIGxpbmUgZm9yIHRoZSBkaXJlY3Rpb24gYXJyb3dcclxuICAgICAgdGhpcy50YW5rLnNlbGVjdCgnI2ctY2VudHJvaWQnKVxyXG4gICAgICAgICAgLmFwcGVuZCgnbGluZScpXHJcbiAgICAgICAgICAuYXR0cignaWQnLCAnY2VudHJvaWQtbGluZScpXHJcbiAgICAgICAgICAuYXR0cignbWFya2VyLWVuZCcsICd1cmwoI2NlbnRyb2lkLWFycm93KScpO1xyXG5cclxuICAgICAgLy9hcHBlbmQgbmV0d29yayAgZ3JvdXBcclxuICAgICAgdGhpcy50YW5rLmFwcGVuZCgnZycpXHJcbiAgICAgICAgICAuYXR0cignaWQnLCAnbmV0d29yay1ncm91cCcpO1xyXG5cclxuICAgICAgLy9hcHBlbmQgZGVsYXVuYXktdHJpYW5ndWxhdGlvbiBncm91cFxyXG4gICAgICB0aGlzLnRhbmsuYXBwZW5kKCdnJylcclxuICAgICAgICAgIC5hdHRyKCdpZCcsICdkZWxhdW5heS10cmlhbmd1bGF0aW9uLWdyb3VwJyk7XHJcblxyXG4gICAgICAvL2FwcGVuZCB2b3Jvbm9pIGdyb3VwXHJcbiAgICAgIHRoaXMudGFuay5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgLmF0dHIoJ2lkJywgJ3Zvcm5vaS1ncm91cCcpO1xyXG5cclxuICAgICAgLy9hcHBlbmQgdGhlIGZyYW1lIHRpbWUgdGV4dFxyXG4gICAgICB0aGlzLnN2Z0NvbnRhaW5lci5hcHBlbmQoJ3RleHQnKVxyXG4gICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2ZyYW1lLXRleHQnKVxyXG4gICAgICAgICAgLmF0dHIoJ3gnLCAzMClcclxuICAgICAgICAgIC5hdHRyKCd5JywgMzApXHJcbiAgICAgICAgICAudGV4dCgnLS0gOiAtLSA6IC0tICcpO1xyXG5cclxuICAgICAgLy8gYWRkIHRoZSBheGlzXHJcbiAgICAgIGxldCBnWGF4aXMgPSB0aGlzLnN2Z0NvbnRhaW5lci5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3ggYXhpcycpXHJcbiAgICAgICAgICAuY2FsbCh4QXhpcyk7XHJcblxyXG4gICAgICBsZXQgZ1lheGlzID0gdGhpcy5zdmdDb250YWluZXIuYXBwZW5kKCdnJylcclxuICAgICAgICAgIC5hdHRyKCdjbGFzcycsICd5IGF4aXMnKVxyXG4gICAgICAgICAgLmNhbGwoeUF4aXMpO1xyXG5cclxuICAgICAgLy8gaW5pdCBzdHVmZiBmcm9tIG90aGVyIG1vZHVsZXNcclxuICAgICAgaW5pdFRvb2x0aXAoKTtcclxuICAgICAgaW5pdFNsaWRlcnMoKTtcclxuXHJcbiAgICAgIHRoaXMuaW5pdENvbG9yUGlja2VyKCk7XHJcbiAgICAgIHZhciBsaW5lY2hhcnQgPSBuZXcgTGluZUNoYXJ0KHN3YXJtRGF0YSk7XHJcbiAgICAgIHRoaXMuY3BfbGlzdGVuZXIoKTtcclxuICAgICAgdGhpcy5zZl9saXN0ZW5lcnMoKTtcclxuICAgICAgdGhpcy5hZl9saXN0ZW5lcnMoKTtcclxuICAgICAgdGhpcy5tZF9saXN0ZW5lcnMoKTtcclxuICAgICAgdGhpcy5uX2xpc3RlbmVycygpO1xyXG4gICAgICB0aGlzLmhfbGlzdGVuZXJzKCk7XHJcbiAgICAgIC8vdmFyIGRlbmRyb2dyYW0gPSBuZXcgRGVuZHJvZ3JhbSgpO1xyXG4vL2ZpbmRpbml0XHJcbiAgICAgIHRoaXMuaW5pdERlbmRyb2dyYW0oKTtcclxuICAgICAgbWFrZVJlc2l6YWJsZSh0aGlzLnRhbmtIZWlnaHQsIHRoaXMudGFua1dpZHRoKTtcclxuICAgICAgZGVmYXVsdENvbmZpZygpO1xyXG4gICAgICAvLyBzdGFydCB0aGUgYW5pbWF0aW9uXHJcbiAgICAgIHRoaXMuZHJhdygpO1xyXG4gIH07XHJcbiAgc2V0TWVkb2lkQW5pbWFsKHZhbHVlKSB7XHJcbiAgICAgIHRoaXMubWVkb2lkQW5pbWFsID0gdmFsdWU7XHJcbiAgfVxyXG5cclxufVxyXG5cclxuXHJcblxyXG5cclxuY2xhc3MgQ2hhcnQgZXh0ZW5kcyBEcmF3ZXIge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGRhdGEpIHtcclxuICAgIHN1cGVyKClcclxuICAgICAgLy8gbG9hZCBpbiBhcmd1bWVudHMgZnJvbSBjb25maWcgb2JqZWN0XHJcbiAgICB0aGlzLnN3YXJtRGF0YSA9IGRhdGE7XHJcbiAgICB0aGlzLnN3YXJtX2ZlYXR1cmVzID0gT2JqZWN0LmtleXModGhpcy5zd2FybURhdGFbMF0pO1xyXG4gICAgdGhpcy5saW5lQ2hhcnRXaWR0aCA9IDUwMDA7XHJcbiAgICB0aGlzLnRyZW5kQ2hhcnRzRWxlbSA9IFsnbG93ZXItb3V0ZXItYXJlYScsICdsb3dlci1pbm5lci1hcmVhJywgJ21lZGlhbi1saW5lJywgJ3VwcGVyLWlubmVyLWFyZWEnLCAndXBwZXItb3V0ZXItYXJlYSddO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgKiBpbml0IHRoZSBsaW5lIGNoYXJ0IGFuZCBhbHNvIHRoZSB0cmVuZCBjaGFydFxyXG4gICAgICovXHJcblxyXG5cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIExpbmVDaGFydCBleHRlbmRzIENoYXJ0IHtcclxuICAgIGNvbnN0cnVjdG9yKGRhdGEpe1xyXG4gICAgc3VwZXIoZGF0YSlcclxuICAgIHRoaXMubGluZUNoYXJ0KCk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGxpbmVDaGFydCgpIHtcclxuXHJcbiAgICAgIHJhdGlvID0gTWF0aC5jZWlsKHRoaXMuc3dhcm1EYXRhLmxlbmd0aCAvIHRoaXMubGluZUNoYXJ0V2lkdGgpO1xyXG5cclxuICAgICAgLy8gU3dhcm0gZmVhdHVyZXMgbGluZSBjaGFydFxyXG4gICAgICBsZXQgbGluZUNoYXJ0SGVpZ2h0ID0gNTAwOyAvLyB0aGUgbGluZSBjaGFydCBoZWlnaHRcclxuICAgICAgbGV0IG1hcmdpbiA9IHtcclxuICAgICAgICAgIHRvcDogMTAsXHJcbiAgICAgICAgICByaWdodDogMCxcclxuICAgICAgICAgIGJvdHRvbTogMTAwLFxyXG4gICAgICAgICAgbGVmdDogMTBcclxuICAgICAgfTtcclxuICAgICAgbGV0IG1hcmdpblRvTGVnZW5kID0gNTA7XHJcblxyXG4gICAgICBsZXQgc3dhcm1fZmVhdHVyZXMgPSB0aGlzLnN3YXJtX2ZlYXR1cmVzO1xyXG4gICAgICAvLyByZW1vdmUgdGhlIHRpbWUga2V5XHJcbiAgICAgIGxldCBpbmRleCA9IHN3YXJtX2ZlYXR1cmVzLmluZGV4T2YoJ3RpbWUnKTtcclxuICAgICAgc3dhcm1fZmVhdHVyZXMuc3BsaWNlKGluZGV4LCAxKTtcclxuXHJcbiAgICAgIGxldCBsaW5lQ2hhcnREYXRhID0gW107XHJcbiAgICAgIC8vIGFnZ3JlZ2F0ZSBhbmQgYXZlcmFnZSB0aGUgc3dhcm0gZGF0YSB0byB0aGlzLmxpbmVDaGFydFdpZHRoIHBvaW50cyBpbiB0aGUgbGluZSBjaGFydFxyXG4gICAgICBpZiAodGhpcy5zd2FybURhdGEubGVuZ3RoID4gdGhpcy5saW5lQ2hhcnRXaWR0aCkge1xyXG4gICAgICAgICAgLy8gdG1wIGFycmF5IGZvciB0aGUgYWdncmVnYXRlZCBhbmQgYXZlcmFnZWQgZmVhdHVyZXNcclxuICAgICAgICAgIGxldCB0bXAgPSBuZXcgQXJyYXkoc3dhcm1fZmVhdHVyZXMubGVuZ3RoKS5maWxsKDApO1xyXG5cclxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zd2FybURhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAvLyBhZ2dyZWdhdGUgdGhlIGZlYXR1cmVzIGluIHRoZSB0ZW1wIGFycmF5XHJcbiAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzd2FybV9mZWF0dXJlcy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICB0bXBbal0gKz0gdGhpcy5zd2FybURhdGFbaV1bc3dhcm1fZmVhdHVyZXNbal1dO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAvLyBpZiB0aGUgcmF0aW8gaXMgemVybyB0aGVuIGF2ZXJhZ2UgaXQgYW5kIHNldCBpdCB0byB6ZXJvXHJcbiAgICAgICAgICAgICAgaWYgKGkgJSByYXRpbyA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICBsZXQgdG1wX29iamVjdCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICd0aW1lJzogaSAvIHJhdGlvXHJcbiAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHN3YXJtX2ZlYXR1cmVzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0bXBbal0gPSB0bXBbal0gLyByYXRpbztcclxuICAgICAgICAgICAgICAgICAgICAgIHRtcF9vYmplY3Rbc3dhcm1fZmVhdHVyZXNbal1dID0gdG1wW2pdO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICBsaW5lQ2hhcnREYXRhLnB1c2godG1wX29iamVjdCk7XHJcbiAgICAgICAgICAgICAgICAgIHRtcCA9IG5ldyBBcnJheShzd2FybV9mZWF0dXJlcy5sZW5ndGgpLmZpbGwoMCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgbGluZUNoYXJ0RGF0YSA9IHRoaXMuc3dhcm1EYXRhO1xyXG4gICAgICB9XHJcbiAgICAgIC8vY29uc29sZS5sb2cobGluZUNoYXJ0RGF0YSk7XHJcbiAgICAgIHpvb21GdW5jdGlvbiA9IGQzLnNjYWxlTGluZWFyKClcclxuICAgICAgICAgIC5kb21haW4oWzAsIGxpbmVDaGFydERhdGEubGVuZ3RoXSlcclxuICAgICAgICAgIC5yYW5nZShbMCwgdGhpcy5saW5lQ2hhcnRXaWR0aF0pO1xyXG5cclxuXHJcbiAgICAgIC8vIHggYXhpcyBzY2FsZSAtIG1pbnVzIG1hcmdpbkxpbmVDaGFydCAgbmVlZGVkXHJcbiAgICAgIHggPSBkMy5zY2FsZUxpbmVhcigpXHJcbiAgICAgICAgICAuZG9tYWluKFswLCBsaW5lQ2hhcnREYXRhLmxlbmd0aF0pXHJcbiAgICAgICAgICAucmFuZ2UoWzAsIHRoaXMubGluZUNoYXJ0V2lkdGhdKTtcclxuICAgICAgbGV0IHgyID0gZDMuc2NhbGVMaW5lYXIoKVxyXG4gICAgICAgICAgLmRvbWFpbihbMCwgbGluZUNoYXJ0RGF0YS5sZW5ndGhdKVxyXG4gICAgICAgICAgLnJhbmdlKFswLCB0aGlzLmxpbmVDaGFydFdpZHRoXSk7XHJcbiAgICAgIC8vIGRlZmluZSB3aGVyZSB0aGUgYXhpcyBpcyBldGNcclxuICAgICAgbGV0IHhBeGlzID0gZDMuYXhpc0JvdHRvbSh4KVxyXG4gICAgICAgICAgLnRpY2tzKDEwKVxyXG4gICAgICAgICAgLnRpY2tTaXplKDEwKVxyXG4gICAgICAgICAgLnRpY2tQYWRkaW5nKDUpXHJcbiAgICAgICAgICAudGlja0Zvcm1hdChmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKGQgKiByYXRpbykgLyAxNTAwKSAlIDYwICsgJzonICsgTWF0aC5mbG9vcigoZCAqIHJhdGlvKSAvIHBhcmFtZXRlcnNbJ2ZwcyddKSAlIDYwICsgJzo6JyArIChkICogcmF0aW8pICUgcGFyYW1ldGVyc1snZnBzJ107XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgIC8vIHkgYXhpcyBzY2FsZSB3aGljaCBpcyBub3JtYWxpemVkXHJcbiAgICAgIHkgPSBkMy5zY2FsZUxpbmVhcigpXHJcbiAgICAgICAgICAuZG9tYWluKFswLCAxMDBdKVxyXG4gICAgICAgICAgLnJhbmdlKFtsaW5lQ2hhcnRIZWlnaHQsIDBdKTtcclxuICAgICAgLy8gZGVmaW5lIHdoZXJlIHRoZSBheGlzIGlzIGV0Y1xyXG4gICAgICBsZXQgeUF4aXMgPSBkMy5heGlzTGVmdCh5KVxyXG4gICAgICAgICAgLnRpY2tzKDApXHJcbiAgICAgICAgICAudGlja1NpemUoMTApXHJcbiAgICAgICAgICAudGlja1BhZGRpbmcoNSk7XHJcblxyXG4gICAgICBsZXQgZHJhZ2dlZCA9ICgpPT57XHJcbiAgICAgICAgICAvLyBkcmFnZ2VkIGZ1bmN0aW9uIGdldCB0aGUgY29vcmRpbmF0ZXMgYW5kIGNhbGN1bGF0ZSB0aGUgdGltZSBtb21lbnQgZnJvbSB0aGlzXHJcbiAgICAgICAgICBsZXQgY29vcmRzID0gZDMubW91c2UodGhpcyk7XHJcbiAgICAgICAgICBpZiAoY29vcmRzWzBdIDwgbWFyZ2luLmxlZnQgfHwgY29vcmRzWzBdID4gdGhpcy5saW5lQ2hhcnRXaWR0aCB8fCBjb29yZHNbMV0gPCAwIHx8IGNvb3Jkc1sxXSA+IGxpbmVDaGFydEhlaWdodCkge1xyXG4gICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC8vIHRtcCBzY2FsZSB0byBpbmNsdWRlIHRoZSB6b29tIGZhY3RvclxyXG4gICAgICAgICAgbGV0IHRtcFNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKVxyXG4gICAgICAgICAgICAgIC5kb21haW4oem9vbUZ1bmN0aW9uLnJhbmdlKCkpXHJcbiAgICAgICAgICAgICAgLnJhbmdlKHpvb21GdW5jdGlvbi5kb21haW4oKSk7XHJcbiAgICAgICAgICAvLyBzZXQgdGhlIG5ldyB0aW1lXHJcbiAgICAgICAgICB0aGlzLnNldEluZGV4VGltZShNYXRoLmZsb29yKCh0bXBTY2FsZShjb29yZHNbMF0gLSBtYXJnaW4ubGVmdCkpICogcmF0aW8pKTtcclxuICAgICAgfTtcclxuICAgICAgbGV0IHpvb20gPSBkMy56b29tKClcclxuICAgICAgICAgIC5zY2FsZUV4dGVudChbMSwgMjBdKVxyXG4gICAgICAgICAgLnRyYW5zbGF0ZUV4dGVudChbXHJcbiAgICAgICAgICAgICAgWzAsIDBdLFxyXG4gICAgICAgICAgICAgIFt0aGlzLmxpbmVDaGFydFdpZHRoLCBsaW5lQ2hhcnRIZWlnaHRdXHJcbiAgICAgICAgICBdKVxyXG4gICAgICAgICAgLmV4dGVudChbXHJcbiAgICAgICAgICAgICAgWzAsIDBdLFxyXG4gICAgICAgICAgICAgIFt0aGlzLmxpbmVDaGFydFdpZHRoLCBsaW5lQ2hhcnRIZWlnaHRdXHJcbiAgICAgICAgICBdKVxyXG4gICAgICAgICAgLm9uKCd6b29tJywgKCk9PntcclxuICAgICAgICAgICAgICAvLyBnZXQgdGhlIHRyYW5zZm9ybSBmYWN0b3JcclxuICAgICAgICAgICAgICBsZXQgdCA9IGQzLmV2ZW50LnRyYW5zZm9ybTtcclxuICAgICAgICAgICAgICAvLyBjaGFuZ2Ugc2NhbGluZyBmdW5jdGlvblxyXG4gICAgICAgICAgICAgIHpvb21GdW5jdGlvbiA9IHguZG9tYWluKHQucmVzY2FsZVgoeDIpLmRvbWFpbigpKTtcclxuICAgICAgICAgICAgICAvLyB6b29tIGVhY2ggYXZhaWFibGUgbGluZVxyXG4gICAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiBsaW5lcykge1xyXG4gICAgICAgICAgICAgICAgICBpZiAobGluZXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgem9vbUdyb3VwLnNlbGVjdCgoJyMnICsga2V5ICsgJ0xpbmUnKSkuYXR0cignZCcsIGxpbmVzW2tleV0pO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIC8vIHpvb20gdGhlIHRyZW5kIGNoYXJ0c1xyXG4gICAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiB0cmVuZENoYXJ0c1pvb20pIHtcclxuICAgICAgICAgICAgICAgICAgaWYgKHRyZW5kQ2hhcnRzWm9vbS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudHJlbmRDaGFydHNFbGVtLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgem9vbUdyb3VwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZWxlY3QoKCcjJyArIGtleSArICdUcmVuZENoYXJ0IC4nICsgdGhpcy50cmVuZENoYXJ0c0VsZW1baV0pKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignZCcsIHRyZW5kQ2hhcnRzWm9vbVtrZXldW3RoaXMudHJlbmRDaGFydHNFbGVtW2ldXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgLy8gcmVzY2FsZSB0aGUgYXhpc1xyXG4gICAgICAgICAgICAgIGdYYXhpcy5jYWxsKHhBeGlzKTtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gbWFrZSB0aGUgc3ZnIHJlc2l6YWJsZVxyXG4gICAgICBsZXQgc3dhcm1MaW5lQ2hhcnQgPSBkMy5zZWxlY3QoJyNzd2FybS12aXMnKVxyXG4gICAgICAgICAgLmNsYXNzZWQoJ3N2Zy1saW5lLWNoYXJ0LWNvbnRhaW5lcicsIHRydWUpXHJcbiAgICAgICAgICAvLyB0byBtYWtlIGl0IHJlc3BvbnNpdmUgd2l0aCBjc3NcclxuICAgICAgICAgIC5hcHBlbmQoJ3N2ZycpXHJcbiAgICAgICAgICAuYXR0cigncHJlc2VydmVBc3BlY3RSYXRpbycsICd4TWluWU1pbiBtZWV0JylcclxuXHJcbiAgICAgICAgICAuYXR0cigndmlld0JveCcsICcwIDAgJyArIHRoaXMubGluZUNoYXJ0V2lkdGggKyAnICcgKyAobGluZUNoYXJ0SGVpZ2h0ICsgbWFyZ2luLmJvdHRvbSkpXHJcbiAgICAgICAgICAvLyBhZGQgdGhlIGNsYXNzIHN2Zy1jb250ZW50XHJcbiAgICAgICAgICAuY2xhc3NlZCgnc3ZnLWNvbnRlbnQnLCB0cnVlKTtcclxuXHJcbiAgICAgIHpvb21Hcm91cCA9IHN3YXJtTGluZUNoYXJ0XHJcbiAgICAgICAgICAuYXBwZW5kKCdzdmc6ZycpXHJcbiAgICAgICAgICAuYXR0cignaWQnLCAnbGluZUNoYXJ0Wm9vbScpXHJcbiAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgbWFyZ2luLmxlZnQgKyAnLDApJyk7XHJcblxyXG4gICAgICAvLyBhcHBlbmQgYSBncm91cCBmb3IgdGhlIHggYXhpc1xyXG4gICAgICAvLyBhZGQgdGhlIGF4aXNcclxuICAgICAgbGV0IGdYYXhpcyA9IHpvb21Hcm91cC5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3ggYXhpcy1saW5lLWNoYXJ0JylcclxuICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKDAsJyArIGxpbmVDaGFydEhlaWdodCArICcpJylcclxuICAgICAgICAgIC5jYWxsKHhBeGlzKTtcclxuXHJcbiAgICAgIC8vIGFwcGVuZCBhIGdyb3VwIGZvciB0aGUgeSBheGlzXHJcbiAgICAgIHpvb21Hcm91cC5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3kgYXhpcy1saW5lLWNoYXJ0JylcclxuICAgICAgICAgIC5jYWxsKHlBeGlzKTtcclxuXHJcblxyXG4gICAgICAvLyB0aGUgdGltZSBsaW5lIGFwcGVuZCB0aGUgbGluZVxyXG4gICAgICB6b29tR3JvdXAuYXBwZW5kKCdsaW5lJylcclxuICAgICAgICAgIC5hdHRyKCdjbGFzcycsICd0aW1lLWxpbmUnKVxyXG4gICAgICAgICAgLmF0dHIoJ2lkJywgJ2xpbmVDaGFydFRpbWVMaW5lJylcclxuICAgICAgICAgIC5hdHRyKCd4MScsIDApXHJcbiAgICAgICAgICAuYXR0cigneTEnLCAwKVxyXG4gICAgICAgICAgLmF0dHIoJ3gyJywgMClcclxuICAgICAgICAgIC5hdHRyKCd5MicsIGxpbmVDaGFydEhlaWdodCk7XHJcblxyXG4gICAgICAgICAgLy8gY29sb3JzIGZvciB0aGUgbGluZXNcclxuICAgICAgICAgIGxldCBsaW5lX2NvbG9ycyA9IGQzLnNjYWxlT3JkaW5hbChkMy5zY2hlbWVDYXRlZ29yeTEwKTtcclxuICAgICAgICAgIGxldCBsaW5lcyA9IHt9O1xyXG4gICAgICAgICAgLy8gYWRkIHRoZSBsaW5lcyB0byB0aGUgbGluZSBjaGFydFxyXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzd2FybV9mZWF0dXJlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgIGxldCBtaW4gPSBkMy5taW4obGluZUNoYXJ0RGF0YSwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gZFtzd2FybV9mZWF0dXJlc1tpXV07XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgbGV0IG1heCA9IGQzLm1heChsaW5lQ2hhcnREYXRhLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBkW3N3YXJtX2ZlYXR1cmVzW2ldXTtcclxuICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgbGV0IG5vcm1hbGl6YXRpb25TY2FsZSA9IGQzLnNjYWxlTGluZWFyKCkuZG9tYWluKFttaW4sIG1heF0pLnJhbmdlKFswLCAxMDBdKTtcclxuICAgICAgICAgICAgICBsZXQgbGluZSA9IGQzLmxpbmUoKVxyXG4gICAgICAgICAgICAgICAgICAueChmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geChkWyd0aW1lJ10pO1xyXG4gICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAueShmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geShub3JtYWxpemF0aW9uU2NhbGUoZFtzd2FybV9mZWF0dXJlc1tpXV0pKTtcclxuICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgbGluZXNbc3dhcm1fZmVhdHVyZXNbaV1dID0gbGluZTtcclxuICAgICAgICAgICAgICAvL2FwcGVuZCB0aGUgbGluZSB0byB0aGUgbGluZSBjaGFydFxyXG4gICAgICAgICAgICAgIHpvb21Hcm91cC5hcHBlbmQoJ3BhdGgnKVxyXG4gICAgICAgICAgICAgICAgICAuZGF0YShbbGluZUNoYXJ0RGF0YV0pXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsIChzd2FybV9mZWF0dXJlc1tpXSArICdMaW5lJykpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsaW5lIGxpbmVDaGFydExpbmUnKVxyXG4gICAgICAgICAgICAgICAgICAuc3R5bGUoJ3N0cm9rZScsIGxpbmVfY29sb3JzKGkpKVxyXG4gICAgICAgICAgICAgICAgICAuYXR0cignZCcsIGxpbmUpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCduYW1lJywgc3dhcm1fZmVhdHVyZXNbaV0pO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICQoJyNsaW5lQ2hhcnRUaW1lTGluZScpLmFwcGVuZFRvKCcjbGluZUNoYXJ0Wm9vbScpO1xyXG4gICAgICAgICAgLy8gYXBwZW5kIHRoZSB6b29tIHJlY3RhbmdsZVxyXG4gICAgICAgICAgem9vbUdyb3VwLmFwcGVuZCgncmVjdCcpXHJcbiAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3pvb20nKVxyXG4gICAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIHRoaXMubGluZUNoYXJ0V2lkdGgpXHJcbiAgICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGxpbmVDaGFydEhlaWdodClcclxuICAgICAgICAgICAgICAuY2FsbCh6b29tKVxyXG4gICAgICAgICAgICAgIC5vbignY2xpY2snLCBkcmFnZ2VkKVxyXG4gICAgICAgICAgICAgIC5jYWxsKGQzLmRyYWcoKVxyXG4gICAgICAgICAgICAgICAgICAub24oJ2RyYWcnLCBkcmFnZ2VkKVxyXG4gICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAvLyBhcHBlbmQgdGhlIGxlZ2VuZCBmb3IgdGhlIGxpbmUgY2hhcnRcclxuICAgICAgLy8gdmFycyBmb3IgdGhlIGxlZ2VuZFxyXG4gICAgICBsZXQgbGVnZW5kV2lkdGggPSAxMDA7XHJcbiAgICAgIGxldCBsZWdlbmRIZWlnaHQgPSA1MDtcclxuXHJcbiAgICAgIC8vc2VsZWN0IGFsbCB0aGUgbGluZXNcclxuICAgICAgbGV0IGNoYXJ0TGluZXMgPSBkMy5zZWxlY3RBbGwoJy5saW5lJyk7XHJcblxyXG4gICAgICAvL2FwcGVuZCBhIGdyb3VwIGZvciB0aGUgbGVnZW5kXHJcbiAgICAgIHN3YXJtTGluZUNoYXJ0XHJcbiAgICAgICAgICAuYXBwZW5kKCdnJylcclxuICAgICAgICAgIC5hdHRyKCdpZCcsICdsaW5lQ2hhcnRMZWdlbmQnKVxyXG4gICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIG1hcmdpbi5ib3R0b20gKyAnLCcgKyAobGluZUNoYXJ0SGVpZ2h0ICsgbWFyZ2luVG9MZWdlbmQpICsgJyknKVxyXG4gICAgICAgICAgLnNlbGVjdEFsbCgncmVjdC5sZWdlbmQnKVxyXG4gICAgICAgICAgLmRhdGEoY2hhcnRMaW5lcy5fZ3JvdXBzWzBdKVxyXG4gICAgICAgICAgLmVudGVyKClcclxuICAgICAgICAgIC8vYXBwZW5kIHRoZSB3aG9sZSBsZWdlbmQgaW4gYSBlYWNoIGZ1bmN0aW9uXHJcbiAgICAgICAgICAuZWFjaChmdW5jdGlvbihkLCBpKSB7XHJcbiAgICAgICAgICAgICAgbGV0IHNwYWNpbmcgPSA2MDA7XHJcbiAgICAgICAgICAgICAgbGV0IHRleHRTcGFjZSA9IDQwO1xyXG4gICAgICAgICAgICAgIC8vIGFwcGVuZCB0aGUgcmVjdGFuZ2xlcyBmb3IgdGhlIGxlZ2VuZFxyXG4gICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5hcHBlbmQoJ3JlY3QnKVxyXG4gICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGVnZW5kJylcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgbGVnZW5kV2lkdGgpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCBsZWdlbmRIZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCd4JywgKHNwYWNpbmcgKiBpKSArICdweCcpXHJcbiAgICAgICAgICAgICAgICAgIC5zdHlsZSgnZmlsbCcsIGQuc3R5bGUuc3Ryb2tlKTtcclxuXHJcbiAgICAgICAgICAgICAgLy8gYXBwZW5kIHRoZSB0ZXh0IGZvciB0aGUgbGVnZW5kXHJcbiAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmFwcGVuZCgndGV4dCcpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsIGQuYXR0cmlidXRlcy5pZC52YWx1ZSArICdMZWdlbmRUaXRsZScpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsaW5lLWNoYXJ0LWxlZ2VuZC10ZXh0JylcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ3knLCB0ZXh0U3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCd4JywgKHNwYWNpbmcgKiBpICsgbGVnZW5kV2lkdGggKyAxMCkgKyAncHgnKVxyXG4gICAgICAgICAgICAgICAgICAudGV4dChkLmF0dHJpYnV0ZXMubmFtZS52YWx1ZSArICc6ICcpO1xyXG5cclxuICAgICAgICAgICAgICAvL2FwcGVuZCB0aGUgdGV4dCBmb3IgdGhlIHZhbHVlIG9mIHRoZSBsaW5lXHJcbiAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmFwcGVuZCgndGV4dCcpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsIGQuYXR0cmlidXRlcy5pZC52YWx1ZSArICdWYWx1ZScpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsaW5lLWNoYXJ0LWxlZ2VuZC10ZXh0JylcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ3knLCB0ZXh0U3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCd4JywgKHNwYWNpbmcgKiBpICsgbGVnZW5kV2lkdGggK1xyXG4gICAgICAgICAgICAgICAgICAgICAgLy90aGUgbmV4dCBleHByZXNzaW9uIGdldHMgdGhlIHRleHQgbGVuZ3RoXHJcbiAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QoJyMnICsgZC5hdHRyaWJ1dGVzLmlkLnZhbHVlICsgJ0xlZ2VuZFRpdGxlJykubm9kZSgpLmdldENvbXB1dGVkVGV4dExlbmd0aCgpICtcclxuICAgICAgICAgICAgICAgICAgICAgIDEwKSArICdweCcpXHJcbiAgICAgICAgICAgICAgICAgIC50ZXh0KCcwLjAnKTtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgLy9hcHBlbmQgYSBsZWdlbmQgZ3JvdXAgZm9yIHRoZSB0cmVuZCBjaGFydHNcclxuICAgICAgc3dhcm1MaW5lQ2hhcnRcclxuICAgICAgICAgIC5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgLmF0dHIoJ2lkJywgJ3RyZW5kQ2hhcnRMZWdlbmQnKVxyXG4gICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIG1hcmdpbi5ib3R0b20gKyAnLCcgKyAobGluZUNoYXJ0SGVpZ2h0ICsgbWFyZ2luVG9MZWdlbmQpICsgJyknKVxyXG4gICAgICAgICAgLnNlbGVjdEFsbCgncmVjdC5sZWdlbmQnKVxyXG4gICAgICAgICAgLmRhdGEoWyc1JSAtIDk1JScsICcyNSUgLSA3NSUnLCAnTWVkaWFuJ10pXHJcbiAgICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgLy9hcHBlbmQgdGhlIHdob2xlIGxlZ2VuZCBpbiBhIGVhY2ggZnVuY3Rpb25cclxuICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uKGQsIGkpIHtcclxuICAgICAgICAgICAgICBsZXQgc3BhY2luZyA9IDgwMDtcclxuICAgICAgICAgICAgICBsZXQgdGV4dFNwYWNlID0gNDA7XHJcbiAgICAgICAgICAgICAgLy8gYXBwZW5kIHRoZSByZWN0YW5nbGVzIGZvciB0aGUgbGVnZW5kXHJcbiAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmFwcGVuZCgncmVjdCcpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsZWdlbmQnKVxyXG4gICAgICAgICAgICAgICAgICAuYXR0cignd2lkdGgnLCBsZWdlbmRXaWR0aClcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGxlZ2VuZEhlaWdodClcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gnLCAoc3BhY2luZyAqIGkpICsgJ3B4JylcclxuICAgICAgICAgICAgICAgICAgLnN0eWxlKCdmaWxsJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnIzc0YTljZic7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGkgPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyMwNDVhOGQnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyM1MjUyNTInO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgLy8gYXBwZW5kIHRoZSB0ZXh0IGZvciB0aGUgbGVnZW5kXHJcbiAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmFwcGVuZCgndGV4dCcpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsaW5lLWNoYXJ0LWxlZ2VuZC10ZXh0JylcclxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ3knLCB0ZXh0U3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgIC5hdHRyKCd4JywgKHNwYWNpbmcgKiBpICsgbGVnZW5kV2lkdGggKyAxMCkgKyAncHgnKVxyXG4gICAgICAgICAgICAgICAgICAudGV4dChkKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAkKCcjdHJlbmRDaGFydExlZ2VuZCcpLmhpZGUoKTtcclxuXHJcbiAgICAgIHRoaXMuaW5pdExpbmVDaGFydEJ1dHRvbnMoKVxyXG5cclxuXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJbml0IGxpbmUgY2hhcnQgYnV0dG9uIGxpc3RlbmVyc1xyXG4gICAqL1xyXG4gIGluaXRMaW5lQ2hhcnRCdXR0b25zKCkge1xyXG4gICAgICAvLyBhZGQgdGhlIExpbmUgY2hhcnQgYnV0dG9ucyB0byB0aGUgZmVhdHVyZSBwYW5lbFxyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc3dhcm1fZmVhdHVyZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGxldCBjYXBpdGFsaXplZF9mZWF0dXJlX3N0cmluZyA9IHRoaXMuc3dhcm1fZmVhdHVyZXNbaV0uc3BsaXQoJ18nKS5qb2luKCcgJyk7XHJcbiAgICAgICAgICBjYXBpdGFsaXplZF9mZWF0dXJlX3N0cmluZyA9IGNhcGl0YWxpemVkX2ZlYXR1cmVfc3RyaW5nLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2FwaXRhbGl6ZWRfZmVhdHVyZV9zdHJpbmcuc2xpY2UoMSk7XHJcblxyXG4gICAgICAgICAgJCgnI2xpbmUtY2hhcnQtZmVhdHVyZS1jaGVja2JveGVzJylcclxuICAgICAgICAgICAgICAuYXBwZW5kKCc8dHI+PHRoPiA8ZGl2IGNsYXNzPVwicHJldHR5IHAtc3dpdGNoIHAtZmlsbCBwLWJpZ2dlclwiPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBjbGFzcz1cImxpbmUtY2hhcnQtY2hlY2stYm94XCIgaWQ9XCJkcmF3LScgK1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnN3YXJtX2ZlYXR1cmVzW2ldICsgJ1wiIGRhdGE9XCIjJyArIHRoaXMuc3dhcm1fZmVhdHVyZXNbaV0gKyAnTGluZVwiIC8+PGRpdiBjbGFzcz1cInN0YXRlXCI+PGxhYmVsPicgK1xyXG4gICAgICAgICAgICAgICAgICBjYXBpdGFsaXplZF9mZWF0dXJlX3N0cmluZyArICc8L2xhYmVsPjwvZGl2PjwvZGl2PjwvdGg+PC90cj4nKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgJCgnLmxpbmUtY2hhcnQtY2hlY2stYm94JykuY2hhbmdlKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgbGV0IGNoZWNrYm94ID0gJCh0aGlzKTtcclxuICAgICAgICAgIGlmIChjaGVja2JveC5wcm9wKCdjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICAkKGNoZWNrYm94LmF0dHIoJ2RhdGEnKSkuc2hvdygpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAkKGNoZWNrYm94LmF0dHIoJ2RhdGEnKSkuaGlkZSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG5cclxufVxyXG5cclxuLyoqXHJcbiAqIEFkZCBhIHRyZW5kIGNoYXJ0IHNob3dpbmcgbWVkaWFuIGFuZCBwZXJjZW50aWxlc1xyXG4gKiAvLyAtIHdoaWNoIGZlYXR1cmVcclxuICovXHJcbmV4cG9ydCBjbGFzcyBUcmVuZENoYXJ0IGV4dGVuZHMgQ2hhcnR7XHJcbiAgICBjb25zdHJ1Y3RvcihlbGVtLCBzd2FybURhdGEpe1xyXG4gICAgICBzdXBlcihzd2FybURhdGEpO1xyXG4gICAgICB0aGlzLmVsZW0gPSBlbGVtO1xyXG5cclxuICAgICAgdGhpcy50cmVuZGNoYXJ0KCk7XHJcbiAgICAgIC8vdGhpcy5kaXNhYmxlTGluZUNoYXJ0KCk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGRpc2FibGVMaW5lQ2hhcnQoKSB7XHJcbiAgICAgICAgJCgnLmxpbmVDaGFydEJ1dHRvbicpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSkucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICAgICAkKCcubGluZS1jaGFydC1jaGVjay1ib3gnKS5hdHRyKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgICAgICQoJy5saW5lQ2hhcnRMaW5lJykuYXR0cigndmlzaWJpbGl0eScsICdoaWRkZW4nKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgdHJlbmRjaGFydCgpe1xyXG4gICAgLy8gY2hlY2sgd2hpY2ggZmVhdHVyZSB0byBkaXNwbGF5IGluIHRoZSB0cmVuZCBjaGFydFxyXG4gICAgbGV0IGZlYXR1cmUgPSAnJztcclxuICAgIGlmICh0aGlzLmVsZW1bJ2lkJ10udG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnc3BlZWQnKSkge1xyXG4gICAgICAgIGZlYXR1cmUgPSAnc3BlZWQnO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmVsZW1bJ2lkJ10udG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnYWNjZWxlcmF0aW9uJykpIHtcclxuICAgICAgICBmZWF0dXJlID0gJ2FjY2VsZXJhdGlvbic7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuZWxlbVsnaWQnXS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdkaXN0YW5jZV9jZW50cm9pZCcpKSB7XHJcbiAgICAgICAgZmVhdHVyZSA9ICdkaXN0YW5jZV9jZW50cm9pZCc7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuZWxlbVsnaWQnXS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdtaWRsaW5lX29mZnNldCcpKSB7XHJcbiAgICAgICAgZmVhdHVyZSA9ICdtaWRsaW5lX29mZnNldCc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIC8vIGRhdGEgaXMgbm90IGxvYWRlZCBmdWxseSAtLSByZXR1cm5cclxuICAgIC8vaWYgKCFkYXRhc2V0WzBdW2ZlYXR1cmVdKSB7XHJcbiAgICAvLyAgICByZXR1cm47XHJcbiAgICAvL31cclxuICAgIC8vIGNoYW5nZSB0byB0aGUgdHJlbmQgY2hhcnQgbGVnZW5kXHJcbiAgICAkKCcjbGluZUNoYXJ0TGVnZW5kJykuaGlkZSgpO1xyXG4gICAgJCgnI3RyZW5kQ2hhcnRMZWdlbmQnKS5zaG93KCk7XHJcbiAgICAvLyBjaGVjayBpZiBhbHJlYWR5IGNvbXB1dGVkIGFuZCBvbmx5IGhpZGRlblxyXG4gICAgaWYgKCEkKCgnIycgKyBmZWF0dXJlICsgJ1RyZW5kQ2hhcnQnKSkubGVuZ3RoKSB7XHJcbiAgICAgICAgLy8gZ2V0IHRoZSBkYXRhIGZvciB0aGUgdHJlbmQgY2hhcnRcclxuICAgICAgICBsZXQgdHJlbmRDaGFydERhdGEgPSBbXTtcclxuICAgICAgICBsZXQgbnVtX2FuaW1hbHMgPSBhbmltYWxJZHMubGVuZ3RoO1xyXG4gICAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgcGVyY2V0aWxlcyBmb3IgZXZlcnkgdGltZSBzdGVwXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzd2FybURhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IHRtcCA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IG51bV9hbmltYWxzOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhc2V0W2kgKiBudW1fYW5pbWFscyArIGpdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG1wLnB1c2goZGF0YXNldFtpICogbnVtX2FuaW1hbHMgKyBqXVtmZWF0dXJlXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdHJlbmRDaGFydERhdGEucHVzaChwZXJjZW50aWxlc0xpbmVDaGFydCh0bXApKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy9hZ2dyZWdhdGUgYW5kIGF2ZXJhZ2UgdGhlIHRyZW5kQ2hhcnREYXRhIHRvIHRoaXMubGluZUNoYXJ0V2lkdGggZGF0YSBwb2ludHNcclxuICAgICAgICBpZiAodHJlbmRDaGFydERhdGEubGVuZ3RoID4gdGhpcy5saW5lQ2hhcnRXaWR0aCkge1xyXG4gICAgICAgICAgICBsZXQgdG1wVHJlbmRDaGFydERhdGEgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIC8vIFtwZXJjMDUscGVyYzI1LHBlcmM1MCxwZXJjNzUscGVyYzk1XVxyXG4gICAgICAgICAgICBsZXQgdG1wID0gWzAsIDAsIDAsIDAsIDBdO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmVuZENoYXJ0RGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgLy8gYWdncmVnYXRlXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRtcC5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRtcFtqXSArPSB0cmVuZENoYXJ0RGF0YVtpXVtqXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIGRpdmlkZVxyXG4gICAgICAgICAgICAgICAgaWYgKGkgJSByYXRpbyA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdG1wLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRtcFtqXSArPSB0bXBbal0gLyByYXRpbztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy9hZGQgdG8gdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgdG1wVHJlbmRDaGFydERhdGEucHVzaCh0bXApO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFtwZXJjMDUscGVyYzI1LHBlcmM1MCxwZXJjNzUscGVyYzk1XVxyXG4gICAgICAgICAgICAgICAgICAgIHRtcCA9IFswLCAwLCAwLCAwLCAwXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0cmVuZENoYXJ0RGF0YSA9IHRtcFRyZW5kQ2hhcnREYXRhO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBnZXQgbWluIGFuZCBtYXggZm9yIHRoZSBub3JtYWxpemF0aW9uXHJcbiAgICAgICAgbGV0IG1pbiA9IGQzLm1pbih0cmVuZENoYXJ0RGF0YSwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZFswXTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBsZXQgbWF4ID0gZDMubWF4KHRyZW5kQ2hhcnREYXRhLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkWzRdO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGxldCBub3JtYWxpemF0aW9uU2NhbGUgPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbbWluLCBtYXhdKS5yYW5nZShbMCwgMTAwXSk7XHJcblxyXG4gICAgICAgIC8vIGFkZCBhIGdyb3VwIGZvciB0aGUgdHJlbmQgY2hhcnRcclxuICAgICAgICBsZXQgdHJlbmRDaGFydCA9IHpvb21Hcm91cC5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAuYXR0cignaWQnLCAoZmVhdHVyZSArICdUcmVuZENoYXJ0JykpXHJcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICd0cmVuZENoYXJ0RGF0YScpO1xyXG4gICAgICAgIC8vIGFwcGVuZCB0aGUgem9vbSByZWN0YW5nbGUgYWdhaW4gdG8gdGhlIGVuZCBvZiB0aGUgZ3JvdXBcclxuICAgICAgICAkKCcuem9vbScpLmFwcGVuZFRvKCcjbGluZUNoYXJ0Wm9vbScpO1xyXG4gICAgICAgICQoJyNsaW5lQ2hhcnRUaW1lTGluZScpLmFwcGVuZFRvKCcjbGluZUNoYXJ0Wm9vbScpO1xyXG4gICAgICAgIC8vIHZhciB0byBzYXZlIHRoZSBmdW5jdGlvbnMgZm9yIHRoZSB6b29tXHJcbiAgICAgICAgdHJlbmRDaGFydHNab29tW2ZlYXR1cmVdID0ge307XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy50cmVuZENoYXJ0c0VsZW0ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgLy8gZnVuY3Rpb25zIGZvciB0aGUgdXBwZXIgYW5kIGlubmVyIGFyZWFzIGFuZCB0aGUgbWVkaWFuXHJcbiAgICAgICAgICAgIGxldCB0ZW1wO1xyXG4gICAgICAgICAgICAvLyBsb3dlciBvdXRlciBhcmVhIGFuZCBsb3dlciBpbm5lciBhcmVhXHJcbiAgICAgICAgICAgIGlmIChpIDwgMikge1xyXG4gICAgICAgICAgICAgICAgdGVtcCA9IGQzLmFyZWEoKVxyXG4gICAgICAgICAgICAgICAgICAgIC54KGZ1bmN0aW9uKGQsIGopIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHgoaik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAueTAoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geShub3JtYWxpemF0aW9uU2NhbGUoZFsoaSArIDEpXSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLnkxKGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHkobm9ybWFsaXphdGlvblNjYWxlKGRbaV0pKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBtZWRpYW4gbGluZVxyXG4gICAgICAgICAgICBlbHNlIGlmIChpID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wID0gZDMubGluZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgLngoZnVuY3Rpb24oZCwgaikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geChqKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC55KGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHkobm9ybWFsaXphdGlvblNjYWxlKGRbaV0pKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyB1cHBlciBpbm5lciBhcmVhIGFuZCB1cHBlciBvdXRlciBhcmVhXHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGkgPiAyKSB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wID0gZDMuYXJlYSgpXHJcbiAgICAgICAgICAgICAgICAgICAgLngoZnVuY3Rpb24oZCwgaikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geChqKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC55MChmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB5KG5vcm1hbGl6YXRpb25TY2FsZShkW2ldKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAueTEoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geShub3JtYWxpemF0aW9uU2NhbGUoZFsoaSAtIDEpXSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHNhdmUgdGhpcyBmb3IgdGhlIGxhdGVyIHpvb21cclxuICAgICAgICAgICAgdHJlbmRDaGFydHNab29tW2ZlYXR1cmVdW3RoaXMudHJlbmRDaGFydHNFbGVtW2ldXSA9IHRlbXA7XHJcbiAgICAgICAgICAgIC8vIGFwcGVuZCBpdCB0byB0aGUgcGF0aFxyXG4gICAgICAgICAgICB0cmVuZENoYXJ0LmFwcGVuZCgncGF0aCcpXHJcbiAgICAgICAgICAgICAgICAuZGF0YShbdHJlbmRDaGFydERhdGFdKVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgdGhpcy50cmVuZENoYXJ0c0VsZW1baV0pXHJcbiAgICAgICAgICAgICAgICAuYXR0cignZCcsIHRlbXApO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gc2hvdyB0aGUgdHJlbmQgY2hhcnRcclxuICAgICAgICAkKCgnIycgKyBmZWF0dXJlICsgJ1RyZW5kQ2hhcnQnKSkuc2hvdygpO1xyXG4gICAgfVxyXG59XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBVcGRhdGUgdGhlIGxpbmUgY2hhcnQgZmllbGRzIGFuZCB0aGUgbGluZSBjaGFydCB0aW1lIGxpbmVcclxuICovXHJcblxyXG5cclxuXHJcbi8qKlxyXG4gKiBEcmF3aW5nIGZ1bmN0aW9uIC0gaXMgY2FsbGVkIGZvciBlYWNoIHRpbWVzdGVwXHJcbiAqIGluZGV4VGltZSBzYXZlcyB0aGUgY3VycmVudCB0aW1lXHJcbiAqL1xyXG5cclxuXHJcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgIFNldHRlclxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbi8qKlxyXG4gKiBTZXQgdGhlIGluZGV4IHRpbWUgdG8gYSBuZXcgdmFsdWVcclxuICogQHBhcmFtIHtOdW1iZXJ9IHZhbHVlIC0gbmV3IHRpbWUgc3RlcFxyXG4gKi9cclxuXHJcblxyXG4vKipcclxuICogRGVjcmVhc2UgdGltZSBieSAxXHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBTZXQgdGhlIHRoZSBuZXcgYWN0aXZlIHNjYWxlIC0gZS5nLiBzcGVlZCwgYWNjZWxlcmF0aW9uLCBibGFjayBldGMuXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZSAtIGFjdGl2ZSBzY2FsZSBmb3IgdGhlIGluZGl2aWR1YWwgYW5pbWFsc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldEFjdGl2ZVNjYWxlKHZhbHVlKSB7XHJcbiAgICBhY3RpdmVTY2FsZSA9IHZhbHVlO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IHRoZSBuZXcgbWVkb2lkIGFuaW1hbFxyXG4gKiBAcGFyYW0ge051bWJlcn0gdmFsdWUgLSBVbmlxdWV0aGlzLmlkIG9mIHRoZSBhbmltYWxcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRNZWRvaWRBbmltYWwodmFsdWUpIHtcclxuICAgIG1lZG9pZEFuaW1hbCA9IHZhbHVlO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IHRoZSBzZWxlY3RlZCBhbmQgaGlnaGxpZ2h0ZWQgYW5pbWFsc1xyXG4gKiBAcGFyYW0ge2FycmF5fSB2YWx1ZSAtIGFycmF5IG9mIHVucWl1ZXRoaXMuaWQgb2YgdGhlIGFuaW1hbHNcclxuICovXHJcbiIsIi8qZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLWxldHMqL1xyXG4vKmdsb2JhbCB3aW5kb3csJCwgZDMsIFBvbHlCb29sLCBwYXJhbWV0ZXJzLCBTZXQqL1xyXG4vLyBpbXBvcnQgKiBhcyBzcHYgZnJvbSAnLi9zcGF0aWFsX3ZpZXcuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIG5ldHdvcmtIaWVyYXJjaHlcclxufSBmcm9tICcuL2V4cGxvcmUuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGluZGV4VGltZSxcclxuICAgIGFycmF5QW5pbWFscyxcclxuICAgIHNldEFjdGl2ZUFuaW1hbHMsXHJcbiAgICBkZWNJbmRleFRpbWUsXHJcbiAgICBEcmF3ZXJcclxufSBmcm9tICcuL3NwYXRpYWxfdmlldy9zcGF0aWFsX3ZpZXcuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIHNob3dOZXR3b3JrSGllcmFyY2h5LFxyXG4gICAgbmV0d29ya0NvbG9yLFxyXG4gICAgbmV0d29ya0NvbG9yU2NhbGUsXHJcbiAgICBuZXR3b3JrQXV0byxcclxuICAgIHNldE5ldHdvckxpbWl0LFxyXG4gICAgbmV0d29ya0xpbWl0LFxyXG59IGZyb20gJy4vbmV0d29yay5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgc3RhbmRhcmREZXZpYXRpb25cclxufSBmcm9tICcuL2hlbHBlcnMuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIHNldFRpbWVTbGlkZXIsXHJcbiAgICBpbml0VG9vbHRpcCxcclxuICAgIHRvb2x0aXBGdW5jdGlvbixcclxuICAgIGluaXRTbGlkZXJzLFxyXG4gICAgdG9vbHRpcFxyXG59IGZyb20gJy4vc3BhdGlhbF92aWV3L2ludGVyYWN0aW9uLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgICAvL2xpbmVDaGFydCxcclxuICAgIHVwZGF0ZUxpbmVDaGFydCxcclxuICAgIExpbmVDaGFydFxyXG59IGZyb20gJy4vbGluZV9jaGFydC5qcyc7XHJcblxyXG4vL2xldCB6b29tR3JvdXA7IC8vIHpvb20gZ3JvdXAgZm9yIHRoZSBzcGVjaWZpYyBkZW5kcm9ncmFtXHJcbmxldCB0cmVlbWFwOyAvLyBiZWlkZVxyXG5sZXQgdG9vbHRpcERpdjtcclxubGV0IHNwYXRpYWxWaWV3OyAvLyBnZXQgdGhlIHNwYXRpYWwgdmlldyBzdmcgZnJvbSB0aGUgbWFpbiB2aXNcclxubGV0IHN2Z0xlZ2VuZDtcclxubGV0IGhpZXJhcmNoeUxldmVscyA9IHt9O1xyXG5sZXQgc2V0T3BlcmF0aW9uID0gJ3VuaW9uJztcclxubGV0IGlkOyAvLyBuZWVkZWQgZm9yIHRoZSBjb2xsYXBzZSBmdW5jdGlvblxyXG4vL1N0YXRpYyBjb2xvciBzY2FsZSBmb3IgdGhlIGRlbmRyb2dyYW0gdmFyaWFjbmUgY29sb3JpbmdcclxubGV0IHN0YW5kYXJkRGV2aWF0aW9uQ29sb3JTY2FsZSA9IGQzLnNjYWxlVGhyZXNob2xkKClcclxuICAgIC5kb21haW4oXHJcbiAgICAgICAgWzAsIC4xLCAuMiwgLjMsIC40LCAuNSwgLjYsIC43LCAuOCwgLjksIDFdXHJcbiAgICApXHJcbiAgICAucmFuZ2UoWycjZjdmYmZmJywgJyNkZWViZjcnLCAnI2M2ZGJlZicsICcjOWVjYWUxJywgJyM2YmFlZDYnLCAnIzQyOTJjNicsICcjMjE3MWI1JywgJyMwODUxOWMnLCAnIzA4MzA2YiddKTtcclxuXHJcbmV4cG9ydCBjb25zdCBtYXhOdW1iZXJIaWVyYXJjaGllcyA9IDQ7XHJcbmV4cG9ydCBsZXQgbmV0d29ya0hpZXJhcmNoeUlkcyA9IFtdO1xyXG5leHBvcnQgbGV0IGhpZXJhcmNoeUNvbG9ycyA9IHt9O1xyXG5leHBvcnQgbGV0IGhpZXJhcmNoeUdyb3VwU3RkZXYgPSB7fTtcclxuLy8gVE9ETyBhZGQgbW9yZSBjb2xvcnNcclxuZXhwb3J0IGxldCBjb2xvcnMgPSBbJyM3ZmM5N2YnLCAnIzM4NmNiMCcsICcjZTcyOThhJywgJyNmZjk5MDAnXTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIERlbmRyb2dyYW0gZXh0ZW5kcyBEcmF3ZXJ7XHJcbiAgY29uc3RydWN0b3IoKXtcclxuICAgIHN1cGVyKCk7XHJcbiAgICB0aGlzLmluaXREZW5kcm9ncmFtKClcclxuICB9XHJcblxyXG4gIGluaXREZW5kcm9ncmFtKCkge1xyXG4gICAgICAvLyBjb25zdGFuY3QgZmFjdG9ycyBmb3IgdGhlIGRlbmRncm9ncmFtXHJcbiAgICAgIGxldCBtYXJnaW4gPSAyMCxcclxuICAgICAgICAgIHdpZHRoID0gNTAwMCxcclxuICAgICAgICAgIGhlaWdodCA9IDUwMDA7XHJcblxyXG4gICAgICAvLyB6b29tIGZ1bmN0aW9uIGZvciB0aGUgZGVuZHJvZ3JhbVxyXG4gICAgICBsZXQgem9vbSA9IGQzLnpvb20oKVxyXG4gICAgICAgICAgLnNjYWxlRXh0ZW50KFsxLCAxMF0pXHJcbiAgICAgICAgICAub24oJ3pvb20nLCAoKT0+e1xyXG4gICAgICAgICAgICAgIC8vY29uc3RyYWluZWQgem9vbWluZ1xyXG4gICAgICAgICAgICAgIGQzLmV2ZW50LnRyYW5zZm9ybS54ID0gTWF0aC5taW4oMCwgd2lkdGggKiAoZDMuZXZlbnQudHJhbnNmb3JtLmsgLSAxKSxcclxuICAgICAgICAgICAgICAgICAgTWF0aC5tYXgod2lkdGggKiAoMSAtIGQzLmV2ZW50LnRyYW5zZm9ybS5rKSwgZDMuZXZlbnQudHJhbnNmb3JtLngpKTtcclxuXHJcbiAgICAgICAgICAgICAgZDMuZXZlbnQudHJhbnNmb3JtLnkgPSBNYXRoLm1pbigwLCBoZWlnaHQgKiAoZDMuZXZlbnQudHJhbnNmb3JtLmsgLSAxKSxcclxuICAgICAgICAgICAgICAgICAgTWF0aC5tYXgoaGVpZ2h0ICogKDEgLSBkMy5ldmVudC50cmFuc2Zvcm0uayksIGQzLmV2ZW50LnRyYW5zZm9ybS55KSk7XHJcblxyXG4gICAgICAgICAgICAgIC8vIHRyYW5zbGF0ZSBhbmQgc2NhbGVcclxuICAgICAgICAgICAgICB0aGlzLnpvb21Hcm91cC5hdHRyKCd0cmFuc2Zvcm0nLCBkMy5ldmVudC50cmFuc2Zvcm0pO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBzdmcgY29udGFpbmVyIGZvciB0aGUgZGVuZHJvZ3JhbVxyXG4gICAgICBsZXQgc3ZnID0gZDMuc2VsZWN0KCcjZGVuZHJvZ3JhbS1wYW5lbCcpXHJcbiAgICAgICAgICAuY2xhc3NlZCgnc3ZnLWRlbmRyb2dyYW0tY29udGFpbmVyJywgdHJ1ZSlcclxuICAgICAgICAgIC5hcHBlbmQoJ3N2ZycpXHJcbiAgICAgICAgICAuYXR0cigncHJlc2VydmVBc3BlY3RSYXRpbycsICd4TWluWU1pbiBtZWV0JylcclxuICAgICAgICAgIC5hdHRyKCd2aWV3Qm94JywgJzAgMCAnICsgd2lkdGggKyAnICcgKyBoZWlnaHQpXHJcbiAgICAgICAgICAvLyBhZGQgdGhlIGNsYXNzIHN2Zy1jb250ZW50XHJcbiAgICAgICAgICAuY2xhc3NlZCgnc3ZnLWNvbnRlbnQtZGVuZHJvZ3JhbScsIHRydWUpXHJcbiAgICAgICAgICAuY2FsbCh6b29tKTtcclxuXHJcbiAgICAgIGluaXREZW5kcm9ncmFtTGVnZW5kKCk7XHJcblxyXG4gICAgICAvLyBhcHBlbmQgdGhlIHpvb20gZ3JvdXAgdG8gdGhlIHN2Z1xyXG4gICAgICB0aGlzLnpvb21Hcm91cCA9IHN2Zy5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIG1hcmdpbiArICcsJyArIG1hcmdpbiArICcpJylcclxuICAgICAgICAgIC5hcHBlbmQoJ3N2ZzpnJyk7XHJcblxyXG4gICAgICAvLyBkMyB0cmVlXHJcbiAgICAgIHRyZWVtYXAgPSBkMy50cmVlKCkgLy9kMy5jbHVzdGVyKClcclxuICAgICAgICAgIC5zaXplKFsoaGVpZ2h0IC0gMTAgKiBtYXJnaW4pLCAod2lkdGggLSAxMCAqIG1hcmdpbildKTtcclxuXHJcbiAgICAgIC8vIHNldCB0aGUgc3BhdGlhbCB2aWV3IC0gbmVlZGVkIHRvIGFkZCB0aGUgY2x1c3RlcmluZyB0byB0aGUgc3BhdGlhbCB2aWV3IHdpbmRvd1xyXG4gICAgICBzcGF0aWFsVmlldyA9IGQzLnNlbGVjdCgnLnRhbmsnKTtcclxuXHJcbiAgICAgIC8vIGluaXQgZGVuZHJvZ3JhbSBzbGlkZXJcclxuICAgICAgLy8gaW5pdGlhbGl6ZSB0aGUgTmV0d29yayBzbGlkZXJcclxuICAgICAgJCgnI2RlbmRyb2dyYW0tcGFuZWwtbGV2ZWwtc2xpZGVyJylcclxuICAgICAgICAgIC5zbGlkZXIoe1xyXG4gICAgICAgICAgICAgIHJhbmdlOiAnbWF4JyxcclxuICAgICAgICAgICAgICBtaW46IDIsXHJcbiAgICAgICAgICAgICAgbWF4OiAyLFxyXG4gICAgICAgICAgICAgIHN0ZXA6IDEsXHJcbiAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuaGllcmFyY2h5TGV2ZWxzWydoMCddLFxyXG4gICAgICAgICAgICAgIHNsaWRlOiAoZXZlbnQsIHVpKT0+e1xyXG4gICAgICAgICAgICAgICAgICBsZXQgaWQgPSAkKCcuc2hvdy1kZW5kcm9ncmFtLmJ0bi1wcmltYXJ5JykuYXR0cignZGF0YScpO1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnNldEhpZXJhcmNoeUxldmVsKGlkLCB1aS52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRGVuZHJvZ3JhbSgpO1xyXG4gICAgICAgICAgICAgICAgICAvLyBpZiBubyBhbmltYXRpb24gaXMgYWN0aXZlIGRyYXcgdGhlIG5ldyBjbHVzdGVyaW5nIGFuZCBkZW5kcm9ncmFtXHJcbiAgICAgICAgICAgICAgICAgIC8vIGRyYXdEZW5kcm9ncmFtKCk7XHJcbiAgICAgICAgICAgICAgICAgIGlmICghJCgnI3BsYXktYnV0dG9uJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAvL2dvIGJhY2sgb25lIHNlY29uZCBhbmQgZHJhdyB0aGUgbmV4dCBmcmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgLy90aGlzIGFwcGx5cyB0aGUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWNJbmRleFRpbWUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3RGVuZHJvZ3JhbSgpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBpbml0IHRoZSB0b29sdGlwIGZvciB0aGUgZGVuZHJvZ3JhbVxyXG4gICAgICB0b29sdGlwRGl2ID0gZDMuc2VsZWN0KCcjZGVuZHJvZ3JhbS10b29sdGlwJylcclxuICAgICAgICAgIC5zdHlsZSgnbGVmdCcsIDAgKyAncHgnKVxyXG4gICAgICAgICAgLnN0eWxlKCd0b3AnLCAwICsgJ3B4JylcclxuICAgICAgICAgIC5vbignbW91c2VvdmVyJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgdG9vbHRpcERpdlxyXG4gICAgICAgICAgICAgICAgICAuc3R5bGUoJ29wYWNpdHknLCAxKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAvLyBpbml0IHRoZSBoaWVyYXJjaHkgbGVnZW5kXHJcbiAgICAgIGxldCBsZWdlbmRXaWR0aCA9IG1heE51bWJlckhpZXJhcmNoaWVzICogMTAwO1xyXG4gICAgICBsZXQgbGVnZW5kSGVpZ2h0ID0gNjA7XHJcblxyXG4gICAgICBzdmdMZWdlbmQgPSBkMy5zZWxlY3QoJyNoaWVyYXJjaHktbGVnZW5kLWRpdicpXHJcbiAgICAgICAgICAuYXBwZW5kKCdzdmcnKVxyXG4gICAgICAgICAgLmF0dHIoJ2lkJywgJ2hpZXJhcmNoeS1sZWdlbmQnKVxyXG4gICAgICAgICAgLmF0dHIoJ3dpZHRoJywgbGVnZW5kV2lkdGgpXHJcbiAgICAgICAgICAuYXR0cignaGVpZ2h0JywgbGVnZW5kSGVpZ2h0KTtcclxuXHJcbiAgICAgIC8vIGFkZCBwYXR0ZXJuIGZvciBzdHJpcGVkIGJhY2tncm91bmQgb2YgaW50ZXJzZWN0aW9ucyBldGMuXHJcbiAgICAgIHNwYXRpYWxWaWV3LmFwcGVuZCgnZGVmcycpXHJcbiAgICAgICAgICAuYXBwZW5kKCdzdmc6cGF0dGVybicpXHJcbiAgICAgICAgICAuYXR0cignaWQnLCAnc3RyaXBlZCcpXHJcbiAgICAgICAgICAuYXR0cigncGF0dGVyblVuaXRzJywgJ3VzZXJTcGFjZU9uVXNlJylcclxuICAgICAgICAgIC5hdHRyKCd3aWR0aCcsICcyMCcpXHJcbiAgICAgICAgICAuYXR0cignaGVpZ2h0JywgJzUnKVxyXG4gICAgICAgICAgLmF0dHIoJ3BhdHRlcm5UcmFuc2Zvcm0nLCAncm90YXRlKDYwKScpXHJcbiAgICAgICAgICAuYXBwZW5kKCdyZWN0JylcclxuICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIDUpXHJcbiAgICAgICAgICAuYXR0cignaGVpZ2h0JywgMTApXHJcbiAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgwLDApJylcclxuICAgICAgICAgIC5zdHlsZSgnZmlsbCcsICcjNjcwMDBkJyk7XHJcblxyXG4gIH07XHJcblxyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEluaXRpYWxpemUgdGhlIGRlbmRyb2dyYW1cclxuICovXHJcblxyXG5cclxuLyoqXHJcbiAqIERyYXcgdGhlIGRlbmRncm9ncmFtIGZvciBvbmUgc3RlcFxyXG4gKiBGdXJ0aGVyIGNhbGxzIHRoZSBkcmF3SGllcmFyY2h5IGZ1bmN0aW9uXHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBDb2xsYXBzZSBmdW5jdGlvbiAtIG9ubHkgc2hvdyB0aGUgYWN0aXZlIGxldmVsIGFuZCBvbmUgc3ViIGxldmVsXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY29sbGFwc2UoZCkge1xyXG4gICAgaWYgKGQuY2hpbGRyZW4gJiYgZC5kZXB0aCA8PSBoaWVyYXJjaHlMZXZlbHNbJ2gnICsgaWRdKSB7XHJcbiAgICAgICAgZC5fY2hpbGRyZW4gPSBkLmNoaWxkcmVuO1xyXG4gICAgICAgIGQuX2NoaWxkcmVuLmZvckVhY2goY29sbGFwc2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBkLmNoaWxkcmVuID0gbnVsbDtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIERyYXcgdGhlIGFsbCBoaWVyYXJjaGllcyBpbiB0aGUgc3BhdGlhbCB2aWV3XHJcbiAqIGFkZCBhIGdyb3VwIHdpdGggdGhlIGlkcyBvZiB0aGUgYW5pbWFscyBpbiBpdCB0byB0aGUgdmlld1xyXG4gKiB3aXRoIHBhdGggY2hpbGQgZWxlbWVudHNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBkcmF3SGllcmFyY2h5KCkge1xyXG4gICAgLy8gaWQgb2YgdGhlIGhpZXJhcmNoeSBlLmcuIFsxLDUsM11cclxuICAgIGxldCBoaWVyYXJjaHlJZHMgPSBPYmplY3Qua2V5cyhuZXR3b3JrSGllcmFyY2h5KS5tYXAoZnVuY3Rpb24oeCkge1xyXG4gICAgICAgIHJldHVybiB4LnJlcGxhY2UoJ2gnLCAnJyk7XHJcbiAgICB9KTtcclxuICAgIC8vICBUaGUgY2x1c3RlcmluZyBpbiBhbiAyRCBhcnJheSB3aXRoIHdoaWNoIGFuaW1hbCBpZCBiZWxvbmdzIHRvIHdoaWNoIGdyb3VwXHJcbiAgICBsZXQgaGllcmFyY2h5VmVydGljZXMgPSBbXTtcclxuXHJcbiAgICAvLyBpdGVyYXRlIG92ZXIgdGhlIGhpZXJhcmNoeSBkYXRhIHRvIGdldCB0aGUgaGllcmFyY2h5IGFuaW1hbCBpZHMgcGVyIGNsdXN0ZXJpbmcgYW5kIGdyb3VwaW5nXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhpZXJhcmNoeUlkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGxldCB0cmVlRGF0YSA9IG5ldHdvcmtIaWVyYXJjaHlbJ2gnICsgaGllcmFyY2h5SWRzW2ldXVtpbmRleFRpbWVdO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHRyZWVEYXRhKTtcclxuICAgICAgICBsZXQgbm9kZXMgPSBkMy5oaWVyYXJjaHkodHJlZURhdGEsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGQuY2hpbGRyZW47XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG5vZGVzID0gdHJlZW1hcChub2Rlcyk7XHJcbiAgICAgICAgbGV0IHJvb3QgPSBub2Rlc1snY2hpbGRyZW4nXVswXTtcclxuICAgICAgICBpZiAoc2hvd05ldHdvcmtIaWVyYXJjaHkgPT09IGhpZXJhcmNoeUlkc1tpXSkge1xyXG4gICAgICAgICAgICBuZXR3b3JrSGllcmFyY2h5SWRzID0gZ2V0SGllcmFyY2h5TGV2ZWwocm9vdCwgaGllcmFyY2h5SWRzW2ldKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gYWRkIHRoZSB2ZXJ0aWNlcyBpbnRvIHRoZSBhcnJheVxyXG4gICAgICAgIGhpZXJhcmNoeVZlcnRpY2VzLnB1c2goZ2V0SGllcmFyY2h5VmVydGljZXMoZ2V0SGllcmFyY2h5TGV2ZWwocm9vdCwgaGllcmFyY2h5SWRzW2ldKSkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGlmIG1vcmUgdGhhbiAyIGhpZXJhcmNoaWVzIGFyZSBkcmF3blxyXG4gICAgaWYgKGhpZXJhcmNoeVZlcnRpY2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAvLyB1bmlvbiB0aGUgbGlzdCBvZiBwb2x5Z29ucyB0byBvbmUgcG9seWdvblxyXG4gICAgICAgIC8vIGZvciAobGV0IGkgPSAwOyBpIDwgaGllcmFyY2h5SWRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgLy8gICAgIGhpZXJhcmNoeVZlcnRpY2VzW2ldID0gdW5pb25Qb2x5Z29ucyhoaWVyYXJjaHlWZXJ0aWNlc1tpXSk7XHJcbiAgICAgICAgLy8gfVxyXG5cclxuICAgICAgICAvLyB0cmFuc2Zvcm0gYW5kIGNhbGN1bGF0ZSB0aGUgaW50ZXJzZWN0aW9uIHBvbHlnb25zIG9mIHRoZSBuIGhpZXJhcmNoaWVzXHJcbiAgICAgICAgLy8gaWYgKHNldE9wZXJhdGlvbiA9PT0gJ2ludGVyc2VjdGlvbicpIHtcclxuICAgICAgICAvLyAgICAgLy8gdGVtcCBzb2x1dGlvbiBvZiB0d28gaW50ZXJzZWN0aW9uc1xyXG4gICAgICAgIC8vICAgICBsZXQgdG1wSW50ZXJzZWN0aW9uID0gaGllcmFyY2h5VmVydGljZXNbMF07XHJcbiAgICAgICAgLy8gICAgIC8vIGl0ZXJhdGUgb3ZlciB0aGUgaGllcmFyY2hpZXMgYW5kIGludGVyc2VjdCBhbGwgb2YgdGhlbVxyXG4gICAgICAgIC8vICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGhpZXJhcmNoeVZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgLy8gICAgICAgICAvLyBpbnRlcnNlY3Rpb25cclxuICAgICAgICAvLyAgICAgICAgIHRtcEludGVyc2VjdGlvbiA9IFBvbHlCb29sLmludGVyc2VjdCh7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgcmVnaW9uczogdG1wSW50ZXJzZWN0aW9uLCAvLyBsaXN0IG9mIHJlZ2lvbnNcclxuICAgICAgICAvLyAgICAgICAgICAgICBpbnZlcnRlZDogZmFsc2UgLy8gaXMgdGhpcyBwb2x5Z29uIGludmVydGVkP1xyXG4gICAgICAgIC8vICAgICAgICAgfSwge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIHJlZ2lvbnM6IGhpZXJhcmNoeVZlcnRpY2VzW2ldLFxyXG4gICAgICAgIC8vICAgICAgICAgICAgIGludmVydGVkOiBmYWxzZVxyXG4gICAgICAgIC8vICAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gICAgICAgICAvLyBjb252ZXJ0IGl0IGFnYWluXHJcbiAgICAgICAgLy8gICAgICAgICB0bXBJbnRlcnNlY3Rpb24gPSB0bXBJbnRlcnNlY3Rpb25bJ3JlZ2lvbnMnXTtcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gICAgIC8vIHJlc3VsdFxyXG4gICAgICAgIC8vICAgICBoaWVyYXJjaHlWZXJ0aWNlcyA9IFt0bXBJbnRlcnNlY3Rpb25dO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICAvLyAvLyB0cmFuc2Zvcm0gYW5kIGNhbGN1bGF0ZSB0aGUgc3ltbWV0cmljIGRpZmZlcmVuY2UgcG9seWdvbnMgb2YgdGhlIG4gaGllcmFyY2hpZXNcclxuICAgICAgICAvLyBlbHNlIGlmIChzZXRPcGVyYXRpb24gPT09ICdzeW0tZGlmZmVyZW5jZScpIHtcclxuICAgICAgICAvLyAgICAgLy8geG9yID0gVW5pb24gb2YgYWxsIGhpZXJhcmNoaWVzIC0gaW50ZXJzZWN0aW9uIG9mIGFsbCBoaWVyYXJjaGllc1xyXG4gICAgICAgIC8vICAgICAvLyB0ZW1wIHNvbHV0aW9uIG9mIHR3byBpbnRlcnNlY3Rpb25zXHJcbiAgICAgICAgLy8gICAgIGxldCB0bXBJbnRlcnNlY3Rpb24gPSBoaWVyYXJjaHlWZXJ0aWNlc1swXTtcclxuICAgICAgICAvLyAgICAgLy8gaXRlcmF0ZSBvdmVyIHRoZSBoaWVyYXJjaGllcyBhbmQgaW50ZXJzZWN0IGFsbCBvZiB0aGVtXHJcbiAgICAgICAgLy8gICAgIGZvciAobGV0IGkgPSAxOyBpIDwgaGllcmFyY2h5VmVydGljZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAvLyAgICAgICAgIC8vIGludGVyc2VjdGlvblxyXG4gICAgICAgIC8vICAgICAgICAgdG1wSW50ZXJzZWN0aW9uID0gUG9seUJvb2wuaW50ZXJzZWN0KHtcclxuICAgICAgICAvLyAgICAgICAgICAgICByZWdpb25zOiB0bXBJbnRlcnNlY3Rpb24sIC8vIGxpc3Qgb2YgcmVnaW9uc1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIGludmVydGVkOiBmYWxzZSAvLyBpcyB0aGlzIHBvbHlnb24gaW52ZXJ0ZWQ/XHJcbiAgICAgICAgLy8gICAgICAgICB9LCB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgcmVnaW9uczogaGllcmFyY2h5VmVydGljZXNbaV0sXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgaW52ZXJ0ZWQ6IGZhbHNlXHJcbiAgICAgICAgLy8gICAgICAgICB9KTtcclxuICAgICAgICAvLyAgICAgICAgIC8vIGNvbnZlcnQgaXQgYWdhaW5cclxuICAgICAgICAvLyAgICAgICAgIHRtcEludGVyc2VjdGlvbiA9IHRtcEludGVyc2VjdGlvblsncmVnaW9ucyddO1xyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gICAgIC8vIGludGVyc2VjdGlvbiByZXN1bHRcclxuICAgICAgICAvLyAgICAgbGV0IGludGVyc2VjdGlvbkhpZXJhcmNoeVBvbHlnb25zID0gdG1wSW50ZXJzZWN0aW9uO1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gICAgIC8vIHVuaW9uXHJcbiAgICAgICAgLy8gICAgIGxldCB0bXBVbmlvbiA9IGhpZXJhcmNoeVZlcnRpY2VzWzBdO1xyXG4gICAgICAgIC8vICAgICAvLyBpdGVyYXRlIG92ZXIgdGhlIGhpZXJhcmNoaWVzIGFuZCBpbnRlcnNlY3QgYWxsIG9mIHRoZW1cclxuICAgICAgICAvLyAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBoaWVyYXJjaHlWZXJ0aWNlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIC8vICAgICAgICAgLy8gaW50ZXJzZWN0aW9uXHJcbiAgICAgICAgLy8gICAgICAgICB0bXBVbmlvbiA9IFBvbHlCb29sLnVuaW9uKHtcclxuICAgICAgICAvLyAgICAgICAgICAgICByZWdpb25zOiB0bXBVbmlvbiwgLy8gbGlzdCBvZiByZWdpb25zXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgaW52ZXJ0ZWQ6IGZhbHNlIC8vIGlzIHRoaXMgcG9seWdvbiBpbnZlcnRlZD9cclxuICAgICAgICAvLyAgICAgICAgIH0sIHtcclxuICAgICAgICAvLyAgICAgICAgICAgICByZWdpb25zOiBoaWVyYXJjaHlWZXJ0aWNlc1tpXSxcclxuICAgICAgICAvLyAgICAgICAgICAgICBpbnZlcnRlZDogZmFsc2VcclxuICAgICAgICAvLyAgICAgICAgIH0pO1xyXG4gICAgICAgIC8vICAgICAgICAgLy8gY29udmVydCBpdCBhZ2FpblxyXG4gICAgICAgIC8vICAgICAgICAgdG1wVW5pb24gPSB0bXBVbmlvblsncmVnaW9ucyddO1xyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gICAgIGxldCB1bmlvbkhpZXJhcmNoeVBvbHlnb25zID0gdG1wVW5pb247XHJcbiAgICAgICAgLy9cclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vICAgICAvLyBzeW1tZXRyaWMgZGlmZmVyZW5jZVxyXG4gICAgICAgIC8vICAgICBsZXQgdG1wRGlmZmVyZW5jZSA9IFBvbHlCb29sLnhvcih7XHJcbiAgICAgICAgLy8gICAgICAgICByZWdpb25zOiB1bmlvbkhpZXJhcmNoeVBvbHlnb25zLCAvLyBsaXN0IG9mIHJlZ2lvbnNcclxuICAgICAgICAvLyAgICAgICAgIGludmVydGVkOiBmYWxzZSAvLyBpcyB0aGlzIHBvbHlnb24gaW52ZXJ0ZWQ/XHJcbiAgICAgICAgLy8gICAgIH0sIHtcclxuICAgICAgICAvLyAgICAgICAgIHJlZ2lvbnM6IGludGVyc2VjdGlvbkhpZXJhcmNoeVBvbHlnb25zLFxyXG4gICAgICAgIC8vICAgICAgICAgaW52ZXJ0ZWQ6IGZhbHNlXHJcbiAgICAgICAgLy8gICAgIH0pO1xyXG4gICAgICAgIC8vICAgICAvLyBjb252ZXJ0IGl0IGFnYWluXHJcbiAgICAgICAgLy8gICAgIHRtcERpZmZlcmVuY2UgPSB0bXBEaWZmZXJlbmNlWydyZWdpb25zJ107XHJcbiAgICAgICAgLy8gICAgIC8vIHJlc3VsdFxyXG4gICAgICAgIC8vICAgICBoaWVyYXJjaHlWZXJ0aWNlcyA9IFt0bXBEaWZmZXJlbmNlXTtcclxuICAgICAgICAvLyB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gREFUQSBKb2luXHJcbiAgICBsZXQgaGllcmFyY2hpZXMgPSBzcGF0aWFsVmlld1xyXG4gICAgICAgIC5zZWxlY3RBbGwoJ2cuaGllcmFyY2h5LWdyb3VwJylcclxuICAgICAgICAuZGF0YShoaWVyYXJjaHlWZXJ0aWNlcyk7XHJcblxyXG4gICAgLy8gRU5URVIgdGhlIGdyb3VwcyAtIGFkZHMgYSBzcGVjaWZpYyBpZCBhbmQgY29sb3JcclxuICAgIGhpZXJhcmNoaWVzXHJcbiAgICAgICAgLmVudGVyKClcclxuICAgICAgICAuYXBwZW5kKCdnJylcclxuICAgICAgICAuYXR0cignY2xhc3MnLCBmdW5jdGlvbihkLCBpKSB7XHJcbiAgICAgICAgICAgIGlmIChzZXRPcGVyYXRpb24gPT09ICdpbnRlcnNlY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2hpZXJhcmNoeS1ncm91cCBpbnRlcnNlY3Rpb24nO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNldE9wZXJhdGlvbiA9PT0gJ3N5bS1kaWZmZXJlbmNlJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdoaWVyYXJjaHktZ3JvdXAgc3ltLWRpZmZlcmVuY2UnO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdoaWVyYXJjaHktZ3JvdXAgaCcgKyBoaWVyYXJjaHlJZHNbaV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC5zdHlsZSgnZmlsbCcsIGZ1bmN0aW9uKGQsIGkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGhpZXJhcmNoeUNvbG9yc1snaCcgKyBoaWVyYXJjaHlJZHNbaV1dO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmF0dHIoJ3N0cm9rZScsIGZ1bmN0aW9uKGQsIGkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGhpZXJhcmNoeUNvbG9yc1snaCcgKyBoaWVyYXJjaHlJZHNbaV1dO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLm1vdmVUb0JhY2soKTtcclxuXHJcbiAgICAvLyBVUERBVEUgLSB0aGUgY2xhc3MgbmVlZGVkIGZvciBpbnRlcnNlY3Rpb24gYW5kIHN5bW1ldHJpYyBkaWZmZXJlbmNlXHJcbiAgICBoaWVyYXJjaGllcy5hdHRyKCdjbGFzcycsIGZ1bmN0aW9uKGQsIGkpIHtcclxuICAgICAgICBpZiAoc2V0T3BlcmF0aW9uID09PSAnaW50ZXJzZWN0aW9uJykge1xyXG4gICAgICAgICAgICByZXR1cm4gJ2hpZXJhcmNoeS1ncm91cCBpbnRlcnNlY3Rpb24nO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoc2V0T3BlcmF0aW9uID09PSAnc3ltLWRpZmZlcmVuY2UnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnaGllcmFyY2h5LWdyb3VwIHN5bS1kaWZmZXJlbmNlJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gJ2hpZXJhcmNoeS1ncm91cCBoJyArIGhpZXJhcmNoeUlkc1tpXTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBFWElUXHJcbiAgICBoaWVyYXJjaGllcy5leGl0KClcclxuICAgICAgICAucmVtb3ZlKCk7XHJcblxyXG4gICAgLy8gSGllcmFjaHkgaHVsbHMgYWRkZWQgdG8gdGhlIHNwYXRpYWwgdmlldyAtIGdldCB0aGUgcG9pbnRzIGZvciBlYWNoIGFuaW1hbCBpbiB0aGVcclxuICAgIC8vIHNwYXRpYWwgdmlldyBzbyB0aGF0IGEgY29udmV4IGh1bGwgY2FuIGJlIGNhbGN1bGF0ZWRcclxuICAgIGxldCBoaWVyYXJ5SHVsbHMgPSBoaWVyYXJjaGllcy5zZWxlY3RBbGwoJ3BhdGguaGllcmFyY2h5LWh1bGwtcGF0aCcpXHJcbiAgICAgICAgLmRhdGEoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAvLyBFTlRFUiBhbmQgY2FsY3VsYXRlIHRoZSBjb252ZXggaHVsbFxyXG4gICAgaGllcmFyeUh1bGxzXHJcbiAgICAgICAgLmVudGVyKClcclxuICAgICAgICAuYXBwZW5kKCdwYXRoJylcclxuICAgICAgICAvLyAuYXR0cignaWQnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgLy8gICAgIHJldHVybiAnaHAnICsgZC5qb2luKCcnKS5yZXBsYWNlKC8sL2csICcnKTtcclxuICAgICAgICAvLyB9KVxyXG4gICAgICAgIC5hdHRyKCdjbGFzcycsICdoaWVyYXJjaHktaHVsbC1wYXRoJylcclxuICAgICAgICAuYXR0cignZCcsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgLy8gcmV0dXJuIGRyYXdMaW5lKGQpO1xyXG4gICAgICAgICAgICByZXR1cm4gJ00nICsgZC5qb2luKCdMJykgKyAnWic7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgLy8gVVBEQVRFIHRoZSBjb252ZXggaHVsbFxyXG4gICAgaGllcmFyeUh1bGxzXHJcbiAgICAgICAgLmF0dHIoJ2QnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgIC8vIHJldHVybiBkcmF3TGluZShkKTtcclxuICAgICAgICAgICAgcmV0dXJuICdNJyArIGQuam9pbignTCcpICsgJ1onO1xyXG4gICAgICAgIH0pO1xyXG4gICAgLy8gLmF0dHIoJ2lkJywgZnVuY3Rpb24oZCkge1xyXG4gICAgLy8gcmV0dXJuICdocCcgKyBkLmpvaW4oJycpLnJlcGxhY2UoLywvZywgJycpO1xyXG4gICAgLy8gfSk7XHJcbiAgICAvLyBFWElUXHJcbiAgICBoaWVyYXJ5SHVsbHMuZXhpdCgpXHJcbiAgICAgICAgLnJlbW92ZSgpO1xyXG5cclxufVxyXG5cclxuLyoqXHJcbiAqIFVuaW9uIG11bHRpcGxlIHBvbHlnb25zIHRvZ2V0aGVyIC0gbmVlZGVkIG9yIGVsc2UgdGhlcmUgd2lsbCBiZSBob2xlcyBpbiB0aGUgaW50ZXJzZWN0aW9uc1xyXG4gKiBAcGFyYW0ge2FycmF5fSBwb2x5Z29ucyAtIGFycmF5IG9mIGFycmF5IG9mIHBvaW50c1xyXG4gKi9cclxuLy8gZnVuY3Rpb24gdW5pb25Qb2x5Z29ucyhwb2x5Z29ucykge1xyXG4vLyAgICAgLy8gY29uc29sZS5sb2cocG9seWdvbnMpO1xyXG4vLyAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwb2x5Z29ucy5sZW5ndGg7IGkrKykge1xyXG4vLyAgICAgICAgIHBvbHlnb25zW2ldID0ge1xyXG4vLyAgICAgICAgICAgICByZWdpb25zOiBbcG9seWdvbnNbaV1dLFxyXG4vLyAgICAgICAgICAgICBpbnZlcnRlZDogZmFsc2UgLy8gaXMgdGhpcyBwb2x5Z29uIGludmVydGVkP1xyXG4vLyAgICAgICAgIH07XHJcbi8vICAgICB9XHJcbi8vICAgICAvLyB1bmlvbiBhIGxpc3Qgb2YgcG9seWdvbnMgdG9nZXRoZXJcclxuLy8gICAgIGxldCBzZWdtZW50cyA9IFBvbHlCb29sLnNlZ21lbnRzKHBvbHlnb25zWzBdKTtcclxuLy8gICAgIGZvciAobGV0IGkgPSAxOyBpIDwgcG9seWdvbnMubGVuZ3RoOyBpKyspIHtcclxuLy8gICAgICAgICBsZXQgc2VnMiA9IFBvbHlCb29sLnNlZ21lbnRzKHBvbHlnb25zW2ldKTtcclxuLy8gICAgICAgICBsZXQgY29tYiA9IFBvbHlCb29sLmNvbWJpbmUoc2VnbWVudHMsIHNlZzIpO1xyXG4vLyAgICAgICAgIHNlZ21lbnRzID0gUG9seUJvb2wuc2VsZWN0VW5pb24oY29tYik7XHJcbi8vICAgICB9XHJcbi8vICAgICByZXR1cm4gUG9seUJvb2wucG9seWdvbihzZWdtZW50cylbJ3JlZ2lvbnMnXTtcclxuLy8gfVxyXG5cclxuLyoqXHJcbiAqIEVkZ2UgZHJhd2luZyBtZXRob2Qgb2YgdGhlIGRlbmRyb2dyYW1cclxuICogQHBhcmFtIHtvYmplY3R9IGQgLSBUcmVlbWFwIGVsZW1lbnRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBkaWFnb25hbExpbmVzKGQpIHtcclxuICAgIHJldHVybiAnTScgKyBkLnggKyAnLCcgKyBkLnkgK1xyXG4gICAgICAgICdWJyArIGQucGFyZW50LnkgKyAnSCcgKyBkLnBhcmVudC54O1xyXG59XHJcblxyXG4vKipcclxuICogT24gY2xpY2sgZnVuY3Rpb24gLSBoaWdobGlnaHQgdGhlIGVsZW1lbnRzIGluIHRoZSBzcGF0aWFsIHZpZXdcclxuICogQHBhcmFtIHtvYmplY3R9IGQgLSBUcmVlbWFwIGVsZW1lbnRcclxuICovXHJcbmZ1bmN0aW9uIGNsaWNrKGQpIHtcclxuICAgIHNldEFjdGl2ZUFuaW1hbHMoZFsnZGF0YSddWyduYW1lJ10pO1xyXG4gICAgLy8gaWYgbm8gYW5pbWF0aW9uIGlzIGFjdGl2ZSBkcmF3IHRoZSBkcmF3IG9uZSBzdGVwXHJcbiAgICBpZiAoISQoJyNwbGF5LWJ1dHRvbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgIGRlY0luZGV4VGltZSgpO1xyXG4gICAgICAgIGRyYXcoKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBhbGwgdGhlIGNsdXN0ZXJpbmcgb2YgYSBzcGVjaWZpYyBsZXZlbCBpbiB0aGUgZGVuZHJvZ3JhbSB0cmVlXHJcbiAqIEZvciBpbnN0YW5jZSBhbGwgY2x1c3RlcnMgZnJvbSBsZXZlbCA1XHJcbiAqIEBwYXJhbSB7b2JqZWN0fSByb290IC0gUm9vdCBvZiB0aGUgdHJlZW1hcFxyXG4gKiBAcGFyYW0ge251bWJlcn0gaGllYXJjaHkgLSBOdW1iZXIgb2YgaGllcmFyY2h5IGZyb20gWzAtM11cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRIaWVyYXJjaHlMZXZlbChyb290LCBoaWVyYXJjaHkpIHtcclxuICAgIGxldCByZXN1bHQgPSBbXTtcclxuICAgIGxldCBsZXZlbCA9IGhpZXJhcmNoeUxldmVsc1snaCcgKyBoaWVyYXJjaHldO1xyXG5cclxuICAgIC8vIHNlY29uZCBsZXZlbCBvZiB0aGUgYXJyYXlcclxuICAgIGxldCB0bXBfbm9kZXMgPSByb290WydjaGlsZHJlbiddO1xyXG4gICAgLy8gaXRlcmF0ZSB0aHJvdWdoIHRoZSB0cmVlXHJcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IHJvb3RbJ2hlaWdodCddOyBpKyspIHtcclxuICAgICAgICAvLyBjaGVjayBpZiB3ZSBhcmUgYXQgdGhlIHNlYXJjaGVkIGxldmVsXHJcbiAgICAgICAgaWYgKHRtcF9ub2Rlc1swXSAmJiB0bXBfbm9kZXNbMF1bJ2RlcHRoJ10gPT09IGxldmVsKSB7XHJcbiAgICAgICAgICAgIC8vIGFkZCBlYWNoIGNsdXN0ZXIgdG8gdGhlIHJlc3VsdCBzZXRcclxuICAgICAgICAgICAgdG1wX25vZGVzLmZvckVhY2goZnVuY3Rpb24obm9kZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBub2RlWydkYXRhJ11bJ25hbWUnXSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChub2RlWydkYXRhJ11bJ25hbWUnXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gZ2V0IGFsbCBjaGlsZHJlbiBvZiBhIHNwZWNpZmljIGxldmVsIGluIHRoZSB0cmVlXHJcbiAgICAgICAgbGV0IHRtcCA9IFtdO1xyXG4gICAgICAgIHRtcF9ub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uKG5vZGUpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBub2RlWydjaGlsZHJlbiddICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgdG1wID0gdG1wLmNvbmNhdChub2RlWydjaGlsZHJlbiddKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRtcF9ub2RlcyA9IHRtcDtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXR1cm4gdGhlIHNwZWNpZmljIHZlcnRpY2VzIG9mIGEgY2x1c3RlcmluZyBpbiB0aGUgc3BhdGlhbCB2aWV3XHJcbiAqIFJldHVybiBhbiBhcnJheSBvZiBwb2ludHMgW1t4LHldW3gseV0uLi5dXHJcbiAqIEBwYXJhbSB7QXJyYXl9IGhpZXJhcmNoaWVzIC0gQXJyYXkgb2YgYXJyYXlzIHdpdGggZWFjaCBhcnJheSBjb250YWlucyBhbGwgdGhlIGlkcyBmb3IgYSBzcGVjaWZpYyBjbHVzdGVyaW5nXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0SGllcmFyY2h5VmVydGljZXMoaGllcmFyY2hpZXMpIHtcclxuICAgIGxldCByZXN1bHQgPSBbXTsgLy8gcmVzdWx0IHNldFxyXG4gICAgaGllcmFyY2hpZXMuZm9yRWFjaChmdW5jdGlvbihjbHVzdGVyKSB7XHJcbiAgICAgICAgbGV0IHZlcnRpY2VzID0gW107IC8vIHZlcnRpY2VzIG9mIHRoZSBjbHVzdGVycyBpbiB0aGUgc3BhdGlhbCB2aWV3XHJcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBjbHVzdGVyLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgIGxldCBncm91cE1lbWJlciA9IGFycmF5QW5pbWFscy5maW5kKGQgPT4gZFsnYSddID09PSBjbHVzdGVyW2pdKTtcclxuICAgICAgICAgICAgaWYgKGdyb3VwTWVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICB2ZXJ0aWNlcy5wdXNoKFtncm91cE1lbWJlclsncCddWzBdLCAtZ3JvdXBNZW1iZXJbJ3AnXVsxXV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEFuZHJldyBtb250b25lIGNoYWluIGFsZ29yaXRobSByZXV0cm5zIGZvciBwb2ludHMgZmV3ZXIgdGhhbiAzIG51bGxcclxuICAgICAgICBpZiAodmVydGljZXMubGVuZ3RoID49IDMpIHtcclxuICAgICAgICAgICAgcmVzdWx0LnB1c2goZDMucG9seWdvbkh1bGwodmVydGljZXMpKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXQgdGhlIGFjdGl2ZSBsZXZlbCBmb3IgYSBzcGVjaWZpYyBkZW5kcm9ncmFtXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBoaWVyYXJjaHkgLSBIaWVyYXJjaHkgY2FuIGJlIGZyb20gWzAtM11cclxuICogQHBhcmFtIHtudW1iZXJ9IGxldmVsIC0gTmV3IGFjdGl2ZSBsZXZlbFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldEhpZXJhcmNoeUxldmVsKGhpZXJhcmNoeSwgbGV2ZWwpIHtcclxuICAgIC8vIFRPRE8gY2F0Y2ggY2FzZXMgPCAwIGFuZCBiaWdnZXIgdGhhbiBvdmVyYWxsIGhlaWdodFxyXG4gICAgaGllcmFyY2h5TGV2ZWxzWydoJyArIGhpZXJhcmNoeV0gPSBsZXZlbDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlbW92ZSB0aGUgZW50cnkgZm9yIHRoZSBoaWVyYXJjaCBsZXZlbFxyXG4gKiBAcGFyYW0ge251bWJlcn0gaGllcmFyY2h5IC0gSGllcmFyY2h5XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlSGllcmFyY2h5TGV2ZWwoaGllcmFyY2h5KSB7XHJcbiAgICAvLyBUT0RPIGNhdGNoIGNhc2VzIDwgMCBhbmQgYmlnZ2VyIHRoYW4gb3ZlcmFsbCBoZWlnaHRcclxuICAgIGRlbGV0ZSBoaWVyYXJjaHlMZXZlbHNbJ2gnICsgaGllcmFyY2h5XTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldCB0aGUgYWN0aXZlIGNvbG9yIGZvciBhIHNwZWNpZmljIGRlbmRyb2dyYW1cclxuICogQHBhcmFtIHtudW1iZXJ9IGhpZXJhcmNoeSAtIEhpZXJhcmNoeSBjYW4gYmUgZnJvbSBbMC0zXVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldEhpZXJhcmNoeUNvbG9yKGhpZXJhcmNoeSkge1xyXG4gICAgLy8gY2hlY2sgaWYgdGhlIGhpZXJhcmNoeSBpcyBhbHJlYWR5IHNob3duIGFzIG5ldHdvcmtcclxuICAgIC8vIHRha2UgdGhlIHNhbWUgY29sb3JcclxuICAgIGZvciAobGV0IGtleSBpbiBuZXR3b3JrQ29sb3IpIHtcclxuICAgICAgICBpZiAoa2V5ID09PSAoJ2gnICsgaGllcmFyY2h5KSkge1xyXG4gICAgICAgICAgICBoaWVyYXJjaHlDb2xvcnNbJ2gnICsgaGllcmFyY2h5XSA9IG5ldHdvcmtDb2xvcltrZXldO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gaGllcmFyY2h5IGlzIG5vdCB2aXN1YWxpemVkIGFscmVhZHkgYXMgYSBuZXR3b3JrXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbG9ycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGxldCB0bXBfYm9vbGVhbiA9IHRydWU7XHJcbiAgICAgICAgZm9yIChsZXQga2V5IGluIGhpZXJhcmNoeUNvbG9ycykge1xyXG4gICAgICAgICAgICBpZiAoaGllcmFyY2h5Q29sb3JzLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChoaWVyYXJjaHlDb2xvcnNba2V5XSA9PT0gY29sb3JzW2ldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG1wX2Jvb2xlYW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodG1wX2Jvb2xlYW4pIHtcclxuICAgICAgICAgICAgLy8gY2hlY2sgaWYgYSBuZXR3b3JrIGlzIGRlcGljdGVkXHJcbiAgICAgICAgICAgIC8vIGlmIHNvIHNraXAgdGhlIGNvbG9yIHdoaWNoIGlzIGFscmVhZHkgY2hvb3NlbiBmb3IgdGhlIG5ldHdvcmtcclxuICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKG5ldHdvcmtDb2xvcikubGVuZ3RoICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gbmV0d29ya0NvbG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ldHdvcmtDb2xvcltrZXldICE9PSBjb2xvcnNbaV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGllcmFyY2h5Q29sb3JzWydoJyArIGhpZXJhcmNoeV0gPSBjb2xvcnNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBoaWVyYXJjaHlDb2xvcnNbJ2gnICsgaGllcmFyY2h5XSA9IGNvbG9yc1tpXTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZW1vdmUgdGhlIGNvbG9yIGZvciB0aGUgaGllcmFyY2ggbGV2ZWxcclxuICogQHBhcmFtIHtudW1iZXJ9IGhpZXJhcmNoeSAtIEhpZXJhcmNoeVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUhpZXJhcmNoeUNvbG9yKGhpZXJhcmNoeSkge1xyXG4gICAgZGVsZXRlIGhpZXJhcmNoeUNvbG9yc1snaCcgKyBoaWVyYXJjaHldO1xyXG59XHJcblxyXG4vKipcclxuICogQWRkIHRoZSBoaWVyYXJjaHkgYnV0dG9uIHRvIHRoZSBkaXZcclxuICogQHBhcmFtIHtudW1iZXJ9IGlkIC0gSGllcmFyY2h5IG9mIHRoZSBpZFxyXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZSAtIE5ldyBhY3RpdmUgbGV2ZWxcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRIaWVyYXJjaHlCdXR0b24oaWQsIG5hbWUpIHtcclxuICAgIGlmICgkKCcuc2hvdy1kZW5kcm9ncmFtJykubGVuZ3RoIDwgbWF4TnVtYmVySGllcmFyY2hpZXMpIHtcclxuICAgICAgICAkKCcjZGVuZHJvZ3JhbS1idXR0b25zLWRpdicpLmFwcGVuZCgnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgaWQ9XCJzaG93LWRlbmRyb2dyYW0tJyArIGlkICsgJ1wiIGRhdGE9JyArIGlkICsgJyBuYW1lPScgKyBuYW1lICtcclxuICAgICAgICAgICAgJyBjbGFzcz1cInNob3ctZGVuZHJvZ3JhbSBidG4gYnRuLWJsb2NrXCIgZGF0YS10b2dnbGU9XCJidXR0b25cIiBhcmlhLXByZXNzZWQ9XCJmYWxzZVwiIGF1dG9jb21wbGV0ZT1cIm9mZlwiPicgK1xyXG4gICAgICAgICAgICAnIDxzcGFuIGNsYXNzPVwiYnRuLWxhYmVsXCIgaWQ9XCJidG4tbGVmdFwiPiA8aSBjbGFzcz1cIm1kaSBtZGktYXJyb3ctY29sbGFwc2UtbGVmdFwiPjwvaT4mbmJzcCZuYnNwIFNob3cgJyArIG5hbWUgKyAnPC9zcGFuPicgK1xyXG4gICAgICAgICAgICAnPHNwYW4gY2xhc3M9XCJidG4tbGFiZWxcIiBpZD1cImJ0bi1yaWdodFwiPiA8aSBjbGFzcz1cIm1kaSBtZGktYXJyb3ctY29sbGFwc2UtcmlnaHRcIj48L2k+Jm5ic3AmbmJzcCBIaWRlICcgKyBuYW1lICsgJyA8L3NwYW4+PC9idXR0b24+IDxicj4nXHJcbiAgICAgICAgKTtcclxuICAgICAgICAkKCcjc2hvdy1kZW5kcm9ncmFtLScgKyBpZCkuZmluZCgnI2J0bi1yaWdodCcpLmhpZGUoKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFJlbW92ZSBhIHNwZWNpZmljIGhpZXJhcmNoeSBidXR0b24gdG8gdGhlIGRpdlxyXG4gKiBAcGFyYW0ge251bWJlcn0gaWQgLSBIaWVyYXJjaHkgb2YgdGhlIGlkXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlSGllcmFyY2h5QnV0dG9uKGlkKSB7XHJcbiAgICAvLyByZW1vdmUgdGhlIGZvbGxvd2luZyBsaW5lIGJyZWFrIGFuZCBlbGVtZW50XHJcbiAgICAkKCcjc2hvdy1kZW5kcm9ncmFtLScgKyBpZCkubmV4dCgpLnJlbW92ZSgpO1xyXG4gICAgJCgnI3Nob3ctZGVuZHJvZ3JhbS0nICsgaWQpLnJlbW92ZSgpO1xyXG59XHJcblxyXG4vKipcclxuICogVXBkYXRlIHNsaWRlciBhbmQgdGV4dCBpbiB0aGUgZGVuZHJvZ3JhbSBwYW5lbFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZURlbmRyb2dyYW0oKSB7XHJcbiAgICAvLyBnZXQgdGhlIGltcG9ydGFudCBpbmZvXHJcbiAgICBsZXQgaWQgPSAkKCcuc2hvdy1kZW5kcm9ncmFtLmJ0bi1wcmltYXJ5JykuYXR0cignZGF0YScpO1xyXG4gICAgbGV0IG5hbWUgPSAkKCcuc2hvdy1kZW5kcm9ncmFtLmJ0bi1wcmltYXJ5JykuYXR0cignbmFtZScpO1xyXG4gICAgLy8gc2V0IHRoZSBuYW1lIG9mIHRoZSBkaXNwbGF5ZWQgaGllcmFyY2h5XHJcbiAgICAkKCcjZGVuZHJvZ3JhbS1wYW5lbC1uYW1lJykudGV4dChuYW1lKTtcclxuXHJcbiAgICAvLyBzZXQgc2xpZGVyIGFuZCAgdGV4dCB2YWx1ZVxyXG4gICAgJCgnI2RlbmRyb2dyYW0tcGFuZWwtbGV2ZWwtc2xpZGVyJykudmFsKGhpZXJhcmNoeUxldmVsc1snaCcgKyBpZF0pO1xyXG4gICAgJCgnI2RlbmRyb2dyYW0tcGFuZWwtbGV2ZWwtdGV4dCcpLnRleHQoaGllcmFyY2h5TGV2ZWxzWydoJyArIGlkXSk7XHJcblxyXG59XHJcblxyXG4vKipcclxuICogVXBkYXRlIGhpZXJhcmNoeSBsZWdlbmRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjaGFuZ2VIaWVyYXJjaHlMZWdlbmQoKSB7XHJcbiAgICBsZXQgbGVnZW5kOyAvLyB0aGUgY29sb3IgbGVnZW5kXHJcbiAgICBsZXQgbGVnZW5kVGV4dDsgLy8gY29sb3IgbGVnZW5kIHRleHRcclxuICAgIC8vIHZhcnMgZm9yIHRoZSBsZWdlbmRcclxuICAgIGxldCBsZWdlbmRTd2F0Y2hXaWR0aCA9IDUwO1xyXG4gICAgbGV0IGxlZ2VuZFN3YXRjaEhlaWdodCA9IDIwO1xyXG5cclxuICAgIC8vIFNob3cgb3IgaGlkZSB0aGUgc3ZnIGVsZW1lbnRcclxuICAgIGlmIChPYmplY3Qua2V5cyhoaWVyYXJjaHlDb2xvcnMpLmxlbmd0aCAhPT0gMCB8fCBPYmplY3Qua2V5cyhuZXR3b3JrQ29sb3IpLmxlbmd0aCAhPT0gMCkge1xyXG4gICAgICAgICQoJyNoaWVyYXJjaHktbGVnZW5kLWRpdicpLnNob3coKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJCgnI2hpZXJhcmNoeS1sZWdlbmQtZGl2JykuaGlkZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBsZWdlbmREYXRhID0gW107XHJcbiAgICBsZXQgbGVnZW5kVGV4dERhdGEgPSBbXTtcclxuICAgIC8vIGdldCB0aGUgcmVxdWlyZWQgZGF0YVxyXG4gICAgJCgnLnNob3ctZGVuZHJvZ3JhbScpLmVhY2goZnVuY3Rpb24oaSwgb2JqKSB7XHJcbiAgICAgICAgLy8gY2hlY2sgaWYgZGF0YSBpcyBub3QgdW5kZWZpbmVkXHJcbiAgICAgICAgaWYgKGhpZXJhcmNoeUNvbG9yc1snaCcgKyAkKG9iaikuYXR0cignZGF0YScpXSAhPSBudWxsICYmICQob2JqKS5hdHRyKCduYW1lJykgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBsZWdlbmREYXRhLnB1c2goaGllcmFyY2h5Q29sb3JzWydoJyArICQob2JqKS5hdHRyKCdkYXRhJyldKTtcclxuICAgICAgICAgICAgbGVnZW5kVGV4dERhdGEucHVzaCgkKG9iaikuYXR0cignbmFtZScpKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIC8vIGFkZCB0aGUgbmV0d29yayBjb2xvclxyXG4gICAgaWYgKE9iamVjdC5rZXlzKG5ldHdvcmtDb2xvcikubGVuZ3RoICE9PSAwKSB7XHJcbiAgICAgICAgZm9yIChsZXQga2V5IGluIG5ldHdvcmtDb2xvcikge1xyXG4gICAgICAgICAgICBpZiAobGVnZW5kRGF0YS5pbmRleE9mKG5ldHdvcmtDb2xvcltrZXldKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIGxlZ2VuZERhdGEucHVzaChuZXR3b3JrQ29sb3Jba2V5XSk7XHJcbiAgICAgICAgICAgICAgICBsZWdlbmRUZXh0RGF0YS5wdXNoKCdOZXR3b3JrJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBEQVRBIEpPSU5cclxuICAgIGxlZ2VuZCA9IHN2Z0xlZ2VuZC5zZWxlY3RBbGwoJ3JlY3QubGVnZW5kJylcclxuICAgICAgICAuZGF0YShsZWdlbmREYXRhKTtcclxuICAgIGxlZ2VuZFRleHQgPSBzdmdMZWdlbmQuc2VsZWN0QWxsKCd0ZXh0LmxlZ2VuZC10ZXh0JylcclxuICAgICAgICAuZGF0YShsZWdlbmRUZXh0RGF0YSk7XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tIExlZ2VuZCBzd2F0Y2hlcyAgLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLy8gVVBEQVRFIC0gbGVnZW5kXHJcbiAgICBsZWdlbmQuc3R5bGUoJ2ZpbGwnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICB9KTtcclxuICAgIC8vIEVOVEVSIC0gbGVnZW5kXHJcbiAgICBsZWdlbmRcclxuICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgIC5hcHBlbmQoJ3JlY3QnKVxyXG4gICAgICAgIC5hdHRyKCdjbGFzcycsICdsZWdlbmQnKVxyXG4gICAgICAgIC5hdHRyKCd3aWR0aCcsIGxlZ2VuZFN3YXRjaFdpZHRoKVxyXG4gICAgICAgIC5hdHRyKCdoZWlnaHQnLCBsZWdlbmRTd2F0Y2hIZWlnaHQpXHJcbiAgICAgICAgLmF0dHIoJ3knLCAwKVxyXG4gICAgICAgIC5hdHRyKCd4JywgZnVuY3Rpb24oZCwgaSkge1xyXG4gICAgICAgICAgICByZXR1cm4gKGxlZ2VuZFN3YXRjaFdpZHRoICsgMi41ICogaSAqIGxlZ2VuZFN3YXRjaFdpZHRoKSArICdweCc7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuc3R5bGUoJ2ZpbGwnLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkO1xyXG4gICAgICAgIH0pO1xyXG4gICAgLy8gRVhJVCAtIGxlZ2VuZFxyXG4gICAgbGVnZW5kLmV4aXQoKVxyXG4gICAgICAgIC5yZW1vdmUoKTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0gVGV4dCAgLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLy8gVVBEQVRFIC0gbGVnZW5kIHRleHRcclxuICAgIGxlZ2VuZFRleHQudGV4dChmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICB9KTtcclxuICAgIC8vIEVOVEVSIC0gbGVnZW5kIHRleHRcclxuICAgIGxlZ2VuZFRleHRcclxuICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgIC5hcHBlbmQoJ3RleHQnKVxyXG4gICAgICAgIC5hdHRyKCdjbGFzcycsICdsZWdlbmQtdGV4dCcpXHJcbiAgICAgICAgLmF0dHIoJ3knLCAyICogbGVnZW5kU3dhdGNoSGVpZ2h0KVxyXG4gICAgICAgIC5hdHRyKCd4JywgZnVuY3Rpb24oZCwgaSkge1xyXG4gICAgICAgICAgICByZXR1cm4gKGxlZ2VuZFN3YXRjaFdpZHRoICsgMi41ICogaSAqIGxlZ2VuZFN3YXRjaFdpZHRoKSArICdweCc7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGV4dChmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIC8vIEVYSVQgLSBsZWdlbmQgdGV4dFxyXG4gICAgbGVnZW5kVGV4dC5leGl0KClcclxuICAgICAgICAucmVtb3ZlKCk7XHJcblxyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEluaXRpYWxpemUgdGhlIGRlbmRyb2dyYW0gbGVnZW5kXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaW5pdERlbmRyb2dyYW1MZWdlbmQoKSB7XHJcbiAgICBsZXQgbGVnZW5kV2lkdGggPSA1NTA7XHJcbiAgICBsZXQgbGVnZW5kSGVpZ2h0ID0gNjA7XHJcblxyXG4gICAgbGV0IGRlbmRyb2dyYW1MZWdlbmQgPSBkMy5zZWxlY3QoJyNkZW5kcm9ncmFtLXBhbmVsJylcclxuICAgICAgICAuYXBwZW5kKCdzdmcnKVxyXG4gICAgICAgIC5hdHRyKCdpZCcsICdkZW5kcm9ncmFtLWxlZ2VuZCcpXHJcbiAgICAgICAgLmF0dHIoJ3dpZHRoJywgbGVnZW5kV2lkdGgpXHJcbiAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGxlZ2VuZEhlaWdodCk7XHJcblxyXG4gICAgJCgnI2RlbmRyb2dyYW0tbGVnZW5kJykuaGlkZSgpO1xyXG5cclxuICAgIGxldCBsZWdlbmQ7IC8vIHRoZSBjb2xvciBsZWdlbmRcclxuICAgIGxldCBsZWdlbmRUZXh0OyAvLyBjb2xvciBsZWdlbmQgdGV4dFxyXG4gICAgLy8gdmFycyBmb3IgdGhlIGxlZ2VuZFxyXG4gICAgbGV0IGxlZ2VuZFN3YXRjaFdpZHRoID0gNTA7XHJcbiAgICBsZXQgbGVnZW5kU3dhdGNoSGVpZ2h0ID0gMjA7XHJcblxyXG4gICAgbGV0IGxlZ2VuZERhdGEgPSBzdGFuZGFyZERldmlhdGlvbkNvbG9yU2NhbGUucmFuZ2UoKTtcclxuICAgIC8vVE9ETyBjaGFuZ2UgdGhpcyB0byBiZXR0ZXIgc29sdXRpb25cclxuICAgIGxldCBsZWdlbmRUZXh0RGF0YSA9IFsnbG93JywgJycsICcnLCAnJywgJycsICcnLCAnJywgJycsICdoaWdoJ107XHJcblxyXG4gICAgbGVnZW5kID0gZGVuZHJvZ3JhbUxlZ2VuZC5zZWxlY3RBbGwoJ3JlY3QubGVnZW5kJylcclxuICAgICAgICAuZGF0YShsZWdlbmREYXRhKTtcclxuICAgIGxlZ2VuZFRleHQgPSBkZW5kcm9ncmFtTGVnZW5kLnNlbGVjdEFsbCgndGV4dC5sZWdlbmQtdGV4dCcpXHJcbiAgICAgICAgLmRhdGEobGVnZW5kVGV4dERhdGEpO1xyXG5cclxuICAgIC8vIEVOVEVSIC0gbGVnZW5kXHJcbiAgICBsZWdlbmRcclxuICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgIC5hcHBlbmQoJ3JlY3QnKVxyXG4gICAgICAgIC5hdHRyKCdjbGFzcycsICdsZWdlbmQnKVxyXG4gICAgICAgIC5hdHRyKCd3aWR0aCcsIGxlZ2VuZFN3YXRjaFdpZHRoKVxyXG4gICAgICAgIC5hdHRyKCdoZWlnaHQnLCBsZWdlbmRTd2F0Y2hIZWlnaHQpXHJcbiAgICAgICAgLmF0dHIoJ3knLCAwKVxyXG4gICAgICAgIC5hdHRyKCd4JywgZnVuY3Rpb24oZCwgaSkge1xyXG4gICAgICAgICAgICByZXR1cm4gKGkgKiBsZWdlbmRTd2F0Y2hXaWR0aCkgKyAncHgnO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnN0eWxlKCdmaWxsJywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0gVGV4dCAgLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLy8gRU5URVIgLSBsZWdlbmQgdGV4dFxyXG4gICAgbGVnZW5kVGV4dFxyXG4gICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgLmFwcGVuZCgndGV4dCcpXHJcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xlZ2VuZC10ZXh0JylcclxuICAgICAgICAuYXR0cigneScsIDIgKiBsZWdlbmRTd2F0Y2hIZWlnaHQpXHJcbiAgICAgICAgLmF0dHIoJ3gnLCBmdW5jdGlvbihkLCBpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoaSAqIGxlZ2VuZFN3YXRjaFdpZHRoKSArICdweCc7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGV4dChmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkO1xyXG4gICAgICAgIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IHRoZSBzZXQgb3BlcmF0aW9uXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBvcGVyYXRpb24gLSBlLmcuIFwidW5pb25cIiBcImludGVyc2VjdGlvblwiIFwic3ltLWRpZmZlcmVuY2VcIlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldFNldE9wZXJhdGlvbih2YWx1ZSkge1xyXG4gICAgc2V0T3BlcmF0aW9uID0gdmFsdWU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXQgdGhlIGhpZXJhcmNoeSBncm91cCBzdGFuZGFyZCBkZXZpYXRpb25cclxuICogQHBhcmFtIHtTdHJpbmd9IGtleSAtIHVuaXF1ZSBoYXNoIGlkIGZvciB0aGUgZ3JvdXBcclxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIC0gdW5pcXVlIGhhc2ggaWQgZm9yIHRoZSBncm91cFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldGhpZXJhcmNoeUdyb3VwU3RkZXYoa2V5LCB2YWx1ZSkge1xyXG4gICAgaWYgKGtleSBpbiBoaWVyYXJjaHlHcm91cFN0ZGV2KSB7XHJcbiAgICAgICAgaGllcmFyY2h5R3JvdXBTdGRldltrZXldLnB1c2godmFsdWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBoaWVyYXJjaHlHcm91cFN0ZGV2W2tleV0gPSBbdmFsdWVdO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogUmVzZXQgaGllcmFyY2h5IGdyb3VwIHN0YW5kYXJkIGRldmlhdGlvblxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0aGllcmFyY2h5R3JvdXBTdGRldigpIHtcclxuICAgIGhpZXJhcmNoeUdyb3VwU3RkZXYgPSB7fTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEhpZ2hsaWdodCBhIHN1YnNldCBvZiBhbmltYWxzIGluIHRoZSBzcGF0aWFsIHZpZXdcclxuICogQHBhcmFtIHthcnJheX0gYW5pbWFscyAtIGFycmF5IG9mIGFuaW1hbCBpZHMgd2hpY2ggaGF2ZSB0byBiZSBoaWdobGlnaHRlZFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGFkZEhpZ2hsaWdodFNwYXRpYWxWaWV3KGFuaW1hbHMpIHtcclxuICAgIC8vIHBvaW50cyB0byBjYWxjdWxhdGUgdGhlIGNvbnZleCBodWxsIG9mIHRoZSBoaWdobGlnaHQgY2x1c3RlclxyXG4gICAgbGV0IHZlcnRpY2VzID0gW107XHJcbiAgICAvLyBpdGVyYXRlIHRocm91Z2ggdGhlIG9iamVjdHMgaW4gdGhlIGNsdXN0ZXJcclxuICAgIC8vIGdldCB0aGUgcG9pbnRzIGFuZCBoaWdobGlnaHQgdGhlIGFuaW1hbHNcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYW5pbWFscy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGxldCB0bXBBbmltYWwgPSBzcGF0aWFsVmlldy5zZWxlY3QoJyNhbmltYWwtJyArIGFuaW1hbHNbaV0pO1xyXG4gICAgICAgIGxldCBwb2ludCA9IHRtcEFuaW1hbC5kYXRhKClbMF1bJ3AnXTtcclxuICAgICAgICB2ZXJ0aWNlcy5wdXNoKFtwb2ludFswXSwgLXBvaW50WzFdXSk7XHJcblxyXG4gICAgICAgIHRtcEFuaW1hbC5jbGFzc2VkKCdhbmltYWwtaGlnaGxpZ2h0JywgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICAvLyBhZGQgYSBwb2x5Z29uIGh1bGwgaW4gdGhlIHNwYXRpYWwgdmlld1xyXG4gICAgc3BhdGlhbFZpZXcuYXBwZW5kKCdwYXRoJylcclxuICAgICAgICAuYXR0cignY2xhc3MnLCAnaGlnaGxpZ2h0LWhpZXJhcmNoeScpXHJcbiAgICAgICAgLmF0dHIoJ2QnLCAoJ00nICsgZDMucG9seWdvbkh1bGwodmVydGljZXMpLmpvaW4oJ0wnKSArICdaJykpO1xyXG59XHJcblxyXG4vKipcclxuICogUmVtb3ZlIHRoZSBoaWdobGlnaHQgaW4gdGhlIHNwYXRpYWwgdmlld1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUhpZ2hsaWdodFNwYXRpYWxWaWV3KCkge1xyXG4gICAgLy8gcmVtb3ZlIHRoZSBjb2xvcmluZyBhbmQgdGhlIGhpZXJhcmNoeSBoaWdobGlnaHQgaHVsbFxyXG4gICAgZDMuc2VsZWN0QWxsKCcuYW5pbWFsJykuY2xhc3NlZCgnYW5pbWFsLWhpZ2hsaWdodCcsIGZhbHNlKTtcclxuICAgIGQzLnNlbGVjdEFsbCgnLmhpZ2hsaWdodC1oaWVyYXJjaHknKS5yZW1vdmUoKTtcclxufVxyXG4iLCIvKmVzbGludC1kaXNhYmxlIG5vLXVudXNlZC1sZXRzKi9cclxuLypnbG9iYWwgd2luZG93LCAkLCBwYXJhbWV0ZXJzICovXHJcblxyXG5sZXQgSlNPTkFQSV9NSU1FVFlQRSA9ICdhcHBsaWNhdGlvbi92bmQuYXBpK2pzb24nO1xyXG52YXIgc291cmNlO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGFkZFRvRGF0YXNldCxcclxuICAgIHNldERhdGFTZXRQZXJjZW50aWxlLFxyXG4gICAgc2V0U3dhcm1EYXRhLFxyXG4gICAgc2V0TWV0YURhdGEsXHJcbiAgICBzZXREYXRhc2V0RmVhdHVyZSxcclxuICAgIHNldE5ldHdvcmtEYXRhLFxyXG4gICAgc2V0SGllcmFyY2h5RGF0YSxcclxuICAgIHNldEFuaW1hbElkc1xyXG59IGZyb20gJy4vZXhwbG9yZS5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgYWRkTmV0d29ya0J1dHRvbnMsXHJcbiAgICBzZXROZXR3b3JrSURcclxufSBmcm9tICcuL25ldHdvcmsuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGVuYWJsZVBsYXlCdXR0b24sXHJcbiAgICBkaXNhYmxlUGxheUJ1dHRvbixcclxuICAgIGFkZEFic29sdXRlRmVhdHVyZUJ1dHRvbnNcclxufSBmcm9tICcuL2hlbHBlcnMuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIFNwYXRpYWxWaWV3XHJcbn0gZnJvbSAnLi9zcGF0aWFsX3ZpZXcvc3BhdGlhbF92aWV3LmpzJztcclxuXHJcbi8vIGltcG9ydCB7XHJcbi8vICAgICByZXNwb25zZVBhcmFtZXRlcnNcclxuLy8gfSBmcm9tICcuL3Zpc3VhbF9wYXJhbWV0ZXIuanMnO1xyXG5cclxuXHJcbi8qKlxyXG4gKiBTdHJlYW0gdGhlIG1vdmVtZW50IGRhdGEgZnJvbSB0aGUgQVBJXHJcbiAqIExvYWRzIG9ubHkgdGhlIGV4cGxpY2l0IG1vdmVtZW50IGRhdGFcclxuICovXHJcbi8vY29uc29sZS5sb2coZGF0YSk7XHJcbmV4cG9ydCBmdW5jdGlvbiBzdHJlYW1Nb3ZlbWVudERhdGEoKSB7XHJcbiAgICBpZiAod2luZG93LkV2ZW50U291cmNlKSB7XHJcbiAgICAgICAgc291cmNlID0gbmV3IEV2ZW50U291cmNlKCcvYXBpL21vdmVtZW50X29ubHkvJyArIHBhcmFtZXRlcnNbJ2lkJ10pO1xyXG4gICAgICAgIHNvdXJjZS5vbm1lc3NhZ2UgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmRhdGEgPT09ICdjbG9zZScpIHtcclxuICAgICAgICAgICAgICAgIHNvdXJjZS5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgLy8gaWYgYWxsIGFqYXggcXVlcmllcyBhcmUgY29tcGVsdGUgaW5pdGlhbGl6ZVxyXG4gICAgICAgICAgICAgICAgKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNoZWNrUGVuZGluZ1JlcXVlc3QoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkLmFjdGl2ZSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGNoZWNrUGVuZGluZ1JlcXVlc3QsIDEwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZpZXcgPSBuZXcgU3BhdGlhbFZpZXcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChjaGVja1BlbmRpbmdSZXF1ZXN0LCAxMDApO1xyXG4gICAgICAgICAgICAgICAgfSkoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGFkZFRvRGF0YXNldChKU09OLnBhcnNlKGUuZGF0YSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgc291cmNlLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICBpZiAoZS5yZWFkeVN0YXRlID09IEV2ZW50U291cmNlLkNMT1NFRCkge1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoJ1N0cmVhbWluZyBlcnJvcicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgZmFsc2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBhbGVydCgnV2ViYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IHN0cmVhbWluZycpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogR2V0IHRoZSBwZXJjZW50aWxlIGRhdGEgZnJvbSB0aGUgYXBpIGV4cG9ydCB0byBleHBsb3JlLmpzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGVyY2VudGlsZSgpIHtcclxuICAgIGxldCBkYXRhU2V0UGVyY2VudGlsZSA9IFtdO1xyXG4gICAgJC5hamF4KHtcclxuICAgICAgICB1cmw6ICcvYXBpL3BlcmNlbnRpbGUvJyArIHBhcmFtZXRlcnNbJ2lkJ10sXHJcbiAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICB0eXBlOiAnR0VUJyxcclxuICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgJ0FjY2VwdCc6IEpTT05BUElfTUlNRVRZUEVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgLy8gY29udmVydCB0aGUgZGF0YVNldFBlcmNlbnRpbGUgaW50byBhbiBhcnJheVxyXG4gICAgICAgICAgICAvLyBbbWluLCBwZXJjZW50aWxlXzEsLi4uLHBlcmNlbnRpbGVfOSxtYXhdXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgZGF0YVNldFBlcmNlbnRpbGVbZGF0YVtpXVsnZmVhdHVyZSddXSA9IFtkYXRhW2ldWydtaW4nXSwgZGF0YVtpXVsncDEnXSwgZGF0YVtpXVsncDInXSwgZGF0YVtpXVsncDMnXSwgZGF0YVtpXVsncDUnXSwgZGF0YVtpXVsncDcnXSwgZGF0YVtpXVsncDgnXSwgZGF0YVtpXVsncDknXSwgZGF0YVtpXVsnbWF4J11dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldERhdGFTZXRQZXJjZW50aWxlKGRhdGFTZXRQZXJjZW50aWxlKTtcclxuICAgICAgICAgICAgYWRkQWJzb2x1dGVGZWF0dXJlQnV0dG9ucyhkYXRhU2V0UGVyY2VudGlsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIHN3YXJtIGZlYXR1cmVzIGZvciB0aGUgbGluZSBjaGFydCBmcm9tIHRoZSBhcGlcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRTd2FybUZlYXR1cmVzKCkge1xyXG4gICAgY29uc3Qgc3dhcm1fZmVhdHVyZXMgPSBbJ3N3YXJtX3RpbWUnLCAnc3dhcm1fc3BlZWQnLCAnc3dhcm1fYWNjZWxlcmF0aW9uJywgJ3N3YXJtX2NvbnZleF9odWxsX2FyZWEnLFxyXG4gICAgICAgICdzd2FybV9kaXN0YW5jZV9jZW50cm9pZCcsICdzd2FybV9kaXJlY3Rpb24nLCAnc3dhcm1fcG9sYXJpc2F0aW9uJ1xyXG4gICAgXTtcclxuXHJcbiAgICAvLyBnZXQgYWxsIHRoZSBvdGhlciBzd2FybSBmZWF0dXJlcyBmb3IgdGhlIGxpbmUgY2hhcnRcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3dhcm1fZmVhdHVyZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6ICcvYXBpL2RhdGFzZXQvJyArIHBhcmFtZXRlcnNbJ2lkJ10gKyAnLycgKyBzd2FybV9mZWF0dXJlc1tpXSxcclxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICAgICAgdHlwZTogJ0dFVCcsXHJcbiAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICdBY2NlcHQnOiBKU09OQVBJX01JTUVUWVBFXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGxldCBmZWF0dXJlID0gc3dhcm1fZmVhdHVyZXNbaV0ucmVwbGFjZSgnc3dhcm1fJywgJycpO1xyXG5cclxuICAgICAgICAgICAgICAgIHNldFN3YXJtRGF0YShkYXRhLCBmZWF0dXJlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogR2V0IHRoZSBtZWFkYXRhIGluZm9ybWF0aW9uXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0TWV0YURhdGEoKSB7XHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICAgIHVybDogJy9hcGkvbWV0YWRhdGEvJyArIHBhcmFtZXRlcnNbJ2lkJ10sXHJcbiAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICB0eXBlOiAnR0VUJyxcclxuICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgJ0FjY2VwdCc6IEpTT05BUElfTUlNRVRZUEVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgc2V0TWV0YURhdGEoZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIG5ldHdvcmsgZGF0YXNldHMgZm9yIHRoZSBidXR0b25zXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0TmV0d29ya0RhdGFCdXR0b24oKSB7XHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICAgIHVybDogJy9hcGkvZGF0YXNldC9uZXR3b3Jrcy8nICsgcGFyYW1ldGVyc1snaWQnXSxcclxuICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgIHR5cGU6ICdHRVQnLFxyXG4gICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAnQWNjZXB0JzogSlNPTkFQSV9NSU1FVFlQRVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICBhZGROZXR3b3JrQnV0dG9ucyhkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCB0aGUgc3BlY2lmYyBmZWF0dXJlXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBmZWF0dXJlIC0gZm9yIGluc3RhbmNlIHNwZWVkLCBhY2NlbGVyYXRpb24gZXRjLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldERhdGFzZXRGZWF0dXJlKGZlYXR1cmUpIHtcclxuICAgICQuYWpheCh7XHJcbiAgICAgICAgdXJsOiAnL2FwaS9kYXRhc2V0LycgKyBwYXJhbWV0ZXJzWydpZCddICsgJy8nICsgZmVhdHVyZSxcclxuICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgIHR5cGU6ICdHRVQnLFxyXG4gICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAnQWNjZXB0JzogSlNPTkFQSV9NSU1FVFlQRVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAvLyBhZGQgdGhlIHNwZWVkIGZlYXR1cmUgdG8gdGhlIGRhdGFzZXRcclxuICAgICAgICAgICAgc2V0RGF0YXNldEZlYXR1cmUoZGF0YSwgZmVhdHVyZSk7XHJcbiAgICAgICAgICAgIGVuYWJsZVBsYXlCdXR0b24oKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCB0aGUgc3BlY2lmYyBzd2FybSBmZWF0dXJlXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBmZWF0dXJlIC0gZm9yIGluc3RhbmNlIGNlbnRyb2lkLCBtZWRvaWQgZXRjLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFN3YXJtRGF0YXNldEZlYXR1cmUoZmVhdHVyZSkge1xyXG4gICAgZGlzYWJsZVBsYXlCdXR0b24oKTtcclxuICAgICQuYWpheCh7XHJcbiAgICAgICAgdXJsOiAnL2FwaS9kYXRhc2V0LycgKyBwYXJhbWV0ZXJzWydpZCddICsgJy8nICsgZmVhdHVyZSxcclxuICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgIHR5cGU6ICdHRVQnLFxyXG4gICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAnQWNjZXB0JzogSlNPTkFQSV9NSU1FVFlQRVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAvLyBhZGQgdGhlIHNwZWVkIGZlYXR1cmUgdG8gdGhlIGRhdGFzZXRcclxuICAgICAgICAgICAgc2V0U3dhcm1EYXRhKGRhdGEsIGZlYXR1cmUpO1xyXG4gICAgICAgICAgICBlbmFibGVQbGF5QnV0dG9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIG5ldHdvcmsgZm9yIHRoZSBzcGVjaWZpYyBuZXR3b3JrX2lkXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBuZXR3b3JrX2lkIC0gdW5pcXVlIG5ldHdvcmsgaWQgb2YgYSBkYXRhc2V0LlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldE5ldHdvcmtEYXRhKG5ldHdvcmtfaWQpIHtcclxuICAgICQuYWpheCh7XHJcbiAgICAgICAgdXJsOiAnL2FwaS9kYXRhc2V0L25ldHdvcmsvJyArIHBhcmFtZXRlcnNbJ2lkJ10gKyAnLycgKyBuZXR3b3JrX2lkLFxyXG4gICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgdHlwZTogJ0dFVCcsXHJcbiAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICdBY2NlcHQnOiBKU09OQVBJX01JTUVUWVBFXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgc2V0TmV0d29ya0RhdGEoSlNPTi5wYXJzZShkYXRhWzBdWydkYXRhJ10pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbmFibGVQbGF5QnV0dG9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAvLyBuZWVkZWQgZm9yIHN0YW5kYXJkIERldmlhdGlvbiBpbiBkZW5kcm9ncmFtXHJcbiAgICBzZXROZXR3b3JrSUQobmV0d29ya19pZCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIG5ldHdvcmsgaGllcmFyY2h5IGZvciB0aGUgc3BlY2lmaWMgbmV0d29ya19pZFxyXG4gKiBAcGFyYW0ge1N0cmluZ30gbmV0d29ya19pZCAtIHVuaXF1ZSBuZXR3b3JrIGlkIG9mIGEgZGF0YXNldC5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXROZXR3b3JrSGllcmFyY2h5RGF0YShuZXR3b3JrX2lkKSB7XHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICAgIHVybDogJy9hcGkvZGF0YXNldC9uZXR3b3JrL2hpZXJhcmNoeS8nICsgcGFyYW1ldGVyc1snaWQnXSArICcvJyArIG5ldHdvcmtfaWQsXHJcbiAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICB0eXBlOiAnR0VUJyxcclxuICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgJ0FjY2VwdCc6IEpTT05BUElfTUlNRVRZUEVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgaWYgKGRhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRIaWVyYXJjaHlEYXRhKEpTT04ucGFyc2UoZGF0YVswXVsnaGllcmFyY2h5J10pLCBuZXR3b3JrX2lkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbmFibGVQbGF5QnV0dG9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIGRpc3RpbmN0IGFuaW1hbCBpZHMgZm9yIGEgc3BlY2lmYyBkYXRhc2V0XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0QW5pbWFsSWRzKCkge1xyXG4gICAgJC5hamF4KHtcclxuICAgICAgICB1cmw6ICcvYXBpL2RhdGFzZXQvJyArIHBhcmFtZXRlcnNbJ2lkJ10gKyAnL2FuaW1hbF9pZHMnLFxyXG4gICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgdHlwZTogJ0dFVCcsXHJcbiAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICdBY2NlcHQnOiBKU09OQVBJX01JTUVUWVBFXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgIHNldEFuaW1hbElkcyhkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuLy8gLyoqXHJcbi8vICAqIFZpc3VhbCBwYXJhbWV0ZXIgc3VnZ2VzdGlvbiBhamF4IHF1ZXJ5XHJcbi8vICAqIEBwYXJhbSB7QXJyYXl9IHRyYWNrZWREYXRhIC0gdHJhY2tlZCBkYXRhIHdpdGggLlxyXG4vLyAgKi9cclxuLy8gZXhwb3J0IGZ1bmN0aW9uIGdldFN1Z2dlc3RlZFBhcmFtZXRlcnModHJhY2tlZERhdGEpIHtcclxuLy8gICAgICQuYWpheCh7XHJcbi8vICAgICAgICAgdXJsOiAnL2FwaS9kYXRhc2V0L3Zpc3VhbF9wYXJhbWV0ZXIvJyArIHBhcmFtZXRlcnNbJ2lkJ10sXHJcbi8vICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuLy8gICAgICAgICB0eXBlOiAnUE9TVCcsXHJcbi8vICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcclxuLy8gICAgICAgICBoZWFkZXJzOiB7XHJcbi8vICAgICAgICAgICAgICdBY2NlcHQnOiBKU09OQVBJX01JTUVUWVBFXHJcbi8vICAgICAgICAgfSxcclxuLy8gICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XHJcbi8vICAgICAgICAgICAgIHJlc3BvbnNlUGFyYW1ldGVycyhkYXRhKTtcclxuLy8gICAgICAgICB9LFxyXG4vLyAgICAgICAgIGRhdGE6IHRyYWNrZWREYXRhXHJcbi8vICAgICB9KTtcclxuLy9cclxuLy8gfVxyXG4iLCIvKmVzbGludC1kaXNhYmxlIG5vLXVudXNlZC1sZXRzKi9cclxuLypnbG9iYWwgd2luZG93LCAkLCBkMyAqL1xyXG5pbXBvcnQge1xyXG4gICAgaGllcmFyY2h5Q29sb3JzLFxyXG4gICAgY29sb3JzLFxyXG4gICAgY2hhbmdlSGllcmFyY2h5TGVnZW5kXHJcbn0gZnJvbSAnLi9oaWVyYXJjaHkuanMnO1xyXG5cclxuXHJcblxyXG5leHBvcnQgbGV0IG5ldHdvcmtBdXRvID0gZmFsc2U7IC8vIGlmIHRydWUgdGhlIG5ldHdvcmsgZWRnZSBsaW1pdCBpcyBhdXRvbWF0aWNhbGx5IHN1Z2dlc3RlZFxyXG5leHBvcnQgbGV0IG5ldHdvcmtMaW1pdCA9IDAuNTtcclxuZXhwb3J0IGxldCBzaG93TmV0d29ya0hpZXJhcmNoeTtcclxuZXhwb3J0IGxldCBuZXR3b3JrQ29sb3IgPSB7fTtcclxuZXhwb3J0IGxldCBuZXR3b3JrSUQ7XHJcbmV4cG9ydCBsZXQgbmV0d29ya0JhY2tncm91bmQgPSB0cnVlO1xyXG5leHBvcnQgbGV0IG5ldHdvcmtCYWNrZ3JvdW5kTGltaXQgPSAxOyAvL2RyYXcgYmFja2dyb3VuZCBsaW5lIGlmIGxpbWl0IGlzIGV4Y2VlZGVkXHJcbi8vIGZpeGVkIGNvbG9yIHNjYWxlIGZvciB0aGUgbmV0d29ya1xyXG5cclxuLyoqXHJcbiAqIGNvbG9yIHNjYWxlIGZvciBuZXR3b3JrIC0gcmFuZ2UgaXMgZGVmaW5lZCBkeW5hbWljIGJhc2VkIG9uIHRoZSBoaWVyYXJoY3kgY29sb3JcclxuICovXHJcbmV4cG9ydCBsZXQgbmV0d29ya0NvbG9yU2NhbGUgPSBkMy5zY2FsZVRocmVzaG9sZCgpXHJcbiAgICAuZG9tYWluKFxyXG4gICAgICAgIFswLCAuMSwgLjIsIC4zLCAuNCwgLjUsIC42LCAuNywgLjgsIC45LCAxXVxyXG4gICAgKS5yYW5nZShbJyNmN2ZiZmYnLCAnI2RlZWJmNycsICcjYzZkYmVmJywgJyM5ZWNhZTEnLCAnIzZiYWVkNicsICcjNDI5MmM2JywgJyMyMTcxYjUnLCAnIzA4NTE5YycsICcjMDgzMDZiJ10pO1xyXG5cclxuXHJcbi8qKlxyXG4gKiBBZGQgdGhlIG5ldHdvcmsgIHNlbGVjdCBidXR0b25zIGFuZCBoaWVyYXJjaHkgY2hlY2tib3hlcyB0byB0aGUgbmV0d29yayBtb2RhbFxyXG4gKiBAcGFyYW0ge2FycmF5fSBkYXRhIC0gQXJyYXkgb2YgbmV0d29yayBkYXRhXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gYWRkTmV0d29ya0J1dHRvbnMoZGF0YSkge1xyXG4gICAgaWYgKGRhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhW2ldWydmaW5pc2hlZCddKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjbmV0d29ya3MtaGllcmFyY2hpZXMtdGFibGUgdGJvZHknKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJzx0cj48dGQ+JyArIGRhdGFbaV1bJ25hbWUnXSArICc8L3RkPiAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzx0ZD4gPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHRcIiBkYXRhPScgKyBkYXRhW2ldWyduZXR3b3JrX2lkJ10gKyAnIG5hbWU9JyArIGRhdGFbaV1bJ25hbWUnXSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc+PHNwYW4gY2xhc3M9XCJtZGkgbWRpLWdyYXBocWxcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L3NwYW4+PC9idXR0b24+PC90ZD4gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8dGQ+PGRpdiBjbGFzcz1cInByZXR0eSBwLXN3aXRjaCBwLWZpbGxcIj48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgY2xhc3M9XCJoaWVhcmNoeS1jaGVja2JveFwiIGRhdGE9XCInICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtpXVsnbmV0d29ya19pZCddICsgJ1wiIG5hbWU9XCInICsgZGF0YVtpXVsnbmFtZSddICsgJ1wiPjxkaXYgY2xhc3M9XCJzdGF0ZSBwLXN1Y2Nlc3NcIj48bGFiZWw+PC9sYWJlbD48L2Rpdj48L2Rpdj48L3RkPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPHRkPi0tLTwvdGQ+J1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAnPHRkPjxkaXYgY2xhc3M9XCJwcmV0dHkgcC1zd2l0Y2ggcC1maWxsXCI+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGNsYXNzPVwibmV0d29yay1oaWVyYXJjaHktY2hlY2tib3hcIiBkYXRhPVwiJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRhdGFbaV1bJ25ldHdvcmtfaWQnXSArICdcIj48ZGl2IGNsYXNzPVwic3RhdGUgcC1zdWNjZXNzXCI+PGxhYmVsPjwvbGFiZWw+PC9kaXY+PC9kaXY+PC90ZD4nXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJCgnI25ldHdvcmtzLWhpZXJhcmNoaWVzLXRhYmxlJylcclxuICAgICAgICAgICAgLmFwcGVuZCgnVGhlcmUgaXMgbm8gbmV0d29yayBkYXRhIGZvciB0aGlzIGRhdGFzZXQnKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICBTZXR0ZXJcclxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4vKipcclxuICogU2V0IHRoZSBuZXR3b3JrIGF1dG8gdmFsdWUgLSBpZiB0cnVlIHRoYW4gdGhlIG5ldHdvcmsgbGltaXQgaXMgc2V0IHRvIHRoZSAwLjk1IHBlcmNlbnRpbGUgb2YgYWxsIHZhbHVlc1xyXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHZhbHVlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2V0TmV0d29ya0F1dG8odmFsdWUpIHtcclxuICAgIG5ldHdvcmtBdXRvID0gdmFsdWU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXQgdGhlIG5ldHdvcmsgbGltaXQgd2l0aCB0aGUgc3BlY2lmaWMgbmV0d29yayBzbGlkZXIgLSBjdXN0b21cclxuICogMCA9IHNpbWlsYXIgYW5kIDEgdW5zaW1pbGFyIGZvciB0aGUgc3BlY2lmaWMgdGltZSBtb21lbnRcclxuICogQHBhcmFtIHtOdW1iZXJ9IHZhbHVlIC0gYmV0d2VlbiAwIGFuZCAxXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2V0TmV0d29yTGltaXQodmFsdWUpIHtcclxuICAgIG5ldHdvcmtMaW1pdCA9IHZhbHVlO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IHRoZSBuZXR3b3JrIGluIGhpZXJhcmNoeSAoZS5nLiBoMCkgZmlsdGVyXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBoaWVyYXJjaHkgLSBlLmcuIDAtblxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldE5ldHdvcmtIaWVyYXJjaHkodmFsdWUpIHtcclxuICAgIHNob3dOZXR3b3JrSGllcmFyY2h5ID0gdmFsdWU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXQgdGhlIG5ldHdvcmsgbmV0d29yayBpZCAtIG5lZWRlZCBmb3IgaGllcmFyY2h5IHN0YW5kYXJkIGRldmlhdGlvbiBjb2xvcmluZ1xyXG4gKiBAcGFyYW0ge051bWJlcn0gdmFsdWUgLSBlLmcuIDAtblxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldE5ldHdvcmtJRCh2YWx1ZSkge1xyXG4gICAgbmV0d29ya0lEID0gdmFsdWU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXQgbmV0d29yayBjb2xvciBzY2FsZSByYW5nZVxyXG4gKiBAcGFyYW0ge051bWJlcn0gaWQgLSBpZCBvZiB0aGUgbmV0d29ya1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldG5ldHdvcmtDb2xvcihuZXR3b3JrX2lkKSB7XHJcbiAgICAvLyBpZiBpZCA9IC0xIHNldCB0aGUgY29sb3IgdG8gbm90aGluZ1xyXG4gICAgaWYgKG5ldHdvcmtfaWQgPj0gMCkge1xyXG4gICAgICAgIG5ldHdvcmtDb2xvclsnaCcgKyBuZXR3b3JrX2lkXSA9ICcjMDgzMDZiJztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbmV0d29ya0NvbG9yID0ge307XHJcbiAgICB9XHJcbiAgICBjaGFuZ2VIaWVyYXJjaHlMZWdlbmQoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldCB0aGUgYm9vbGVhbiB2YWx1ZSBmb3IgdGhlIG5ldHdvcmsgYmFja2dyb3VuZCBjb2xvclxyXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHZhbHVlIC0gdHJ1ZSBvciBmYWxzZVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldE5ldHdvcmtCYWNrZ3JvdW5kKHZhbHVlKSB7XHJcbiAgICBuZXR3b3JrQmFja2dyb3VuZCA9IHZhbHVlO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFNldCB0aGUgbmV0d29yayBiYWNrZ3JvdW5kIGNvbG9yIGxpbWl0IC0gZHJhdyBiYWNrZ3JvdW5kIGxpbmUgaWYgbGltaXQgaXMgZXhjZWVkZWRcclxuICogQHBhcmFtIHtJbnRlZ2VyfSB2YWx1ZSAtIG5ldyBsaW1pdFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldE5ldHdvcmtCYWNrZ3JvdW5kTGltaXQodmFsdWUpIHtcclxuICAgIG5ldHdvcmtCYWNrZ3JvdW5kTGltaXQgPSB2YWx1ZTtcclxufSIsIi8qZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLWxldHMqL1xyXG4vKmdsb2JhbCB3aW5kb3csIGQzLCAkLCBwYXJhbWV0ZXJzKi9cclxuaW1wb3J0IHtcclxuICAgIHNldEluZGV4VGltZSxcclxuICAgIERyYXdlclxyXG59IGZyb20gJy4vc3BhdGlhbF92aWV3L3NwYXRpYWxfdmlldy5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgc3dhcm1EYXRhLFxyXG4gICAgZGF0YXNldCxcclxuICAgIGFuaW1hbElkc1xyXG59IGZyb20gJy4vZXhwbG9yZS5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgcGVyY2VudGlsZXNMaW5lQ2hhcnRcclxufSBmcm9tICcuL2hlbHBlcnMuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGluZGV4VGltZSxcclxufSBmcm9tICcuL3NwYXRpYWxfdmlldy9zcGF0aWFsX3ZpZXcnO1xyXG5cclxuXHJcblxyXG5cclxuZXhwb3J0IGxldCB6b29tRnVuY3Rpb247XHJcblxyXG5sZXQgdHJlbmRDaGFydHNab29tID0ge307XHJcbi8vbGV0IHRoaXMudHJlbmRDaGFydHNFbGVtID0gWydsb3dlci1vdXRlci1hcmVhJywgJ2xvd2VyLWlubmVyLWFyZWEnLCAnbWVkaWFuLWxpbmUnLCAndXBwZXItaW5uZXItYXJlYScsICd1cHBlci1vdXRlci1hcmVhJ107XHJcbi8vbGV0IGxpbmVDaGFydFdpZHRoID0gNTAwMDtcclxubGV0IHJhdGlvID0gMTtcclxubGV0IHpvb21Hcm91cDtcclxubGV0IHg7XHJcbmxldCB5O1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuLy9yYXRpbyA9IE1hdGguY2VpbChzd2FybURhdGEubGVuZ3RoIC8gdGhpcy5saW5lQ2hhcnRXaWR0aCk7XHJcbiAgICAvL2NvbnNvbGUubG9nKHN3YXJtRGF0YSk7XHJcbiAgICAvL2xldCByZXN1bHQgPSBzd2FybURhdGEubWFwKG9iaiA9PiAoe3RpbWU6b2JqLnRpbWUsIGRpc3RfY2VuOm9iai5kaXN0YW5jZV9jZW50cm9pZH0pKTtcclxuICAgIC8vY29uc29sZS5sb2cocmVzdWx0KTtcclxuXHJcblxyXG5cclxuXHJcblxyXG4vL2xpbmVjaGFydC5kcmF3KCk7XHJcbi8vbGV0IHN3YXJtRGF0ID0gbmV3IHN3YXJtRGF0YSgpO1xyXG4iLCIvKmVzbGludC1kaXNhYmxlIG5vLXVudXNlZC1sZXRzKi9cclxuLypnbG9iYWwgd2luZG93LCAkICovXHJcbi8vIGltcG9ydCBhbGwganNcclxuaW1wb3J0ICogYXMgcXVlcmllcyBmcm9tICcuL2FqYXhfcXVlcmllcy5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgaW5pdGlhbGl6ZU1ldGFkZGF0YVxyXG59IGZyb20gJy4vbWV0YWRhdGEuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIHNldEhpZXJhcmNoeUxldmVsLFxyXG4gICAgcmVtb3ZlSGllcmFyY2h5TGV2ZWwsXHJcbiAgICBzZXRIaWVyYXJjaHlDb2xvcixcclxuICAgIHJlbW92ZUhpZXJhcmNoeUNvbG9yLFxyXG4gICAgY2hhbmdlSGllcmFyY2h5TGVnZW5kXHJcbn0gZnJvbSAnLi9oaWVyYXJjaHkuanMnO1xyXG5cclxuLy8gaW1wb3J0IGNzc1xyXG5pbXBvcnQgJy4vZXhwbG9yZS5jc3MnO1xyXG5cclxuaW1wb3J0IENoYXJ0IGZyb20gJy4vbGluZV9jaGFydC5qcyc7XHJcblxyXG5leHBvcnQgbGV0IGRhdGFzZXQgPSBbXTsgLy8gbWFpbiBkYXRhc2V0IHdpdGggdmFsdWVzIGZvciBlYWNoIGluZGl2aWR1YWwgYW5pbWFsXHJcbmV4cG9ydCBsZXQgZGF0YXNldE1ldGFkYXRhID0gW107IC8vIG1ldGFkYXRhc2V0IGZvciBlYWNoIGluZGl2aWR1YWwgZmlzaFxyXG5leHBvcnQgbGV0IHN3YXJtRGF0YSA9IFtdOyAvLyBzd2FybWRhdGEgZm9yIGxpbmVjaGFydCBhbmQgYWxzbyBvdGhlciBzd2FybSBmZWF0dXJlc1xyXG5leHBvcnQgbGV0IGRhdGFTZXRQZXJjZW50aWxlID0ge307IC8vIHBlY2VudGlsZXMgbmVlZGVkIGZvciB0aGUgY29sb3IgbWFwcGluZ1xyXG5leHBvcnQgbGV0IG5ldHdvcmtEYXRhID0ge307IC8vIG5ldHdvcmsgZGF0YVxyXG5leHBvcnQgbGV0IG5ldHdvcmtIaWVyYXJjaHkgPSB7fTsgLy8gbmV0d29yayBoaWVyYXJjaHkgZGF0YVxyXG5leHBvcnQgbGV0IGFuaW1hbElkcyA9IHt9OyAvLyBkaXN0aW5jdCBhbmltYWwgaWRzXHJcblxyXG5cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIGJhc2ljIGRhdGEgdG8gZ2V0IHRoZSB0b29sIHJ1bm5pbmcuXHJcbiAqIGFmdGVyIHRoZSBwZW5kaW5nIGFqYXggcXVlcmllcyBhcmUgZmluaXNoZWRcclxuICogdGhlIHRvb2wgaXMgZHJhd25cclxuICovXHJcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xyXG4gICAgLy8gY29uc29sZS5sb2cocGFyYW1ldGVycyk7XHJcblxyXG4gICAgLy8gZ2V0IHRoZSBtb3ZlbWVudCBkYXRhXHJcbiAgICBxdWVyaWVzLnN0cmVhbU1vdmVtZW50RGF0YSgpO1xyXG5cclxuICAgIC8vIGdldCB0aGUgZGF0YVNldFBlcmNlbnRpbGVcclxuICAgIHF1ZXJpZXMuZ2V0UGVyY2VudGlsZSgpO1xyXG5cclxuICAgIC8vIGdldCB0aGUgZGlzdGluY3QgYW5pbWFsIGlkcyBmb3IgdGhlIHdob2xlIGRhdGFzZXRcclxuICAgIHF1ZXJpZXMuZ2V0QW5pbWFsSWRzKCk7XHJcblxyXG4gICAgLy8gZ2V0IHRoZSBzd2FybSBmZWF0dXJlcyBmb3IgdGhlIGxpbmUgY2hhcnRcclxuICAgIHF1ZXJpZXMuZ2V0U3dhcm1GZWF0dXJlcygpO1xyXG5cclxuICAgIC8vIGdldCB0aGUgbWV0YWRhdGEgYW5kIGluaXRpYWxpemUgdGhlIG1ldGFkYSB3aW5kb3dcclxuICAgIHF1ZXJpZXMuZ2V0TWV0YURhdGEoKTtcclxuXHJcbiAgICAvLyBnZXQgdGhlIGluZm9ybWF0aW9uIGlmIHRoZXJlIGFyZSBhbHJlYWR5IG5ldHdvcmtzIGNyZWF0ZWQgZm9yIHRoaXMgZGFzdGFzZXRcclxuICAgIHF1ZXJpZXMuZ2V0TmV0d29ya0RhdGFCdXR0b24oKTtcclxufSk7XHJcblxyXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICBHZXR0ZXIgYW5kIHNldHRlclxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbi8qKlxyXG4gKiBDb25jYWN0IHRvIHRoZSBtYWluIGRhdGFzZXRcclxuICogdGhlIGlkZWEgaXMgdG8gdXNlIHRoaXMgb25lIGRheSBmb3IgbGF6eSBsb2FkaW5nXHJcbiAqIEBwYXJhbSB7YXJyYXl9IHZhbHVlIC0gYXJyYXkgb2YgbW92ZW1lbnQgZGF0YXNldHNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRUb0RhdGFzZXQodmFsdWUpIHtcclxuICAgIGRhdGFzZXQgPSBkYXRhc2V0LmNvbmNhdCh2YWx1ZSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXQgZGF0YXNldCBwZXJjZW50aWxlXHJcbiAqIEBwYXJhbSB7YXJyYXl9IHZhbHVlIC0gYXJyYXkgb2YgYXJyYXJ5c1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldERhdGFTZXRQZXJjZW50aWxlKHZhbHVlKSB7XHJcbiAgICBkYXRhU2V0UGVyY2VudGlsZSA9IHZhbHVlO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IGRhdGFzZXQgbWV0YWRhdGFcclxuICogQHBhcmFtIHthcnJheX0gdmFsdWUgLSBhcnJheVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldE1ldGFEYXRhKHZhbHVlKSB7XHJcbiAgICBkYXRhc2V0TWV0YWRhdGEgPSB2YWx1ZTtcclxuICAgIC8vIGluaXRpYWxpemUgdGhlIG1ldGFkYXRhIG1vZGFsXHJcbiAgICBpbml0aWFsaXplTWV0YWRkYXRhKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBZGQgYSBuZXcgZmVhdHVyZSBkaW1lbnNpb24gdG8gdGhlIHN3YXJtIGRhdGFzZXRcclxuICogQHBhcmFtIHthcnJheX0gZGF0YSAtIEFycmF5IG9mIHN3YXJtIHZhbHVlcyBjb25zaXN0aW5nIG9mIFtmZWF0dXJlXzAsZmVhdHVyZV8xLC4uLl1cclxuICogQHBhcmFtIHtzdHJpbmd9IGZlYXR1cmUgLSBzdHJpbmcgYXJyYXkgb2YgdGhlIGZlYXR1cmVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRTd2FybURhdGEoZGF0YSwgZmVhdHVyZSkge1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgLy8gYWRkIHRoZSB0aGUgb2JqZWN0IHRvIHRoZSBhcnJheSBpZiB0aGVyZSBpcyBubyBlbGVtZW50IHlldFxyXG4gICAgICAgIGlmICh0eXBlb2Ygc3dhcm1EYXRhW2ldID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICBzd2FybURhdGEucHVzaCh7fSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBjaGVjayBpZiBpbnRlZ2VyIG9yIGZsb2F0XHJcbiAgICAgICAgaWYgKGRhdGFbaV0gJiYgIShpc05hTihkYXRhW2ldKSkpIHtcclxuICAgICAgICAgICAgc3dhcm1EYXRhW2ldW2ZlYXR1cmVdID0gK2RhdGFbaV07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gaXMgc3RyaW5nXHJcbiAgICAgICAgICAgIHN3YXJtRGF0YVtpXVtmZWF0dXJlXSA9IGRhdGFbaV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEFkZCBhIG5ldyBmZWF0dXJlIGRpbWVuc2lvbiB0byB0aGUgZGF0YXNldFxyXG4gKiBAcGFyYW0ge2FycmF5fSBkYXRhIC0gQXJyYXkgb2YgZmVhdHVyZXMgdmFsdWVzIGNvbnNpc3Rpbmcgb2YgW2ZlYXR1cmVfMCwgZmVhdHVyZV8xLC4uLl1cclxuICogQHBhcmFtIHtzdHJpbmd9IGZlYXR1cmUgLSBzdHJpbmcgYXJyYXkgb2YgdGhlIGZlYXR1cmVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXREYXRhc2V0RmVhdHVyZShkYXRhLCBmZWF0dXJlKSB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAvLyBhZGQgdGhlIHRoZSBvYmplY3QgdG8gdGhlIGFycmF5IGlmIHRoZXJlIGlzIG5vIGVsZW1lbnQgeWV0XHJcbiAgICAgICAgaWYgKHR5cGVvZiBkYXRhc2V0W2ldID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICBkYXRhc2V0LnB1c2goe30pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBwYXJzZSB0aGUgaW50XHJcbiAgICAgICAgZGF0YXNldFtpXVtmZWF0dXJlXSA9ICtkYXRhW2ldO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogU2V0IHRoZSBuZXR3b3JrIHZhbHVlXHJcbiAqIEBwYXJhbSB7YXJyYXl9IHZhbHVlIC0gQXJyYXkgb2Ygb2YgYXJyYXlzIHdpdGggYWxsIHZhbHVlc1xyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gdGhlIGNhbGN1bGF0ZWQgYWRqYWNlbmN5IG1hdHJpeFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldE5ldHdvcmtEYXRhKHZhbHVlKSB7XHJcbiAgICBuZXR3b3JrRGF0YSA9IHZhbHVlO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IHRoZSBuZXR3b3JrIGhpZWFyaGN5IHZhbHVlXHJcbiAqIEBwYXJhbSB7YXJyYXl9IHZhbHVlIC0gQXJyYXkgb2Ygb2YgYXJyYXlzIHdpdGggYWxsIHZhbHVlc1xyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpdGggaGllcmFyY2h5XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2V0SGllcmFyY2h5RGF0YSh2YWx1ZSwgbmV0d29ya19pZCkge1xyXG4gICAgLy8gaWYgdGhlIGVsZW1lbnQgaXMgZW1wdHkgcmVtb3ZlIHRoZSBlbGVtZW50IGZyb20gdGhlIG5ldHdyb2tIaWVyYXJjaHkgb2JqZWN0XHJcbiAgICBpZiAoT2JqZWN0LmtleXModmFsdWUpLmxlbmd0aCA9PT0gMCAmJiB2YWx1ZS5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0KSB7XHJcbiAgICAgICAgZGVsZXRlIG5ldHdvcmtIaWVyYXJjaHlbJ2gnICsgbmV0d29ya19pZF07XHJcbiAgICAgICAgcmVtb3ZlSGllcmFyY2h5TGV2ZWwobmV0d29ya19pZCk7XHJcbiAgICAgICAgcmVtb3ZlSGllcmFyY2h5Q29sb3IobmV0d29ya19pZCk7XHJcbiAgICB9IC8vIGFkZCBpdCB0byB0aGUgbmV0d29yayBoaWVyYXJjaHlcclxuICAgIGVsc2Uge1xyXG4gICAgICAgIG5ldHdvcmtIaWVyYXJjaHlbJ2gnICsgbmV0d29ya19pZF0gPSB2YWx1ZTtcclxuICAgICAgICBzZXRIaWVyYXJjaHlMZXZlbChuZXR3b3JrX2lkLCAyKTtcclxuICAgICAgICBzZXRIaWVyYXJjaHlDb2xvcihuZXR3b3JrX2lkKTtcclxuICAgIH0gLy8gdG9vIG1hbnkgZWxlbWVudHMgY2FudCBiZSBhZGRlZFxyXG5cclxuICAgIC8vY2hhbmdlSGllcmFyY2h5TGVnZW5kKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXQgYW5pbWFsIGlkcyBkYXRhc2V0XHJcbiAqIEBwYXJhbSB7YXJyYXl9IGlkcyAtIEFycmF5IG9mIGFsbCBkaXN0aW5jdCBhbmltYWwgaWRzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2V0QW5pbWFsSWRzKHZhbHVlKSB7XHJcbiAgICBhbmltYWxJZHMgPSB2YWx1ZTtcclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9